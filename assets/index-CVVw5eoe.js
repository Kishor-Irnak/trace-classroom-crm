var Dw=t=>{throw TypeError(t)};var ep=(t,e,n)=>e.has(t)||Dw("Cannot "+n);var Q=(t,e,n)=>(ep(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>e.has(t)?Dw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(ep(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),$t=(t,e,n)=>(ep(t,e,"access private method"),n);var Ju=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return Q(t,e,r)}});function dj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function BE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HE={exports:{}},wf={},WE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),hj=Symbol.for("react.portal"),fj=Symbol.for("react.fragment"),mj=Symbol.for("react.strict_mode"),pj=Symbol.for("react.profiler"),gj=Symbol.for("react.provider"),yj=Symbol.for("react.context"),vj=Symbol.for("react.forward_ref"),xj=Symbol.for("react.suspense"),wj=Symbol.for("react.memo"),bj=Symbol.for("react.lazy"),Mw=Symbol.iterator;function _j(t){return t===null||typeof t!="object"?null:(t=Mw&&t[Mw]||t["@@iterator"],typeof t=="function"?t:null)}var qE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GE=Object.assign,KE={};function rl(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||qE}rl.prototype.isReactComponent={};rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QE(){}QE.prototype=rl.prototype;function Jy(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||qE}var Zy=Jy.prototype=new QE;Zy.constructor=Jy;GE(Zy,rl.prototype);Zy.isPureReactComponent=!0;var Ow=Array.isArray,XE=Object.prototype.hasOwnProperty,ev={current:null},YE={key:!0,ref:!0,__self:!0,__source:!0};function JE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)XE.call(e,r)&&!YE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:su,type:t,key:i,ref:o,props:s,_owner:ev.current}}function Ej(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tv(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function Sj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lw=/\/+/g;function tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sj(""+t.key):e.toString(36)}function Md(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case su:case hj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+tp(o,0):r,Ow(s)?(n="",t!=null&&(n=t.replace(Lw,"$&/")+"/"),Md(s,e,n,"",function(u){return u})):s!=null&&(tv(s)&&(s=Ej(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Lw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ow(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+tp(i,l);o+=Md(i,e,n,c,s)}else if(c=_j(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+tp(i,l++),o+=Md(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zu(t,e,n){if(t==null)return t;var r=[],s=0;return Md(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Tj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},Od={transition:null},Nj={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Od,ReactCurrentOwner:ev};function ZE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Zu,forEach:function(t,e,n){Zu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zu(t,function(){e++}),e},toArray:function(t){return Zu(t,function(e){return e})||[]},only:function(t){if(!tv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=rl;Te.Fragment=fj;Te.Profiler=pj;Te.PureComponent=Jy;Te.StrictMode=mj;Te.Suspense=xj;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nj;Te.act=ZE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=GE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ev.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)XE.call(e,c)&&!YE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:su,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:yj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gj,_context:t},t.Consumer=t};Te.createElement=JE;Te.createFactory=function(t){var e=JE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:vj,render:t}};Te.isValidElement=tv;Te.lazy=function(t){return{$$typeof:bj,_payload:{_status:-1,_result:t},_init:Tj}};Te.memo=function(t,e){return{$$typeof:wj,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Od.transition;Od.transition={};try{t()}finally{Od.transition=e}};Te.unstable_act=ZE;Te.useCallback=function(t,e){return on.current.useCallback(t,e)};Te.useContext=function(t){return on.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Te.useEffect=function(t,e){return on.current.useEffect(t,e)};Te.useId=function(){return on.current.useId()};Te.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return on.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};Te.useRef=function(t){return on.current.useRef(t)};Te.useState=function(t){return on.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return on.current.useTransition()};Te.version="18.3.1";WE.exports=Te;var m=WE.exports;const Se=BE(m),eS=dj({__proto__:null,default:Se},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cj=m,Ij=Symbol.for("react.element"),kj=Symbol.for("react.fragment"),Aj=Object.prototype.hasOwnProperty,Rj=Cj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pj={key:!0,ref:!0,__self:!0,__source:!0};function tS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Aj.call(e,r)&&!Pj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ij,type:t,key:i,ref:o,props:s,_owner:Rj.current}}wf.Fragment=kj;wf.jsx=tS;wf.jsxs=tS;HE.exports=wf;var a=HE.exports,nS={exports:{}},Vn={},rS={exports:{}},sS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,L){var z=O.length;O.push(L);e:for(;0<z;){var F=z-1>>>1,X=O[F];if(0<s(X,L))O[F]=L,O[z]=X,z=F;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var L=O[0],z=O.pop();if(z!==L){O[0]=z;e:for(var F=0,X=O.length,Y=X>>>1;F<Y;){var J=2*(F+1)-1,le=O[J],ee=J+1,q=O[ee];if(0>s(le,z))ee<X&&0>s(q,le)?(O[F]=q,O[ee]=z,F=ee):(O[F]=le,O[J]=z,F=J);else if(ee<X&&0>s(q,z))O[F]=q,O[ee]=z,F=ee;else break e}}return L}function s(O,L){var z=O.sortIndex-L.sortIndex;return z!==0?z:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,v=!1,_=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(O){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=O)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function A(O){if(y=!1,T(O),!_)if(n(c)!==null)_=!0,U(j);else{var L=n(u);L!==null&&H(A,L.startTime-O)}}function j(O,L){_=!1,y&&(y=!1,b(S),S=-1),v=!0;var z=p;try{for(T(L),f=n(c);f!==null&&(!(f.expirationTime>L)||O&&!k());){var F=f.callback;if(typeof F=="function"){f.callback=null,p=f.priorityLevel;var X=F(f.expirationTime<=L);L=t.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),T(L)}else r(c);f=n(c)}if(f!==null)var Y=!0;else{var J=n(u);J!==null&&H(A,J.startTime-L),Y=!1}return Y}finally{f=null,p=z,v=!1}}var M=!1,N=null,S=-1,C=5,I=-1;function k(){return!(t.unstable_now()-I<C)}function D(){if(N!==null){var O=t.unstable_now();I=O;var L=!0;try{L=N(!0,O)}finally{L?P():(M=!1,N=null)}}else M=!1}var P;if(typeof x=="function")P=function(){x(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,se=B.port2;B.port1.onmessage=D,P=function(){se.postMessage(null)}}else P=function(){w(D,0)};function U(O){N=O,M||(M=!0,P())}function H(O,L){S=w(function(){O(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,U(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var z=p;p=L;try{return O()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=p;p=O;try{return L()}finally{p=z}},t.unstable_scheduleCallback=function(O,L,z){var F=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?F+z:F):z=F,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,O={id:h++,callback:L,priorityLevel:O,startTime:z,expirationTime:X,sortIndex:-1},z>F?(O.sortIndex=z,e(u,O),n(c)===null&&O===n(u)&&(y?(b(S),S=-1):y=!0,H(A,z-F))):(O.sortIndex=X,e(c,O),_||v||(_=!0,U(j))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var L=p;return function(){var z=p;p=L;try{return O.apply(this,arguments)}finally{p=z}}}})(sS);rS.exports=sS;var jj=rS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dj=m,Ln=jj;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iS=new Set,bc={};function jo(t,e){Ma(t,e),Ma(t+"Capture",e)}function Ma(t,e){for(bc[t]=e,t=0;t<e.length;t++)iS.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lg=Object.prototype.hasOwnProperty,Mj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vw={},Fw={};function Oj(t){return lg.call(Fw,t)?!0:lg.call(Vw,t)?!1:Mj.test(t)?Fw[t]=!0:(Vw[t]=!0,!1)}function Lj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vj(t,e,n,r){if(e===null||typeof e>"u"||Lj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var nv=/[\-:]([a-z])/g;function rv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nv,rv);Ft[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nv,rv);Ft[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nv,rv);Ft[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function sv(t,e,n,r){var s=Ft.hasOwnProperty(e)?Ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vj(e,n,s,r)&&(n=null),r||s===null?Oj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _s=Dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),iv=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),oS=Symbol.for("react.provider"),aS=Symbol.for("react.context"),ov=Symbol.for("react.forward_ref"),ug=Symbol.for("react.suspense"),dg=Symbol.for("react.suspense_list"),av=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),lS=Symbol.for("react.offscreen"),Uw=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Uw&&t[Uw]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,np;function ql(t){if(np===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);np=e&&e[1]||""}return`
`+np+t}var rp=!1;function sp(t,e){if(!t||rp)return"";rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{rp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ql(t):""}function Fj(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function hg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jo:return"Fragment";case Yo:return"Portal";case cg:return"Profiler";case iv:return"StrictMode";case ug:return"Suspense";case dg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aS:return(t.displayName||"Context")+".Consumer";case oS:return(t._context.displayName||"Context")+".Provider";case ov:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case av:return e=t.displayName||null,e!==null?e:hg(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return hg(t(e))}catch{}}return null}function Uj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hg(e);case 8:return e===iv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zj(t){var e=cS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function td(t){t._valueTracker||(t._valueTracker=zj(t))}function uS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fg(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dS(t,e){e=e.checked,e!=null&&sv(t,"checked",e,!1)}function mg(t,e){dS(t,e);var n=wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pg(t,e.type,n):e.hasOwnProperty("defaultValue")&&pg(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $w(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pg(t,e,n){(e!=="number"||uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function ua(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Gl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function hS(t,e){var n=wi(e.value),r=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nd,mS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _c(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$j=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(t){$j.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tc[e]=tc[t]})});function pS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tc.hasOwnProperty(t)&&tc[t]?(""+e).trim():e+"px"}function gS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Bj=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(t,e){if(e){if(Bj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function xg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wg=null;function lv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bg=null,da=null,ha=null;function Ww(t){if(t=au(t)){if(typeof bg!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Tf(e),bg(t.stateNode,t.type,e))}}function yS(t){da?ha?ha.push(t):ha=[t]:da=t}function vS(){if(da){var t=da,e=ha;if(ha=da=null,Ww(t),e)for(t=0;t<e.length;t++)Ww(e[t])}}function xS(t,e){return t(e)}function wS(){}var ip=!1;function bS(t,e,n){if(ip)return t(e,n);ip=!0;try{return xS(t,e,n)}finally{ip=!1,(da!==null||ha!==null)&&(wS(),vS())}}function Ec(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var _g=!1;if(ds)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){_g=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{_g=!1}function Hj(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var nc=!1,dh=null,hh=!1,Eg=null,Wj={onError:function(t){nc=!0,dh=t}};function qj(t,e,n,r,s,i,o,l,c){nc=!1,dh=null,Hj.apply(Wj,arguments)}function Gj(t,e,n,r,s,i,o,l,c){if(qj.apply(this,arguments),nc){if(nc){var u=dh;nc=!1,dh=null}else throw Error(Z(198));hh||(hh=!0,Eg=u)}}function Do(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _S(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qw(t){if(Do(t)!==t)throw Error(Z(188))}function Kj(t){var e=t.alternate;if(!e){if(e=Do(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qw(s),t;if(i===r)return qw(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function ES(t){return t=Kj(t),t!==null?SS(t):null}function SS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SS(t);if(e!==null)return e;t=t.sibling}return null}var TS=Ln.unstable_scheduleCallback,Gw=Ln.unstable_cancelCallback,Qj=Ln.unstable_shouldYield,Xj=Ln.unstable_requestPaint,ht=Ln.unstable_now,Yj=Ln.unstable_getCurrentPriorityLevel,cv=Ln.unstable_ImmediatePriority,NS=Ln.unstable_UserBlockingPriority,fh=Ln.unstable_NormalPriority,Jj=Ln.unstable_LowPriority,CS=Ln.unstable_IdlePriority,bf=null,Lr=null;function Zj(t){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:nD,eD=Math.log,tD=Math.LN2;function nD(t){return t>>>=0,t===0?32:31-(eD(t)/tD|0)|0}var rd=64,sd=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Kl(l):(i&=o,i!==0&&(r=Kl(i)))}else o=n&~s,o!==0?r=Kl(o):i!==0&&(r=Kl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),s=1<<n,r|=t[n],e&=~s;return r}function rD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=rD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Sg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IS(){var t=rd;return rd<<=1,!(rd&4194240)&&(rd=64),t}function op(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function iD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ur(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function uv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function kS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AS,dv,RS,PS,jS,Tg=!1,id=[],oi=null,ai=null,li=null,Sc=new Map,Tc=new Map,Bs=[],oD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kw(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function Vl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&dv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aD(t,e,n,r,s){switch(e){case"focusin":return oi=Vl(oi,t,e,n,r,s),!0;case"dragenter":return ai=Vl(ai,t,e,n,r,s),!0;case"mouseover":return li=Vl(li,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sc.set(i,Vl(Sc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tc.set(i,Vl(Tc.get(i)||null,t,e,n,r,s)),!0}return!1}function DS(t){var e=so(t.target);if(e!==null){var n=Do(e);if(n!==null){if(e=n.tag,e===13){if(e=_S(n),e!==null){t.blockedOn=e,jS(t.priority,function(){RS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wg=r,n.target.dispatchEvent(r),wg=null}else return e=au(n),e!==null&&dv(e),t.blockedOn=n,!1;e.shift()}return!0}function Qw(t,e,n){Ld(t)&&n.delete(e)}function lD(){Tg=!1,oi!==null&&Ld(oi)&&(oi=null),ai!==null&&Ld(ai)&&(ai=null),li!==null&&Ld(li)&&(li=null),Sc.forEach(Qw),Tc.forEach(Qw)}function Fl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tg||(Tg=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,lD)))}function Nc(t){function e(s){return Fl(s,t)}if(0<id.length){Fl(id[0],t);for(var n=1;n<id.length;n++){var r=id[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oi!==null&&Fl(oi,t),ai!==null&&Fl(ai,t),li!==null&&Fl(li,t),Sc.forEach(e),Tc.forEach(e),n=0;n<Bs.length;n++)r=Bs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bs.length&&(n=Bs[0],n.blockedOn===null);)DS(n),n.blockedOn===null&&Bs.shift()}var fa=_s.ReactCurrentBatchConfig,ph=!0;function cD(t,e,n,r){var s=Fe,i=fa.transition;fa.transition=null;try{Fe=1,hv(t,e,n,r)}finally{Fe=s,fa.transition=i}}function uD(t,e,n,r){var s=Fe,i=fa.transition;fa.transition=null;try{Fe=4,hv(t,e,n,r)}finally{Fe=s,fa.transition=i}}function hv(t,e,n,r){if(ph){var s=Ng(t,e,n,r);if(s===null)gp(t,e,r,gh,n),Kw(t,r);else if(aD(s,t,e,n,r))r.stopPropagation();else if(Kw(t,r),e&4&&-1<oD.indexOf(t)){for(;s!==null;){var i=au(s);if(i!==null&&AS(i),i=Ng(t,e,n,r),i===null&&gp(t,e,r,gh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else gp(t,e,r,null,n)}}var gh=null;function Ng(t,e,n,r){if(gh=null,t=lv(r),t=so(t),t!==null)if(e=Do(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_S(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function MS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yj()){case cv:return 1;case NS:return 4;case fh:case Jj:return 16;case CS:return 536870912;default:return 16}default:return 16}}var Zs=null,fv=null,Vd=null;function OS(){if(Vd)return Vd;var t,e=fv,n=e.length,r,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Vd=s.slice(t,1<r?1-r:void 0)}function Fd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function od(){return!0}function Xw(){return!1}function Fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?od:Xw,this.isPropagationStopped=Xw,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mv=Fn(sl),ou=it({},sl,{view:0,detail:0}),dD=Fn(ou),ap,lp,Ul,_f=it({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(ap=t.screenX-Ul.screenX,lp=t.screenY-Ul.screenY):lp=ap=0,Ul=t),ap)},movementY:function(t){return"movementY"in t?t.movementY:lp}}),Yw=Fn(_f),hD=it({},_f,{dataTransfer:0}),fD=Fn(hD),mD=it({},ou,{relatedTarget:0}),cp=Fn(mD),pD=it({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),gD=Fn(pD),yD=it({},sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vD=Fn(yD),xD=it({},sl,{data:0}),Jw=Fn(xD),wD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_D={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ED(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_D[t])?!!e[t]:!1}function pv(){return ED}var SD=it({},ou,{key:function(t){if(t.key){var e=wD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pv,charCode:function(t){return t.type==="keypress"?Fd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TD=Fn(SD),ND=it({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zw=Fn(ND),CD=it({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pv}),ID=Fn(CD),kD=it({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),AD=Fn(kD),RD=it({},_f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PD=Fn(RD),jD=[9,13,27,32],gv=ds&&"CompositionEvent"in window,rc=null;ds&&"documentMode"in document&&(rc=document.documentMode);var DD=ds&&"TextEvent"in window&&!rc,LS=ds&&(!gv||rc&&8<rc&&11>=rc),e1=" ",t1=!1;function VS(t,e){switch(t){case"keyup":return jD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zo=!1;function MD(t,e){switch(t){case"compositionend":return FS(e);case"keypress":return e.which!==32?null:(t1=!0,e1);case"textInput":return t=e.data,t===e1&&t1?null:t;default:return null}}function OD(t,e){if(Zo)return t==="compositionend"||!gv&&VS(t,e)?(t=OS(),Vd=fv=Zs=null,Zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LS&&e.locale!=="ko"?null:e.data;default:return null}}var LD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LD[t.type]:e==="textarea"}function US(t,e,n,r){yS(r),e=yh(e,"onChange"),0<e.length&&(n=new mv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,Cc=null;function VD(t){YS(t,0)}function Ef(t){var e=na(t);if(uS(e))return t}function FD(t,e){if(t==="change")return e}var zS=!1;if(ds){var up;if(ds){var dp="oninput"in document;if(!dp){var r1=document.createElement("div");r1.setAttribute("oninput","return;"),dp=typeof r1.oninput=="function"}up=dp}else up=!1;zS=up&&(!document.documentMode||9<document.documentMode)}function s1(){sc&&(sc.detachEvent("onpropertychange",$S),Cc=sc=null)}function $S(t){if(t.propertyName==="value"&&Ef(Cc)){var e=[];US(e,Cc,t,lv(t)),bS(VD,e)}}function UD(t,e,n){t==="focusin"?(s1(),sc=e,Cc=n,sc.attachEvent("onpropertychange",$S)):t==="focusout"&&s1()}function zD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(Cc)}function $D(t,e){if(t==="click")return Ef(e)}function BD(t,e){if(t==="input"||t==="change")return Ef(e)}function HD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gr=typeof Object.is=="function"?Object.is:HD;function Ic(t,e){if(gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lg.call(e,s)||!gr(t[s],e[s]))return!1}return!0}function i1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o1(t,e){var n=i1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i1(n)}}function BS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HS(){for(var t=window,e=uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uh(t.document)}return e}function yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WD(t){var e=HS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BS(n.ownerDocument.documentElement,n)){if(r!==null&&yv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=o1(n,i);var o=o1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qD=ds&&"documentMode"in document&&11>=document.documentMode,ea=null,Cg=null,ic=null,Ig=!1;function a1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ig||ea==null||ea!==uh(r)||(r=ea,"selectionStart"in r&&yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Ic(ic,r)||(ic=r,r=yh(Cg,"onSelect"),0<r.length&&(e=new mv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ea)))}function ad(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ta={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},hp={},WS={};ds&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function Sf(t){if(hp[t])return hp[t];if(!ta[t])return t;var e=ta[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WS)return hp[t]=e[n];return t}var qS=Sf("animationend"),GS=Sf("animationiteration"),KS=Sf("animationstart"),QS=Sf("transitionend"),XS=new Map,l1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){XS.set(t,e),jo(e,[t])}for(var fp=0;fp<l1.length;fp++){var mp=l1[fp],GD=mp.toLowerCase(),KD=mp[0].toUpperCase()+mp.slice(1);Mi(GD,"on"+KD)}Mi(qS,"onAnimationEnd");Mi(GS,"onAnimationIteration");Mi(KS,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(QS,"onTransitionEnd");Ma("onMouseEnter",["mouseout","mouseover"]);Ma("onMouseLeave",["mouseout","mouseover"]);Ma("onPointerEnter",["pointerout","pointerover"]);Ma("onPointerLeave",["pointerout","pointerover"]);jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function c1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gj(r,e,void 0,t),t.currentTarget=null}function YS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;c1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;c1(s,l,u),i=c}}}if(hh)throw t=Eg,hh=!1,Eg=null,t}function Xe(t,e){var n=e[jg];n===void 0&&(n=e[jg]=new Set);var r=t+"__bubble";n.has(r)||(JS(e,t,2,!1),n.add(r))}function pp(t,e,n){var r=0;e&&(r|=4),JS(n,t,r,e)}var ld="_reactListening"+Math.random().toString(36).slice(2);function kc(t){if(!t[ld]){t[ld]=!0,iS.forEach(function(n){n!=="selectionchange"&&(QD.has(n)||pp(n,!1,t),pp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ld]||(e[ld]=!0,pp("selectionchange",!1,e))}}function JS(t,e,n,r){switch(MS(e)){case 1:var s=cD;break;case 4:s=uD;break;default:s=hv}n=s.bind(null,e,n,t),s=void 0,!_g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function gp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=so(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}bS(function(){var u=i,h=lv(n),f=[];e:{var p=XS.get(t);if(p!==void 0){var v=mv,_=t;switch(t){case"keypress":if(Fd(n)===0)break e;case"keydown":case"keyup":v=TD;break;case"focusin":_="focus",v=cp;break;case"focusout":_="blur",v=cp;break;case"beforeblur":case"afterblur":v=cp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=fD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ID;break;case qS:case GS:case KS:v=gD;break;case QS:v=AD;break;case"scroll":v=dD;break;case"wheel":v=PD;break;case"copy":case"cut":case"paste":v=vD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Zw}var y=(e&4)!==0,w=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,T;x!==null;){T=x;var A=T.stateNode;if(T.tag===5&&A!==null&&(T=A,b!==null&&(A=Ec(x,b),A!=null&&y.push(Ac(x,A,T)))),w)break;x=x.return}0<y.length&&(p=new v(p,_,null,n,h),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==wg&&(_=n.relatedTarget||n.fromElement)&&(so(_)||_[hs]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=u,_=_?so(_):null,_!==null&&(w=Do(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=u),v!==_)){if(y=Yw,A="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=Zw,A="onPointerLeave",b="onPointerEnter",x="pointer"),w=v==null?p:na(v),T=_==null?p:na(_),p=new y(A,x+"leave",v,n,h),p.target=w,p.relatedTarget=T,A=null,so(h)===u&&(y=new y(b,x+"enter",_,n,h),y.target=T,y.relatedTarget=w,A=y),w=A,v&&_)t:{for(y=v,b=_,x=0,T=y;T;T=$o(T))x++;for(T=0,A=b;A;A=$o(A))T++;for(;0<x-T;)y=$o(y),x--;for(;0<T-x;)b=$o(b),T--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=$o(y),b=$o(b)}y=null}else y=null;v!==null&&u1(f,p,v,y,!1),_!==null&&w!==null&&u1(f,w,_,y,!0)}}e:{if(p=u?na(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var j=FD;else if(n1(p))if(zS)j=BD;else{j=zD;var M=UD}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=$D);if(j&&(j=j(t,u))){US(f,j,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&pg(p,"number",p.value)}switch(M=u?na(u):window,t){case"focusin":(n1(M)||M.contentEditable==="true")&&(ea=M,Cg=u,ic=null);break;case"focusout":ic=Cg=ea=null;break;case"mousedown":Ig=!0;break;case"contextmenu":case"mouseup":case"dragend":Ig=!1,a1(f,n,h);break;case"selectionchange":if(qD)break;case"keydown":case"keyup":a1(f,n,h)}var N;if(gv)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Zo?VS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(LS&&n.locale!=="ko"&&(Zo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Zo&&(N=OS()):(Zs=h,fv="value"in Zs?Zs.value:Zs.textContent,Zo=!0)),M=yh(u,S),0<M.length&&(S=new Jw(S,t,null,n,h),f.push({event:S,listeners:M}),N?S.data=N:(N=FS(n),N!==null&&(S.data=N)))),(N=DD?MD(t,n):OD(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(h=new Jw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}YS(f,e)})}function Ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ec(t,n),i!=null&&r.unshift(Ac(t,i,s)),i=Ec(t,e),i!=null&&r.push(Ac(t,i,s))),t=t.return}return r}function $o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ec(n,i),c!=null&&o.unshift(Ac(n,c,l))):s||(c=Ec(n,i),c!=null&&o.push(Ac(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XD=/\r\n?/g,YD=/\u0000|\uFFFD/g;function d1(t){return(typeof t=="string"?t:""+t).replace(XD,`
`).replace(YD,"")}function cd(t,e,n){if(e=d1(e),d1(t)!==e&&n)throw Error(Z(425))}function vh(){}var kg=null,Ag=null;function Rg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pg=typeof setTimeout=="function"?setTimeout:void 0,JD=typeof clearTimeout=="function"?clearTimeout:void 0,h1=typeof Promise=="function"?Promise:void 0,ZD=typeof queueMicrotask=="function"?queueMicrotask:typeof h1<"u"?function(t){return h1.resolve(null).then(t).catch(e4)}:Pg;function e4(t){setTimeout(function(){throw t})}function yp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nc(e)}function ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function f1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var il=Math.random().toString(36).slice(2),Mr="__reactFiber$"+il,Rc="__reactProps$"+il,hs="__reactContainer$"+il,jg="__reactEvents$"+il,t4="__reactListeners$"+il,n4="__reactHandles$"+il;function so(t){var e=t[Mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hs]||n[Mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=f1(t);t!==null;){if(n=t[Mr])return n;t=f1(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[Mr]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Tf(t){return t[Rc]||null}var Dg=[],ra=-1;function Oi(t){return{current:t}}function Je(t){0>ra||(t.current=Dg[ra],Dg[ra]=null,ra--)}function qe(t,e){ra++,Dg[ra]=t.current,t.current=e}var bi={},Xt=Oi(bi),wn=Oi(!1),xo=bi;function Oa(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bn(t){return t=t.childContextTypes,t!=null}function xh(){Je(wn),Je(Xt)}function m1(t,e,n){if(Xt.current!==bi)throw Error(Z(168));qe(Xt,e),qe(wn,n)}function ZS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,Uj(t)||"Unknown",s));return it({},n,r)}function wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,xo=Xt.current,qe(Xt,t),qe(wn,wn.current),!0}function p1(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=ZS(t,e,xo),r.__reactInternalMemoizedMergedChildContext=t,Je(wn),Je(Xt),qe(Xt,t)):Je(wn),qe(wn,n)}var rs=null,Nf=!1,vp=!1;function eT(t){rs===null?rs=[t]:rs.push(t)}function r4(t){Nf=!0,eT(t)}function Li(){if(!vp&&rs!==null){vp=!0;var t=0,e=Fe;try{var n=rs;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rs=null,Nf=!1}catch(s){throw rs!==null&&(rs=rs.slice(t+1)),TS(cv,Li),s}finally{Fe=e,vp=!1}}return null}var sa=[],ia=0,bh=null,_h=0,Hn=[],Wn=0,wo=null,ss=1,is="";function to(t,e){sa[ia++]=_h,sa[ia++]=bh,bh=t,_h=e}function tT(t,e,n){Hn[Wn++]=ss,Hn[Wn++]=is,Hn[Wn++]=wo,wo=t;var r=ss;t=is;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ss=1<<32-ur(e)+s|n<<s|r,is=i+t}else ss=1<<i|n<<s|r,is=t}function vv(t){t.return!==null&&(to(t,1),tT(t,1,0))}function xv(t){for(;t===bh;)bh=sa[--ia],sa[ia]=null,_h=sa[--ia],sa[ia]=null;for(;t===wo;)wo=Hn[--Wn],Hn[Wn]=null,is=Hn[--Wn],Hn[Wn]=null,ss=Hn[--Wn],Hn[Wn]=null}var Dn=null,Pn=null,tt=!1,or=null;function nT(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,Pn=ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wo!==null?{id:ss,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,Pn=null,!0):!1;default:return!1}}function Mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Og(t){if(tt){var e=Pn;if(e){var n=e;if(!g1(t,e)){if(Mg(t))throw Error(Z(418));e=ci(n.nextSibling);var r=Dn;e&&g1(t,e)?nT(r,n):(t.flags=t.flags&-4097|2,tt=!1,Dn=t)}}else{if(Mg(t))throw Error(Z(418));t.flags=t.flags&-4097|2,tt=!1,Dn=t}}}function y1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function ud(t){if(t!==Dn)return!1;if(!tt)return y1(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rg(t.type,t.memoizedProps)),e&&(e=Pn)){if(Mg(t))throw rT(),Error(Z(418));for(;e;)nT(t,e),e=ci(e.nextSibling)}if(y1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Dn?ci(t.stateNode.nextSibling):null;return!0}function rT(){for(var t=Pn;t;)t=ci(t.nextSibling)}function La(){Pn=Dn=null,tt=!1}function wv(t){or===null?or=[t]:or.push(t)}var s4=_s.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function dd(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v1(t){var e=t._init;return e(t._payload)}function sT(t){function e(b,x){if(t){var T=b.deletions;T===null?(b.deletions=[x],b.flags|=16):T.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=fi(b,x),b.index=0,b.sibling=null,b}function i(b,x,T){return b.index=T,t?(T=b.alternate,T!==null?(T=T.index,T<x?(b.flags|=2,x):T):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,T,A){return x===null||x.tag!==6?(x=Tp(T,b.mode,A),x.return=b,x):(x=s(x,T),x.return=b,x)}function c(b,x,T,A){var j=T.type;return j===Jo?h(b,x,T.props.children,A,T.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Us&&v1(j)===x.type)?(A=s(x,T.props),A.ref=zl(b,x,T),A.return=b,A):(A=qd(T.type,T.key,T.props,null,b.mode,A),A.ref=zl(b,x,T),A.return=b,A)}function u(b,x,T,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==T.containerInfo||x.stateNode.implementation!==T.implementation?(x=Np(T,b.mode,A),x.return=b,x):(x=s(x,T.children||[]),x.return=b,x)}function h(b,x,T,A,j){return x===null||x.tag!==7?(x=po(T,b.mode,A,j),x.return=b,x):(x=s(x,T),x.return=b,x)}function f(b,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Tp(""+x,b.mode,T),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ed:return T=qd(x.type,x.key,x.props,null,b.mode,T),T.ref=zl(b,null,x),T.return=b,T;case Yo:return x=Np(x,b.mode,T),x.return=b,x;case Us:var A=x._init;return f(b,A(x._payload),T)}if(Gl(x)||Ol(x))return x=po(x,b.mode,T,null),x.return=b,x;dd(b,x)}return null}function p(b,x,T,A){var j=x!==null?x.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:l(b,x,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ed:return T.key===j?c(b,x,T,A):null;case Yo:return T.key===j?u(b,x,T,A):null;case Us:return j=T._init,p(b,x,j(T._payload),A)}if(Gl(T)||Ol(T))return j!==null?null:h(b,x,T,A,null);dd(b,T)}return null}function v(b,x,T,A,j){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(T)||null,l(x,b,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ed:return b=b.get(A.key===null?T:A.key)||null,c(x,b,A,j);case Yo:return b=b.get(A.key===null?T:A.key)||null,u(x,b,A,j);case Us:var M=A._init;return v(b,x,T,M(A._payload),j)}if(Gl(A)||Ol(A))return b=b.get(T)||null,h(x,b,A,j,null);dd(x,A)}return null}function _(b,x,T,A){for(var j=null,M=null,N=x,S=x=0,C=null;N!==null&&S<T.length;S++){N.index>S?(C=N,N=null):C=N.sibling;var I=p(b,N,T[S],A);if(I===null){N===null&&(N=C);break}t&&N&&I.alternate===null&&e(b,N),x=i(I,x,S),M===null?j=I:M.sibling=I,M=I,N=C}if(S===T.length)return n(b,N),tt&&to(b,S),j;if(N===null){for(;S<T.length;S++)N=f(b,T[S],A),N!==null&&(x=i(N,x,S),M===null?j=N:M.sibling=N,M=N);return tt&&to(b,S),j}for(N=r(b,N);S<T.length;S++)C=v(N,b,S,T[S],A),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?S:C.key),x=i(C,x,S),M===null?j=C:M.sibling=C,M=C);return t&&N.forEach(function(k){return e(b,k)}),tt&&to(b,S),j}function y(b,x,T,A){var j=Ol(T);if(typeof j!="function")throw Error(Z(150));if(T=j.call(T),T==null)throw Error(Z(151));for(var M=j=null,N=x,S=x=0,C=null,I=T.next();N!==null&&!I.done;S++,I=T.next()){N.index>S?(C=N,N=null):C=N.sibling;var k=p(b,N,I.value,A);if(k===null){N===null&&(N=C);break}t&&N&&k.alternate===null&&e(b,N),x=i(k,x,S),M===null?j=k:M.sibling=k,M=k,N=C}if(I.done)return n(b,N),tt&&to(b,S),j;if(N===null){for(;!I.done;S++,I=T.next())I=f(b,I.value,A),I!==null&&(x=i(I,x,S),M===null?j=I:M.sibling=I,M=I);return tt&&to(b,S),j}for(N=r(b,N);!I.done;S++,I=T.next())I=v(N,b,S,I.value,A),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?S:I.key),x=i(I,x,S),M===null?j=I:M.sibling=I,M=I);return t&&N.forEach(function(D){return e(b,D)}),tt&&to(b,S),j}function w(b,x,T,A){if(typeof T=="object"&&T!==null&&T.type===Jo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ed:e:{for(var j=T.key,M=x;M!==null;){if(M.key===j){if(j=T.type,j===Jo){if(M.tag===7){n(b,M.sibling),x=s(M,T.props.children),x.return=b,b=x;break e}}else if(M.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Us&&v1(j)===M.type){n(b,M.sibling),x=s(M,T.props),x.ref=zl(b,M,T),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}T.type===Jo?(x=po(T.props.children,b.mode,A,T.key),x.return=b,b=x):(A=qd(T.type,T.key,T.props,null,b.mode,A),A.ref=zl(b,x,T),A.return=b,b=A)}return o(b);case Yo:e:{for(M=T.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===T.containerInfo&&x.stateNode.implementation===T.implementation){n(b,x.sibling),x=s(x,T.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Np(T,b.mode,A),x.return=b,b=x}return o(b);case Us:return M=T._init,w(b,x,M(T._payload),A)}if(Gl(T))return _(b,x,T,A);if(Ol(T))return y(b,x,T,A);dd(b,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,T),x.return=b,b=x):(n(b,x),x=Tp(T,b.mode,A),x.return=b,b=x),o(b)):n(b,x)}return w}var Va=sT(!0),iT=sT(!1),Eh=Oi(null),Sh=null,oa=null,bv=null;function _v(){bv=oa=Sh=null}function Ev(t){var e=Eh.current;Je(Eh),t._currentValue=e}function Lg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ma(t,e){Sh=t,bv=oa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(bv!==t)if(t={context:t,memoizedValue:e,next:null},oa===null){if(Sh===null)throw Error(Z(308));oa=t,Sh.dependencies={lanes:0,firstContext:t}}else oa=oa.next=t;return e}var io=null;function Sv(t){io===null?io=[t]:io.push(t)}function oT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sv(e)):(n.next=s.next,s.next=n),e.interleaved=n,fs(t,r)}function fs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zs=!1;function Tv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ls(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fs(t,n)}return s=r.interleaved,s===null?(e.next=e,Sv(r)):(e.next=s.next,s.next=e),r.interleaved=e,fs(t,n)}function Ud(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uv(t,n)}}function x1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var s=t.updateQueue;zs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(p=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){f=_.call(v,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,p=typeof _=="function"?_.call(v,f,p):_,p==null)break e;f=it({},f,p);break e;case 2:zs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,c=f):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_o|=o,t.lanes=o,t.memoizedState=f}}function w1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var lu={},Vr=Oi(lu),Pc=Oi(lu),jc=Oi(lu);function oo(t){if(t===lu)throw Error(Z(174));return t}function Nv(t,e){switch(qe(jc,e),qe(Pc,t),qe(Vr,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yg(e,t)}Je(Vr),qe(Vr,e)}function Fa(){Je(Vr),Je(Pc),Je(jc)}function lT(t){oo(jc.current);var e=oo(Vr.current),n=yg(e,t.type);e!==n&&(qe(Pc,t),qe(Vr,n))}function Cv(t){Pc.current===t&&(Je(Vr),Je(Pc))}var nt=Oi(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xp=[];function Iv(){for(var t=0;t<xp.length;t++)xp[t]._workInProgressVersionPrimary=null;xp.length=0}var zd=_s.ReactCurrentDispatcher,wp=_s.ReactCurrentBatchConfig,bo=0,st=null,wt=null,It=null,Ch=!1,oc=!1,Dc=0,i4=0;function Bt(){throw Error(Z(321))}function kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gr(t[n],e[n]))return!1;return!0}function Av(t,e,n,r,s,i){if(bo=i,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?c4:u4,t=n(r,s),oc){i=0;do{if(oc=!1,Dc=0,25<=i)throw Error(Z(301));i+=1,It=wt=null,e.updateQueue=null,zd.current=d4,t=n(r,s)}while(oc)}if(zd.current=Ih,e=wt!==null&&wt.next!==null,bo=0,It=wt=st=null,Ch=!1,e)throw Error(Z(300));return t}function Rv(){var t=Dc!==0;return Dc=0,t}function Ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?st.memoizedState=It=t:It=It.next=t,It}function Xn(){if(wt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=It===null?st.memoizedState:It.next;if(e!==null)It=e,wt=t;else{if(t===null)throw Error(Z(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},It===null?st.memoizedState=It=t:It=It.next=t}return It}function Mc(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=Xn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((bo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,st.lanes|=h,_o|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,gr(r,e.memoizedState)||(xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,st.lanes|=i,_o|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _p(t){var e=Xn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gr(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function cT(){}function uT(t,e){var n=st,r=Xn(),s=e(),i=!gr(r.memoizedState,s);if(i&&(r.memoizedState=s,xn=!0),r=r.queue,Pv(fT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Oc(9,hT.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(Z(349));bo&30||dT(n,e,s)}return s}function dT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hT(t,e,n,r){e.value=n,e.getSnapshot=r,mT(e)&&pT(t)}function fT(t,e,n){return n(function(){mT(e)&&pT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gr(t,n)}catch{return!0}}function pT(t){var e=fs(t,1);e!==null&&dr(e,t,1,-1)}function b1(t){var e=Ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:t},e.queue=t,t=t.dispatch=l4.bind(null,st,t),[e.memoizedState,t]}function Oc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gT(){return Xn().memoizedState}function $d(t,e,n,r){var s=Ar();st.flags|=t,s.memoizedState=Oc(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var s=Xn();r=r===void 0?null:r;var i=void 0;if(wt!==null){var o=wt.memoizedState;if(i=o.destroy,r!==null&&kv(r,o.deps)){s.memoizedState=Oc(e,n,i,r);return}}st.flags|=t,s.memoizedState=Oc(1|e,n,i,r)}function _1(t,e){return $d(8390656,8,t,e)}function Pv(t,e){return Cf(2048,8,t,e)}function yT(t,e){return Cf(4,2,t,e)}function vT(t,e){return Cf(4,4,t,e)}function xT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wT(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,xT.bind(null,e,t),n)}function jv(){}function bT(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _T(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ET(t,e,n){return bo&21?(gr(n,e)||(n=IS(),st.lanes|=n,_o|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function o4(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=wp.transition;wp.transition={};try{t(!1),e()}finally{Fe=n,wp.transition=r}}function ST(){return Xn().memoizedState}function a4(t,e,n){var r=hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TT(t))NT(e,n);else if(n=oT(t,e,n,r),n!==null){var s=rn();dr(n,t,r,s),CT(n,e,r)}}function l4(t,e,n){var r=hi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TT(t))NT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,gr(l,o)){var c=e.interleaved;c===null?(s.next=s,Sv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=oT(t,e,s,r),n!==null&&(s=rn(),dr(n,t,r,s),CT(n,e,r))}}function TT(t){var e=t.alternate;return t===st||e!==null&&e===st}function NT(t,e){oc=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uv(t,n)}}var Ih={readContext:Qn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},c4={readContext:Qn,useCallback:function(t,e){return Ar().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:_1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,xT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=Ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a4.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=Ar();return t={current:t},e.memoizedState=t},useState:b1,useDebugValue:jv,useDeferredValue:function(t){return Ar().memoizedState=t},useTransition:function(){var t=b1(!1),e=t[0];return t=o4.bind(null,t[1]),Ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,s=Ar();if(tt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Rt===null)throw Error(Z(349));bo&30||dT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_1(fT.bind(null,r,i,t),[t]),r.flags|=2048,Oc(9,hT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ar(),e=Rt.identifierPrefix;if(tt){var n=is,r=ss;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},u4={readContext:Qn,useCallback:bT,useContext:Qn,useEffect:Pv,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:_T,useReducer:bp,useRef:gT,useState:function(){return bp(Mc)},useDebugValue:jv,useDeferredValue:function(t){var e=Xn();return ET(e,wt.memoizedState,t)},useTransition:function(){var t=bp(Mc)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1},d4={readContext:Qn,useCallback:bT,useContext:Qn,useEffect:Pv,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:_T,useReducer:_p,useRef:gT,useState:function(){return _p(Mc)},useDebugValue:jv,useDeferredValue:function(t){var e=Xn();return wt===null?e.memoizedState=t:ET(e,wt.memoizedState,t)},useTransition:function(){var t=_p(Mc)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1};function nr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var If={isMounted:function(t){return(t=t._reactInternals)?Do(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rn(),s=hi(t),i=ls(r,s);i.payload=e,n!=null&&(i.callback=n),e=ui(t,i,s),e!==null&&(dr(e,t,s,r),Ud(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rn(),s=hi(t),i=ls(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ui(t,i,s),e!==null&&(dr(e,t,s,r),Ud(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rn(),r=hi(t),s=ls(n,r);s.tag=2,e!=null&&(s.callback=e),e=ui(t,s,r),e!==null&&(dr(e,t,r,n),Ud(e,t,r))}};function E1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ic(n,r)||!Ic(s,i):!0}function IT(t,e,n){var r=!1,s=bi,i=e.contextType;return typeof i=="object"&&i!==null?i=Qn(i):(s=bn(e)?xo:Xt.current,r=e.contextTypes,i=(r=r!=null)?Oa(t,s):bi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=If,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function S1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&If.enqueueReplaceState(e,e.state,null)}function Fg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qn(i):(i=bn(e)?xo:Xt.current,s.context=Oa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Vg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&If.enqueueReplaceState(s,s.state,null),Th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",r=e;do n+=Fj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ep(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ug(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h4=typeof WeakMap=="function"?WeakMap:Map;function kT(t,e,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ah||(Ah=!0,Xg=r),Ug(t,e)},n}function AT(t,e,n){n=ls(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ug(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ug(t,e),typeof r!="function"&&(di===null?di=new Set([this]):di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function T1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new h4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=N4.bind(null,t,e,n),e.then(t,t))}function N1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function C1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ls(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var f4=_s.ReactCurrentOwner,xn=!1;function en(t,e,n,r){e.child=t===null?iT(e,null,n,r):Va(e,t.child,n,r)}function I1(t,e,n,r,s){n=n.render;var i=e.ref;return ma(e,s),r=Av(t,e,n,r,i,s),n=Rv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(tt&&n&&vv(e),e.flags|=1,en(t,e,r,s),e.child)}function k1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,RT(t,e,i,r,s)):(t=qd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(o,r)&&t.ref===e.ref)return ms(t,e,s)}return e.flags|=1,t=fi(i,r),t.ref=e.ref,t.return=e,e.child=t}function RT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ic(i,r)&&t.ref===e.ref)if(xn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,ms(t,e,s)}return zg(t,e,n,r,s)}function PT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(la,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(la,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,qe(la,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,qe(la,kn),kn|=r;return en(t,e,s,n),e.child}function jT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zg(t,e,n,r,s){var i=bn(n)?xo:Xt.current;return i=Oa(e,i),ma(e,s),n=Av(t,e,n,r,i,s),r=Rv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(tt&&r&&vv(e),e.flags|=1,en(t,e,n,s),e.child)}function A1(t,e,n,r,s){if(bn(n)){var i=!0;wh(e)}else i=!1;if(ma(e,s),e.stateNode===null)Bd(t,e),IT(e,n,r),Fg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=bn(n)?xo:Xt.current,u=Oa(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&S1(e,o,r,u),zs=!1;var p=e.memoizedState;o.state=p,Th(e,r,o,s),c=e.memoizedState,l!==r||p!==c||wn.current||zs?(typeof h=="function"&&(Vg(e,n,h,r),c=e.memoizedState),(l=zs||E1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:nr(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qn(c):(c=bn(n)?xo:Xt.current,c=Oa(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&S1(e,o,r,c),zs=!1,p=e.memoizedState,o.state=p,Th(e,r,o,s);var _=e.memoizedState;l!==f||p!==_||wn.current||zs?(typeof v=="function"&&(Vg(e,n,v,r),_=e.memoizedState),(u=zs||E1(e,n,u,r,p,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return $g(t,e,n,r,i,s)}function $g(t,e,n,r,s,i){jT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&p1(e,n,!1),ms(t,e,i);r=e.stateNode,f4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Va(e,t.child,null,i),e.child=Va(e,null,l,i)):en(t,e,l,i),e.memoizedState=r.state,s&&p1(e,n,!0),e.child}function DT(t){var e=t.stateNode;e.pendingContext?m1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m1(t,e.context,!1),Nv(t,e.containerInfo)}function R1(t,e,n,r,s){return La(),wv(s),e.flags|=256,en(t,e,n,r),e.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function Hg(t){return{baseLanes:t,cachePool:null,transitions:null}}function MT(t,e,n){var r=e.pendingProps,s=nt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),qe(nt,s&1),t===null)return Og(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rf(o,r,0,null),t=po(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hg(n),e.memoizedState=Bg,t):Dv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return m4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=fi(l,i):(i=po(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Hg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bg,r}return i=t.child,t=i.sibling,r=fi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dv(t,e){return e=Rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hd(t,e,n,r){return r!==null&&wv(r),Va(e,t.child,null,n),t=Dv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ep(Error(Z(422))),hd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rf({mode:"visible",children:r.children},s,0,null),i=po(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Va(e,t.child,null,o),e.child.memoizedState=Hg(o),e.memoizedState=Bg,i);if(!(e.mode&1))return hd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=Ep(i,r,void 0),hd(t,e,o,r)}if(l=(o&t.childLanes)!==0,xn||l){if(r=Rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fs(t,s),dr(r,t,s,-1))}return Uv(),r=Ep(Error(Z(421))),hd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=C4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pn=ci(s.nextSibling),Dn=e,tt=!0,or=null,t!==null&&(Hn[Wn++]=ss,Hn[Wn++]=is,Hn[Wn++]=wo,ss=t.id,is=t.overflow,wo=e),e=Dv(e,r.children),e.flags|=4096,e)}function P1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lg(t.return,e,n)}function Sp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function OT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(en(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P1(t,n,e);else if(t.tag===19)P1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qe(nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sp(e,!0,n,null,i);break;case"together":Sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_o|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function p4(t,e,n){switch(e.tag){case 3:DT(e),La();break;case 5:lT(e);break;case 1:bn(e.type)&&wh(e);break;case 4:Nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;qe(Eh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?MT(t,e,n):(qe(nt,nt.current&1),t=ms(t,e,n),t!==null?t.sibling:null);qe(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,PT(t,e,n)}return ms(t,e,n)}var LT,Wg,VT,FT;LT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wg=function(){};VT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,oo(Vr.current);var i=null;switch(n){case"input":s=fg(t,s),r=fg(t,r),i=[];break;case"select":s=it({},s,{value:void 0}),r=it({},r,{value:void 0}),i=[];break;case"textarea":s=gg(t,s),r=gg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vh)}vg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};FT=function(t,e,n,r){n!==r&&(e.flags|=4)};function $l(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g4(t,e,n){var r=e.pendingProps;switch(xv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return bn(e.type)&&xh(),Ht(e),null;case 3:return r=e.stateNode,Fa(),Je(wn),Je(Xt),Iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ud(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,or!==null&&(Zg(or),or=null))),Wg(t,e),Ht(e),null;case 5:Cv(e);var s=oo(jc.current);if(n=e.type,t!==null&&e.stateNode!=null)VT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Ht(e),null}if(t=oo(Vr.current),ud(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mr]=e,r[Rc]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<Ql.length;s++)Xe(Ql[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":zw(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":Bw(r,i),Xe("invalid",r)}vg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&cd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&cd(r.textContent,l,t),s=["children",""+l]):bc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xe("scroll",r)}switch(n){case"input":td(r),$w(r,i,!0);break;case"textarea":td(r),Hw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mr]=e,t[Rc]=r,LT(t,e,!1,!1),e.stateNode=t;e:{switch(o=xg(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ql.length;s++)Xe(Ql[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":zw(t,r),s=fg(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=it({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":Bw(t,r),s=gg(t,r),Xe("invalid",t);break;default:s=r}vg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?gS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_c(t,c):typeof c=="number"&&_c(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",t):c!=null&&sv(t,i,c,o))}switch(n){case"input":td(t),$w(t,r,!1);break;case"textarea":td(t),Hw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ua(t,!!r.multiple,i,!1):r.defaultValue!=null&&ua(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)FT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=oo(jc.current),oo(Vr.current),ud(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mr]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mr]=e,e.stateNode=r}return Ht(e),null;case 13:if(Je(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&Pn!==null&&e.mode&1&&!(e.flags&128))rT(),La(),e.flags|=98560,i=!1;else if(i=ud(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Mr]=e}else La(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),i=!1}else or!==null&&(Zg(or),or=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Et===0&&(Et=3):Uv())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Fa(),Wg(t,e),t===null&&kc(e.stateNode.containerInfo),Ht(e),null;case 10:return Ev(e.type._context),Ht(e),null;case 17:return bn(e.type)&&xh(),Ht(e),null;case 19:if(Je(nt),i=e.memoizedState,i===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$l(i,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,$l(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(nt,nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ht()>za&&(e.flags|=128,r=!0,$l(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tt)return Ht(e),null}else 2*ht()-i.renderingStartTime>za&&n!==1073741824&&(e.flags|=128,r=!0,$l(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ht(),e.sibling=null,n=nt.current,qe(nt,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Fv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function y4(t,e){switch(xv(e),e.tag){case 1:return bn(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fa(),Je(wn),Je(Xt),Iv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(Je(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));La()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(nt),null;case 4:return Fa(),null;case 10:return Ev(e.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var fd=!1,Kt=!1,v4=typeof WeakSet=="function"?WeakSet:Set,ce=null;function aa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function qg(t,e,n){try{n()}catch(r){ut(t,e,r)}}var j1=!1;function x4(t,e){if(kg=ph,t=HS(),yv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ag={focusedElem:t,selectionRange:n},ph=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,w=_.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:nr(e.type,y),w);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(A){ut(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return _=j1,j1=!1,_}function ac(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qg(e,n,i)}s=s.next}while(s!==r)}}function kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UT(t){var e=t.alternate;e!==null&&(t.alternate=null,UT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[Rc],delete e[jg],delete e[t4],delete e[n4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zT(t){return t.tag===5||t.tag===3||t.tag===4}function D1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vh));else if(r!==4&&(t=t.child,t!==null))for(Kg(t,e,n),t=t.sibling;t!==null;)Kg(t,e,n),t=t.sibling}function Qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qg(t,e,n),t=t.sibling;t!==null;)Qg(t,e,n),t=t.sibling}var Mt=null,ir=!1;function Ds(t,e,n){for(n=n.child;n!==null;)$T(t,e,n),n=n.sibling}function $T(t,e,n){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Kt||aa(n,e);case 6:var r=Mt,s=ir;Mt=null,Ds(t,e,n),Mt=r,ir=s,Mt!==null&&(ir?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(ir?(t=Mt,n=n.stateNode,t.nodeType===8?yp(t.parentNode,n):t.nodeType===1&&yp(t,n),Nc(t)):yp(Mt,n.stateNode));break;case 4:r=Mt,s=ir,Mt=n.stateNode.containerInfo,ir=!0,Ds(t,e,n),Mt=r,ir=s;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qg(n,e,o),s=s.next}while(s!==r)}Ds(t,e,n);break;case 1:if(!Kt&&(aa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ut(n,e,l)}Ds(t,e,n);break;case 21:Ds(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Ds(t,e,n),Kt=r):Ds(t,e,n);break;default:Ds(t,e,n)}}function M1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v4),e.forEach(function(r){var s=I4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,ir=!1;break e;case 3:Mt=l.stateNode.containerInfo,ir=!0;break e;case 4:Mt=l.stateNode.containerInfo,ir=!0;break e}l=l.return}if(Mt===null)throw Error(Z(160));$T(i,o,s),Mt=null,ir=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ut(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BT(e,t),e=e.sibling}function BT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(er(e,t),Ir(t),r&4){try{ac(3,t,t.return),kf(3,t)}catch(y){ut(t,t.return,y)}try{ac(5,t,t.return)}catch(y){ut(t,t.return,y)}}break;case 1:er(e,t),Ir(t),r&512&&n!==null&&aa(n,n.return);break;case 5:if(er(e,t),Ir(t),r&512&&n!==null&&aa(n,n.return),t.flags&32){var s=t.stateNode;try{_c(s,"")}catch(y){ut(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&dS(s,i),xg(l,o);var u=xg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?gS(s,f):h==="dangerouslySetInnerHTML"?mS(s,f):h==="children"?_c(s,f):sv(s,h,f,u)}switch(l){case"input":mg(s,i);break;case"textarea":hS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ua(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?ua(s,!!i.multiple,i.defaultValue,!0):ua(s,!!i.multiple,i.multiple?[]:"",!1))}s[Rc]=i}catch(y){ut(t,t.return,y)}}break;case 6:if(er(e,t),Ir(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){ut(t,t.return,y)}}break;case 3:if(er(e,t),Ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nc(e.containerInfo)}catch(y){ut(t,t.return,y)}break;case 4:er(e,t),Ir(t);break;case 13:er(e,t),Ir(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lv=ht())),r&4&&M1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(u=Kt)||h,er(e,t),Kt=u):er(e,t),Ir(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ce=t,h=t.child;h!==null;){for(f=ce=h;ce!==null;){switch(p=ce,v=p.child,p.tag){case 0:case 11:case 14:case 15:ac(4,p,p.return);break;case 1:aa(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ut(r,n,y)}}break;case 5:aa(p,p.return);break;case 22:if(p.memoizedState!==null){L1(f);continue}}v!==null?(v.return=p,ce=v):L1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=pS("display",o))}catch(y){ut(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){ut(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:er(e,t),Ir(t),r&4&&M1(t);break;case 21:break;default:er(e,t),Ir(t)}}function Ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zT(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_c(s,""),r.flags&=-33);var i=D1(t);Qg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=D1(t);Kg(t,l,o);break;default:throw Error(Z(161))}}catch(c){ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function w4(t,e,n){ce=t,HT(t)}function HT(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Kt;l=fd;var u=Kt;if(fd=o,(Kt=c)&&!u)for(ce=s;ce!==null;)o=ce,c=o.child,o.tag===22&&o.memoizedState!==null?V1(s):c!==null?(c.return=o,ce=c):V1(s);for(;i!==null;)ce=i,HT(i),i=i.sibling;ce=s,fd=l,Kt=u}O1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):O1(t)}}function O1(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&w1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}w1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Nc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Kt||e.flags&512&&Gg(e)}catch(p){ut(e,e.return,p)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function L1(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function V1(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kf(4,e)}catch(c){ut(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ut(e,s,c)}}var i=e.return;try{Gg(e)}catch(c){ut(e,i,c)}break;case 5:var o=e.return;try{Gg(e)}catch(c){ut(e,o,c)}}}catch(c){ut(e,e.return,c)}if(e===t){ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ce=l;break}ce=e.return}}var b4=Math.ceil,kh=_s.ReactCurrentDispatcher,Mv=_s.ReactCurrentOwner,Kn=_s.ReactCurrentBatchConfig,Pe=0,Rt=null,mt=null,Lt=0,kn=0,la=Oi(0),Et=0,Lc=null,_o=0,Af=0,Ov=0,lc=null,gn=null,Lv=0,za=1/0,ns=null,Ah=!1,Xg=null,di=null,md=!1,ei=null,Rh=0,cc=0,Yg=null,Hd=-1,Wd=0;function rn(){return Pe&6?ht():Hd!==-1?Hd:Hd=ht()}function hi(t){return t.mode&1?Pe&2&&Lt!==0?Lt&-Lt:s4.transition!==null?(Wd===0&&(Wd=IS()),Wd):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:MS(t.type)),t):1}function dr(t,e,n,r){if(50<cc)throw cc=0,Yg=null,Error(Z(185));iu(t,n,r),(!(Pe&2)||t!==Rt)&&(t===Rt&&(!(Pe&2)&&(Af|=n),Et===4&&Hs(t,Lt)),_n(t,r),n===1&&Pe===0&&!(e.mode&1)&&(za=ht()+500,Nf&&Li()))}function _n(t,e){var n=t.callbackNode;sD(t,e);var r=mh(t,t===Rt?Lt:0);if(r===0)n!==null&&Gw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gw(n),e===1)t.tag===0?r4(F1.bind(null,t)):eT(F1.bind(null,t)),ZD(function(){!(Pe&6)&&Li()}),n=null;else{switch(kS(r)){case 1:n=cv;break;case 4:n=NS;break;case 16:n=fh;break;case 536870912:n=CS;break;default:n=fh}n=JT(n,WT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WT(t,e){if(Hd=-1,Wd=0,Pe&6)throw Error(Z(327));var n=t.callbackNode;if(pa()&&t.callbackNode!==n)return null;var r=mh(t,t===Rt?Lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ph(t,r);else{e=r;var s=Pe;Pe|=2;var i=GT();(Rt!==t||Lt!==e)&&(ns=null,za=ht()+500,mo(t,e));do try{S4();break}catch(l){qT(t,l)}while(!0);_v(),kh.current=i,Pe=s,mt!==null?e=0:(Rt=null,Lt=0,e=Et)}if(e!==0){if(e===2&&(s=Sg(t),s!==0&&(r=s,e=Jg(t,s))),e===1)throw n=Lc,mo(t,0),Hs(t,r),_n(t,ht()),n;if(e===6)Hs(t,r);else{if(s=t.current.alternate,!(r&30)&&!_4(s)&&(e=Ph(t,r),e===2&&(i=Sg(t),i!==0&&(r=i,e=Jg(t,i))),e===1))throw n=Lc,mo(t,0),Hs(t,r),_n(t,ht()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:no(t,gn,ns);break;case 3:if(Hs(t,r),(r&130023424)===r&&(e=Lv+500-ht(),10<e)){if(mh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){rn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pg(no.bind(null,t,gn,ns),e);break}no(t,gn,ns);break;case 4:if(Hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ur(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*b4(r/1960))-r,10<r){t.timeoutHandle=Pg(no.bind(null,t,gn,ns),r);break}no(t,gn,ns);break;case 5:no(t,gn,ns);break;default:throw Error(Z(329))}}}return _n(t,ht()),t.callbackNode===n?WT.bind(null,t):null}function Jg(t,e){var n=lc;return t.current.memoizedState.isDehydrated&&(mo(t,e).flags|=256),t=Ph(t,e),t!==2&&(e=gn,gn=n,e!==null&&Zg(e)),t}function Zg(t){gn===null?gn=t:gn.push.apply(gn,t)}function _4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(t,e){for(e&=~Ov,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function F1(t){if(Pe&6)throw Error(Z(327));pa();var e=mh(t,0);if(!(e&1))return _n(t,ht()),null;var n=Ph(t,e);if(t.tag!==0&&n===2){var r=Sg(t);r!==0&&(e=r,n=Jg(t,r))}if(n===1)throw n=Lc,mo(t,0),Hs(t,e),_n(t,ht()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,gn,ns),_n(t,ht()),null}function Vv(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(za=ht()+500,Nf&&Li())}}function Eo(t){ei!==null&&ei.tag===0&&!(Pe&6)&&pa();var e=Pe;Pe|=1;var n=Kn.transition,r=Fe;try{if(Kn.transition=null,Fe=1,t)return t()}finally{Fe=r,Kn.transition=n,Pe=e,!(Pe&6)&&Li()}}function Fv(){kn=la.current,Je(la)}function mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JD(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(xv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:Fa(),Je(wn),Je(Xt),Iv();break;case 5:Cv(r);break;case 4:Fa();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:Ev(r.type._context);break;case 22:case 23:Fv()}n=n.return}if(Rt=t,mt=t=fi(t.current,null),Lt=kn=e,Et=0,Lc=null,Ov=Af=_o=0,gn=lc=null,io!==null){for(e=0;e<io.length;e++)if(n=io[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}io=null}return t}function qT(t,e){do{var n=mt;try{if(_v(),zd.current=Ih,Ch){for(var r=st.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ch=!1}if(bo=0,It=wt=st=null,oc=!1,Dc=0,Mv.current=null,n===null||n.return===null){Et=1,Lc=e,mt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Lt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=N1(o);if(v!==null){v.flags&=-257,C1(v,o,l,i,e),v.mode&1&&T1(i,u,e),e=v,c=u;var _=e.updateQueue;if(_===null){var y=new Set;y.add(c),e.updateQueue=y}else _.add(c);break e}else{if(!(e&1)){T1(i,u,e),Uv();break e}c=Error(Z(426))}}else if(tt&&l.mode&1){var w=N1(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),C1(w,o,l,i,e),wv(Ua(c,l));break e}}i=c=Ua(c,l),Et!==4&&(Et=2),lc===null?lc=[i]:lc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=kT(i,c,e);x1(i,b);break e;case 1:l=c;var x=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(di===null||!di.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=AT(i,l,e);x1(i,A);break e}}i=i.return}while(i!==null)}QT(n)}catch(j){e=j,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function GT(){var t=kh.current;return kh.current=Ih,t===null?Ih:t}function Uv(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(_o&268435455)&&!(Af&268435455)||Hs(Rt,Lt)}function Ph(t,e){var n=Pe;Pe|=2;var r=GT();(Rt!==t||Lt!==e)&&(ns=null,mo(t,e));do try{E4();break}catch(s){qT(t,s)}while(!0);if(_v(),Pe=n,kh.current=r,mt!==null)throw Error(Z(261));return Rt=null,Lt=0,Et}function E4(){for(;mt!==null;)KT(mt)}function S4(){for(;mt!==null&&!Qj();)KT(mt)}function KT(t){var e=YT(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?QT(t):mt=e,Mv.current=null}function QT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y4(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,mt=null;return}}else if(n=g4(n,e,kn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);Et===0&&(Et=5)}function no(t,e,n){var r=Fe,s=Kn.transition;try{Kn.transition=null,Fe=1,T4(t,e,n,r)}finally{Kn.transition=s,Fe=r}return null}function T4(t,e,n,r){do pa();while(ei!==null);if(Pe&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iD(t,i),t===Rt&&(mt=Rt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||md||(md=!0,JT(fh,function(){return pa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kn.transition,Kn.transition=null;var o=Fe;Fe=1;var l=Pe;Pe|=4,Mv.current=null,x4(t,n),BT(n,t),WD(Ag),ph=!!kg,Ag=kg=null,t.current=n,w4(n),Xj(),Pe=l,Fe=o,Kn.transition=i}else t.current=n;if(md&&(md=!1,ei=t,Rh=s),i=t.pendingLanes,i===0&&(di=null),Zj(n.stateNode),_n(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ah)throw Ah=!1,t=Xg,Xg=null,t;return Rh&1&&t.tag!==0&&pa(),i=t.pendingLanes,i&1?t===Yg?cc++:(cc=0,Yg=t):cc=0,Li(),null}function pa(){if(ei!==null){var t=kS(Rh),e=Kn.transition,n=Fe;try{if(Kn.transition=null,Fe=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,Rh=0,Pe&6)throw Error(Z(331));var s=Pe;for(Pe|=4,ce=t.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ce=u;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:ac(8,h,i)}var f=h.child;if(f!==null)f.return=h,ce=f;else for(;ce!==null;){h=ce;var p=h.sibling,v=h.return;if(UT(h),h===u){ce=null;break}if(p!==null){p.return=v,ce=p;break}ce=v}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ce=b;break e}ce=i.return}}var x=t.current;for(ce=x;ce!==null;){o=ce;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ce=T;else e:for(o=x;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kf(9,l)}}catch(j){ut(l,l.return,j)}if(l===o){ce=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,ce=A;break e}ce=l.return}}if(Pe=s,Li(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{Fe=n,Kn.transition=e}}return!1}function U1(t,e,n){e=Ua(n,e),e=kT(t,e,1),t=ui(t,e,1),e=rn(),t!==null&&(iu(t,1,e),_n(t,e))}function ut(t,e,n){if(t.tag===3)U1(t,t,n);else for(;e!==null;){if(e.tag===3){U1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(di===null||!di.has(r))){t=Ua(n,t),t=AT(e,t,1),e=ui(e,t,1),t=rn(),e!==null&&(iu(e,1,t),_n(e,t));break}}e=e.return}}function N4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Lt&n)===n&&(Et===4||Et===3&&(Lt&130023424)===Lt&&500>ht()-Lv?mo(t,0):Ov|=n),_n(t,e)}function XT(t,e){e===0&&(t.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var n=rn();t=fs(t,e),t!==null&&(iu(t,e,n),_n(t,n))}function C4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),XT(t,n)}function I4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),XT(t,n)}var YT;YT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,p4(t,e,n);xn=!!(t.flags&131072)}else xn=!1,tt&&e.flags&1048576&&tT(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var s=Oa(e,Xt.current);ma(e,n),s=Av(null,e,r,t,s,n);var i=Rv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(i=!0,wh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tv(e),s.updater=If,e.stateNode=s,s._reactInternals=e,Fg(e,r,t,n),e=$g(null,e,r,!0,i,n)):(e.tag=0,tt&&i&&vv(e),en(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=A4(r),t=nr(r,t),s){case 0:e=zg(null,e,r,t,n);break e;case 1:e=A1(null,e,r,t,n);break e;case 11:e=I1(null,e,r,t,n);break e;case 14:e=k1(null,e,r,nr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),zg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),A1(t,e,r,s,n);case 3:e:{if(DT(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,aT(t,e),Th(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ua(Error(Z(423)),e),e=R1(t,e,r,n,s);break e}else if(r!==s){s=Ua(Error(Z(424)),e),e=R1(t,e,r,n,s);break e}else for(Pn=ci(e.stateNode.containerInfo.firstChild),Dn=e,tt=!0,or=null,n=iT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),r===s){e=ms(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return lT(e),t===null&&Og(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rg(r,s)?o=null:i!==null&&Rg(r,i)&&(e.flags|=32),jT(t,e),en(t,e,o,n),e.child;case 6:return t===null&&Og(e),null;case 13:return MT(t,e,n);case 4:return Nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Va(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),I1(t,e,r,s,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,qe(Eh,r._currentValue),r._currentValue=o,i!==null)if(gr(i.value,o)){if(i.children===s.children&&!wn.current){e=ms(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ls(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Lg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Lg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}en(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ma(e,n),s=Qn(s),r=r(s),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,s=nr(r,e.pendingProps),s=nr(r.type,s),k1(t,e,r,s,n);case 15:return RT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),Bd(t,e),e.tag=1,bn(r)?(t=!0,wh(e)):t=!1,ma(e,n),IT(e,r,s),Fg(e,r,s,n),$g(null,e,r,!0,t,n);case 19:return OT(t,e,n);case 22:return PT(t,e,n)}throw Error(Z(156,e.tag))};function JT(t,e){return TS(t,e)}function k4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,r){return new k4(t,e,n,r)}function zv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A4(t){if(typeof t=="function")return zv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ov)return 11;if(t===av)return 14}return 2}function fi(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jo:return po(n.children,s,i,e);case iv:o=8,s|=8;break;case cg:return t=qn(12,n,e,s|2),t.elementType=cg,t.lanes=i,t;case ug:return t=qn(13,n,e,s),t.elementType=ug,t.lanes=i,t;case dg:return t=qn(19,n,e,s),t.elementType=dg,t.lanes=i,t;case lS:return Rf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oS:o=10;break e;case aS:o=9;break e;case ov:o=11;break e;case av:o=14;break e;case Us:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=qn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function po(t,e,n,r){return t=qn(7,t,r,e),t.lanes=n,t}function Rf(t,e,n,r){return t=qn(22,t,r,e),t.elementType=lS,t.lanes=n,t.stateNode={isHidden:!1},t}function Tp(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function Np(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=op(0),this.expirationTimes=op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=op(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $v(t,e,n,r,s,i,o,l,c){return t=new R4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tv(i),t}function P4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZT(t){if(!t)return bi;t=t._reactInternals;e:{if(Do(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(bn(n))return ZS(t,n,e)}return e}function eN(t,e,n,r,s,i,o,l,c){return t=$v(n,r,!0,t,s,i,o,l,c),t.context=ZT(null),n=t.current,r=rn(),s=hi(n),i=ls(r,s),i.callback=e??null,ui(n,i,s),t.current.lanes=s,iu(t,s,r),_n(t,r),t}function Pf(t,e,n,r){var s=e.current,i=rn(),o=hi(s);return n=ZT(n),e.context===null?e.context=n:e.pendingContext=n,e=ls(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(s,e,o),t!==null&&(dr(t,s,o,i),Ud(t,s,o)),o}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bv(t,e){z1(t,e),(t=t.alternate)&&z1(t,e)}function j4(){return null}var tN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}jf.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Pf(t,e,null,null)};jf.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Eo(function(){Pf(null,t,null,null)}),e[hs]=null}};function jf(t){this._internalRoot=t}jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=PS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bs.length&&e!==0&&e<Bs[n].priority;n++);Bs.splice(n,0,t),n===0&&DS(t)}};function Wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $1(){}function D4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=jh(o);i.call(u)}}var o=eN(e,r,t,0,null,!1,!1,"",$1);return t._reactRootContainer=o,t[hs]=o.current,kc(t.nodeType===8?t.parentNode:t),Eo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=jh(c);l.call(u)}}var c=$v(t,0,!1,null,null,!1,!1,"",$1);return t._reactRootContainer=c,t[hs]=c.current,kc(t.nodeType===8?t.parentNode:t),Eo(function(){Pf(e,c,n,r)}),c}function Mf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=jh(o);l.call(c)}}Pf(e,o,t,s)}else o=D4(n,e,t,s,r);return jh(o)}AS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(uv(e,n|1),_n(e,ht()),!(Pe&6)&&(za=ht()+500,Li()))}break;case 13:Eo(function(){var r=fs(t,1);if(r!==null){var s=rn();dr(r,t,1,s)}}),Bv(t,1)}};dv=function(t){if(t.tag===13){var e=fs(t,134217728);if(e!==null){var n=rn();dr(e,t,134217728,n)}Bv(t,134217728)}};RS=function(t){if(t.tag===13){var e=hi(t),n=fs(t,e);if(n!==null){var r=rn();dr(n,t,e,r)}Bv(t,e)}};PS=function(){return Fe};jS=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};bg=function(t,e,n){switch(e){case"input":if(mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tf(r);if(!s)throw Error(Z(90));uS(r),mg(r,s)}}}break;case"textarea":hS(t,n);break;case"select":e=n.value,e!=null&&ua(t,!!n.multiple,e,!1)}};xS=Vv;wS=Eo;var M4={usingClientEntryPoint:!1,Events:[au,na,Tf,yS,vS,Vv]},Bl={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O4={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ES(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||j4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{bf=pd.inject(O4),Lr=pd}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M4;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wv(e))throw Error(Z(200));return P4(t,e,null,n)};Vn.createRoot=function(t,e){if(!Wv(t))throw Error(Z(299));var n=!1,r="",s=tN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$v(t,1,!1,null,null,n,!1,r,s),t[hs]=e.current,kc(t.nodeType===8?t.parentNode:t),new Hv(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=ES(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return Eo(t)};Vn.hydrate=function(t,e,n){if(!Df(e))throw Error(Z(200));return Mf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!Wv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eN(e,null,t,1,n??null,s,!1,i,o),t[hs]=e.current,kc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jf(e)};Vn.render=function(t,e,n){if(!Df(e))throw Error(Z(200));return Mf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Df(t))throw Error(Z(40));return t._reactRootContainer?(Eo(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};Vn.unstable_batchedUpdates=Vv;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Df(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Mf(t,e,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function nN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nN)}catch(t){console.error(t)}}nN(),nS.exports=Vn;var Gn=nS.exports;const L4=BE(Gn);var rN,B1=Gn;rN=B1.createRoot,B1.hydrateRoot;function V4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var sN={exports:{}},iN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=m;function F4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var U4=typeof Object.is=="function"?Object.is:F4,z4=$a.useState,$4=$a.useEffect,B4=$a.useLayoutEffect,H4=$a.useDebugValue;function W4(t,e){var n=e(),r=z4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return B4(function(){s.value=n,s.getSnapshot=e,Cp(s)&&i({inst:s})},[t,n,e]),$4(function(){return Cp(s)&&i({inst:s}),t(function(){Cp(s)&&i({inst:s})})},[t]),H4(n),n}function Cp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!U4(t,n)}catch{return!0}}function q4(t,e){return e()}var G4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q4:W4;iN.useSyncExternalStore=$a.useSyncExternalStore!==void 0?$a.useSyncExternalStore:G4;sN.exports=iN;var K4=sN.exports;const Q4=eS.useInsertionEffect,X4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y4=X4?m.useLayoutEffect:m.useEffect,J4=Q4||Y4,oN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return J4(()=>{e[0]=t}),e[1]},Z4="popstate",qv="pushState",Gv="replaceState",eM="hashchange",H1=[Z4,qv,Gv,eM],tM=t=>{for(const e of H1)addEventListener(e,t);return()=>{for(const e of H1)removeEventListener(e,t)}},aN=(t,e)=>K4.useSyncExternalStore(tM,t,e),nM=()=>location.search,rM=({ssrSearch:t=""}={})=>aN(nM,()=>t),W1=()=>location.pathname,sM=({ssrPath:t}={})=>aN(W1,t?()=>t:W1),iM=(t,{replace:e=!1,state:n=null}={})=>history[e?Gv:qv](n,"",t),oM=(t={})=>[sM(t),iM],q1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[q1]>"u"){for(const t of[qv,Gv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,q1,{value:!0})}const aM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",lN=(t="")=>t==="/"?"":t,lM=(t,e)=>t[0]==="~"?t.slice(1):lN(e)+t,cM=(t="",e)=>aM(G1(lN(t)),G1(e)),G1=t=>{try{return decodeURI(t)}catch{return t}},cN={hook:oM,searchHook:rM,parser:V4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},uN=m.createContext(cN),cu=()=>m.useContext(uN),dN={},hN=m.createContext(dN),uM=()=>m.useContext(hN),Of=t=>{const[e,n]=t.hook(t);return[cM(t.base,e),oN((r,s)=>n(lM(r,t.base),s))]},Kv=()=>Of(cu()),fN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},mN=({children:t,...e})=>{var h,f;const n=cu(),r=e.hook?cN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const v=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&v!==u[p]&&(l.current=u={...u}),u[p]=v,v!==r[p]&&(s=u)}return m.createElement(uN.Provider,{value:s,children:t})},K1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,dM=t=>{let e=m.useRef(dN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},kr=({path:t,nest:e,match:n,...r})=>{const s=cu(),[i]=Of(s),[o,l,c]=n??fN(s.parser,t,i,e),u=dM({...uM(),...l});if(!o)return null;const h=c?m.createElement(mN,{base:c},K1(r,u)):K1(r,u);return m.createElement(hN.Provider,{value:u,children:h})},ps=m.forwardRef((t,e)=>{const n=cu(),[r,s]=Of(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...v}=t,_=oN(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),s(o,t)))}),y=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:_,href:y}):m.createElement("a",{...v,onClick:_,href:y,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),pN=t=>Array.isArray(t)?t.flatMap(e=>pN(e&&e.type===m.Fragment?e.props.children:e)):[t],hM=({children:t,location:e})=>{const n=cu(),[r]=Of(n);for(const s of pN(t)){let i=0;if(m.isValidElement(s)&&(i=fN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Lf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vf=typeof window>"u"||"Deno"in globalThis;function rr(){}function fM(t,e){return typeof t=="function"?t(e):t}function mM(t){return typeof t=="number"&&t>=0&&t!==1/0}function pM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Q1(t,e){return typeof t=="function"?t(e):t}function gM(t,e){return typeof t=="function"?t(e):t}function X1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Qv(o,e.options))return!1}else if(!Fc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function Y1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Vc(e.options.mutationKey)!==Vc(i))return!1}else if(!Fc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Qv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vc)(t)}function Vc(t){return JSON.stringify(t,(e,n)=>ey(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Fc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Fc(t[n],e[n])):!1}function gN(t,e){if(t===e)return t;const n=J1(t)&&J1(e);if(n||ey(t)&&ey(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=gN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function J1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ey(t){if(!Z1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Z1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Z1(t){return Object.prototype.toString.call(t)==="[object Object]"}function yM(t){return new Promise(e=>{setTimeout(e,t)})}function vM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?gN(t,e):e}function xM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function wM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Xv=Symbol();function yN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Xv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var co,Ks,Na,ME,bM=(ME=class extends Lf{constructor(){super();Oe(this,co);Oe(this,Ks);Oe(this,Na);Ee(this,Na,e=>{if(!Vf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Ks)||this.setEventListener(Q(this,Na))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ks))==null||e.call(this),Ee(this,Ks,void 0))}setEventListener(e){var n;Ee(this,Na,e),(n=Q(this,Ks))==null||n.call(this),Ee(this,Ks,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,co)!==e&&(Ee(this,co,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,co)=="boolean"?Q(this,co):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},co=new WeakMap,Ks=new WeakMap,Na=new WeakMap,ME),vN=new bM,Ca,Qs,Ia,OE,_M=(OE=class extends Lf{constructor(){super();Oe(this,Ca,!0);Oe(this,Qs);Oe(this,Ia);Ee(this,Ia,e=>{if(!Vf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Qs)||this.setEventListener(Q(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Qs))==null||e.call(this),Ee(this,Qs,void 0))}setEventListener(e){var n;Ee(this,Ia,e),(n=Q(this,Qs))==null||n.call(this),Ee(this,Qs,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Ca)!==e&&(Ee(this,Ca,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Ca)}},Ca=new WeakMap,Qs=new WeakMap,Ia=new WeakMap,OE),Dh=new _M;function EM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function SM(t){return Math.min(1e3*2**t,3e4)}function xN(t){return(t??"online")==="online"?Dh.isOnline():!0}var wN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ip(t){return t instanceof wN}function bN(t){let e=!1,n=0,r=!1,s;const i=EM(),o=y=>{var w;r||(p(new wN(y)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>vN.isFocused()&&(t.networkMode==="always"||Dh.isOnline())&&t.canRun(),h=()=>xN(t.networkMode)&&t.canRun(),f=y=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,y),s==null||s(),i.resolve(y))},p=y=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,y),s==null||s(),i.reject(y))},v=()=>new Promise(y=>{var w;s=b=>{(r||u())&&y(b)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),_=()=>{if(r)return;let y;const w=n===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(f).catch(b=>{var M;if(r)return;const x=t.retry??(Vf?0:3),T=t.retryDelay??SM,A=typeof T=="function"?T(n,b):T,j=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!j){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),yM(A).then(()=>u()?void 0:v()).then(()=>{e?p(b):_()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?_():v().then(_),i)}}function TM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var nn=TM(),uo,LE,_N=(LE=class{constructor(){Oe(this,uo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mM(this.gcTime)&&Ee(this,uo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vf?1/0:5*60*1e3))}clearGcTimeout(){Q(this,uo)&&(clearTimeout(Q(this,uo)),Ee(this,uo,void 0))}},uo=new WeakMap,LE),ka,Aa,$n,qt,nu,ho,sr,ts,VE,NM=(VE=class extends _N{constructor(n){super();Oe(this,sr);Oe(this,ka);Oe(this,Aa);Oe(this,$n);Oe(this,qt);Oe(this,nu);Oe(this,ho);Ee(this,ho,!1),Ee(this,nu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,$n,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,ka,IM(this.options)),this.state=n.state??Q(this,ka),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,qt))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,nu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,$n).remove(this)}setData(n,r){const s=vM(this.state.data,n,this.options);return $t(this,sr,ts).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){$t(this,sr,ts).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,qt))==null?void 0:s.promise;return(i=Q(this,qt))==null||i.cancel(n),r?r.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,ka))}isActive(){return this.observers.some(n=>gM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!pM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,qt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,qt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,$n).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,qt)&&(Q(this,ho)?Q(this,qt).cancel({revert:!0}):Q(this,qt).cancelRetry()),this.scheduleGc()),Q(this,$n).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$t(this,sr,ts).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,qt))return Q(this,qt).continueRetry(),Q(this,qt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ee(this,ho,!0),s.signal)})},o=()=>{const p=yN(this.options,r),v={queryKey:this.queryKey,meta:this.meta};return i(v),Ee(this,ho,!1),this.options.persister?this.options.persister(p,v,this):p(v)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Ee(this,Aa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&$t(this,sr,ts).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var v,_,y,w;Ip(p)&&p.silent||$t(this,sr,ts).call(this,{type:"error",error:p}),Ip(p)||((_=(v=Q(this,$n).config).onError)==null||_.call(v,p,this),(w=(y=Q(this,$n).config).onSettled)==null||w.call(y,this.state.data,p,this)),this.scheduleGc()};return Ee(this,qt,bN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var v,_,y,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(_=(v=Q(this,$n).config).onSuccess)==null||_.call(v,p,this),(w=(y=Q(this,$n).config).onSettled)==null||w.call(y,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,v)=>{$t(this,sr,ts).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{$t(this,sr,ts).call(this,{type:"pause"})},onContinue:()=>{$t(this,sr,ts).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,qt).start()}},ka=new WeakMap,Aa=new WeakMap,$n=new WeakMap,qt=new WeakMap,nu=new WeakMap,ho=new WeakMap,sr=new WeakSet,ts=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...CM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Ip(i)&&i.revert&&Q(this,Aa)?{...Q(this,Aa),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),nn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,$n).notify({query:this,type:"updated",action:n})})},VE);function CM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function IM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Pr,FE,kM=(FE=class extends Lf{constructor(e={}){super();Oe(this,Pr);this.config=e,Ee(this,Pr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Qv(s,n);let o=this.get(i);return o||(o=new NM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Pr).has(e.queryHash)||(Q(this,Pr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Pr).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Pr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Pr).get(e)}getAll(){return[...Q(this,Pr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>X1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>X1(e,r)):n}notify(e){nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){nn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pr=new WeakMap,FE),jr,Zt,fo,Dr,Vs,UE,AM=(UE=class extends _N{constructor(n){super();Oe(this,Dr);Oe(this,jr);Oe(this,Zt);Oe(this,fo);this.mutationId=n.mutationId,Ee(this,Zt,n.mutationCache),Ee(this,jr,[]),this.state=n.state||RM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,jr).includes(n)||(Q(this,jr).push(n),this.clearGcTimeout(),Q(this,Zt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,jr,Q(this,jr).filter(r=>r!==n)),this.scheduleGc(),Q(this,Zt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,jr).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Zt).remove(this))}continue(){var n;return((n=Q(this,fo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,v,_,y,w,b,x,T,A,j,M,N,S;Ee(this,fo,bN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,I)=>{$t(this,Dr,Vs).call(this,{type:"failed",failureCount:C,error:I})},onPause:()=>{$t(this,Dr,Vs).call(this,{type:"pause"})},onContinue:()=>{$t(this,Dr,Vs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Zt).canRun(this)}));const r=this.state.status==="pending",s=!Q(this,fo).canStart();try{if(!r){$t(this,Dr,Vs).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=Q(this,Zt).config).onMutate)==null?void 0:o.call(i,n,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));I!==this.state.context&&$t(this,Dr,Vs).call(this,{type:"pending",context:I,variables:n,isPaused:s})}const C=await Q(this,fo).start();return await((h=(u=Q(this,Zt).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,n,this.state.context)),await((_=(v=Q(this,Zt).config).onSettled)==null?void 0:_.call(v,C,null,this.state.variables,this.state.context,this)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,C,null,n,this.state.context)),$t(this,Dr,Vs).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(b=Q(this,Zt).config).onError)==null?void 0:x.call(b,C,n,this.state.context,this)),await((A=(T=this.options).onError)==null?void 0:A.call(T,C,n,this.state.context)),await((M=(j=Q(this,Zt).config).onSettled)==null?void 0:M.call(j,void 0,C,this.state.variables,this.state.context,this)),await((S=(N=this.options).onSettled)==null?void 0:S.call(N,void 0,C,n,this.state.context)),C}finally{$t(this,Dr,Vs).call(this,{type:"error",error:C})}}finally{Q(this,Zt).runNext(this)}}},jr=new WeakMap,Zt=new WeakMap,fo=new WeakMap,Dr=new WeakSet,Vs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),nn.batch(()=>{Q(this,jr).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Zt).notify({mutation:this,type:"updated",action:n})})},UE);function RM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,ru,zE,PM=(zE=class extends Lf{constructor(e={}){super();Oe(this,In);Oe(this,ru);this.config=e,Ee(this,In,new Map),Ee(this,ru,Date.now())}build(e,n,r){const s=new AM({mutationCache:this,mutationId:++Ju(this,ru)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=gd(e),r=Q(this,In).get(n)??[];r.push(e),Q(this,In).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=gd(e);if(Q(this,In).has(n)){const s=(r=Q(this,In).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Q(this,In).delete(n):Q(this,In).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Q(this,In).get(gd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Q(this,In).get(gd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Q(this,In).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Y1(n,r))}findAll(e={}){return this.getAll().filter(n=>Y1(e,n))}notify(e){nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return nn.batch(()=>Promise.all(e.map(n=>n.continue().catch(rr))))}},In=new WeakMap,ru=new WeakMap,zE);function gd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function eb(t){return{onFetch:(e,n)=>{var h,f,p,v,_;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const w=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=yN(e.options,e.fetchOptions),x=async(T,A,j)=>{if(y)return Promise.reject();if(A==null&&T.pages.length)return Promise.resolve(T);const M={queryKey:e.queryKey,pageParam:A,direction:j?"backward":"forward",meta:e.options.meta};w(M);const N=await b(M),{maxPages:S}=e.options,C=j?wM:xM;return{pages:C(T.pages,N,S),pageParams:C(T.pageParams,A,S)}};if(s&&i.length){const T=s==="backward",A=T?jM:tb,j={pages:i,pageParams:o},M=A(r,j);l=await x(j,M,T)}else{const T=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:tb(r,l);if(c>0&&A==null)break;l=await x(l,A),c++}while(c<T)}return l};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function tb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function jM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ct,Xs,Ys,Ra,Pa,Js,ja,Da,$E,DM=($E=class{constructor(t={}){Oe(this,ct);Oe(this,Xs);Oe(this,Ys);Oe(this,Ra);Oe(this,Pa);Oe(this,Js);Oe(this,ja);Oe(this,Da);Ee(this,ct,t.queryCache||new kM),Ee(this,Xs,t.mutationCache||new PM),Ee(this,Ys,t.defaultOptions||{}),Ee(this,Ra,new Map),Ee(this,Pa,new Map),Ee(this,Js,0)}mount(){Ju(this,Js)._++,Q(this,Js)===1&&(Ee(this,ja,vN.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ct).onFocus())})),Ee(this,Da,Dh.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ct).onOnline())})))}unmount(){var t,e;Ju(this,Js)._--,Q(this,Js)===0&&((t=Q(this,ja))==null||t.call(this),Ee(this,ja,void 0),(e=Q(this,Da))==null||e.call(this),Ee(this,Da,void 0))}isFetching(t){return Q(this,ct).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Xs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ct).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Q(this,ct).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Q1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,ct).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,ct).get(r.queryHash),i=s==null?void 0:s.state.data,o=fM(e,i);if(o!==void 0)return Q(this,ct).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return nn.batch(()=>Q(this,ct).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ct).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,ct);nn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,ct),r={type:"active",...t};return nn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=nn.batch(()=>Q(this,ct).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(rr).catch(rr)}invalidateQueries(t={},e={}){return nn.batch(()=>{if(Q(this,ct).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=nn.batch(()=>Q(this,ct).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(rr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(rr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,ct).build(this,e);return n.isStaleByTime(Q1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(rr).catch(rr)}fetchInfiniteQuery(t){return t.behavior=eb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(rr).catch(rr)}ensureInfiniteQueryData(t){return t.behavior=eb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dh.isOnline()?Q(this,Xs).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,ct)}getMutationCache(){return Q(this,Xs)}getDefaultOptions(){return Q(this,Ys)}setDefaultOptions(t){Ee(this,Ys,t)}setQueryDefaults(t,e){Q(this,Ra).set(Vc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Ra).values()];let n={};return e.forEach(r=>{Fc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Pa).set(Vc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Pa).values()];let n={};return e.forEach(r=>{Fc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Ys).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Qv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Xv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Ys).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,ct).clear(),Q(this,Xs).clear()}},ct=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Ra=new WeakMap,Pa=new WeakMap,Js=new WeakMap,ja=new WeakMap,Da=new WeakMap,$E),MM=m.createContext(void 0),OM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(MM.Provider,{value:t,children:e}));async function LM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const VM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await LM(n),await n.json())},FM=new DM({defaultOptions:{queries:{queryFn:VM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),UM=1,zM=1e6;let kp=0;function $M(){return kp=(kp+1)%Number.MAX_SAFE_INTEGER,kp.toString()}const Ap=new Map,nb=t=>{if(Ap.has(t))return;const e=setTimeout(()=>{Ap.delete(t),uc({type:"REMOVE_TOAST",toastId:t})},zM);Ap.set(t,e)},BM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,UM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?nb(n):t.toasts.forEach(r=>{nb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Gd=[];let Kd={toasts:[]};function uc(t){Kd=BM(Kd,t),Gd.forEach(e=>{e(Kd)})}function HM({...t}){const e=$M(),n=s=>uc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uc({type:"DISMISS_TOAST",toastId:e});return uc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Mo(){const[t,e]=m.useState(Kd);return m.useEffect(()=>(Gd.push(e),()=>{const n=Gd.indexOf(e);n>-1&&Gd.splice(n,1)}),[t]),{...t,toast:HM,dismiss:n=>uc({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function rb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=rb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():rb(t[s],null)}}}}function Ue(...t){return m.useCallback(EN(...t),t)}function WM(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Yn(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var b;const{scope:p,children:v,..._}=f,y=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,w=m.useMemo(()=>_,Object.values(_));return a.jsx(y.Provider,{value:w,children:v})};u.displayName=i+"Provider";function h(f,p){var y;const v=((y=p==null?void 0:p[t])==null?void 0:y[c])||l,_=m.useContext(v);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,qM(s,...e)]}function qM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ba(t){const e=KM(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(QM);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var GM=Ba("Slot");function KM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=YM(s),l=XM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?EN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SN=Symbol("radix.slottable");function TN(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=SN,e}function QM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SN}function XM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function YM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Yv(t){const e=t+"CollectionProvider",[n,r]=Yn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:b}=y,x=Se.useRef(null),T=Se.useRef(new Map).current;return a.jsx(s,{scope:w,itemMap:T,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=Ba(l),u=Se.forwardRef((y,w)=>{const{scope:b,children:x}=y,T=i(l,b),A=Ue(w,T.collectionRef);return a.jsx(c,{ref:A,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ba(h),v=Se.forwardRef((y,w)=>{const{scope:b,children:x,...T}=y,A=Se.useRef(null),j=Ue(w,A),M=i(h,b);return Se.useEffect(()=>(M.itemMap.set(A,{ref:A,...T}),()=>void M.itemMap.delete(A))),a.jsx(p,{[f]:"",ref:j,children:x})});v.displayName=h;function _(y){const w=i(t+"CollectionConsumer",y);return Se.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const T=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((M,N)=>T.indexOf(M.ref.current)-T.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:v},_,r]}var JM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ve=JM.reduce((t,e)=>{const n=Ba(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function NN(t,e){t&&Gn.flushSync(()=>t.dispatchEvent(e))}function sn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function ZM(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var eO="DismissableLayer",ty="dismissableLayer.update",tO="dismissableLayer.pointerDownOutside",nO="dismissableLayer.focusOutside",sb,CN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(CN),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=m.useState({}),_=Ue(e,N=>f(N)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(w),x=h?y.indexOf(h):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,A=x>=b,j=sO(N=>{const S=N.target,C=[...u.branches].some(I=>I.contains(S));!A||C||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),M=iO(N=>{const S=N.target;[...u.branches].some(I=>I.contains(S))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return ZM(N=>{x===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(sb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),ib(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=sb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),ib())},[h,u]),m.useEffect(()=>{const N=()=>v({});return document.addEventListener(ty,N),()=>document.removeEventListener(ty,N)},[]),a.jsx(ve.div,{...c,ref:_,style:{pointerEvents:T?A?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,M.onFocusCapture),onBlurCapture:me(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,j.onPointerDownCapture)})});uu.displayName=eO;var rO="DismissableLayerBranch",IN=m.forwardRef((t,e)=>{const n=m.useContext(CN),r=m.useRef(null),s=Ue(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ve.div,{...t,ref:s})});IN.displayName=rO;function sO(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){kN(tO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function iO(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&kN(nO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ib(){const t=new CustomEvent(ty);document.dispatchEvent(t)}function kN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?NN(s,i):s.dispatchEvent(i)}var oO=uu,aO=IN,Tt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},lO="Portal",du=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);Tt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?L4.createPortal(a.jsx(ve.div,{...r,ref:e}),o):null});du.displayName=lO;function cO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Vi=t=>{const{present:e,children:n}=t,r=uO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ue(r.ref,dO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Vi.displayName="Presence";function uO(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=cO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=yd(r.current);i.current=l==="mounted"?u:"none"},[l]),Tt(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,v=yd(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Tt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=v=>{const y=yd(r.current).includes(v.animationName);if(v.target===e&&y&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=v=>{v.target===e&&(i.current=yd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function yd(t){return(t==null?void 0:t.animationName)||"none"}function dO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function _i({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=hO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=sn(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function hO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=sn(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var fO="VisuallyHidden",hu=m.forwardRef((t,e)=>a.jsx(ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));hu.displayName=fO;var mO=hu,Jv="ToastProvider",[Zv,pO,gO]=Yv("Toast"),[AN,oq]=Yn("Toast",[gO]),[yO,Ff]=AN(Jv),RN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jv}\`. Expected non-empty \`string\`.`),a.jsx(Zv.Provider,{scope:e,children:a.jsx(yO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(v=>v+1),[]),onToastRemove:m.useCallback(()=>h(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};RN.displayName=Jv;var PN="ToastViewport",vO=["F8"],ny="toast.viewportPause",ry="toast.viewportResume",jN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=vO,label:s="Notifications ({hotkey})",...i}=t,o=Ff(PN,n),l=pO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Ue(e,f,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;m.useEffect(()=>{const w=b=>{var T;r.length!==0&&r.every(A=>b[A]||b.code===A)&&((T=f.current)==null||T.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,b=f.current;if(_&&w&&b){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(ny);b.dispatchEvent(M),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(ry);b.dispatchEvent(M),o.isClosePausedRef.current=!1}},A=M=>{!w.contains(M.relatedTarget)&&T()},j=()=>{w.contains(document.activeElement)||T()};return w.addEventListener("focusin",x),w.addEventListener("focusout",A),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",j),window.addEventListener("blur",x),window.addEventListener("focus",T),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",A),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",j),window.removeEventListener("blur",x),window.removeEventListener("focus",T)}}},[_,o.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:w})=>{const x=l().map(T=>{const A=T.ref.current,j=[A,...RO(A)];return w==="forwards"?j:j.reverse()});return(w==="forwards"?x.reverse():x).flat()},[l]);return m.useEffect(()=>{const w=f.current;if(w){const b=x=>{var j,M,N;const T=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!T){const S=document.activeElement,C=x.shiftKey;if(x.target===w&&C){(j=u.current)==null||j.focus();return}const D=y({tabbingDirection:C?"backwards":"forwards"}),P=D.findIndex(B=>B===S);Rp(D.slice(P+1))?x.preventDefault():C?(M=u.current)==null||M.focus():(N=h.current)==null||N.focus()}};return w.addEventListener("keydown",b),()=>w.removeEventListener("keydown",b)}},[l,y]),a.jsxs(aO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&a.jsx(sy,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Rp(w)}}),a.jsx(Zv.Slot,{scope:n,children:a.jsx(ve.ol,{tabIndex:-1,...i,ref:p})}),_&&a.jsx(sy,{ref:h,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Rp(w)}})]})});jN.displayName=PN;var DN="ToastFocusProxy",sy=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ff(DN,n);return a.jsx(hu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});sy.displayName=DN;var Uf="Toast",xO="toast.swipeStart",wO="toast.swipeMove",bO="toast.swipeCancel",_O="toast.swipeEnd",MN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=_i({prop:r,defaultProp:s,onChange:i});return a.jsx(Vi,{present:n||l,children:a.jsx(TO,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:sn(t.onPause),onResume:sn(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});MN.displayName=Uf;var[EO,SO]=AN(Uf,{onClose(){}}),TO=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:v,..._}=t,y=Ff(Uf,n),[w,b]=m.useState(null),x=Ue(e,B=>b(B)),T=m.useRef(null),A=m.useRef(null),j=s||y.duration,M=m.useRef(0),N=m.useRef(j),S=m.useRef(0),{onToastAdd:C,onToastRemove:I}=y,k=sn(()=>{var se;(w==null?void 0:w.contains(document.activeElement))&&((se=y.viewport)==null||se.focus()),o()}),D=m.useCallback(B=>{!B||B===1/0||(window.clearTimeout(S.current),M.current=new Date().getTime(),S.current=window.setTimeout(k,B))},[k]);m.useEffect(()=>{const B=y.viewport;if(B){const se=()=>{D(N.current),u==null||u()},U=()=>{const H=new Date().getTime()-M.current;N.current=N.current-H,window.clearTimeout(S.current),c==null||c()};return B.addEventListener(ny,U),B.addEventListener(ry,se),()=>{B.removeEventListener(ny,U),B.removeEventListener(ry,se)}}},[y.viewport,j,c,u,D]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(j)},[i,j,y.isClosePausedRef,D]),m.useEffect(()=>(C(),()=>I()),[C,I]);const P=m.useMemo(()=>w?$N(w):null,[w]);return y.viewport?a.jsxs(a.Fragment,{children:[P&&a.jsx(NO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),a.jsx(EO,{scope:n,onClose:k,children:Gn.createPortal(a.jsx(Zv.ItemSlot,{scope:n,children:a.jsx(oO,{asChild:!0,onEscapeKeyDown:me(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||k(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,..._,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:me(t.onPointerDown,B=>{B.button===0&&(T.current={x:B.clientX,y:B.clientY})}),onPointerMove:me(t.onPointerMove,B=>{if(!T.current)return;const se=B.clientX-T.current.x,U=B.clientY-T.current.y,H=!!A.current,O=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,z=O?L(0,se):0,F=O?0:L(0,U),X=B.pointerType==="touch"?10:2,Y={x:z,y:F},J={originalEvent:B,delta:Y};H?(A.current=Y,vd(wO,f,J,{discrete:!1})):ob(Y,y.swipeDirection,X)?(A.current=Y,vd(xO,h,J,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(se)>X||Math.abs(U)>X)&&(T.current=null)}),onPointerUp:me(t.onPointerUp,B=>{const se=A.current,U=B.target;if(U.hasPointerCapture(B.pointerId)&&U.releasePointerCapture(B.pointerId),A.current=null,T.current=null,se){const H=B.currentTarget,O={originalEvent:B,delta:se};ob(se,y.swipeDirection,y.swipeThreshold)?vd(_O,v,O,{discrete:!0}):vd(bO,p,O,{discrete:!0}),H.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),NO=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ff(Uf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return kO(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(du,{asChild:!0,children:a.jsx(hu,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},CO="ToastTitle",ON=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ve.div,{...r,ref:e})});ON.displayName=CO;var IO="ToastDescription",LN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ve.div,{...r,ref:e})});LN.displayName=IO;var VN="ToastAction",FN=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(zN,{altText:n,asChild:!0,children:a.jsx(ex,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VN}\`. Expected non-empty \`string\`.`),null)});FN.displayName=VN;var UN="ToastClose",ex=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=SO(UN,n);return a.jsx(zN,{asChild:!0,children:a.jsx(ve.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});ex.displayName=UN;var zN=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function $N(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),AO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$N(r))}}),e}function vd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?NN(s,i):s.dispatchEvent(i)}var ob=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function kO(t=()=>{}){const e=sn(t);Tt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function AO(t){return t.nodeType===t.ELEMENT_NODE}function RO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Rp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var PO=RN,BN=jN,HN=MN,WN=ON,qN=LN,GN=FN,KN=ex;function QN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=QN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function XN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=QN(t))&&(r&&(r+=" "),r+=e);return r}const ab=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,lb=XN,fu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return lb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=ab(h)||ab(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(_=>{let[y,w]=_;return Array.isArray(w)?w.includes({...i,...l}[y]):{...i,...l}[y]===w})?[...u,f,p]:u},[]);return lb(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...DO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:YN("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(MO,{ref:i,iconNode:e,className:YN(`lucide-${jO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ue("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ue("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ue("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ue("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ue("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ue("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ue("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ue("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),lx="-",a5=t=>{const e=c5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(lx);return l[0]===""&&l.length!==1&&l.shift(),dC(l,e)||l5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},dC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?dC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(lx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},hb=/^\[(.+)\]$/,l5=t=>{if(hb.test(t)){const e=hb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},c5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return d5(Object.entries(t.classGroups),n).forEach(([i,o])=>{cy(o,r,i,e)}),r},cy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:fb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(u5(s)){cy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{cy(o,fb(e,i),n,r)})})},fb=(t,e)=>{let n=t;return e.split(lx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},u5=t=>t.isThemeGetter,d5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,h5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},hC="!",f5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let w=0;w<l.length;w++){let b=l[w];if(u===0){if(b===s&&(r||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(b==="/"){f=w;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),v=p.startsWith(hC),_=v?p.substring(1):p,y=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},m5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},p5=t=>({cache:h5(t.cacheSize),parseClassName:f5(t),...a5(t)}),g5=/\s+/,y5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(g5);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(u);let _=!!v,y=r(_?p.substring(0,v):p);if(!y){if(!_){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}_=!1}const w=m5(h).join(":"),b=f?w+hC:w,x=b+y;if(i.includes(x))continue;i.push(x);const T=s(y,_);for(let A=0;A<T.length;++A){const j=T[A];i.push(b+j)}l=u+(l.length>0?" "+l:l)}return l};function v5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=fC(e))&&(r&&(r+=" "),r+=n);return r}const fC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=fC(t[r]))&&(n&&(n+=" "),n+=e);return n};function x5(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=p5(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=y5(c,n);return s(c,h),h}return function(){return i(v5.apply(null,arguments))}}const Qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},mC=/^\[(?:([a-z-]+):)?(.+)\]$/i,w5=/^\d+\/\d+$/,b5=new Set(["px","full","screen"]),_5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,T5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,N5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,es=t=>ga(t)||b5.has(t)||w5.test(t),Ms=t=>ol(t,"length",D5),ga=t=>!!t&&!Number.isNaN(Number(t)),Pp=t=>ol(t,"number",ga),Hl=t=>!!t&&Number.isInteger(Number(t)),C5=t=>t.endsWith("%")&&ga(t.slice(0,-1)),be=t=>mC.test(t),Os=t=>_5.test(t),I5=new Set(["length","size","percentage"]),k5=t=>ol(t,I5,pC),A5=t=>ol(t,"position",pC),R5=new Set(["image","url"]),P5=t=>ol(t,R5,O5),j5=t=>ol(t,"",M5),Wl=()=>!0,ol=(t,e,n)=>{const r=mC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},D5=t=>E5.test(t)&&!S5.test(t),pC=()=>!1,M5=t=>T5.test(t),O5=t=>N5.test(t),L5=()=>{const t=Qe("colors"),e=Qe("spacing"),n=Qe("blur"),r=Qe("brightness"),s=Qe("borderColor"),i=Qe("borderRadius"),o=Qe("borderSpacing"),l=Qe("borderWidth"),c=Qe("contrast"),u=Qe("grayscale"),h=Qe("hueRotate"),f=Qe("invert"),p=Qe("gap"),v=Qe("gradientColorStops"),_=Qe("gradientColorStopPositions"),y=Qe("inset"),w=Qe("margin"),b=Qe("opacity"),x=Qe("padding"),T=Qe("saturate"),A=Qe("scale"),j=Qe("sepia"),M=Qe("skew"),N=Qe("space"),S=Qe("translate"),C=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",be,e],D=()=>[be,e],P=()=>["",es,Ms],B=()=>["auto",ga,be],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",be],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ga,be];return{cacheSize:500,separator:":",theme:{colors:[Wl],spacing:[es,Ms],blur:["none","",Os,be],brightness:F(),borderColor:[t],borderRadius:["none","","full",Os,be],borderSpacing:D(),borderWidth:P(),contrast:F(),grayscale:L(),hueRotate:F(),invert:L(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[C5,Ms],inset:k(),margin:k(),opacity:F(),padding:D(),saturate:F(),scale:F(),sepia:L(),skew:F(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Os]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),be]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hl,be]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Hl,be]}],"grid-cols":[{"grid-cols":[Wl]}],"col-start-end":[{col:["auto",{span:["full",Hl,be]},be]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Wl]}],"row-start-end":[{row:["auto",{span:[Hl,be]},be]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Os]},Os]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Os,Ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pp]}],"font-family":[{font:[Wl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",ga,Pp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",es,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",es,Ms]}],"underline-offset":[{"underline-offset":["auto",es,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),A5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},P5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[es,be]}],"outline-w":[{outline:[es,Ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[es,Ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Os,j5]}],"shadow-color":[{shadow:[Wl]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Os,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Hl,be]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[es,Ms,Pp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},V5=x5(L5);function W(...t){return V5(XN(t))}const F5=PO,gC=m.forwardRef(({className:t,...e},n)=>a.jsx(BN,{ref:n,className:W("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));gC.displayName=BN.displayName;const U5=fu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(HN,{ref:r,className:W(U5({variant:e}),t),...n}));yC.displayName=HN.displayName;const z5=m.forwardRef(({className:t,...e},n)=>a.jsx(GN,{ref:n,className:W("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));z5.displayName=GN.displayName;const vC=m.forwardRef(({className:t,...e},n)=>a.jsx(KN,{ref:n,className:W("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Ei,{className:"h-4 w-4"})}));vC.displayName=KN.displayName;const xC=m.forwardRef(({className:t,...e},n)=>a.jsx(WN,{ref:n,className:W("text-sm font-semibold",t),...e}));xC.displayName=WN.displayName;const wC=m.forwardRef(({className:t,...e},n)=>a.jsx(qN,{ref:n,className:W("text-sm opacity-90",t),...e}));wC.displayName=qN.displayName;function $5(){const{toasts:t}=Mo();return a.jsxs(F5,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(yC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(xC,{children:n}),r&&a.jsx(wC,{children:r})]}),s,a.jsx(vC,{})]},e)}),a.jsx(gC,{})]})}var B5=eS[" useId ".trim().toString()]||(()=>{}),H5=0;function cs(t){const[e,n]=m.useState(B5());return Tt(()=>{n(r=>r??String(H5++))},[t]),e?`radix-${e}`:""}const W5=["top","right","bottom","left"],Si=Math.min,An=Math.max,Oh=Math.round,xd=Math.floor,Fr=t=>({x:t,y:t}),q5={left:"right",right:"left",bottom:"top",top:"bottom"},G5={start:"end",end:"start"};function uy(t,e,n){return An(t,Si(e,n))}function gs(t,e){return typeof t=="function"?t(e):t}function ys(t){return t.split("-")[0]}function al(t){return t.split("-")[1]}function cx(t){return t==="x"?"y":"x"}function ux(t){return t==="y"?"height":"width"}function Ti(t){return["top","bottom"].includes(ys(t))?"y":"x"}function dx(t){return cx(Ti(t))}function K5(t,e,n){n===void 0&&(n=!1);const r=al(t),s=dx(t),i=ux(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Lh(o)),[o,Lh(o)]}function Q5(t){const e=Lh(t);return[dy(t),e,dy(e)]}function dy(t){return t.replace(/start|end/g,e=>G5[e])}function X5(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Y5(t,e,n,r){const s=al(t);let i=X5(ys(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(dy)))),i}function Lh(t){return t.replace(/left|right|bottom|top/g,e=>q5[e])}function J5(t){return{top:0,right:0,bottom:0,left:0,...t}}function bC(t){return typeof t!="number"?J5(t):{top:t,right:t,bottom:t,left:t}}function Vh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function mb(t,e,n){let{reference:r,floating:s}=t;const i=Ti(e),o=dx(e),l=ux(o),c=ys(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(al(e)){case"start":v[o]-=p*(n&&u?-1:1);break;case"end":v[o]+=p*(n&&u?-1:1);break}return v}const Z5=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=mb(u,r,c),p=r,v={},_=0;for(let y=0;y<l.length;y++){const{name:w,fn:b}=l[y],{x,y:T,data:A,reset:j}=await b({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});h=x??h,f=T??f,v={...v,[w]:{...v[w],...A}},j&&_<=50&&(_++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=mb(u,p,c)),y=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:v}};async function $c(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=gs(e,t),_=bC(v),w=l[p?f==="floating"?"reference":"floating":f],b=Vh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),A=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},j=Vh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:T,strategy:c}):x);return{top:(b.top-j.top+_.top)/A.y,bottom:(j.bottom-b.bottom+_.bottom)/A.y,left:(b.left-j.left+_.left)/A.x,right:(j.right-b.right+_.right)/A.x}}const eL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=gs(t,e)||{};if(u==null)return{};const f=bC(h),p={x:n,y:r},v=dx(s),_=ux(v),y=await o.getDimensions(u),w=v==="y",b=w?"top":"left",x=w?"bottom":"right",T=w?"clientHeight":"clientWidth",A=i.reference[_]+i.reference[v]-p[v]-i.floating[_],j=p[v]-i.reference[v],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=M?M[T]:0;(!N||!await(o.isElement==null?void 0:o.isElement(M)))&&(N=l.floating[T]||i.floating[_]);const S=A/2-j/2,C=N/2-y[_]/2-1,I=Si(f[b],C),k=Si(f[x],C),D=I,P=N-y[_]-k,B=N/2-y[_]/2+S,se=uy(D,B,P),U=!c.arrow&&al(s)!=null&&B!==se&&i.reference[_]/2-(B<D?I:k)-y[_]/2<0,H=U?B<D?B-D:B-P:0;return{[v]:p[v]+H,data:{[v]:se,centerOffset:B-se-H,...U&&{alignmentOffset:H}},reset:U}}}),tL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...w}=gs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=ys(s),x=Ti(l),T=ys(l)===l,A=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=p||(T||!y?[Lh(l)]:Q5(l)),M=_!=="none";!p&&M&&j.push(...Y5(l,y,_,A));const N=[l,...j],S=await $c(e,w),C=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(S[b]),f){const B=K5(s,o,A);C.push(S[B[0]],S[B[1]])}if(I=[...I,{placement:s,overflows:C}],!C.every(B=>B<=0)){var k,D;const B=(((k=i.flip)==null?void 0:k.index)||0)+1,se=N[B];if(se)return{data:{index:B,overflows:I},reset:{placement:se}};let U=(D=I.filter(H=>H.overflows[0]<=0).sort((H,O)=>H.overflows[1]-O.overflows[1])[0])==null?void 0:D.placement;if(!U)switch(v){case"bestFit":{var P;const H=(P=I.filter(O=>{if(M){const L=Ti(O.placement);return L===x||L==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(L=>L>0).reduce((L,z)=>L+z,0)]).sort((O,L)=>O[1]-L[1])[0])==null?void 0:P[0];H&&(U=H);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function pb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gb(t){return W5.some(e=>t[e]>=0)}const nL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=gs(t,e);switch(r){case"referenceHidden":{const i=await $c(e,{...s,elementContext:"reference"}),o=pb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:gb(o)}}}case"escaped":{const i=await $c(e,{...s,altBoundary:!0}),o=pb(i,n.floating);return{data:{escapedOffsets:o,escaped:gb(o)}}}default:return{}}}}};async function rL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ys(n),l=al(n),c=Ti(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=gs(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof _=="number"&&(v=l==="end"?_*-1:_),c?{x:v*h,y:p*u}:{x:p*u,y:v*h}}const sL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await rL(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},iL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:b,y:x}=w;return{x:b,y:x}}},...c}=gs(t,e),u={x:n,y:r},h=await $c(e,c),f=Ti(ys(s)),p=cx(f);let v=u[p],_=u[f];if(i){const w=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=v+h[w],T=v-h[b];v=uy(x,v,T)}if(o){const w=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=_+h[w],T=_-h[b];_=uy(x,_,T)}const y=l.fn({...e,[p]:v,[f]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[f]:o}}}}}},oL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=gs(t,e),h={x:n,y:r},f=Ti(s),p=cx(f);let v=h[p],_=h[f];const y=gs(l,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const T=p==="y"?"height":"width",A=i.reference[p]-i.floating[T]+w.mainAxis,j=i.reference[p]+i.reference[T]-w.mainAxis;v<A?v=A:v>j&&(v=j)}if(u){var b,x;const T=p==="y"?"width":"height",A=["top","left"].includes(ys(s)),j=i.reference[f]-i.floating[T]+(A&&((b=o.offset)==null?void 0:b[f])||0)+(A?0:w.crossAxis),M=i.reference[f]+i.reference[T]+(A?0:((x=o.offset)==null?void 0:x[f])||0)-(A?w.crossAxis:0);_<j?_=j:_>M&&(_=M)}return{[p]:v,[f]:_}}}},aL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=gs(t,e),h=await $c(e,u),f=ys(s),p=al(s),v=Ti(s)==="y",{width:_,height:y}=i.floating;let w,b;f==="top"||f==="bottom"?(w=f,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,w=p==="end"?"top":"bottom");const x=y-h.top-h.bottom,T=_-h.left-h.right,A=Si(y-h[w],x),j=Si(_-h[b],T),M=!e.middlewareData.shift;let N=A,S=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=x),M&&!p){const I=An(h.left,0),k=An(h.right,0),D=An(h.top,0),P=An(h.bottom,0);v?S=_-2*(I!==0||k!==0?I+k:An(h.left,h.right)):N=y-2*(D!==0||P!==0?D+P:An(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:N});const C=await o.getDimensions(l.floating);return _!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function Wf(){return typeof window<"u"}function ll(t){return _C(t)?(t.nodeName||"").toLowerCase():"#document"}function Mn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Qr(t){var e;return(e=(_C(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _C(t){return Wf()?t instanceof Node||t instanceof Mn(t).Node:!1}function yr(t){return Wf()?t instanceof Element||t instanceof Mn(t).Element:!1}function Hr(t){return Wf()?t instanceof HTMLElement||t instanceof Mn(t).HTMLElement:!1}function yb(t){return!Wf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mn(t).ShadowRoot}function mu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=vr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function lL(t){return["table","td","th"].includes(ll(t))}function qf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function hx(t){const e=fx(),n=yr(t)?vr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function cL(t){let e=Ni(t);for(;Hr(e)&&!qa(e);){if(hx(e))return e;if(qf(e))return null;e=Ni(e)}return null}function fx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qa(t){return["html","body","#document"].includes(ll(t))}function vr(t){return Mn(t).getComputedStyle(t)}function Gf(t){return yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ni(t){if(ll(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yb(t)&&t.host||Qr(t);return yb(e)?e.host:e}function EC(t){const e=Ni(t);return qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Hr(e)&&mu(e)?e:EC(e)}function Bc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=EC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Mn(s);if(i){const l=hy(o);return e.concat(o,o.visualViewport||[],mu(s)?s:[],l&&n?Bc(l):[])}return e.concat(s,Bc(s,[],n))}function hy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SC(t){const e=vr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Hr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Oh(n)!==i||Oh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function mx(t){return yr(t)?t:t.contextElement}function ya(t){const e=mx(t);if(!Hr(e))return Fr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=SC(e);let o=(i?Oh(n.width):n.width)/r,l=(i?Oh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const uL=Fr(0);function TC(t){const e=Mn(t);return!fx()||!e.visualViewport?uL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mn(t)?!1:e}function So(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=mx(t);let o=Fr(1);e&&(r?yr(r)&&(o=ya(r)):o=ya(t));const l=dL(i,n,r)?TC(i):Fr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Mn(i),v=r&&yr(r)?Mn(r):r;let _=p,y=hy(_);for(;y&&r&&v!==_;){const w=ya(y),b=y.getBoundingClientRect(),x=vr(y),T=b.left+(y.clientLeft+parseFloat(x.paddingLeft))*w.x,A=b.top+(y.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,f*=w.y,c+=T,u+=A,_=Mn(y),y=hy(_)}}return Vh({width:h,height:f,x:c,y:u})}function px(t,e){const n=Gf(t).scrollLeft;return e?e.left+n:So(Qr(t)).left+n}function NC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:px(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function hL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Qr(r),l=e?qf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Fr(1);const h=Fr(0),f=Hr(r);if((f||!f&&!i)&&((ll(r)!=="body"||mu(o))&&(c=Gf(r)),Hr(r))){const v=So(r);u=ya(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=o&&!f&&!i?NC(o,c,!0):Fr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function fL(t){return Array.from(t.getClientRects())}function mL(t){const e=Qr(t),n=Gf(t),r=t.ownerDocument.body,s=An(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=An(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+px(t);const l=-n.scrollTop;return vr(r).direction==="rtl"&&(o+=An(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function pL(t,e){const n=Mn(t),r=Qr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=fx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function gL(t,e){const n=So(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Hr(t)?ya(t):Fr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function vb(t,e,n){let r;if(e==="viewport")r=pL(t,n);else if(e==="document")r=mL(Qr(t));else if(yr(e))r=gL(e,n);else{const s=TC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Vh(r)}function CC(t,e){const n=Ni(t);return n===e||!yr(n)||qa(n)?!1:vr(n).position==="fixed"||CC(n,e)}function yL(t,e){const n=e.get(t);if(n)return n;let r=Bc(t,[],!1).filter(l=>yr(l)&&ll(l)!=="body"),s=null;const i=vr(t).position==="fixed";let o=i?Ni(t):t;for(;yr(o)&&!qa(o);){const l=vr(o),c=hx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||mu(o)&&!c&&CC(t,o))?r=r.filter(h=>h!==o):s=l,o=Ni(o)}return e.set(t,r),r}function vL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?qf(e)?[]:yL(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=vb(e,h,s);return u.top=An(f.top,u.top),u.right=Si(f.right,u.right),u.bottom=Si(f.bottom,u.bottom),u.left=An(f.left,u.left),u},vb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xL(t){const{width:e,height:n}=SC(t);return{width:e,height:n}}function wL(t,e,n){const r=Hr(e),s=Qr(e),i=n==="fixed",o=So(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Fr(0);if(r||!r&&!i)if((ll(e)!=="body"||mu(s))&&(l=Gf(e)),r){const p=So(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=px(s));const u=s&&!r&&!i?NC(s,l):Fr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function jp(t){return vr(t).position==="static"}function xb(t,e){if(!Hr(t)||vr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Qr(t)===n&&(n=n.ownerDocument.body),n}function IC(t,e){const n=Mn(t);if(qf(t))return n;if(!Hr(t)){let s=Ni(t);for(;s&&!qa(s);){if(yr(s)&&!jp(s))return s;s=Ni(s)}return n}let r=xb(t,e);for(;r&&lL(r)&&jp(r);)r=xb(r,e);return r&&qa(r)&&jp(r)&&!hx(r)?n:r||cL(t)||n}const bL=async function(t){const e=this.getOffsetParent||IC,n=this.getDimensions,r=await n(t.floating);return{reference:wL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _L(t){return vr(t).direction==="rtl"}const EL={convertOffsetParentRelativeRectToViewportRelativeRect:hL,getDocumentElement:Qr,getClippingRect:vL,getOffsetParent:IC,getElementRects:bL,getClientRects:fL,getDimensions:xL,getScale:ya,isElement:yr,isRTL:_L};function kC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function SL(t,e){let n=null,r;const s=Qr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:v}=u;if(l||e(),!p||!v)return;const _=xd(f),y=xd(s.clientWidth-(h+p)),w=xd(s.clientHeight-(f+v)),b=xd(h),T={rootMargin:-_+"px "+-y+"px "+-w+"px "+-b+"px",threshold:An(0,Si(1,c))||1};let A=!0;function j(M){const N=M[0].intersectionRatio;if(N!==c){if(!A)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!kC(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(j,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,T)}n.observe(t)}return o(!0),i}function TL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=mx(t),h=s||i?[...u?Bc(u):[],...Bc(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=u&&l?SL(u,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=v)==null||T.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let _,y=c?So(t):null;c&&w();function w(){const b=So(t);y&&!kC(y,b)&&n(),y=b,_=requestAnimationFrame(w)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(b=v)==null||b.disconnect(),v=null,c&&cancelAnimationFrame(_)}}const NL=sL,CL=iL,IL=tL,kL=aL,AL=nL,wb=eL,RL=oL,PL=(t,e,n)=>{const r=new Map,s={platform:EL,...n},i={...s.platform,_c:r};return Z5(t,e,{...s,platform:i})};var Qd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Fh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Fh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Fh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function AC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bb(t,e){const n=AC(t);return Math.round(e*n)/n}function Dp(t){const e=m.useRef(t);return Qd(()=>{e.current=t}),e}function jL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=m.useState(r);Fh(p,r)||v(r);const[_,y]=m.useState(null),[w,b]=m.useState(null),x=m.useCallback(O=>{O!==M.current&&(M.current=O,y(O))},[]),T=m.useCallback(O=>{O!==N.current&&(N.current=O,b(O))},[]),A=i||_,j=o||w,M=m.useRef(null),N=m.useRef(null),S=m.useRef(h),C=c!=null,I=Dp(c),k=Dp(s),D=Dp(u),P=m.useCallback(()=>{if(!M.current||!N.current)return;const O={placement:e,strategy:n,middleware:p};k.current&&(O.platform=k.current),PL(M.current,N.current,O).then(L=>{const z={...L,isPositioned:D.current!==!1};B.current&&!Fh(S.current,z)&&(S.current=z,Gn.flushSync(()=>{f(z)}))})},[p,e,n,k,D]);Qd(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const B=m.useRef(!1);Qd(()=>(B.current=!0,()=>{B.current=!1}),[]),Qd(()=>{if(A&&(M.current=A),j&&(N.current=j),A&&j){if(I.current)return I.current(A,j,P);P()}},[A,j,P,I,C]);const se=m.useMemo(()=>({reference:M,floating:N,setReference:x,setFloating:T}),[x,T]),U=m.useMemo(()=>({reference:A,floating:j}),[A,j]),H=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!U.floating)return O;const L=bb(U.floating,h.x),z=bb(U.floating,h.y);return l?{...O,transform:"translate("+L+"px, "+z+"px)",...AC(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:z}},[n,l,U.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:P,refs:se,elements:U,floatingStyles:H}),[h,P,se,U,H])}const DL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wb({element:r.current,padding:s}).fn(n):{}:r?wb({element:r,padding:s}).fn(n):{}}}},ML=(t,e)=>({...NL(t),options:[t,e]}),OL=(t,e)=>({...CL(t),options:[t,e]}),LL=(t,e)=>({...RL(t),options:[t,e]}),VL=(t,e)=>({...IL(t),options:[t,e]}),FL=(t,e)=>({...kL(t),options:[t,e]}),UL=(t,e)=>({...AL(t),options:[t,e]}),zL=(t,e)=>({...DL(t),options:[t,e]});var $L="Arrow",RC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});RC.displayName=$L;var BL=RC;function PC(t){const[e,n]=m.useState(void 0);return Tt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var gx="Popper",[jC,Kf]=Yn(gx),[HL,DC]=jC(gx),MC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(HL,{scope:e,anchor:r,onAnchorChange:s,children:n})};MC.displayName=gx;var OC="PopperAnchor",LC=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=DC(OC,n),o=m.useRef(null),l=Ue(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ve.div,{...s,ref:l})});LC.displayName=OC;var yx="PopperContent",[WL,qL]=jC(yx),VC=m.forwardRef((t,e)=>{var q,te,pe,re,fe,de;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:_,...y}=t,w=DC(yx,n),[b,x]=m.useState(null),T=Ue(e,Ae=>x(Ae)),[A,j]=m.useState(null),M=PC(A),N=(M==null?void 0:M.width)??0,S=(M==null?void 0:M.height)??0,C=r+(i!=="center"?"-"+i:""),I=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},k=Array.isArray(u)?u:[u],D=k.length>0,P={padding:I,boundary:k.filter(KL),altBoundary:D},{refs:B,floatingStyles:se,placement:U,isPositioned:H,middlewareData:O}=jL({strategy:"fixed",placement:C,whileElementsMounted:(...Ae)=>TL(...Ae,{animationFrame:v==="always"}),elements:{reference:w.anchor},middleware:[ML({mainAxis:s+S,alignmentAxis:o}),c&&OL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?LL():void 0,...P}),c&&VL({...P}),FL({...P,apply:({elements:Ae,rects:je,availableWidth:cn,availableHeight:Ut})=>{const{width:Un,height:Hi}=je.reference,Ge=Ae.floating.style;Ge.setProperty("--radix-popper-available-width",`${cn}px`),Ge.setProperty("--radix-popper-available-height",`${Ut}px`),Ge.setProperty("--radix-popper-anchor-width",`${Un}px`),Ge.setProperty("--radix-popper-anchor-height",`${Hi}px`)}}),A&&zL({element:A,padding:l}),QL({arrowWidth:N,arrowHeight:S}),p&&UL({strategy:"referenceHidden",...P})]}),[L,z]=zC(U),F=sn(_);Tt(()=>{H&&(F==null||F())},[H,F]);const X=(q=O.arrow)==null?void 0:q.x,Y=(te=O.arrow)==null?void 0:te.y,J=((pe=O.arrow)==null?void 0:pe.centerOffset)!==0,[le,ee]=m.useState();return Tt(()=>{b&&ee(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:H?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(re=O.transformOrigin)==null?void 0:re.x,(fe=O.transformOrigin)==null?void 0:fe.y].join(" "),...((de=O.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(WL,{scope:n,placedSide:L,onArrowChange:j,arrowX:X,arrowY:Y,shouldHideArrow:J,children:a.jsx(ve.div,{"data-side":L,"data-align":z,...y,ref:T,style:{...y.style,animation:H?void 0:"none"}})})})});VC.displayName=yx;var FC="PopperArrow",GL={top:"bottom",right:"left",bottom:"top",left:"right"},UC=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=qL(FC,r),o=GL[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(BL,{...s,ref:n,style:{...s.style,display:"block"}})})});UC.displayName=FC;function KL(t){return t!==null}var QL=t=>({name:"transformOrigin",options:t,fn(e){var w,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=zC(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,v=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let _="",y="";return u==="bottom"?(_=o?f:`${p}px`,y=`${-c}px`):u==="top"?(_=o?f:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(_=`${-c}px`,y=o?f:`${v}px`):u==="left"&&(_=`${r.floating.width+c}px`,y=o?f:`${v}px`),{data:{x:_,y}}}});function zC(t){const[e,n="center"]=t.split("-");return[e,n]}var $C=MC,BC=LC,HC=VC,WC=UC,[Qf,aq]=Yn("Tooltip",[Kf]),Xf=Kf(),qC="TooltipProvider",XL=700,fy="tooltip.open",[YL,vx]=Qf(qC),GC=t=>{const{__scopeTooltip:e,delayDuration:n=XL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(YL,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};GC.displayName=qC;var Yf="Tooltip",[JL,pu]=Qf(Yf),KC=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=vx(Yf,t.__scopeTooltip),u=Xf(e),[h,f]=m.useState(null),p=cs(),v=m.useRef(0),_=o??c.disableHoverableContent,y=l??c.delayDuration,w=m.useRef(!1),[b=!1,x]=_i({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(fy))):c.onClose(),i==null||i(N)}}),T=m.useMemo(()=>b?w.current?"delayed-open":"instant-open":"closed",[b]),A=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,w.current=!1,x(!0)},[x]),j=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,x(!1)},[x]),M=m.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{w.current=!0,x(!0),v.current=0},y)},[y,x]);return m.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),a.jsx($C,{...u,children:a.jsx(JL,{scope:e,contentId:p,open:b,stateAttribute:T,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?M():A()},[c.isOpenDelayedRef,M,A]),onTriggerLeave:m.useCallback(()=>{_?j():(window.clearTimeout(v.current),v.current=0)},[j,_]),onOpen:A,onClose:j,disableHoverableContent:_,children:n})})};KC.displayName=Yf;var my="TooltipTrigger",QC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=pu(my,n),i=vx(my,n),o=Xf(n),l=m.useRef(null),c=Ue(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(BC,{asChild:!0,...o,children:a.jsx(ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});QC.displayName=my;var xx="TooltipPortal",[ZL,e3]=Qf(xx,{forceMount:void 0}),XC=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=pu(xx,e);return a.jsx(ZL,{scope:e,forceMount:n,children:a.jsx(Vi,{present:n||i.open,children:a.jsx(du,{asChild:!0,container:s,children:r})})})};XC.displayName=xx;var Ga="TooltipContent",YC=m.forwardRef((t,e)=>{const n=e3(Ga,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=pu(Ga,t.__scopeTooltip);return a.jsx(Vi,{present:r||o.open,children:o.disableHoverableContent?a.jsx(JC,{side:s,...i,ref:e}):a.jsx(t3,{side:s,...i,ref:e})})}),t3=m.forwardRef((t,e)=>{const n=pu(Ga,t.__scopeTooltip),r=vx(Ga,t.__scopeTooltip),s=m.useRef(null),i=Ue(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),v=m.useCallback((_,y)=>{const w=_.currentTarget,b={x:_.clientX,y:_.clientY},x=o3(b,w.getBoundingClientRect()),T=a3(b,x),A=l3(y.getBoundingClientRect()),j=u3([...T,...A]);l(j),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const _=w=>v(w,h),y=w=>v(w,c);return c.addEventListener("pointerleave",_),h.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",_),h.removeEventListener("pointerleave",y)}}},[c,h,v,p]),m.useEffect(()=>{if(o){const _=y=>{const w=y.target,b={x:y.clientX,y:y.clientY},x=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),T=!c3(b,o);x?p():T&&(p(),u())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,h,o,u,p]),a.jsx(JC,{...t,ref:i})}),[n3,r3]=Qf(Yf,{isInside:!1}),s3=TN("TooltipContent"),JC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=pu(Ga,n),u=Xf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(fy,h),()=>document.removeEventListener(fy,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const v=p.target;v!=null&&v.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(uu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(HC,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(s3,{children:r}),a.jsx(n3,{scope:n,isInside:!0,children:a.jsx(mO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});YC.displayName=Ga;var ZC="TooltipArrow",i3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Xf(n);return r3(ZC,n).isInside?null:a.jsx(WC,{...s,...r,ref:e})});i3.displayName=ZC;function o3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function a3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function l3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function c3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function u3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),d3(e)}function d3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var h3=GC,f3=KC,m3=QC,eI=XC,tI=YC;const Jf=h3,Zf=f3,em=m3,gu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(tI,{ref:r,sideOffset:e,className:W("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));gu.displayName=tI.displayName;const p3="modulepreload",g3=function(t){return"/"+t},_b={},wd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=g3(c),c in _b)return;_b[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":p3,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},y3=()=>{};var Eb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new x3;const p=i<<2|l>>4;if(r.push(p),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w3=function(t){const e=nI(t);return rI.encodeByteArray(e,!0)},Uh=function(t){return w3(t).replace(/\./g,"")},sI=function(t){try{return rI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=()=>b3().__FIREBASE_DEFAULTS__,E3=()=>{if(typeof process>"u"||typeof Eb>"u")return;const t=Eb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sI(t[1]);return e&&JSON.parse(e)},tm=()=>{try{return y3()||_3()||E3()||S3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iI=t=>{var e,n;return(n=(e=tm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},T3=t=>{const e=iI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oI=()=>{var t;return(t=tm())==null?void 0:t.config},aI=t=>{var e;return(e=tm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}const dc={};function I3(){const t={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?t.emulator.push(e):t.prod.push(e);return t}function k3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sb=!1;function cI(t,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||dc[t]===e||dc[t]||Sb)return;dc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=I3().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Sb=!0,o()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=k3(r),v=n("text"),_=document.getElementById(v)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;l(T),h(w,y);const A=u();c(x,b),T.append(x,_,w,A),document.body.appendChild(T)}i?(_.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function R3(){var e;const t=(e=tm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M3(){const t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O3(){return!R3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L3(){try{return typeof indexedDB=="object"}catch{return!1}}function V3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="FirebaseError";class Es extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F3,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?U3(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Es(s,l,r)}}function U3(t,e){return t.replace(z3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const z3=/\{\$([^}]+)}/g;function $3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tb(i)&&Tb(o)){if(!Ci(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function B3(t,e){const n=new H3(t,e);return n.subscribe.bind(n)}class H3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");W3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Mp),s.error===void 0&&(s.error=Mp),s.complete===void 0&&(s.complete=Mp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class To{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new N3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K3(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:G3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G3(t){return t===ro?void 0:t}function K3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const X3={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Y3=Ne.INFO,J3={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Z3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=J3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wx{constructor(e){this.name=e,this._logLevel=Y3,this._logHandler=Z3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const e6=(t,e)=>e.some(n=>t instanceof n);let Nb,Cb;function t6(){return Nb||(Nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n6(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,py=new WeakMap,dI=new WeakMap,Op=new WeakMap,bx=new WeakMap;function r6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(mi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uI.set(n,t)}).catch(()=>{}),bx.set(e,t),e}function s6(t){if(py.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});py.set(t,e)}let gy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return py.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function i6(t){gy=t(gy)}function o6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lp(this),e,...n);return dI.set(r,e.sort?e.sort():[e]),mi(r)}:n6().includes(t)?function(...e){return t.apply(Lp(this),e),mi(uI.get(this))}:function(...e){return mi(t.apply(Lp(this),e))}}function a6(t){return typeof t=="function"?o6(t):(t instanceof IDBTransaction&&s6(t),e6(t,t6())?new Proxy(t,gy):t)}function mi(t){if(t instanceof IDBRequest)return r6(t);if(Op.has(t))return Op.get(t);const e=a6(t);return e!==t&&(Op.set(t,e),bx.set(e,t)),e}const Lp=t=>bx.get(t);function l6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=mi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(mi(o.result),c.oldVersion,c.newVersion,mi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const c6=["get","getKey","getAll","getAllKeys","count"],u6=["put","add","delete","clear"],Vp=new Map;function Ib(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=u6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||c6.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Vp.set(e,i),i}i6(t=>({...t,get:(e,n,r)=>Ib(e,n)||t.get(e,n,r),has:(e,n)=>!!Ib(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yy="@firebase/app",kb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new wx("@firebase/app"),f6="@firebase/app-compat",m6="@firebase/analytics-compat",p6="@firebase/analytics",g6="@firebase/app-check-compat",y6="@firebase/app-check",v6="@firebase/auth",x6="@firebase/auth-compat",w6="@firebase/database",b6="@firebase/data-connect",_6="@firebase/database-compat",E6="@firebase/functions",S6="@firebase/functions-compat",T6="@firebase/installations",N6="@firebase/installations-compat",C6="@firebase/messaging",I6="@firebase/messaging-compat",k6="@firebase/performance",A6="@firebase/performance-compat",R6="@firebase/remote-config",P6="@firebase/remote-config-compat",j6="@firebase/storage",D6="@firebase/storage-compat",M6="@firebase/firestore",O6="@firebase/ai",L6="@firebase/firestore-compat",V6="firebase",F6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="[DEFAULT]",U6={[yy]:"fire-core",[f6]:"fire-core-compat",[p6]:"fire-analytics",[m6]:"fire-analytics-compat",[y6]:"fire-app-check",[g6]:"fire-app-check-compat",[v6]:"fire-auth",[x6]:"fire-auth-compat",[w6]:"fire-rtdb",[b6]:"fire-data-connect",[_6]:"fire-rtdb-compat",[E6]:"fire-fn",[S6]:"fire-fn-compat",[T6]:"fire-iid",[N6]:"fire-iid-compat",[C6]:"fire-fcm",[I6]:"fire-fcm-compat",[k6]:"fire-perf",[A6]:"fire-perf-compat",[R6]:"fire-rc",[P6]:"fire-rc-compat",[j6]:"fire-gcs",[D6]:"fire-gcs-compat",[M6]:"fire-fst",[L6]:"fire-fst-compat",[O6]:"fire-vertex","fire-js":"fire-js",[V6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,z6=new Map,xy=new Map;function Ab(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ka(t){const e=t.name;if(xy.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;xy.set(e,t);for(const n of zh.values())Ab(n,t);for(const n of z6.values())Ab(n,t);return!0}function _x(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new yu("app","Firebase",$6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new To("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=F6;function hI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw pi.create("bad-app-name",{appName:String(s)});if(n||(n=oI()),!n)throw pi.create("no-options");const i=zh.get(s);if(i){if(Ci(n,i.options)&&Ci(r,i.config))return i;throw pi.create("duplicate-app",{appName:s})}const o=new Q3(s);for(const c of xy.values())o.addComponent(c);const l=new B6(n,r,o);return zh.set(s,l),l}function fI(t=vy){const e=zh.get(t);if(!e&&t===vy&&oI())return hI();if(!e)throw pi.create("no-app",{appName:t});return e}function gi(t,e,n){let r=U6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(o.join(" "));return}Ka(new To(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="firebase-heartbeat-database",W6=1,Hc="firebase-heartbeat-store";let Fp=null;function mI(){return Fp||(Fp=l6(H6,W6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw pi.create("idb-open",{originalErrorMessage:t.message})})),Fp}async function q6(t){try{const n=(await mI()).transaction(Hc),r=await n.objectStore(Hc).get(pI(t));return await n.done,r}catch(e){if(e instanceof Es)vs.warn(e.message);else{const n=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(n.message)}}}async function Rb(t,e){try{const r=(await mI()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,pI(t)),await r.done}catch(n){if(n instanceof Es)vs.warn(n.message);else{const r=pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vs.warn(r.message)}}}function pI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=1024,K6=30;class Q6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Pb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>K6){const o=J6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pb(),{heartbeatsToSend:r,unsentEntries:s}=X6(this._heartbeatsCache.heartbeats),i=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return vs.warn(n),""}}}function Pb(){return new Date().toISOString().substring(0,10)}function X6(t,e=G6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),jb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Y6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L3()?V3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jb(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}function J6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t){Ka(new To("platform-logger",e=>new d6(e),"PRIVATE")),Ka(new To("heartbeat",e=>new Q6(e),"PRIVATE")),gi(yy,kb,t),gi(yy,kb,"esm2020"),gi("fire-js","")}Z6("");function gI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eV=gI,yI=new yu("auth","Firebase",gI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new wx("@firebase/auth");function tV(t,...e){$h.logLevel<=Ne.WARN&&$h.warn(`Auth (${ul}): ${t}`,...e)}function Xd(t,...e){$h.logLevel<=Ne.ERROR&&$h.error(`Auth (${ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,...e){throw Sx(t,...e)}function hr(t,...e){return Sx(t,...e)}function Ex(t,e,n){const r={...eV(),[e]:n};return new yu("auth","Firebase",r).create(e,{appName:t.name})}function yo(t){return Ex(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wr(t,"argument-error"),Ex(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yI.create(t,...e)}function ye(t,e,...n){if(!t)throw Sx(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function xs(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rV(){return Db()==="http:"||Db()==="https:"}function Db(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rV()||j3()||"connection"in navigator)?navigator.onLine:!0}function iV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=A3()||D3()}get(){return sV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lV=new xu(3e4,6e4);function Nx(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function dl(t,e,n,r,s={}){return xI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=vu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return P3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&cl(t.emulatorConfig.host)&&(u.credentials="include"),vI.fetch()(await wI(t,t.config.apiHost,n,l),u)})}async function xI(t,e,n){t._canInitEmulator=!1;const r={...oV,...e};try{const s=new uV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw bd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw bd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ex(t,h,u);Wr(t,h)}}catch(s){if(s instanceof Es)throw s;Wr(t,"network-request-failed",{message:String(s)})}}async function cV(t,e,n,r,s={}){const i=await dl(t,e,n,r,s);return"mfaPendingCredential"in i&&Wr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Tx(t.config,s):`${t.config.apiScheme}://${s}`;return aV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class uV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),lV.get())})}}function bd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return dl(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return dl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hV(t,e=!1){const n=Pt(t),r=await n.getIdToken(e),s=Cx(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hc(Up(s.auth_time)),issuedAtTime:hc(Up(s.iat)),expirationTime:hc(Up(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Up(t){return Number(t)*1e3}function Cx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const s=sI(n);return s?JSON.parse(s):(Xd("Failed to decode base64 JWT payload"),null)}catch(s){return Xd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Mb(t){const e=Cx(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Es&&fV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Wc(t,Bh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?bI(s.providerUserInfo):[],o=gV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function pV(t){const e=Pt(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function bI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e){const n=await xI(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await wI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&cl(t.emulatorConfig.host)&&(c.credentials="include"),vI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vV(t,e){return dl(t,"POST","/v2/accounts:revokeToken",Nx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Mb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new va;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new by(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hV(this,e)}reload(){return pV(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(yo(this.auth));const e=await this.getIdToken();return await Wc(this,dV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:v,providerData:_,stsTokenManager:y}=n;ye(f&&y,e,"internal-error");const w=va.fromJSON(this.name,y);ye(typeof f=="string",e,"internal-error"),Ls(r,e.name),Ls(s,e.name),ye(typeof p=="boolean",e,"internal-error"),ye(typeof v=="boolean",e,"internal-error"),Ls(i,e.name),Ls(o,e.name),Ls(l,e.name),Ls(c,e.name),Ls(u,e.name),Ls(h,e.name);const b=new lr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:w,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(b.providerData=_.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new va;s.updateFromServerResponse(n);const i=new lr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?bI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new va;l.updateFromIdToken(r);const c=new lr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function as(t){xs(t instanceof Function,"Expected a class definition");let e=Ob.get(t);return e?(xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_I.type="NONE";const Lb=_I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){return`firebase:${t}:${e}:${n}`}class xa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?lr._fromGetAccountInfoResponse(this.auth,n,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xa(as(Lb),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||as(Lb);const o=Yd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Bh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await lr._fromGetAccountInfoResponse(e,p,h)}else f=lr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new xa(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new xa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(II(e))return"Blackberry";if(kI(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||TI(e))&&!e.includes("edge/"))return"Chrome";if(CI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EI(t=Yt()){return/firefox\//i.test(t)}function SI(t=Yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TI(t=Yt()){return/crios\//i.test(t)}function NI(t=Yt()){return/iemobile/i.test(t)}function CI(t=Yt()){return/android/i.test(t)}function II(t=Yt()){return/blackberry/i.test(t)}function kI(t=Yt()){return/webos/i.test(t)}function Ix(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xV(t=Yt()){var e;return Ix(t)&&!!((e=window.navigator)!=null&&e.standalone)}function wV(){return M3()&&document.documentMode===10}function AI(t=Yt()){return Ix(t)||CI(t)||kI(t)||II(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e=[]){let n;switch(t){case"Browser":n=Vb(Yt());break;case"Worker":n=`${Vb(Yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e={}){return dl(t,"GET","/v2/passwordPolicy",Nx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=6;class SV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??EV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new bV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),r=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(yo(this));const n=e?Pt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _V(this),n=new SV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nm(t){return Pt(t)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=B3(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NV(t){kx=t}function CV(t){return kx.loadJS(t)}function IV(){return kx.gapiScript}function kV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t,e){const n=_x(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ci(i,e??{}))return s;Wr(s,"already-initialized")}return n.initialize({options:e})}function RV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PV(t,e,n){const r=nm(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=PI(e),{host:o,port:l}=jV(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ci(u,r.config.emulator)&&Ci(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cl(o)?(lI(`${i}//${o}${c}`),cI("Auth",!0)):DV()}function PI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jV(t){const e=PI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ub(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ub(o)}}}function Ub(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t,e){return cV(t,"POST","/v1/accounts:signInWithIdp",Nx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="http://localhost";class No extends jI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new No(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wa(e,n)}buildRequest(){const e={requestUri:MV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Ax{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends wu{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yn.credential(n,r)}catch{return null}}}yn.GOOGLE_SIGN_IN_METHOD="google.com";yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends wu{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends wu{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await lr._fromIdTokenResponse(e,r,s),o=zb(r);return new Qa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zb(r);return new Qa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Es{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wh(e,n,r,s)}}function DI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,i,e,r):i})}async function OV(t,e,n=!1){const r=await Wc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e,n=!1){const{auth:r}=t;if(ar(r.app))return Promise.reject(yo(r));const s="reauthenticate";try{const i=await Wc(t,DI(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Cx(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),Qa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t,e,n=!1){if(ar(t.app))return Promise.reject(yo(t));const r="signIn",s=await DI(t,r,e),i=await Qa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function FV(t,e,n,r){return Pt(t).onIdTokenChanged(e,n,r)}function UV(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function zV(t,e,n,r){return Pt(t).onAuthStateChanged(e,n,r)}function $V(t){return Pt(t).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=1e3,HV=10;class OI extends MI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OI.type="LOCAL";const WV=OI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends MI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LI.type="SESSION";const VI=LI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new rm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await qV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Rx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function KV(t){Ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function QV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function YV(){return FI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebaseLocalStorageDb",JV=1,Gh="firebaseLocalStorage",zI="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sm(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function ZV(){const t=indexedDB.deleteDatabase(UI);return new bu(t).toPromise()}function _y(){const t=indexedDB.open(UI,JV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:zI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await ZV(),e(await _y()))})})}async function $b(t,e,n){const r=sm(t,!0).put({[zI]:e,value:n});return new bu(r).toPromise()}async function eF(t,e){const n=sm(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function Bb(t,e){const n=sm(t,!0).delete(e);return new bu(n).toPromise()}const tF=800,nF=3;class $I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rm._getInstance(YV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QV(),!this.activeServiceWorker)return;this.sender=new GV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await $b(e,qh,"1"),await Bb(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$b(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=sm(s,!1).getAll();return new bu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$I.type="LOCAL";const rF=$I;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){return e?as(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends jI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sF(t){return VV(t.auth,new Px(t),t.bypassAuthState)}function iF(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),LV(n,new Px(t),t.bypassAuthState)}async function oF(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),OV(n,new Px(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sF;case"linkViaPopup":case"linkViaRedirect":return oF;case"reauthViaPopup":case"reauthViaRedirect":return iF;default:Wr(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=new xu(2e3,1e4);async function zp(t,e,n){if(ar(t.app))return Promise.reject(hr(t,"operation-not-supported-in-this-environment"));const r=nm(t);nV(t,e,Ax);const s=BI(r,n);return new ao(r,"signInViaPopup",e,s).executeNotNull()}class ao extends HI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=Rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aF.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF="pendingRedirect",Jd=new Map;class cF extends HI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await uF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uF(t,e){const n=fF(e),r=hF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dF(t,e){Jd.set(t._key(),e)}function hF(t){return as(t._redirectPersistence)}function fF(t){return Yd(lF,t.config.apiKey,t.name)}async function mF(t,e,n=!1){if(ar(t.app))return Promise.reject(yo(t));const r=nm(t),s=BI(r,e),o=await new cF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=10*60*1e3;class gF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hb(e))}saveEventToCache(e){this.cachedEventUids.add(Hb(e)),this.lastProcessedEventTime=Date.now()}}function Hb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(t,e={}){return dl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wF=/^https?/;async function bF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vF(t);for(const n of e)try{if(_F(n))return}catch{}Wr(t,"unauthorized-domain")}function _F(t){const e=wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wF.test(n))return!1;if(xF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=new xu(3e4,6e4);function Wb(){const t=Ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SF(t){return new Promise((e,n)=>{var s,i,o;function r(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),n(hr(t,"network-request-failed"))},timeout:EF.get()})}if((i=(s=Ur().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ur().gapi)!=null&&o.load)r();else{const l=kV("iframefcb");return Ur()[l]=()=>{gapi.load?r():n(hr(t,"network-request-failed"))},CV(`${IV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function TF(t){return Zd=Zd||SF(t),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new xu(5e3,15e3),CF="__/auth/iframe",IF="emulator/auth/iframe",kF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RF(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tx(e,IF):`https://${t.config.authDomain}/${CF}`,r={apiKey:e.apiKey,appName:t.name,v:ul},s=AF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${vu(r).slice(1)}`}async function PF(t){const e=await TF(t),n=Ur().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:RF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hr(t,"network-request-failed"),l=Ur().setTimeout(()=>{i(o)},NF.get());function c(){Ur().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DF=500,MF=600,OF="_blank",LF="http://localhost";class qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VF(t,e,n,r=DF,s=MF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...jF,width:r.toString(),height:s.toString(),top:i,left:o},u=Yt().toLowerCase();n&&(l=TI(u)?OF:n),EI(u)&&(e=e||LF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,_])=>`${p}${v}=${_},`,"");if(xV(u)&&l!=="_self")return FF(e||"",l),new qb(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new qb(f)}function FF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="__/auth/handler",zF="emulator/auth/handler",$F=encodeURIComponent("fac");async function Gb(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ul,eventId:s};if(e instanceof Ax){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof wu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${$F}=${encodeURIComponent(c)}`:"";return`${BF(t)}?${vu(l).slice(1)}${u}`}function BF({config:t}){return t.emulator?Tx(t,zF):`https://${t.authDomain}/${UF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="webStorageSupport";class HF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VI,this._completeRedirectFn=mF,this._overrideRedirectResult=dF}async _openPopup(e,n,r,s){var o;xs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Gb(e,n,r,wy(),s);return VF(e,i,Rx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gb(e,n,r,wy(),s);return KV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(xs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PF(e),r=new gF(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($p,{type:$p},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[$p];i!==void 0&&n(!!i),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AI()||SI()||Ix()}}const WF=HF;var Kb="@firebase/auth",Qb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KF(t){Ka(new To("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RI(t)},u=new TV(r,s,i,c);return RV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ka(new To("auth-internal",e=>{const n=nm(e.getProvider("auth").getImmediate());return(r=>new qF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(Kb,Qb,GF(t)),gi(Kb,Qb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=5*60,XF=aI("authIdTokenMaxAge")||QF;let Xb=null;const YF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XF)return;const s=n==null?void 0:n.token;Xb!==s&&(Xb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JF(t=fI()){const e=_x(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AV(t,{popupRedirectResolver:WF,persistence:[rF,WV,VI]}),r=aI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=YF(i.toString());UV(n,o,()=>o(n.currentUser)),FV(n,l=>o(l))}}const s=iI("auth");return s&&PV(n,`http://${s}`),n}function ZF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}NV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KF("Browser");var e9="firebase",t9="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(e9,t9,"app");var Yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,qI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function C(){}C.prototype=S.prototype,N.F=S.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(I,k,D){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return S.prototype[k].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,S,C){C||(C=0);const I=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)I[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;k<16;++k)I[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=N.g[0],C=N.g[1],k=N.g[2];let D=N.g[3],P;P=S+(D^C&(k^D))+I[0]+3614090360&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(k^S&(C^k))+I[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=k+(C^D&(S^C))+I[2]+606105819&4294967295,k=D+(P<<17&4294967295|P>>>15),P=C+(S^k&(D^S))+I[3]+3250441966&4294967295,C=k+(P<<22&4294967295|P>>>10),P=S+(D^C&(k^D))+I[4]+4118548399&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(k^S&(C^k))+I[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=k+(C^D&(S^C))+I[6]+2821735955&4294967295,k=D+(P<<17&4294967295|P>>>15),P=C+(S^k&(D^S))+I[7]+4249261313&4294967295,C=k+(P<<22&4294967295|P>>>10),P=S+(D^C&(k^D))+I[8]+1770035416&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(k^S&(C^k))+I[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=k+(C^D&(S^C))+I[10]+4294925233&4294967295,k=D+(P<<17&4294967295|P>>>15),P=C+(S^k&(D^S))+I[11]+2304563134&4294967295,C=k+(P<<22&4294967295|P>>>10),P=S+(D^C&(k^D))+I[12]+1804603682&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(k^S&(C^k))+I[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=k+(C^D&(S^C))+I[14]+2792965006&4294967295,k=D+(P<<17&4294967295|P>>>15),P=C+(S^k&(D^S))+I[15]+1236535329&4294967295,C=k+(P<<22&4294967295|P>>>10),P=S+(k^D&(C^k))+I[1]+4129170786&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^k&(S^C))+I[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=k+(S^C&(D^S))+I[11]+643717713&4294967295,k=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(k^D))+I[0]+3921069994&4294967295,C=k+(P<<20&4294967295|P>>>12),P=S+(k^D&(C^k))+I[5]+3593408605&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^k&(S^C))+I[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=k+(S^C&(D^S))+I[15]+3634488961&4294967295,k=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(k^D))+I[4]+3889429448&4294967295,C=k+(P<<20&4294967295|P>>>12),P=S+(k^D&(C^k))+I[9]+568446438&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^k&(S^C))+I[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=k+(S^C&(D^S))+I[3]+4107603335&4294967295,k=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(k^D))+I[8]+1163531501&4294967295,C=k+(P<<20&4294967295|P>>>12),P=S+(k^D&(C^k))+I[13]+2850285829&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^k&(S^C))+I[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=k+(S^C&(D^S))+I[7]+1735328473&4294967295,k=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(k^D))+I[12]+2368359562&4294967295,C=k+(P<<20&4294967295|P>>>12),P=S+(C^k^D)+I[5]+4294588738&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^k)+I[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=k+(D^S^C)+I[11]+1839030562&4294967295,k=D+(P<<16&4294967295|P>>>16),P=C+(k^D^S)+I[14]+4259657740&4294967295,C=k+(P<<23&4294967295|P>>>9),P=S+(C^k^D)+I[1]+2763975236&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^k)+I[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=k+(D^S^C)+I[7]+4139469664&4294967295,k=D+(P<<16&4294967295|P>>>16),P=C+(k^D^S)+I[10]+3200236656&4294967295,C=k+(P<<23&4294967295|P>>>9),P=S+(C^k^D)+I[13]+681279174&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^k)+I[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=k+(D^S^C)+I[3]+3572445317&4294967295,k=D+(P<<16&4294967295|P>>>16),P=C+(k^D^S)+I[6]+76029189&4294967295,C=k+(P<<23&4294967295|P>>>9),P=S+(C^k^D)+I[9]+3654602809&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^k)+I[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=k+(D^S^C)+I[15]+530742520&4294967295,k=D+(P<<16&4294967295|P>>>16),P=C+(k^D^S)+I[2]+3299628645&4294967295,C=k+(P<<23&4294967295|P>>>9),P=S+(k^(C|~D))+I[0]+4096336452&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~k))+I[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=k+(S^(D|~C))+I[14]+2878612391&4294967295,k=D+(P<<15&4294967295|P>>>17),P=C+(D^(k|~S))+I[5]+4237533241&4294967295,C=k+(P<<21&4294967295|P>>>11),P=S+(k^(C|~D))+I[12]+1700485571&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~k))+I[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=k+(S^(D|~C))+I[10]+4293915773&4294967295,k=D+(P<<15&4294967295|P>>>17),P=C+(D^(k|~S))+I[1]+2240044497&4294967295,C=k+(P<<21&4294967295|P>>>11),P=S+(k^(C|~D))+I[8]+1873313359&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~k))+I[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=k+(S^(D|~C))+I[6]+2734768916&4294967295,k=D+(P<<15&4294967295|P>>>17),P=C+(D^(k|~S))+I[13]+1309151649&4294967295,C=k+(P<<21&4294967295|P>>>11),P=S+(k^(C|~D))+I[4]+4149444226&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~k))+I[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=k+(S^(D|~C))+I[2]+718787259&4294967295,k=D+(P<<15&4294967295|P>>>17),P=C+(D^(k|~S))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+D&4294967295}r.prototype.v=function(N,S){S===void 0&&(S=N.length);const C=S-this.blockSize,I=this.C;let k=this.h,D=0;for(;D<S;){if(k==0)for(;D<=C;)s(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<S;)if(I[k++]=N.charCodeAt(D++),k==this.blockSize){s(this,I),k=0;break}}else for(;D<S;)if(I[k++]=N[D++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,C=0;C<4;++C)for(let I=0;I<32;I+=8)N[S++]=this.g[C]>>>I&255;return N};function i(N,S){var C=l;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=S(N)}function o(N,S){this.h=S;const C=[];let I=!0;for(let k=N.length-1;k>=0;k--){const D=N[k]|0;I&&D==S||(C[k]=D,I=!1)}this.g=C}var l={};function c(N){return-128<=N&&N<128?i(N,function(S){return new o([S|0],S<0?-1:0)}):new o([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return w(u(-N));const S=[];let C=1;for(let I=0;N>=C;I++)S[I]=N/C|0,C*=4294967296;return new o(S,0)}function h(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return w(h(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(S,8));let I=f;for(let D=0;D<N.length;D+=8){var k=Math.min(8,N.length-D);const P=parseInt(N.substring(D,D+k),S);k<8?(k=u(Math.pow(S,k)),I=I.j(k).add(u(P))):(I=I.j(C),I=I.add(u(P)))}return I}var f=c(0),p=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();let N=0,S=1;for(let C=0;C<this.g.length;C++){const I=this.i(C);N+=(I>=0?I:4294967296+I)*S,S*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(_(this))return"0";if(y(this))return"-"+w(this).toString(N);const S=u(Math.pow(N,6));var C=this;let I="";for(;;){const k=A(C,S).g;C=b(C,k.j(S));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=k,_(C))return D+I;for(;D.length<6;)D="0"+D;I=D+I}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function _(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function y(N){return N.h==-1}t.l=function(N){return N=b(this,N),y(N)?-1:_(N)?0:1};function w(N){const S=N.g.length,C=[];for(let I=0;I<S;I++)C[I]=~N.g[I];return new o(C,~N.h).add(p)}t.abs=function(){return y(this)?w(this):this},t.add=function(N){const S=Math.max(this.g.length,N.g.length),C=[];let I=0;for(let k=0;k<=S;k++){let D=I+(this.i(k)&65535)+(N.i(k)&65535),P=(D>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);I=P>>>16,D&=65535,P&=65535,C[k]=P<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(N,S){return N.add(w(S))}t.j=function(N){if(_(this)||_(N))return f;if(y(this))return y(N)?w(this).j(w(N)):w(w(this).j(N));if(y(N))return w(this.j(w(N)));if(this.l(v)<0&&N.l(v)<0)return u(this.m()*N.m());const S=this.g.length+N.g.length,C=[];for(var I=0;I<2*S;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(let k=0;k<N.g.length;k++){const D=this.i(I)>>>16,P=this.i(I)&65535,B=N.i(k)>>>16,se=N.i(k)&65535;C[2*I+2*k]+=P*se,x(C,2*I+2*k),C[2*I+2*k+1]+=D*se,x(C,2*I+2*k+1),C[2*I+2*k+1]+=P*B,x(C,2*I+2*k+1),C[2*I+2*k+2]+=D*B,x(C,2*I+2*k+2)}for(N=0;N<S;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=S;N<2*S;N++)C[N]=0;return new o(C,0)};function x(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function T(N,S){this.g=N,this.h=S}function A(N,S){if(_(S))throw Error("division by zero");if(_(N))return new T(f,f);if(y(N))return S=A(w(N),S),new T(w(S.g),w(S.h));if(y(S))return S=A(N,w(S)),new T(w(S.g),S.h);if(N.g.length>30){if(y(N)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var C=p,I=S;I.l(N)<=0;)C=j(C),I=j(I);var k=M(C,1),D=M(I,1);for(I=M(I,2),C=M(C,2);!_(I);){var P=D.add(I);P.l(N)<=0&&(k=k.add(C),D=P),I=M(I,1),C=M(C,1)}return S=b(N,k.j(S)),new T(k,S)}for(k=f;N.l(S)>=0;){for(C=Math.max(1,Math.floor(N.m()/S.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),D=u(C),P=D.j(S);y(P)||P.l(N)>0;)C-=I,D=u(C),P=D.j(S);_(D)&&(D=p),k=k.add(D),N=b(N,P)}return new T(k,N)}t.B=function(N){return A(this,N).h},t.and=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let I=0;I<S;I++)C[I]=this.i(I)&N.i(I);return new o(C,this.h&N.h)},t.or=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let I=0;I<S;I++)C[I]=this.i(I)|N.i(I);return new o(C,this.h|N.h)},t.xor=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let I=0;I<S;I++)C[I]=this.i(I)^N.i(I);return new o(C,this.h^N.h)};function j(N){const S=N.g.length+1,C=[];for(let I=0;I<S;I++)C[I]=N.i(I)<<1|N.i(I-1)>>>31;return new o(C,N.h)}function M(N,S){const C=S>>5;S%=32;const I=N.g.length-C,k=[];for(let D=0;D<I;D++)k[D]=S>0?N.i(D+C)>>>S|N.i(D+C+1)<<32-S:N.i(D+C);return new o(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,yi=o}).apply(typeof Yb<"u"?Yb:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GI,Xl,KI,eh,Ey,QI,XI,YI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var g=0;g<d.length;++g){var E=d[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var E=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var V=d[R];if(!(V in E))break e;E=E[V]}d=d[d.length-1],R=E[d],g=g(R),g!=R&&g!=null&&e(E,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var E=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&E.push([R,g[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,E){return d.call.apply(d.bind,arguments)}function u(d,g,E){return u=c,u.apply(null,arguments)}function h(d,g){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function f(d,g){function E(){}E.prototype=g.prototype,d.Z=g.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(R,V,$){for(var ne=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ne[_e-2]=arguments[_e];return g.prototype[V].apply(R,ne)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function v(d){const g=d.length;if(g>0){const E=Array(g);for(let R=0;R<g;R++)E[R]=d[R];return E}return[]}function _(d,g){for(let R=1;R<arguments.length;R++){const V=arguments[R];var E=typeof V;if(E=E!="object"?E:V?Array.isArray(V)?"array":E:"null",E=="array"||E=="object"&&typeof V.length=="number"){E=d.length||0;const $=V.length||0;d.length=E+$;for(let ne=0;ne<$;ne++)d[E+ne]=V[ne]}else d.push(V)}}class y{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(d){o.setTimeout(()=>{throw d},0)}function b(){var d=N;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class x{constructor(){this.h=this.g=null}add(g,E){const R=T.get();R.set(g,E),this.h?this.h.next=R:this.g=R,this.h=R}}var T=new y(()=>new A,d=>d.reset());class A{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let j,M=!1,N=new x,S=()=>{const d=Promise.resolve(void 0);j=()=>{d.then(C)}};function C(){for(var d;d=b();){try{d.h.call(d.g)}catch(E){w(E)}var g=T;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}M=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};o.addEventListener("test",E,g),o.removeEventListener("test",E,g)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function B(d,g){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(B,k),B.prototype.init=function(d,g){const E=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(E=="mouseover"?g=d.fromElement:E=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),U=0;function H(d,g,E,R,V){this.listener=d,this.proxy=null,this.src=g,this.type=E,this.capture=!!R,this.ha=V,this.key=++U,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function L(d,g,E){for(const R in d)g.call(E,d[R],R,d)}function z(d,g){for(const E in d)g.call(void 0,d[E],E,d)}function F(d){const g={};for(const E in d)g[E]=d[E];return g}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(d,g){let E,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(E in R)d[E]=R[E];for(let $=0;$<X.length;$++)E=X[$],Object.prototype.hasOwnProperty.call(R,E)&&(d[E]=R[E])}}function J(d){this.src=d,this.g={},this.h=0}J.prototype.add=function(d,g,E,R,V){const $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);const ne=ee(d,g,R,V);return ne>-1?(g=d[ne],E||(g.fa=!1)):(g=new H(g,this.src,$,!!R,V),g.fa=E,d.push(g)),g};function le(d,g){const E=g.type;if(E in d.g){var R=d.g[E],V=Array.prototype.indexOf.call(R,g,void 0),$;($=V>=0)&&Array.prototype.splice.call(R,V,1),$&&(O(g),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ee(d,g,E,R){for(let V=0;V<d.length;++V){const $=d[V];if(!$.da&&$.listener==g&&$.capture==!!E&&$.ha==R)return V}return-1}var q="closure_lm_"+(Math.random()*1e6|0),te={};function pe(d,g,E,R,V){if(Array.isArray(g)){for(let $=0;$<g.length;$++)pe(d,g[$],E,R,V);return null}return E=Hi(E),d&&d[se]?d.J(g,E,l(R)?!!R.capture:!!R,V):re(d,g,E,!1,R,V)}function re(d,g,E,R,V,$){if(!g)throw Error("Invalid event type");const ne=l(V)?!!V.capture:!!V;let _e=Ut(d);if(_e||(d[q]=_e=new J(d)),E=_e.add(g,E,R,ne,$),E.proxy)return E;if(R=fe(),E.proxy=R,R.src=d,R.listener=E,d.addEventListener)D||(V=ne),V===void 0&&(V=!1),d.addEventListener(g.toString(),R,V);else if(d.attachEvent)d.attachEvent(je(g.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function fe(){function d(E){return g.call(d.src,d.listener,E)}const g=cn;return d}function de(d,g,E,R,V){if(Array.isArray(g))for(var $=0;$<g.length;$++)de(d,g[$],E,R,V);else R=l(R)?!!R.capture:!!R,E=Hi(E),d&&d[se]?(d=d.i,$=String(g).toString(),$ in d.g&&(g=d.g[$],E=ee(g,E,R,V),E>-1&&(O(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete d.g[$],d.h--)))):d&&(d=Ut(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ee(g,E,R,V)),(E=d>-1?g[d]:null)&&Ae(E))}function Ae(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[se])le(g.i,d);else{var E=d.type,R=d.proxy;g.removeEventListener?g.removeEventListener(E,R,d.capture):g.detachEvent?g.detachEvent(je(E),R):g.addListener&&g.removeListener&&g.removeListener(R),(E=Ut(g))?(le(E,d),E.h==0&&(E.src=null,g[q]=null)):O(d)}}}function je(d){return d in te?te[d]:te[d]="on"+d}function cn(d,g){if(d.da)d=!0;else{g=new B(g,this);const E=d.listener,R=d.ha||d.src;d.fa&&Ae(d),d=E.call(R,g)}return d}function Ut(d){return d=d[q],d instanceof J?d:null}var Un="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hi(d){return typeof d=="function"?d:(d[Un]||(d[Un]=function(g){return d.handleEvent(g)}),d[Un])}function Ge(){I.call(this),this.i=new J(this),this.M=this,this.G=null}f(Ge,I),Ge.prototype[se]=!0,Ge.prototype.removeEventListener=function(d,g,E,R){de(this,d,g,E,R)};function Ze(d,g){var E,R=d.G;if(R)for(E=[];R;R=R.G)E.push(R);if(d=d.M,R=g.type||g,typeof g=="string")g=new k(g,d);else if(g instanceof k)g.target=g.target||d;else{var V=g;g=new k(R,d),Y(g,V)}V=!0;let $,ne;if(E)for(ne=E.length-1;ne>=0;ne--)$=g.g=E[ne],V=Yr($,R,!0,g)&&V;if($=g.g=d,V=Yr($,R,!0,g)&&V,V=Yr($,R,!1,g)&&V,E)for(ne=0;ne<E.length;ne++)$=g.g=E[ne],V=Yr($,R,!1,g)&&V}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const E=d.g[g];for(let R=0;R<E.length;R++)O(E[R]);delete d.g[g],d.h--}}this.G=null},Ge.prototype.J=function(d,g,E,R){return this.i.add(String(d),g,!1,E,R)},Ge.prototype.K=function(d,g,E,R){return this.i.add(String(d),g,!0,E,R)};function Yr(d,g,E,R){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let $=0;$<g.length;++$){const ne=g[$];if(ne&&!ne.da&&ne.capture==E){const _e=ne.listener,xt=ne.ha||ne.src;ne.fa&&le(d.i,ne),V=_e.call(xt,R)!==!1&&V}}return V&&!R.defaultPrevented}function Vo(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function El(d){d.g=Vo(()=>{d.g=null,d.i&&(d.i=!1,El(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Lu extends I{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:El(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(d){I.call(this),this.h=d,this.g={}}f(Wi,I);var Vu=[];function Jr(d){L(d.g,function(g,E){this.g.hasOwnProperty(E)&&Ae(g)},d),d.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),Jr(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Er=o.JSON.stringify,qi=o.JSON.parse,Fu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Jn(){}function Sl(){}var Gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tl(){k.call(this,"d")}f(Tl,k);function Ki(){k.call(this,"c")}f(Ki,k);var Sr={},Uu=null;function Qi(){return Uu=Uu||new Ge}Sr.Ia="serverreachability";function zu(d){k.call(this,Sr.Ia,d)}f(zu,k);function Xi(d){const g=Qi();Ze(g,new zu(g))}Sr.STAT_EVENT="statevent";function $u(d,g){k.call(this,Sr.STAT_EVENT,d),this.stat=g}f($u,k);function De(d){const g=Qi();Ze(g,new $u(g,d))}Sr.Ja="timingevent";function zt(d,g){k.call(this,Sr.Ja,d),this.size=g}f(zt,k);function yt(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function un(){this.g=!0}un.prototype.ua=function(){this.g=!1};function dn(d,g,E,R,V,$){d.info(function(){if(d.g)if($){var ne="",_e=$.split("&");for(let $e=0;$e<_e.length;$e++){var xt=_e[$e].split("=");if(xt.length>1){const Nt=xt[0];xt=xt[1];const Cr=Nt.split("_");ne=Cr.length>=2&&Cr[1]=="type"?ne+(Nt+"="+xt+"&"):ne+(Nt+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+g+`
`+E+`
`+ne})}function Jt(d,g,E,R,V,$,ne){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+g+`
`+E+`
`+$+" "+ne})}function Dt(d,g,E,R){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+vt(d,E)+(R?" "+R:"")})}function Is(d,g){d.info(function(){return"TIMEOUT: "+g})}un.prototype.info=function(){};function vt(d,g){if(!d.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(d=0;d<$.length;d++)if(Array.isArray($[d])){var E=$[d];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ne=1;ne<R.length;ne++)R[ne]=""}}}}return Er($)}catch{return g}}var Tn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zn;function Zr(){}f(Zr,Jn),Zr.prototype.g=function(){return new XMLHttpRequest},zn=new Zr;function Zn(d){return encodeURIComponent(String(d))}function Tr(d){var g=1;d=d.split(":");const E=[];for(;g>0&&d.length;)E.push(d.shift()),g--;return d.length&&E.push(d.join(":")),E}function hn(d,g,E,R){this.j=d,this.i=g,this.l=E,this.S=R||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fo}function Fo(){this.i=null,this.g="",this.h=!1}var J0={},zm={};function $m(d,g,E){d.M=1,d.A=Hu(Nr(g)),d.u=E,d.R=!0,Z0(d,null)}function Z0(d,g){d.F=Date.now(),Bu(d),d.B=Nr(d.A);var E=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),hw(E.i,"t",R),d.C=0,E=d.j.L,d.h=new Fo,d.g=Aw(d.j,E?g:null,!d.u),d.P>0&&(d.O=new Lu(u(d.Y,d,d.g),d.P)),g=d.V,E=d.g,R=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(Vu[0]=V.toString()),V=Vu);for(let $=0;$<V.length;$++){const ne=pe(E,V[$],R||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=d.J?F(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Xi(),dn(d.i,d.v,d.B,d.l,d.S,d.u)}hn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Rs(d)==3?g.j():this.Y(d)},hn.prototype.Y=function(d){try{if(d==this.g)e:{const _e=Rs(this.g),xt=this.g.ya(),$e=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||xw(this.g)))){this.K||_e!=4||xt==7||(xt==8||$e<=0?Xi(3):Xi(2)),Bm(this);var g=this.g.ca();this.X=g;var E=KP(this);if(this.o=g==200,Jt(this.i,this.v,this.B,this.l,this.S,_e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,V=this.g;if((R=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var $=R;break t}}$=null}if(d=$)Dt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hm(this,d);else{this.o=!1,this.m=3,De(12),Yi(this),Nl(this);break e}}if(this.R){d=!0;let Nt;for(;!this.K&&this.C<E.length;)if(Nt=QP(this,E),Nt==zm){_e==4&&(this.m=4,De(14),d=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==J0){this.m=4,De(15),Dt(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else Dt(this.i,this.l,Nt,null),Hm(this,Nt);if(ew(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||E.length!=0||this.h.h||(this.m=1,De(16),d=!1),this.o=this.o&&d,!d)Dt(this.i,this.l,E,"[Invalid Chunked Response]"),Yi(this),Nl(this);else if(E.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Jm(ne),ne.P=!0,De(11))}}else Dt(this.i,this.l,E,null),Hm(this,E);_e==4&&Yi(this),this.o&&!this.K&&(_e==4?Nw(this.j,this):(this.o=!1,Bu(this)))}else cj(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),Yi(this),Nl(this)}}}catch{}finally{}};function KP(d){if(!ew(d))return d.g.la();const g=xw(d.g);if(g==="")return"";let E="";const R=g.length,V=Rs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Yi(d),Nl(d),"";d.h.i=new o.TextDecoder}for(let $=0;$<R;$++)d.h.h=!0,E+=d.h.i.decode(g[$],{stream:!(V&&$==R-1)});return g.length=0,d.h.g+=E,d.C=0,d.h.g}function ew(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function QP(d,g){var E=d.C,R=g.indexOf(`
`,E);return R==-1?zm:(E=Number(g.substring(E,R)),isNaN(E)?J0:(R+=1,R+E>g.length?zm:(g=g.slice(R,R+E),d.C=R+E,g)))}hn.prototype.cancel=function(){this.K=!0,Yi(this)};function Bu(d){d.T=Date.now()+d.H,tw(d,d.H)}function tw(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=yt(u(d.aa,d),g)}function Bm(d){d.D&&(o.clearTimeout(d.D),d.D=null)}hn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Is(this.i,this.B),this.M!=2&&(Xi(),De(17)),Yi(this),this.m=2,Nl(this)):tw(this,this.T-d)};function Nl(d){d.j.I==0||d.K||Nw(d.j,d)}function Yi(d){Bm(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Jr(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Hm(d,g){try{var E=d.j;if(E.I!=0&&(E.g==d||Wm(E.h,d))){if(!d.L&&Wm(E.h,d)&&E.I==3){try{var R=E.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Qu(E),Gu(E);else break e;Ym(E),De(18)}}else E.xa=V[1],0<E.xa-E.K&&V[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=yt(u(E.Va,E),6e3));sw(E.h)<=1&&E.ta&&(E.ta=void 0)}else Zi(E,11)}else if((d.L||E.g==d)&&Qu(E),!P(g))for(V=E.Ba.g.parse(g),g=0;g<V.length;g++){let $e=V[g];const Nt=$e[0];if(!(Nt<=E.K))if(E.K=Nt,$e=$e[1],E.I==2)if($e[0]=="c"){E.M=$e[1],E.ba=$e[2];const Cr=$e[3];Cr!=null&&(E.ka=Cr,E.j.info("VER="+E.ka));const eo=$e[4];eo!=null&&(E.za=eo,E.j.info("SVER="+E.za));const Ps=$e[5];Ps!=null&&typeof Ps=="number"&&Ps>0&&(R=1.5*Ps,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const js=d.g;if(js){const Yu=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var $=R.h;$.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(qm($,$.h),$.h=null))}if(R.G){const Zm=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;Zm&&(R.wa=Zm,Ke(R.J,R.G,Zm))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var ne=d;if(R.na=kw(R,R.L?R.ba:null,R.W),ne.L){iw(R.h,ne);var _e=ne,xt=R.O;xt&&(_e.H=xt),_e.D&&(Bm(_e),Bu(_e)),R.g=ne}else Sw(R);E.i.length>0&&Ku(E)}else $e[0]!="stop"&&$e[0]!="close"||Zi(E,7);else E.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Zi(E,7):Xm(E):$e[0]!="noop"&&E.l&&E.l.qa($e),E.A=0)}}Xi(4)}catch{}}var XP=class{constructor(d,g){this.g=d,this.map=g}};function nw(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function sw(d){return d.h?1:d.g?d.g.size:0}function Wm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function qm(d,g){d.g?d.g.add(g):d.h=g}function iw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}nw.prototype.cancel=function(){if(this.i=ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ow(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const E of d.g.values())g=g.concat(E.G);return g}return v(d.i)}var aw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YP(d,g){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const R=d[E].indexOf("=");let V,$=null;R>=0?(V=d[E].substring(0,R),$=d[E].substring(R+1)):V=d[E],g(V,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ks(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof ks?(this.l=d.l,Cl(this,d.j),this.o=d.o,this.g=d.g,Il(this,d.u),this.h=d.h,Gm(this,fw(d.i)),this.m=d.m):d&&(g=String(d).match(aw))?(this.l=!1,Cl(this,g[1]||"",!0),this.o=kl(g[2]||""),this.g=kl(g[3]||"",!0),Il(this,g[4]),this.h=kl(g[5]||"",!0),Gm(this,g[6]||"",!0),this.m=kl(g[7]||"")):(this.l=!1,this.i=new Rl(null,this.l))}ks.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Al(g,lw,!0),":");var E=this.g;return(E||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Al(g,lw,!0),"@"),d.push(Zn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Al(E,E.charAt(0)=="/"?ej:ZP,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Al(E,nj)),d.join("")},ks.prototype.resolve=function(d){const g=Nr(this);let E=!!d.j;E?Cl(g,d.j):E=!!d.o,E?g.o=d.o:E=!!d.g,E?g.g=d.g:E=d.u!=null;var R=d.h;if(E)Il(g,d.u);else if(E=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var V=g.h.lastIndexOf("/");V!=-1&&(R=g.h.slice(0,V+1)+R)}if(V=R,V==".."||V==".")R="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){R=V.lastIndexOf("/",0)==0,V=V.split("/");const $=[];for(let ne=0;ne<V.length;){const _e=V[ne++];_e=="."?R&&ne==V.length&&$.push(""):_e==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),R&&ne==V.length&&$.push("")):($.push(_e),R=!0)}R=$.join("/")}else R=V}return E?g.h=R:E=d.i.toString()!=="",E?Gm(g,fw(d.i)):E=!!d.m,E&&(g.m=d.m),g};function Nr(d){return new ks(d)}function Cl(d,g,E){d.j=E?kl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Il(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Gm(d,g,E){g instanceof Rl?(d.i=g,rj(d.i,d.l)):(E||(g=Al(g,tj)),d.i=new Rl(g,d.l))}function Ke(d,g,E){d.i.set(g,E)}function Hu(d){return Ke(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function kl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Al(d,g,E){return typeof d=="string"?(d=encodeURI(d).replace(g,JP),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function JP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var lw=/[#\/\?@]/g,ZP=/[#\?:]/g,ej=/[#\?]/g,tj=/[#\?@]/g,nj=/#/g;function Rl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Ji(d){d.g||(d.g=new Map,d.h=0,d.i&&YP(d.i,function(g,E){d.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=Rl.prototype,t.add=function(d,g){Ji(this),this.i=null,d=Uo(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(g),this.h+=1,this};function cw(d,g){Ji(d),g=Uo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function uw(d,g){return Ji(d),g=Uo(d,g),d.g.has(g)}t.forEach=function(d,g){Ji(this),this.g.forEach(function(E,R){E.forEach(function(V){d.call(g,V,R,this)},this)},this)};function dw(d,g){Ji(d);let E=[];if(typeof g=="string")uw(d,g)&&(E=E.concat(d.g.get(Uo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)E=E.concat(d[g]);return E}t.set=function(d,g){return Ji(this),this.i=null,d=Uo(this,d),uw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=dw(this,d),d.length>0?String(d[0]):g):g};function hw(d,g,E){cw(d,g),E.length>0&&(d.i=null,d.g.set(Uo(d,g),v(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var E=g[R];const V=Zn(E);E=dw(this,E);for(let $=0;$<E.length;$++){let ne=V;E[$]!==""&&(ne+="="+Zn(E[$])),d.push(ne)}}return this.i=d.join("&")};function fw(d){const g=new Rl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Uo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function rj(d,g){g&&!d.j&&(Ji(d),d.i=null,d.g.forEach(function(E,R){const V=R.toLowerCase();R!=V&&(cw(this,R),hw(this,V,E))},d)),d.j=g}function sj(d,g){const E=new un;if(o.Image){const R=new Image;R.onload=h(As,E,"TestLoadImage: loaded",!0,g,R),R.onerror=h(As,E,"TestLoadImage: error",!1,g,R),R.onabort=h(As,E,"TestLoadImage: abort",!1,g,R),R.ontimeout=h(As,E,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else g(!1)}function ij(d,g){const E=new un,R=new AbortController,V=setTimeout(()=>{R.abort(),As(E,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:R.signal}).then($=>{clearTimeout(V),$.ok?As(E,"TestPingServer: ok",!0,g):As(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),As(E,"TestPingServer: error",!1,g)})}function As(d,g,E,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(E)}catch{}}function oj(){this.g=new Fu}function Km(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Km,Jn),Km.prototype.g=function(){return new Wu(this.i,this.h)};function Wu(d,g){Ge.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Wu,Ge),t=Wu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,jl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function mw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Pl(this):jl(this),this.readyState==3&&mw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Pl(this))},t.Na=function(d){this.g&&(this.response=d,Pl(this))},t.ga=function(){this.g&&Pl(this)};function Pl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,jl(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=g.next();return d.join(`\r
`)};function jl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function pw(d){let g="";return L(d,function(E,R){g+=R,g+=":",g+=E,g+=`\r
`}),g}function Qm(d,g,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=pw(E),typeof d=="string"?E!=null&&Zn(E):Ke(d,g,E))}function lt(d){Ge.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(lt,Ge);var aj=/^https?$/i,lj=["POST","PUT"];t=lt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){gw(this,$);return}if(d=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)E.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())E.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(lj,g,void 0)>=0)||R||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of E)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch($){gw(this,$)}};function gw(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,yw(d),qu(d)}function yw(d){d.A||(d.A=!0,Ze(d,"complete"),Ze(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ze(this,"complete"),Ze(this,"abort"),qu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qu(this,!0)),lt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vw(this):this.Xa())},t.Xa=function(){vw(this)};function vw(d){if(d.h&&typeof i<"u"){if(d.v&&Rs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ze(d,"readystatechange"),Rs(d)==4){d.h=!1;try{const $=d.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var R;if(R=$===0){let ne=String(d.D).match(aw)[1]||null;!ne&&o.self&&o.self.location&&(ne=o.self.location.protocol.slice(0,-1)),R=!aj.test(ne?ne.toLowerCase():"")}E=R}if(E)Ze(d,"complete"),Ze(d,"success");else{d.o=6;try{var V=Rs(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",yw(d)}}finally{qu(d)}}}}function qu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,g||Ze(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),qi(g)}};function xw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function cj(d){const g={};d=(d.g&&Rs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(P(d[R]))continue;var E=Tr(d[R]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=g[V]||[];g[V]=$,$.push(E)}z(g,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dl(d,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||g}function ww(d){this.za=0,this.i=[],this.j=new un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dl("baseRetryDelayMs",5e3,d),this.Za=Dl("retryDelaySeedMs",1e4,d),this.Ta=Dl("forwardChannelMaxRetries",2,d),this.va=Dl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new nw(d&&d.concurrentRequestLimit),this.Ba=new oj,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ww.prototype,t.ka=8,t.I=1,t.connect=function(d,g,E,R){De(0),this.W=d,this.H=g||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=kw(this,null,this.W),Ku(this)};function Xm(d){if(bw(d),d.I==3){var g=d.V++,E=Nr(d.J);if(Ke(E,"SID",d.M),Ke(E,"RID",g),Ke(E,"TYPE","terminate"),Ml(d,E),g=new hn(d,d.j,g),g.M=2,g.A=Hu(Nr(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=g.A,E=!0),E||(g.g=Aw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Bu(g)}Iw(d)}function Gu(d){d.g&&(Jm(d),d.g.cancel(),d.g=null)}function bw(d){Gu(d),d.v&&(o.clearTimeout(d.v),d.v=null),Qu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Ku(d){if(!rw(d.h)&&!d.m){d.m=!0;var g=d.Ea;j||S(),M||(j(),M=!0),N.add(g,d),d.D=0}}function uj(d,g){return sw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=yt(u(d.Ea,d,g),Cw(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new hn(this,this.j,d);let $=this.o;if(this.U&&($?($=F($),Y($,this.U)):$=this.U),this.u!==null||this.R||(V.J=$,$=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Ew(this,V,g),E=Nr(this.J),Ke(E,"RID",d),Ke(E,"CVER",22),this.G&&Ke(E,"X-HTTP-Session-Id",this.G),Ml(this,E),$&&(this.R?g="headers="+Zn(pw($))+"&"+g:this.u&&Qm(E,this.u,$)),qm(this.h,V),this.Ra&&Ke(E,"TYPE","init"),this.S?(Ke(E,"$req",g),Ke(E,"SID","null"),V.U=!0,$m(V,E,null)):$m(V,E,g),this.I=2}}else this.I==3&&(d?_w(this,d):this.i.length==0||rw(this.h)||_w(this))};function _w(d,g){var E;g?E=g.l:E=d.V++;const R=Nr(d.J);Ke(R,"SID",d.M),Ke(R,"RID",E),Ke(R,"AID",d.K),Ml(d,R),d.u&&d.o&&Qm(R,d.u,d.o),E=new hn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Ew(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),qm(d.h,E),$m(E,R,g)}function Ml(d,g){d.H&&L(d.H,function(E,R){Ke(g,R,E)}),d.l&&L({},function(E,R){Ke(g,R,E)})}function Ew(d,g,E){E=Math.min(d.i.length,E);const R=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let _e=-1;for(;;){const xt=["count="+E];_e==-1?E>0?(_e=V[0].g,xt.push("ofs="+_e)):_e=0:xt.push("ofs="+_e);let $e=!0;for(let Nt=0;Nt<E;Nt++){var $=V[Nt].g;const Cr=V[Nt].map;if($-=_e,$<0)_e=Math.max(0,V[Nt].g-100),$e=!1;else try{$="req"+$+"_"||"";try{var ne=Cr instanceof Map?Cr:Object.entries(Cr);for(const[eo,Ps]of ne){let js=Ps;l(Ps)&&(js=Er(Ps)),xt.push($+eo+"="+encodeURIComponent(js))}}catch(eo){throw xt.push($+"type="+encodeURIComponent("_badmap")),eo}}catch{R&&R(Cr)}}if($e){ne=xt.join("&");break e}}ne=void 0}return d=d.i.splice(0,E),g.G=d,ne}function Sw(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;j||S(),M||(j(),M=!0),N.add(g,d),d.A=0}}function Ym(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=yt(u(d.Da,d),Cw(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Tw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=yt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),Gu(this),Tw(this))};function Jm(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Tw(d){d.g=new hn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Nr(d.na);Ke(g,"RID","rpc"),Ke(g,"SID",d.M),Ke(g,"AID",d.K),Ke(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ke(g,"TO",d.ia),Ke(g,"TYPE","xmlhttp"),Ml(d,g),d.u&&d.o&&Qm(g,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Hu(Nr(g)),E.u=null,E.R=!0,Z0(E,d)}t.Va=function(){this.C!=null&&(this.C=null,Gu(this),Ym(this),De(19))};function Qu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Nw(d,g){var E=null;if(d.g==g){Qu(d),Jm(d),d.g=null;var R=2}else if(Wm(d.h,g))E=g.G,iw(d.h,g),R=1;else return;if(d.I!=0){if(g.o)if(R==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;R=Qi(),Ze(R,new zt(R,E)),Ku(d)}else Sw(d);else if(V=g.m,V==3||V==0&&g.X>0||!(R==1&&uj(d,g)||R==2&&Ym(d)))switch(E&&E.length>0&&(g=d.h,g.i=g.i.concat(E)),V){case 1:Zi(d,5);break;case 4:Zi(d,10);break;case 3:Zi(d,6);break;default:Zi(d,2)}}}function Cw(d,g){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*g}function Zi(d,g){if(d.j.info("Error code "+g),g==2){var E=u(d.bb,d),R=d.Ua;const V=!R;R=new ks(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Cl(R,"https"),Hu(R),V?sj(R.toString(),E):ij(R.toString(),E)}else De(2);d.I=0,d.l&&d.l.pa(g),Iw(d),bw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Iw(d){if(d.I=0,d.ja=[],d.l){const g=ow(d.h);(g.length!=0||d.i.length!=0)&&(_(d.ja,g),_(d.ja,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.oa()}}function kw(d,g,E){var R=E instanceof ks?Nr(E):new ks(E);if(R.g!="")g&&(R.g=g+"."+R.g),Il(R,R.u);else{var V=o.location;R=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const $=new ks(null);R&&Cl($,R),g&&($.g=g),V&&Il($,V),E&&($.h=E),R=$}return E=d.G,g=d.wa,E&&g&&Ke(R,E,g),Ke(R,"VER",d.ka),Ml(d,R),R}function Aw(d,g,E){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new lt(new Km({ab:E})):new lt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rw(){}t=Rw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Xu(){}Xu.prototype.g=function(d,g){return new Cn(d,g)};function Cn(d,g){Ge.call(this),this.g=new ww(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!P(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new zo(this)}f(Cn,Ge),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Xm(this.g)},Cn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Er(d),d=E);g.i.push(new XP(g.Ya++,d)),g.I==3&&Ku(g)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Xm(this.g),delete this.g,Cn.Z.N.call(this)};function Pw(d){Tl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const E in g){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(Pw,Tl);function jw(){Ki.call(this),this.status=1}f(jw,Ki);function zo(d){this.g=d}f(zo,Rw),zo.prototype.ra=function(){Ze(this.g,"a")},zo.prototype.qa=function(d){Ze(this.g,new Pw(d))},zo.prototype.pa=function(d){Ze(this.g,new jw)},zo.prototype.oa=function(){Ze(this.g,"b")},Xu.prototype.createWebChannel=Xu.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,YI=function(){return new Xu},XI=function(){return Qi()},QI=Sr,Ey={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,eh=Tn,Nn.COMPLETE="complete",KI=Nn,Sl.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Xl=Sl,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,GI=lt}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const Jb="@firebase/firestore",Zb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new wx("@firebase/firestore");function qo(){return Co.logLevel}function oe(t,...e){if(Co.logLevel<=Ne.DEBUG){const n=e.map(jx);Co.debug(`Firestore (${hl}): ${t}`,...n)}}function ws(t,...e){if(Co.logLevel<=Ne.ERROR){const n=e.map(jx);Co.error(`Firestore (${hl}): ${t}`,...n)}}function Io(t,...e){if(Co.logLevel<=Ne.WARN){const n=e.map(jx);Co.warn(`Firestore (${hl}): ${t}`,...n)}}function jx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JI(t,r,n)}function JI(t,e,n){let r=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ws(r),new Error(r)}function Ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||JI(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ek{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class n9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r9{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new ZI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class s9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new s9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new e_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new e_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=a9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function Sy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Bp(s)===Bp(i)?Ce(s,i):Bp(s)?1:-1}return Ce(t.length,e.length)}const l9=55296,c9=57343;function Bp(t){const e=t.charCodeAt(0);return e>=l9&&e<=c9}function Xa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class Rr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Rr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const r=Rr.isNumericId(e),s=Rr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Rr.extractNumericId(e).compare(Rr.extractNumericId(n)):Sy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class He extends Rr{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const u9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Rr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return u9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new At([t_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(He.fromString(e))}static fromName(e){return new he(He.fromString(e).popFirst(5))}static empty(){return new he(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e,n){if(!n)throw new ie(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nk(t,e,n,r){if(e===!0&&r===!0)throw new ie(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n_(t){if(!he.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r_(t){if(he.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=om(t);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _u(t,e){if(!rk(t))throw new ie(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ie(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=-62135596800,i_=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i_);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<s_)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i_}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:gt("string",We._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new We(0,0))}static max(){return new xe(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function d9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Ii(s,he.empty(),e)}function h9(t){return new Ii(t.readTime,t.key,qc)}class Ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ii(xe.min(),he.empty(),qc)}static max(){return new Ii(xe.max(),he.empty(),qc)}}function f9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==m9)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function g9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}am.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=-1;function lm(t){return t==null}function Kh(t){return t===0&&1/t==-1/0}function y9(t){return typeof t=="number"&&Number.isInteger(t)&&!Kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="";function v9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o_(e)),e=x9(t.get(n),e);return o_(e)}function x9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case sk:n+="";break;default:n+=i}}return n}function o_(t){return t+sk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ik(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}}class Ed{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=s??Ot.EMPTY,this.right=i??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new jn([])}unionWith(e){let n=new St(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ok("Invalid base64 string: "+i):i}}(e);return new jt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const w9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=w9.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="server_timestamp",lk="__type__",ck="__previous_value__",uk="__local_write_time__";function Mx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lk])==null?void 0:r.stringValue)===ak}function cm(t){const e=t.mapValue.fields[ck];return Mx(e)?cm(e):e}function Gc(t){const e=ki(t.mapValue.fields[uk].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Qh="(default)";class Ya{constructor(e,n){this.projectId=e,this.database=n||Qh}static empty(){return new Ya("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="__type__",hk="__max__",Sd={mapValue:{fields:{__type__:{stringValue:hk}}}},fk="__vector__",Xh="value";function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mx(t)?4:E9(t)?9007199254740991:_9(t)?10:11:ge(28295,{value:t})}function qr(t,e){if(t===e)return!0;const n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ki(s.timestampValue),l=ki(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ai(s.bytesValue).isEqual(Ai(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),l=dt(i.doubleValue);return o===l?Kh(o)===Kh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(a_(o)!==a_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!qr(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Kc(t,e){return(t.values||[]).find(n=>qr(n,e))!==void 0}function Ja(t,e){if(t===e)return 0;const n=Ri(t),r=Ri(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=dt(i.integerValue||i.doubleValue),c=dt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return c_(t.timestampValue,e.timestampValue);case 4:return c_(Gc(t),Gc(e));case 5:return Sy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ai(i),c=Ai(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ce(l[u],c[u]);if(h!==0)return h}return Ce(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ce(dt(i.latitude),dt(o.latitude));return l!==0?l:Ce(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,v,_,y;const l=i.fields||{},c=o.fields||{},u=(p=l[Xh])==null?void 0:p.arrayValue,h=(v=c[Xh])==null?void 0:v.arrayValue,f=Ce(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return f!==0?f:u_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Sd.mapValue&&o===Sd.mapValue)return 0;if(i===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Sy(c[f],h[f]);if(p!==0)return p;const v=Ja(l[c[f]],u[h[f]]);if(v!==0)return v}return Ce(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function c_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=ki(t),r=ki(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function u_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ja(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function Za(t){return Ty(t)}function Ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ty(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ty(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function th(t){switch(Ri(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(t);return e?16+th(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+th(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ui(r.fields,(i,o)=>{s+=i.length+th(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function d_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ny(t){return!!t&&"integerValue"in t}function Ox(t){return!!t&&"arrayValue"in t}function h_(t){return!!t&&"nullValue"in t}function f_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function _9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dk])==null?void 0:r.stringValue)===fk}function fc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return{...t}}function E9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=fc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(fc(this.value))}}function mk(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new At([n]);if(nh(r)){const i=mk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Qt(e,0,xe.min(),xe.min(),xe.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new Qt(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new Qt(e,2,n,xe.min(),xe.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,xe.min(),xe.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.position=e,this.inclusive=n}}function m_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Ja(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function p_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function S9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{}class pt extends pk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N9(e,n,r):n==="array-contains"?new k9(e,r):n==="in"?new A9(e,r):n==="not-in"?new R9(e,r):n==="array-contains-any"?new P9(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C9(e,r):new I9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ja(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends pk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xr(e,n)}matches(e){return gk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gk(t){return t.op==="and"}function yk(t){return T9(t)&&gk(t)}function T9(t){for(const e of t.filters)if(e instanceof xr)return!1;return!0}function Cy(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+Za(t.value);if(yk(t))return t.filters.map(e=>Cy(e)).join(",");{const e=t.filters.map(n=>Cy(n)).join(",");return`${t.op}(${e})`}}function vk(t,e){return t instanceof pt?function(r,s){return s instanceof pt&&r.op===s.op&&r.field.isEqual(s.field)&&qr(r.value,s.value)}(t,e):t instanceof xr?function(r,s){return s instanceof xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&vk(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function xk(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Za(n.value)}`}(t):t instanceof xr?function(n){return n.op.toString()+" {"+n.getFilters().map(xk).join(" ,")+"}"}(t):"Filter"}class N9 extends pt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class C9 extends pt{constructor(e,n){super(e,"in",n),this.keys=wk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class I9 extends pt{constructor(e,n){super(e,"not-in",n),this.keys=wk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class k9 extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ox(n)&&Kc(n.arrayValue,this.value)}}class A9 extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kc(this.value.arrayValue,n)}}class R9 extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kc(this.value.arrayValue,n)}}class P9 extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ox(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function g_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new j9(t,e,n,r,s,i,o)}function Lx(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),lm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Za(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Za(r)).join(",")),e.Te=n}return e.Te}function Vx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p_(t.startAt,e.startAt)&&p_(t.endAt,e.endAt)}function Iy(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D9(t,e,n,r,s,i,o,l){return new pl(t,e,n,r,s,i,o,l)}function um(t){return new pl(t)}function y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bk(t){return t.collectionGroup!==null}function mc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new St(At.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qc(i,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new Qc(At.keyField(),r))}return e.Ie}function zr(t){const e=we(t);return e.Ee||(e.Ee=M9(e,mc(t))),e.Ee}function M9(t,e){if(t.limitType==="F")return g_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Qc(s.field,i)});const n=t.endAt?new Yh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yh(t.startAt.position,t.startAt.inclusive):null;return g_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ky(t,e){const n=t.filters.concat([e]);return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jh(t,e,n){return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dm(t,e){return Vx(zr(t),zr(e))&&t.limitType===e.limitType}function _k(t){return`${Lx(zr(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xk(s)).join(", ")}]`),lm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Za(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Za(s)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function hm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=m_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,mc(r),s)||r.endAt&&!function(o,l,c){const u=m_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,mc(r),s))}(t,e)}function O9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ek(t){return(e,n)=>{let r=!1;for(const s of mc(t)){const i=L9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function L9(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Ja(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ik(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=new ot(he.comparator);function bs(){return V9}const Sk=new ot(he.comparator);function Yl(...t){let e=Sk;for(const n of t)e=e.insert(n.key,n);return e}function Tk(t){let e=Sk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lo(){return pc()}function Nk(){return pc()}function pc(){return new Oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const F9=new ot(he.comparator),U9=new St(he.comparator);function Ie(...t){let e=U9;for(const n of t)e=e.add(n);return e}const z9=new St(Ce);function $9(){return z9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function Ck(t){return{integerValue:""+t}}function B9(t,e){return y9(e)?Ck(e):Fx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function H9(t,e,n){return t instanceof Xc?function(s,i){const o={fields:{[lk]:{stringValue:ak},[uk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mx(i)&&(i=cm(i)),i&&(o.fields[ck]=i),{mapValue:o}}(n,e):t instanceof el?kk(t,e):t instanceof Yc?Ak(t,e):function(s,i){const o=Ik(s,i),l=v_(o)+v_(s.Ae);return Ny(o)&&Ny(s.Ae)?Ck(l):Fx(s.serializer,l)}(t,e)}function W9(t,e,n){return t instanceof el?kk(t,e):t instanceof Yc?Ak(t,e):n}function Ik(t,e){return t instanceof Zh?function(r){return Ny(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xc extends fm{}class el extends fm{constructor(e){super(),this.elements=e}}function kk(t,e){const n=Rk(e);for(const r of t.elements)n.some(s=>qr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yc extends fm{constructor(e){super(),this.elements=e}}function Ak(t,e){let n=Rk(e);for(const r of t.elements)n=n.filter(s=>!qr(s,r));return{arrayValue:{values:n}}}class Zh extends fm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function v_(t){return dt(t.integerValue||t.doubleValue)}function Rk(t){return Ox(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.field=e,this.transform=n}}function q9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof el&&s instanceof el||r instanceof Yc&&s instanceof Yc?Xa(r.elements,s.elements,qr):r instanceof Zh&&s instanceof Zh?qr(r.Ae,s.Ae):r instanceof Xc&&s instanceof Xc}(t.transform,e.transform)}class G9{constructor(e,n){this.version=e,this.transformResults=n}}class $r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mm{}function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mk(t.key,$r.none()):new Eu(t.key,t.data,$r.none());{const n=t.data,r=vn.empty();let s=new St(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zi(t.key,r,new jn(s.toArray()),$r.none())}}function K9(t,e,n){t instanceof Eu?function(s,i,o){const l=s.value.clone(),c=w_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(s,i,o){if(!rh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=w_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Dk(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gc(t,e,n,r){return t instanceof Eu?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=i.value.clone(),h=b_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=b_(i.fieldTransforms,c,o),h=o.data;return h.setAll(Dk(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return rh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Q9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ik(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function x_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xa(r,s,(i,o)=>q9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eu extends mm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zi extends mm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w_(t,e,n){const r=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,W9(o,l,n[s]))}return r}function b_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,H9(i,o,e))}return r}class Mk extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X9 extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&K9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=jk(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>x_(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>x_(n,r))}}class Ux{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return F9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ux(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,ke;function eU(t){switch(t){case G.OK:return ge(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function Ok(t){if(t===void 0)return ws("GRPC error has no .code"),G.UNKNOWN;switch(t){case ft.OK:return G.OK;case ft.CANCELLED:return G.CANCELLED;case ft.UNKNOWN:return G.UNKNOWN;case ft.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ft.INTERNAL:return G.INTERNAL;case ft.UNAVAILABLE:return G.UNAVAILABLE;case ft.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ft.NOT_FOUND:return G.NOT_FOUND;case ft.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ft.ABORTED:return G.ABORTED;case ft.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ft.DATA_LOSS:return G.DATA_LOSS;default:return ge(39323,{code:t})}}(ke=ft||(ft={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new yi([4294967295,4294967295],0);function __(t){const e=tU().encode(t),n=new qI;return n.update(e),new Uint8Array(n.digest())}function E_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yi([n,r],0),new yi([s,i],0)]}class zx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(yi.fromNumber(r)));return s.compare(nU)===1&&(s=new yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__(e),[r,s]=E_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=__(e),[r,s]=E_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pm(xe.min(),s,new ot(Ce),bs(),Ie())}}class Su{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Su(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Lk{constructor(e,n){this.targetId=e,this.Ce=n}}class Vk{constructor(e,n,r=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class S_{constructor(){this.ve=0,this.Fe=T_(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}}),new Su(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=T_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rU{constructor(e){this.Ge=e,this.ze=new Map,this.je=bs(),this.Je=Td(),this.He=Td(),this.Ye=new ot(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Iy(i))if(r===0){const o=new he(i.path);this.et(n,o,Qt.newNoDocument(o,xe.min()))}else Ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ai(r).toUint8Array()}catch(c){if(c instanceof ok)return Io("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new zx(o,s,i)}catch(c){return Io(c instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Iy(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Qt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new pm(e,n,this.Ye,this.je,r);return this.je=bs(),this.Je=Td(),this.He=Td(),this.Ye=new ot(Ce),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new S_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Td(){return new ot(he.comparator)}function T_(){return new ot(he.comparator)}const sU={asc:"ASCENDING",desc:"DESCENDING"},iU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oU={and:"AND",or:"OR"};class aU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ay(t,e){return t.useProto3Json||lm(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lU(t,e){return ef(t,e.toTimestamp())}function Br(t){return Ve(!!t,49232),xe.fromTimestamp(function(n){const r=ki(n);return new We(r.seconds,r.nanos)}(t))}function $x(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Uk(t){const e=He.fromString(t);return Ve(Wk(e),10190,{key:e.toString()}),e}function Py(t,e){return $x(t.databaseId,e.path)}function Hp(t,e){const n=Uk(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he($k(n))}function zk(t,e){return $x(t.databaseId,e)}function cU(t){const e=Uk(t);return e.length===4?He.emptyPath():$k(e)}function jy(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $k(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N_(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function uU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ve(h===void 0||typeof h=="string",58123),jt.fromBase64String(h||"")):(Ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),jt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?G.UNKNOWN:Ok(u.code);return new ie(h,u.message||"")}(o);n=new Vk(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hp(t,r.document.name),i=Br(r.document.updateTime),o=r.document.createTime?Br(r.document.createTime):xe.min(),l=new vn({mapValue:{fields:r.document.fields}}),c=Qt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new sh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hp(t,r.document),i=r.readTime?Br(r.readTime):xe.min(),o=Qt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new sh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hp(t,r.document),i=r.removedTargetIds||[];n=new sh([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Z9(s,i),l=r.targetId;n=new Lk(l,o)}}return n}function dU(t,e){let n;if(e instanceof Eu)n={update:N_(t,e.key,e.value)};else if(e instanceof Mk)n={delete:Py(t,e.key)};else if(e instanceof zi)n={update:N_(t,e.key,e.data),updateMask:wU(e.fieldMask)};else{if(!(e instanceof X9))return ge(16599,{Vt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Xc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof el)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function hU(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Br(s.updateTime):Br(i);return o.isEqual(xe.min())&&(o=Br(i)),new G9(o,s.transformResults||[])}(n,e))):[]}function fU(t,e){return{documents:[zk(t,e.path)]}}function mU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zk(t,s);const i=function(u){if(u.length!==0)return Hk(xr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Ko(p.field),direction:yU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ay(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function pU(t){let e=cU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ve(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Bk(f);return p instanceof xr&&yk(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new Qc(Qo(_.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,lm(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new Yh(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,v=f.values||[];return new Yh(v,p)}(n.endAt)),D9(e,s,o,i,l,"F",c,u)}function gU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qo(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qo(n.unaryFilter.field);return pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qo(n.unaryFilter.field);return pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qo(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return pt.create(Qo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xr.create(n.compositeFilter.filters.map(r=>Bk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function yU(t){return sU[t]}function vU(t){return iU[t]}function xU(t){return oU[t]}function Ko(t){return{fieldPath:t.canonicalString()}}function Qo(t){return At.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof pt?function(n){if(n.op==="=="){if(f_(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NAN"}};if(h_(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f_(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NOT_NAN"}};if(h_(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(n.field),op:vU(n.op),value:n.value}}}(t):t instanceof xr?function(n){const r=n.getFilters().map(s=>Hk(s));return r.length===1?r[0]:{compositeFilter:{op:xU(n.op),filters:r}}}(t):ge(54877,{filter:t})}function wU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r,s,i=xe.min(),o=xe.min(),l=jt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.yt=e}}function _U(t){const e=pU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(){this.Cn=new SU}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ii.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class SU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(He.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qk=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(qk,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="LruGarbageCollector",TU=1048576;function k_([t,e],[n,r]){const s=Ce(t,n);return s===0?Ce(e,r):s}class NU{constructor(e){this.Ir=e,this.buffer=new St(k_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();k_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(I_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ml(n)?oe(I_,"Ignoring IndexedDB error during garbage collection: ",n):await fl(n)}await this.Vr(3e5)})}}class IU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(am.ce);const r=new NU(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(C_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),qo()<=Ne.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function kU(t,e){return new IU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.changes=new Oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gc(r.mutation,s,jn.empty(),We.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=lo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=bs();const o=pc(),l=function(){return pc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof zi)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),gc(h.mutation,u,h.mutation.getFieldMask(),We.now())):o.set(u.key,jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new RU(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=pc();let s=new ot((o,l)=>o-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||jn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ie()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=Nk();h.forEach(p=>{if(!i.has(p)){const v=jk(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(lo());let l=qc,c=i;return o.next(u=>K.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ie())).next(h=>({batchId:l,changes:Tk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Yl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Yl();return this.indexManager.getCollectionParents(e,i).next(l=>K.forEach(l,c=>{const u=function(f,p){return new pl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Qt.newInvalidDocument(h)))});let l=Yl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&gc(h.mutation,u,jn.empty(),We.now()),hm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Br(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:_U(s.bundledQuery),readTime:Br(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.overlays=new ot(he.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lo();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=lo(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ot((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=lo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=lo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return K.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new J9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.Qr=new St(Ct.$r),this.Ur=new St(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ct(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ct(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new He([])),r=new Ct(n,e),s=new Ct(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new He([])),r=new Ct(n,e),s=new Ct(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ct(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(Ct.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ct(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Dx:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ct(n,0),s=new Ct(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ce);return n.forEach(s=>{const i=new Ct(s,0),o=new Ct(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Ct(new he(i),0);let l=new St(Ce);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),K.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,s=>{const i=new Ct(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ct(n,0),s=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.ri=e,this.docs=function(){return new ot(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=bs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=bs();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||f9(h9(h),r)<=0||(s.has(h.key)||hm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VU(this)}getSize(e){return K.resolve(this.size)}}class VU extends AU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.persistence=e,this.si=new Oo(n=>Lx(n),Vx),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Bx,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.ui={},this.overlays={},this.ci=new am(0),this.li=!1,this.li=!0,this.hi=new MU,this.referenceDelegate=e(this),this.Pi=new FU(this),this.indexManager=new EU,this.remoteDocumentCache=function(s){return new LU(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new bU(n),this.Ii=new jU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new OU(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new UU(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class UU extends p9{constructor(e){super(),this.currentSequenceNumber=e}}class Hx{constructor(e){this.persistence=e,this.Ri=new Bx,this.Vi=null}static mi(e){return new Hx(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class tf{constructor(e,n){this.persistence=e,this.pi=new Oo(r=>v9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=kU(this,n)}static mi(e,n){return new tf(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?K.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return O3()?8:g9(Yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zU;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(qo()<=Ne.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(qo()<=Ne.DEBUG&&oe("QueryEngine","Query:",Go(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(qo()<=Ne.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):K.resolve())}ys(e,n){if(y_(n))return K.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jh(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Jh(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return y_(n)||s.isEqual(xe.min())?K.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?K.resolve(null):(qo()<=Ne.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Go(n)),this.vs(e,o,n,d9(s,qc)).next(l=>l))})}Ds(e,n){let r=new St(Ek(e));return n.forEach((s,i)=>{hm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return qo()<=Ne.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Go(n)),this.ps.getDocumentsMatchingQuery(e,n,Ii.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LocalStore",BU=3e8;class HU{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ot(Ce),this.xs=new Oo(i=>Lx(i),Vx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function WU(t,e,n,r){return new HU(t,e,n,r)}async function Kk(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ie();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function qU(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let v=K.resolve();return p.forEach(_=>{v=v.next(()=>h.getEntry(c,_)).next(y=>{const w=u.docVersions.get(_);Ve(w!==null,48541),y.version.compareTo(w)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Qk(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function GU(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(jt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(y,w,b){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=BU?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(i,v))});let c=bs(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(KU(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(xe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return K.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function KU(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=bs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(qx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function QU(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XU(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ti(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Dy(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ml(o))throw o;oe(qx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function A_(t,e,n){const r=we(t);let s=xe.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?K.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,zr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ie())).next(l=>(YU(r,O9(e),l),{documents:l,Qs:i})))}function YU(t,e,n){let r=t.Os.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class R_{constructor(){this.activeTargetIds=$9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JU{constructor(){this.Mo=new R_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new R_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="ConnectivityMonitor";class j_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(P_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(P_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function My(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RestConnection",ez={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=My(),l=this.zo(e,n.toUriEncodedString());oe(Wp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=cl(u);return this.Jo(e,l,c,r,h).then(f=>(oe(Wp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Io(Wp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=ez[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class rz extends tz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=My();return new Promise((l,c)=>{const u=new GI;u.setWithCredentials(!0),u.listenOnce(KI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eh.NO_ERROR:const f=u.getResponseJson();oe(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case eh.TIMEOUT:oe(Wt,`RPC '${e}' ${o} timed out`),c(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const p=u.getStatus();if(oe(Wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const y=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(x)>=0?x:G.UNKNOWN}(_.status);c(new ie(y,_.message))}else c(new ie(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ie(G.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(Wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);oe(Wt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=My(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YI(),l=XI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");oe(Wt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,v=!1;const _=new nz({Yo:w=>{v?oe(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(oe(Wt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),oe(Wt,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Zo:()=>f.close()}),y=(w,b,x)=>{w.listen(b,T=>{try{x(T)}catch(A){setTimeout(()=>{throw A},0)}})};return y(f,Xl.EventType.OPEN,()=>{v||(oe(Wt,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),y(f,Xl.EventType.CLOSE,()=>{v||(v=!0,oe(Wt,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(f))}),y(f,Xl.EventType.ERROR,w=>{v||(v=!0,Io(Wt,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),_.a_(new ie(G.UNAVAILABLE,"The operation could not be completed")))}),y(f,Xl.EventType.MESSAGE,w=>{var b;if(!v){const x=w.data[0];Ve(!!x,16349);const T=x,A=(T==null?void 0:T.error)||((b=T[0])==null?void 0:b.error);if(A){oe(Wt,`RPC '${e}' stream ${s} received error:`,A);const j=A.status;let M=function(C){const I=ft[C];if(I!==void 0)return Ok(I)}(j),N=A.message;M===void 0&&(M=G.INTERNAL,N="Unknown error status: "+j+" with message "+A.message),v=!0,_.a_(new ie(M,N)),f.close()}else oe(Wt,`RPC '${e}' stream ${s} received:`,x),_.u_(x)}}),y(l,QI.STAT_EVENT,w=>{w.stat===Ey.PROXY?oe(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Ey.NOPROXY&&oe(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){return new aU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="PersistentStream";class Yk{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ws(n.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ie(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(D_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(D_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sz extends Yk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uU(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Br(o.readTime):xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Iy(c)?{documents:fU(i,c)}:{query:mU(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Fk(i,o.resumeToken);const u=Ay(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){l.readTime=ef(i,o.snapshotVersion.toTimestamp());const u=Ay(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=gU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.q_(n)}}class iz extends Yk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hU(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dU(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{}class az extends oz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Ry(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(G.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Ry(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(G.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="RemoteStore";class cz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Lo(this)&&(oe(ko,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await Tu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ym(u)}(this))})}),this.Ra=new lz(r,s)}}async function ym(t){if(Lo(t))for(const e of t.da)await e(!0)}async function Tu(t){for(const e of t.da)await e(!1)}function Jk(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xx(n)?Qx(n):gl(n).O_()&&Kx(n,e))}function Gx(t,e){const n=we(t),r=gl(n);n.Ia.delete(e),r.O_()&&Zk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Lo(n)&&n.Ra.set("Unknown"))}function Kx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(t).Y_(e)}function Zk(t,e){t.Va.Ue(e),gl(t).Z_(e)}function Qx(t){t.Va=new rU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gl(t).start(),t.Ra.ua()}function Xx(t){return Lo(t)&&!gl(t).x_()&&t.Ia.size>0}function Lo(t){return we(t).Ea.size===0}function e2(t){t.Va=void 0}async function uz(t){t.Ra.set("Online")}async function dz(t){t.Ia.forEach((e,n)=>{Kx(t,e)})}async function hz(t,e){e2(t),Xx(t)?(t.Ra.ha(e),Qx(t)):t.Ra.set("Unknown")}async function fz(t,e,n){if(t.Ra.set("Online"),e instanceof Vk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){oe(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(t,r)}else if(e instanceof sh?t.Va.Ze(e):e instanceof Lk?t.Va.st(e):t.Va.tt(e),!n.isEqual(xe.min()))try{const r=await Qk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),Zk(i,c);const f=new ti(h.target,c,u,h.sequenceNumber);Kx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){oe(ko,"Failed to raise snapshot:",r),await nf(t,r)}}async function nf(t,e,n){if(!ml(e))throw e;t.Ea.add(1),await Tu(t),t.Ra.set("Offline"),n||(n=()=>Qk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(ko,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ym(t)})}function t2(t,e){return e().catch(n=>nf(t,n,e))}async function vm(t){const e=we(t),n=Pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dx;for(;mz(e);)try{const s=await QU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,pz(e,s)}catch(s){await nf(e,s)}n2(e)&&r2(e)}function mz(t){return Lo(t)&&t.Ta.length<10}function pz(t,e){t.Ta.push(e);const n=Pi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function n2(t){return Lo(t)&&!Pi(t).x_()&&t.Ta.length>0}function r2(t){Pi(t).start()}async function gz(t){Pi(t).ra()}async function yz(t){const e=Pi(t);for(const n of t.Ta)e.ea(n.mutations)}async function vz(t,e,n){const r=t.Ta.shift(),s=Ux.from(r,e,n);await t2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vm(t)}async function xz(t,e){e&&Pi(t).X_&&await async function(r,s){if(function(o){return eU(o)&&o!==G.ABORTED}(s.code)){const i=r.Ta.shift();Pi(r).B_(),await t2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vm(r)}}(t,e),n2(t)&&r2(t)}async function M_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),oe(ko,"RemoteStore received new credentials");const r=Lo(n);n.Ea.add(3),await Tu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ym(n)}async function wz(t,e){const n=we(t);e?(n.Ea.delete(2),await ym(n)):e||(n.Ea.add(2),await Tu(n),n.Ra.set("Unknown"))}function gl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new sz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:uz.bind(null,t),t_:dz.bind(null,t),r_:hz.bind(null,t),H_:fz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xx(t)?Qx(t):t.Ra.set("Unknown")):(await t.ma.stop(),e2(t))})),t.ma}function Pi(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new iz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:gz.bind(null,t),r_:xz.bind(null,t),ta:yz.bind(null,t),na:vz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await vm(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(ko,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Yx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jx(t,e){if(ws("AsyncQueue",`${e}: ${t}`),ml(t))return new ie(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Yl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.ga=new ot(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class nl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new nl(e,n,ba.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _z{constructor(){this.queries=L_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=L_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function L_(){return new Oo(t=>_k(t),dm)}async function s2(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new bz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Jx(o,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Zx(n)}async function i2(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ez(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Zx(n)}function Sz(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Zx(t){t.Ca.forEach(e=>{e.next()})}var Oy,V_;(V_=Oy||(Oy={})).Ma="default",V_.Cache="cache";class o2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Oy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.key=e}}class l2{constructor(e){this.key=e}}class Tz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=Ek(e),this.tu=new ba(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new O_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),v=hm(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;p&&v?p.data.isEqual(v.data)?_!==y&&(r.track({type:3,doc:v}),w=!0):this.su(p,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),w=!0):p&&!v&&(r.track({type:1,doc:p}),w=!0,(c||u)&&(l=!0)),w&&(v?(o=o.add(v),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(v,_){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:w})}};return y(v)-y(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new nl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new l2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new a2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const e0="SyncEngine";class Nz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Cz{constructor(e){this.key=e,this.hu=!1}}class Iz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Oo(l=>_k(l),dm),this.Iu=new Map,this.Eu=new Set,this.du=new ot(he.comparator),this.Au=new Map,this.Ru=new Bx,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kz(t,e,n=!0){const r=m2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await c2(r,e,n,!0),s}async function Az(t,e){const n=m2(t);await c2(n,e,!0,!1)}async function c2(t,e,n,r){const s=await XU(t.localStore,zr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Rz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jk(t.remoteStore,s),l}async function Rz(t,e,n,r,s){t.pu=(f,p,v)=>async function(y,w,b,x){let T=w.view.ru(b);T.Cs&&(T=await A_(y.localStore,w.query,!1).then(({documents:N})=>w.view.ru(N,T)));const A=x&&x.targetChanges.get(w.targetId),j=x&&x.targetMismatches.get(w.targetId)!=null,M=w.view.applyChanges(T,y.isPrimaryClient,A,j);return U_(y,w.targetId,M.au),M.snapshot}(t,f,p,v);const i=await A_(t.localStore,e,!0),o=new Tz(e,i.Qs),l=o.ru(i.documents),c=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);U_(t,n,u.au);const h=new Nz(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Pz(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!dm(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gx(r.remoteStore,s.targetId),Ly(r,s.targetId)}).catch(fl)):(Ly(r,s.targetId),await Dy(r.localStore,s.targetId,!0))}async function jz(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gx(n.remoteStore,r.targetId))}async function Dz(t,e,n){const r=zz(t);try{const s=await function(o,l){const c=we(o),u=We.now(),h=l.reduce((v,_)=>v.add(_.key),Ie());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=bs(),y=Ie();return c.Ns.getEntries(v,h).next(w=>{_=w,_.forEach((b,x)=>{x.isValidDocument()||(y=y.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,_)).next(w=>{f=w;const b=[];for(const x of l){const T=Q9(x,f.get(x.key).overlayedDocument);T!=null&&b.push(new zi(x.key,T,mk(T.value.mapValue),$r.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,b,l)}).next(w=>{p=w;const b=w.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(v,w.batchId,b)})}).then(()=>({batchId:p.batchId,changes:Tk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ot(Ce)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Nu(r,s.changes),await vm(r.remoteStore)}catch(s){const i=Jx(s,"Failed to persist write");n.reject(i)}}async function u2(t,e){const n=we(t);try{const r=await GU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ve(o.hu,14607):s.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))}),await Nu(n,r,e)}catch(r){await fl(r)}}function F_(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Zx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mz(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ot(he.comparator);o=o.insert(i,Qt.newNoDocument(i,xe.min()));const l=Ie().add(i),c=new pm(xe.min(),new Map,new ot(Ce),o,l);await u2(r,c),r.du=r.du.remove(i),r.Au.delete(e),t0(r)}else await Dy(r.localStore,e,!1).then(()=>Ly(r,e,n)).catch(fl)}async function Oz(t,e){const n=we(t),r=e.batch.batchId;try{const s=await qU(n.localStore,e);h2(n,r,null),d2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nu(n,s)}catch(s){await fl(s)}}async function Lz(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ve(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);h2(r,e,n),d2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nu(r,s)}catch(s){await fl(s)}}function d2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function h2(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ly(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||f2(t,r)})}function f2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),t0(t))}function U_(t,e,n){for(const r of n)r instanceof a2?(t.Ru.addReference(r.key,e),Vz(t,r)):r instanceof l2?(oe(e0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||f2(t,r.key)):ge(19791,{wu:r})}function Vz(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(e0,"New document in limbo: "+n),t.Eu.add(r),t0(t))}function t0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(He.fromString(e)),r=t.fu.next();t.Au.set(r,new Cz(n)),t.du=t.du.insert(n,r),Jk(t.remoteStore,new ti(zr(um(n.path)),r,"TargetPurposeLimboResolution",am.ce))}}async function Nu(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Wx.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(u,p=>K.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>K.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!ml(f))throw f;oe(qx,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const v=h.Ms.get(p),_=v.snapshotVersion,y=v.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(p,y)}}}(r.localStore,i))}async function Fz(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){oe(e0,"User change. New user:",e.toKey());const r=await Kk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ie(G.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nu(n,r.Ls)}}function Uz(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function m2(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mz.bind(null,e),e.Pu.H_=Ez.bind(null,e.eventManager),e.Pu.yu=Sz.bind(null,e.eventManager),e}function zz(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lz.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WU(this.persistence,new $U,e.initialUser,this.serializer)}Cu(e){return new Gk(Hx.mi,this.serializer)}Du(e){return new JU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class $z extends rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof tf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CU(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new Gk(r=>tf.mi(r,n),this.serializer)}}class Vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fz.bind(null,this.syncEngine),await wz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _z}()}createDatastore(e){const n=gm(e.databaseInfo.databaseId),r=function(i){return new rz(i)}(e.databaseInfo);return function(i,o,l,c){return new az(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new cz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>F_(this.syncEngine,n,0),function(){return j_.v()?new j_:new ZU}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new Iz(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);oe(ko,"RemoteStore shutting down."),i.Ea.add(5),await Tu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class Bz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Gt.UNAUTHENTICATED,this.clientId=im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{oe(ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Kk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hz(t);oe(ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>M_(e.remoteStore,s)),t._onlineComponents=e}async function Hz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ji,"Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new rf)}}else oe(ji,"Using default OfflineComponentProvider"),await Gp(t,new $z(void 0));return t._offlineComponents}async function g2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ji,"Using user provided OnlineComponentProvider"),await z_(t,t._uninitializedComponentsProvider._online)):(oe(ji,"Using default OnlineComponentProvider"),await z_(t,new Vy))),t._onlineComponents}function Wz(t){return g2(t).then(e=>e.syncEngine)}async function Fy(t){const e=await g2(t),n=e.eventManager;return n.onListen=kz.bind(null,e.syncEngine),n.onUnlisten=Pz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Az.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jz.bind(null,e.syncEngine),n}function qz(t,e,n={}){const r=new vi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new p2({next:p=>{h.Nu(),o.enqueueAndForget(()=>i2(i,f));const v=p.docs.has(l);!v&&p.fromCache?u.reject(new ie(G.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?u.reject(new ie(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new o2(um(l.path),h,{includeMetadataChanges:!0,qa:!0});return s2(i,f)}(await Fy(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firestore.googleapis.com",B_=!0;class H_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v2,this.ssl=B_}else this.host=e.host,this.ssl=e.ssl??B_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TU)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ek;switch(r.type){case"firstParty":return new i9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$_.get(n);r&&(oe("ComponentProvider","Removing Datastore"),$_.delete(n),r.terminate())}(this),Promise.resolve()}}function x2(t,e,n,r={}){var u;t=fr(t,xm);const s=cl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(lI(`https://${l}`),cI("Firestore",!0)),i.host!==v2&&i.host!==l&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ci(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Gt.MOCK_USER;else{h=C3(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Gt(p)}t._authCredentials=new n9(new ZI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_u(n,rt._jsonSchema))return new rt(e,r||null,new he(He.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:gt("string",rt._jsonSchemaVersion),referencePath:gt("string")};class us extends Ss{constructor(e,n,r){super(e,n,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new he(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function n0(t,e,...n){if(t=Pt(t),tk("collection","path",e),t instanceof xm){const r=He.fromString(e,...n);return r_(r),new us(t,null,r)}{if(!(t instanceof rt||t instanceof us))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return r_(r),new us(t.firestore,null,r)}}function ze(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=im.newId()),tk("doc","path",e),t instanceof xm){const r=He.fromString(e,...n);return n_(r),new rt(t,null,new he(r))}{if(!(t instanceof rt||t instanceof us))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return n_(r),new rt(t.firestore,t instanceof us?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="AsyncQueue";class q_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xk(this,"async_queue_retry"),this._c=()=>{const r=qp();r&&oe(W_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;oe(W_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",G_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:G_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function G_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ao extends xm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new q_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}}function w2(t,e){const n=typeof t=="object"?t:fI(),r=typeof t=="string"?t:Qh,s=_x(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=T3("firestore");i&&x2(s,...i)}return s}function wm(t){if(t._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Gz(t),t._firestoreClient}function Gz(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new b9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,y2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Bz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(jt.fromBase64String(e))}catch(n){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:gt("string",Rn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mr._jsonSchemaVersion}}static fromJSON(e){if(_u(e,mr._jsonSchema))return new mr(e.latitude,e.longitude)}}mr._jsonSchemaVersion="firestore/geoPoint/1.0",mr._jsonSchema={type:gt("string",mr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pr(e.vectorValues);throw new ie(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:gt("string",pr._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=/^__.*__$/;class Qz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class b2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class bm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_2(this.Ac)&&Kz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gm(e)}Cc(e,n,r,s=!1){return new bm({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r0(t){const e=t._freezeSettings(),n=gm(t._databaseId);return new Xz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yz(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);o0("Data must be an object, but it was:",o,r);const l=E2(r,o);let c,u;if(i.merge)c=new jn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Uy(e,f,n);if(!o.contains(p))throw new ie(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);T2(h,p)||h.push(p)}c=new jn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Qz(new vn(l),c,u)}class _m extends yl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _m}}function Jz(t,e,n){return new bm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class s0 extends yl{_toFieldTransform(e){return new Pk(e.path,new Xc)}isEqual(e){return e instanceof s0}}class i0 extends yl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Jz(this,e,!0),r=this.vc.map(i=>vl(i,n)),s=new el(r);return new Pk(e.path,s)}isEqual(e){return e instanceof i0&&Ci(this.vc,e.vc)}}function Zz(t,e,n,r){const s=t.Cc(1,e,n);o0("Data must be an object, but it was:",s,r);const i=[],o=vn.empty();Ui(r,(c,u)=>{const h=a0(e,c,n);u=Pt(u);const f=s.yc(h);if(u instanceof _m)i.push(h);else{const p=vl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new jn(i);return new b2(o,l,s.fieldTransforms)}function e8(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Uy(e,r,n)],c=[s];if(i.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Uy(e,i[p])),c.push(i[p+1]);const u=[],h=vn.empty();for(let p=l.length-1;p>=0;--p)if(!T2(u,l[p])){const v=l[p];let _=c[p];_=Pt(_);const y=o.yc(v);if(_ instanceof _m)u.push(v);else{const w=vl(_,y);w!=null&&(u.push(v),h.set(v,w))}}const f=new jn(u);return new b2(h,f,o.fieldTransforms)}function t8(t,e,n,r=!1){return vl(n,t.Cc(r?4:3,e))}function vl(t,e){if(S2(t=Pt(t)))return o0("Unsupported field value:",e,t),E2(t,e);if(t instanceof yl)return function(r,s){if(!_2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=vl(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return B9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=We.fromDate(r);return{timestampValue:ef(s.serializer,i)}}if(r instanceof We){const i=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,i)}}if(r instanceof mr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:Fk(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$x(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pr)return function(o,l){return{mapValue:{fields:{[dk]:{stringValue:fk},[Xh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Fx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${om(r)}`)}(t,e)}function E2(t,e){const n={};return ik(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const i=vl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function S2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof mr||t instanceof Rn||t instanceof rt||t instanceof yl||t instanceof pr)}function o0(t,e,n){if(!S2(n)||!rk(n)){const r=om(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Uy(t,e,n){if((e=Pt(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return a0(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const n8=new RegExp("[~\\*/\\[\\]]");function a0(t,e,n){if(e.search(n8)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ie(G.INVALID_ARGUMENT,l+t+c)}function T2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(l0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r8 extends N2{data(){return super.data()}}function l0(t,e){return typeof e=="string"?a0(t,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}class Em extends c0{}function u0(t,e,...n){let r=[];e instanceof c0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Tm).length,l=i.filter(c=>c instanceof Sm).length;if(o>1||o>0&&l>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sm extends Em{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sm(e,n,r)}_apply(e){const n=this._parse(e);return I2(e._query,n),new Ss(e.firestore,e.converter,ky(e._query,n))}_parse(e){const n=r0(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X_(f,h);const _=[];for(const y of f)_.push(Q_(c,i,y));p={arrayValue:{values:_}}}else p=Q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X_(f,h),p=t8(l,o,f,h==="in"||h==="not-in");return pt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Tm extends c0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)I2(o,c),o=ky(o,c)}(e._query,n),new Ss(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nm extends Em{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qc(i,o)}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new pl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function d0(t,e="asc"){const n=e,r=l0("orderBy",t);return Nm._create(r,n)}class Cm extends Em{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Cm(e,n,r)}_apply(e){return new Ss(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function C2(t){return Cm._create("limit",t,"F")}function Q_(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bk(e)&&n.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!he.isDocumentKey(r))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return d_(t,new he(r))}if(n instanceof rt)return d_(t,n._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(n)}.`)}function X_(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k2{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>dt(o.doubleValue));return new pr(n)}convertGeoPoint(e){return new mr(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const n=ki(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Ve(Wk(r),9688,{name:e});const s=new Ya(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||ws(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xi extends N2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(l0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:gt("string",xi._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class yc extends xi{data(e={}){return super.data(e)}}class vo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ca(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ca(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ca(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:o8(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){t=fr(t,rt);const e=fr(t.firestore,Ao);return qz(wm(e),t._key).then(n=>P2(e,t,n))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:gt("string",vo._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class A2 extends k2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function Vt(t,e,n){t=fr(t,rt);const r=fr(t.firestore,Ao),s=i8(t.converter,e,n);return h0(r,[Yz(r0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$r.none())])}function R2(t,e,n,...r){t=fr(t,rt);const s=fr(t.firestore,Ao),i=r0(s);let o;return o=typeof(e=Pt(e))=="string"||e instanceof Cu?e8(i,"updateDoc",t._key,e,n,r):Zz(i,"updateDoc",t._key,e),h0(s,[o.toMutation(t._key,$r.exists(!0))])}function Ts(t,...e){var c,u,h;t=Pt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||K_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(K_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof rt)o=fr(t.firestore,Ao),l=um(t._key.path),i={next:f=>{e[r]&&e[r](P2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=fr(t,Ss);o=fr(f.firestore,Ao),l=f._query;const p=new A2(o);i={next:v=>{e[r]&&e[r](new vo(o,p,f,v))},error:e[r+1],complete:e[r+2]},s8(t._query)}return function(p,v,_,y){const w=new p2(y),b=new o2(v,w,_);return p.asyncQueue.enqueueAndForget(async()=>s2(await Fy(p),b)),()=>{w.Nu(),p.asyncQueue.enqueueAndForget(async()=>i2(await Fy(p),b))}}(wm(o),l,s,i)}function h0(t,e){return function(r,s){const i=new vi;return r.asyncQueue.enqueueAndForget(async()=>Dz(await Wz(r),s,i)),i.promise}(wm(t),e)}function P2(t,e,n){const r=n.docs.get(e._key),s=new A2(t);return new xi(t,s,e._key,r,new ca(n.hasPendingWrites,n.fromCache),e.converter)}function Im(){return new s0("serverTimestamp")}function j2(...t){return new i0("arrayUnion",t)}(function(e,n=!0){(function(s){hl=s})(ul),Ka(new To("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ao(new r9(r.getProvider("auth-internal")),new o9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gi(Jb,Zb,e),gi(Jb,Zb,"esm2020")})();const Y_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:k2,Bytes:Rn,CollectionReference:us,DocumentReference:rt,DocumentSnapshot:xi,FieldPath:Cu,FieldValue:yl,Firestore:Ao,FirestoreError:ie,GeoPoint:mr,Query:Ss,QueryCompositeFilterConstraint:Tm,QueryConstraint:Em,QueryDocumentSnapshot:yc,QueryFieldFilterConstraint:Sm,QueryLimitConstraint:Cm,QueryOrderByConstraint:Nm,QuerySnapshot:vo,SnapshotMetadata:ca,Timestamp:We,VectorValue:pr,_AutoId:im,_ByteString:jt,_DatabaseId:Ya,_DocumentKey:he,_EmptyAuthCredentialsProvider:ek,_FieldPath:At,_cast:fr,_logWarn:Io,_validateIsNotUsedTogether:nk,arrayUnion:j2,collection:n0,connectFirestoreEmulator:x2,doc:ze,ensureFirestoreConfigured:wm,executeWrite:h0,getDoc:Gr,getFirestore:w2,limit:C2,onSnapshot:Ts,orderBy:d0,query:u0,serverTimestamp:Im,setDoc:Vt,updateDoc:R2},Symbol.toStringTag,{value:"Module"})),a8={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},f0=hI(a8),Xo=JF(f0),Le=w2(f0),Kr=new yn;Kr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Kr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Kr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Kr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Kr.addScope("https://www.googleapis.com/auth/calendar");Kr.addScope("https://www.googleapis.com/auth/gmail.send");Kr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const J_=Object.freeze(Object.defineProperty({__proto__:null,app:f0,auth:Xo,db:Le,googleProvider:Kr},Symbol.toStringTag,{value:"Module"})),D2=m.createContext(void 0);function l8({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>sessionStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>zV(Xo,w=>{n(w),w||(h(null),s(!1))}),[]),m.useEffect(()=>{async function y(){if(!e||!i){if(e&&!i){const w=sessionStorage.getItem("google_access_token");if(w){o(w);return}}e||s(!1);return}try{s(!0);const w=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let b=!1;if(w.ok){const A=await w.json();A.courses&&A.courses.length>0&&(b=!0)}if(b){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const x=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let T=!1;if(x.ok){const A=await x.json();A.courses&&A.courses.length>0&&(T=!0)}T?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(w){console.error("Role detection failed:",w),h("no_access")}finally{s(!1)}}y()},[e,i]);const f=async()=>{try{c(null),Kr.setCustomParameters({prompt:"consent",access_type:"offline"});const y=await zp(Xo,Kr),w=yn.credentialFromResult(y);w!=null&&w.accessToken&&(o(w.accessToken),sessionStorage.setItem("google_access_token",w.accessToken))}catch(y){const w=y instanceof Error?y.message:"Failed to sign in";c(w),console.error("Sign in error:",y)}},p=async()=>{try{c(null);const y=new yn;y.addScope("https://www.googleapis.com/auth/gmail.send"),y.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const w=await zp(Xo,y),b=yn.credentialFromResult(w),x=w._tokenResponse;if(b!=null&&b.accessToken&&(o(b.accessToken),sessionStorage.setItem("google_access_token",b.accessToken)),x!=null&&x.oauthRefreshToken){const{doc:T,setDoc:A,serverTimestamp:j}=await wd(async()=>{const{doc:N,setDoc:S,serverTimestamp:C}=await Promise.resolve().then(()=>Y_);return{doc:N,setDoc:S,serverTimestamp:C}},void 0),{db:M}=await wd(async()=>{const{db:N}=await Promise.resolve().then(()=>J_);return{db:N}},void 0);if(e&&x.oauthRefreshToken)return await A(T(M,"users",e.uid,"private_tokens","google"),{refreshToken:x.oauthRefreshToken,updatedAt:j()}),!0}return!!(b!=null&&b.accessToken)}catch(y){const w=y instanceof Error?y.message:"Failed to get Gmail permissions";return c(w),console.error("Permission error:",y),!1}},v=async()=>{try{c(null);const y=new yn;y.addScope("https://www.googleapis.com/auth/calendar.events"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const w=await zp(Xo,y),b=yn.credentialFromResult(w),x=w._tokenResponse;if(b!=null&&b.accessToken&&(o(b.accessToken),sessionStorage.setItem("google_access_token",b.accessToken)),e&&(x!=null&&x.oauthRefreshToken)){const{doc:T,setDoc:A,serverTimestamp:j}=await wd(async()=>{const{doc:N,setDoc:S,serverTimestamp:C}=await Promise.resolve().then(()=>Y_);return{doc:N,setDoc:S,serverTimestamp:C}},void 0),{db:M}=await wd(async()=>{const{db:N}=await Promise.resolve().then(()=>J_);return{db:N}},void 0);return await A(T(M,"users",e.uid,"private_tokens","calendar"),{refreshToken:x.oauthRefreshToken,updatedAt:j(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(y){const w=y instanceof Error?y.message:"Failed to get Calendar permissions";return c(w),console.error("Permission error:",y),!1}},_=async()=>{try{await $V(Xo),o(null),h(null),sessionStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(y){const w=y instanceof Error?y.message:"Failed to sign out";c(w)}};return a.jsx(D2.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:v,signOut:_,error:l},children:t})}function at(){const t=m.useContext(D2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const M2=m.createContext(void 0);function c8({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(M2.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function m0(){const t=m.useContext(M2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}async function u8(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function d8(t,e,n,r){const s=ze(Le,"users",n,"settings","calendar"),i=await Gr(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const v=ze(Le,"users",n,"calendarEvents",c.id),_=await Gr(v),y="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let w;if(_.exists()){const{calendarEventId:b}=_.data();w=await fetch(`${y}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(w=await fetch(y,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),w.ok){const b=await w.json();await Vt(v,{calendarEventId:b.id,assignmentId:c.id,updatedAt:Im()})}if(!w.ok&&w.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(w){console.warn(`Failed to sync assignment ${c.id} to calendar`,w)}}}const O2=m.createContext(void 0);function h8(){return Math.random().toString(36).substring(2,15)}async function of(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e;console.log(`Fetching: ${c.substring(0,100)}...`);const u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,v={};try{const _=await u.json();v=_,p=((o=_.error)==null?void 0:o.message)||_.message||p,console.error("API Error Response:",_)}catch{const y=await u.text().catch(()=>"");console.error("API Error (non-JSON):",y)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const Z_=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function f8(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%Z_.length;return Z_[n]}async function m8(t,e){const r=await of(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:i.id,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s,color:f8(i.id)}))}async function p8(t,e,n,r){var l,c;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await of(t,s,u=>u.courseWork||[],u=>u.nextPageToken),o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const w=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await of(t,w,x=>x.studentSubmissions||[],x=>x.nextPageToken))[0]||null}catch(w){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,w)}let f=null,p=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((l=u.dueTime)==null?void 0:l.hours)||23,((c=u.dueTime)==null?void 0:c.minutes)||59).toISOString(),u.dueTime&&(p=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const v=new Date;let _="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?_="graded":h.state==="TURNED_IN"||h.turnInTime?_="submitted":h.state==="CREATED"&&(_=f&&new Date(f)<v?"overdue":"backlog"):f&&new Date(f)<v?_="overdue":_="backlog";const y={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:e,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:p,maxPoints:u.maxPoints||null,systemStatus:_,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)??(h==null?void 0:h.assignedGrade)??(h==null?void 0:h.draftGrade)??null,alternateLink:u.alternateLink||null,createdAt:u.creationTime||v.toISOString(),lastSyncedAt:v.toISOString()};o.push(y)}return o}async function g8(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await of(t,s,l=>l.courseWorkMaterial||[],l=>l.nextPageToken),o=new Date().toISOString();return i.map(l=>({id:`mat-${l.id}`,uniqueId:`${e}-${l.id}`,userId:r,courseId:e,courseName:n,title:l.title,description:l.description||null,alternateLink:l.alternateLink||null,materials:l.materials||null,createdAt:l.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function y8({children:t}){const{user:e,accessToken:n}=at(),[r,s]=m.useState(()=>{const U=sessionStorage.getItem("classroom_courses");return U?JSON.parse(U):[]}),[i,o]=m.useState(()=>{const U=sessionStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[l,c]=m.useState(()=>{const U=sessionStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[u,h]=m.useState(()=>{const U=sessionStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[f,p]=m.useState(()=>!sessionStorage.getItem("classroom_courses")),[v,_]=m.useState(!1),[y,w]=m.useState(()=>{const U=sessionStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[b,x]=m.useState(null),[T,A]=m.useState(!1),{toast:j}=Mo(),M=m.useCallback(async(U=!1)=>{var O;if(!e){x("Please sign in with Google to sync your Classroom data"),p(!1);return}let H=n;if(!H)try{const L=await e.getIdToken();console.log("Got ID token, but need OAuth access token for Classroom API"),x("Access token expired. Please sign out and sign in again to refresh your token."),p(!1);return}catch{x("Unable to authenticate. Please sign in again."),p(!1);return}_(!0),i.length===0&&p(!0),x(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!H});const L=await m8(H,e.uid);if(console.log(`Fetched ${L.length} courses`),L.length===0){x("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),s([]),o([]),w(new Date),_(!1),p(!1);return}const z=[],F=[];for(const X of L)try{console.log(`Fetching data for course: ${X.name}`);const[Y,J]=await Promise.all([p8(H,X.classroomId,X.name,e.uid),g8(H,X.classroomId,X.name,e.uid)]);console.log(`Found ${Y.length} assignments and ${J.length} materials for ${X.name}`),z.push(...Y),F.push(...J)}catch(Y){console.warn(`Failed to fetch data for course ${X.name}:`,Y)}console.log(`Sync complete: ${L.length} courses, ${z.length} assignments, ${F.length} materials`),s(L),o(z),c(F),w(new Date),p(!1);try{await d8(z,H,e.uid,j)}catch(X){console.error("Calendar sync failed:",X)}try{const X=ze(Le,"users",e.uid,"settings","notifications"),Y=await Gr(X);if(Y.exists()&&Y.data().enabled&&Y.data().notifyDueSoon){const le=ze(Le,"users",e.uid,"notifications","digest"),ee=await Gr(le),q=ee.exists()?(O=ee.data().lastSent)==null?void 0:O.toDate():null,te=new Date;if(!(q&&q.getDate()===te.getDate()&&q.getMonth()===te.getMonth()&&q.getFullYear()===te.getFullYear())){const re=new Date(te);re.setDate(re.getDate()+1),re.setHours(23,59,59,999);const fe=z.filter(de=>{if(!de.dueDate||de.systemStatus==="submitted"||de.systemStatus==="graded")return!1;const Ae=new Date(de.dueDate);return Ae>=te&&Ae<=re});if(fe.length>0&&e.email){const de=fe.map(je=>`<li><strong>${je.title}</strong> <span style="color:#666">(${je.courseName})</span><br>Due: ${new Date(je.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),Ae=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;">Daily Digest</h2>
                           <p>You have <strong>${fe.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${de}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await u8(e.email,`Student Sphere: ${fe.length} Tasks Due Soon`,Ae,H),await Vt(le,{lastSent:Im()}),console.log("Daily digest email delivered.")}}}}catch(X){console.warn("Notification sync failed (non-critical):",X)}U||j({title:"Sync Complete",description:`Successfully synced ${L.length} courses, ${z.length} assignments, and updated Google Calendar.`})}catch(L){console.error("Sync error details:",L);let z="Failed to sync";if(L!=null&&L.message){const F=L.message.toLowerCase();F.includes("401")||F.includes("unauthorized")||F.includes("invalid_token")||F.includes("token expired")?z="Authentication failed. Your access token may have expired. Please sign out and sign in again.":F.includes("403")||F.includes("forbidden")||F.includes("permission denied")?z="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":F.includes("quota")||F.includes("rate")||F.includes("429")?z="API quota exceeded. Please try again later.":F.includes("cors")||F.includes("network")?z="Network error. Please check your internet connection and try again.":z=`Sync failed: ${L.message}`}else L instanceof TypeError&&L.message.includes("fetch")&&(z="Network error. Please check your internet connection.");x(z),console.error("Sync error:",L),U||j({variant:"destructive",title:"Sync Failed",description:z})}finally{_(!1),p(!1)}},[e,n]);m.useEffect(()=>{if(!e){A(!1),p(!1);return}if(!n){p(!1);return}!T&&!v&&(A(!0),M(!0))},[e,n,T,r.length,i.length,v]),m.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(r))},[r]),m.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(l))},[l]),m.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(u.entries())))},[u]),m.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(i))},[i]),m.useEffect(()=>{y?sessionStorage.setItem("classroom_lastSyncedAt",y.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[y]);const N=m.useCallback((U,H)=>{o(O=>O.map(L=>L.id===U?{...L,userStatus:H}:L))},[]),S=m.useCallback((U,H,O=!1)=>{const L={id:h8(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:H,isImportant:O,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h(z=>{const F=new Map(z),X=F.get(U)||[];return F.set(U,[...X,L]),F})},[e]),C=m.useCallback((U,H,O)=>{h(L=>{const z=new Map(L);for(const[F,X]of Array.from(z.entries())){const Y=X.findIndex(J=>J.id===U);if(Y!==-1){const J=[...X];J[Y]={...J[Y],content:H,isImportant:O??J[Y].isImportant,updatedAt:new Date().toISOString()},z.set(F,J);break}}return z})},[]),I=m.useCallback((U,H)=>{h(O=>{const L=new Map(O),z=L.get(H)||[];return L.set(H,z.filter(F=>F.id!==U)),L})},[]),k=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return i.forEach(H=>{const O=H.userStatus==="in_progress"?"in_progress":H.systemStatus,L=U.find(z=>z.id===O);L&&L.assignments.push(H)}),U.forEach(H=>{H.assignments.sort((O,L)=>O.dueDate?L.dueDate?new Date(O.dueDate).getTime()-new Date(L.dueDate).getTime():-1:1)}),U},[i]),D=m.useCallback(()=>{const U=new Date,H=new Date(U);H.setDate(H.getDate()+3);const O=new Date(U);O.setDate(O.getDate()+7);const L=i.filter(q=>q.systemStatus!=="graded"&&q.systemStatus!=="submitted"),z=i.filter(q=>{if(!q.dueDate||q.systemStatus==="graded"||q.systemStatus==="submitted")return!1;const te=new Date(q.dueDate);return te>=U&&te<=H}),F=i.filter(q=>{if(!q.dueDate||q.systemStatus==="graded"||q.systemStatus==="submitted")return!1;const te=new Date(q.dueDate);return te>=U&&te<=O}),X=i.filter(q=>q.systemStatus==="overdue"),Y=[],J=new Date,le=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let q=0;q<7;q++){const te=new Date(J);te.setDate(te.getDate()+q);const pe=te.toISOString().split("T")[0],re=i.filter(fe=>fe.dueDate?fe.dueDate.split("T")[0]===pe:!1).length;Y.push({day:le[te.getDay()],count:re,isToday:q===0})}const ee=[...L].filter(q=>q.dueDate).sort((q,te)=>new Date(q.dueDate).getTime()-new Date(te.dueDate).getTime()).slice(0,5);return{totalActive:L.length,upcoming3Days:z.length,upcoming7Days:F.length,overdue:X.length,weeklyWorkload:Y,nextActions:ee}},[i]),P=m.useCallback(U=>{let H=[...i];U!=null&&U.courseId&&(H=H.filter(F=>F.courseId===U.courseId)),U!=null&&U.status&&(H=H.filter(F=>F.systemStatus===U.status)),H.sort((F,X)=>F.dueDate?X.dueDate?new Date(F.dueDate).getTime()-new Date(X.dueDate).getTime():-1:1);const O=new Map,L=new Date,z=new Date(L);return z.setDate(z.getDate()+1),H.forEach(F=>{if(!F.dueDate)return;const X=F.dueDate.split("T")[0],Y=new Date(F.dueDate);let J;X===L.toISOString().split("T")[0]?J="Today":X===z.toISOString().split("T")[0]?J="Tomorrow":J=Y.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),O.has(X)||O.set(X,{date:X,dateLabel:J,assignments:[]}),O.get(X).assignments.push(F)}),Array.from(O.values())},[i]),B=m.useCallback(U=>i.find(H=>H.id===U),[i]),se=m.useCallback(U=>u.get(U)||[],[u]);return a.jsx(O2.Provider,{value:{courses:r,assignments:i,notes:u,isLoading:f,isSyncing:v,lastSyncedAt:y,error:b,syncClassroom:M,updateAssignmentStatus:N,addNote:S,updateNote:C,deleteNote:I,getPipelineColumns:k,getDashboardMetrics:D,getTimelineGroups:P,getAssignmentById:B,getNotesForAssignment:se,materials:l},children:t})}function Xr(){const t=m.useContext(O2);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Kp="focusScope.autoFocusOnMount",Qp="focusScope.autoFocusOnUnmount",eE={bubbles:!1,cancelable:!0},v8="FocusScope",p0=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=sn(s),h=sn(i),f=m.useRef(null),p=Ue(e,y=>c(y)),v=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(T){if(v.paused||!l)return;const A=T.target;l.contains(A)?f.current=A:Fs(f.current,{select:!0})},w=function(T){if(v.paused||!l)return;const A=T.relatedTarget;A!==null&&(l.contains(A)||Fs(f.current,{select:!0}))},b=function(T){if(document.activeElement===document.body)for(const j of T)j.removedNodes.length>0&&Fs(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),x.disconnect()}}},[r,l,v.paused]),m.useEffect(()=>{if(l){nE.add(v);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(Kp,eE);l.addEventListener(Kp,u),l.dispatchEvent(b),b.defaultPrevented||(x8(S8(L2(l)),{select:!0}),document.activeElement===y&&Fs(l))}return()=>{l.removeEventListener(Kp,u),setTimeout(()=>{const b=new CustomEvent(Qp,eE);l.addEventListener(Qp,h),l.dispatchEvent(b),b.defaultPrevented||Fs(y??document.body,{select:!0}),l.removeEventListener(Qp,h),nE.remove(v)},0)}}},[l,u,h,v]);const _=m.useCallback(y=>{if(!n&&!r||v.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(w&&b){const x=y.currentTarget,[T,A]=w8(x);T&&A?!y.shiftKey&&b===A?(y.preventDefault(),n&&Fs(T,{select:!0})):y.shiftKey&&b===T&&(y.preventDefault(),n&&Fs(A,{select:!0})):b===x&&y.preventDefault()}},[n,r,v.paused]);return a.jsx(ve.div,{tabIndex:-1,...o,ref:p,onKeyDown:_})});p0.displayName=v8;function x8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Fs(r,{select:e}),document.activeElement!==n)return}function w8(t){const e=L2(t),n=tE(e,t),r=tE(e.reverse(),t);return[n,r]}function L2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tE(t,e){for(const n of t)if(!b8(n,{upTo:e}))return n}function b8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _8(t){return t instanceof HTMLInputElement&&"select"in t}function Fs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&_8(t)&&e&&t.select()}}var nE=E8();function E8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=rE(t,e),t.unshift(e)},remove(e){var n;t=rE(t,e),(n=t[0])==null||n.resume()}}}function rE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function S8(t){return t.filter(e=>e.tagName!=="A")}var Xp=0;function V2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sE()),document.body.insertAdjacentElement("beforeend",t[1]??sE()),Xp++,()=>{Xp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xp--}},[])}function sE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Or=function(){return Or=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Or.apply(this,arguments)};function F2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function T8(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var ih="right-scroll-bar-position",oh="width-before-scroll-bar",N8="with-scroll-bars-hidden",C8="--removed-body-scroll-bar-size";function Yp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function I8(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var k8=typeof window<"u"?m.useLayoutEffect:m.useEffect,iE=new WeakMap;function A8(t,e){var n=I8(null,function(r){return t.forEach(function(s){return Yp(s,r)})});return k8(function(){var r=iE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Yp(l,null)}),i.forEach(function(l){s.has(l)||Yp(l,o)})}iE.set(n,t)},[t]),n}function R8(t){return t}function P8(t,e){e===void 0&&(e=R8);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function j8(t){t===void 0&&(t={});var e=P8(null);return e.options=Or({async:!0,ssr:!1},t),e}var U2=function(t){var e=t.sideCar,n=F2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Or({},n))};U2.isSideCarExport=!0;function D8(t,e){return t.useMedium(e),U2}var z2=j8(),Jp=function(){},km=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Jp,onWheelCapture:Jp,onTouchMoveCapture:Jp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,v=t.noIsolation,_=t.inert,y=t.allowPinchZoom,w=t.as,b=w===void 0?"div":w,x=t.gapMode,T=F2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,j=A8([n,e]),M=Or(Or({},T),s);return m.createElement(m.Fragment,null,h&&m.createElement(A,{sideCar:z2,removeScrollBar:u,shards:f,noIsolation:v,inert:_,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:x}),o?m.cloneElement(m.Children.only(l),Or(Or({},M),{ref:j})):m.createElement(b,Or({},M,{className:c,ref:j}),l))});km.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};km.classNames={fullWidth:oh,zeroRight:ih};var M8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function O8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=M8();return e&&t.setAttribute("nonce",e),t}function L8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function V8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var F8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=O8())&&(L8(e,n),V8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},U8=function(){var t=F8();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},$2=function(){var t=U8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},z8={left:0,top:0,right:0,gap:0},Zp=function(t){return parseInt(t||"",10)||0},$8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Zp(n),Zp(r),Zp(s)]},B8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return z8;var e=$8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},H8=$2(),_a="data-scroll-locked",W8=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(N8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(_a,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ih,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(oh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ih," .").concat(ih,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(oh," .").concat(oh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_a,`] {
    `).concat(C8,": ").concat(l,`px;
  }
`)},oE=function(){var t=parseInt(document.body.getAttribute(_a)||"0",10);return isFinite(t)?t:0},q8=function(){m.useEffect(function(){return document.body.setAttribute(_a,(oE()+1).toString()),function(){var t=oE()-1;t<=0?document.body.removeAttribute(_a):document.body.setAttribute(_a,t.toString())}},[])},G8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;q8();var i=m.useMemo(function(){return B8(s)},[s]);return m.createElement(H8,{styles:W8(i,!e,s,n?"":"!important")})},zy=!1;if(typeof window<"u")try{var Cd=Object.defineProperty({},"passive",{get:function(){return zy=!0,!0}});window.addEventListener("test",Cd,Cd),window.removeEventListener("test",Cd,Cd)}catch{zy=!1}var Bo=zy?{passive:!1}:!1,K8=function(t){return t.tagName==="TEXTAREA"},B2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!K8(t)&&n[e]==="visible")},Q8=function(t){return B2(t,"overflowY")},X8=function(t){return B2(t,"overflowX")},aE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=H2(t,r);if(s){var i=W2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Y8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},J8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},H2=function(t,e){return t==="v"?Q8(e):X8(e)},W2=function(t,e){return t==="v"?Y8(e):J8(e)},Z8=function(t,e){return t==="h"&&e==="rtl"?-1:1},e7=function(t,e,n,r,s){var i=Z8(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var v=W2(t,l),_=v[0],y=v[1],w=v[2],b=y-w-i*_;(_||b)&&H2(t,l)&&(f+=b,p+=_),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},Id=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},lE=function(t){return[t.deltaX,t.deltaY]},cE=function(t){return t&&"current"in t?t.current:t},t7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},r7=0,Ho=[];function s7(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(r7++)[0],i=m.useState($2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=T8([t.lockRef.current],(t.shards||[]).map(cE),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Id(y),x=n.current,T="deltaX"in y?y.deltaX:x[0]-b[0],A="deltaY"in y?y.deltaY:x[1]-b[1],j,M=y.target,N=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in y&&N==="h"&&M.type==="range")return!1;var S=aE(N,M);if(!S)return!0;if(S?j=N:(j=N==="v"?"h":"v",S=aE(N,M)),!S)return!1;if(!r.current&&"changedTouches"in y&&(T||A)&&(r.current=j),!j)return!0;var C=r.current||j;return e7(C,w,y,C==="h"?T:A,!0)},[]),c=m.useCallback(function(y){var w=y;if(!(!Ho.length||Ho[Ho.length-1]!==i)){var b="deltaY"in w?lE(w):Id(w),x=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&t7(j.delta,b)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var T=(o.current.shards||[]).map(cE).filter(Boolean).filter(function(j){return j.contains(w.target)}),A=T.length>0?l(w,T[0]):!o.current.noIsolation;A&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(y,w,b,x){var T={name:y,delta:w,target:b,should:x,shadowParent:i7(b)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(A){return A!==T})},1)},[]),h=m.useCallback(function(y){n.current=Id(y),r.current=void 0},[]),f=m.useCallback(function(y){u(y.type,lE(y),y.target,l(y,t.lockRef.current))},[]),p=m.useCallback(function(y){u(y.type,Id(y),y.target,l(y,t.lockRef.current))},[]);m.useEffect(function(){return Ho.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Bo),document.addEventListener("touchmove",c,Bo),document.addEventListener("touchstart",h,Bo),function(){Ho=Ho.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Bo),document.removeEventListener("touchmove",c,Bo),document.removeEventListener("touchstart",h,Bo)}},[]);var v=t.removeScrollBar,_=t.inert;return m.createElement(m.Fragment,null,_?m.createElement(i,{styles:n7(s)}):null,v?m.createElement(G8,{gapMode:t.gapMode}):null)}function i7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const o7=D8(z2,s7);var g0=m.forwardRef(function(t,e){return m.createElement(km,Or({},t,{ref:e,sideCar:o7}))});g0.classNames=km.classNames;var a7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Wo=new WeakMap,kd=new WeakMap,Ad={},eg=0,q2=function(t){return t&&(t.host||q2(t.parentNode))},l7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=q2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},c7=function(t,e,n,r){var s=l7(e,Array.isArray(t)?t:[t]);Ad[n]||(Ad[n]=new WeakMap);var i=Ad[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),_=v!==null&&v!=="false",y=(Wo.get(p)||0)+1,w=(i.get(p)||0)+1;Wo.set(p,y),i.set(p,w),o.push(p),y===1&&_&&kd.set(p,!0),w===1&&p.setAttribute(n,"true"),_||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),eg++,function(){o.forEach(function(f){var p=Wo.get(f)-1,v=i.get(f)-1;Wo.set(f,p),i.set(f,v),p||(kd.has(f)||f.removeAttribute(r),kd.delete(f)),v||f.removeAttribute(n)}),eg--,eg||(Wo=new WeakMap,Wo=new WeakMap,kd=new WeakMap,Ad={})}},G2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=a7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),c7(r,s,n,"aria-hidden")):function(){return null}},y0="Dialog",[K2,Q2]=Yn(y0),[u7,_r]=K2(y0),X2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=_i({prop:r,defaultProp:s,onChange:i});return a.jsx(u7,{scope:e,triggerRef:l,contentRef:c,contentId:cs(),titleId:cs(),descriptionId:cs(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};X2.displayName=y0;var Y2="DialogTrigger",J2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=_r(Y2,n),i=Ue(e,s.triggerRef);return a.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":w0(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});J2.displayName=Y2;var v0="DialogPortal",[d7,Z2]=K2(v0,{forceMount:void 0}),eA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=_r(v0,e);return a.jsx(d7,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(Vi,{present:n||i.open,children:a.jsx(du,{asChild:!0,container:s,children:o})}))})};eA.displayName=v0;var af="DialogOverlay",tA=m.forwardRef((t,e)=>{const n=Z2(af,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=_r(af,t.__scopeDialog);return i.modal?a.jsx(Vi,{present:r||i.open,children:a.jsx(f7,{...s,ref:e})}):null});tA.displayName=af;var h7=Ba("DialogOverlay.RemoveScroll"),f7=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=_r(af,n);return a.jsx(g0,{as:h7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ve.div,{"data-state":w0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ro="DialogContent",nA=m.forwardRef((t,e)=>{const n=Z2(Ro,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=_r(Ro,t.__scopeDialog);return a.jsx(Vi,{present:r||i.open,children:i.modal?a.jsx(m7,{...s,ref:e}):a.jsx(p7,{...s,ref:e})})});nA.displayName=Ro;var m7=m.forwardRef((t,e)=>{const n=_r(Ro,t.__scopeDialog),r=m.useRef(null),s=Ue(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return G2(i)},[]),a.jsx(rA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),p7=m.forwardRef((t,e)=>{const n=_r(Ro,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(rA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),rA=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=_r(Ro,n),c=m.useRef(null),u=Ue(e,c);return V2(),a.jsxs(a.Fragment,{children:[a.jsx(p0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(uu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":w0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(y7,{titleId:l.titleId}),a.jsx(x7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),x0="DialogTitle",sA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=_r(x0,n);return a.jsx(ve.h2,{id:s.titleId,...r,ref:e})});sA.displayName=x0;var iA="DialogDescription",oA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=_r(iA,n);return a.jsx(ve.p,{id:s.descriptionId,...r,ref:e})});oA.displayName=iA;var aA="DialogClose",lA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=_r(aA,n);return a.jsx(ve.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});lA.displayName=aA;function w0(t){return t?"open":"closed"}var cA="DialogTitleWarning",[g7,uA]=WM(cA,{contentName:Ro,titleName:x0,docsSlug:"dialog"}),y7=({titleId:t})=>{const e=uA(cA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},v7="DialogDescriptionWarning",x7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uA(v7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},b0=X2,w7=J2,_0=eA,Iu=tA,ku=nA,Au=sA,Ru=oA,Am=lA,dA="AlertDialog",[b7,uq]=Yn(dA,[Q2]),Ns=Q2(),hA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ns(e);return a.jsx(b0,{...r,...n,modal:!0})};hA.displayName=dA;var _7="AlertDialogTrigger",fA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ns(n);return a.jsx(w7,{...s,...r,ref:e})});fA.displayName=_7;var E7="AlertDialogPortal",mA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ns(e);return a.jsx(_0,{...r,...n})};mA.displayName=E7;var S7="AlertDialogOverlay",pA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ns(n);return a.jsx(Iu,{...s,...r,ref:e})});pA.displayName=S7;var Ea="AlertDialogContent",[T7,N7]=b7(Ea),C7=TN("AlertDialogContent"),gA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Ns(n),o=m.useRef(null),l=Ue(e,o),c=m.useRef(null);return a.jsx(g7,{contentName:Ea,titleName:yA,docsSlug:"alert-dialog",children:a.jsx(T7,{scope:n,cancelRef:c,children:a.jsxs(ku,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(C7,{children:r}),a.jsx(k7,{contentRef:o})]})})})});gA.displayName=Ea;var yA="AlertDialogTitle",vA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ns(n);return a.jsx(Au,{...s,...r,ref:e})});vA.displayName=yA;var xA="AlertDialogDescription",wA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ns(n);return a.jsx(Ru,{...s,...r,ref:e})});wA.displayName=xA;var I7="AlertDialogAction",bA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ns(n);return a.jsx(Am,{...s,...r,ref:e})});bA.displayName=I7;var _A="AlertDialogCancel",EA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=N7(_A,n),i=Ns(n),o=Ue(e,s);return a.jsx(Am,{...i,...r,ref:o})});EA.displayName=_A;var k7=({contentRef:t})=>{const e=`\`${Ea}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ea}\` by passing a \`${xA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ea}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},A7=hA,R7=fA,P7=mA,SA=pA,TA=gA,NA=bA,CA=EA,IA=vA,kA=wA;const E0=fu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ae=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?GM:"button";return a.jsx(o,{className:W(E0({variant:e,size:n,className:t})),ref:i,...s})});ae.displayName="Button";const AA=A7,RA=R7,j7=P7,PA=m.forwardRef(({className:t,...e},n)=>a.jsx(SA,{className:W("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));PA.displayName=SA.displayName;const S0=m.forwardRef(({className:t,...e},n)=>a.jsxs(j7,{children:[a.jsx(PA,{}),a.jsx(TA,{ref:n,className:W("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));S0.displayName=TA.displayName;const T0=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",t),...e});T0.displayName="AlertDialogHeader";const N0=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});N0.displayName="AlertDialogFooter";const C0=m.forwardRef(({className:t,...e},n)=>a.jsx(IA,{ref:n,className:W("text-lg font-semibold",t),...e}));C0.displayName=IA.displayName;const I0=m.forwardRef(({className:t,...e},n)=>a.jsx(kA,{ref:n,className:W("text-sm text-muted-foreground",t),...e}));I0.displayName=kA.displayName;const k0=m.forwardRef(({className:t,...e},n)=>a.jsx(NA,{ref:n,className:W(E0(),t),...e}));k0.displayName=NA.displayName;const A0=m.forwardRef(({className:t,...e},n)=>a.jsx(CA,{ref:n,className:W(E0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));A0.displayName=CA.displayName;const tg=768;function Rm(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${tg-1}px)`),r=()=>{e(window.innerWidth<tg)};return n.addEventListener("change",r),e(window.innerWidth<tg),()=>n.removeEventListener("change",r)},[]),!!t}var R0="Avatar",[D7,dq]=Yn(R0),[M7,jA]=D7(R0),DA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(M7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(ve.span,{...r,ref:e})})});DA.displayName=R0;var MA="AvatarImage",OA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=jA(MA,n),l=O7(r,i),c=sn(u=>{s(u),o.onImageLoadingStatusChange(u)});return Tt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ve.img,{...i,ref:e,src:r}):null});OA.displayName=MA;var LA="AvatarFallback",VA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=jA(LA,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(ve.span,{...s,ref:e}):null});VA.displayName=LA;function uE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function O7(t,{referrerPolicy:e,crossOrigin:n}){const r=V7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>uE(i,t));return Tt(()=>{l(uE(i,t))},[i,t]),Tt(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function L7(){return()=>{}}function V7(){return m.useSyncExternalStore(L7,()=>!0,()=>!1)}var FA=DA,UA=OA,zA=VA;const ni=m.forwardRef(({className:t,...e},n)=>a.jsx(FA,{ref:n,className:W(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));ni.displayName=FA.displayName;const ri=m.forwardRef(({className:t,...e},n)=>a.jsx(UA,{ref:n,className:W("aspect-square h-full w-full",t),...e}));ri.displayName=UA.displayName;const si=m.forwardRef(({className:t,...e},n)=>a.jsx(zA,{ref:n,className:W("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));si.displayName=zA.displayName;const F7=[{path:"/dashboard",label:"Dashboard",icon:ZN},{path:"/",label:"Pipeline",icon:rC},{path:"/leaderboard",label:"Leaderboard",icon:ax},{path:"/timeline",label:"Timeline",icon:Fi},{path:"/attendance",label:"Attendance",icon:uC},{path:"/notes",label:"Notes",icon:go}];function U7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Kv(),r=Rm(),{user:s,signOut:i}=at(),{theme:o,toggleTheme:l}=m0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(Ei,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(ni,{className:"h-8 w-8",children:[a.jsx(ri,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(si,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),F7.map(p=>{const v=n===p.path,_=p.icon;return a.jsxs(ps,{href:p.path,onClick:e,className:W("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",v?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(_,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(ox,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(ps,{href:"/settings",onClick:e,className:W("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(aC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(AA,{children:[a.jsx(RA,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Uc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(S0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(I0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(k0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:W("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const Sa=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:W("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Sa.displayName="Input";function z7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=Xr(),[r]=Kv(),[s,i]=m.useState(""),o=Rm(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(ae,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(iC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(n5,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(Sa,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(ae,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:W(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(Bf,{className:"w-5 h-5"})})})]})}var $A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dE=Se.createContext&&Se.createContext($A),$7=["attr","size","title"];function B7(t,e){if(t==null)return{};var n=H7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function H7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){W7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W7(t,e,n){return e=q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q7(t){var e=G7(t,"string");return typeof e=="symbol"?e:e+""}function G7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BA(t){return t&&t.map((e,n)=>Se.createElement(e.tag,cf({key:n},e.attr),BA(e.child)))}function P0(t){return e=>Se.createElement(K7,lf({attr:cf({},t.attr)},e),BA(t.child))}function K7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=B7(t,$7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",lf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:cf(cf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Se.createElement("title",null,i),t.children)};return dE!==void 0?Se.createElement(dE.Consumer,null,n=>e(n)):e($A)}function Q7(t){return P0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function X7(t){return P0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const Y7=[{icon:X7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:XO,title:"Kanban Board",description:"Visual assignment tracking."},{icon:VO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:FO,title:"Performance Metrics",description:"Grade & workload analytics."}];function J7(){const{signInWithGoogle:t,loading:e,error:n}=at();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:Y7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(Sn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(ae,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(Q7,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(Sn,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(r5,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Terms"})]})]})})]})]})}function Z7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Pm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function j0(t){return"nodeType"in t}function ln(t){var e,n;return t?xl(t)?t:j0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function D0(t){const{Document:e}=ln(t);return t instanceof e}function Pu(t){return xl(t)?!1:t instanceof ln(t).HTMLElement}function HA(t){return t instanceof ln(t).SVGElement}function wl(t){return t?xl(t)?t.document:j0(t)?D0(t)?t:Pu(t)||HA(t)?t.ownerDocument:document:document:document}const wr=Pm?m.useLayoutEffect:m.useEffect;function jm(t){const e=m.useRef(t);return wr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function e$(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Jc(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return wr(()=>{n.current!==t&&(n.current=t)},e),n}function ju(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function uf(t){const e=jm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function df(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let ng={};function Du(t,e){return m.useMemo(()=>{if(e)return e;const n=ng[t]==null?0:ng[t]+1;return ng[t]=n,t+"-"+n},[t,e])}function WA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Ta=WA(1),hf=WA(-1);function t$(t){return"clientX"in t&&"clientY"in t}function Dm(t){if(!t)return!1;const{KeyboardEvent:e}=ln(t.target);return e&&t instanceof e}function n$(t){if(!t)return!1;const{TouchEvent:e}=ln(t.target);return e&&t instanceof e}function ff(t){if(n$(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return t$(t)?{x:t.clientX,y:t.clientY}:null}const Di=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Di.Translate.toString(t),Di.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),fE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function r$(t){return t.matches(fE)?t:t.querySelector(fE)}const s$={display:"none"};function i$(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:s$},n)}function o$(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function a$(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const qA=m.createContext(null);function l$(t){const e=m.useContext(qA);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function c$(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const u$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},d$={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function h$(t){let{announcements:e=d$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=u$}=t;const{announce:i,announcement:o}=a$(),l=Du("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),l$(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:v}=f;e.onDragMove&&i(e.onDragMove({active:p,over:v}))},onDragOver(f){let{active:p,over:v}=f;i(e.onDragOver({active:p,over:v}))},onDragEnd(f){let{active:p,over:v}=f;i(e.onDragEnd({active:p,over:v}))},onDragCancel(f){let{active:p,over:v}=f;i(e.onDragCancel({active:p,over:v}))}}),[i,e])),!c)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(i$,{id:r,value:s.draggable}),Se.createElement(o$,{id:l,announcement:o}));return n?Gn.createPortal(h,n):h}var _t;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(_t||(_t={}));function mf(){}function mE(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function f$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const br=Object.freeze({x:0,y:0});function m$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function p$(t,e){const n=ff(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function g$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function y$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function v$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function pE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const x$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=pE(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=m$(pE(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(g$)};function w$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const b$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=w$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(y$)};function _$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function GA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:br}function E$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const S$=E$(1);function KA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function T$(t,e,n){const r=KA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const N$={ignoreTransform:!1};function bl(t,e){e===void 0&&(e=N$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=ln(t).getComputedStyle(t);u&&(n=T$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function gE(t){return bl(t,{ignoreTransform:!0})}function C$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function I$(t,e){return e===void 0&&(e=ln(t).getComputedStyle(t)),e.position==="fixed"}function k$(t,e){e===void 0&&(e=ln(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function M0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(D0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Pu(s)||HA(s)||n.includes(s))return n;const i=ln(t).getComputedStyle(s);return s!==t&&k$(s,i)&&n.push(s),I$(s,i)?n:r(s.parentNode)}return t?r(t):n}function QA(t){const[e]=M0(t,1);return e??null}function rg(t){return!Pm||!t?null:xl(t)?t:j0(t)?D0(t)||t===wl(t).scrollingElement?window:Pu(t)?t:null:null}function XA(t){return xl(t)?t.scrollX:t.scrollLeft}function YA(t){return xl(t)?t.scrollY:t.scrollTop}function $y(t){return{x:XA(t),y:YA(t)}}var kt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(kt||(kt={}));function JA(t){return!Pm||!t?!1:t===document.scrollingElement}function ZA(t){const e={x:0,y:0},n=JA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const A$={x:.2,y:.2};function R$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=A$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=ZA(t),v={x:0,y:0},_={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+y.height?(v.y=kt.Backward,_.y=r*Math.abs((e.top+y.height-i)/y.height)):!h&&c>=e.bottom-y.height&&(v.y=kt.Forward,_.y=r*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(v.x=kt.Forward,_.x=r*Math.abs((e.right-y.width-l)/y.width)):!f&&o<=e.left+y.width&&(v.x=kt.Backward,_.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:v,speed:_}}function P$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function eR(t){return t.reduce((e,n)=>Ta(e,$y(n)),br)}function j$(t){return t.reduce((e,n)=>e+XA(n),0)}function D$(t){return t.reduce((e,n)=>e+YA(n),0)}function tR(t,e){if(e===void 0&&(e=bl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);QA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const M$=[["x",["left","right"],j$],["y",["top","bottom"],D$]];class O0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=M0(n),s=eR(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of M$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function O$(t){const{EventTarget:e}=ln(t);return t instanceof e?t:wl(t)}function sg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Bn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bn||(Bn={}));function yE(t){t.preventDefault()}function L$(t){t.stopPropagation()}var Me;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Me||(Me={}));const nR={start:[Me.Space,Me.Enter],cancel:[Me.Esc],end:[Me.Space,Me.Enter,Me.Tab]},V$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Me.Right:return{...n,x:n.x+25};case Me.Left:return{...n,x:n.x-25};case Me.Down:return{...n,y:n.y+25};case Me.Up:return{...n,y:n.y-25}}};class L0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new vc(wl(n)),this.windowListeners=new vc(ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&tR(r),n(br)}handleKeyDown(e){if(Dm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=nR,coordinateGetter:o=V$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:br;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=hf(f,h),v={x:0,y:0},{scrollableAncestors:_}=r.current;for(const y of _){const w=e.code,{isTop:b,isRight:x,isLeft:T,isBottom:A,maxScroll:j,minScroll:M}=ZA(y),N=P$(y),S={x:Math.min(w===Me.Right?N.right-N.width/2:N.right,Math.max(w===Me.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(w===Me.Down?N.bottom-N.height/2:N.bottom,Math.max(w===Me.Down?N.top:N.top+N.height/2,f.y))},C=w===Me.Right&&!x||w===Me.Left&&!T,I=w===Me.Down&&!A||w===Me.Up&&!b;if(C&&S.x!==f.x){const k=y.scrollLeft+p.x,D=w===Me.Right&&k<=j.x||w===Me.Left&&k>=M.x;if(D&&!p.y){y.scrollTo({left:k,behavior:l});return}D?v.x=y.scrollLeft-k:v.x=w===Me.Right?y.scrollLeft-j.x:y.scrollLeft-M.x,v.x&&y.scrollBy({left:-v.x,behavior:l});break}else if(I&&S.y!==f.y){const k=y.scrollTop+p.y,D=w===Me.Down&&k<=j.y||w===Me.Up&&k>=M.y;if(D&&!p.x){y.scrollTo({top:k,behavior:l});return}D?v.y=y.scrollTop-k:v.y=w===Me.Down?y.scrollTop-j.y:y.scrollTop-M.y,v.y&&y.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(e,Ta(hf(f,this.referenceCoordinates),v))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=nR,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function vE(t){return!!(t&&"distance"in t)}function xE(t){return!!(t&&"delay"in t)}class V0{constructor(e,n,r){var s;r===void 0&&(r=O$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=wl(o),this.documentListeners=new vc(this.document),this.listeners=new vc(r),this.windowListeners=new vc(ln(o)),this.initialCoordinates=(s=ff(i))!=null?s:br,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.DragStart,yE),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),this.windowListeners.add(Bn.ContextMenu,yE),this.documentListeners.add(Bn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bn.Click,L$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=ff(e))!=null?n:br,u=hf(s,c);if(!r&&l){if(vE(l)){if(l.tolerance!=null&&sg(u,l.tolerance))return this.handleCancel();if(sg(u,l.distance))return this.handleStart()}if(xE(l)&&sg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Me.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const F$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class F0 extends V0{constructor(e){const{event:n}=e,r=wl(n.target);super(e,F$,r)}}F0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const U$={move:{name:"mousemove"},end:{name:"mouseup"}};var By;(function(t){t[t.RightClick=2]="RightClick"})(By||(By={}));class z$ extends V0{constructor(e){super(e,U$,wl(e.event.target))}}z$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===By.RightClick?!1:(r==null||r({event:n}),!0)}}];const ig={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $$ extends V0{constructor(e){super(e,ig)}static setup(){return window.addEventListener(ig.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ig.move.name,e)};function e(){}}}$$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var xc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(xc||(xc={}));var pf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(pf||(pf={}));function B$(t){let{acceleration:e,activator:n=xc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=pf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const v=W$({delta:f,disabled:!i}),[_,y]=e$(),w=m.useRef({x:0,y:0}),b=m.useRef({x:0,y:0}),x=m.useMemo(()=>{switch(n){case xc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case xc.DraggableRect:return s}},[n,s,c]),T=m.useRef(null),A=m.useCallback(()=>{const M=T.current;if(!M)return;const N=w.current.x*b.current.x,S=w.current.y*b.current.y;M.scrollBy(N,S)},[]),j=m.useMemo(()=>l===pf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!x){y();return}for(const M of j){if((r==null?void 0:r(M))===!1)continue;const N=u.indexOf(M),S=h[N];if(!S)continue;const{direction:C,speed:I}=R$(M,S,x,e,p);for(const k of["x","y"])v[k][C[k]]||(I[k]=0,C[k]=0);if(I.x>0||I.y>0){y(),T.current=M,_(A,o),w.current=I,b.current=C;return}}w.current={x:0,y:0},b.current={x:0,y:0},y()},[e,A,r,y,i,o,JSON.stringify(x),JSON.stringify(v),_,u,j,h,JSON.stringify(p)])}const H$={x:{[kt.Backward]:!1,[kt.Forward]:!1},y:{[kt.Backward]:!1,[kt.Forward]:!1}};function W$(t){let{delta:e,disabled:n}=t;const r=df(e);return ju(s=>{if(n||!r||!s)return H$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[kt.Backward]:s.x[kt.Backward]||i.x===-1,[kt.Forward]:s.x[kt.Forward]||i.x===1},y:{[kt.Backward]:s.y[kt.Backward]||i.y===-1,[kt.Forward]:s.y[kt.Forward]||i.y===1}}},[n,e,r])}function q$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ju(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function G$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Zc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Zc||(Zc={}));var Hy;(function(t){t.Optimized="optimized"})(Hy||(Hy={}));const wE=new Map;function K$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=w(),p=Jc(f),v=m.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(T=>!x.includes(T))))},[p]),_=m.useRef(null),y=ju(b=>{if(f&&!n)return wE;if(!b||b===wE||h.current!==t||i!=null){const x=new Map;for(let T of t){if(!T)continue;if(i&&i.length>0&&!i.includes(T.id)&&T.rect.current){x.set(T.id,T.rect.current);continue}const A=T.node.current,j=A?new O0(c(A),A):null;T.rect.current=j,j&&x.set(T.id,j)}return x}return b},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||v()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||_.current!==null||(_.current=setTimeout(()=>{v(),_.current=null},l))},[l,f,v,...r]),{droppableRects:y,measureDroppableContainers:v,measuringScheduled:i!=null};function w(){switch(u){case Zc.Always:return!1;case Zc.BeforeDragging:return n;default:return!n}}}function U0(t,e){return ju(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Q$(t,e){return U0(t,e)}function X$(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Mm(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Y$(t){return new O0(bl(t),t)}function bE(t,e,n){e===void 0&&(e=Y$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=X$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Mm({callback:i});return wr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function J$(t){const e=U0(t);return GA(t,e)}const _E=[];function Z$(t){const e=m.useRef(t),n=ju(r=>t?r&&r!==_E&&t&&e.current&&t.parentNode===e.current.parentNode?r:M0(t):_E,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function eB(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=rg(i.target);o&&n(l=>l?(l.set(o,$y(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=rg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,$y(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=rg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ta(i,o),br):eR(t):br,[t,e])}function EE(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==br;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?hf(t,n.current):br}function tB(t){m.useEffect(()=>{if(!Pm)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function nB(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function rR(t){return m.useMemo(()=>t?C$(t):null,[t])}const SE=[];function rB(t,e){e===void 0&&(e=bl);const[n]=t,r=rR(n?ln(n):null),[s,i]=m.useState(SE);function o(){i(()=>t.length?t.map(c=>JA(c)?r:new O0(e(c),c)):SE)}const l=Mm({callback:o});return wr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function sR(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Pu(e)?e:t}function sB(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(Pu(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Mm({callback:s}),o=m.useCallback(u=>{const h=sR(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=uf(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const iB=[{sensor:F0,options:{}},{sensor:L0,options:{}}],oB={current:{}},ah={draggable:{measure:gE},droppable:{measure:gE,strategy:Zc.WhileDragging,frequency:Hy.Optimized},dragOverlay:{measure:bl}};class wc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const aB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ah,measureDroppableContainers:mf,windowRect:null,measuringScheduled:!1},iR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mf,draggableNodes:new Map,over:null,measureDroppableContainers:mf},Mu=m.createContext(iR),oR=m.createContext(aB);function lB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wc}}}function cB(t,e){switch(e.type){case _t.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case _t.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case _t.DragEnd:case _t.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _t.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new wc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case _t.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new wc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case _t.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new wc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function uB(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Mu),i=df(r),o=df(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Dm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=r$(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function aR(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function dB(t){return m.useMemo(()=>({draggable:{...ah.draggable,...t==null?void 0:t.draggable},droppable:{...ah.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ah.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function hB(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;wr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=GA(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=QA(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Om=m.createContext({...br,scaleX:1,scaleY:1});var $s;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})($s||($s={}));const fB=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=iB,collisionDetection:f=b$,measuring:p,modifiers:v,..._}=e;const y=m.useReducer(cB,void 0,lB),[w,b]=y,[x,T]=c$(),[A,j]=m.useState($s.Uninitialized),M=A===$s.Initialized,{draggable:{active:N,nodes:S,translate:C},droppable:{containers:I}}=w,k=N!=null?S.get(N):null,D=m.useRef({initial:null,translated:null}),P=m.useMemo(()=>{var De;return N!=null?{id:N,data:(De=k==null?void 0:k.data)!=null?De:oB,rect:D}:null},[N,k]),B=m.useRef(null),[se,U]=m.useState(null),[H,O]=m.useState(null),L=Jc(_,Object.values(_)),z=Du("DndDescribedBy",o),F=m.useMemo(()=>I.getEnabled(),[I]),X=dB(p),{droppableRects:Y,measureDroppableContainers:J,measuringScheduled:le}=K$(F,{dragging:M,dependencies:[C.x,C.y],config:X.droppable}),ee=q$(S,N),q=m.useMemo(()=>H?ff(H):null,[H]),te=$u(),pe=Q$(ee,X.draggable.measure);hB({activeNode:N!=null?S.get(N):null,config:te.layoutShiftCompensation,initialRect:pe,measure:X.draggable.measure});const re=bE(ee,X.draggable.measure,pe),fe=bE(ee?ee.parentElement:null),de=m.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=I.getNodeFor((n=de.current.over)==null?void 0:n.id),je=sB({measure:X.dragOverlay.measure}),cn=(r=je.nodeRef.current)!=null?r:ee,Ut=M?(s=je.rect)!=null?s:re:null,Un=!!(je.nodeRef.current&&je.rect),Hi=J$(Un?null:re),Ge=rR(cn?ln(cn):null),Ze=Z$(M?Ae??ee:null),Yr=rB(Ze),Vo=aR(v,{transform:{x:C.x-Hi.x,y:C.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:H,active:P,activeNodeRect:re,containerNodeRect:fe,draggingNodeRect:Ut,over:de.current.over,overlayNodeRect:je.rect,scrollableAncestors:Ze,scrollableAncestorRects:Yr,windowRect:Ge}),El=q?Ta(q,C):null,Lu=eB(Ze),Wi=EE(Lu),Vu=EE(Lu,[re]),Jr=Ta(Vo,Wi),Er=Ut?S$(Ut,Vo):null,qi=P&&Er?f({active:P,collisionRect:Er,droppableRects:Y,droppableContainers:F,pointerCoordinates:El}):null,Fu=v$(qi,"id"),[Jn,Sl]=m.useState(null),Gi=Un?Vo:Ta(Vo,Vu),Tl=_$(Gi,(i=Jn==null?void 0:Jn.rect)!=null?i:null,re),Ki=m.useRef(null),Sr=m.useCallback((De,zt)=>{let{sensor:yt,options:un}=zt;if(B.current==null)return;const dn=S.get(B.current);if(!dn)return;const Jt=De.nativeEvent,Dt=new yt({active:B.current,activeNode:dn,event:Jt,options:un,context:de,onAbort(vt){if(!S.get(vt))return;const{onDragAbort:Nn}=L.current,zn={id:vt};Nn==null||Nn(zn),x({type:"onDragAbort",event:zn})},onPending(vt,Tn,Nn,zn){if(!S.get(vt))return;const{onDragPending:Zn}=L.current,Tr={id:vt,constraint:Tn,initialCoordinates:Nn,offset:zn};Zn==null||Zn(Tr),x({type:"onDragPending",event:Tr})},onStart(vt){const Tn=B.current;if(Tn==null)return;const Nn=S.get(Tn);if(!Nn)return;const{onDragStart:zn}=L.current,Zr={activatorEvent:Jt,active:{id:Tn,data:Nn.data,rect:D}};Gn.unstable_batchedUpdates(()=>{zn==null||zn(Zr),j($s.Initializing),b({type:_t.DragStart,initialCoordinates:vt,active:Tn}),x({type:"onDragStart",event:Zr}),U(Ki.current),O(Jt)})},onMove(vt){b({type:_t.DragMove,coordinates:vt})},onEnd:Is(_t.DragEnd),onCancel:Is(_t.DragCancel)});Ki.current=Dt;function Is(vt){return async function(){const{active:Nn,collisions:zn,over:Zr,scrollAdjustedTranslate:Zn}=de.current;let Tr=null;if(Nn&&Zn){const{cancelDrop:hn}=L.current;Tr={activatorEvent:Jt,active:Nn,collisions:zn,delta:Zn,over:Zr},vt===_t.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Tr))&&(vt=_t.DragCancel)}B.current=null,Gn.unstable_batchedUpdates(()=>{b({type:vt}),j($s.Uninitialized),Sl(null),U(null),O(null),Ki.current=null;const hn=vt===_t.DragEnd?"onDragEnd":"onDragCancel";if(Tr){const Fo=L.current[hn];Fo==null||Fo(Tr),x({type:hn,event:Tr})}})}}},[S]),Uu=m.useCallback((De,zt)=>(yt,un)=>{const dn=yt.nativeEvent,Jt=S.get(un);if(B.current!==null||!Jt||dn.dndKit||dn.defaultPrevented)return;const Dt={active:Jt};De(yt,zt.options,Dt)===!0&&(dn.dndKit={capturedBy:zt.sensor},B.current=un,Sr(yt,zt))},[S,Sr]),Qi=G$(h,Uu);tB(h),wr(()=>{re&&A===$s.Initializing&&j($s.Initialized)},[re,A]),m.useEffect(()=>{const{onDragMove:De}=L.current,{active:zt,activatorEvent:yt,collisions:un,over:dn}=de.current;if(!zt||!yt)return;const Jt={active:zt,activatorEvent:yt,collisions:un,delta:{x:Jr.x,y:Jr.y},over:dn};Gn.unstable_batchedUpdates(()=>{De==null||De(Jt),x({type:"onDragMove",event:Jt})})},[Jr.x,Jr.y]),m.useEffect(()=>{const{active:De,activatorEvent:zt,collisions:yt,droppableContainers:un,scrollAdjustedTranslate:dn}=de.current;if(!De||B.current==null||!zt||!dn)return;const{onDragOver:Jt}=L.current,Dt=un.get(Fu),Is=Dt&&Dt.rect.current?{id:Dt.id,rect:Dt.rect.current,data:Dt.data,disabled:Dt.disabled}:null,vt={active:De,activatorEvent:zt,collisions:yt,delta:{x:dn.x,y:dn.y},over:Is};Gn.unstable_batchedUpdates(()=>{Sl(Is),Jt==null||Jt(vt),x({type:"onDragOver",event:vt})})},[Fu]),wr(()=>{de.current={activatorEvent:H,active:P,activeNode:ee,collisionRect:Er,collisions:qi,droppableRects:Y,draggableNodes:S,draggingNode:cn,draggingNodeRect:Ut,droppableContainers:I,over:Jn,scrollableAncestors:Ze,scrollAdjustedTranslate:Jr},D.current={initial:Ut,translated:Er}},[P,ee,qi,Er,S,cn,Ut,Y,I,Jn,Ze,Jr]),B$({...te,delta:C,draggingRect:Er,pointerCoordinates:El,scrollableAncestors:Ze,scrollableAncestorRects:Yr});const zu=m.useMemo(()=>({active:P,activeNode:ee,activeNodeRect:re,activatorEvent:H,collisions:qi,containerNodeRect:fe,dragOverlay:je,draggableNodes:S,droppableContainers:I,droppableRects:Y,over:Jn,measureDroppableContainers:J,scrollableAncestors:Ze,scrollableAncestorRects:Yr,measuringConfiguration:X,measuringScheduled:le,windowRect:Ge}),[P,ee,re,H,qi,fe,je,S,I,Y,Jn,J,Ze,Yr,X,le,Ge]),Xi=m.useMemo(()=>({activatorEvent:H,activators:Qi,active:P,activeNodeRect:re,ariaDescribedById:{draggable:z},dispatch:b,draggableNodes:S,over:Jn,measureDroppableContainers:J}),[H,Qi,P,re,b,z,S,Jn,J]);return Se.createElement(qA.Provider,{value:T},Se.createElement(Mu.Provider,{value:Xi},Se.createElement(oR.Provider,{value:zu},Se.createElement(Om.Provider,{value:Tl},u)),Se.createElement(uB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Se.createElement(h$,{...l,hiddenTextDescribedById:z}));function $u(){const De=(se==null?void 0:se.autoScrollEnabled)===!1,zt=typeof c=="object"?c.enabled===!1:c===!1,yt=M&&!De&&!zt;return typeof c=="object"?{...c,enabled:yt}:{enabled:yt}}}),mB=m.createContext(null),TE="button",pB="Draggable";function gB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Du(pB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Mu),{role:v=TE,roleDescription:_="draggable",tabIndex:y=0}=s??{},w=(c==null?void 0:c.id)===e,b=m.useContext(w?Om:mB),[x,T]=uf(),[A,j]=uf(),M=nB(o,e),N=Jc(n);wr(()=>(f.set(e,{id:e,key:i,node:x,activatorNode:A,data:N}),()=>{const C=f.get(e);C&&C.key===i&&f.delete(e)}),[f,e]);const S=m.useMemo(()=>({role:v,tabIndex:y,"aria-disabled":r,"aria-pressed":w&&v===TE?!0:void 0,"aria-roledescription":_,"aria-describedby":h.draggable}),[r,v,y,w,_,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:S,isDragging:w,listeners:r?void 0:M,node:x,over:p,setNodeRef:T,setActivatorNodeRef:j,transform:b}}function lR(){return m.useContext(oR)}const yB="Droppable",vB={timeout:25};function cR(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Du(yB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Mu),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),v=m.useRef(null),{disabled:_,updateMeasurementsFor:y,timeout:w}={...vB,...s},b=Jc(y??r),x=m.useCallback(()=>{if(!f.current){f.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),v.current=null},w)},[w]),T=Mm({callback:x,disabled:_||!o}),A=m.useCallback((S,C)=>{T&&(C&&(T.unobserve(C),f.current=!1),S&&T.observe(S))},[T]),[j,M]=uf(A),N=Jc(e);return m.useEffect(()=>{!T||!j.current||(T.disconnect(),f.current=!1,T.observe(j.current))},[j,T]),m.useEffect(()=>(l({type:_t.RegisterDroppable,element:{id:r,key:i,disabled:n,node:j,rect:p,data:N}}),()=>l({type:_t.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:_t.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:M}}function xB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=df(n);return!n&&!r&&l&&s(l),wr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const wB={x:0,y:0,scaleX:1,scaleY:1};function bB(t){let{children:e}=t;return Se.createElement(Mu.Provider,{value:iR},Se.createElement(Om.Provider,{value:wB},e))}const _B={position:"fixed",touchAction:"none"},EB=t=>Dm(t)?"transform 250ms ease":void 0,SB=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=EB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={..._B,width:l.width,height:l.height,top:l.top,left:l.left,transform:Di.Transform.toString(f),transformOrigin:s&&r?p$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Se.createElement(n,{className:o,style:p,ref:e},i)}),TB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},NB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Di.Transform.toString(e)},{transform:Di.Transform.toString(n)}]},CB={duration:250,easing:"ease",keyframes:NB,sideEffects:TB({styles:{active:{opacity:"0"}}})};function IB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return jm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=sR(o);if(!u)return;const{transform:h}=ln(o).getComputedStyle(o),f=KA(h);if(!f)return;const p=typeof e=="function"?e:kB(e);return tR(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function kB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...CB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},v=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[_]=v,y=v[v.length-1];if(JSON.stringify(_)===JSON.stringify(y))return;const w=r==null?void 0:r({active:o,dragOverlay:l,...u}),b=l.node.animate(v,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{w==null||w(),x()}})}}let NE=0;function AB(t){return m.useMemo(()=>{if(t!=null)return NE++,NE},[t])}const RB=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:v,draggableNodes:_,droppableContainers:y,dragOverlay:w,over:b,measuringConfiguration:x,scrollableAncestors:T,scrollableAncestorRects:A,windowRect:j}=lR(),M=m.useContext(Om),N=AB(f==null?void 0:f.id),S=aR(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:v,draggingNodeRect:w.rect,over:b,overlayNodeRect:w.rect,scrollableAncestors:T,scrollableAncestorRects:A,transform:M,windowRect:j}),C=U0(p),I=IB({config:r,draggableNodes:_,droppableContainers:y,measuringConfiguration:x}),k=C?w.setRef:void 0;return Se.createElement(bB,null,Se.createElement(xB,{animation:I},f&&N?Se.createElement(SB,{key:N,id:f.id,ref:k,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:C,style:{zIndex:u,...s},transform:S},n):null))});function uR(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function PB(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Rd(t){return t!==null&&t>=0}function jB(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function DB(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const dR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=uR(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Pd={scaleX:1,scaleY:1},MB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Pd}:null}const c=OB(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Pd}:s<n&&s>=o?{x:0,y:l.height+c,...Pd}:{x:0,y:0,...Pd}};function OB(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const hR="Sortable",fR=Se.createContext({activeIndex:-1,containerId:hR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dR,disabled:{draggable:!1,droppable:!1}});function LB(t){let{children:e,id:n,items:r,strategy:s=dR,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=lR(),f=Du(hR,n),p=l.rect!==null,v=m.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),_=o!=null,y=o?v.indexOf(o.id):-1,w=u?v.indexOf(u.id):-1,b=m.useRef(v),x=!jB(v,b.current),T=w!==-1&&y===-1||x,A=DB(i);wr(()=>{x&&_&&h(v)},[x,v,_,h]),m.useEffect(()=>{b.current=v},[v]);const j=m.useMemo(()=>({activeIndex:y,containerId:f,disabled:A,disableTransforms:T,items:v,overIndex:w,useDragOverlay:p,sortedRects:PB(v,c),strategy:s}),[y,f,A.draggable,A.droppable,T,v,w,c,p,s]);return Se.createElement(fR.Provider,{value:j},e)}const VB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return uR(n,r,s).indexOf(e)},FB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},UB={duration:200,easing:"ease"},mR="transform",zB=Di.Transition.toString({property:mR,duration:0,easing:"linear"}),$B={roleDescription:"sortable"};function BB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return wr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=bl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function HB(t){let{animateLayoutChanges:e=FB,attributes:n,disabled:r,data:s,getNewIndex:i=VB,id:o,strategy:l,resizeObserverConfig:c,transition:u=UB}=t;const{items:h,containerId:f,activeIndex:p,disabled:v,disableTransforms:_,sortedRects:y,overIndex:w,useDragOverlay:b,strategy:x}=m.useContext(fR),T=WB(r,v),A=h.indexOf(o),j=m.useMemo(()=>({sortable:{containerId:f,index:A,items:h},...s}),[f,s,A,h]),M=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:N,node:S,isOver:C,setNodeRef:I}=cR({id:o,data:j,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:k,activatorEvent:D,activeNodeRect:P,attributes:B,setNodeRef:se,listeners:U,isDragging:H,over:O,setActivatorNodeRef:L,transform:z}=gB({id:o,data:j,attributes:{...$B,...n},disabled:T.draggable}),F=Z7(I,se),X=!!k,Y=X&&!_&&Rd(p)&&Rd(w),J=!b&&H,le=J&&Y?z:null,q=Y?le??(l??x)({rects:y,activeNodeRect:P,activeIndex:p,overIndex:w,index:A}):null,te=Rd(p)&&Rd(w)?i({id:o,items:h,activeIndex:p,overIndex:w}):A,pe=k==null?void 0:k.id,re=m.useRef({activeId:pe,items:h,newIndex:te,containerId:f}),fe=h!==re.current.items,de=e({active:k,containerId:f,isDragging:H,isSorting:X,id:o,index:A,items:h,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:u,wasDragging:re.current.activeId!=null}),Ae=BB({disabled:!de,index:A,node:S,rect:N});return m.useEffect(()=>{X&&re.current.newIndex!==te&&(re.current.newIndex=te),f!==re.current.containerId&&(re.current.containerId=f),h!==re.current.items&&(re.current.items=h)},[X,te,f,h]),m.useEffect(()=>{if(pe===re.current.activeId)return;if(pe!=null&&re.current.activeId==null){re.current.activeId=pe;return}const cn=setTimeout(()=>{re.current.activeId=pe},50);return()=>clearTimeout(cn)},[pe]),{active:k,activeIndex:p,attributes:B,data:j,rect:N,index:A,newIndex:te,items:h,isOver:C,isSorting:X,isDragging:H,listeners:U,node:S,overIndex:w,over:O,setNodeRef:F,setActivatorNodeRef:L,setDroppableNodeRef:I,setDraggableNodeRef:se,transform:Ae??q,transition:je()};function je(){if(Ae||fe&&re.current.newIndex===A)return zB;if(!(J&&!Dm(D)||!u)&&(X||de))return Di.Transition.toString({...u,property:mR})}}function WB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Me.Down,Me.Right,Me.Up,Me.Left;const qB=fu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Cs({className:t,variant:e,...n}){return a.jsx("div",{className:W(qB({variant:e}),t),...n})}function tn({className:t,...e}){return a.jsx("div",{className:W("animate-pulse rounded-md bg-muted",t),...e})}const Re=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Re.displayName="Card";const Ye=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("flex flex-col space-y-1.5 p-6",t),...e}));Ye.displayName="CardHeader";const et=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("text-2xl font-semibold leading-none tracking-tight",t),...e}));et.displayName="CardTitle";const mn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("text-sm text-muted-foreground",t),...e}));mn.displayName="CardDescription";const Be=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("p-6 pt-0",t),...e}));Be.displayName="CardContent";const z0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("flex items-center p-6 pt-0",t),...e}));z0.displayName="CardFooter";function pR(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function gR(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function yR({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=HB({id:t.id}),h={transform:Di.Transform.toString(l),transition:c},f=gR(t.dueDate),p=f!==null&&f<=1&&f>=0,v=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Re,{ref:o,style:h,className:W("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",v&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Cs,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:_=>_.stopPropagation(),children:a.jsx(qO,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Fi,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:W(v&&"text-destructive",p&&!v&&"text-foreground font-medium"),children:pR(t.dueDate)}),v&&a.jsx(Sn,{className:"h-3.5 w-3.5 text-destructive"}),p&&!v&&a.jsx(nC,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(Ha,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ha,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(go,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function GB({assignment:t,onClick:e}){const n=gR(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:W("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:pR(t.dueDate)}),r&&a.jsx(Sn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const $0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:W("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));$0.displayName="Textarea";var KB="Separator",CE="horizontal",QB=["horizontal","vertical"],vR=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=CE,...s}=t,i=XB(r)?r:CE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(ve.div,{"data-orientation":i,...l,...s,ref:e})});vR.displayName=KB;function XB(t){return QB.includes(t)}var xR=vR;const cr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(xR,{ref:s,decorative:n,orientation:e,className:W("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));cr.displayName=xR.displayName;const YB=b0,JB=_0,wR=m.forwardRef(({className:t,...e},n)=>a.jsx(Iu,{className:W("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));wR.displayName=Iu.displayName;const ZB=fu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),bR=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(JB,{children:[a.jsx(wR,{}),a.jsxs(ku,{ref:s,className:W(ZB({side:t}),e),...r,children:[n,a.jsxs(Am,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bR.displayName=ku.displayName;const _R=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",t),...e});_R.displayName="SheetHeader";const ER=m.forwardRef(({className:t,...e},n)=>a.jsx(Au,{ref:n,className:W("text-lg font-semibold text-foreground",t),...e}));ER.displayName=Au.displayName;const eH=m.forwardRef(({className:t,...e},n)=>a.jsx(Ru,{ref:n,className:W("text-sm text-muted-foreground",t),...e}));eH.displayName=Ru.displayName;function tH(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function nH(t){return t?` at ${t}`:""}function rH({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:W("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(Ha,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:W("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function sH({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(ly,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(ly,{className:W("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(ZO,{className:"h-3.5 w-3.5"})}),a.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(i5,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(ae,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(ix,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function B0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=Xr(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",v=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(YB,{open:e,onOpenChange:n,children:a.jsxs(bR,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(_R,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Cs,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(ER,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Fi,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:W(p&&"text-destructive"),children:[tH(t.dueDate),nH(t.dueTime)]}),p&&a.jsx(Sn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(cr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(cr,{})]}),a.jsx(rH,{assignment:t}),a.jsx(cr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(e5,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:l,onChange:_=>c(_.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(ae,{size:"sm",onClick:v,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(ix,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(_=>a.jsx(sH,{note:_,onUpdate:(y,w)=>i(_.id,y,w),onDelete:()=>o(_.id,t.id)},_.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(cr,{}),a.jsxs(ae,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(iy,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function iH({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=cR({id:t});return a.jsxs("div",{ref:o,className:W("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Cs,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(LB,{items:n.map(l=>l.id),strategy:MB,children:n.length>0?n.map(l=>{var c;return a.jsx(yR,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function oH(){var b;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=Xr(),{signOut:l}=at(),[c,u]=m.useState(null),[h,f]=m.useState(null),p=f$(mE(F0,{activationConstraint:{distance:8}}),mE(L0)),v=t(),_=h?i.find(x=>x.id===h):null,y=x=>{f(x.active.id)},w=x=>{const{active:T,over:A}=x;if(f(null),!A)return;const j=T.id,M=A.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(M)){const N=i.find(S=>S.id===j);N&&N.systemStatus!==M&&(M==="in_progress"?e(j,"in_progress"):e(j,"backlog"))}};return i.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Sn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(ae,{onClick:()=>l(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs(a.Fragment,{children:[a.jsxs(fB,{sensors:p,collisionDetection:x$,onDragStart:y,onDragEnd:w,children:[a.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:v.map(x=>a.jsx(iH,{id:x.id,title:x.title,assignments:x.assignments,onCardClick:u,notes:s},x.id))}),a.jsx(RB,{children:_&&a.jsx(yR,{assignment:_,isDragging:!0,hasNotes:(((b=s.get(_.id))==null?void 0:b.length)||0)>0})})]}),a.jsx(B0,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function IE(t,[e,n]){return Math.min(n,Math.max(e,t))}var aH=m.createContext(void 0);function H0(t){const e=m.useContext(aH);return t||e||"ltr"}function SR(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var lH=[" ","Enter","ArrowUp","ArrowDown"],cH=[" ","Enter"],Ou="Select",[Lm,Vm,uH]=Yv(Ou),[_l,hq]=Yn(Ou,[uH,Kf]),Fm=Kf(),[dH,$i]=_l(Ou),[hH,fH]=_l(Ou),TR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:v,form:_}=t,y=Fm(e),[w,b]=m.useState(null),[x,T]=m.useState(null),[A,j]=m.useState(!1),M=H0(u),[N=!1,S]=_i({prop:r,defaultProp:s,onChange:i}),[C,I]=_i({prop:o,defaultProp:l,onChange:c}),k=m.useRef(null),D=w?_||!!w.closest("form"):!0,[P,B]=m.useState(new Set),se=Array.from(P).map(U=>U.props.value).join(";");return a.jsx($C,{...y,children:a.jsxs(dH,{required:v,scope:e,trigger:w,onTriggerChange:b,valueNode:x,onValueNodeChange:T,valueNodeHasChildren:A,onValueNodeHasChildrenChange:j,contentId:cs(),value:C,onValueChange:I,open:N,onOpenChange:S,dir:M,triggerPointerDownPosRef:k,disabled:p,children:[a.jsx(Lm.Provider,{scope:e,children:a.jsx(hH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(U=>{B(H=>new Set(H).add(U))},[]),onNativeOptionRemove:m.useCallback(U=>{B(H=>{const O=new Set(H);return O.delete(U),O})},[]),children:n})}),D?a.jsxs(XR,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:U=>I(U.target.value),disabled:p,form:_,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},se):null]})})};TR.displayName=Ou;var NR="SelectTrigger",CR=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Fm(n),o=$i(NR,n),l=o.disabled||r,c=Ue(e,o.onTriggerChange),u=Vm(n),h=m.useRef("touch"),[f,p,v]=YR(y=>{const w=u().filter(T=>!T.disabled),b=w.find(T=>T.value===o.value),x=JR(w,y,b);x!==void 0&&o.onValueChange(x.value)}),_=y=>{l||(o.onOpenChange(!0),v()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(BC,{asChild:!0,...i,children:a.jsx(ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":QR(o.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&_(y)}),onPointerDown:me(s.onPointerDown,y=>{h.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(_(y),y.preventDefault())}),onKeyDown:me(s.onKeyDown,y=>{const w=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(w&&y.key===" ")&&lH.includes(y.key)&&(_(),y.preventDefault())})})})});CR.displayName=NR;var IR="SelectValue",kR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=$i(IR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ue(e,c.onValueNodeChange);return Tt(()=>{u(h)},[u,h]),a.jsx(ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:QR(c.value)?a.jsx(a.Fragment,{children:o}):i})});kR.displayName=IR;var mH="SelectIcon",AR=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});AR.displayName=mH;var pH="SelectPortal",RR=t=>a.jsx(du,{asChild:!0,...t});RR.displayName=pH;var Po="SelectContent",PR=m.forwardRef((t,e)=>{const n=$i(Po,t.__scopeSelect),[r,s]=m.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Gn.createPortal(a.jsx(jR,{scope:t.__scopeSelect,children:a.jsx(Lm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(DR,{...t,ref:e})});PR.displayName=Po;var tr=10,[jR,Bi]=_l(Po),gH="SelectContentImpl",yH=Ba("SelectContent.RemoveScroll"),DR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:_,hideWhenDetached:y,avoidCollisions:w,...b}=t,x=$i(Po,n),[T,A]=m.useState(null),[j,M]=m.useState(null),N=Ue(e,q=>A(q)),[S,C]=m.useState(null),[I,k]=m.useState(null),D=Vm(n),[P,B]=m.useState(!1),se=m.useRef(!1);m.useEffect(()=>{if(T)return G2(T)},[T]),V2();const U=m.useCallback(q=>{const[te,...pe]=D().map(de=>de.ref.current),[re]=pe.slice(-1),fe=document.activeElement;for(const de of q)if(de===fe||(de==null||de.scrollIntoView({block:"nearest"}),de===te&&j&&(j.scrollTop=0),de===re&&j&&(j.scrollTop=j.scrollHeight),de==null||de.focus(),document.activeElement!==fe))return},[D,j]),H=m.useCallback(()=>U([S,T]),[U,S,T]);m.useEffect(()=>{P&&H()},[P,H]);const{onOpenChange:O,triggerPointerDownPosRef:L}=x;m.useEffect(()=>{if(T){let q={x:0,y:0};const te=re=>{var fe,de;q={x:Math.abs(Math.round(re.pageX)-(((fe=L.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(re.pageY)-(((de=L.current)==null?void 0:de.y)??0))}},pe=re=>{q.x<=10&&q.y<=10?re.preventDefault():T.contains(re.target)||O(!1),document.removeEventListener("pointermove",te),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",pe,{capture:!0})}}},[T,O,L]),m.useEffect(()=>{const q=()=>O(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[O]);const[z,F]=YR(q=>{const te=D().filter(fe=>!fe.disabled),pe=te.find(fe=>fe.ref.current===document.activeElement),re=JR(te,q,pe);re&&setTimeout(()=>re.ref.current.focus())}),X=m.useCallback((q,te,pe)=>{const re=!se.current&&!pe;(x.value!==void 0&&x.value===te||re)&&(C(q),re&&(se.current=!0))},[x.value]),Y=m.useCallback(()=>T==null?void 0:T.focus(),[T]),J=m.useCallback((q,te,pe)=>{const re=!se.current&&!pe;(x.value!==void 0&&x.value===te||re)&&k(q)},[x.value]),le=r==="popper"?Wy:MR,ee=le===Wy?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:_,hideWhenDetached:y,avoidCollisions:w}:{};return a.jsx(jR,{scope:n,content:T,viewport:j,onViewportChange:M,itemRefCallback:X,selectedItem:S,onItemLeave:Y,itemTextRefCallback:J,focusSelectedItem:H,selectedItemText:I,position:r,isPositioned:P,searchRef:z,children:a.jsx(g0,{as:yH,allowPinchZoom:!0,children:a.jsx(p0,{asChild:!0,trapped:x.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:me(s,q=>{var te;(te=x.trigger)==null||te.focus({preventScroll:!0}),q.preventDefault()}),children:a.jsx(uu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(le,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:q=>q.preventDefault(),...b,...ee,onPlaced:()=>B(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:me(b.onKeyDown,q=>{const te=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!te&&q.key.length===1&&F(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let re=D().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(q.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const fe=q.target,de=re.indexOf(fe);re=re.slice(de+1)}setTimeout(()=>U(re)),q.preventDefault()}})})})})})})});DR.displayName=gH;var vH="SelectItemAlignedPosition",MR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=$i(Po,n),o=Bi(Po,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Ue(e,N=>h(N)),p=Vm(n),v=m.useRef(!1),_=m.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:b,focusSelectedItem:x}=o,T=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&w&&b){const N=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),I=b.getBoundingClientRect();if(i.dir!=="rtl"){const fe=I.left-S.left,de=C.left-fe,Ae=N.left-de,je=N.width+Ae,cn=Math.max(je,S.width),Ut=window.innerWidth-tr,Un=IE(de,[tr,Math.max(tr,Ut-cn)]);l.style.minWidth=je+"px",l.style.left=Un+"px"}else{const fe=S.right-I.right,de=window.innerWidth-C.right-fe,Ae=window.innerWidth-N.right-de,je=N.width+Ae,cn=Math.max(je,S.width),Ut=window.innerWidth-tr,Un=IE(de,[tr,Math.max(tr,Ut-cn)]);l.style.minWidth=je+"px",l.style.right=Un+"px"}const k=p(),D=window.innerHeight-tr*2,P=y.scrollHeight,B=window.getComputedStyle(u),se=parseInt(B.borderTopWidth,10),U=parseInt(B.paddingTop,10),H=parseInt(B.borderBottomWidth,10),O=parseInt(B.paddingBottom,10),L=se+U+P+O+H,z=Math.min(w.offsetHeight*5,L),F=window.getComputedStyle(y),X=parseInt(F.paddingTop,10),Y=parseInt(F.paddingBottom,10),J=N.top+N.height/2-tr,le=D-J,ee=w.offsetHeight/2,q=w.offsetTop+ee,te=se+U+q,pe=L-te;if(te<=J){const fe=k.length>0&&w===k[k.length-1].ref.current;l.style.bottom="0px";const de=u.clientHeight-y.offsetTop-y.offsetHeight,Ae=Math.max(le,ee+(fe?Y:0)+de+H),je=te+Ae;l.style.height=je+"px"}else{const fe=k.length>0&&w===k[0].ref.current;l.style.top="0px";const Ae=Math.max(J,se+y.offsetTop+(fe?X:0)+ee)+pe;l.style.height=Ae+"px",y.scrollTop=te-J+y.offsetTop}l.style.margin=`${tr}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,l,u,y,w,b,i.dir,r]);Tt(()=>T(),[T]);const[A,j]=m.useState();Tt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const M=m.useCallback(N=>{N&&_.current===!0&&(T(),x==null||x(),_.current=!1)},[T,x]);return a.jsx(wH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:a.jsx(ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});MR.displayName=vH;var xH="SelectPopperPosition",Wy=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=tr,...i}=t,o=Fm(n);return a.jsx(HC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Wy.displayName=xH;var[wH,W0]=_l(Po,{}),qy="SelectViewport",OR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Bi(qy,n),o=W0(qy,n),l=Ue(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Lm.Slot,{scope:n,children:a.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const _=window.innerHeight-tr*2,y=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),b=Math.max(y,w);if(b<_){const x=b+v,T=Math.min(_,x),A=x-T;f.style.height=T+"px",f.style.bottom==="0px"&&(h.scrollTop=A>0?A:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});OR.displayName=qy;var LR="SelectGroup",[bH,_H]=_l(LR),EH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=cs();return a.jsx(bH,{scope:n,id:s,children:a.jsx(ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});EH.displayName=LR;var VR="SelectLabel",FR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_H(VR,n);return a.jsx(ve.div,{id:s.id,...r,ref:e})});FR.displayName=VR;var gf="SelectItem",[SH,UR]=_l(gf),zR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=$i(gf,n),c=Bi(gf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,v]=m.useState(!1),_=Ue(e,x=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,x,r,s)}),y=cs(),w=m.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(SH,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(x=>{f(T=>T||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(Lm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(ve.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:_,onFocus:me(o.onFocus,()=>v(!0)),onBlur:me(o.onBlur,()=>v(!1)),onClick:me(o.onClick,()=>{w.current!=="mouse"&&b()}),onPointerUp:me(o.onPointerUp,()=>{w.current==="mouse"&&b()}),onPointerDown:me(o.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:me(o.onPointerMove,x=>{var T;w.current=x.pointerType,s?(T=c.onItemLeave)==null||T.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,x=>{var T;x.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:me(o.onKeyDown,x=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&x.key===" "||(cH.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});zR.displayName=gf;var Zl="SelectItemText",$R=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=$i(Zl,n),l=Bi(Zl,n),c=UR(Zl,n),u=fH(Zl,n),[h,f]=m.useState(null),p=Ue(e,b=>f(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),v=h==null?void 0:h.textContent,_=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return Tt(()=>(y(_),()=>w(_)),[y,w,_]),a.jsxs(a.Fragment,{children:[a.jsx(ve.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Gn.createPortal(i.children,o.valueNode):null]})});$R.displayName=Zl;var BR="SelectItemIndicator",HR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return UR(BR,n).isSelected?a.jsx(ve.span,{"aria-hidden":!0,...r,ref:e}):null});HR.displayName=BR;var Gy="SelectScrollUpButton",WR=m.forwardRef((t,e)=>{const n=Bi(Gy,t.__scopeSelect),r=W0(Gy,t.__scopeSelect),[s,i]=m.useState(!1),o=Ue(e,r.onScrollButtonChange);return Tt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(GR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});WR.displayName=Gy;var Ky="SelectScrollDownButton",qR=m.forwardRef((t,e)=>{const n=Bi(Ky,t.__scopeSelect),r=W0(Ky,t.__scopeSelect),[s,i]=m.useState(!1),o=Ue(e,r.onScrollButtonChange);return Tt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(GR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});qR.displayName=Ky;var GR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Bi("SelectScrollButton",n),o=m.useRef(null),l=Vm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Tt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),TH="SelectSeparator",KR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ve.div,{"aria-hidden":!0,...r,ref:e})});KR.displayName=TH;var Qy="SelectArrow",NH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Fm(n),i=$i(Qy,n),o=Bi(Qy,n);return i.open&&o.position==="popper"?a.jsx(WC,{...s,...r,ref:e}):null});NH.displayName=Qy;function QR(t){return t===""||t===void 0}var XR=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Ue(e,s),o=SR(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(hu,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});XR.displayName="BubbleSelect";function YR(t){const e=sn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function JR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=CH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function CH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var IH=TR,ZR=CR,kH=kR,AH=AR,RH=RR,eP=PR,PH=OR,tP=FR,nP=zR,jH=$R,DH=HR,rP=WR,sP=qR,iP=KR;const yf=IH,vf=kH,eu=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(ZR,{ref:r,className:W("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(AH,{asChild:!0,children:a.jsx(eC,{className:"h-4 w-4 opacity-50"})})]}));eu.displayName=ZR.displayName;const oP=m.forwardRef(({className:t,...e},n)=>a.jsx(rP,{ref:n,className:W("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx($O,{className:"h-4 w-4"})}));oP.displayName=rP.displayName;const aP=m.forwardRef(({className:t,...e},n)=>a.jsx(sP,{ref:n,className:W("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(eC,{className:"h-4 w-4"})}));aP.displayName=sP.displayName;const tu=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(RH,{children:a.jsxs(eP,{ref:s,className:W("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(oP,{}),a.jsx(PH,{className:W("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(aP,{})]})}));tu.displayName=eP.displayName;const MH=m.forwardRef(({className:t,...e},n)=>a.jsx(tP,{ref:n,className:W("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));MH.displayName=tP.displayName;const bt=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(nP,{ref:r,className:W("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(DH,{children:a.jsx(Mh,{className:"h-4 w-4"})})}),a.jsx(jH,{children:e})]}));bt.displayName=nP.displayName;const OH=m.forwardRef(({className:t,...e},n)=>a.jsx(iP,{ref:n,className:W("-mx-1 my-1 h-px bg-muted",t),...e}));OH.displayName=iP.displayName;function LH(t){return P0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const jd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},VH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},FH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},og=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,kE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function UH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=Xr(),{user:o,signOut:l}=at(),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,v]=m.useState(null),[_,y]=m.useState("timeline"),[w,b]=m.useState([]);m.useEffect(()=>{if(o)try{const N=`trace_email_events_${o.uid}`,C=JSON.parse(localStorage.getItem(N)||"[]").map(I=>({id:I.id,uniqueId:I.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:I.title,description:I.body,dueDate:I.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:I.timestamp,lastSyncedAt:I.timestamp}));b(C)}catch{}},[o]);const x=m.useMemo(()=>{let N=[...s,...w];return c&&(N=N.filter(S=>S.courseId===c)),h&&(N=N.filter(S=>S.systemStatus===h)),N},[s,w,c,h]),T=()=>{u(null),f(null)},A=c||h;if(s.length===0)return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Sn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(ae,{onClick:()=>l(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]});const j=()=>{const N=m.useRef(null),[S,C]=m.useState(!1),I=m.useRef({x:0,left:0}),k=60,{earliestDate:D,latestDate:P,initialScrollPosition:B}=m.useMemo(()=>{const L=new Date;L.setHours(0,0,0,0);let z=new Date,F=new Date;if(x.length>0){const ee=x.flatMap(q=>{const te=[];return q.dueDate&&te.push(new Date(q.dueDate)),q.createdAt&&te.push(new Date(q.createdAt)),te});ee.length>0&&(z=new Date(Math.min(...ee.map(q=>q.getTime()))),F=new Date(Math.max(...ee.map(q=>q.getTime()))))}const X=new Date(z);X.setDate(X.getDate()-30);const Y=new Date(F);Y.setDate(Y.getDate()+30);const le=Math.ceil((L.getTime()-X.getTime())/(1e3*3600*24))*k+k/2-window.innerWidth/2;return{earliestDate:X,latestDate:Y,initialScrollPosition:Math.max(0,le)}},[x]),se=m.useMemo(()=>VH(D,P),[D,P]);m.useEffect(()=>{N.current&&(N.current.scrollLeft=B)},[B]);const U=L=>{L.button===2&&N.current&&(L.preventDefault(),C(!0),I.current={x:L.pageX,left:N.current.scrollLeft})},H=m.useCallback(L=>{if(!S||!N.current)return;L.preventDefault();const F=(L.pageX-I.current.x)*1.5;N.current.scrollLeft=I.current.left-F},[S]),O=m.useCallback(()=>{C(!1)},[]);return m.useEffect(()=>(S?(window.addEventListener("mousemove",H),window.addEventListener("mouseup",O)):(window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",O)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",O)}),[S,H,O]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:N,className:W("flex-1 overflow-auto relative select-none",S?"cursor-grabbing":"cursor-default"),onMouseDown:U,onContextMenu:L=>L.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${se.length*k}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:se.map((L,z)=>{const F=kE(L);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:k},children:[a.jsx("span",{className:W("text-[10px] uppercase font-bold tracking-wider mb-1",F?"text-foreground":"text-muted-foreground"),children:L.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:W("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",F?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:L.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},z)})}),a.jsxs("div",{className:"relative pt-6 min-h-[500px]",children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:se.map((L,z)=>{const F=kE(L);return a.jsx("div",{className:W("flex-shrink-0 h-full border-r border-border relative",F?"bg-accent/50":""),style:{width:k},children:F&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},z)})}),a.jsx("div",{className:"space-y-3 px-0 relative z-10 mt-2",children:x.filter(L=>L.dueDate).map(L=>{const z=e.find(de=>de.id===L.courseId),F=z==null?void 0:z.color,X=L.systemStatus==="submitted"||L.systemStatus==="graded",Y=L.createdAt?new Date(L.createdAt):new Date,J=new Date(L.dueDate),le=(Y.getTime()-D.getTime())/(1e3*3600*24),ee=(J.getTime()-Y.getTime())/(1e3*3600*24),q=Math.max(0,le*k),te=Math.max(k,ee*k),pe={left:`${q}px`,width:`${te}px`,minWidth:"140px",backgroundColor:X?void 0:F,borderColor:X?void 0:F?"rgba(0,0,0,0.1)":void 0};jd[L.systemStatus]||jd.backlog;const re="bg-green-100/80 border-green-300 text-green-800",fe="bg-card border shadow-sm "+(F?"text-slate-900":"text-foreground");return a.jsx("div",{className:"relative h-14 group",children:a.jsxs("div",{onClick:()=>v(L),className:W("absolute top-0 h-12 rounded-lg border transition-all cursor-pointer flex flex-col justify-center px-3 overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",X?re:fe),style:pe,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:"truncate text-xs font-bold leading-none flex items-center gap-1",children:[L.courseId==="system"&&a.jsx(sx,{className:"h-3 w-3 inline-block"}),X&&a.jsx(Mh,{className:"h-3 w-3 inline-block mr-0.5"}),L.title]})}),a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:L.courseName})})]})},L.id)})})]})]})}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(db,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},M=()=>{const N=m.useRef(null),[S,C]=m.useState(!1),I=m.useRef({y:0,top:0}),k=m.useRef({}),[D,P]=m.useState(!1),{startMonth:B,endMonth:se}=m.useMemo(()=>{let Y=new Date,J=new Date;if(x.length>0){const q=x.filter(te=>te.dueDate).map(te=>new Date(te.dueDate));q.length>0&&(Y=new Date(Math.min(...q.map(te=>te.getTime()))),J=new Date(Math.max(...q.map(te=>te.getTime()))))}const le=new Date(Y);le.setMonth(le.getMonth()-2),le.setDate(1);const ee=new Date(J);return ee.setMonth(ee.getMonth()+4),ee.setDate(1),{startMonth:le,endMonth:ee}},[x]),U=m.useMemo(()=>FH(B,se),[B,se]),H=m.useCallback(()=>{var q;const Y=og(new Date),J=k.current[Y];if(!J){P(!0);return}const le=J.getBoundingClientRect(),ee=(q=N.current)==null?void 0:q.getBoundingClientRect();ee&&P(le.bottom<ee.top||le.top>ee.bottom)},[U]);m.useEffect(()=>{const Y=N.current;return Y&&(Y.addEventListener("scroll",H),H()),()=>Y==null?void 0:Y.removeEventListener("scroll",H)},[H]),m.useEffect(()=>{setTimeout(()=>O(),100)},[]);const O=()=>{const Y=og(new Date),J=k.current[Y];J&&J.scrollIntoView({behavior:"smooth",block:"center"})},L=Y=>{Y.button===2&&N.current&&(Y.preventDefault(),C(!0),I.current={y:Y.pageY,top:N.current.scrollTop})},z=m.useCallback(Y=>{if(!S||!N.current)return;Y.preventDefault();const le=(Y.pageY-I.current.y)*1.5;N.current.scrollTop=I.current.top-le},[S]),F=m.useCallback(()=>{C(!1)},[]);m.useEffect(()=>(S?(window.addEventListener("mousemove",z),window.addEventListener("mouseup",F)):(window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",F)),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",F)}),[S,z,F]);const X=Y=>{const J=Y.getFullYear(),le=Y.getMonth(),ee=new Date(J,le,1),q=new Date(J,le+1,0),te=[];for(let pe=0;pe<ee.getDay();pe++)te.push({date:new Date(J,le,-ee.getDay()+1+pe),isCurrentMonth:!1});for(let pe=1;pe<=q.getDate();pe++)te.push({date:new Date(J,le,pe),isCurrentMonth:!0});for(;te.length%7!==0;){const pe=te.length-(ee.getDay()+q.getDate())+1,re=new Date(J,le+1,pe);te.push({date:re,isCurrentMonth:!1})}return te};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[D&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(OO,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:N,className:W("flex-1 overflow-y-auto",S?"cursor-grabbing":"cursor-default"),onMouseDown:L,onContextMenu:Y=>Y.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:U.map(Y=>{const J=X(Y),le=og(Y);return a.jsxs("div",{ref:ee=>k.current[le]=ee,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:Y.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ee=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:ee},ee))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:J.map((ee,q)=>{const te=x.filter(re=>{if(!re.dueDate)return!1;const fe=new Date(re.dueDate);fe.setHours(0,0,0,0);const de=new Date(ee.date);return de.setHours(0,0,0,0),de.toDateString()===fe.toDateString()}),pe=ee.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:W("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",ee.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:W("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",pe&&ee.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:ee.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:te.map(re=>{const fe=jd[re.systemStatus]||jd.backlog;return a.jsx("div",{onClick:de=>{de.stopPropagation(),v(re)},className:W("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",fe.color,fe.border),title:re.title,children:re.title},re.id)})})]},q)})})]},le)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(db,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(ae,{variant:_==="timeline"?"default":"ghost",size:"sm",onClick:()=>y("timeline"),className:"gap-2",children:[a.jsx(Fi,{size:14}),"Timeline"]}),a.jsxs(ae,{variant:_==="calendar"?"default":"ghost",size:"sm",onClick:()=>y("calendar"),className:"gap-2",children:[a.jsx(zf,{size:14}),"Calendar"]})]}),a.jsxs(yf,{value:c||"all",onValueChange:N=>u(N==="all"?null:N),children:[a.jsx(eu,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:a.jsx(vf,{placeholder:"All Courses"})}),a.jsxs(tu,{children:[a.jsx(bt,{value:"all",children:"All Courses"}),e.map(N=>a.jsx(bt,{value:N.id,children:N.name},N.id))]})]}),a.jsxs(yf,{value:h||"all",onValueChange:N=>f(N==="all"?null:N),children:[a.jsx(eu,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:a.jsx(vf,{placeholder:"All Status"})}),a.jsxs(tu,{children:[a.jsx(bt,{value:"all",children:"All Status"}),a.jsx(bt,{value:"backlog",children:"Backlog"}),a.jsx(bt,{value:"in_progress",children:"In Progress"}),a.jsx(bt,{value:"submitted",children:"Submitted"}),a.jsx(bt,{value:"graded",children:"Graded"}),a.jsx(bt,{value:"overdue",children:"Overdue"})]})]}),A&&a.jsxs(ae,{variant:"ghost",size:"sm",onClick:T,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[a.jsx(Ei,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),a.jsx("div",{className:"ml-auto",children:a.jsx(Jf,{children:a.jsxs(Zf,{children:[a.jsx(em,{asChild:!0,children:a.jsx(ps,{href:"/settings/integrations",children:a.jsxs(ae,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[a.jsx(LH,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),a.jsxs(gu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:_==="timeline"?a.jsx(j,{}):a.jsx(M,{})})]}),a.jsx(B0,{assignment:p,isOpen:!!p,onClose:()=>v(null)})]})}const AE="attendance_configs",pn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Vt(ze(Le,AE,t),n)},async getCourseConfig(t){try{const e=ze(Le,AE,t),n=await Gr(e);return n.exists()?n.data():null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var w;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=r.toUpperCase().charCodeAt(0)-65,o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,l=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw l.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):l.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const u=(await l.json()).values;if(!u||u.length<2)throw new Error("Sheet is empty or invalid format.");const h=u[0],f=u.find(b=>{var T;return((T=b[s])==null?void 0:T.toLowerCase().trim())===n.toLowerCase().trim()});if(!f)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let p=0,v=0;const _=[];for(let b=1;b<h.length;b++){const x=h[b],T=(w=f[b])==null?void 0:w.toUpperCase().trim();if(!x)continue;let A="Unknown";T==="P"||T==="PRESENT"||T==="1"?(A="Present",v++,p++):(T==="A"||T==="ABSENT"||T==="0")&&(A="Absent",p++),A!=="Unknown"&&_.push({date:x,status:A})}const y=p===0?0:Math.round(v/p*100);return{courseId:t,stats:{totalClasses:p,attendedClasses:v,percentage:y},history:_.reverse()}}},ii={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:rx,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:o5,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:ax,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:cC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:oC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:ly,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:zf,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:tC,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},zH=Object.keys(ii);function $H({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=ii[t];if(!s)return null;const i=s.icon,o={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},l={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(Jf,{delayDuration:0,children:a.jsxs(Zf,{children:[a.jsx(em,{asChild:!0,children:a.jsxs("div",{className:W("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,o[e],r&&"px-3 w-auto h-auto py-1",n),onClick:c=>c.stopPropagation(),children:[a.jsx(i,{className:W(l[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(eI,{children:a.jsxs(gu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function ec({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:W("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx($H,{badgeId:l,size:n},l)),o>0&&a.jsx(Jf,{delayDuration:0,children:a.jsxs(Zf,{children:[a.jsx(em,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(eI,{children:a.jsx(gu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=ii[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function BH(){const{user:t}=at(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=Ts(ze(Le,"leaderboards","all-courses","students",t.uid),p=>{var v;if(p.exists()){const _=p.data();n(_.badges||[]),s(_.loginStreak||0),o(((v=_.processedAssignmentIds)==null?void 0:v.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:ii["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:ii["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:ii["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:ii["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,v)=>v.percentage>p.percentage?v:p)},h=e.length===0?u():null;return a.jsx(ps,{href:"/settings?tab=badges",children:a.jsxs(Re,{className:"flex flex-col h-full cursor-pointer hover:bg-muted/50 transition-colors group","data-testid":"card-dashboard-badges",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(et,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide group-hover:text-foreground transition-colors",children:"My Badges"}),a.jsx(sC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(Be,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(tn,{className:"h-8 w-8 rounded-full"}),a.jsx(tn,{className:"h-3 w-20"})]}):e.length>0?a.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(ec,{badges:e,limit:3,size:"md",className:"mt-2"})]}),a.jsx(ae,{variant:"ghost",size:"sm",className:"w-full text-xs h-7 mt-2 -ml-2 justify-start text-muted-foreground group-hover:text-foreground",children:"View All Collection "})]}):h?a.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(rx,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(cC,{className:"h-5 w-5 text-blue-500"}):a.jsx(zf,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),a.jsx(ae,{variant:"outline",size:"sm",className:"w-full text-xs h-7 bg-transparent",children:"View All Badges "})]}):a.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),a.jsx(ae,{variant:"outline",size:"sm",className:"w-full text-xs h-7 bg-transparent",children:"See How to Unlock"})]})})]})})}function HH(){const{user:t}=at(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=Ts(ze(Le,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(Re,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(et,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(rx,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(Be,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(tn,{className:"h-8 w-16"}),a.jsx(tn,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function WH({courses:t}){const{user:e,accessToken:n}=at(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await pn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const v=pn.extractSheetId(p.sheetUrl);if(!v)return;const _=await pn.fetchAttendanceFromSheet(v,n,e.email,p.emailColumn||"A");_&&(c+=_.stats.attendedClasses,u+=_.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(Re,{"data-testid":"card-attendance-overall",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(et,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(uC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(Be,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(tn,{className:"h-8 w-16"}),a.jsx(tn,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:W("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:W("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"No Data"}),a.jsx(ps,{href:"/attendance",children:a.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Configure"})})]})})]})}function Dd({title:t,value:e,icon:n,variant:r="default"}){return a.jsxs(Re,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(et,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),a.jsx(n,{className:W("h-5 w-5",r==="default"&&"text-muted-foreground",r==="warning"&&"text-foreground",r==="danger"&&"text-destructive")})]}),a.jsx(Be,{children:a.jsx("div",{className:W("text-3xl font-semibold font-mono tracking-tight",r==="danger"&&"text-destructive"),children:e})})]})}function qH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Re,{children:[a.jsx(Ye,{className:"pb-2",children:a.jsx(et,{className:"text-sm font-medium",children:"Weekly Workload"})}),a.jsx(Be,{children:a.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[a.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:n.count>0?n.count:""}),a.jsx("div",{className:W("w-full rounded-t-sm transition-all",n.isToday?"bg-foreground":"bg-muted",n.count===0&&"min-h-[4px]"),style:{height:n.count>0?`${n.count/e*80}px`:"4px"}}),a.jsx("span",{className:W("text-xs",n.isToday?"font-medium":"text-muted-foreground"),children:n.day})]},r))})})]})}function GH({courses:t,assignments:e}){const{user:n}=at(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,v=t.map(x=>x.id),_=new Set(e.map(x=>x.id)),y=f.filter(x=>{const T=x.email||"",A=x.emailDomain||(T.includes("@")?T.split("@")[1]:""),j=x.enrolledCourseIds||[],M=x.processedAssignmentIds||[],N=p&&A&&p===A,S=v.some(k=>j.includes(k)),I=!A&&M.some(k=>_.has(k));return x.id===n.uid?!0:N&&S||I});y.sort((x,T)=>T.totalXP-x.totalXP);const w=y.length;if(w===0){s(null),o(!1);return}const b=y.findIndex(x=>x.id===n.uid);if(b!==-1){const x=b+1,T=Math.round((w-x+1)/w*100),A=y[b];s({rank:x,total:w,percentile:T,xp:A.totalXP||0,badges:A.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=u0(n0(Le,"leaderboards",f,"students"),d0("totalXP","desc")),v=Ts(p,_=>{_.docs.forEach(y=>{const w=y.data(),b={id:y.id,...w,email:w.email||"",emailDomain:w.emailDomain||(w.email?w.email.split("@")[1]:""),enrolledCourseIds:w.enrolledCourseIds||w.subjects||[],processedAssignmentIds:w.processedAssignmentIds||w.completedTasks||[],totalXP:w.totalXP||w.xp||0,badges:w.badges||[]},x=u.get(y.id);(!x||b.totalXP>=x.totalXP)&&u.set(y.id,b)}),h()},_=>{console.error(`Error fetching leaderboard source ${f}:`,_),h()});c.push(v)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Re,{"data-testid":"card-class-rank",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(et,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(ax,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(Be,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(tn,{className:"h-8 w-16"}),a.jsx(tn,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(ps,{href:"/leaderboard",children:a.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function KH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i}=Xr(),{signOut:o}=at(),[l,c]=m.useState(null),u=t();return r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Sn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(ae,{onClick:()=>o(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50/50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/30 rounded-xl shadow-sm animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-700 dark:text-amber-400 shrink-0",children:a.jsx(YO,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm text-foreground font-semibold",children:"Weekly Focus"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have"," ",a.jsxs("span",{className:"font-medium text-amber-700 dark:text-amber-400",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(ps,{href:"/timeline",children:a.jsx(ae,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-200 text-amber-900 hover:bg-amber-100/50 hover:text-amber-950 dark:border-amber-800 dark:text-amber-100 dark:hover:bg-amber-900/50",children:"View Timeline"})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Dd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:nC,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Dd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Fi}),a.jsx(Dd,{title:"Overdue",value:u.overdue,icon:Sn,variant:u.overdue>0?"danger":"default"}),a.jsx(Dd,{title:"Total Active",value:u.totalActive,icon:Ha}),a.jsx(GH,{courses:i,assignments:r}),a.jsx(WH,{courses:i}),a.jsx(BH,{}),a.jsx(HH,{})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(qH,{data:u.weeklyWorkload}),a.jsxs(Re,{children:[a.jsx(Ye,{className:"pb-2",children:a.jsx(et,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(Be,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(GB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(Ha,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx(B0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function QH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=Xr(),{signOut:i}=at(),[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=Rm(),f=t.find(_=>_.id===o),v=e.filter(_=>_.courseId===o).flatMap(_=>_.materials?_.materials.flatMap(y=>{let w=[];return y.driveFile&&w.push({id:y.driveFile.driveFile.id,title:y.driveFile.driveFile.title,link:y.driveFile.driveFile.alternateLink,thumbnail:y.driveFile.driveFile.thumbnailUrl,type:"driveFile"}),w}):[]).filter(_=>!!_.title);return n&&t.length===0?a.jsx(XH,{}):t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Sn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(ae,{onClick:()=>i(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[a.jsxs("div",{className:W("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(_=>a.jsxs("button",{onClick:()=>l(_.id),className:W("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===_.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:W("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===_.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(ub,{className:W("h-4 w-4",o===_.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:_.name}),a.jsx("p",{className:W("text-[10px] uppercase tracking-wider font-medium",o===_.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:_.section||"No Section"})]}),a.jsx(zO,{className:W("h-4 w-4 transition-transform",o===_.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},_.id))})]}),a.jsxs("div",{className:W("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx(tx,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Cs,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[v.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(ae,{variant:"ghost",size:"icon",className:W("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx(rC,{className:"h-4 w-4"})}),a.jsx(ae,{variant:"ghost",size:"icon",className:W("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(JO,{className:"h-4 w-4"})})]})]})]}),v.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:v.map((_,y)=>{var j;const w=((j=_.title)==null?void 0:j.toLowerCase())||"",b=w.endsWith(".pdf"),x=w.endsWith(".ppt")||w.endsWith(".pptx");let T="bg-zinc-100 text-zinc-600",A="FILE";return b?(T="bg-red-100 text-red-600",A="PDF DOCUMENT"):x?(T="bg-orange-100 text-orange-600",A="PRESENTATION"):(T="bg-blue-100 text-blue-600",A="DOCUMENT"),a.jsxs(Re,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(Ye,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:W("h-8 w-8 rounded-full flex items-center justify-center shrink-0",T),children:a.jsx(go,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:_.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:A})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[_.thumbnail?a.jsx("img",{src:_.thumbnail.replace("s220","s800"),alt:_.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var N;M.currentTarget.style.display="none",(N=M.currentTarget.nextElementSibling)==null||N.classList.remove("hidden")}}):null,a.jsx("div",{className:W("absolute inset-0 w-full h-full",_.thumbnail?"hidden":"block"),children:a.jsx(YH,{type:b?"pdf":x?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(ae,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:_.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(iy,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${_.id}-${y}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:v.map((_,y)=>{var j;const w=((j=_.title)==null?void 0:j.toLowerCase())||"",b=w.endsWith(".pdf"),x=w.endsWith(".ppt")||w.endsWith(".pptx");let T="bg-zinc-100 text-zinc-600",A="File";return b?(T="bg-red-100 text-red-600",A="PDF Document"):x?(T="bg-orange-100 text-orange-600",A="Presentation"):(T="bg-blue-100 text-blue-600",A="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:W("h-10 w-10 flex items-center justify-center rounded-md shrink-0",T),children:a.jsx(go,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:_.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[A,"  Read Only"]})]}),a.jsx(ae,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:_.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(iy,{className:"h-4 w-4"})]})})]},`${_.id}-${y}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(ub,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(go,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function XH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(tn,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(tn,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(tn,{className:"h-4 w-20"}),a.jsx(tn,{className:"h-10 w-80"}),a.jsx(tn,{className:"h-4 w-64"})]}),a.jsx(tn,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(tn,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function YH({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:W("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:W("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(go,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(go,{className:"h-40 w-40"})})]})}function JH({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=zH.map(c=>ii[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:W("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:W("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?W(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:W("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:W("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(ay,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,v=0;if(c.id==="perfect-week"?(p=7,v=100):c.id==="attendance-champion"&&(p=30,v=90),p>0){const _=h>0?f/h*100:0,y=Math.min(h/p*100,100),w=Math.min(_/v*100,100),b=Math.min((y+w)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(b),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(_),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var q0="Switch",[ZH,fq]=Yn(q0),[eW,tW]=ZH(q0),lP=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,v]=m.useState(null),_=Ue(e,T=>v(T)),y=m.useRef(!1),w=p?h||!!p.closest("form"):!0,[b=!1,x]=_i({prop:s,defaultProp:i,onChange:u});return a.jsxs(eW,{scope:n,checked:b,disabled:l,children:[a.jsx(ve.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":dP(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:_,onClick:me(t.onClick,T=>{x(A=>!A),w&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})}),w&&a.jsx(nW,{control:p,bubbles:!y.current,name:r,value:c,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});lP.displayName=q0;var cP="SwitchThumb",uP=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tW(cP,n);return a.jsx(ve.span,{"data-state":dP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});uP.displayName=cP;var nW=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=SR(n),l=PC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dP(t){return t?"checked":"unchecked"}var hP=lP,rW=uP;const En=m.forwardRef(({className:t,...e},n)=>a.jsx(hP,{className:W("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(rW,{className:W("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));En.displayName=hP.displayName;var sW="Label",fP=m.forwardRef((t,e)=>a.jsx(ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fP.displayName=sW;var mP=fP;const iW=fu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),On=m.forwardRef(({className:t,...e},n)=>a.jsx(mP,{ref:n,className:W(iW(),t),...e}));On.displayName=mP.displayName;var ag="rovingFocusGroup.onEntryFocus",oW={bubbles:!1,cancelable:!0},Um="RovingFocusGroup",[Xy,pP,aW]=Yv(Um),[lW,gP]=Yn(Um,[aW]),[cW,uW]=lW(Um),yP=m.forwardRef((t,e)=>a.jsx(Xy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Xy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(dW,{...t,ref:e})})}));yP.displayName=Um;var dW=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),v=Ue(e,p),_=H0(i),[y=null,w]=_i({prop:o,defaultProp:l,onChange:c}),[b,x]=m.useState(!1),T=sn(u),A=pP(n),j=m.useRef(!1),[M,N]=m.useState(0);return m.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(ag,T),()=>S.removeEventListener(ag,T)},[T]),a.jsx(cW,{scope:n,orientation:r,dir:_,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(S=>w(S),[w]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(S=>S+1),[]),onFocusableItemRemove:m.useCallback(()=>N(S=>S-1),[]),children:a.jsx(ve.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{j.current=!0}),onFocus:me(t.onFocus,S=>{const C=!j.current;if(S.target===S.currentTarget&&C&&!b){const I=new CustomEvent(ag,oW);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const k=A().filter(U=>U.focusable),D=k.find(U=>U.active),P=k.find(U=>U.id===y),se=[D,P,...k].filter(Boolean).map(U=>U.ref.current);wP(se,h)}}j.current=!1}),onBlur:me(t.onBlur,()=>x(!1))})})}),vP="RovingFocusGroupItem",xP=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=cs(),c=i||l,u=uW(vP,n),h=u.currentTabStopId===c,f=pP(n),{onFocusableItemAdd:p,onFocusableItemRemove:v}=u;return m.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),a.jsx(Xy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(ve.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,_=>{r?u.onItemFocus(c):_.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const y=mW(_,u.orientation,u.dir);if(y!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let b=f().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const x=b.indexOf(_.currentTarget);b=u.loop?pW(b,x+1):b.slice(x+1)}setTimeout(()=>wP(b))}})})})});xP.displayName=vP;var hW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function mW(t,e,n){const r=fW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hW[r]}function wP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function pW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gW=yP,yW=xP,G0="Tabs",[vW,mq]=Yn(G0,[gP]),bP=gP(),[xW,K0]=vW(G0),_P=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=H0(l),[f,p]=_i({prop:r,onChange:s,defaultProp:i});return a.jsx(xW,{scope:n,baseId:cs(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(ve.div,{dir:h,"data-orientation":o,...u,ref:e})})});_P.displayName=G0;var EP="TabsList",SP=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=K0(EP,n),o=bP(n);return a.jsx(gW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});SP.displayName=EP;var TP="TabsTrigger",NP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=K0(TP,n),l=bP(n),c=kP(o.baseId,r),u=AP(o.baseId,r),h=r===o.value;return a.jsx(yW,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(ve.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:me(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});NP.displayName=TP;var CP="TabsContent",IP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=K0(CP,n),c=kP(l.baseId,r),u=AP(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Vi,{present:s||h,children:({present:p})=>a.jsx(ve.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});IP.displayName=CP;function kP(t,e){return`${t}-trigger-${e}`}function AP(t,e){return`${t}-content-${e}`}var wW=_P,RP=SP,PP=NP,jP=IP;const bW=wW,DP=m.forwardRef(({className:t,...e},n)=>a.jsx(RP,{ref:n,className:W("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));DP.displayName=RP.displayName;const lh=m.forwardRef(({className:t,...e},n)=>a.jsx(PP,{ref:n,className:W("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));lh.displayName=PP.displayName;const ch=m.forwardRef(({className:t,...e},n)=>a.jsx(jP,{ref:n,className:W("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ch.displayName=jP.displayName;function _W(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function EW(){const{user:t,requestCalendarPermissions:e}=at(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=Ts(ze(Le,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await Vt(ze(Le,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Vt(ze(Le,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Vt(ze(Le,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Re,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Fi,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Cs,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(ae,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(ae,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(Wa,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(En,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(En,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Bf,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Re,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(sx,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(ps,{href:"/settings/notifications",children:a.jsx(ae,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function SW(){var se,U;const{user:t,signOut:e}=at(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=Xr(),{isInstallable:l,isInstalled:c,promptInstall:u}=_W(),{theme:h,setTheme:f}=m0(),[p,v]=m.useState(!0),[_,y]=m.useState("auto"),[w,b]=m.useState(!1),[x,T]=m.useState([]),[A,j]=m.useState(0),[M,N]=m.useState(0),[S,C]=m.useState(),[I,k]=m.useState("general");m.useEffect(()=>{const O=new URLSearchParams(window.location.search).get("tab");O&&["general","badges","integrations"].includes(O)&&k(O)},[]),m.useEffect(()=>{if(!t)return;const H=Ts(ze(Le,"leaderboards","all-courses","students",t.uid),O=>{var L;if(O.exists()){const z=O.data();T(z.badges||[]),j(z.loginStreak||0),N(((L=z.processedAssignmentIds)==null?void 0:L.length)||0)}else T([]),j(0),N(0)});return()=>H()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let H=0,O=0;o.forEach(L=>{if(L.attendanceData&&typeof L.attendanceData=="object"){const z=Object.values(L.attendanceData);H+=z.length,O+=z.filter(F=>typeof F=="string"?F.toLowerCase()==="present":F===!0||F===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:H,attendedClasses:O}),H>0&&C({total:H,attended:O})},[o]),m.useEffect(()=>{if(!t||I!=="badges")return;(async()=>{var le;const O=ze(Le,"leaderboards","all-courses","students",t.uid),L=await Gr(O);if(!L.exists())return;const z=L.data(),F=new Set(z.badges||[]);let X=!1;const Y=z.loginStreak||0;Y>=5&&!F.has("5-day-consistent")&&(F.add("5-day-consistent"),X=!0),Y>=10&&!F.has("10-day-consistent")&&(F.add("10-day-consistent"),X=!0),Y>=30&&!F.has("30-day-consistent")&&(F.add("30-day-consistent"),X=!0);const J=((le=z.processedAssignmentIds)==null?void 0:le.length)||0;J>=10&&!F.has("10-submissions")&&(F.add("10-submissions"),X=!0),J>=25&&!F.has("25-submissions")&&(F.add("25-submissions"),X=!0),J>=50&&!F.has("50-submissions")&&(F.add("50-submissions"),X=!0),X&&await Vt(O,{badges:Array.from(F)},{merge:!0})})()},[t,I]);const D=((se=t==null?void 0:t.displayName)==null?void 0:se.split(" ").map(H=>H[0]).join("").toUpperCase())||((U=t==null?void 0:t.email)==null?void 0:U[0].toUpperCase())||"U",P=()=>n?n.toLocaleString():"Never",B=async()=>{b(!0);try{await u()}catch(H){console.error("Install failed:",H)}finally{b(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(bW,{value:I,onValueChange:k,className:"w-full",children:[a.jsxs(DP,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(lh,{value:"general",children:"General"}),a.jsx(lh,{value:"badges",children:"Badges"}),a.jsx(lh,{value:"integrations",children:"Integrations"})]}),a.jsxs(ch,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{className:"text-base",children:"Connected Account"}),a.jsx(mn,{children:"Your Google account linked to this app"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(ni,{className:"h-12 w-12",children:[a.jsx(ri,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(si,{children:D})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Mh,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(cr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",P()]})]}),a.jsxs(ae,{variant:"outline",size:"sm",onClick:H=>{H.preventDefault(),s().catch(O=>{console.error("Sync failed:",O)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(Bf,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{className:"text-base",children:"Sync Settings"}),a.jsx(mn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(En,{id:"background-sync",checked:p,onCheckedChange:v,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{className:"text-base",children:"Theme"}),a.jsx(mn,{children:"Choose your preferred color theme"})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(ae,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(ox,{className:"h-4 w-4"}),"Light"]}),a.jsxs(ae,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Re,{className:"border-primary/20",children:[a.jsxs(Ye,{children:[a.jsxs(et,{className:"text-base flex items-center gap-2",children:[a.jsx(cb,{className:"h-4 w-4"}),"Install App"]}),a.jsx(mn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(Be,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Mh,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(s5,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(ae,{onClick:B,disabled:w,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(cb,{className:"h-4 w-4 mr-2"}),w?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(Hf,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{className:"text-base",children:"Preferences"}),a.jsx(mn,{children:"Customize your experience"})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(yf,{value:_,onValueChange:y,children:[a.jsx(eu,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(vf,{})}),a.jsxs(tu,{children:[a.jsx(bt,{value:"auto",children:"Auto-detect"}),a.jsx(bt,{value:"America/New_York",children:"Eastern Time"}),a.jsx(bt,{value:"America/Chicago",children:"Central Time"}),a.jsx(bt,{value:"America/Denver",children:"Mountain Time"}),a.jsx(bt,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(bt,{value:"Europe/London",children:"London"}),a.jsx(bt,{value:"Europe/Paris",children:"Paris"}),a.jsx(bt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsxs(et,{className:"text-base flex items-center gap-2",children:[a.jsx(Uc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(mn,{children:"Manage your session"})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(AA,{children:[a.jsx(RA,{asChild:!0,children:a.jsxs(ae,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Uc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(S0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(I0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(k0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(ch,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsxs(et,{className:"text-base flex items-center gap-2",children:[a.jsx(sC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(mn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(Be,{children:a.jsx(JH,{earnedBadges:x,currentStreak:A,submissionCount:M,attendanceStats:S})})]})}),a.jsx(ch,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(EW,{})})]})]})}function TW(){const{user:t,requestGmailPermissions:e,accessToken:n}=at(),{toast:r}=Mo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function _(){if(t)try{const y=ze(Le,"users",t.uid,"settings","notifications"),w=await Gr(y);if(w.exists()){const b=w.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(y){console.error("Failed to load settings from Firestore",y)}finally{f(!1)}}_()},[t]),m.useEffect(()=>{async function _(){if(!(!t||h))try{const w=ze(Le,"users",t.uid,"settings","notifications");await Vt(w,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(w){console.error("Failed to save settings",w)}}const y=setTimeout(_,1e3);return()=>clearTimeout(y)},[s,o,t,h]);const p=async()=>{u(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const y={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},w=`trace_email_events_${t.uid}`,b=JSON.parse(localStorage.getItem(w)||"[]");localStorage.setItem(w,JSON.stringify([...b,y]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(_){console.error(_),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},v=_=>{l(y=>({...y,[_]:!y[_]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ps,{href:"/settings",children:a.jsx(ae,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(tx,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Re,{className:"border-border shadow-sm",children:[a.jsxs(Ye,{className:"pb-4",children:[a.jsxs(et,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(sx,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(mn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(cr,{}),a.jsxs(Be,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(En,{checked:o.dueReminder,onCheckedChange:()=>v("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(cr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(En,{checked:o.missedSubmission,onCheckedChange:()=>v("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(cr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(On,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(En,{checked:o.workloadWarning,onCheckedChange:()=>v("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(z0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(Ha,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(ae,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(Hf,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(ae,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(Wa,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function NW(){const[t,e]=Kv(),{user:n,requestCalendarPermissions:r}=at(),{toast:s}=Mo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const _=Ts(ze(Le,"users",n.uid,"settings","calendar"),y=>{y.exists()&&h(y.data()),o(!1)});return()=>_()},[n]);const f=async()=>{c(!0);try{await r()?(await Vt(ze(Le,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(_){console.error(_),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Vt(ze(Le,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(_){console.error(_)}},v=async(_,y)=>{h(w=>({...w,[_]:y}));try{await Vt(ze(Le,"users",n.uid,"settings","calendar"),{[_]:y},{merge:!0})}catch(w){console.error(w)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Wa,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(UO,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Re,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ye,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Fi,{className:"h-6 w-6"})}),a.jsx(et,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Cs,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(mn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(ae,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(ae,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(Wa,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(Be,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(cr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(En,{checked:u.syncAssignments,onCheckedChange:_=>v("syncAssignments",_)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(En,{checked:u.syncExams,onCheckedChange:_=>v("syncExams",_)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(En,{checked:u.syncPersonal,onCheckedChange:_=>v("syncPersonal",_)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(Bf,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(CW,{})]})]})}function CW(){const{user:t,requestGmailPermissions:e}=at(),{toast:n}=Mo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=Ts(ze(Le,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Vt(ze(Le,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Vt(ze(Le,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await Vt(ze(Le,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Re,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ye,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(et,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Cs,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(mn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(ae,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(ae,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(Wa,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(Be,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(cr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(En,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(En,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}var Q0="Progress",X0=100,[IW,pq]=Yn(Q0),[kW,AW]=IW(Q0),MP=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=RW,...o}=t;(s||s===0)&&!RE(s)&&console.error(PW(`${s}`,"Progress"));const l=RE(s)?s:X0;r!==null&&!PE(r,l)&&console.error(jW(`${r}`,"Progress"));const c=PE(r,l)?r:null,u=xf(c)?i(c,l):void 0;return a.jsx(kW,{scope:n,value:c,max:l,children:a.jsx(ve.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":xf(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":VP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});MP.displayName=Q0;var OP="ProgressIndicator",LP=m.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=AW(OP,n);return a.jsx(ve.div,{"data-state":VP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});LP.displayName=OP;function RW(t,e){return`${Math.round(t/e*100)}%`}function VP(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function xf(t){return typeof t=="number"}function RE(t){return xf(t)&&!isNaN(t)&&t>0}function PE(t,e){return xf(t)&&!isNaN(t)&&t<=e&&t>=0}function PW(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${X0}\`.`}function jW(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${X0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var FP=MP,DW=LP;const UP=m.forwardRef(({className:t,value:e,...n},r)=>a.jsx(FP,{ref:r,className:W("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(DW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));UP.displayName=FP.displayName;function MW(){var I,k,D,P,B,se;const{user:t,signOut:e}=at(),{courses:n,assignments:r,isLoading:s}=Xr(),[i,o]=m.useState("class"),[l,c]=m.useState([]),[u,h]=m.useState(!1),[f,p]=m.useState(!0),[v,_]=m.useState(!0),[y,w]=m.useState(!1),[b,x]=m.useState(0),[T,A]=m.useState("Initializing...");m.useEffect(()=>{h(!0);const U=Array.from(new Set(["all-courses",...n.map(z=>z.id)])),H=[],O=new Map,L=()=>{const z=[],F=t!=null&&t.email?t.email.split("@")[1]:null,X=n.map(J=>J.id),Y=new Set(r.map(J=>J.id));O.forEach(J=>{const le=J.email||"";let ee=J.emailDomain||"";!ee&&le.includes("@")&&(ee=le.split("@")[1]);const q=J.enrolledCourseIds||[],te=J.processedAssignmentIds||[],pe=F&&ee&&F===ee,re=X.some(je=>q.includes(je)),de=!ee&&te.some(je=>Y.has(je));let Ae=!1;i==="college"?(Ae=!!pe,(J.id===(t==null?void 0:t.uid)||pe)&&console.log(`[College Filter] Student: ${J.displayName}, Domain: ${ee}, User Domain: ${F}, Match: ${pe}`)):Ae=pe&&re||de,Ae&&z.push(J)}),z.sort((J,le)=>le.totalXP-J.totalXP),c(z),h(!1)};return U.forEach(z=>{const F=n0(Le,"leaderboards",z,"students"),X=u0(F,d0("totalXP","desc"),C2(50)),Y=Ts(X,J=>{J.forEach(le=>{const ee=le.data(),q={id:le.id,displayName:ee.displayName||ee.name||"Anonymous",photoUrl:ee.photoUrl||ee.avatar||"",totalXP:ee.totalXP||ee.xp||0,processedAssignmentIds:ee.processedAssignmentIds||ee.completedTasks||[],email:ee.email||"",emailDomain:ee.emailDomain||(ee.email?ee.email.split("@")[1]:""),enrolledCourseIds:ee.enrolledCourseIds||ee.subjects||[],badges:ee.badges||[]},te=O.get(le.id);(!te||q.totalXP>=te.totalXP)&&O.set(le.id,q)}),L()});H.push(Y)}),()=>{H.forEach(z=>z())}},[i,t,n,r]);const j=async()=>{if(!t)return;w(!0),x(5),A("Fetching historical classroom data...");const U=r;x(20),A(`Scanning ${U.length} past assignments...`);let H=0;const O=[],L=F=>new Promise(X=>setTimeout(X,F));let z=0;for(const F of U)if(z++,z%5===0&&(x(20+z/U.length*60),await L(10)),F.systemStatus==="submitted"||F.systemStatus==="graded"){if(H+=100,F.submittedAt&&F.dueDate){const Y=new Date(F.submittedAt).getTime();(new Date(F.dueDate).getTime()-Y)/(1e3*60*60)>48&&(H+=50)}O.push(F.id)}x(90),A("Syncing to leaderboard...");try{const F=ze(Le,"leaderboards","all-courses","students",t.uid),X=await Gr(F),Y=new Set(X.exists()?X.data().badges||[]:[]),J=O.length;J>=10&&Y.add("10-submissions"),J>=25&&Y.add("25-submissions"),J>=50&&Y.add("50-submissions");const le=t.email||"",ee=le.includes("@")?le.split("@")[1]:"",q=n.map(te=>te.id);await Vt(F,{displayName:t.displayName||"Anonymous",photoUrl:t.photoURL||"",email:le,emailDomain:ee,enrolledCourseIds:q,totalXP:H,processedAssignmentIds:O,lastSyncedAt:Im(),badges:Array.from(Y)},{merge:!0}),x(100),A("Synchronization Complete!"),await L(500)}catch(F){console.error("Sync Failed",F),A("Sync Failed. Please try again.")}finally{w(!1)}},M=i==="class"?"My Class":"My College",N=l.find(U=>U.id===(t==null?void 0:t.uid)),S=(N==null?void 0:N.totalXP)||0,C=!!N&&S>0;return!s&&n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(Sn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(ae,{onClick:()=>e(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[M," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(yf,{value:i,onValueChange:U=>o(U),children:[a.jsx(eu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(vf,{placeholder:"Select View"})}),a.jsxs(tu,{children:[a.jsx(bt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(bt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[f&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>p(!1),children:a.jsx(Ei,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(GO,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),i==="college"&&v&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>_(!1),children:a.jsx(Ei,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(Sn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(lC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(Hf,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!C&&!u||y?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:y?a.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs font-mono uppercase text-muted-foreground",children:[a.jsx("span",{children:T}),a.jsxs("span",{children:[Math.round(b),"%"]})]}),a.jsx(UP,{value:b,className:"h-2"})]}):a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(t5,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"No Score Detected"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Calculate your XP based on all your past submitted assignments to join the leaderboard."})]}),a.jsx(ae,{onClick:j,size:"lg",className:"mt-2 font-semibold w-full sm:w-auto",children:"Calculate My Archive Score"})]})}):null,u&&l.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(U=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},U))}):l.length===0&&!y?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[l.length>0&&a.jsxs("div",{className:W("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",f?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:l[1]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(ni,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(ri,{src:l[1].photoUrl}),a.jsx(si,{className:"text-lg bg-zinc-100 text-zinc-500",children:(k=(I=l[1].displayName)==null?void 0:I[0])==null?void 0:k.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[1].totalXP.toLocaleString()," XP"]}),a.jsx(ec,{badges:l[1].badges||[],limit:2,size:"md",className:"justify-center pt-1"})]})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(HO,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(ni,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(ri,{src:l[0].photoUrl}),a.jsx(si,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(P=(D=l[0].displayName)==null?void 0:D[0])==null?void 0:P.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:l[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[l[0].totalXP.toLocaleString()," XP"]}),a.jsx(ec,{badges:l[0].badges||[],limit:3,size:"md",className:"justify-center pt-1"})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:l[2]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(ni,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(ri,{src:l[2].photoUrl}),a.jsx(si,{className:"text-lg bg-amber-50 text-amber-700",children:(se=(B=l[2].displayName)==null?void 0:B[0])==null?void 0:se.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[2].totalXP.toLocaleString()," XP"]}),a.jsx(ec,{badges:l[2].badges||[],limit:2,size:"md",className:"justify-center pt-1"})]})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:l.slice(3).map((U,H)=>{var z,F;const O=U.id===(t==null?void 0:t.uid),L=H+4;return a.jsxs("div",{className:W("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",O?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:["#",L]})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(ni,{className:W("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",O?"border-primary/20":"border-border"),children:[a.jsx(ri,{src:U.photoUrl}),a.jsx(si,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(F=(z=U.displayName)==null?void 0:z[0])==null?void 0:F.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:W("text-xs sm:text-sm font-medium truncate",O?"text-primary":"text-foreground"),children:[U.displayName," ",O&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(ec,{badges:U.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[U.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:U.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},U.id)})})]})]})})]})}const OW=b0,LW=_0,zP=m.forwardRef(({className:t,...e},n)=>a.jsx(Iu,{ref:n,className:W("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));zP.displayName=Iu.displayName;const $P=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(LW,{children:[a.jsx(zP,{}),a.jsxs(ku,{ref:r,className:W("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(Am,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$P.displayName=ku.displayName;const BP=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});BP.displayName="DialogHeader";const HP=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});HP.displayName="DialogFooter";const WP=m.forwardRef(({className:t,...e},n)=>a.jsx(Au,{ref:n,className:W("text-lg font-semibold leading-none tracking-tight",t),...e}));WP.displayName=Au.displayName;const qP=m.forwardRef(({className:t,...e},n)=>a.jsx(Ru,{ref:n,className:W("text-sm text-muted-foreground",t),...e}));qP.displayName=Ru.displayName;const jE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function VW(){const{courses:t}=Xr(),{accessToken:e,user:n}=at(),{toast:r}=Mo(),[s,i]=m.useState(""),[o,l]=m.useState({}),[c,u]=m.useState(""),[h,f]=m.useState(null),[p,v]=m.useState(!1);m.useEffect(()=>{if(!t||!n)return;(async()=>{const C=await Promise.all(t.map(async k=>{var P;if(((P=o[k.id])==null?void 0:P.state)==="loaded")return o[k.id];const D=await pn.getCourseConfig(k.id);if(console.log(`[DEBUG] Course ${k.name} (${k.id}): Config =`,D),D)if(D.isVisible){const B=`unlocked_${n.uid}_${k.id}`;return localStorage.getItem(B)==="true"?(_(k.id,D.sheetUrl),{courseId:k.id,state:"loading"}):{courseId:k.id,state:"locked"}}else return{courseId:k.id,state:"hidden"};else return{courseId:k.id,state:"no-config"}})),I={};C.forEach(k=>{I[k.courseId]=k}),l(k=>({...k,...I}))})()},[t,n]),m.useEffect(()=>{t.length>0&&!s&&i(t[0].id)},[t,s]);const _=async(S,C)=>{if(!e||!(n!=null&&n.email))return;const I=pn.extractSheetId(C);if(!I){l(P=>({...P,[S]:{courseId:S,state:"error",error:"Invalid configuration"}}));return}const k=await pn.getCourseConfig(S),D=(k==null?void 0:k.emailColumn)||"A";try{const P=await pn.fetchAttendanceFromSheet(I,e,n.email,D);l(B=>({...B,[S]:{courseId:S,state:"loaded",data:P}}))}catch(P){console.error(P),l(B=>({...B,[S]:{courseId:S,state:"error",error:P.message||"Failed to load"}}))}},y=async()=>{if(!h||!n)return;if(await pn.validatePassKey(h,c)){const C=`unlocked_${n.uid}_${h}`;localStorage.setItem(C,"true"),f(null),u(""),r({title:"Course Unlocked",description:"Fetching attendance details..."}),l(k=>({...k,[h]:{courseId:h,state:"loading"}}));const I=await pn.getCourseConfig(h);I&&_(h,I.sheetUrl)}else r({title:"Incorrect Key",description:"Please ask your teacher for the correct pass key.",variant:"destructive"})},w=async S=>{S==null||S.stopPropagation(),v(!0);const C=Object.values(o).filter(I=>I.state==="loaded"||I.state==="error"||I.state==="loading").map(async I=>{const k=await pn.getCourseConfig(I.courseId);return k?_(I.courseId,k.sheetUrl):Promise.resolve()});await Promise.allSettled(C),v(!1)},b=Object.values(o).filter(S=>S.state==="loaded"&&S.data),x=b.reduce((S,C)=>{var I;return S+(((I=C.data)==null?void 0:I.stats.attendedClasses)||0)},0),T=b.reduce((S,C)=>{var I;return S+(((I=C.data)==null?void 0:I.stats.totalClasses)||0)},0),A=jE(x,T),j=o[s],M=t.find(S=>S.id===s),N=j==null?void 0:j.data;return m.useEffect(()=>{if(!n||T<5)return;const C=setTimeout(async()=>{const I=[],k=x,D=T,P=D>0?k/D:0;if(D>=10&&P===1&&I.push("perfect-week"),D>=30&&P>=.95&&I.push("attendance-champion"),I.length>0)try{const B=ze(Le,"leaderboards","all-courses","students",n.uid);await R2(B,{badges:j2(...I)})}catch(B){console.debug("Could not award attendance badges:",B)}},3e3);return()=>clearTimeout(C)},[n,T,x]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"flex-none px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-lg font-semibold tracking-tight text-foreground",children:"Attendance"}),a.jsx("span",{className:"h-4 w-px bg-border mx-1"}),a.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Academic Year 2024-25"})]}),a.jsxs(ae,{variant:"ghost",size:"sm",onClick:w,className:W("text-muted-foreground h-8",p&&"opacity-70"),children:[a.jsx(zc,{className:W("h-3.5 w-3.5 mr-2",p&&"animate-spin")}),"Refresh Data"]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:a.jsx(Re,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(Be,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Cs,{variant:A.status==="safe"?"outline":"destructive",className:W("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",A.color),children:A.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[A.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",b.length," active courses"]})]})]})})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(S=>{var P,B;const C=o[S.id],I=(C==null?void 0:C.state)||"loading",k=C!=null&&C.data?jE(C.data.stats.attendedClasses,C.data.stats.totalClasses):null,D=s===S.id;return a.jsx(Re,{className:W("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",D&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>i(S.id),children:a.jsxs(Be,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Zf,{children:[a.jsx(em,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:S.name})}),a.jsx(gu,{children:a.jsx("p",{children:S.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:S.section||"No Section"})]}),I==="loaded"&&k&&a.jsxs("span",{className:W("text-lg font-bold tabular-nums",k.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[k.percentage,"%"]}),I==="hidden"&&a.jsx(oy,{className:"h-5 w-5 text-muted-foreground/50"}),I==="locked"&&a.jsx(ay,{className:"h-5 w-5 text-amber-500/80"}),I==="error"&&a.jsx(Hf,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[I==="loaded"&&k&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(P=C.data)==null?void 0:P.stats.attendedClasses,"/",(B=C.data)==null?void 0:B.stats.totalClasses," classes"]}),a.jsx("span",{className:k.status==="safe"?"text-emerald-500":"text-red-500",children:k.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:W("h-full rounded-full transition-all duration-500",k.progressColor),style:{width:`${k.percentage}%`}})})]}),I==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(ae,{size:"sm",variant:"secondary",className:"w-full",onClick:se=>{se.stopPropagation(),f(S.id)},children:[a.jsx(KO,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),I==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),I==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),I==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:C==null?void 0:C.error}),I==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(zc,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},S.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(zf,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(M==null?void 0:M.section)||(M==null?void 0:M.name.slice(0,3).toUpperCase())})]}),a.jsx(Re,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:N?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:N.history.map((S,C)=>{const I=S.status==="Present",k=C===0,D=C===5;return a.jsxs("div",{className:"group",children:[k&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),D&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:W("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",I?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),C!==N.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:W("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",I?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:S.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:S.date})]})})]})]},C)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(j==null?void 0:j.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(ay,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(j==null?void 0:j.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(oy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((j==null?void 0:j.state)==="error"||(j==null?void 0:j.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})}),a.jsx(OW,{open:!!h,onOpenChange:S=>!S&&f(null),children:a.jsxs($P,{className:"sm:max-w-md",children:[a.jsxs(BP,{children:[a.jsx(WP,{children:"Unlock Attendance"}),a.jsx(qP,{children:"Enter the pass key provided by your teacher to view attendance for this course."})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(On,{htmlFor:"pass-key",children:"Pass Key"}),a.jsx(Sa,{id:"pass-key",type:"password",placeholder:"ENTER-KEY",value:c,onChange:S=>u(S.target.value),className:"uppercase tracking-widest font-mono text-center text-lg"})]})}),a.jsxs(HP,{children:[a.jsx(ae,{variant:"outline",onClick:()=>f(null),children:"Cancel"}),a.jsx(ae,{onClick:y,children:"Unlock Access"})]})]})})]})}function FW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Re,{className:"w-full max-w-md mx-4",children:a.jsxs(Be,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(Sn,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function GP(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const UW=864e5;function Yy(t){const e=GP(t);return e.setHours(0,0,0,0),e}function DE(t){const e=GP(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function zW(t,e){const n=Yy(t),r=Yy(e),s=+n-DE(n),i=+r-DE(r);return Math.round((s-i)/UW)}function $W(){const{user:t}=at();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=ze(Le,"leaderboards","all-courses","students",t.uid),r=await Gr(n),s=Yy(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=zW(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await Vt(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const BW=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function Y0({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:BW;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(Wa,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(lC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Student Sphere Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(JN,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(oC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const HW=["You can hide attendance visibility for specific courses during exams.","Secure pass keys are auto-generated for each course sheet.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function WW({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,v;const{user:s,signOut:i}=at(),{theme:o,toggleTheme:l}=m0(),c=Rm(),u=[{id:"dashboard",label:"Dashboard",icon:QO},{id:"courses",label:"Courses",icon:nx},{id:"settings",label:"Settings",icon:aC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(_=>_[0]).join("").toUpperCase())||((v=s==null?void 0:s.email)==null?void 0:v[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(Ei,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(ni,{className:"h-8 w-8",children:[a.jsx(ri,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(si,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(_=>a.jsxs("button",{onClick:()=>{e(_.id),c&&r()},className:W("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===_.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(_.icon,{className:"h-4 w-4"}),_.label]},_.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(ox,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(ae,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Uc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:W("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function qW({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>pn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Re,{className:"border-border shadow-sm",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(nx,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Re,{className:"border-border shadow-sm",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(WO,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Re,{className:"border-border shadow-sm",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(oy,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function GW({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(ae,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(zc,{className:W("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Re,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(ae,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(KW,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(ae,{variant:"link",onClick:e,children:"Try Syncing Again"})]})]})]})}function KW({courseId:t}){const{toast:e}=Mo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState("A"),[h,f]=m.useState(!1),[p,v]=m.useState(!0);m.useEffect(()=>{let y=!0;return(async()=>{v(!0);const b=await pn.getCourseConfig(t);y&&b?(r(b.isVisible),l(b.passKey),i(b.sheetUrl),u(b.emailColumn||"A")):y&&l(Math.random().toString(36).slice(-8).toUpperCase()),y&&v(!1)})(),()=>{y=!1}},[t]);const _=async()=>{if(!pn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}f(!0);try{await pn.saveCourseConfig(t,{sheetUrl:s,passKey:o,isVisible:n,emailColumn:c.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>f(!1),2e3)}catch{f(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return p?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(zc,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cs,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(En,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(On,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(Sa,{id:`sheet-${t}`,value:s,onChange:y=>i(y.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(On,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(Sa,{id:`email-col-${t}`,value:c,onChange:y=>u(y.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(On,{htmlFor:`key-${t}`,children:"Pass Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Sa,{id:`key-${t}`,type:"text",value:o,readOnly:!0,className:"font-mono bg-muted flex-1"}),a.jsx(ae,{variant:"outline",size:"icon",title:"Copy to Clipboard",onClick:()=>{navigator.clipboard.writeText(o),e({title:"Copied!",description:"Pass key copied to clipboard."})},children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a.jsx(ae,{variant:"outline",size:"icon",title:"Regenerate Key",onClick:()=>l(Math.random().toString(36).slice(-8).toUpperCase()),children:a.jsx(zc,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this key with your students. They will need it to access attendance data."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(ae,{onClick:_,disabled:h,className:"w-full sm:w-auto",children:h?a.jsxs(a.Fragment,{children:[a.jsx(tC,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(ix,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function QW(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{children:"Notifications"}),a.jsx(mn,{children:"Configure how you receive alerts."})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(LO,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(On,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(En,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Re,{children:[a.jsxs(Ye,{children:[a.jsx(et,{children:"Display"}),a.jsx(mn,{children:"Customize your dashboard appearance."})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(On,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function XW(){const{accessToken:t}=at(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(Y0,{message:"Preparing Teacher Workspace...",tips:HW}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(WW,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(iC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(qW,{courses:r}),e==="courses"&&a.jsx(GW,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(QW,{})]})]})]})}function YW(){const{signOut:t,signInWithGoogle:e}=at();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Re,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(Ye,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(BO,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(et,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(mn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ZN,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(nx,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(JN,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(z0,{className:"flex flex-col gap-2",children:[a.jsx(ae,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(ae,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function JW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(tx,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const ZW=()=>"/";function eq(){const[t,e]=m.useState(!1),{isLoading:n}=Xr(),r=ZW();return n?a.jsx(Y0,{message:"Setting up your workspace..."}):a.jsx(mN,{base:r,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(U7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx($W,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(z7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(hM,{children:[a.jsx(kr,{path:"/",component:oH}),a.jsx(kr,{path:"/leaderboard",component:MW}),a.jsx(kr,{path:"/timeline",component:UH}),a.jsx(kr,{path:"/dashboard",component:KH}),a.jsx(kr,{path:"/notes",component:QH}),a.jsx(kr,{path:"/attendance",component:VW}),a.jsx(kr,{path:"/settings",component:SW}),a.jsx(kr,{path:"/settings/notifications",component:TW}),a.jsx(kr,{path:"/settings/integrations",component:NW}),a.jsx(kr,{component:FW})]})})]})]})})}function tq(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(JW,{});const{user:t,loading:e,role:n}=at();return e?a.jsx(Y0,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(XW,{}):n==="no_access"?a.jsx(YW,{}):a.jsx(y8,{children:a.jsx(eq,{})}):a.jsx(J7,{})}function nq(){return a.jsx(OM,{client:FM,children:a.jsx(c8,{children:a.jsx(l8,{children:a.jsxs(Jf,{children:[a.jsx($5,{}),a.jsx(tq,{})]})})})})}rN(document.getElementById("root")).render(a.jsx(nq,{}));
