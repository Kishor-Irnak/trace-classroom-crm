var Rw=t=>{throw TypeError(t)};var Zm=(t,e,n)=>e.has(t)||Rw("Cannot "+n);var G=(t,e,n)=>(Zm(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?Rw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(Zm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Wt=(t,e,n)=>(Zm(t,e,"access private method"),n);var Xu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return G(t,e,r)}});function eP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UE={exports:{}},wf={},$E={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),tP=Symbol.for("react.portal"),nP=Symbol.for("react.fragment"),rP=Symbol.for("react.strict_mode"),sP=Symbol.for("react.profiler"),iP=Symbol.for("react.provider"),oP=Symbol.for("react.context"),aP=Symbol.for("react.forward_ref"),lP=Symbol.for("react.suspense"),cP=Symbol.for("react.memo"),uP=Symbol.for("react.lazy"),Pw=Symbol.iterator;function dP(t){return t===null||typeof t!="object"?null:(t=Pw&&t[Pw]||t["@@iterator"],typeof t=="function"?t:null)}var BE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HE=Object.assign,WE={};function sl(t,e,n){this.props=t,this.context=e,this.refs=WE,this.updater=n||BE}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qE(){}qE.prototype=sl.prototype;function Xy(t,e,n){this.props=t,this.context=e,this.refs=WE,this.updater=n||BE}var Jy=Xy.prototype=new qE;Jy.constructor=Xy;HE(Jy,sl.prototype);Jy.isPureReactComponent=!0;var Dw=Array.isArray,GE=Object.prototype.hasOwnProperty,Zy={current:null},KE={key:!0,ref:!0,__self:!0,__source:!0};function QE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)GE.call(e,r)&&!KE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:au,type:t,key:i,ref:o,props:s,_owner:Zy.current}}function hP(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ev(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function fP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mw=/\/+/g;function ep(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fP(""+t.key):e.toString(36)}function Md(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case au:case tP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ep(o,0):r,Dw(s)?(n="",t!=null&&(n=t.replace(Mw,"$&/")+"/"),Md(s,e,n,"",function(u){return u})):s!=null&&(ev(s)&&(s=hP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Mw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+ep(i,l);o+=Md(i,e,n,c,s)}else if(c=dP(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+ep(i,l++),o+=Md(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ju(t,e,n){if(t==null)return t;var r=[],s=0;return Md(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},Od={transition:null},pP={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:Od,ReactCurrentOwner:Zy};function YE(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!ev(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=sl;Ce.Fragment=nP;Ce.Profiler=sP;Ce.PureComponent=Xy;Ce.StrictMode=rP;Ce.Suspense=lP;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pP;Ce.act=YE;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)GE.call(e,c)&&!KE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:au,type:t.type,key:s,ref:i,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:oP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iP,_context:t},t.Consumer=t};Ce.createElement=QE;Ce.createFactory=function(t){var e=QE.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:aP,render:t}};Ce.isValidElement=ev;Ce.lazy=function(t){return{$$typeof:uP,_payload:{_status:-1,_result:t},_init:mP}};Ce.memo=function(t,e){return{$$typeof:cP,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Od.transition;Od.transition={};try{t()}finally{Od.transition=e}};Ce.unstable_act=YE;Ce.useCallback=function(t,e){return un.current.useCallback(t,e)};Ce.useContext=function(t){return un.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return un.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return un.current.useEffect(t,e)};Ce.useId=function(){return un.current.useId()};Ce.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return un.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};Ce.useRef=function(t){return un.current.useRef(t)};Ce.useState=function(t){return un.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return un.current.useTransition()};Ce.version="18.3.1";$E.exports=Ce;var m=$E.exports;const Ne=zE(m),XE=eP({__proto__:null,default:Ne},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=m,yP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),xP=Object.prototype.hasOwnProperty,wP=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bP={key:!0,ref:!0,__self:!0,__source:!0};function JE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xP.call(e,r)&&!bP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yP,type:t,key:i,ref:o,props:s,_owner:wP.current}}wf.Fragment=vP;wf.jsx=JE;wf.jsxs=JE;UE.exports=wf;var a=UE.exports,ZE={exports:{}},Fn={},eS={exports:{}},tS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var U=O.length;O.push(B);e:for(;0<U;){var H=U-1>>>1,Q=O[H];if(0<s(Q,B))O[H]=B,O[U]=Q,U=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],U=O.pop();if(U!==B){O[0]=U;e:for(var H=0,Q=O.length,te=Q>>>1;H<te;){var J=2*(H+1)-1,X=O[J],re=J+1,L=O[re];if(0>s(X,U))re<Q&&0>s(L,X)?(O[H]=L,O[re]=U,H=re):(O[H]=X,O[J]=U,H=J);else if(re<Q&&0>s(L,U))O[H]=L,O[re]=U,H=re;else break e}}return B}function s(O,B){var U=O.sortIndex-B.sortIndex;return U!==0?U:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,y=!1,b=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function I(O){if(v=!1,_(O),!b)if(n(c)!==null)b=!0,ee(M);else{var B=n(u);B!==null&&Z(I,B.startTime-O)}}function M(O,B){b=!1,v&&(v=!1,w(N),N=-1),y=!0;var U=p;try{for(_(B),f=n(c);f!==null&&(!(f.expirationTime>B)||O&&!A());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var Q=H(f.expirationTime<=B);B=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(c)&&r(c),_(B)}else r(c);f=n(c)}if(f!==null)var te=!0;else{var J=n(u);J!==null&&Z(I,J.startTime-B),te=!1}return te}finally{f=null,p=U,y=!1}}var D=!1,T=null,N=-1,C=5,k=-1;function A(){return!(t.unstable_now()-k<C)}function P(){if(T!==null){var O=t.unstable_now();k=O;var B=!0;try{B=T(!0,O)}finally{B?R():(D=!1,T=null)}}else D=!1}var R;if(typeof x=="function")R=function(){x(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ae=F.port2;F.port1.onmessage=P,R=function(){ae.postMessage(null)}}else R=function(){E(P,0)};function ee(O){T=O,D||(D=!0,R())}function Z(O,B){N=E(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,ee(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var U=p;p=B;try{return O()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=p;p=O;try{return B()}finally{p=U}},t.unstable_scheduleCallback=function(O,B,U){var H=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=U+Q,O={id:h++,callback:B,priorityLevel:O,startTime:U,expirationTime:Q,sortIndex:-1},U>H?(O.sortIndex=U,e(u,O),n(c)===null&&O===n(u)&&(v?(w(N),N=-1):v=!0,Z(I,U-H))):(O.sortIndex=Q,e(c,O),b||y||(b=!0,ee(M))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var B=p;return function(){var U=p;p=B;try{return O.apply(this,arguments)}finally{p=U}}}})(tS);eS.exports=tS;var _P=eS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=m,Ln=_P;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nS=new Set,Ec={};function Lo(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(Ec[t]=e,t=0;t<e.length;t++)nS.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,SP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ow={},Lw={};function TP(t){return og.call(Lw,t)?!0:og.call(Ow,t)?!1:SP.test(t)?Lw[t]=!0:(Ow[t]=!0,!1)}function NP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CP(t,e,n,r){if(e===null||typeof e>"u"||NP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var tv=/[\-:]([a-z])/g;function nv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tv,nv);Bt[e]=new dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tv,nv);Bt[e]=new dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tv,nv);Bt[e]=new dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new dn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function rv(t,e,n,r){var s=Bt.hasOwnProperty(e)?Bt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CP(e,n,s,r)&&(n=null),r||s===null?TP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cs=EP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),sv=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),sS=Symbol.for("react.context"),iv=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),ov=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),iS=Symbol.for("react.offscreen"),Vw=Symbol.iterator;function Vl(t){return t===null||typeof t!="object"?null:(t=Vw&&t[Vw]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,tp;function Kl(t){if(tp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tp=e&&e[1]||""}return`
`+tp+t}var np=!1;function rp(t,e){if(!t||np)return"";np=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{np=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kl(t):""}function kP(t){switch(t.tag){case 5:return Kl(t.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 2:case 15:return t=rp(t.type,!1),t;case 11:return t=rp(t.type.render,!1),t;case 1:return t=rp(t.type,!0),t;default:return""}}function ug(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Zo:return"Portal";case ag:return"Profiler";case sv:return"StrictMode";case lg:return"Suspense";case cg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sS:return(t.displayName||"Context")+".Consumer";case rS:return(t._context.displayName||"Context")+".Provider";case iv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ov:return e=t.displayName||null,e!==null?e:ug(t.type)||"Memo";case Ws:e=t._payload,t=t._init;try{return ug(t(e))}catch{}}return null}function IP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ug(e);case 8:return e===sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AP(t){var e=oS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=AP(t))}function aS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dg(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lS(t,e){e=e.checked,e!=null&&rv(t,"checked",e,!1)}function hg(t,e){lS(t,e);var n=_i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fg(t,e.type,n):e.hasOwnProperty("defaultValue")&&fg(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fg(t,e,n){(e!=="number"||uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ql=Array.isArray;function ha(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Ql(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function cS(t,e){var n=_i(e.value),r=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $w(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,dS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jP=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(t){jP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rc[e]=rc[t]})});function hS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rc.hasOwnProperty(t)&&rc[t]?(""+e).trim():e+"px"}function fS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var RP=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gg(t,e){if(e){if(RP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function yg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vg=null;function av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xg=null,fa=null,ma=null;function Bw(t){if(t=uu(t)){if(typeof xg!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Tf(e),xg(t.stateNode,t.type,e))}}function mS(t){fa?ma?ma.push(t):ma=[t]:fa=t}function pS(){if(fa){var t=fa,e=ma;if(ma=fa=null,Bw(t),e)for(t=0;t<e.length;t++)Bw(e[t])}}function gS(t,e){return t(e)}function yS(){}var sp=!1;function vS(t,e,n){if(sp)return t(e,n);sp=!0;try{return gS(t,e,n)}finally{sp=!1,(fa!==null||ma!==null)&&(yS(),pS())}}function Tc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var wg=!1;if(ys)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){wg=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{wg=!1}function PP(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var sc=!1,dh=null,hh=!1,bg=null,DP={onError:function(t){sc=!0,dh=t}};function MP(t,e,n,r,s,i,o,l,c){sc=!1,dh=null,PP.apply(DP,arguments)}function OP(t,e,n,r,s,i,o,l,c){if(MP.apply(this,arguments),sc){if(sc){var u=dh;sc=!1,dh=null}else throw Error(ne(198));hh||(hh=!0,bg=u)}}function Vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hw(t){if(Vo(t)!==t)throw Error(ne(188))}function LP(t){var e=t.alternate;if(!e){if(e=Vo(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hw(s),t;if(i===r)return Hw(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function wS(t){return t=LP(t),t!==null?bS(t):null}function bS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bS(t);if(e!==null)return e;t=t.sibling}return null}var _S=Ln.unstable_scheduleCallback,Ww=Ln.unstable_cancelCallback,VP=Ln.unstable_shouldYield,FP=Ln.unstable_requestPaint,pt=Ln.unstable_now,zP=Ln.unstable_getCurrentPriorityLevel,lv=Ln.unstable_ImmediatePriority,ES=Ln.unstable_UserBlockingPriority,fh=Ln.unstable_NormalPriority,UP=Ln.unstable_LowPriority,SS=Ln.unstable_IdlePriority,bf=null,Hr=null;function $P(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:WP,BP=Math.log,HP=Math.LN2;function WP(t){return t>>>=0,t===0?32:31-(BP(t)/HP|0)|0}var nd=64,rd=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yl(l):(i&=o,i!==0&&(r=Yl(i)))}else o=n&~s,o!==0?r=Yl(o):i!==0&&(r=Yl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fr(e),s=1<<n,r|=t[n],e&=~s;return r}function qP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=qP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function _g(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TS(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fr(e),t[e]=n}function KP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function cv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function NS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CS,uv,kS,IS,AS,Eg=!1,sd=[],li=null,ci=null,ui=null,Nc=new Map,Cc=new Map,Ks=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qw(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(e.pointerId)}}function zl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=uu(e),e!==null&&uv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YP(t,e,n,r,s){switch(e){case"focusin":return li=zl(li,t,e,n,r,s),!0;case"dragenter":return ci=zl(ci,t,e,n,r,s),!0;case"mouseover":return ui=zl(ui,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Nc.set(i,zl(Nc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cc.set(i,zl(Cc.get(i)||null,t,e,n,r,s)),!0}return!1}function jS(t){var e=oo(t.target);if(e!==null){var n=Vo(e);if(n!==null){if(e=n.tag,e===13){if(e=xS(n),e!==null){t.blockedOn=e,AS(t.priority,function(){kS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vg=r,n.target.dispatchEvent(r),vg=null}else return e=uu(n),e!==null&&uv(e),t.blockedOn=n,!1;e.shift()}return!0}function Gw(t,e,n){Ld(t)&&n.delete(e)}function XP(){Eg=!1,li!==null&&Ld(li)&&(li=null),ci!==null&&Ld(ci)&&(ci=null),ui!==null&&Ld(ui)&&(ui=null),Nc.forEach(Gw),Cc.forEach(Gw)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,Eg||(Eg=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,XP)))}function kc(t){function e(s){return Ul(s,t)}if(0<sd.length){Ul(sd[0],t);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(li!==null&&Ul(li,t),ci!==null&&Ul(ci,t),ui!==null&&Ul(ui,t),Nc.forEach(e),Cc.forEach(e),n=0;n<Ks.length;n++)r=Ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ks.length&&(n=Ks[0],n.blockedOn===null);)jS(n),n.blockedOn===null&&Ks.shift()}var pa=Cs.ReactCurrentBatchConfig,ph=!0;function JP(t,e,n,r){var s=$e,i=pa.transition;pa.transition=null;try{$e=1,dv(t,e,n,r)}finally{$e=s,pa.transition=i}}function ZP(t,e,n,r){var s=$e,i=pa.transition;pa.transition=null;try{$e=4,dv(t,e,n,r)}finally{$e=s,pa.transition=i}}function dv(t,e,n,r){if(ph){var s=Sg(t,e,n,r);if(s===null)pp(t,e,r,gh,n),qw(t,r);else if(YP(s,t,e,n,r))r.stopPropagation();else if(qw(t,r),e&4&&-1<QP.indexOf(t)){for(;s!==null;){var i=uu(s);if(i!==null&&CS(i),i=Sg(t,e,n,r),i===null&&pp(t,e,r,gh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pp(t,e,r,null,n)}}var gh=null;function Sg(t,e,n,r){if(gh=null,t=av(r),t=oo(t),t!==null)if(e=Vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function RS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zP()){case lv:return 1;case ES:return 4;case fh:case UP:return 16;case SS:return 536870912;default:return 16}default:return 16}}var si=null,hv=null,Vd=null;function PS(){if(Vd)return Vd;var t,e=hv,n=e.length,r,s="value"in si?si.value:si.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Vd=s.slice(t,1<r?1-r:void 0)}function Fd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function id(){return!0}function Kw(){return!1}function zn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?id:Kw,this.isPropagationStopped=Kw,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),e}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fv=zn(il),cu=ct({},il,{view:0,detail:0}),eD=zn(cu),op,ap,$l,_f=ct({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$l&&($l&&t.type==="mousemove"?(op=t.screenX-$l.screenX,ap=t.screenY-$l.screenY):ap=op=0,$l=t),op)},movementY:function(t){return"movementY"in t?t.movementY:ap}}),Qw=zn(_f),tD=ct({},_f,{dataTransfer:0}),nD=zn(tD),rD=ct({},cu,{relatedTarget:0}),lp=zn(rD),sD=ct({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),iD=zn(sD),oD=ct({},il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aD=zn(oD),lD=ct({},il,{data:0}),Yw=zn(lD),cD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dD[t])?!!e[t]:!1}function mv(){return hD}var fD=ct({},cu,{key:function(t){if(t.key){var e=cD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mv,charCode:function(t){return t.type==="keypress"?Fd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mD=zn(fD),pD=ct({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xw=zn(pD),gD=ct({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mv}),yD=zn(gD),vD=ct({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),xD=zn(vD),wD=ct({},_f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bD=zn(wD),_D=[9,13,27,32],pv=ys&&"CompositionEvent"in window,ic=null;ys&&"documentMode"in document&&(ic=document.documentMode);var ED=ys&&"TextEvent"in window&&!ic,DS=ys&&(!pv||ic&&8<ic&&11>=ic),Jw=" ",Zw=!1;function MS(t,e){switch(t){case"keyup":return _D.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function SD(t,e){switch(t){case"compositionend":return OS(e);case"keypress":return e.which!==32?null:(Zw=!0,Jw);case"textInput":return t=e.data,t===Jw&&Zw?null:t;default:return null}}function TD(t,e){if(ta)return t==="compositionend"||!pv&&MS(t,e)?(t=PS(),Vd=hv=si=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DS&&e.locale!=="ko"?null:e.data;default:return null}}var ND={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ND[t.type]:e==="textarea"}function LS(t,e,n,r){mS(r),e=yh(e,"onChange"),0<e.length&&(n=new fv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oc=null,Ic=null;function CD(t){KS(t,0)}function Ef(t){var e=sa(t);if(aS(e))return t}function kD(t,e){if(t==="change")return e}var VS=!1;if(ys){var cp;if(ys){var up="oninput"in document;if(!up){var t1=document.createElement("div");t1.setAttribute("oninput","return;"),up=typeof t1.oninput=="function"}cp=up}else cp=!1;VS=cp&&(!document.documentMode||9<document.documentMode)}function n1(){oc&&(oc.detachEvent("onpropertychange",FS),Ic=oc=null)}function FS(t){if(t.propertyName==="value"&&Ef(Ic)){var e=[];LS(e,Ic,t,av(t)),vS(CD,e)}}function ID(t,e,n){t==="focusin"?(n1(),oc=e,Ic=n,oc.attachEvent("onpropertychange",FS)):t==="focusout"&&n1()}function AD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(Ic)}function jD(t,e){if(t==="click")return Ef(e)}function RD(t,e){if(t==="input"||t==="change")return Ef(e)}function PD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:PD;function Ac(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!og.call(e,s)||!wr(t[s],e[s]))return!1}return!0}function r1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s1(t,e){var n=r1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r1(n)}}function zS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function US(){for(var t=window,e=uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uh(t.document)}return e}function gv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DD(t){var e=US(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zS(n.ownerDocument.documentElement,n)){if(r!==null&&gv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=s1(n,i);var o=s1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MD=ys&&"documentMode"in document&&11>=document.documentMode,na=null,Tg=null,ac=null,Ng=!1;function i1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ng||na==null||na!==uh(r)||(r=na,"selectionStart"in r&&gv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ac&&Ac(ac,r)||(ac=r,r=yh(Tg,"onSelect"),0<r.length&&(e=new fv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=na)))}function od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},dp={},$S={};ys&&($S=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Sf(t){if(dp[t])return dp[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $S)return dp[t]=e[n];return t}var BS=Sf("animationend"),HS=Sf("animationiteration"),WS=Sf("animationstart"),qS=Sf("transitionend"),GS=new Map,o1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){GS.set(t,e),Lo(e,[t])}for(var hp=0;hp<o1.length;hp++){var fp=o1[hp],OD=fp.toLowerCase(),LD=fp[0].toUpperCase()+fp.slice(1);Li(OD,"on"+LD)}Li(BS,"onAnimationEnd");Li(HS,"onAnimationIteration");Li(WS,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(qS,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function a1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OP(r,e,void 0,t),t.currentTarget=null}function KS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;a1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;a1(s,l,u),i=c}}}if(hh)throw t=bg,hh=!1,bg=null,t}function et(t,e){var n=e[jg];n===void 0&&(n=e[jg]=new Set);var r=t+"__bubble";n.has(r)||(QS(e,t,2,!1),n.add(r))}function mp(t,e,n){var r=0;e&&(r|=4),QS(n,t,r,e)}var ad="_reactListening"+Math.random().toString(36).slice(2);function jc(t){if(!t[ad]){t[ad]=!0,nS.forEach(function(n){n!=="selectionchange"&&(VD.has(n)||mp(n,!1,t),mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ad]||(e[ad]=!0,mp("selectionchange",!1,e))}}function QS(t,e,n,r){switch(RS(e)){case 1:var s=JP;break;case 4:s=ZP;break;default:s=dv}n=s.bind(null,e,n,t),s=void 0,!wg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=oo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}vS(function(){var u=i,h=av(n),f=[];e:{var p=GS.get(t);if(p!==void 0){var y=fv,b=t;switch(t){case"keypress":if(Fd(n)===0)break e;case"keydown":case"keyup":y=mD;break;case"focusin":b="focus",y=lp;break;case"focusout":b="blur",y=lp;break;case"beforeblur":case"afterblur":y=lp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=nD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=yD;break;case BS:case HS:case WS:y=iD;break;case qS:y=xD;break;case"scroll":y=eD;break;case"wheel":y=bD;break;case"copy":case"cut":case"paste":y=aD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xw}var v=(e&4)!==0,E=!v&&t==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,_;x!==null;){_=x;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,w!==null&&(I=Tc(x,w),I!=null&&v.push(Rc(x,I,_)))),E)break;x=x.return}0<v.length&&(p=new y(p,b,null,n,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==vg&&(b=n.relatedTarget||n.fromElement)&&(oo(b)||b[vs]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?oo(b):null,b!==null&&(E=Vo(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(v=Qw,I="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Xw,I="onPointerLeave",w="onPointerEnter",x="pointer"),E=y==null?p:sa(y),_=b==null?p:sa(b),p=new v(I,x+"leave",y,n,h),p.target=E,p.relatedTarget=_,I=null,oo(h)===u&&(v=new v(w,x+"enter",b,n,h),v.target=_,v.relatedTarget=E,I=v),E=I,y&&b)t:{for(v=y,w=b,x=0,_=v;_;_=Wo(_))x++;for(_=0,I=w;I;I=Wo(I))_++;for(;0<x-_;)v=Wo(v),x--;for(;0<_-x;)w=Wo(w),_--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=Wo(v),w=Wo(w)}v=null}else v=null;y!==null&&l1(f,p,y,v,!1),b!==null&&E!==null&&l1(f,E,b,v,!0)}}e:{if(p=u?sa(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var M=kD;else if(e1(p))if(VS)M=RD;else{M=AD;var D=ID}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=jD);if(M&&(M=M(t,u))){LS(f,M,n,h);break e}D&&D(t,p,u),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&fg(p,"number",p.value)}switch(D=u?sa(u):window,t){case"focusin":(e1(D)||D.contentEditable==="true")&&(na=D,Tg=u,ac=null);break;case"focusout":ac=Tg=na=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,i1(f,n,h);break;case"selectionchange":if(MD)break;case"keydown":case"keyup":i1(f,n,h)}var T;if(pv)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ta?MS(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(DS&&n.locale!=="ko"&&(ta||N!=="onCompositionStart"?N==="onCompositionEnd"&&ta&&(T=PS()):(si=h,hv="value"in si?si.value:si.textContent,ta=!0)),D=yh(u,N),0<D.length&&(N=new Yw(N,t,null,n,h),f.push({event:N,listeners:D}),T?N.data=T:(T=OS(n),T!==null&&(N.data=T)))),(T=ED?SD(t,n):TD(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(h=new Yw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}KS(f,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tc(t,n),i!=null&&r.unshift(Rc(t,i,s)),i=Tc(t,e),i!=null&&r.push(Rc(t,i,s))),t=t.return}return r}function Wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Tc(n,i),c!=null&&o.unshift(Rc(n,c,l))):s||(c=Tc(n,i),c!=null&&o.push(Rc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FD=/\r\n?/g,zD=/\u0000|\uFFFD/g;function c1(t){return(typeof t=="string"?t:""+t).replace(FD,`
`).replace(zD,"")}function ld(t,e,n){if(e=c1(e),c1(t)!==e&&n)throw Error(ne(425))}function vh(){}var Cg=null,kg=null;function Ig(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,UD=typeof clearTimeout=="function"?clearTimeout:void 0,u1=typeof Promise=="function"?Promise:void 0,$D=typeof queueMicrotask=="function"?queueMicrotask:typeof u1<"u"?function(t){return u1.resolve(null).then(t).catch(BD)}:Ag;function BD(t){setTimeout(function(){throw t})}function gp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kc(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ol=Math.random().toString(36).slice(2),$r="__reactFiber$"+ol,Pc="__reactProps$"+ol,vs="__reactContainer$"+ol,jg="__reactEvents$"+ol,HD="__reactListeners$"+ol,WD="__reactHandles$"+ol;function oo(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vs]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d1(t);t!==null;){if(n=t[$r])return n;t=d1(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[$r]||t[vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Tf(t){return t[Pc]||null}var Rg=[],ia=-1;function Vi(t){return{current:t}}function nt(t){0>ia||(t.current=Rg[ia],Rg[ia]=null,ia--)}function Xe(t,e){ia++,Rg[ia]=t.current,t.current=e}var Ei={},en=Vi(Ei),_n=Vi(!1),_o=Ei;function La(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function En(t){return t=t.childContextTypes,t!=null}function xh(){nt(_n),nt(en)}function h1(t,e,n){if(en.current!==Ei)throw Error(ne(168));Xe(en,e),Xe(_n,n)}function YS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,IP(t)||"Unknown",s));return ct({},n,r)}function wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,_o=en.current,Xe(en,t),Xe(_n,_n.current),!0}function f1(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=YS(t,e,_o),r.__reactInternalMemoizedMergedChildContext=t,nt(_n),nt(en),Xe(en,t)):nt(_n),Xe(_n,n)}var os=null,Nf=!1,yp=!1;function XS(t){os===null?os=[t]:os.push(t)}function qD(t){Nf=!0,XS(t)}function Fi(){if(!yp&&os!==null){yp=!0;var t=0,e=$e;try{var n=os;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}os=null,Nf=!1}catch(s){throw os!==null&&(os=os.slice(t+1)),_S(lv,Fi),s}finally{$e=e,yp=!1}}return null}var oa=[],aa=0,bh=null,_h=0,Hn=[],Wn=0,Eo=null,us=1,ds="";function no(t,e){oa[aa++]=_h,oa[aa++]=bh,bh=t,_h=e}function JS(t,e,n){Hn[Wn++]=us,Hn[Wn++]=ds,Hn[Wn++]=Eo,Eo=t;var r=us;t=ds;var s=32-fr(r)-1;r&=~(1<<s),n+=1;var i=32-fr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-fr(e)+s|n<<s|r,ds=i+t}else us=1<<i|n<<s|r,ds=t}function yv(t){t.return!==null&&(no(t,1),JS(t,1,0))}function vv(t){for(;t===bh;)bh=oa[--aa],oa[aa]=null,_h=oa[--aa],oa[aa]=null;for(;t===Eo;)Eo=Hn[--Wn],Hn[Wn]=null,ds=Hn[--Wn],Hn[Wn]=null,us=Hn[--Wn],Hn[Wn]=null}var Mn=null,Pn=null,st=!1,cr=null;function ZS(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mn=t,Pn=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eo!==null?{id:us,overflow:ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mn=t,Pn=null,!0):!1;default:return!1}}function Pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dg(t){if(st){var e=Pn;if(e){var n=e;if(!m1(t,e)){if(Pg(t))throw Error(ne(418));e=di(n.nextSibling);var r=Mn;e&&m1(t,e)?ZS(r,n):(t.flags=t.flags&-4097|2,st=!1,Mn=t)}}else{if(Pg(t))throw Error(ne(418));t.flags=t.flags&-4097|2,st=!1,Mn=t}}}function p1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mn=t}function cd(t){if(t!==Mn)return!1;if(!st)return p1(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ig(t.type,t.memoizedProps)),e&&(e=Pn)){if(Pg(t))throw eT(),Error(ne(418));for(;e;)ZS(t,e),e=di(e.nextSibling)}if(p1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Mn?di(t.stateNode.nextSibling):null;return!0}function eT(){for(var t=Pn;t;)t=di(t.nextSibling)}function Va(){Pn=Mn=null,st=!1}function xv(t){cr===null?cr=[t]:cr.push(t)}var GD=Cs.ReactCurrentBatchConfig;function Bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function ud(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g1(t){var e=t._init;return e(t._payload)}function tT(t){function e(w,x){if(t){var _=w.deletions;_===null?(w.deletions=[x],w.flags|=16):_.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=pi(w,x),w.index=0,w.sibling=null,w}function i(w,x,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<x?(w.flags|=2,x):_):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,_,I){return x===null||x.tag!==6?(x=Sp(_,w.mode,I),x.return=w,x):(x=s(x,_),x.return=w,x)}function c(w,x,_,I){var M=_.type;return M===ea?h(w,x,_.props.children,I,_.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ws&&g1(M)===x.type)?(I=s(x,_.props),I.ref=Bl(w,x,_),I.return=w,I):(I=qd(_.type,_.key,_.props,null,w.mode,I),I.ref=Bl(w,x,_),I.return=w,I)}function u(w,x,_,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Tp(_,w.mode,I),x.return=w,x):(x=s(x,_.children||[]),x.return=w,x)}function h(w,x,_,I,M){return x===null||x.tag!==7?(x=yo(_,w.mode,I,M),x.return=w,x):(x=s(x,_),x.return=w,x)}function f(w,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sp(""+x,w.mode,_),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zu:return _=qd(x.type,x.key,x.props,null,w.mode,_),_.ref=Bl(w,null,x),_.return=w,_;case Zo:return x=Tp(x,w.mode,_),x.return=w,x;case Ws:var I=x._init;return f(w,I(x._payload),_)}if(Ql(x)||Vl(x))return x=yo(x,w.mode,_,null),x.return=w,x;ud(w,x)}return null}function p(w,x,_,I){var M=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return M!==null?null:l(w,x,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zu:return _.key===M?c(w,x,_,I):null;case Zo:return _.key===M?u(w,x,_,I):null;case Ws:return M=_._init,p(w,x,M(_._payload),I)}if(Ql(_)||Vl(_))return M!==null?null:h(w,x,_,I,null);ud(w,_)}return null}function y(w,x,_,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(_)||null,l(x,w,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zu:return w=w.get(I.key===null?_:I.key)||null,c(x,w,I,M);case Zo:return w=w.get(I.key===null?_:I.key)||null,u(x,w,I,M);case Ws:var D=I._init;return y(w,x,_,D(I._payload),M)}if(Ql(I)||Vl(I))return w=w.get(_)||null,h(x,w,I,M,null);ud(x,I)}return null}function b(w,x,_,I){for(var M=null,D=null,T=x,N=x=0,C=null;T!==null&&N<_.length;N++){T.index>N?(C=T,T=null):C=T.sibling;var k=p(w,T,_[N],I);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(w,T),x=i(k,x,N),D===null?M=k:D.sibling=k,D=k,T=C}if(N===_.length)return n(w,T),st&&no(w,N),M;if(T===null){for(;N<_.length;N++)T=f(w,_[N],I),T!==null&&(x=i(T,x,N),D===null?M=T:D.sibling=T,D=T);return st&&no(w,N),M}for(T=r(w,T);N<_.length;N++)C=y(T,w,N,_[N],I),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?N:C.key),x=i(C,x,N),D===null?M=C:D.sibling=C,D=C);return t&&T.forEach(function(A){return e(w,A)}),st&&no(w,N),M}function v(w,x,_,I){var M=Vl(_);if(typeof M!="function")throw Error(ne(150));if(_=M.call(_),_==null)throw Error(ne(151));for(var D=M=null,T=x,N=x=0,C=null,k=_.next();T!==null&&!k.done;N++,k=_.next()){T.index>N?(C=T,T=null):C=T.sibling;var A=p(w,T,k.value,I);if(A===null){T===null&&(T=C);break}t&&T&&A.alternate===null&&e(w,T),x=i(A,x,N),D===null?M=A:D.sibling=A,D=A,T=C}if(k.done)return n(w,T),st&&no(w,N),M;if(T===null){for(;!k.done;N++,k=_.next())k=f(w,k.value,I),k!==null&&(x=i(k,x,N),D===null?M=k:D.sibling=k,D=k);return st&&no(w,N),M}for(T=r(w,T);!k.done;N++,k=_.next())k=y(T,w,N,k.value,I),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?N:k.key),x=i(k,x,N),D===null?M=k:D.sibling=k,D=k);return t&&T.forEach(function(P){return e(w,P)}),st&&no(w,N),M}function E(w,x,_,I){if(typeof _=="object"&&_!==null&&_.type===ea&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Zu:e:{for(var M=_.key,D=x;D!==null;){if(D.key===M){if(M=_.type,M===ea){if(D.tag===7){n(w,D.sibling),x=s(D,_.props.children),x.return=w,w=x;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ws&&g1(M)===D.type){n(w,D.sibling),x=s(D,_.props),x.ref=Bl(w,D,_),x.return=w,w=x;break e}n(w,D);break}else e(w,D);D=D.sibling}_.type===ea?(x=yo(_.props.children,w.mode,I,_.key),x.return=w,w=x):(I=qd(_.type,_.key,_.props,null,w.mode,I),I.ref=Bl(w,x,_),I.return=w,w=I)}return o(w);case Zo:e:{for(D=_.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(w,x.sibling),x=s(x,_.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Tp(_,w.mode,I),x.return=w,w=x}return o(w);case Ws:return D=_._init,E(w,x,D(_._payload),I)}if(Ql(_))return b(w,x,_,I);if(Vl(_))return v(w,x,_,I);ud(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,_),x.return=w,w=x):(n(w,x),x=Sp(_,w.mode,I),x.return=w,w=x),o(w)):n(w,x)}return E}var Fa=tT(!0),nT=tT(!1),Eh=Vi(null),Sh=null,la=null,wv=null;function bv(){wv=la=Sh=null}function _v(t){var e=Eh.current;nt(Eh),t._currentValue=e}function Mg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ga(t,e){Sh=t,wv=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(wv!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(Sh===null)throw Error(ne(308));la=t,Sh.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var ao=null;function Ev(t){ao===null?ao=[t]:ao.push(t)}function rT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ev(e)):(n.next=s.next,s.next=n),e.interleaved=n,xs(t,r)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qs=!1;function Sv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xs(t,n)}return s=r.interleaved,s===null?(e.next=e,Ev(r)):(e.next=s.next,s.next=e),r.interleaved=e,xs(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cv(t,n)}}function y1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var s=t.updateQueue;qs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,y=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,v=l;switch(p=e,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(y,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,p=typeof b=="function"?b.call(y,f,p):b,p==null)break e;f=ct({},f,p);break e;case 2:qs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);To|=o,t.lanes=o,t.memoizedState=f}}function v1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var du={},Wr=Vi(du),Dc=Vi(du),Mc=Vi(du);function lo(t){if(t===du)throw Error(ne(174));return t}function Tv(t,e){switch(Xe(Mc,e),Xe(Dc,t),Xe(Wr,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pg(e,t)}nt(Wr),Xe(Wr,e)}function za(){nt(Wr),nt(Dc),nt(Mc)}function iT(t){lo(Mc.current);var e=lo(Wr.current),n=pg(e,t.type);e!==n&&(Xe(Dc,t),Xe(Wr,n))}function Nv(t){Dc.current===t&&(nt(Wr),nt(Dc))}var ot=Vi(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vp=[];function Cv(){for(var t=0;t<vp.length;t++)vp[t]._workInProgressVersionPrimary=null;vp.length=0}var Ud=Cs.ReactCurrentDispatcher,xp=Cs.ReactCurrentBatchConfig,So=0,lt=null,Et=null,jt=null,Ch=!1,lc=!1,Oc=0,KD=0;function qt(){throw Error(ne(321))}function kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function Iv(t,e,n,r,s,i){if(So=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ud.current=t===null||t.memoizedState===null?JD:ZD,t=n(r,s),lc){i=0;do{if(lc=!1,Oc=0,25<=i)throw Error(ne(301));i+=1,jt=Et=null,e.updateQueue=null,Ud.current=e4,t=n(r,s)}while(lc)}if(Ud.current=kh,e=Et!==null&&Et.next!==null,So=0,jt=Et=lt=null,Ch=!1,e)throw Error(ne(300));return t}function Av(){var t=Oc!==0;return Oc=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?lt.memoizedState=jt=t:jt=jt.next=t,jt}function Jn(){if(Et===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=jt===null?lt.memoizedState:jt.next;if(e!==null)jt=e,Et=t;else{if(t===null)throw Error(ne(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},jt===null?lt.memoizedState=jt=t:jt=jt.next=t}return jt}function Lc(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((So&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,lt.lanes|=h,To|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,wr(r,e.memoizedState)||(bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,lt.lanes|=i,To|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wr(i,e.memoizedState)||(bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function oT(){}function aT(t,e){var n=lt,r=Jn(),s=e(),i=!wr(r.memoizedState,s);if(i&&(r.memoizedState=s,bn=!0),r=r.queue,jv(uT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Vc(9,cT.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(ne(349));So&30||lT(n,e,s)}return s}function lT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cT(t,e,n,r){e.value=n,e.getSnapshot=r,dT(e)&&hT(t)}function uT(t,e,n){return n(function(){dT(e)&&hT(t)})}function dT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function hT(t){var e=xs(t,1);e!==null&&mr(e,t,1,-1)}function x1(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:t},e.queue=t,t=t.dispatch=XD.bind(null,lt,t),[e.memoizedState,t]}function Vc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fT(){return Jn().memoizedState}function $d(t,e,n,r){var s=Lr();lt.flags|=t,s.memoizedState=Vc(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var s=Jn();r=r===void 0?null:r;var i=void 0;if(Et!==null){var o=Et.memoizedState;if(i=o.destroy,r!==null&&kv(r,o.deps)){s.memoizedState=Vc(e,n,i,r);return}}lt.flags|=t,s.memoizedState=Vc(1|e,n,i,r)}function w1(t,e){return $d(8390656,8,t,e)}function jv(t,e){return Cf(2048,8,t,e)}function mT(t,e){return Cf(4,2,t,e)}function pT(t,e){return Cf(4,4,t,e)}function gT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yT(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,gT.bind(null,e,t),n)}function Rv(){}function vT(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xT(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wT(t,e,n){return So&21?(wr(n,e)||(n=TS(),lt.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=n)}function QD(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=xp.transition;xp.transition={};try{t(!1),e()}finally{$e=n,xp.transition=r}}function bT(){return Jn().memoizedState}function YD(t,e,n){var r=mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_T(t))ET(e,n);else if(n=rT(t,e,n,r),n!==null){var s=ln();mr(n,t,r,s),ST(n,e,r)}}function XD(t,e,n){var r=mi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_T(t))ET(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,wr(l,o)){var c=e.interleaved;c===null?(s.next=s,Ev(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=rT(t,e,s,r),n!==null&&(s=ln(),mr(n,t,r,s),ST(n,e,r))}}function _T(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function ET(t,e){lc=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ST(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cv(t,n)}}var kh={readContext:Xn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},JD={readContext:Xn,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:w1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,gT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YD.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:x1,useDebugValue:Rv,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=x1(!1),e=t[0];return t=QD.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=Lr();if(st){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),Dt===null)throw Error(ne(349));So&30||lT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,w1(uT.bind(null,r,i,t),[t]),r.flags|=2048,Vc(9,cT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Dt.identifierPrefix;if(st){var n=ds,r=us;n=(r&~(1<<32-fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZD={readContext:Xn,useCallback:vT,useContext:Xn,useEffect:jv,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:xT,useReducer:wp,useRef:fT,useState:function(){return wp(Lc)},useDebugValue:Rv,useDeferredValue:function(t){var e=Jn();return wT(e,Et.memoizedState,t)},useTransition:function(){var t=wp(Lc)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:oT,useSyncExternalStore:aT,useId:bT,unstable_isNewReconciler:!1},e4={readContext:Xn,useCallback:vT,useContext:Xn,useEffect:jv,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:xT,useReducer:bp,useRef:fT,useState:function(){return bp(Lc)},useDebugValue:Rv,useDeferredValue:function(t){var e=Jn();return Et===null?e.memoizedState=t:wT(e,Et.memoizedState,t)},useTransition:function(){var t=bp(Lc)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:oT,useSyncExternalStore:aT,useId:bT,unstable_isNewReconciler:!1};function ir(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Og(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kf={isMounted:function(t){return(t=t._reactInternals)?Vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ln(),s=mi(t),i=ms(r,s);i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,s),e!==null&&(mr(e,t,s,r),zd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ln(),s=mi(t),i=ms(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,s),e!==null&&(mr(e,t,s,r),zd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),r=mi(t),s=ms(n,r);s.tag=2,e!=null&&(s.callback=e),e=hi(t,s,r),e!==null&&(mr(e,t,r,n),zd(e,t,r))}};function b1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ac(n,r)||!Ac(s,i):!0}function TT(t,e,n){var r=!1,s=Ei,i=e.contextType;return typeof i=="object"&&i!==null?i=Xn(i):(s=En(e)?_o:en.current,r=e.contextTypes,i=(r=r!=null)?La(t,s):Ei),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kf.enqueueReplaceState(e,e.state,null)}function Lg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xn(i):(i=En(e)?_o:en.current,s.context=La(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Og(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kf.enqueueReplaceState(s,s.state,null),Th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",r=e;do n+=kP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _p(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t4=typeof WeakMap=="function"?WeakMap:Map;function NT(t,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ah||(Ah=!0,Kg=r),Vg(t,e)},n}function CT(t,e,n){n=ms(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vg(t,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function E1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=p4.bind(null,t,e,n),e.then(t,t))}function S1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var n4=Cs.ReactCurrentOwner,bn=!1;function sn(t,e,n,r){e.child=t===null?nT(e,null,n,r):Fa(e,t.child,n,r)}function N1(t,e,n,r,s){n=n.render;var i=e.ref;return ga(e,s),r=Iv(t,e,n,r,i,s),n=Av(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(st&&n&&yv(e),e.flags|=1,sn(t,e,r,s),e.child)}function C1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kT(t,e,i,r,s)):(t=qd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(o,r)&&t.ref===e.ref)return ws(t,e,s)}return e.flags|=1,t=pi(i,r),t.ref=e.ref,t.return=e,e.child=t}function kT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ac(i,r)&&t.ref===e.ref)if(bn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,ws(t,e,s)}return Fg(t,e,n,r,s)}function IT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ua,An),An|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(ua,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Xe(ua,An),An|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Xe(ua,An),An|=r;return sn(t,e,s,n),e.child}function AT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fg(t,e,n,r,s){var i=En(n)?_o:en.current;return i=La(e,i),ga(e,s),n=Iv(t,e,n,r,i,s),r=Av(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(st&&r&&yv(e),e.flags|=1,sn(t,e,n,s),e.child)}function k1(t,e,n,r,s){if(En(n)){var i=!0;wh(e)}else i=!1;if(ga(e,s),e.stateNode===null)Bd(t,e),TT(e,n,r),Lg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xn(u):(u=En(n)?_o:en.current,u=La(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&_1(e,o,r,u),qs=!1;var p=e.memoizedState;o.state=p,Th(e,r,o,s),c=e.memoizedState,l!==r||p!==c||_n.current||qs?(typeof h=="function"&&(Og(e,n,h,r),c=e.memoizedState),(l=qs||b1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ir(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xn(c):(c=En(n)?_o:en.current,c=La(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&_1(e,o,r,c),qs=!1,p=e.memoizedState,o.state=p,Th(e,r,o,s);var b=e.memoizedState;l!==f||p!==b||_n.current||qs?(typeof y=="function"&&(Og(e,n,y,r),b=e.memoizedState),(u=qs||b1(e,n,u,r,p,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return zg(t,e,n,r,i,s)}function zg(t,e,n,r,s,i){AT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&f1(e,n,!1),ws(t,e,i);r=e.stateNode,n4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fa(e,t.child,null,i),e.child=Fa(e,null,l,i)):sn(t,e,l,i),e.memoizedState=r.state,s&&f1(e,n,!0),e.child}function jT(t){var e=t.stateNode;e.pendingContext?h1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h1(t,e.context,!1),Tv(t,e.containerInfo)}function I1(t,e,n,r,s){return Va(),xv(s),e.flags|=256,sn(t,e,n,r),e.child}var Ug={dehydrated:null,treeContext:null,retryLane:0};function $g(t){return{baseLanes:t,cachePool:null,transitions:null}}function RT(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Xe(ot,s&1),t===null)return Dg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jf(o,r,0,null),t=yo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$g(n),e.memoizedState=Ug,t):Pv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return r4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=pi(l,i):(i=yo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$g(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ug,r}return i=t.child,t=i.sibling,r=pi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pv(t,e){return e=jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,r){return r!==null&&xv(r),Fa(e,t.child,null,n),t=Pv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_p(Error(ne(422))),dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jf({mode:"visible",children:r.children},s,0,null),i=yo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fa(e,t.child,null,o),e.child.memoizedState=$g(o),e.memoizedState=Ug,i);if(!(e.mode&1))return dd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ne(419)),r=_p(i,r,void 0),dd(t,e,o,r)}if(l=(o&t.childLanes)!==0,bn||l){if(r=Dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xs(t,s),mr(r,t,s,-1))}return Fv(),r=_p(Error(ne(421))),dd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=g4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pn=di(s.nextSibling),Mn=e,st=!0,cr=null,t!==null&&(Hn[Wn++]=us,Hn[Wn++]=ds,Hn[Wn++]=Eo,us=t.id,ds=t.overflow,Eo=e),e=Pv(e,r.children),e.flags|=4096,e)}function A1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mg(t.return,e,n)}function Ep(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function PT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(sn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A1(t,n,e);else if(t.tag===19)A1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ep(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ep(e,!0,n,null,i);break;case"together":Ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s4(t,e,n){switch(e.tag){case 3:jT(e),Va();break;case 5:iT(e);break;case 1:En(e.type)&&wh(e);break;case 4:Tv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Xe(Eh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?RT(t,e,n):(Xe(ot,ot.current&1),t=ws(t,e,n),t!==null?t.sibling:null);Xe(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,IT(t,e,n)}return ws(t,e,n)}var DT,Bg,MT,OT;DT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bg=function(){};MT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,lo(Wr.current);var i=null;switch(n){case"input":s=dg(t,s),r=dg(t,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=mg(t,s),r=mg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vh)}gg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ec.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};OT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function i4(t,e,n){var r=e.pendingProps;switch(vv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return En(e.type)&&xh(),Gt(e),null;case 3:return r=e.stateNode,za(),nt(_n),nt(en),Cv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cr!==null&&(Xg(cr),cr=null))),Bg(t,e),Gt(e),null;case 5:Nv(e);var s=lo(Mc.current);if(n=e.type,t!==null&&e.stateNode!=null)MT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Gt(e),null}if(t=lo(Wr.current),cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[Pc]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<Xl.length;s++)et(Xl[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":Fw(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":Uw(r,i),et("invalid",r)}gg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,l,t),s=["children",""+l]):Ec.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&et("scroll",r)}switch(n){case"input":ed(r),zw(r,i,!0);break;case"textarea":ed(r),$w(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[Pc]=r,DT(t,e,!1,!1),e.stateNode=t;e:{switch(o=yg(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xl.length;s++)et(Xl[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":Fw(t,r),s=dg(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),et("invalid",t);break;case"textarea":Uw(t,r),s=mg(t,r),et("invalid",t);break;default:s=r}gg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sc(t,c):typeof c=="number"&&Sc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ec.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",t):c!=null&&rv(t,i,c,o))}switch(n){case"input":ed(t),zw(t,r,!1);break;case"textarea":ed(t),$w(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_i(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ha(t,!!r.multiple,i,!1):r.defaultValue!=null&&ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)OT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=lo(Mc.current),lo(Wr.current),cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Mn,t!==null))switch(t.tag){case 3:ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Gt(e),null;case 13:if(nt(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Pn!==null&&e.mode&1&&!(e.flags&128))eT(),Va(),e.flags|=98560,i=!1;else if(i=cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[$r]=e}else Va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),i=!1}else cr!==null&&(Xg(cr),cr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Nt===0&&(Nt=3):Fv())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return za(),Bg(t,e),t===null&&jc(e.stateNode.containerInfo),Gt(e),null;case 10:return _v(e.type._context),Gt(e),null;case 17:return En(e.type)&&xh(),Gt(e),null;case 19:if(nt(ot),i=e.memoizedState,i===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hl(i,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,Hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&pt()>$a&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!st)return Gt(e),null}else 2*pt()-i.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,n=ot.current,Xe(ot,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return Vv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function o4(t,e){switch(vv(e),e.tag){case 1:return En(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return za(),nt(_n),nt(en),Cv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nv(e),null;case 13:if(nt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ot),null;case 4:return za(),null;case 10:return _v(e.type._context),null;case 22:case 23:return Vv(),null;case 24:return null;default:return null}}var hd=!1,Jt=!1,a4=typeof WeakSet=="function"?WeakSet:Set,he=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function Hg(t,e,n){try{n()}catch(r){ft(t,e,r)}}var j1=!1;function l4(t,e){if(Cg=ph,t=US(),gv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kg={focusedElem:t,selectionRange:n},ph=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,E=b.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:ir(e.type,v),E);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(I){ft(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return b=j1,j1=!1,b}function cc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hg(e,n,i)}s=s.next}while(s!==r)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LT(t){var e=t.alternate;e!==null&&(t.alternate=null,LT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Pc],delete e[jg],delete e[HD],delete e[WD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VT(t){return t.tag===5||t.tag===3||t.tag===4}function R1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vh));else if(r!==4&&(t=t.child,t!==null))for(qg(t,e,n),t=t.sibling;t!==null;)qg(t,e,n),t=t.sibling}function Gg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gg(t,e,n),t=t.sibling;t!==null;)Gg(t,e,n),t=t.sibling}var Ft=null,lr=!1;function Fs(t,e,n){for(n=n.child;n!==null;)FT(t,e,n),n=n.sibling}function FT(t,e,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Jt||ca(n,e);case 6:var r=Ft,s=lr;Ft=null,Fs(t,e,n),Ft=r,lr=s,Ft!==null&&(lr?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(lr?(t=Ft,n=n.stateNode,t.nodeType===8?gp(t.parentNode,n):t.nodeType===1&&gp(t,n),kc(t)):gp(Ft,n.stateNode));break;case 4:r=Ft,s=lr,Ft=n.stateNode.containerInfo,lr=!0,Fs(t,e,n),Ft=r,lr=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hg(n,e,o),s=s.next}while(s!==r)}Fs(t,e,n);break;case 1:if(!Jt&&(ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}Fs(t,e,n);break;case 21:Fs(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Fs(t,e,n),Jt=r):Fs(t,e,n);break;default:Fs(t,e,n)}}function P1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a4),e.forEach(function(r){var s=y4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ft=l.stateNode,lr=!1;break e;case 3:Ft=l.stateNode.containerInfo,lr=!0;break e;case 4:Ft=l.stateNode.containerInfo,lr=!0;break e}l=l.return}if(Ft===null)throw Error(ne(160));FT(i,o,s),Ft=null,lr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zT(e,t),e=e.sibling}function zT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),Or(t),r&4){try{cc(3,t,t.return),If(3,t)}catch(v){ft(t,t.return,v)}try{cc(5,t,t.return)}catch(v){ft(t,t.return,v)}}break;case 1:nr(e,t),Or(t),r&512&&n!==null&&ca(n,n.return);break;case 5:if(nr(e,t),Or(t),r&512&&n!==null&&ca(n,n.return),t.flags&32){var s=t.stateNode;try{Sc(s,"")}catch(v){ft(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lS(s,i),yg(l,o);var u=yg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?fS(s,f):h==="dangerouslySetInnerHTML"?dS(s,f):h==="children"?Sc(s,f):rv(s,h,f,u)}switch(l){case"input":hg(s,i);break;case"textarea":cS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ha(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?ha(s,!!i.multiple,i.defaultValue,!0):ha(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pc]=i}catch(v){ft(t,t.return,v)}}break;case 6:if(nr(e,t),Or(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ft(t,t.return,v)}}break;case 3:if(nr(e,t),Or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kc(e.containerInfo)}catch(v){ft(t,t.return,v)}break;case 4:nr(e,t),Or(t);break;case 13:nr(e,t),Or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ov=pt())),r&4&&P1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(u=Jt)||h,nr(e,t),Jt=u):nr(e,t),Or(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(he=t,h=t.child;h!==null;){for(f=he=h;he!==null;){switch(p=he,y=p.child,p.tag){case 0:case 11:case 14:case 15:cc(4,p,p.return);break;case 1:ca(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){ft(r,n,v)}}break;case 5:ca(p,p.return);break;case 22:if(p.memoizedState!==null){M1(f);continue}}y!==null?(y.return=p,he=y):M1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hS("display",o))}catch(v){ft(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ft(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nr(e,t),Or(t),r&4&&P1(t);break;case 21:break;default:nr(e,t),Or(t)}}function Or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(VT(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Sc(s,""),r.flags&=-33);var i=R1(t);Gg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=R1(t);qg(t,l,o);break;default:throw Error(ne(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c4(t,e,n){he=t,UT(t)}function UT(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var s=he,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Jt;l=hd;var u=Jt;if(hd=o,(Jt=c)&&!u)for(he=s;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?O1(s):c!==null?(c.return=o,he=c):O1(s);for(;i!==null;)he=i,UT(i),i=i.sibling;he=s,hd=l,Jt=u}D1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,he=i):D1(t)}}function D1(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||If(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&v1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&kc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Jt||e.flags&512&&Wg(e)}catch(p){ft(e,e.return,p)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function M1(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function O1(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{If(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ft(e,s,c)}}var i=e.return;try{Wg(e)}catch(c){ft(e,i,c)}break;case 5:var o=e.return;try{Wg(e)}catch(c){ft(e,o,c)}}}catch(c){ft(e,e.return,c)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var u4=Math.ceil,Ih=Cs.ReactCurrentDispatcher,Dv=Cs.ReactCurrentOwner,Qn=Cs.ReactCurrentBatchConfig,De=0,Dt=null,yt=null,Ut=0,An=0,ua=Vi(0),Nt=0,Fc=null,To=0,Af=0,Mv=0,uc=null,vn=null,Ov=0,$a=1/0,is=null,Ah=!1,Kg=null,fi=null,fd=!1,ii=null,jh=0,dc=0,Qg=null,Hd=-1,Wd=0;function ln(){return De&6?pt():Hd!==-1?Hd:Hd=pt()}function mi(t){return t.mode&1?De&2&&Ut!==0?Ut&-Ut:GD.transition!==null?(Wd===0&&(Wd=TS()),Wd):(t=$e,t!==0||(t=window.event,t=t===void 0?16:RS(t.type)),t):1}function mr(t,e,n,r){if(50<dc)throw dc=0,Qg=null,Error(ne(185));lu(t,n,r),(!(De&2)||t!==Dt)&&(t===Dt&&(!(De&2)&&(Af|=n),Nt===4&&Qs(t,Ut)),Sn(t,r),n===1&&De===0&&!(e.mode&1)&&($a=pt()+500,Nf&&Fi()))}function Sn(t,e){var n=t.callbackNode;GP(t,e);var r=mh(t,t===Dt?Ut:0);if(r===0)n!==null&&Ww(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ww(n),e===1)t.tag===0?qD(L1.bind(null,t)):XS(L1.bind(null,t)),$D(function(){!(De&6)&&Fi()}),n=null;else{switch(NS(r)){case 1:n=lv;break;case 4:n=ES;break;case 16:n=fh;break;case 536870912:n=SS;break;default:n=fh}n=QT(n,$T.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $T(t,e){if(Hd=-1,Wd=0,De&6)throw Error(ne(327));var n=t.callbackNode;if(ya()&&t.callbackNode!==n)return null;var r=mh(t,t===Dt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rh(t,r);else{e=r;var s=De;De|=2;var i=HT();(Dt!==t||Ut!==e)&&(is=null,$a=pt()+500,go(t,e));do try{f4();break}catch(l){BT(t,l)}while(!0);bv(),Ih.current=i,De=s,yt!==null?e=0:(Dt=null,Ut=0,e=Nt)}if(e!==0){if(e===2&&(s=_g(t),s!==0&&(r=s,e=Yg(t,s))),e===1)throw n=Fc,go(t,0),Qs(t,r),Sn(t,pt()),n;if(e===6)Qs(t,r);else{if(s=t.current.alternate,!(r&30)&&!d4(s)&&(e=Rh(t,r),e===2&&(i=_g(t),i!==0&&(r=i,e=Yg(t,i))),e===1))throw n=Fc,go(t,0),Qs(t,r),Sn(t,pt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:ro(t,vn,is);break;case 3:if(Qs(t,r),(r&130023424)===r&&(e=Ov+500-pt(),10<e)){if(mh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ln(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ag(ro.bind(null,t,vn,is),e);break}ro(t,vn,is);break;case 4:if(Qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*u4(r/1960))-r,10<r){t.timeoutHandle=Ag(ro.bind(null,t,vn,is),r);break}ro(t,vn,is);break;case 5:ro(t,vn,is);break;default:throw Error(ne(329))}}}return Sn(t,pt()),t.callbackNode===n?$T.bind(null,t):null}function Yg(t,e){var n=uc;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=Rh(t,e),t!==2&&(e=vn,vn=n,e!==null&&Xg(e)),t}function Xg(t){vn===null?vn=t:vn.push.apply(vn,t)}function d4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(t,e){for(e&=~Mv,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fr(e),r=1<<n;t[n]=-1,e&=~r}}function L1(t){if(De&6)throw Error(ne(327));ya();var e=mh(t,0);if(!(e&1))return Sn(t,pt()),null;var n=Rh(t,e);if(t.tag!==0&&n===2){var r=_g(t);r!==0&&(e=r,n=Yg(t,r))}if(n===1)throw n=Fc,go(t,0),Qs(t,e),Sn(t,pt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,vn,is),Sn(t,pt()),null}function Lv(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&($a=pt()+500,Nf&&Fi())}}function No(t){ii!==null&&ii.tag===0&&!(De&6)&&ya();var e=De;De|=1;var n=Qn.transition,r=$e;try{if(Qn.transition=null,$e=1,t)return t()}finally{$e=r,Qn.transition=n,De=e,!(De&6)&&Fi()}}function Vv(){An=ua.current,nt(ua)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UD(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(vv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:za(),nt(_n),nt(en),Cv();break;case 5:Nv(r);break;case 4:za();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:_v(r.type._context);break;case 22:case 23:Vv()}n=n.return}if(Dt=t,yt=t=pi(t.current,null),Ut=An=e,Nt=0,Fc=null,Mv=Af=To=0,vn=uc=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ao=null}return t}function BT(t,e){do{var n=yt;try{if(bv(),Ud.current=kh,Ch){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ch=!1}if(So=0,jt=Et=lt=null,lc=!1,Oc=0,Dv.current=null,n===null||n.return===null){Nt=1,Fc=e,yt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=S1(o);if(y!==null){y.flags&=-257,T1(y,o,l,i,e),y.mode&1&&E1(i,u,e),e=y,c=u;var b=e.updateQueue;if(b===null){var v=new Set;v.add(c),e.updateQueue=v}else b.add(c);break e}else{if(!(e&1)){E1(i,u,e),Fv();break e}c=Error(ne(426))}}else if(st&&l.mode&1){var E=S1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),T1(E,o,l,i,e),xv(Ua(c,l));break e}}i=c=Ua(c,l),Nt!==4&&(Nt=2),uc===null?uc=[i]:uc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=NT(i,c,e);y1(i,w);break e;case 1:l=c;var x=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fi===null||!fi.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=CT(i,l,e);y1(i,I);break e}}i=i.return}while(i!==null)}qT(n)}catch(M){e=M,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function HT(){var t=Ih.current;return Ih.current=kh,t===null?kh:t}function Fv(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Dt===null||!(To&268435455)&&!(Af&268435455)||Qs(Dt,Ut)}function Rh(t,e){var n=De;De|=2;var r=HT();(Dt!==t||Ut!==e)&&(is=null,go(t,e));do try{h4();break}catch(s){BT(t,s)}while(!0);if(bv(),De=n,Ih.current=r,yt!==null)throw Error(ne(261));return Dt=null,Ut=0,Nt}function h4(){for(;yt!==null;)WT(yt)}function f4(){for(;yt!==null&&!VP();)WT(yt)}function WT(t){var e=KT(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?qT(t):yt=e,Dv.current=null}function qT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o4(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,yt=null;return}}else if(n=i4(n,e,An),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);Nt===0&&(Nt=5)}function ro(t,e,n){var r=$e,s=Qn.transition;try{Qn.transition=null,$e=1,m4(t,e,n,r)}finally{Qn.transition=s,$e=r}return null}function m4(t,e,n,r){do ya();while(ii!==null);if(De&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KP(t,i),t===Dt&&(yt=Dt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,QT(fh,function(){return ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qn.transition,Qn.transition=null;var o=$e;$e=1;var l=De;De|=4,Dv.current=null,l4(t,n),zT(n,t),DD(kg),ph=!!Cg,kg=Cg=null,t.current=n,c4(n),FP(),De=l,$e=o,Qn.transition=i}else t.current=n;if(fd&&(fd=!1,ii=t,jh=s),i=t.pendingLanes,i===0&&(fi=null),$P(n.stateNode),Sn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ah)throw Ah=!1,t=Kg,Kg=null,t;return jh&1&&t.tag!==0&&ya(),i=t.pendingLanes,i&1?t===Qg?dc++:(dc=0,Qg=t):dc=0,Fi(),null}function ya(){if(ii!==null){var t=NS(jh),e=Qn.transition,n=$e;try{if(Qn.transition=null,$e=16>t?16:t,ii===null)var r=!1;else{if(t=ii,ii=null,jh=0,De&6)throw Error(ne(331));var s=De;for(De|=4,he=t.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:cc(8,h,i)}var f=h.child;if(f!==null)f.return=h,he=f;else for(;he!==null;){h=he;var p=h.sibling,y=h.return;if(LT(h),h===u){he=null;break}if(p!==null){p.return=y,he=p;break}he=y}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,he=w;break e}he=i.return}}var x=t.current;for(he=x;he!==null;){o=he;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,he=_;else e:for(o=x;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(M){ft(l,l.return,M)}if(l===o){he=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,he=I;break e}he=l.return}}if(De=s,Fi(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{$e=n,Qn.transition=e}}return!1}function V1(t,e,n){e=Ua(n,e),e=NT(t,e,1),t=hi(t,e,1),e=ln(),t!==null&&(lu(t,1,e),Sn(t,e))}function ft(t,e,n){if(t.tag===3)V1(t,t,n);else for(;e!==null;){if(e.tag===3){V1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){t=Ua(n,t),t=CT(e,t,1),e=hi(e,t,1),t=ln(),e!==null&&(lu(e,1,t),Sn(e,t));break}}e=e.return}}function p4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Ut&n)===n&&(Nt===4||Nt===3&&(Ut&130023424)===Ut&&500>pt()-Ov?go(t,0):Mv|=n),Sn(t,e)}function GT(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=ln();t=xs(t,e),t!==null&&(lu(t,e,n),Sn(t,n))}function g4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GT(t,n)}function y4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),GT(t,n)}var KT;KT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_n.current)bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bn=!1,s4(t,e,n);bn=!!(t.flags&131072)}else bn=!1,st&&e.flags&1048576&&JS(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var s=La(e,en.current);ga(e,n),s=Iv(null,e,r,t,s,n);var i=Av();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(i=!0,wh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sv(e),s.updater=kf,e.stateNode=s,s._reactInternals=e,Lg(e,r,t,n),e=zg(null,e,r,!0,i,n)):(e.tag=0,st&&i&&yv(e),sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=x4(r),t=ir(r,t),s){case 0:e=Fg(null,e,r,t,n);break e;case 1:e=k1(null,e,r,t,n);break e;case 11:e=N1(null,e,r,t,n);break e;case 14:e=C1(null,e,r,ir(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),Fg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),k1(t,e,r,s,n);case 3:e:{if(jT(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,sT(t,e),Th(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ua(Error(ne(423)),e),e=I1(t,e,r,n,s);break e}else if(r!==s){s=Ua(Error(ne(424)),e),e=I1(t,e,r,n,s);break e}else for(Pn=di(e.stateNode.containerInfo.firstChild),Mn=e,st=!0,cr=null,n=nT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Va(),r===s){e=ws(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return iT(e),t===null&&Dg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ig(r,s)?o=null:i!==null&&Ig(r,i)&&(e.flags|=32),AT(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&Dg(e),null;case 13:return RT(t,e,n);case 4:return Tv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fa(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),N1(t,e,r,s,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Xe(Eh,r._currentValue),r._currentValue=o,i!==null)if(wr(i.value,o)){if(i.children===s.children&&!_n.current){e=ws(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ms(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Mg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ga(e,n),s=Xn(s),r=r(s),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,s=ir(r,e.pendingProps),s=ir(r.type,s),C1(t,e,r,s,n);case 15:return kT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),Bd(t,e),e.tag=1,En(r)?(t=!0,wh(e)):t=!1,ga(e,n),TT(e,r,s),Lg(e,r,s,n),zg(null,e,r,!0,t,n);case 19:return PT(t,e,n);case 22:return IT(t,e,n)}throw Error(ne(156,e.tag))};function QT(t,e){return _S(t,e)}function v4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new v4(t,e,n,r)}function zv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function x4(t){if(typeof t=="function")return zv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iv)return 11;if(t===ov)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ea:return yo(n.children,s,i,e);case sv:o=8,s|=8;break;case ag:return t=Gn(12,n,e,s|2),t.elementType=ag,t.lanes=i,t;case lg:return t=Gn(13,n,e,s),t.elementType=lg,t.lanes=i,t;case cg:return t=Gn(19,n,e,s),t.elementType=cg,t.lanes=i,t;case iS:return jf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rS:o=10;break e;case sS:o=9;break e;case iv:o=11;break e;case ov:o=14;break e;case Ws:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function yo(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function jf(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=iS,t.lanes=n,t.stateNode={isHidden:!1},t}function Sp(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function Tp(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uv(t,e,n,r,s,i,o,l,c){return t=new w4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sv(i),t}function b4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function YT(t){if(!t)return Ei;t=t._reactInternals;e:{if(Vo(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(En(n))return YS(t,n,e)}return e}function XT(t,e,n,r,s,i,o,l,c){return t=Uv(n,r,!0,t,s,i,o,l,c),t.context=YT(null),n=t.current,r=ln(),s=mi(n),i=ms(r,s),i.callback=e??null,hi(n,i,s),t.current.lanes=s,lu(t,s,r),Sn(t,r),t}function Rf(t,e,n,r){var s=e.current,i=ln(),o=mi(s);return n=YT(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hi(s,e,o),t!==null&&(mr(t,s,o,i),zd(t,s,o)),o}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function F1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $v(t,e){F1(t,e),(t=t.alternate)&&F1(t,e)}function _4(){return null}var JT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bv(t){this._internalRoot=t}Pf.prototype.render=Bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Rf(t,e,null,null)};Pf.prototype.unmount=Bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;No(function(){Rf(null,t,null,null)}),e[vs]=null}};function Pf(t){this._internalRoot=t}Pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=IS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ks.length&&e!==0&&e<Ks[n].priority;n++);Ks.splice(n,0,t),n===0&&jS(t)}};function Hv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z1(){}function E4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ph(o);i.call(u)}}var o=XT(e,r,t,0,null,!1,!1,"",z1);return t._reactRootContainer=o,t[vs]=o.current,jc(t.nodeType===8?t.parentNode:t),No(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ph(c);l.call(u)}}var c=Uv(t,0,!1,null,null,!1,!1,"",z1);return t._reactRootContainer=c,t[vs]=c.current,jc(t.nodeType===8?t.parentNode:t),No(function(){Rf(e,c,n,r)}),c}function Mf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ph(o);l.call(c)}}Rf(e,o,t,s)}else o=E4(n,e,t,s,r);return Ph(o)}CS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yl(e.pendingLanes);n!==0&&(cv(e,n|1),Sn(e,pt()),!(De&6)&&($a=pt()+500,Fi()))}break;case 13:No(function(){var r=xs(t,1);if(r!==null){var s=ln();mr(r,t,1,s)}}),$v(t,1)}};uv=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=ln();mr(e,t,134217728,n)}$v(t,134217728)}};kS=function(t){if(t.tag===13){var e=mi(t),n=xs(t,e);if(n!==null){var r=ln();mr(n,t,e,r)}$v(t,e)}};IS=function(){return $e};AS=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};xg=function(t,e,n){switch(e){case"input":if(hg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tf(r);if(!s)throw Error(ne(90));aS(r),hg(r,s)}}}break;case"textarea":cS(t,n);break;case"select":e=n.value,e!=null&&ha(t,!!n.multiple,e,!1)}};gS=Lv;yS=No;var S4={usingClientEntryPoint:!1,Events:[uu,sa,Tf,mS,pS,Lv]},Wl={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T4={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wS(t),t===null?null:t.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||_4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{bf=md.inject(T4),Hr=md}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S4;Fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hv(e))throw Error(ne(200));return b4(t,e,null,n)};Fn.createRoot=function(t,e){if(!Hv(t))throw Error(ne(299));var n=!1,r="",s=JT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uv(t,1,!1,null,null,n,!1,r,s),t[vs]=e.current,jc(t.nodeType===8?t.parentNode:t),new Bv(e)};Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=wS(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t){return No(t)};Fn.hydrate=function(t,e,n){if(!Df(e))throw Error(ne(200));return Mf(null,t,e,!0,n)};Fn.hydrateRoot=function(t,e,n){if(!Hv(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=JT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=XT(e,null,t,1,n??null,s,!1,i,o),t[vs]=e.current,jc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pf(e)};Fn.render=function(t,e,n){if(!Df(e))throw Error(ne(200));return Mf(null,t,e,!1,n)};Fn.unmountComponentAtNode=function(t){if(!Df(t))throw Error(ne(40));return t._reactRootContainer?(No(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[vs]=null})}),!0):!1};Fn.unstable_batchedUpdates=Lv;Fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Df(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Mf(t,e,n,!1,r)};Fn.version="18.3.1-next-f1338f8080-20240426";function ZT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZT)}catch(t){console.error(t)}}ZT(),ZE.exports=Fn;var Kn=ZE.exports;const N4=zE(Kn);var eN,U1=Kn;eN=U1.createRoot,U1.hydrateRoot;function C4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var tN={exports:{}},nN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=m;function k4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var I4=typeof Object.is=="function"?Object.is:k4,A4=Ba.useState,j4=Ba.useEffect,R4=Ba.useLayoutEffect,P4=Ba.useDebugValue;function D4(t,e){var n=e(),r=A4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return R4(function(){s.value=n,s.getSnapshot=e,Np(s)&&i({inst:s})},[t,n,e]),j4(function(){return Np(s)&&i({inst:s}),t(function(){Np(s)&&i({inst:s})})},[t]),P4(n),n}function Np(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!I4(t,n)}catch{return!0}}function M4(t,e){return e()}var O4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M4:D4;nN.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:O4;tN.exports=nN;var L4=tN.exports;const V4=XE.useInsertionEffect,F4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z4=F4?m.useLayoutEffect:m.useEffect,U4=V4||z4,rN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return U4(()=>{e[0]=t}),e[1]},$4="popstate",Wv="pushState",qv="replaceState",B4="hashchange",$1=[$4,Wv,qv,B4],H4=t=>{for(const e of $1)addEventListener(e,t);return()=>{for(const e of $1)removeEventListener(e,t)}},sN=(t,e)=>L4.useSyncExternalStore(H4,t,e),W4=()=>location.search,q4=({ssrSearch:t=""}={})=>sN(W4,()=>t),B1=()=>location.pathname,G4=({ssrPath:t}={})=>sN(B1,t?()=>t:B1),K4=(t,{replace:e=!1,state:n=null}={})=>history[e?qv:Wv](n,"",t),Q4=(t={})=>[G4(t),K4],H1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[H1]>"u"){for(const t of[Wv,qv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,H1,{value:!0})}const Y4=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",iN=(t="")=>t==="/"?"":t,X4=(t,e)=>t[0]==="~"?t.slice(1):iN(e)+t,J4=(t="",e)=>Y4(W1(iN(t)),W1(e)),W1=t=>{try{return decodeURI(t)}catch{return t}},oN={hook:Q4,searchHook:q4,parser:C4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},aN=m.createContext(oN),hu=()=>m.useContext(aN),lN={},cN=m.createContext(lN),Z4=()=>m.useContext(cN),Of=t=>{const[e,n]=t.hook(t);return[J4(t.base,e),rN((r,s)=>n(X4(r,t.base),s))]},Lf=()=>Of(hu()),uN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},dN=({children:t,...e})=>{var h,f;const n=hu(),r=e.hook?oN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const y=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&y!==u[p]&&(l.current=u={...u}),u[p]=y,y!==r[p]&&(s=u)}return m.createElement(aN.Provider,{value:s,children:t})},q1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,eM=t=>{let e=m.useRef(lN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},rr=({path:t,nest:e,match:n,...r})=>{const s=hu(),[i]=Of(s),[o,l,c]=n??uN(s.parser,t,i,e),u=eM({...Z4(),...l});if(!o)return null;const h=c?m.createElement(dN,{base:c},q1(r,u)):q1(r,u);return m.createElement(cN.Provider,{value:u,children:h})},Yr=m.forwardRef((t,e)=>{const n=hu(),[r,s]=Of(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...y}=t,b=rN(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(l==null||l(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:b,href:v}):m.createElement("a",{...y,onClick:b,href:v,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),hN=t=>Array.isArray(t)?t.flatMap(e=>hN(e&&e.type===m.Fragment?e.props.children:e)):[t],tM=({children:t,location:e})=>{const n=hu(),[r]=Of(n);for(const s of hN(t)){let i=0;if(m.isValidElement(s)&&(i=uN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Vf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ff=typeof window>"u"||"Deno"in globalThis;function or(){}function nM(t,e){return typeof t=="function"?t(e):t}function rM(t){return typeof t=="number"&&t>=0&&t!==1/0}function sM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function G1(t,e){return typeof t=="function"?t(e):t}function iM(t,e){return typeof t=="function"?t(e):t}function K1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Gv(o,e.options))return!1}else if(!Uc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function Q1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(zc(e.options.mutationKey)!==zc(i))return!1}else if(!Uc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Gv(t,e){return((e==null?void 0:e.queryKeyHashFn)||zc)(t)}function zc(t){return JSON.stringify(t,(e,n)=>Jg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Uc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Uc(t[n],e[n])):!1}function fN(t,e){if(t===e)return t;const n=Y1(t)&&Y1(e);if(n||Jg(t)&&Jg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=fN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function Y1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Jg(t){if(!X1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!X1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function X1(t){return Object.prototype.toString.call(t)==="[object Object]"}function oM(t){return new Promise(e=>{setTimeout(e,t)})}function aM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?fN(t,e):e}function lM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function cM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Kv=Symbol();function mN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Kv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ho,Zs,Ca,RE,uM=(RE=class extends Vf{constructor(){super();Fe(this,ho);Fe(this,Zs);Fe(this,Ca);Ee(this,Ca,e=>{if(!Ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Zs)||this.setEventListener(G(this,Ca))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,Zs))==null||e.call(this),Ee(this,Zs,void 0))}setEventListener(e){var n;Ee(this,Ca,e),(n=G(this,Zs))==null||n.call(this),Ee(this,Zs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,ho)!==e&&(Ee(this,ho,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,ho)=="boolean"?G(this,ho):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ho=new WeakMap,Zs=new WeakMap,Ca=new WeakMap,RE),pN=new uM,ka,ei,Ia,PE,dM=(PE=class extends Vf{constructor(){super();Fe(this,ka,!0);Fe(this,ei);Fe(this,Ia);Ee(this,Ia,e=>{if(!Ff&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,ei)||this.setEventListener(G(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,ei))==null||e.call(this),Ee(this,ei,void 0))}setEventListener(e){var n;Ee(this,Ia,e),(n=G(this,ei))==null||n.call(this),Ee(this,ei,e(this.setOnline.bind(this)))}setOnline(e){G(this,ka)!==e&&(Ee(this,ka,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,ka)}},ka=new WeakMap,ei=new WeakMap,Ia=new WeakMap,PE),Dh=new dM;function hM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function fM(t){return Math.min(1e3*2**t,3e4)}function gN(t){return(t??"online")==="online"?Dh.isOnline():!0}var yN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Cp(t){return t instanceof yN}function vN(t){let e=!1,n=0,r=!1,s;const i=hM(),o=v=>{var E;r||(p(new yN(v)),(E=t.abort)==null||E.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>pN.isFocused()&&(t.networkMode==="always"||Dh.isOnline())&&t.canRun(),h=()=>gN(t.networkMode)&&t.canRun(),f=v=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var E;s=w=>{(r||u())&&v(w)},(E=t.onPause)==null||E.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(r)return;let v;const E=n===0?t.initialPromise:void 0;try{v=E??t.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{var D;if(r)return;const x=t.retry??(Ff?0:3),_=t.retryDelay??fM,I=typeof _=="function"?_(n,w):_,M=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,w);if(e||!M){p(w);return}n++,(D=t.onFail)==null||D.call(t,n,w),oM(I).then(()=>u()?void 0:y()).then(()=>{e?p(w):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():y().then(b),i)}}function mM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var an=mM(),fo,DE,xN=(DE=class{constructor(){Fe(this,fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rM(this.gcTime)&&Ee(this,fo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ff?1/0:5*60*1e3))}clearGcTimeout(){G(this,fo)&&(clearTimeout(G(this,fo)),Ee(this,fo,void 0))}},fo=new WeakMap,DE),Aa,ja,$n,Qt,iu,mo,ar,ss,ME,pM=(ME=class extends xN{constructor(n){super();Fe(this,ar);Fe(this,Aa);Fe(this,ja);Fe(this,$n);Fe(this,Qt);Fe(this,iu);Fe(this,mo);Ee(this,mo,!1),Ee(this,iu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,$n,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,Aa,yM(this.options)),this.state=n.state??G(this,Aa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=G(this,Qt))==null?void 0:n.promise}setOptions(n){this.options={...G(this,iu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,$n).remove(this)}setData(n,r){const s=aM(this.state.data,n,this.options);return Wt(this,ar,ss).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Wt(this,ar,ss).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=G(this,Qt))==null?void 0:s.promise;return(i=G(this,Qt))==null||i.cancel(n),r?r.then(or).catch(or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Aa))}isActive(){return this.observers.some(n=>iM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Kv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!sM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Qt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Qt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),G(this,$n).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(G(this,Qt)&&(G(this,mo)?G(this,Qt).cancel({revert:!0}):G(this,Qt).cancelRetry()),this.scheduleGc()),G(this,$n).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wt(this,ar,ss).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,Qt))return G(this,Qt).continueRetry(),G(this,Qt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(y=>y.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ee(this,mo,!0),s.signal)})},o=()=>{const p=mN(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),Ee(this,mo,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Ee(this,ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Wt(this,ar,ss).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var y,b,v,E;Cp(p)&&p.silent||Wt(this,ar,ss).call(this,{type:"error",error:p}),Cp(p)||((b=(y=G(this,$n).config).onError)==null||b.call(y,p,this),(E=(v=G(this,$n).config).onSettled)==null||E.call(v,this.state.data,p,this)),this.scheduleGc()};return Ee(this,Qt,vN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var y,b,v,E;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){c(w);return}(b=(y=G(this,$n).config).onSuccess)==null||b.call(y,p,this),(E=(v=G(this,$n).config).onSettled)==null||E.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,y)=>{Wt(this,ar,ss).call(this,{type:"failed",failureCount:p,error:y})},onPause:()=>{Wt(this,ar,ss).call(this,{type:"pause"})},onContinue:()=>{Wt(this,ar,ss).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),G(this,Qt).start()}},Aa=new WeakMap,ja=new WeakMap,$n=new WeakMap,Qt=new WeakMap,iu=new WeakMap,mo=new WeakMap,ar=new WeakSet,ss=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...gM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Cp(i)&&i.revert&&G(this,ja)?{...G(this,ja),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),an.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,$n).notify({query:this,type:"updated",action:n})})},ME);function gM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,OE,vM=(OE=class extends Vf{constructor(e={}){super();Fe(this,Fr);this.config=e,Ee(this,Fr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Gv(s,n);let o=this.get(i);return o||(o=new pM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Fr).has(e.queryHash)||(G(this,Fr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Fr).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Fr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Fr).get(e)}getAll(){return[...G(this,Fr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>K1(e,r)):n}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){an.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fr=new WeakMap,OE),zr,rn,po,Ur,Bs,LE,xM=(LE=class extends xN{constructor(n){super();Fe(this,Ur);Fe(this,zr);Fe(this,rn);Fe(this,po);this.mutationId=n.mutationId,Ee(this,rn,n.mutationCache),Ee(this,zr,[]),this.state=n.state||wM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){G(this,zr).includes(n)||(G(this,zr).push(n),this.clearGcTimeout(),G(this,rn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,zr,G(this,zr).filter(r=>r!==n)),this.scheduleGc(),G(this,rn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){G(this,zr).length||(this.state.status==="pending"?this.scheduleGc():G(this,rn).remove(this))}continue(){var n;return((n=G(this,po))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,y,b,v,E,w,x,_,I,M,D,T,N;Ee(this,po,vN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{Wt(this,Ur,Bs).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Wt(this,Ur,Bs).call(this,{type:"pause"})},onContinue:()=>{Wt(this,Ur,Bs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,rn).canRun(this)}));const r=this.state.status==="pending",s=!G(this,po).canStart();try{if(!r){Wt(this,Ur,Bs).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=G(this,rn).config).onMutate)==null?void 0:o.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Wt(this,Ur,Bs).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const C=await G(this,po).start();return await((h=(u=G(this,rn).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,n,this.state.context)),await((b=(y=G(this,rn).config).onSettled)==null?void 0:b.call(y,C,null,this.state.variables,this.state.context,this)),await((E=(v=this.options).onSettled)==null?void 0:E.call(v,C,null,n,this.state.context)),Wt(this,Ur,Bs).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(w=G(this,rn).config).onError)==null?void 0:x.call(w,C,n,this.state.context,this)),await((I=(_=this.options).onError)==null?void 0:I.call(_,C,n,this.state.context)),await((D=(M=G(this,rn).config).onSettled)==null?void 0:D.call(M,void 0,C,this.state.variables,this.state.context,this)),await((N=(T=this.options).onSettled)==null?void 0:N.call(T,void 0,C,n,this.state.context)),C}finally{Wt(this,Ur,Bs).call(this,{type:"error",error:C})}}finally{G(this,rn).runNext(this)}}},zr=new WeakMap,rn=new WeakMap,po=new WeakMap,Ur=new WeakSet,Bs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),an.batch(()=>{G(this,zr).forEach(s=>{s.onMutationUpdate(n)}),G(this,rn).notify({mutation:this,type:"updated",action:n})})},LE);function wM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,ou,VE,bM=(VE=class extends Vf{constructor(e={}){super();Fe(this,In);Fe(this,ou);this.config=e,Ee(this,In,new Map),Ee(this,ou,Date.now())}build(e,n,r){const s=new xM({mutationCache:this,mutationId:++Xu(this,ou)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=pd(e),r=G(this,In).get(n)??[];r.push(e),G(this,In).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=pd(e);if(G(this,In).has(n)){const s=(r=G(this,In).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?G(this,In).delete(n):G(this,In).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=G(this,In).get(pd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=G(this,In).get(pd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...G(this,In).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Q1(n,r))}findAll(e={}){return this.getAll().filter(n=>Q1(e,n))}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return an.batch(()=>Promise.all(e.map(n=>n.continue().catch(or))))}},In=new WeakMap,ou=new WeakMap,VE);function pd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function J1(t){return{onFetch:(e,n)=>{var h,f,p,y,b;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const E=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},w=mN(e.options,e.fetchOptions),x=async(_,I,M)=>{if(v)return Promise.reject();if(I==null&&_.pages.length)return Promise.resolve(_);const D={queryKey:e.queryKey,pageParam:I,direction:M?"backward":"forward",meta:e.options.meta};E(D);const T=await w(D),{maxPages:N}=e.options,C=M?cM:lM;return{pages:C(_.pages,T,N),pageParams:C(_.pageParams,I,N)}};if(s&&i.length){const _=s==="backward",I=_?_M:Z1,M={pages:i,pageParams:o},D=I(r,M);l=await x(M,D,_)}else{const _=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:Z1(r,l);if(c>0&&I==null)break;l=await x(l,I),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var v,E;return(E=(v=e.options).persister)==null?void 0:E.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Z1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _M(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ht,ti,ni,Ra,Pa,ri,Da,Ma,FE,EM=(FE=class{constructor(t={}){Fe(this,ht);Fe(this,ti);Fe(this,ni);Fe(this,Ra);Fe(this,Pa);Fe(this,ri);Fe(this,Da);Fe(this,Ma);Ee(this,ht,t.queryCache||new vM),Ee(this,ti,t.mutationCache||new bM),Ee(this,ni,t.defaultOptions||{}),Ee(this,Ra,new Map),Ee(this,Pa,new Map),Ee(this,ri,0)}mount(){Xu(this,ri)._++,G(this,ri)===1&&(Ee(this,Da,pN.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,ht).onFocus())})),Ee(this,Ma,Dh.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,ht).onOnline())})))}unmount(){var t,e;Xu(this,ri)._--,G(this,ri)===0&&((t=G(this,Da))==null||t.call(this),Ee(this,Da,void 0),(e=G(this,Ma))==null||e.call(this),Ee(this,Ma,void 0))}isFetching(t){return G(this,ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,ti).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=G(this,ht).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(G1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return G(this,ht).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=G(this,ht).get(r.queryHash),i=s==null?void 0:s.state.data,o=nM(e,i);if(o!==void 0)return G(this,ht).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return an.batch(()=>G(this,ht).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,ht);an.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,ht),r={type:"active",...t};return an.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=an.batch(()=>G(this,ht).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(or).catch(or)}invalidateQueries(t={},e={}){return an.batch(()=>{if(G(this,ht).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=an.batch(()=>G(this,ht).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(or)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(or)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,ht).build(this,e);return n.isStaleByTime(G1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(or).catch(or)}fetchInfiniteQuery(t){return t.behavior=J1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(or).catch(or)}ensureInfiniteQueryData(t){return t.behavior=J1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dh.isOnline()?G(this,ti).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,ht)}getMutationCache(){return G(this,ti)}getDefaultOptions(){return G(this,ni)}setDefaultOptions(t){Ee(this,ni,t)}setQueryDefaults(t,e){G(this,Ra).set(zc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,Ra).values()];let n={};return e.forEach(r=>{Uc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){G(this,Pa).set(zc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,Pa).values()];let n={};return e.forEach(r=>{Uc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,ni).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Gv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Kv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,ni).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,ht).clear(),G(this,ti).clear()}},ht=new WeakMap,ti=new WeakMap,ni=new WeakMap,Ra=new WeakMap,Pa=new WeakMap,ri=new WeakMap,Da=new WeakMap,Ma=new WeakMap,FE),SM=m.createContext(void 0),TM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(SM.Provider,{value:t,children:e}));async function NM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const CM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await NM(n),await n.json())},kM=new EM({defaultOptions:{queries:{queryFn:CM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),IM=1,AM=1e6;let kp=0;function jM(){return kp=(kp+1)%Number.MAX_SAFE_INTEGER,kp.toString()}const Ip=new Map,eb=t=>{if(Ip.has(t))return;const e=setTimeout(()=>{Ip.delete(t),hc({type:"REMOVE_TOAST",toastId:t})},AM);Ip.set(t,e)},RM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,IM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?eb(n):t.toasts.forEach(r=>{eb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Gd=[];let Kd={toasts:[]};function hc(t){Kd=RM(Kd,t),Gd.forEach(e=>{e(Kd)})}function PM({...t}){const e=jM(),n=s=>hc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>hc({type:"DISMISS_TOAST",toastId:e});return hc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Fo(){const[t,e]=m.useState(Kd);return m.useEffect(()=>(Gd.push(e),()=>{const n=Gd.indexOf(e);n>-1&&Gd.splice(n,1)}),[t]),{...t,toast:PM,dismiss:n=>hc({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=tb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():tb(t[s],null)}}}}function Be(...t){return m.useCallback(wN(...t),t)}function DM(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function kr(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var w;const{scope:p,children:y,...b}=f,v=((w=p==null?void 0:p[t])==null?void 0:w[c])||l,E=m.useMemo(()=>b,Object.values(b));return a.jsx(v.Provider,{value:E,children:y})};u.displayName=i+"Provider";function h(f,p){var v;const y=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,b=m.useContext(y);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,MM(s,...e)]}function MM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ha(t){const e=LM(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(VM);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var OM=Ha("Slot");function LM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=zM(s),l=FM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?wN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bN=Symbol("radix.slottable");function _N(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=bN,e}function VM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bN}function FM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function zM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Qv(t){const e=t+"CollectionProvider",[n,r]=kr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:E,children:w}=v,x=Ne.useRef(null),_=Ne.useRef(new Map).current;return a.jsx(s,{scope:E,itemMap:_,collectionRef:x,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Ha(l),u=Ne.forwardRef((v,E)=>{const{scope:w,children:x}=v,_=i(l,w),I=Be(E,_.collectionRef);return a.jsx(c,{ref:I,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ha(h),y=Ne.forwardRef((v,E)=>{const{scope:w,children:x,..._}=v,I=Ne.useRef(null),M=Be(E,I),D=i(h,w);return Ne.useEffect(()=>(D.itemMap.set(I,{ref:I,..._}),()=>void D.itemMap.delete(I))),a.jsx(p,{[f]:"",ref:M,children:x})});y.displayName=h;function b(v){const E=i(t+"CollectionConsumer",v);return Ne.useCallback(()=>{const x=E.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(E.itemMap.values()).sort((D,T)=>_.indexOf(D.ref.current)-_.indexOf(T.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},b,r]}var UM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=UM.reduce((t,e)=>{const n=Ha(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function EN(t,e){t&&Kn.flushSync(()=>t.dispatchEvent(e))}function cn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $M(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BM="DismissableLayer",Zg="dismissableLayer.update",HM="dismissableLayer.pointerDownOutside",WM="dismissableLayer.focusOutside",nb,SN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(SN),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=m.useState({}),b=Be(e,T=>f(T)),v=Array.from(u.layers),[E]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(E),x=h?v.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,I=x>=w,M=GM(T=>{const N=T.target,C=[...u.branches].some(k=>k.contains(N));!I||C||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},p),D=KM(T=>{const N=T.target;[...u.branches].some(k=>k.contains(N))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},p);return $M(T=>{x===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(nb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),rb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=nb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),rb())},[h,u]),m.useEffect(()=>{const T=()=>y({});return document.addEventListener(Zg,T),()=>document.removeEventListener(Zg,T)},[]),a.jsx(xe.div,{...c,ref:b,style:{pointerEvents:_?I?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,M.onPointerDownCapture)})});fu.displayName=BM;var qM="DismissableLayerBranch",TN=m.forwardRef((t,e)=>{const n=m.useContext(SN),r=m.useRef(null),s=Be(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(xe.div,{...t,ref:s})});TN.displayName=qM;function GM(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){NN(HM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function KM(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&NN(WM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rb(){const t=new CustomEvent(Zg);document.dispatchEvent(t)}function NN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?EN(s,i):s.dispatchEvent(i)}var QM=fu,YM=TN,kt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},XM="Portal",mu=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);kt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?N4.createPortal(a.jsx(xe.div,{...r,ref:e}),o):null});mu.displayName=XM;function JM(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var zi=t=>{const{present:e,children:n}=t,r=ZM(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Be(r.ref,e5(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};zi.displayName="Presence";function ZM(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=JM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=gd(r.current);i.current=l==="mounted"?u:"none"},[l]),kt(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,y=gd(u);t?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),kt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=y=>{const v=gd(r.current).includes(y.animationName);if(y.target===e&&v&&(c("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=y=>{y.target===e&&(i.current=gd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function gd(t){return(t==null?void 0:t.animationName)||"none"}function e5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Si({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=t5({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=cn(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function t5({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=cn(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var n5="VisuallyHidden",pu=m.forwardRef((t,e)=>a.jsx(xe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));pu.displayName=n5;var r5=pu,Yv="ToastProvider",[Xv,s5,i5]=Qv("Toast"),[CN,$W]=kr("Toast",[i5]),[o5,zf]=CN(Yv),kN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yv}\`. Expected non-empty \`string\`.`),a.jsx(Xv.Provider,{scope:e,children:a.jsx(o5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(y=>y+1),[]),onToastRemove:m.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};kN.displayName=Yv;var IN="ToastViewport",a5=["F8"],ey="toast.viewportPause",ty="toast.viewportResume",AN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=a5,label:s="Notifications ({hotkey})",...i}=t,o=zf(IN,n),l=s5(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Be(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const E=w=>{var _;r.length!==0&&r.every(I=>w[I]||w.code===I)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),m.useEffect(()=>{const E=c.current,w=f.current;if(b&&E&&w){const x=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(ey);w.dispatchEvent(D),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(ty);w.dispatchEvent(D),o.isClosePausedRef.current=!1}},I=D=>{!E.contains(D.relatedTarget)&&_()},M=()=>{E.contains(document.activeElement)||_()};return E.addEventListener("focusin",x),E.addEventListener("focusout",I),E.addEventListener("pointermove",x),E.addEventListener("pointerleave",M),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{E.removeEventListener("focusin",x),E.removeEventListener("focusout",I),E.removeEventListener("pointermove",x),E.removeEventListener("pointerleave",M),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[b,o.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:E})=>{const x=l().map(_=>{const I=_.ref.current,M=[I,...w5(I)];return E==="forwards"?M:M.reverse()});return(E==="forwards"?x.reverse():x).flat()},[l]);return m.useEffect(()=>{const E=f.current;if(E){const w=x=>{var M,D,T;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const N=document.activeElement,C=x.shiftKey;if(x.target===E&&C){(M=u.current)==null||M.focus();return}const P=v({tabbingDirection:C?"backwards":"forwards"}),R=P.findIndex(F=>F===N);Ap(P.slice(R+1))?x.preventDefault():C?(D=u.current)==null||D.focus():(T=h.current)==null||T.focus()}};return E.addEventListener("keydown",w),()=>E.removeEventListener("keydown",w)}},[l,v]),a.jsxs(YM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(ny,{ref:u,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"forwards"});Ap(E)}}),a.jsx(Xv.Slot,{scope:n,children:a.jsx(xe.ol,{tabIndex:-1,...i,ref:p})}),b&&a.jsx(ny,{ref:h,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"backwards"});Ap(E)}})]})});AN.displayName=IN;var jN="ToastFocusProxy",ny=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=zf(jN,n);return a.jsx(pu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});ny.displayName=jN;var Uf="Toast",l5="toast.swipeStart",c5="toast.swipeMove",u5="toast.swipeCancel",d5="toast.swipeEnd",RN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Si({prop:r,defaultProp:s,onChange:i});return a.jsx(zi,{present:n||l,children:a.jsx(m5,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:cn(t.onPause),onResume:cn(t.onResume),onSwipeStart:pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});RN.displayName=Uf;var[h5,f5]=CN(Uf,{onClose(){}}),m5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:y,...b}=t,v=zf(Uf,n),[E,w]=m.useState(null),x=Be(e,F=>w(F)),_=m.useRef(null),I=m.useRef(null),M=s||v.duration,D=m.useRef(0),T=m.useRef(M),N=m.useRef(0),{onToastAdd:C,onToastRemove:k}=v,A=cn(()=>{var ae;(E==null?void 0:E.contains(document.activeElement))&&((ae=v.viewport)==null||ae.focus()),o()}),P=m.useCallback(F=>{!F||F===1/0||(window.clearTimeout(N.current),D.current=new Date().getTime(),N.current=window.setTimeout(A,F))},[A]);m.useEffect(()=>{const F=v.viewport;if(F){const ae=()=>{P(T.current),u==null||u()},ee=()=>{const Z=new Date().getTime()-D.current;T.current=T.current-Z,window.clearTimeout(N.current),c==null||c()};return F.addEventListener(ey,ee),F.addEventListener(ty,ae),()=>{F.removeEventListener(ey,ee),F.removeEventListener(ty,ae)}}},[v.viewport,M,c,u,P]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(M)},[i,M,v.isClosePausedRef,P]),m.useEffect(()=>(C(),()=>k()),[C,k]);const R=m.useMemo(()=>E?FN(E):null,[E]);return v.viewport?a.jsxs(a.Fragment,{children:[R&&a.jsx(p5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),a.jsx(h5,{scope:n,onClose:A,children:Kn.createPortal(a.jsx(Xv.ItemSlot,{scope:n,children:a.jsx(QM,{asChild:!0,onEscapeKeyDown:pe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:pe(t.onPointerDown,F=>{F.button===0&&(_.current={x:F.clientX,y:F.clientY})}),onPointerMove:pe(t.onPointerMove,F=>{if(!_.current)return;const ae=F.clientX-_.current.x,ee=F.clientY-_.current.y,Z=!!I.current,O=["left","right"].includes(v.swipeDirection),B=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=O?B(0,ae):0,H=O?0:B(0,ee),Q=F.pointerType==="touch"?10:2,te={x:U,y:H},J={originalEvent:F,delta:te};Z?(I.current=te,yd(c5,f,J,{discrete:!1})):sb(te,v.swipeDirection,Q)?(I.current=te,yd(l5,h,J,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(ae)>Q||Math.abs(ee)>Q)&&(_.current=null)}),onPointerUp:pe(t.onPointerUp,F=>{const ae=I.current,ee=F.target;if(ee.hasPointerCapture(F.pointerId)&&ee.releasePointerCapture(F.pointerId),I.current=null,_.current=null,ae){const Z=F.currentTarget,O={originalEvent:F,delta:ae};sb(ae,v.swipeDirection,v.swipeThreshold)?yd(d5,y,O,{discrete:!0}):yd(u5,p,O,{discrete:!0}),Z.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),p5=t=>{const{__scopeToast:e,children:n,...r}=t,s=zf(Uf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return v5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(mu,{asChild:!0,children:a.jsx(pu,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},g5="ToastTitle",PN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});PN.displayName=g5;var y5="ToastDescription",DN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});DN.displayName=y5;var MN="ToastAction",ON=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(VN,{altText:n,asChild:!0,children:a.jsx(Jv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${MN}\`. Expected non-empty \`string\`.`),null)});ON.displayName=MN;var LN="ToastClose",Jv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=f5(LN,n);return a.jsx(VN,{asChild:!0,children:a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});Jv.displayName=LN;var VN=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function FN(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),x5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...FN(r))}}),e}function yd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?EN(s,i):s.dispatchEvent(i)}var sb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function v5(t=()=>{}){const e=cn(t);kt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function x5(t){return t.nodeType===t.ELEMENT_NODE}function w5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ap(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var b5=kN,zN=AN,UN=RN,$N=PN,BN=DN,HN=ON,WN=Jv;function qN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qN(t))&&(r&&(r+=" "),r+=e);return r}const ib=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ob=GN,gu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ob(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=ib(h)||ib(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...y}=h;return Object.entries(y).every(b=>{let[v,E]=b;return Array.isArray(E)?E.includes({...i,...l}[v]):{...i,...l}[v]===E})?[...u,f,p]:u},[]);return ob(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...E5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:KN("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(S5,{ref:i,iconNode:e,className:KN(`lucide-${_5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=de("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=de("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=de("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=de("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=de("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=de("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=de("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=de("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=de("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=de("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=de("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=de("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=de("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=de("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=de("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=de("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=de("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=de("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=de("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=de("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=de("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=de("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=de("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=de("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=de("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=de("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=de("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=de("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=de("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=de("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ix="-",Y5=t=>{const e=J5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(ix);return l[0]===""&&l.length!==1&&l.shift(),cC(l,e)||X5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},cC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?cC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(ix);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},db=/^\[(.+)\]$/,X5=t=>{if(db.test(t)){const e=db.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},J5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return eO(Object.entries(t.classGroups),n).forEach(([i,o])=>{ly(o,r,i,e)}),r},ly=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:hb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Z5(s)){ly(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ly(o,hb(e,i),n,r)})})},hb=(t,e)=>{let n=t;return e.split(ix).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Z5=t=>t.isThemeGetter,eO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,tO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},uC="!",nO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let E=0;E<l.length;E++){let w=l[E];if(u===0){if(w===s&&(r||l.slice(E,E+i)===e)){c.push(l.slice(h,E)),h=E+i;continue}if(w==="/"){f=E;continue}}w==="["?u++:w==="]"&&u--}const p=c.length===0?l:l.substring(h),y=p.startsWith(uC),b=y?p.substring(1):p,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},rO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},sO=t=>({cache:tO(t.cacheSize),parseClassName:nO(t),...Y5(t)}),iO=/\s+/,oO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(iO);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:y}=n(u);let b=!!y,v=r(b?p.substring(0,y):p);if(!v){if(!b){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}b=!1}const E=rO(h).join(":"),w=f?E+uC:E,x=w+v;if(i.includes(x))continue;i.push(x);const _=s(v,b);for(let I=0;I<_.length;++I){const M=_[I];i.push(w+M)}l=u+(l.length>0?" "+l:l)}return l};function aO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=dC(e))&&(r&&(r+=" "),r+=n);return r}const dC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=dC(t[r]))&&(n&&(n+=" "),n+=e);return n};function lO(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=sO(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=oO(c,n);return s(c,h),h}return function(){return i(aO.apply(null,arguments))}}const Ze=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},hC=/^\[(?:([a-z-]+):)?(.+)\]$/i,cO=/^\d+\/\d+$/,uO=new Set(["px","full","screen"]),dO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rs=t=>va(t)||uO.has(t)||cO.test(t),zs=t=>al(t,"length",EO),va=t=>!!t&&!Number.isNaN(Number(t)),jp=t=>al(t,"number",va),ql=t=>!!t&&Number.isInteger(Number(t)),gO=t=>t.endsWith("%")&&va(t.slice(0,-1)),be=t=>hC.test(t),Us=t=>dO.test(t),yO=new Set(["length","size","percentage"]),vO=t=>al(t,yO,fC),xO=t=>al(t,"position",fC),wO=new Set(["image","url"]),bO=t=>al(t,wO,TO),_O=t=>al(t,"",SO),Gl=()=>!0,al=(t,e,n)=>{const r=hC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},EO=t=>hO.test(t)&&!fO.test(t),fC=()=>!1,SO=t=>mO.test(t),TO=t=>pO.test(t),NO=()=>{const t=Ze("colors"),e=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),s=Ze("borderColor"),i=Ze("borderRadius"),o=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),u=Ze("grayscale"),h=Ze("hueRotate"),f=Ze("invert"),p=Ze("gap"),y=Ze("gradientColorStops"),b=Ze("gradientColorStopPositions"),v=Ze("inset"),E=Ze("margin"),w=Ze("opacity"),x=Ze("padding"),_=Ze("saturate"),I=Ze("scale"),M=Ze("sepia"),D=Ze("skew"),T=Ze("space"),N=Ze("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",be,e],P=()=>[be,e],R=()=>["",rs,zs],F=()=>["auto",va,be],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",be],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[va,be];return{cacheSize:500,separator:":",theme:{colors:[Gl],spacing:[rs,zs],blur:["none","",Us,be],brightness:H(),borderColor:[t],borderRadius:["none","","full",Us,be],borderSpacing:P(),borderWidth:R(),contrast:H(),grayscale:B(),hueRotate:H(),invert:B(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[gO,zs],inset:A(),margin:A(),opacity:H(),padding:P(),saturate:H(),scale:H(),sepia:B(),skew:H(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Us]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),be]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ql,be]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",ql,be]}],"grid-cols":[{"grid-cols":[Gl]}],"col-start-end":[{col:["auto",{span:["full",ql,be]},be]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Gl]}],"row-start-end":[{row:["auto",{span:[ql,be]},be]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Us]},Us]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Us,zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jp]}],"font-family":[{font:[Gl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",va,jp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rs,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rs,zs]}],"underline-offset":[{"underline-offset":["auto",rs,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),xO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[rs,be]}],"outline-w":[{outline:[rs,zs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[rs,zs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Us,_O]}],"shadow-color":[{shadow:[Gl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Us,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[ql,be]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rs,zs,jp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},CO=lO(NO);function $(...t){return CO(GN(t))}const kO=b5,mC=m.forwardRef(({className:t,...e},n)=>a.jsx(zN,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mC.displayName=zN.displayName;const IO=gu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(UN,{ref:r,className:$(IO({variant:e}),t),...n}));pC.displayName=UN.displayName;const AO=m.forwardRef(({className:t,...e},n)=>a.jsx(HN,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));AO.displayName=HN.displayName;const gC=m.forwardRef(({className:t,...e},n)=>a.jsx(WN,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(ko,{className:"h-4 w-4"})}));gC.displayName=WN.displayName;const yC=m.forwardRef(({className:t,...e},n)=>a.jsx($N,{ref:n,className:$("text-sm font-semibold",t),...e}));yC.displayName=$N.displayName;const vC=m.forwardRef(({className:t,...e},n)=>a.jsx(BN,{ref:n,className:$("text-sm opacity-90",t),...e}));vC.displayName=BN.displayName;function jO(){const{toasts:t}=Fo();return a.jsxs(kO,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(pC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(yC,{children:n}),r&&a.jsx(vC,{children:r})]}),s,a.jsx(gC,{})]},e)}),a.jsx(mC,{})]})}var RO=XE[" useId ".trim().toString()]||(()=>{}),PO=0;function ps(t){const[e,n]=m.useState(RO());return kt(()=>{n(r=>r??String(PO++))},[t]),e?`radix-${e}`:""}const DO=["top","right","bottom","left"],Ti=Math.min,jn=Math.max,Lh=Math.round,vd=Math.floor,qr=t=>({x:t,y:t}),MO={left:"right",right:"left",bottom:"top",top:"bottom"},OO={start:"end",end:"start"};function cy(t,e,n){return jn(t,Ti(e,n))}function bs(t,e){return typeof t=="function"?t(e):t}function _s(t){return t.split("-")[0]}function ll(t){return t.split("-")[1]}function ox(t){return t==="x"?"y":"x"}function ax(t){return t==="y"?"height":"width"}function Ni(t){return["top","bottom"].includes(_s(t))?"y":"x"}function lx(t){return ox(Ni(t))}function LO(t,e,n){n===void 0&&(n=!1);const r=ll(t),s=lx(t),i=ax(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Vh(o)),[o,Vh(o)]}function VO(t){const e=Vh(t);return[uy(t),e,uy(e)]}function uy(t){return t.replace(/start|end/g,e=>OO[e])}function FO(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function zO(t,e,n,r){const s=ll(t);let i=FO(_s(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(uy)))),i}function Vh(t){return t.replace(/left|right|bottom|top/g,e=>MO[e])}function UO(t){return{top:0,right:0,bottom:0,left:0,...t}}function xC(t){return typeof t!="number"?UO(t):{top:t,right:t,bottom:t,left:t}}function Fh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function fb(t,e,n){let{reference:r,floating:s}=t;const i=Ni(e),o=lx(e),l=ax(o),c=_s(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(ll(e)){case"start":y[o]-=p*(n&&u?-1:1);break;case"end":y[o]+=p*(n&&u?-1:1);break}return y}const $O=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=fb(u,r,c),p=r,y={},b=0;for(let v=0;v<l.length;v++){const{name:E,fn:w}=l[v],{x,y:_,data:I,reset:M}=await w({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});h=x??h,f=_??f,y={...y,[E]:{...y[E],...I}},M&&b<=50&&(b++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(u=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:h,y:f}=fb(u,p,c)),v=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:y}};async function Hc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:y=0}=bs(e,t),b=xC(y),E=l[p?f==="floating"?"reference":"floating":f],w=Fh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},M=Fh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:_,strategy:c}):x);return{top:(w.top-M.top+b.top)/I.y,bottom:(M.bottom-w.bottom+b.bottom)/I.y,left:(w.left-M.left+b.left)/I.x,right:(M.right-w.right+b.right)/I.x}}const BO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=bs(t,e)||{};if(u==null)return{};const f=xC(h),p={x:n,y:r},y=lx(s),b=ax(y),v=await o.getDimensions(u),E=y==="y",w=E?"top":"left",x=E?"bottom":"right",_=E?"clientHeight":"clientWidth",I=i.reference[b]+i.reference[y]-p[y]-i.floating[b],M=p[y]-i.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=D?D[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(D)))&&(T=l.floating[_]||i.floating[b]);const N=I/2-M/2,C=T/2-v[b]/2-1,k=Ti(f[w],C),A=Ti(f[x],C),P=k,R=T-v[b]-A,F=T/2-v[b]/2+N,ae=cy(P,F,R),ee=!c.arrow&&ll(s)!=null&&F!==ae&&i.reference[b]/2-(F<P?k:A)-v[b]/2<0,Z=ee?F<P?F-P:F-R:0;return{[y]:p[y]+Z,data:{[y]:ae,centerOffset:F-ae-Z,...ee&&{alignmentOffset:Z}},reset:ee}}}),HO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...E}=bs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=_s(s),x=Ni(l),_=_s(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),M=p||(_||!v?[Vh(l)]:VO(l)),D=b!=="none";!p&&D&&M.push(...zO(l,v,b,I));const T=[l,...M],N=await Hc(e,E),C=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(N[w]),f){const F=LO(s,o,I);C.push(N[F[0]],N[F[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(F=>F<=0)){var A,P;const F=(((A=i.flip)==null?void 0:A.index)||0)+1,ae=T[F];if(ae)return{data:{index:F,overflows:k},reset:{placement:ae}};let ee=(P=k.filter(Z=>Z.overflows[0]<=0).sort((Z,O)=>Z.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!ee)switch(y){case"bestFit":{var R;const Z=(R=k.filter(O=>{if(D){const B=Ni(O.placement);return B===x||B==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:R[0];Z&&(ee=Z);break}case"initialPlacement":ee=l;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function mb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pb(t){return DO.some(e=>t[e]>=0)}const WO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=bs(t,e);switch(r){case"referenceHidden":{const i=await Hc(e,{...s,elementContext:"reference"}),o=mb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:pb(o)}}}case"escaped":{const i=await Hc(e,{...s,altBoundary:!0}),o=mb(i,n.floating);return{data:{escapedOffsets:o,escaped:pb(o)}}}default:return{}}}}};async function qO(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=_s(n),l=ll(n),c=Ni(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=bs(e,t);let{mainAxis:p,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(y=l==="end"?b*-1:b),c?{x:y*h,y:p*u}:{x:p*u,y:y*h}}const GO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await qO(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},KO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:E=>{let{x:w,y:x}=E;return{x:w,y:x}}},...c}=bs(t,e),u={x:n,y:r},h=await Hc(e,c),f=Ni(_s(s)),p=ox(f);let y=u[p],b=u[f];if(i){const E=p==="y"?"top":"left",w=p==="y"?"bottom":"right",x=y+h[E],_=y-h[w];y=cy(x,y,_)}if(o){const E=f==="y"?"top":"left",w=f==="y"?"bottom":"right",x=b+h[E],_=b-h[w];b=cy(x,b,_)}const v=l.fn({...e,[p]:y,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[f]:o}}}}}},QO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=bs(t,e),h={x:n,y:r},f=Ni(s),p=ox(f);let y=h[p],b=h[f];const v=bs(l,e),E=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const _=p==="y"?"height":"width",I=i.reference[p]-i.floating[_]+E.mainAxis,M=i.reference[p]+i.reference[_]-E.mainAxis;y<I?y=I:y>M&&(y=M)}if(u){var w,x;const _=p==="y"?"width":"height",I=["top","left"].includes(_s(s)),M=i.reference[f]-i.floating[_]+(I&&((w=o.offset)==null?void 0:w[f])||0)+(I?0:E.crossAxis),D=i.reference[f]+i.reference[_]+(I?0:((x=o.offset)==null?void 0:x[f])||0)-(I?E.crossAxis:0);b<M?b=M:b>D&&(b=D)}return{[p]:y,[f]:b}}}},YO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=bs(t,e),h=await Hc(e,u),f=_s(s),p=ll(s),y=Ni(s)==="y",{width:b,height:v}=i.floating;let E,w;f==="top"||f==="bottom"?(E=f,w=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,E=p==="end"?"top":"bottom");const x=v-h.top-h.bottom,_=b-h.left-h.right,I=Ti(v-h[E],x),M=Ti(b-h[w],_),D=!e.middlewareData.shift;let T=I,N=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=x),D&&!p){const k=jn(h.left,0),A=jn(h.right,0),P=jn(h.top,0),R=jn(h.bottom,0);y?N=b-2*(k!==0||A!==0?k+A:jn(h.left,h.right)):T=v-2*(P!==0||R!==0?P+R:jn(h.top,h.bottom))}await c({...e,availableWidth:N,availableHeight:T});const C=await o.getDimensions(l.floating);return b!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Hf(){return typeof window<"u"}function cl(t){return wC(t)?(t.nodeName||"").toLowerCase():"#document"}function On(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function es(t){var e;return(e=(wC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wC(t){return Hf()?t instanceof Node||t instanceof On(t).Node:!1}function br(t){return Hf()?t instanceof Element||t instanceof On(t).Element:!1}function Xr(t){return Hf()?t instanceof HTMLElement||t instanceof On(t).HTMLElement:!1}function gb(t){return!Hf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof On(t).ShadowRoot}function yu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=_r(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function XO(t){return["table","td","th"].includes(cl(t))}function Wf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function cx(t){const e=ux(),n=br(t)?_r(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function JO(t){let e=Ci(t);for(;Xr(e)&&!Ga(e);){if(cx(e))return e;if(Wf(e))return null;e=Ci(e)}return null}function ux(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ga(t){return["html","body","#document"].includes(cl(t))}function _r(t){return On(t).getComputedStyle(t)}function qf(t){return br(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ci(t){if(cl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gb(t)&&t.host||es(t);return gb(e)?e.host:e}function bC(t){const e=Ci(t);return Ga(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xr(e)&&yu(e)?e:bC(e)}function Wc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=bC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=On(s);if(i){const l=dy(o);return e.concat(o,o.visualViewport||[],yu(s)?s:[],l&&n?Wc(l):[])}return e.concat(s,Wc(s,[],n))}function dy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function _C(t){const e=_r(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Xr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Lh(n)!==i||Lh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function dx(t){return br(t)?t:t.contextElement}function xa(t){const e=dx(t);if(!Xr(e))return qr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=_C(e);let o=(i?Lh(n.width):n.width)/r,l=(i?Lh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ZO=qr(0);function EC(t){const e=On(t);return!ux()||!e.visualViewport?ZO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function e3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==On(t)?!1:e}function Io(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=dx(t);let o=qr(1);e&&(r?br(r)&&(o=xa(r)):o=xa(t));const l=e3(i,n,r)?EC(i):qr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=On(i),y=r&&br(r)?On(r):r;let b=p,v=dy(b);for(;v&&r&&y!==b;){const E=xa(v),w=v.getBoundingClientRect(),x=_r(v),_=w.left+(v.clientLeft+parseFloat(x.paddingLeft))*E.x,I=w.top+(v.clientTop+parseFloat(x.paddingTop))*E.y;c*=E.x,u*=E.y,h*=E.x,f*=E.y,c+=_,u+=I,b=On(v),v=dy(b)}}return Fh({width:h,height:f,x:c,y:u})}function hx(t,e){const n=qf(t).scrollLeft;return e?e.left+n:Io(es(t)).left+n}function SC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:hx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function t3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=es(r),l=e?Wf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=qr(1);const h=qr(0),f=Xr(r);if((f||!f&&!i)&&((cl(r)!=="body"||yu(o))&&(c=qf(r)),Xr(r))){const y=Io(r);u=xa(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const p=o&&!f&&!i?SC(o,c,!0):qr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function n3(t){return Array.from(t.getClientRects())}function r3(t){const e=es(t),n=qf(t),r=t.ownerDocument.body,s=jn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=jn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+hx(t);const l=-n.scrollTop;return _r(r).direction==="rtl"&&(o+=jn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function s3(t,e){const n=On(t),r=es(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=ux();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function i3(t,e){const n=Io(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Xr(t)?xa(t):qr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function yb(t,e,n){let r;if(e==="viewport")r=s3(t,n);else if(e==="document")r=r3(es(t));else if(br(e))r=i3(e,n);else{const s=EC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Fh(r)}function TC(t,e){const n=Ci(t);return n===e||!br(n)||Ga(n)?!1:_r(n).position==="fixed"||TC(n,e)}function o3(t,e){const n=e.get(t);if(n)return n;let r=Wc(t,[],!1).filter(l=>br(l)&&cl(l)!=="body"),s=null;const i=_r(t).position==="fixed";let o=i?Ci(t):t;for(;br(o)&&!Ga(o);){const l=_r(o),c=cx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||yu(o)&&!c&&TC(t,o))?r=r.filter(h=>h!==o):s=l,o=Ci(o)}return e.set(t,r),r}function a3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Wf(e)?[]:o3(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=yb(e,h,s);return u.top=jn(f.top,u.top),u.right=Ti(f.right,u.right),u.bottom=Ti(f.bottom,u.bottom),u.left=jn(f.left,u.left),u},yb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function l3(t){const{width:e,height:n}=_C(t);return{width:e,height:n}}function c3(t,e,n){const r=Xr(e),s=es(e),i=n==="fixed",o=Io(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=qr(0);if(r||!r&&!i)if((cl(e)!=="body"||yu(s))&&(l=qf(e)),r){const p=Io(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=hx(s));const u=s&&!r&&!i?SC(s,l):qr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Rp(t){return _r(t).position==="static"}function vb(t,e){if(!Xr(t)||_r(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return es(t)===n&&(n=n.ownerDocument.body),n}function NC(t,e){const n=On(t);if(Wf(t))return n;if(!Xr(t)){let s=Ci(t);for(;s&&!Ga(s);){if(br(s)&&!Rp(s))return s;s=Ci(s)}return n}let r=vb(t,e);for(;r&&XO(r)&&Rp(r);)r=vb(r,e);return r&&Ga(r)&&Rp(r)&&!cx(r)?n:r||JO(t)||n}const u3=async function(t){const e=this.getOffsetParent||NC,n=this.getDimensions,r=await n(t.floating);return{reference:c3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function d3(t){return _r(t).direction==="rtl"}const h3={convertOffsetParentRelativeRectToViewportRelativeRect:t3,getDocumentElement:es,getClippingRect:a3,getOffsetParent:NC,getElementRects:u3,getClientRects:n3,getDimensions:l3,getScale:xa,isElement:br,isRTL:d3};function CC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function f3(t,e){let n=null,r;const s=es(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:y}=u;if(l||e(),!p||!y)return;const b=vd(f),v=vd(s.clientWidth-(h+p)),E=vd(s.clientHeight-(f+y)),w=vd(h),_={rootMargin:-b+"px "+-v+"px "+-E+"px "+-w+"px",threshold:jn(0,Ti(1,c))||1};let I=!0;function M(D){const T=D[0].intersectionRatio;if(T!==c){if(!I)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!CC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(M,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,_)}n.observe(t)}return o(!0),i}function m3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=dx(t),h=s||i?[...u?Wc(u):[],...Wc(e)]:[];h.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=u&&l?f3(u,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(w=>{let[x]=w;x&&x.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=y)==null||_.observe(e)})),n()}),u&&!c&&y.observe(u),y.observe(e));let b,v=c?Io(t):null;c&&E();function E(){const w=Io(t);v&&!CC(v,w)&&n(),v=w,b=requestAnimationFrame(E)}return n(),()=>{var w;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(w=y)==null||w.disconnect(),y=null,c&&cancelAnimationFrame(b)}}const p3=GO,g3=KO,y3=HO,v3=YO,x3=WO,xb=BO,w3=QO,b3=(t,e,n)=>{const r=new Map,s={platform:h3,...n},i={...s.platform,_c:r};return $O(t,e,{...s,platform:i})};var Qd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function zh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!zh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function kC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wb(t,e){const n=kC(t);return Math.round(e*n)/n}function Pp(t){const e=m.useRef(t);return Qd(()=>{e.current=t}),e}function _3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,y]=m.useState(r);zh(p,r)||y(r);const[b,v]=m.useState(null),[E,w]=m.useState(null),x=m.useCallback(O=>{O!==D.current&&(D.current=O,v(O))},[]),_=m.useCallback(O=>{O!==T.current&&(T.current=O,w(O))},[]),I=i||b,M=o||E,D=m.useRef(null),T=m.useRef(null),N=m.useRef(h),C=c!=null,k=Pp(c),A=Pp(s),P=Pp(u),R=m.useCallback(()=>{if(!D.current||!T.current)return;const O={placement:e,strategy:n,middleware:p};A.current&&(O.platform=A.current),b3(D.current,T.current,O).then(B=>{const U={...B,isPositioned:P.current!==!1};F.current&&!zh(N.current,U)&&(N.current=U,Kn.flushSync(()=>{f(U)}))})},[p,e,n,A,P]);Qd(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=m.useRef(!1);Qd(()=>(F.current=!0,()=>{F.current=!1}),[]),Qd(()=>{if(I&&(D.current=I),M&&(T.current=M),I&&M){if(k.current)return k.current(I,M,R);R()}},[I,M,R,k,C]);const ae=m.useMemo(()=>({reference:D,floating:T,setReference:x,setFloating:_}),[x,_]),ee=m.useMemo(()=>({reference:I,floating:M}),[I,M]),Z=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!ee.floating)return O;const B=wb(ee.floating,h.x),U=wb(ee.floating,h.y);return l?{...O,transform:"translate("+B+"px, "+U+"px)",...kC(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:U}},[n,l,ee.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:R,refs:ae,elements:ee,floatingStyles:Z}),[h,R,ae,ee,Z])}const E3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?xb({element:r.current,padding:s}).fn(n):{}:r?xb({element:r,padding:s}).fn(n):{}}}},S3=(t,e)=>({...p3(t),options:[t,e]}),T3=(t,e)=>({...g3(t),options:[t,e]}),N3=(t,e)=>({...w3(t),options:[t,e]}),C3=(t,e)=>({...y3(t),options:[t,e]}),k3=(t,e)=>({...v3(t),options:[t,e]}),I3=(t,e)=>({...x3(t),options:[t,e]}),A3=(t,e)=>({...E3(t),options:[t,e]});var j3="Arrow",IC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});IC.displayName=j3;var R3=IC;function AC(t){const[e,n]=m.useState(void 0);return kt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var fx="Popper",[jC,Gf]=kr(fx),[P3,RC]=jC(fx),PC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(P3,{scope:e,anchor:r,onAnchorChange:s,children:n})};PC.displayName=fx;var DC="PopperAnchor",MC=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=RC(DC,n),o=m.useRef(null),l=Be(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(xe.div,{...s,ref:l})});MC.displayName=DC;var mx="PopperContent",[D3,M3]=jC(mx),OC=m.forwardRef((t,e)=>{var L,K,ce,Y,se,ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:b,...v}=t,E=RC(mx,n),[w,x]=m.useState(null),_=Be(e,Se=>x(Se)),[I,M]=m.useState(null),D=AC(I),T=(D==null?void 0:D.width)??0,N=(D==null?void 0:D.height)??0,C=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],P=A.length>0,R={padding:k,boundary:A.filter(L3),altBoundary:P},{refs:F,floatingStyles:ae,placement:ee,isPositioned:Z,middlewareData:O}=_3({strategy:"fixed",placement:C,whileElementsMounted:(...Se)=>m3(...Se,{animationFrame:y==="always"}),elements:{reference:E.anchor},middleware:[S3({mainAxis:s+N,alignmentAxis:o}),c&&T3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?N3():void 0,...R}),c&&C3({...R}),k3({...R,apply:({elements:Se,rects:Te,availableWidth:Ge,availableHeight:je})=>{const{width:Ve,height:Lt}=Te.reference,We=Se.floating.style;We.setProperty("--radix-popper-available-width",`${Ge}px`),We.setProperty("--radix-popper-available-height",`${je}px`),We.setProperty("--radix-popper-anchor-width",`${Ve}px`),We.setProperty("--radix-popper-anchor-height",`${Lt}px`)}}),I&&A3({element:I,padding:l}),V3({arrowWidth:T,arrowHeight:N}),p&&I3({strategy:"referenceHidden",...R})]}),[B,U]=FC(ee),H=cn(b);kt(()=>{Z&&(H==null||H())},[Z,H]);const Q=(L=O.arrow)==null?void 0:L.x,te=(K=O.arrow)==null?void 0:K.y,J=((ce=O.arrow)==null?void 0:ce.centerOffset)!==0,[X,re]=m.useState();return kt(()=>{w&&re(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:Z?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(Y=O.transformOrigin)==null?void 0:Y.x,(se=O.transformOrigin)==null?void 0:se.y].join(" "),...((ie=O.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(D3,{scope:n,placedSide:B,onArrowChange:M,arrowX:Q,arrowY:te,shouldHideArrow:J,children:a.jsx(xe.div,{"data-side":B,"data-align":U,...v,ref:_,style:{...v.style,animation:Z?void 0:"none"}})})})});OC.displayName=mx;var LC="PopperArrow",O3={top:"bottom",right:"left",bottom:"top",left:"right"},VC=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=M3(LC,r),o=O3[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(R3,{...s,ref:n,style:{...s.style,display:"block"}})})});VC.displayName=LC;function L3(t){return t!==null}var V3=t=>({name:"transformOrigin",options:t,fn(e){var E,w,x;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=FC(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,y=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let b="",v="";return u==="bottom"?(b=o?f:`${p}px`,v=`${-c}px`):u==="top"?(b=o?f:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,v=o?f:`${y}px`):u==="left"&&(b=`${r.floating.width+c}px`,v=o?f:`${y}px`),{data:{x:b,y:v}}}});function FC(t){const[e,n="center"]=t.split("-");return[e,n]}var zC=PC,UC=MC,$C=OC,BC=VC,[Kf,BW]=kr("Tooltip",[Gf]),Qf=Gf(),HC="TooltipProvider",F3=700,hy="tooltip.open",[z3,px]=Kf(HC),WC=t=>{const{__scopeTooltip:e,delayDuration:n=F3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(z3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};WC.displayName=HC;var Yf="Tooltip",[U3,vu]=Kf(Yf),qC=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=px(Yf,t.__scopeTooltip),u=Qf(e),[h,f]=m.useState(null),p=ps(),y=m.useRef(0),b=o??c.disableHoverableContent,v=l??c.delayDuration,E=m.useRef(!1),[w=!1,x]=Si({prop:r,defaultProp:s,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(hy))):c.onClose(),i==null||i(T)}}),_=m.useMemo(()=>w?E.current?"delayed-open":"instant-open":"closed",[w]),I=m.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E.current=!1,x(!0)},[x]),M=m.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x(!1)},[x]),D=m.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{E.current=!0,x(!0),y.current=0},v)},[v,x]);return m.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),a.jsx(zC,{...u,children:a.jsx(U3,{scope:e,contentId:p,open:w,stateAttribute:_,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?D():I()},[c.isOpenDelayedRef,D,I]),onTriggerLeave:m.useCallback(()=>{b?M():(window.clearTimeout(y.current),y.current=0)},[M,b]),onOpen:I,onClose:M,disableHoverableContent:b,children:n})})};qC.displayName=Yf;var fy="TooltipTrigger",GC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vu(fy,n),i=px(fy,n),o=Qf(n),l=m.useRef(null),c=Be(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(UC,{asChild:!0,...o,children:a.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});GC.displayName=fy;var gx="TooltipPortal",[$3,B3]=Kf(gx,{forceMount:void 0}),KC=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=vu(gx,e);return a.jsx($3,{scope:e,forceMount:n,children:a.jsx(zi,{present:n||i.open,children:a.jsx(mu,{asChild:!0,container:s,children:r})})})};KC.displayName=gx;var Ka="TooltipContent",QC=m.forwardRef((t,e)=>{const n=B3(Ka,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=vu(Ka,t.__scopeTooltip);return a.jsx(zi,{present:r||o.open,children:o.disableHoverableContent?a.jsx(YC,{side:s,...i,ref:e}):a.jsx(H3,{side:s,...i,ref:e})})}),H3=m.forwardRef((t,e)=>{const n=vu(Ka,t.__scopeTooltip),r=px(Ka,t.__scopeTooltip),s=m.useRef(null),i=Be(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),y=m.useCallback((b,v)=>{const E=b.currentTarget,w={x:b.clientX,y:b.clientY},x=Q3(w,E.getBoundingClientRect()),_=Y3(w,x),I=X3(v.getBoundingClientRect()),M=Z3([..._,...I]);l(M),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const b=E=>y(E,h),v=E=>y(E,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",v)}}},[c,h,y,p]),m.useEffect(()=>{if(o){const b=v=>{const E=v.target,w={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(E))||(h==null?void 0:h.contains(E)),_=!J3(w,o);x?p():_&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,o,u,p]),a.jsx(YC,{...t,ref:i})}),[W3,q3]=Kf(Yf,{isInside:!1}),G3=_N("TooltipContent"),YC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=vu(Ka,n),u=Qf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(hy,h),()=>document.removeEventListener(hy,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const y=p.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(fu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs($C,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(G3,{children:r}),a.jsx(W3,{scope:n,isInside:!0,children:a.jsx(r5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});QC.displayName=Ka;var XC="TooltipArrow",K3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qf(n);return q3(XC,n).isInside?null:a.jsx(BC,{...s,...r,ref:e})});K3.displayName=XC;function Q3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Y3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function X3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function J3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function Z3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),eL(e)}function eL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var tL=WC,nL=qC,rL=GC,JC=KC,ZC=QC;const Xf=tL,Jf=nL,Zf=rL,xu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(ZC,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));xu.displayName=ZC.displayName;const sL="modulepreload",iL=function(t){return"/"+t},bb={},xd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=iL(c),c in bb)return;bb[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":sL,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},oL=()=>{};var _b={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ek(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new lL;const p=i<<2|l>>4;if(r.push(p),u!==64){const y=l<<4&240|u>>2;if(r.push(y),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(t){const e=ek(t);return tk.encodeByteArray(e,!0)},Uh=function(t){return cL(t).replace(/\./g,"")},nk=function(t){try{return tk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof _b>"u")return;const t=_b.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nk(t[1]);return e&&JSON.parse(e)},em=()=>{try{return oL()||dL()||hL()||fL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rk=t=>{var e,n;return(n=(e=em())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mL=t=>{const e=rk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sk=()=>{var t;return(t=em())==null?void 0:t.config},ik=t=>{var e;return(e=em())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ok(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}const fc={};function yL(){const t={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?t.emulator.push(e):t.prod.push(e);return t}function vL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Eb=!1;function ak(t,e){if(typeof window>"u"||typeof document>"u"||!ul(window.location.host)||fc[t]===e||fc[t]||Eb)return;fc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=yL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Eb=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=vL(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),E=document.getElementById(v)||document.createElement("a"),w=n("preprendIcon"),x=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;l(_),h(E,v);const I=u();c(x,w),_.append(x,b,E,I),document.body.appendChild(_)}i?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function wL(){var e;const t=(e=em())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _L(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SL(){const t=tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TL(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="FirebaseError";class ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kL,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IL(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ks(s,l,r)}}function IL(t,e){return t.replace(AL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AL=/\{\$([^}]+)}/g;function jL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Sb(i)&&Sb(o)){if(!ki(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function RL(t,e){const n=new PL(t,e);return n.subscribe.bind(n)}class PL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Dp),s.error===void 0&&(s.error=Dp),s.complete===void 0&&(s.complete=Dp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LL(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OL(t){return t===so?void 0:t}function LL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ML(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const FL={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},zL=ke.INFO,UL={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},$L=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=UL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yx{constructor(e){this.name=e,this._logLevel=zL,this._logHandler=$L,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const BL=(t,e)=>e.some(n=>t instanceof n);let Tb,Nb;function HL(){return Tb||(Tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lk=new WeakMap,my=new WeakMap,ck=new WeakMap,Mp=new WeakMap,vx=new WeakMap;function qL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lk.set(n,t)}).catch(()=>{}),vx.set(e,t),e}function GL(t){if(my.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});my.set(t,e)}let py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ck.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KL(t){py=t(py)}function QL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Op(this),e,...n);return ck.set(r,e.sort?e.sort():[e]),gi(r)}:WL().includes(t)?function(...e){return t.apply(Op(this),e),gi(lk.get(this))}:function(...e){return gi(t.apply(Op(this),e))}}function YL(t){return typeof t=="function"?QL(t):(t instanceof IDBTransaction&&GL(t),BL(t,HL())?new Proxy(t,py):t)}function gi(t){if(t instanceof IDBRequest)return qL(t);if(Mp.has(t))return Mp.get(t);const e=YL(t);return e!==t&&(Mp.set(t,e),vx.set(e,t)),e}const Op=t=>vx.get(t);function XL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=gi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gi(o.result),c.oldVersion,c.newVersion,gi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const JL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],Lp=new Map;function Cb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JL.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Lp.set(e,i),i}KL(t=>({...t,get:(e,n,r)=>Cb(e,n)||t.get(e,n,r),has:(e,n)=>!!Cb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function t6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gy="@firebase/app",kb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new yx("@firebase/app"),n6="@firebase/app-compat",r6="@firebase/analytics-compat",s6="@firebase/analytics",i6="@firebase/app-check-compat",o6="@firebase/app-check",a6="@firebase/auth",l6="@firebase/auth-compat",c6="@firebase/database",u6="@firebase/data-connect",d6="@firebase/database-compat",h6="@firebase/functions",f6="@firebase/functions-compat",m6="@firebase/installations",p6="@firebase/installations-compat",g6="@firebase/messaging",y6="@firebase/messaging-compat",v6="@firebase/performance",x6="@firebase/performance-compat",w6="@firebase/remote-config",b6="@firebase/remote-config-compat",_6="@firebase/storage",E6="@firebase/storage-compat",S6="@firebase/firestore",T6="@firebase/ai",N6="@firebase/firestore-compat",C6="firebase",k6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",I6={[gy]:"fire-core",[n6]:"fire-core-compat",[s6]:"fire-analytics",[r6]:"fire-analytics-compat",[o6]:"fire-app-check",[i6]:"fire-app-check-compat",[a6]:"fire-auth",[l6]:"fire-auth-compat",[c6]:"fire-rtdb",[u6]:"fire-data-connect",[d6]:"fire-rtdb-compat",[h6]:"fire-fn",[f6]:"fire-fn-compat",[m6]:"fire-iid",[p6]:"fire-iid-compat",[g6]:"fire-fcm",[y6]:"fire-fcm-compat",[v6]:"fire-perf",[x6]:"fire-perf-compat",[w6]:"fire-rc",[b6]:"fire-rc-compat",[_6]:"fire-gcs",[E6]:"fire-gcs-compat",[S6]:"fire-fst",[N6]:"fire-fst-compat",[T6]:"fire-vertex","fire-js":"fire-js",[C6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,A6=new Map,vy=new Map;function Ib(t,e){try{t.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qa(t){const e=t.name;if(vy.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,t);for(const n of $h.values())Ib(n,t);for(const n of A6.values())Ib(n,t);return!0}function xx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new wu("app","Firebase",j6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=k6;function uk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:yy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw yi.create("bad-app-name",{appName:String(s)});if(n||(n=sk()),!n)throw yi.create("no-options");const i=$h.get(s);if(i){if(ki(n,i.options)&&ki(r,i.config))return i;throw yi.create("duplicate-app",{appName:s})}const o=new VL(s);for(const c of vy.values())o.addComponent(c);const l=new R6(n,r,o);return $h.set(s,l),l}function dk(t=yy){const e=$h.get(t);if(!e&&t===yy&&sk())return uk();if(!e)throw yi.create("no-app",{appName:t});return e}function vi(t,e,n){let r=I6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(o.join(" "));return}Qa(new Ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="firebase-heartbeat-database",D6=1,qc="firebase-heartbeat-store";let Vp=null;function hk(){return Vp||(Vp=XL(P6,D6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),Vp}async function M6(t){try{const n=(await hk()).transaction(qc),r=await n.objectStore(qc).get(fk(t));return await n.done,r}catch(e){if(e instanceof ks)Es.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function Ab(t,e){try{const r=(await hk()).transaction(qc,"readwrite");await r.objectStore(qc).put(e,fk(t)),await r.done}catch(n){if(n instanceof ks)Es.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(r.message)}}}function fk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=1024,L6=30;class V6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>L6){const o=U6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jb(),{heartbeatsToSend:r,unsentEntries:s}=F6(this._heartbeatsCache.heartbeats),i=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Es.warn(n),""}}}function jb(){return new Date().toISOString().substring(0,10)}function F6(t,e=O6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rb(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}function U6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){Qa(new Ao("platform-logger",e=>new e6(e),"PRIVATE")),Qa(new Ao("heartbeat",e=>new V6(e),"PRIVATE")),vi(gy,kb,t),vi(gy,kb,"esm2020"),vi("fire-js","")}$6("");function mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B6=mk,pk=new wu("auth","Firebase",mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new yx("@firebase/auth");function H6(t,...e){Bh.logLevel<=ke.WARN&&Bh.warn(`Auth (${dl}): ${t}`,...e)}function Yd(t,...e){Bh.logLevel<=ke.ERROR&&Bh.error(`Auth (${dl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw bx(t,...e)}function pr(t,...e){return bx(t,...e)}function wx(t,e,n){const r={...B6(),[e]:n};return new wu("auth","Firebase",r).create(e,{appName:t.name})}function wo(t){return wx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),wx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pk.create(t,...e)}function ye(t,e,...n){if(!t)throw bx(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yd(e),new Error(e)}function Ss(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function q6(){return Pb()==="http:"||Pb()==="https:"}function Pb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q6()||_L()||"connection"in navigator)?navigator.onLine:!0}function K6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=xL()||EL()}get(){return G6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X6=new _u(3e4,6e4);function Ex(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hl(t,e,n,r,s={}){return yk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=bu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return bL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ul(t.emulatorConfig.host)&&(u.credentials="include"),gk.fetch()(await vk(t,t.config.apiHost,n,l),u)})}async function yk(t,e,n){t._canInitEmulator=!1;const r={...Q6,...e};try{const s=new Z6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw wd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wx(t,h,u);Jr(t,h)}}catch(s){if(s instanceof ks)throw s;Jr(t,"network-request-failed",{message:String(s)})}}async function J6(t,e,n,r,s={}){const i=await hl(t,e,n,r,s);return"mfaPendingCredential"in i&&Jr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function vk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?_x(t.config,s):`${t.config.apiScheme}://${s}`;return Y6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Z6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),X6.get())})}}function wd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(t,e){return hl(t,"POST","/v1/accounts:delete",e)}async function Hh(t,e){return hl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tV(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=Sx(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mc(Fp(s.auth_time)),issuedAtTime:mc(Fp(s.iat)),expirationTime:mc(Fp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Fp(t){return Number(t)*1e3}function Sx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{const s=nk(n);return s?JSON.parse(s):(Yd("Failed to decode base64 JWT payload"),null)}catch(s){return Yd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Db(t){const e=Sx(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ks&&nV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Gc(t,Hh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?xk(s.providerUserInfo):[],o=iV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new wy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function sV(t){const e=Mt(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(t,e){const n=await yk(t,{},async()=>{const r=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await vk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ul(t.emulatorConfig.host)&&(c.credentials="include"),gk.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aV(t,e){return hl(t,"POST","/v2/accounts:revokeToken",Ex(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Db(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wa;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tV(this,e)}reload(){return sV(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await Gc(this,eV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:b,stsTokenManager:v}=n;ye(f&&v,e,"internal-error");const E=wa.fromJSON(this.name,v);ye(typeof f=="string",e,"internal-error"),$s(r,e.name),$s(s,e.name),ye(typeof p=="boolean",e,"internal-error"),ye(typeof y=="boolean",e,"internal-error"),$s(i,e.name),$s(o,e.name),$s(l,e.name),$s(c,e.name),$s(u,e.name),$s(h,e.name);const w=new dr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:E,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(x=>({...x}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new wa;s.updateFromServerResponse(n);const i=new dr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new wa;l.updateFromIdToken(r);const c=new dr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new wy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new Map;function fs(t){Ss(t instanceof Function,"Expected a class definition");let e=Mb.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wk.type="NONE";const Ob=wk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Xd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?dr._fromGetAccountInfoResponse(this.auth,n,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ba(fs(Ob),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||fs(Ob);const o=Xd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Hh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await dr._fromGetAccountInfoResponse(e,p,h)}else f=dr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ba(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ba(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nk(e))return"Blackberry";if(Ck(e))return"Webos";if(_k(e))return"Safari";if((e.includes("chrome/")||Ek(e))&&!e.includes("edge/"))return"Chrome";if(Tk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bk(t=tn()){return/firefox\//i.test(t)}function _k(t=tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ek(t=tn()){return/crios\//i.test(t)}function Sk(t=tn()){return/iemobile/i.test(t)}function Tk(t=tn()){return/android/i.test(t)}function Nk(t=tn()){return/blackberry/i.test(t)}function Ck(t=tn()){return/webos/i.test(t)}function Tx(t=tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lV(t=tn()){var e;return Tx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function cV(){return SL()&&document.documentMode===10}function kk(t=tn()){return Tx(t)||Tk(t)||Ck(t)||Nk(t)||/windows phone/i.test(t)||Sk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e=[]){let n;switch(t){case"Browser":n=Lb(tn());break;case"Worker":n=`${Lb(tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e={}){return hl(t,"GET","/v2/passwordPolicy",Ex(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=6;class fV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vb(this),this.idTokenSubscription=new Vb(this),this.beforeStateQueue=new uV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(wo(this));const n=e?Mt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dV(this),n=new fV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ik(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&H6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tm(t){return Mt(t)}class Vb{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pV(t){Nx=t}function gV(t){return Nx.loadJS(t)}function yV(){return Nx.gapiScript}function vV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e){const n=xx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ki(i,e??{}))return s;Jr(s,"already-initialized")}return n.initialize({options:e})}function wV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bV(t,e,n){const r=tm(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ak(e),{host:o,port:l}=_V(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ki(u,r.config.emulator)&&ki(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ul(o)?(ok(`${i}//${o}${c}`),ak("Auth",!0)):EV()}function Ak(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _V(t){const e=Ak(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fb(o)}}}function Fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t,e){return J6(t,"POST","/v1/accounts:signInWithIdp",Ex(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="http://localhost";class jo extends jk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new jo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _a(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_a(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_a(e,n)}buildRequest(){const e={requestUri:SV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Cx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Eu{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jo._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xt.credential(n,r)}catch{return null}}}Xt.GOOGLE_SIGN_IN_METHOD="google.com";Xt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Eu{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Eu{constructor(){super("twitter.com")}static credential(e,n){return jo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await dr._fromIdTokenResponse(e,r,s),o=zb(r);return new Ya({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zb(r);return new Ya({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends ks{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qh(e,n,r,s)}}function Rk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(t,i,e,r):i})}async function TV(t,e,n=!1){const r=await Gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ya._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(wo(r));const s="reauthenticate";try{const i=await Gc(t,Rk(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Sx(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),Ya._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e,n=!1){if(ur(t.app))return Promise.reject(wo(t));const r="signIn",s=await Rk(t,r,e),i=await Ya._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function kV(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function IV(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function AV(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}function jV(t){return Mt(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=1e3,PV=10;class Dk extends Pk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dk.type="LOCAL";const DV=Dk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends Pk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mk.type="SESSION";const Ok=Mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await MV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=kx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function LV(t){Gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function VV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function zV(){return Lk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="firebaseLocalStorageDb",UV=1,Kh="firebaseLocalStorage",Fk="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rm(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function $V(){const t=indexedDB.deleteDatabase(Vk);return new Su(t).toPromise()}function by(){const t=indexedDB.open(Vk,UV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:Fk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await $V(),e(await by()))})})}async function Ub(t,e,n){const r=rm(t,!0).put({[Fk]:e,value:n});return new Su(r).toPromise()}async function BV(t,e){const n=rm(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function $b(t,e){const n=rm(t,!0).delete(e);return new Su(n).toPromise()}const HV=800,WV=3;class zk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await by(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nm._getInstance(zV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await VV(),!this.activeServiceWorker)return;this.sender=new OV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await by();return await Ub(e,Gh,"1"),await $b(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ub(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$b(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=rm(s,!1).getAll();return new Su(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zk.type="LOCAL";const qV=zk;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return e?fs(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends jk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GV(t){return CV(t.auth,new Ix(t),t.bypassAuthState)}function KV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),NV(n,new Ix(t),t.bypassAuthState)}async function QV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),TV(n,new Ix(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GV;case"linkViaPopup":case"linkViaRedirect":return QV;case"reauthViaPopup":case"reauthViaRedirect":return KV;default:Jr(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=new _u(2e3,1e4);async function bd(t,e,n){if(ur(t.app))return Promise.reject(pr(t,"operation-not-supported-in-this-environment"));const r=tm(t);W6(t,e,Cx);const s=Uk(r,n);return new co(r,"signInViaPopup",e,s).executeNotNull()}class co extends $k{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YV.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="pendingRedirect",Jd=new Map;class JV extends $k{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await ZV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZV(t,e){const n=nF(e),r=tF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function eF(t,e){Jd.set(t._key(),e)}function tF(t){return fs(t._redirectPersistence)}function nF(t){return Xd(XV,t.config.apiKey,t.name)}async function rF(t,e,n=!1){if(ur(t.app))return Promise.reject(wo(t));const r=tm(t),s=Uk(r,e),o=await new JV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=10*60*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Bk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bb(e))}saveEventToCache(e){this.cachedEventUids.add(Bb(e)),this.lastProcessedEventTime=Date.now()}}function Bb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e={}){return hl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cF=/^https?/;async function uF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aF(t);for(const n of e)try{if(dF(n))return}catch{}Jr(t,"unauthorized-domain")}function dF(t){const e=xy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cF.test(n))return!1;if(lF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new _u(3e4,6e4);function Hb(){const t=Gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fF(t){return new Promise((e,n)=>{var s,i,o;function r(){Hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hb(),n(pr(t,"network-request-failed"))},timeout:hF.get()})}if((i=(s=Gr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Gr().gapi)!=null&&o.load)r();else{const l=vV("iframefcb");return Gr()[l]=()=>{gapi.load?r():n(pr(t,"network-request-failed"))},gV(`${yV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function mF(t){return Zd=Zd||fF(t),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new _u(5e3,15e3),gF="__/auth/iframe",yF="emulator/auth/iframe",vF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wF(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_x(e,yF):`https://${t.config.authDomain}/${gF}`,r={apiKey:e.apiKey,appName:t.name,v:dl},s=xF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bu(r).slice(1)}`}async function bF(t){const e=await mF(t),n=Gr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:wF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pr(t,"network-request-failed"),l=Gr().setTimeout(()=>{i(o)},pF.get());function c(){Gr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EF=500,SF=600,TF="_blank",NF="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CF(t,e,n,r=EF,s=SF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={..._F,width:r.toString(),height:s.toString(),top:i,left:o},u=tn().toLowerCase();n&&(l=Ek(u)?TF:n),bk(u)&&(e=e||NF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[y,b])=>`${p}${y}=${b},`,"");if(lV(u)&&l!=="_self")return kF(e||"",l),new Wb(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Wb(f)}function kF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="__/auth/handler",AF="emulator/auth/handler",jF=encodeURIComponent("fac");async function qb(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dl,eventId:s};if(e instanceof Cx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Eu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${jF}=${encodeURIComponent(c)}`:"";return`${RF(t)}?${bu(l).slice(1)}${u}`}function RF({config:t}){return t.emulator?_x(t,AF):`https://${t.authDomain}/${IF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="webStorageSupport";class PF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ok,this._completeRedirectFn=rF,this._overrideRedirectResult=eF}async _openPopup(e,n,r,s){var o;Ss((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await qb(e,n,r,xy(),s);return CF(e,i,kx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await qb(e,n,r,xy(),s);return LV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ss(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bF(e),r=new iF(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zp,{type:zp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[zp];i!==void 0&&n(!!i),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kk()||_k()||Tx()}}const DF=PF;var Gb="@firebase/auth",Kb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LF(t){Qa(new Ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ik(t)},u=new mV(r,s,i,c);return wV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qa(new Ao("auth-internal",e=>{const n=tm(e.getProvider("auth").getImmediate());return(r=>new MF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(Gb,Kb,OF(t)),vi(Gb,Kb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=5*60,FF=ik("authIdTokenMaxAge")||VF;let Qb=null;const zF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FF)return;const s=n==null?void 0:n.token;Qb!==s&&(Qb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UF(t=dk()){const e=xx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xV(t,{popupRedirectResolver:DF,persistence:[qV,DV,Ok]}),r=ik("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zF(i.toString());IV(n,o,()=>o(n.currentUser)),kV(n,l=>o(l))}}const s=rk("auth");return s&&bV(n,`http://${s}`),n}function $F(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$F().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LF("Browser");var BF="firebase",HF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(BF,HF,"app");var Yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,Hk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,N){function C(){}C.prototype=N.prototype,T.F=N.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(k,A,P){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return N.prototype[A].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,N,C){C||(C=0);const k=Array(16);if(typeof N=="string")for(var A=0;A<16;++A)k[A]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(A=0;A<16;++A)k[A]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=T.g[0],C=T.g[1],A=T.g[2];let P=T.g[3],R;R=N+(P^C&(A^P))+k[0]+3614090360&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[1]+3905402710&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[2]+606105819&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[3]+3250441966&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[4]+4118548399&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[5]+1200080426&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[6]+2821735955&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[7]+4249261313&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[8]+1770035416&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[9]+2336552879&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[10]+4294925233&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[11]+2304563134&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[12]+1804603682&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[13]+4254626195&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[14]+2792965006&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[15]+1236535329&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(A^P&(C^A))+k[1]+4129170786&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[6]+3225465664&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[11]+643717713&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[0]+3921069994&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[5]+3593408605&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[10]+38016083&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[15]+3634488961&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[4]+3889429448&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[9]+568446438&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[14]+3275163606&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[3]+4107603335&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[8]+1163531501&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[13]+2850285829&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[2]+4243563512&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[7]+1735328473&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[12]+2368359562&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(C^A^P)+k[5]+4294588738&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[8]+2272392833&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[11]+1839030562&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[14]+4259657740&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[1]+2763975236&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[4]+1272893353&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[7]+4139469664&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[10]+3200236656&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[13]+681279174&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[0]+3936430074&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[3]+3572445317&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[6]+76029189&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[9]+3654602809&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[12]+3873151461&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[15]+530742520&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[2]+3299628645&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(A^(C|~P))+k[0]+4096336452&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[7]+1126891415&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[14]+2878612391&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[5]+4237533241&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[12]+1700485571&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[3]+2399980690&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[10]+4293915773&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[1]+2240044497&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[8]+1873313359&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[15]+4264355552&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[6]+2734768916&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[13]+1309151649&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[4]+4149444226&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[11]+3174756917&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[2]+718787259&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+N&4294967295,T.g[1]=T.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.v=function(T,N){N===void 0&&(N=T.length);const C=N-this.blockSize,k=this.C;let A=this.h,P=0;for(;P<N;){if(A==0)for(;P<=C;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<N;)if(k[A++]=T.charCodeAt(P++),A==this.blockSize){s(this,k),A=0;break}}else for(;P<N;)if(k[A++]=T[P++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=N},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var N=1;N<T.length-8;++N)T[N]=0;N=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=N&255,N/=256;for(this.v(T),T=Array(16),N=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)T[N++]=this.g[C]>>>k&255;return T};function i(T,N){var C=l;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=N(T)}function o(T,N){this.h=N;const C=[];let k=!0;for(let A=T.length-1;A>=0;A--){const P=T[A]|0;k&&P==N||(C[A]=P,k=!1)}this.g=C}var l={};function c(T){return-128<=T&&T<128?i(T,function(N){return new o([N|0],N<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return E(u(-T));const N=[];let C=1;for(let k=0;T>=C;k++)N[k]=T/C|0,C*=4294967296;return new o(N,0)}function h(T,N){if(T.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(T.charAt(0)=="-")return E(h(T.substring(1),N));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(N,8));let k=f;for(let P=0;P<T.length;P+=8){var A=Math.min(8,T.length-P);const R=parseInt(T.substring(P,P+A),N);A<8?(A=u(Math.pow(N,A)),k=k.j(A).add(u(R))):(k=k.j(C),k=k.add(u(R)))}return k}var f=c(0),p=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();let T=0,N=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);T+=(k>=0?k:4294967296+k)*N,N*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(v(this))return"-"+E(this).toString(T);const N=u(Math.pow(T,6));var C=this;let k="";for(;;){const A=I(C,N).g;C=w(C,A.j(N));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=A,b(C))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let N=0;N<T.g.length;N++)if(T.g[N]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=w(this,T),v(T)?-1:b(T)?0:1};function E(T){const N=T.g.length,C=[];for(let k=0;k<N;k++)C[k]=~T.g[k];return new o(C,~T.h).add(p)}t.abs=function(){return v(this)?E(this):this},t.add=function(T){const N=Math.max(this.g.length,T.g.length),C=[];let k=0;for(let A=0;A<=N;A++){let P=k+(this.i(A)&65535)+(T.i(A)&65535),R=(P>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);k=R>>>16,P&=65535,R&=65535,C[A]=R<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(T,N){return T.add(E(N))}t.j=function(T){if(b(this)||b(T))return f;if(v(this))return v(T)?E(this).j(E(T)):E(E(this).j(T));if(v(T))return E(this.j(E(T)));if(this.l(y)<0&&T.l(y)<0)return u(this.m()*T.m());const N=this.g.length+T.g.length,C=[];for(var k=0;k<2*N;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<T.g.length;A++){const P=this.i(k)>>>16,R=this.i(k)&65535,F=T.i(A)>>>16,ae=T.i(A)&65535;C[2*k+2*A]+=R*ae,x(C,2*k+2*A),C[2*k+2*A+1]+=P*ae,x(C,2*k+2*A+1),C[2*k+2*A+1]+=R*F,x(C,2*k+2*A+1),C[2*k+2*A+2]+=P*F,x(C,2*k+2*A+2)}for(T=0;T<N;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=N;T<2*N;T++)C[T]=0;return new o(C,0)};function x(T,N){for(;(T[N]&65535)!=T[N];)T[N+1]+=T[N]>>>16,T[N]&=65535,N++}function _(T,N){this.g=T,this.h=N}function I(T,N){if(b(N))throw Error("division by zero");if(b(T))return new _(f,f);if(v(T))return N=I(E(T),N),new _(E(N.g),E(N.h));if(v(N))return N=I(T,E(N)),new _(E(N.g),N.h);if(T.g.length>30){if(v(T)||v(N))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=N;k.l(T)<=0;)C=M(C),k=M(k);var A=D(C,1),P=D(k,1);for(k=D(k,2),C=D(C,2);!b(k);){var R=P.add(k);R.l(T)<=0&&(A=A.add(C),P=R),k=D(k,1),C=D(C,1)}return N=w(T,A.j(N)),new _(A,N)}for(A=f;T.l(N)>=0;){for(C=Math.max(1,Math.floor(T.m()/N.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=u(C),R=P.j(N);v(R)||R.l(T)>0;)C-=k,P=u(C),R=P.j(N);b(P)&&(P=p),A=A.add(P),T=w(T,R)}return new _(A,T)}t.B=function(T){return I(this,T).h},t.and=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)&T.i(k);return new o(C,this.h&T.h)},t.or=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)|T.i(k);return new o(C,this.h|T.h)},t.xor=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)^T.i(k);return new o(C,this.h^T.h)};function M(T){const N=T.g.length+1,C=[];for(let k=0;k<N;k++)C[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(C,T.h)}function D(T,N){const C=N>>5;N%=32;const k=T.g.length-C,A=[];for(let P=0;P<k;P++)A[P]=N>0?T.i(P+C)>>>N|T.i(P+C+1)<<32-N:T.i(P+C);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xi=o}).apply(typeof Yb<"u"?Yb:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wk,Jl,qk,eh,_y,Gk,Kk,Qk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var g=0;g<d.length;++g){var S=d[g];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var S=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var V=d[j];if(!(V in S))break e;S=S[V]}d=d[d.length-1],j=S[d],g=g(j),g!=j&&g!=null&&e(S,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var S=[],j;for(j in g)Object.prototype.hasOwnProperty.call(g,j)&&S.push([j,g[j]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,S){return d.call.apply(d.bind,arguments)}function u(d,g,S){return u=c,u.apply(null,arguments)}function h(d,g){var S=Array.prototype.slice.call(arguments,1);return function(){var j=S.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function f(d,g){function S(){}S.prototype=g.prototype,d.Z=g.prototype,d.prototype=new S,d.prototype.constructor=d,d.Ob=function(j,V,z){for(var oe=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)oe[_e-2]=arguments[_e];return g.prototype[V].apply(j,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const g=d.length;if(g>0){const S=Array(g);for(let j=0;j<g;j++)S[j]=d[j];return S}return[]}function b(d,g){for(let j=1;j<arguments.length;j++){const V=arguments[j];var S=typeof V;if(S=S!="object"?S:V?Array.isArray(V)?"array":S:"null",S=="array"||S=="object"&&typeof V.length=="number"){S=d.length||0;const z=V.length||0;d.length=S+z;for(let oe=0;oe<z;oe++)d[S+oe]=V[oe]}else d.push(V)}}class v{constructor(g,S){this.i=g,this.j=S,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(d){o.setTimeout(()=>{throw d},0)}function w(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class x{constructor(){this.h=this.g=null}add(g,S){const j=_.get();j.set(g,S),this.h?this.h.next=j:this.g=j,this.h=j}}var _=new v(()=>new I,d=>d.reset());class I{constructor(){this.next=this.g=this.h=null}set(g,S){this.h=g,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let M,D=!1,T=new x,N=()=>{const d=Promise.resolve(void 0);M=()=>{d.then(C)}};function C(){for(var d;d=w();){try{d.h.call(d.g)}catch(S){E(S)}var g=_;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}D=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};o.addEventListener("test",S,g),o.removeEventListener("test",S,g)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function F(d,g){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(F,A),F.prototype.init=function(d,g){const S=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(S=="mouseover"?g=d.fromElement:S=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),ee=0;function Z(d,g,S,j,V){this.listener=d,this.proxy=null,this.src=g,this.type=S,this.capture=!!j,this.ha=V,this.key=++ee,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function B(d,g,S){for(const j in d)g.call(S,d[j],j,d)}function U(d,g){for(const S in d)g.call(void 0,d[S],S,d)}function H(d){const g={};for(const S in d)g[S]=d[S];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(d,g){let S,j;for(let V=1;V<arguments.length;V++){j=arguments[V];for(S in j)d[S]=j[S];for(let z=0;z<Q.length;z++)S=Q[z],Object.prototype.hasOwnProperty.call(j,S)&&(d[S]=j[S])}}function J(d){this.src=d,this.g={},this.h=0}J.prototype.add=function(d,g,S,j,V){const z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);const oe=re(d,g,j,V);return oe>-1?(g=d[oe],S||(g.fa=!1)):(g=new Z(g,this.src,z,!!j,V),g.fa=S,d.push(g)),g};function X(d,g){const S=g.type;if(S in d.g){var j=d.g[S],V=Array.prototype.indexOf.call(j,g,void 0),z;(z=V>=0)&&Array.prototype.splice.call(j,V,1),z&&(O(g),d.g[S].length==0&&(delete d.g[S],d.h--))}}function re(d,g,S,j){for(let V=0;V<d.length;++V){const z=d[V];if(!z.da&&z.listener==g&&z.capture==!!S&&z.ha==j)return V}return-1}var L="closure_lm_"+(Math.random()*1e6|0),K={};function ce(d,g,S,j,V){if(Array.isArray(g)){for(let z=0;z<g.length;z++)ce(d,g[z],S,j,V);return null}return S=Lt(S),d&&d[ae]?d.J(g,S,l(j)?!!j.capture:!!j,V):Y(d,g,S,!1,j,V)}function Y(d,g,S,j,V,z){if(!g)throw Error("Invalid event type");const oe=l(V)?!!V.capture:!!V;let _e=je(d);if(_e||(d[L]=_e=new J(d)),S=_e.add(g,S,j,oe,z),S.proxy)return S;if(j=se(),S.proxy=j,j.src=d,j.listener=S,d.addEventListener)P||(V=oe),V===void 0&&(V=!1),d.addEventListener(g.toString(),j,V);else if(d.attachEvent)d.attachEvent(Te(g.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return S}function se(){function d(S){return g.call(d.src,d.listener,S)}const g=Ge;return d}function ie(d,g,S,j,V){if(Array.isArray(g))for(var z=0;z<g.length;z++)ie(d,g[z],S,j,V);else j=l(j)?!!j.capture:!!j,S=Lt(S),d&&d[ae]?(d=d.i,z=String(g).toString(),z in d.g&&(g=d.g[z],S=re(g,S,j,V),S>-1&&(O(g[S]),Array.prototype.splice.call(g,S,1),g.length==0&&(delete d.g[z],d.h--)))):d&&(d=je(d))&&(g=d.g[g.toString()],d=-1,g&&(d=re(g,S,j,V)),(S=d>-1?g[d]:null)&&Se(S))}function Se(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ae])X(g.i,d);else{var S=d.type,j=d.proxy;g.removeEventListener?g.removeEventListener(S,j,d.capture):g.detachEvent?g.detachEvent(Te(S),j):g.addListener&&g.removeListener&&g.removeListener(j),(S=je(g))?(X(S,d),S.h==0&&(S.src=null,g[L]=null)):O(d)}}}function Te(d){return d in K?K[d]:K[d]="on"+d}function Ge(d,g){if(d.da)d=!0;else{g=new F(g,this);const S=d.listener,j=d.ha||d.src;d.fa&&Se(d),d=S.call(j,g)}return d}function je(d){return d=d[L],d instanceof J?d:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lt(d){return typeof d=="function"?d:(d[Ve]||(d[Ve]=function(g){return d.handleEvent(g)}),d[Ve])}function We(){k.call(this),this.i=new J(this),this.M=this,this.G=null}f(We,k),We.prototype[ae]=!0,We.prototype.removeEventListener=function(d,g,S,j){ie(this,d,g,S,j)};function Ke(d,g){var S,j=d.G;if(j)for(S=[];j;j=j.G)S.push(j);if(d=d.M,j=g.type||g,typeof g=="string")g=new A(g,d);else if(g instanceof A)g.target=g.target||d;else{var V=g;g=new A(j,d),te(g,V)}V=!0;let z,oe;if(S)for(oe=S.length-1;oe>=0;oe--)z=g.g=S[oe],V=Zn(z,j,!0,g)&&V;if(z=g.g=d,V=Zn(z,j,!0,g)&&V,V=Zn(z,j,!1,g)&&V,S)for(oe=0;oe<S.length;oe++)z=g.g=S[oe],V=Zn(z,j,!1,g)&&V}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const S=d.g[g];for(let j=0;j<S.length;j++)O(S[j]);delete d.g[g],d.h--}}this.G=null},We.prototype.J=function(d,g,S,j){return this.i.add(String(d),g,!1,S,j)},We.prototype.K=function(d,g,S,j){return this.i.add(String(d),g,!0,S,j)};function Zn(d,g,S,j){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let z=0;z<g.length;++z){const oe=g[z];if(oe&&!oe.da&&oe.capture==S){const _e=oe.listener,_t=oe.ha||oe.src;oe.fa&&X(d.i,oe),V=_e.call(_t,j)!==!1&&V}}return V&&!j.defaultPrevented}function Rs(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function Tl(d){d.g=Rs(()=>{d.g=null,d.i&&(d.i=!1,Tl(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Ou extends k{constructor(g,S){super(),this.m=g,this.l=S,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(d){k.call(this),this.h=d,this.g={}}f(qi,k);var Lu=[];function ts(d){B(d.g,function(g,S){this.g.hasOwnProperty(S)&&Se(g)},d),d.g={}}qi.prototype.N=function(){qi.Z.N.call(this),ts(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=o.JSON.stringify,Gi=o.JSON.parse,Vu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function er(){}function Nl(){}var Ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cl(){A.call(this,"d")}f(Cl,A);function Qi(){A.call(this,"c")}f(Qi,A);var Rr={},Fu=null;function Yi(){return Fu=Fu||new We}Rr.Ia="serverreachability";function zu(d){A.call(this,Rr.Ia,d)}f(zu,A);function Xi(d){const g=Yi();Ke(g,new zu(g))}Rr.STAT_EVENT="statevent";function Uu(d,g){A.call(this,Rr.STAT_EVENT,d),this.stat=g}f(Uu,A);function Me(d){const g=Yi();Ke(g,new Uu(g,d))}Rr.Ja="timingevent";function Ht(d,g){A.call(this,Rr.Ja,d),this.size=g}f(Ht,A);function wt(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function fn(){this.g=!0}fn.prototype.ua=function(){this.g=!1};function mn(d,g,S,j,V,z){d.info(function(){if(d.g)if(z){var oe="",_e=z.split("&");for(let qe=0;qe<_e.length;qe++){var _t=_e[qe].split("=");if(_t.length>1){const It=_t[0];_t=_t[1];const Mr=It.split("_");oe=Mr.length>=2&&Mr[1]=="type"?oe+(It+"="+_t+"&"):oe+(It+"=redacted&")}}}else oe=null;else oe=z;return"XMLHTTP REQ ("+j+") [attempt "+V+"]: "+g+`
`+S+`
`+oe})}function nn(d,g,S,j,V,z,oe){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+V+"]: "+g+`
`+S+`
`+z+" "+oe})}function Vt(d,g,S,j){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+bt(d,S)+(j?" "+j:"")})}function Ps(d,g){d.info(function(){return"TIMEOUT: "+g})}fn.prototype.info=function(){};function bt(d,g){if(!d.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(d=0;d<z.length;d++)if(Array.isArray(z[d])){var S=z[d];if(!(S.length<2)){var j=S[1];if(Array.isArray(j)&&!(j.length<1)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(let oe=1;oe<j.length;oe++)j[oe]=""}}}}return jr(z)}catch{return g}}var Nn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Un;function ns(){}f(ns,er),ns.prototype.g=function(){return new XMLHttpRequest},Un=new ns;function tr(d){return encodeURIComponent(String(d))}function Pr(d){var g=1;d=d.split(":");const S=[];for(;g>0&&d.length;)S.push(d.shift()),g--;return d.length&&S.push(d.join(":")),S}function pn(d,g,S,j){this.j=d,this.i=g,this.l=S,this.S=j||1,this.V=new qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var Y0={},zm={};function Um(d,g,S){d.M=1,d.A=Bu(Dr(g)),d.u=S,d.R=!0,X0(d,null)}function X0(d,g){d.F=Date.now(),$u(d),d.B=Dr(d.A);var S=d.B,j=d.S;Array.isArray(j)||(j=[String(j)]),uw(S.i,"t",j),d.C=0,S=d.j.L,d.h=new $o,d.g=kw(d.j,S?g:null,!d.u),d.P>0&&(d.O=new Ou(u(d.Y,d,d.g),d.P)),g=d.V,S=d.g,j=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(Lu[0]=V.toString()),V=Lu);for(let z=0;z<V.length;z++){const oe=ce(S,V[z],j||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=d.J?H(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Xi(),mn(d.i,d.v,d.B,d.l,d.S,d.u)}pn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Os(d)==3?g.j():this.Y(d)},pn.prototype.Y=function(d){try{if(d==this.g)e:{const _e=Os(this.g),_t=this.g.ya(),qe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||yw(this.g)))){this.K||_e!=4||_t==7||(_t==8||qe<=0?Xi(3):Xi(2)),$m(this);var g=this.g.ca();this.X=g;var S=LR(this);if(this.o=g==200,nn(this.i,this.v,this.B,this.l,this.S,_e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var j,V=this.g;if((j=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(j)){var z=j;break t}}z=null}if(d=z)Vt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bm(this,d);else{this.o=!1,this.m=3,Me(12),Ji(this),kl(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<S.length;)if(It=VR(this,S),It==zm){_e==4&&(this.m=4,Me(14),d=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(It==Y0){this.m=4,Me(15),Vt(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else Vt(this.i,this.l,It,null),Bm(this,It);if(J0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||S.length!=0||this.h.h||(this.m=1,Me(16),d=!1),this.o=this.o&&d,!d)Vt(this.i,this.l,S,"[Invalid Chunked Response]"),Ji(this),kl(this);else if(S.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Xm(oe),oe.P=!0,Me(11))}}else Vt(this.i,this.l,S,null),Bm(this,S);_e==4&&Ji(this),this.o&&!this.K&&(_e==4?Sw(this.j,this):(this.o=!1,$u(this)))}else JR(this.g),g==400&&S.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),Ji(this),kl(this)}}}catch{}finally{}};function LR(d){if(!J0(d))return d.g.la();const g=yw(d.g);if(g==="")return"";let S="";const j=g.length,V=Os(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ji(d),kl(d),"";d.h.i=new o.TextDecoder}for(let z=0;z<j;z++)d.h.h=!0,S+=d.h.i.decode(g[z],{stream:!(V&&z==j-1)});return g.length=0,d.h.g+=S,d.C=0,d.h.g}function J0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function VR(d,g){var S=d.C,j=g.indexOf(`
`,S);return j==-1?zm:(S=Number(g.substring(S,j)),isNaN(S)?Y0:(j+=1,j+S>g.length?zm:(g=g.slice(j,j+S),d.C=j+S,g)))}pn.prototype.cancel=function(){this.K=!0,Ji(this)};function $u(d){d.T=Date.now()+d.H,Z0(d,d.H)}function Z0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=wt(u(d.aa,d),g)}function $m(d){d.D&&(o.clearTimeout(d.D),d.D=null)}pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ps(this.i,this.B),this.M!=2&&(Xi(),Me(17)),Ji(this),this.m=2,kl(this)):Z0(this,this.T-d)};function kl(d){d.j.I==0||d.K||Sw(d.j,d)}function Ji(d){$m(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,ts(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Bm(d,g){try{var S=d.j;if(S.I!=0&&(S.g==d||Hm(S.h,d))){if(!d.L&&Hm(S.h,d)&&S.I==3){try{var j=S.Ba.g.parse(g)}catch{j=null}if(Array.isArray(j)&&j.length==3){var V=j;if(V[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<d.F)Ku(S),qu(S);else break e;Ym(S),Me(18)}}else S.xa=V[1],0<S.xa-S.K&&V[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=wt(u(S.Va,S),6e3));nw(S.h)<=1&&S.ta&&(S.ta=void 0)}else eo(S,11)}else if((d.L||S.g==d)&&Ku(S),!R(g))for(V=S.Ba.g.parse(g),g=0;g<V.length;g++){let qe=V[g];const It=qe[0];if(!(It<=S.K))if(S.K=It,qe=qe[1],S.I==2)if(qe[0]=="c"){S.M=qe[1],S.ba=qe[2];const Mr=qe[3];Mr!=null&&(S.ka=Mr,S.j.info("VER="+S.ka));const to=qe[4];to!=null&&(S.za=to,S.j.info("SVER="+S.za));const Ls=qe[5];Ls!=null&&typeof Ls=="number"&&Ls>0&&(j=1.5*Ls,S.O=j,S.j.info("backChannelRequestTimeoutMs_="+j)),j=S;const Vs=d.g;if(Vs){const Yu=Vs.g?Vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var z=j.h;z.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Wm(z,z.h),z.h=null))}if(j.G){const Jm=Vs.g?Vs.g.getResponseHeader("X-HTTP-Session-Id"):null;Jm&&(j.wa=Jm,Je(j.J,j.G,Jm))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-d.F,S.j.info("Handshake RTT: "+S.T+"ms")),j=S;var oe=d;if(j.na=Cw(j,j.L?j.ba:null,j.W),oe.L){rw(j.h,oe);var _e=oe,_t=j.O;_t&&(_e.H=_t),_e.D&&($m(_e),$u(_e)),j.g=oe}else _w(j);S.i.length>0&&Gu(S)}else qe[0]!="stop"&&qe[0]!="close"||eo(S,7);else S.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?eo(S,7):Qm(S):qe[0]!="noop"&&S.l&&S.l.qa(qe),S.A=0)}}Xi(4)}catch{}}var FR=class{constructor(d,g){this.g=d,this.map=g}};function ew(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function nw(d){return d.h?1:d.g?d.g.size:0}function Hm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Wm(d,g){d.g?d.g.add(g):d.h=g}function rw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}ew.prototype.cancel=function(){if(this.i=sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function sw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const S of d.g.values())g=g.concat(S.G);return g}return y(d.i)}var iw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zR(d,g){if(d){d=d.split("&");for(let S=0;S<d.length;S++){const j=d[S].indexOf("=");let V,z=null;j>=0?(V=d[S].substring(0,j),z=d[S].substring(j+1)):V=d[S],g(V,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ds(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Ds?(this.l=d.l,Il(this,d.j),this.o=d.o,this.g=d.g,Al(this,d.u),this.h=d.h,qm(this,dw(d.i)),this.m=d.m):d&&(g=String(d).match(iw))?(this.l=!1,Il(this,g[1]||"",!0),this.o=jl(g[2]||""),this.g=jl(g[3]||"",!0),Al(this,g[4]),this.h=jl(g[5]||"",!0),qm(this,g[6]||"",!0),this.m=jl(g[7]||"")):(this.l=!1,this.i=new Pl(null,this.l))}Ds.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Rl(g,ow,!0),":");var S=this.g;return(S||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Rl(g,ow,!0),"@"),d.push(tr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&d.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Rl(S,S.charAt(0)=="/"?BR:$R,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Rl(S,WR)),d.join("")},Ds.prototype.resolve=function(d){const g=Dr(this);let S=!!d.j;S?Il(g,d.j):S=!!d.o,S?g.o=d.o:S=!!d.g,S?g.g=d.g:S=d.u!=null;var j=d.h;if(S)Al(g,d.u);else if(S=!!d.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var V=g.h.lastIndexOf("/");V!=-1&&(j=g.h.slice(0,V+1)+j)}if(V=j,V==".."||V==".")j="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){j=V.lastIndexOf("/",0)==0,V=V.split("/");const z=[];for(let oe=0;oe<V.length;){const _e=V[oe++];_e=="."?j&&oe==V.length&&z.push(""):_e==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),j&&oe==V.length&&z.push("")):(z.push(_e),j=!0)}j=z.join("/")}else j=V}return S?g.h=j:S=d.i.toString()!=="",S?qm(g,dw(d.i)):S=!!d.m,S&&(g.m=d.m),g};function Dr(d){return new Ds(d)}function Il(d,g,S){d.j=S?jl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Al(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function qm(d,g,S){g instanceof Pl?(d.i=g,qR(d.i,d.l)):(S||(g=Rl(g,HR)),d.i=new Pl(g,d.l))}function Je(d,g,S){d.i.set(g,S)}function Bu(d){return Je(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function jl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Rl(d,g,S){return typeof d=="string"?(d=encodeURI(d).replace(g,UR),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function UR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ow=/[#\/\?@]/g,$R=/[#\?:]/g,BR=/[#\?]/g,HR=/[#\?@]/g,WR=/#/g;function Pl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Zi(d){d.g||(d.g=new Map,d.h=0,d.i&&zR(d.i,function(g,S){d.add(decodeURIComponent(g.replace(/\+/g," ")),S)}))}t=Pl.prototype,t.add=function(d,g){Zi(this),this.i=null,d=Bo(this,d);let S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(g),this.h+=1,this};function aw(d,g){Zi(d),g=Bo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function lw(d,g){return Zi(d),g=Bo(d,g),d.g.has(g)}t.forEach=function(d,g){Zi(this),this.g.forEach(function(S,j){S.forEach(function(V){d.call(g,V,j,this)},this)},this)};function cw(d,g){Zi(d);let S=[];if(typeof g=="string")lw(d,g)&&(S=S.concat(d.g.get(Bo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)S=S.concat(d[g]);return S}t.set=function(d,g){return Zi(this),this.i=null,d=Bo(this,d),lw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=cw(this,d),d.length>0?String(d[0]):g):g};function uw(d,g,S){aw(d,g),S.length>0&&(d.i=null,d.g.set(Bo(d,g),y(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let j=0;j<g.length;j++){var S=g[j];const V=tr(S);S=cw(this,S);for(let z=0;z<S.length;z++){let oe=V;S[z]!==""&&(oe+="="+tr(S[z])),d.push(oe)}}return this.i=d.join("&")};function dw(d){const g=new Pl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Bo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function qR(d,g){g&&!d.j&&(Zi(d),d.i=null,d.g.forEach(function(S,j){const V=j.toLowerCase();j!=V&&(aw(this,j),uw(this,V,S))},d)),d.j=g}function GR(d,g){const S=new fn;if(o.Image){const j=new Image;j.onload=h(Ms,S,"TestLoadImage: loaded",!0,g,j),j.onerror=h(Ms,S,"TestLoadImage: error",!1,g,j),j.onabort=h(Ms,S,"TestLoadImage: abort",!1,g,j),j.ontimeout=h(Ms,S,"TestLoadImage: timeout",!1,g,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else g(!1)}function KR(d,g){const S=new fn,j=new AbortController,V=setTimeout(()=>{j.abort(),Ms(S,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:j.signal}).then(z=>{clearTimeout(V),z.ok?Ms(S,"TestPingServer: ok",!0,g):Ms(S,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Ms(S,"TestPingServer: error",!1,g)})}function Ms(d,g,S,j,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),j(S)}catch{}}function QR(){this.g=new Vu}function Gm(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Gm,er),Gm.prototype.g=function(){return new Hu(this.i,this.h)};function Hu(d,g){We.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Hu,We),t=Hu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Ml(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ml(this)),this.g&&(this.readyState=3,Ml(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function hw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Dl(this):Ml(this),this.readyState==3&&hw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Dl(this))},t.Na=function(d){this.g&&(this.response=d,Dl(this))},t.ga=function(){this.g&&Dl(this)};function Dl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ml(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var S=g.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=g.next();return d.join(`\r
`)};function Ml(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function fw(d){let g="";return B(d,function(S,j){g+=j,g+=":",g+=S,g+=`\r
`}),g}function Km(d,g,S){e:{for(j in S){var j=!1;break e}j=!0}j||(S=fw(S),typeof d=="string"?S!=null&&tr(S):Je(d,g,S))}function dt(d){We.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,We);var YR=/^https?$/i,XR=["POST","PUT"];t=dt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,S,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Un.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){mw(this,z);return}if(d=S||"",S=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var V in j)S.set(V,j[V]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const z of j.keys())S.set(z,j.get(z));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(S.keys()).find(z=>z.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(XR,g,void 0)>=0)||j||V||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,oe]of S)this.g.setRequestHeader(z,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(z){mw(this,z)}};function mw(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,pw(d),Wu(d)}function pw(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ke(this,"complete"),Ke(this,"abort"),Wu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wu(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gw(this):this.Xa())},t.Xa=function(){gw(this)};function gw(d){if(d.h&&typeof i<"u"){if(d.v&&Os(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ke(d,"readystatechange"),Os(d)==4){d.h=!1;try{const z=d.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var S;if(!(S=g)){var j;if(j=z===0){let oe=String(d.D).match(iw)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),j=!YR.test(oe?oe.toLowerCase():"")}S=j}if(S)Ke(d,"complete"),Ke(d,"success");else{d.o=6;try{var V=Os(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",pw(d)}}finally{Wu(d)}}}}function Wu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const S=d.g;d.g=null,g||Ke(d,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Os(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Os(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Gi(g)}};function yw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function JR(d){const g={};d=(d.g&&Os(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(R(d[j]))continue;var S=Pr(d[j]);const V=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const z=g[V]||[];g[V]=z,z.push(S)}U(g,function(j){return j.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(d,g,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||g}function vw(d){this.za=0,this.i=[],this.j=new fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ol("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ol("baseRetryDelayMs",5e3,d),this.Za=Ol("retryDelaySeedMs",1e4,d),this.Ta=Ol("forwardChannelMaxRetries",2,d),this.va=Ol("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ew(d&&d.concurrentRequestLimit),this.Ba=new QR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vw.prototype,t.ka=8,t.I=1,t.connect=function(d,g,S,j){Me(0),this.W=d,this.H=g||{},S&&j!==void 0&&(this.H.OSID=S,this.H.OAID=j),this.F=this.X,this.J=Cw(this,null,this.W),Gu(this)};function Qm(d){if(xw(d),d.I==3){var g=d.V++,S=Dr(d.J);if(Je(S,"SID",d.M),Je(S,"RID",g),Je(S,"TYPE","terminate"),Ll(d,S),g=new pn(d,d.j,g),g.M=2,g.A=Bu(Dr(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!S&&o.Image&&(new Image().src=g.A,S=!0),S||(g.g=kw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),$u(g)}Nw(d)}function qu(d){d.g&&(Xm(d),d.g.cancel(),d.g=null)}function xw(d){qu(d),d.v&&(o.clearTimeout(d.v),d.v=null),Ku(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Gu(d){if(!tw(d.h)&&!d.m){d.m=!0;var g=d.Ea;M||N(),D||(M(),D=!0),T.add(g,d),d.D=0}}function ZR(d,g){return nw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=wt(u(d.Ea,d,g),Tw(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new pn(this,this.j,d);let z=this.o;if(this.U&&(z?(z=H(z),te(z,this.U)):z=this.U),this.u!==null||this.R||(V.J=z,z=null),this.S)e:{for(var g=0,S=0;S<this.i.length;S++){t:{var j=this.i[S];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(g+=j,g>4096){g=S;break e}if(g===4096||S===this.i.length-1){g=S+1;break e}}g=1e3}else g=1e3;g=bw(this,V,g),S=Dr(this.J),Je(S,"RID",d),Je(S,"CVER",22),this.G&&Je(S,"X-HTTP-Session-Id",this.G),Ll(this,S),z&&(this.R?g="headers="+tr(fw(z))+"&"+g:this.u&&Km(S,this.u,z)),Wm(this.h,V),this.Ra&&Je(S,"TYPE","init"),this.S?(Je(S,"$req",g),Je(S,"SID","null"),V.U=!0,Um(V,S,null)):Um(V,S,g),this.I=2}}else this.I==3&&(d?ww(this,d):this.i.length==0||tw(this.h)||ww(this))};function ww(d,g){var S;g?S=g.l:S=d.V++;const j=Dr(d.J);Je(j,"SID",d.M),Je(j,"RID",S),Je(j,"AID",d.K),Ll(d,j),d.u&&d.o&&Km(j,d.u,d.o),S=new pn(d,d.j,S,d.D+1),d.u===null&&(S.J=d.o),g&&(d.i=g.G.concat(d.i)),g=bw(d,S,1e3),S.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wm(d.h,S),Um(S,j,g)}function Ll(d,g){d.H&&B(d.H,function(S,j){Je(g,j,S)}),d.l&&B({},function(S,j){Je(g,j,S)})}function bw(d,g,S){S=Math.min(d.i.length,S);const j=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let _e=-1;for(;;){const _t=["count="+S];_e==-1?S>0?(_e=V[0].g,_t.push("ofs="+_e)):_e=0:_t.push("ofs="+_e);let qe=!0;for(let It=0;It<S;It++){var z=V[It].g;const Mr=V[It].map;if(z-=_e,z<0)_e=Math.max(0,V[It].g-100),qe=!1;else try{z="req"+z+"_"||"";try{var oe=Mr instanceof Map?Mr:Object.entries(Mr);for(const[to,Ls]of oe){let Vs=Ls;l(Ls)&&(Vs=jr(Ls)),_t.push(z+to+"="+encodeURIComponent(Vs))}}catch(to){throw _t.push(z+"type="+encodeURIComponent("_badmap")),to}}catch{j&&j(Mr)}}if(qe){oe=_t.join("&");break e}}oe=void 0}return d=d.i.splice(0,S),g.G=d,oe}function _w(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;M||N(),D||(M(),D=!0),T.add(g,d),d.A=0}}function Ym(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=wt(u(d.Da,d),Tw(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Ew(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=wt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),qu(this),Ew(this))};function Xm(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Ew(d){d.g=new pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Dr(d.na);Je(g,"RID","rpc"),Je(g,"SID",d.M),Je(g,"AID",d.K),Je(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Je(g,"TO",d.ia),Je(g,"TYPE","xmlhttp"),Ll(d,g),d.u&&d.o&&Km(g,d.u,d.o),d.O&&(d.g.H=d.O);var S=d.g;d=d.ba,S.M=1,S.A=Bu(Dr(g)),S.u=null,S.R=!0,X0(S,d)}t.Va=function(){this.C!=null&&(this.C=null,qu(this),Ym(this),Me(19))};function Ku(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Sw(d,g){var S=null;if(d.g==g){Ku(d),Xm(d),d.g=null;var j=2}else if(Hm(d.h,g))S=g.G,rw(d.h,g),j=1;else return;if(d.I!=0){if(g.o)if(j==1){S=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;j=Yi(),Ke(j,new Ht(j,S)),Gu(d)}else _w(d);else if(V=g.m,V==3||V==0&&g.X>0||!(j==1&&ZR(d,g)||j==2&&Ym(d)))switch(S&&S.length>0&&(g=d.h,g.i=g.i.concat(S)),V){case 1:eo(d,5);break;case 4:eo(d,10);break;case 3:eo(d,6);break;default:eo(d,2)}}}function Tw(d,g){let S=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(S*=2),S*g}function eo(d,g){if(d.j.info("Error code "+g),g==2){var S=u(d.bb,d),j=d.Ua;const V=!j;j=new Ds(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Il(j,"https"),Bu(j),V?GR(j.toString(),S):KR(j.toString(),S)}else Me(2);d.I=0,d.l&&d.l.pa(g),Nw(d),xw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Nw(d){if(d.I=0,d.ja=[],d.l){const g=sw(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ja,g),b(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function Cw(d,g,S){var j=S instanceof Ds?Dr(S):new Ds(S);if(j.g!="")g&&(j.g=g+"."+j.g),Al(j,j.u);else{var V=o.location;j=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const z=new Ds(null);j&&Il(z,j),g&&(z.g=g),V&&Al(z,V),S&&(z.h=S),j=z}return S=d.G,g=d.wa,S&&g&&Je(j,S,g),Je(j,"VER",d.ka),Ll(d,j),j}function kw(d,g,S){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new dt(new Gm({ab:S})):new dt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iw(){}t=Iw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qu(){}Qu.prototype.g=function(d,g){return new kn(d,g)};function kn(d,g){We.call(this),this.g=new vw(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!R(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ho(this)}f(kn,We),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Qm(this.g)},kn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.v&&(S={},S.__data__=jr(d),d=S);g.i.push(new FR(g.Ya++,d)),g.I==3&&Gu(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,Qm(this.g),delete this.g,kn.Z.N.call(this)};function Aw(d){Cl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const S in g){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(Aw,Cl);function jw(){Qi.call(this),this.status=1}f(jw,Qi);function Ho(d){this.g=d}f(Ho,Iw),Ho.prototype.ra=function(){Ke(this.g,"a")},Ho.prototype.qa=function(d){Ke(this.g,new Aw(d))},Ho.prototype.pa=function(d){Ke(this.g,new jw)},Ho.prototype.oa=function(){Ke(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,Qk=function(){return new Qu},Kk=function(){return Yi()},Gk=Rr,_y={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,eh=Nn,Cn.COMPLETE="complete",qk=Cn,Nl.EventType=Ki,Ki.OPEN="a",Ki.CLOSE="b",Ki.ERROR="c",Ki.MESSAGE="d",We.prototype.listen=We.prototype.J,Jl=Nl,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,Wk=dt}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const Xb="@firebase/firestore",Jb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new yx("@firebase/firestore");function Qo(){return Ro.logLevel}function ue(t,...e){if(Ro.logLevel<=ke.DEBUG){const n=e.map(Ax);Ro.debug(`Firestore (${fl}): ${t}`,...n)}}function Ts(t,...e){if(Ro.logLevel<=ke.ERROR){const n=e.map(Ax);Ro.error(`Firestore (${fl}): ${t}`,...n)}}function Po(t,...e){if(Ro.logLevel<=ke.WARN){const n=e.map(Ax);Ro.warn(`Firestore (${fl}): ${t}`,...n)}}function Ax(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Yk(t,r,n)}function Yk(t,e,n){let r=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ts(r),new Error(r)}function Ue(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Yk(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class WF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qF{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new Xk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class GF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function Ey(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Up(s)===Up(i)?Ie(s,i):Up(s)?1:-1}return Ie(t.length,e.length)}const XF=55296,JF=57343;function Up(t){const e=t.charCodeAt(0);return e>=XF&&e<=JF}function Xa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__name__";class Vr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Vr.isNumericId(e),s=Vr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vr.extractNumericId(e).compare(Vr.extractNumericId(n)):Ey(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class Qe extends Vr{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const ZF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Vr{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return ZF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e_}static keyField(){return new Pt([e_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Qe.fromString(e))}static fromName(e){return new me(Qe.fromString(e).popFirst(5))}static empty(){return new me(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e,n){if(!n)throw new le(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eI(t,e,n,r){if(e===!0&&r===!0)throw new le(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t_(t){if(!me.isDocumentKey(t))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n_(t){if(me.isDocumentKey(t))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=im(t);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Tu(t,e){if(!tI(t))throw new le(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=-62135596800,s_=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*s_);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r_)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/s_}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:xt("string",Ye._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ye(0,0))}static max(){return new ve(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function e9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Ii(s,me.empty(),e)}function t9(t){return new Ii(t.readTime,t.key,Kc)}class Ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ii(ve.min(),me.empty(),Kc)}static max(){return new Ii(ve.max(),me.empty(),Kc)}}function n9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==r9)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function i9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}om.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=-1;function am(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function o9(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="";function a9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=i_(e)),e=l9(t.get(n),e);return i_(e)}function l9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case nI:n+="";break;default:n+=i}}return n}function i_(t){return t+nI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}}class Ed{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Ct(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sI("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const c9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=c9.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="server_timestamp",oI="__type__",aI="__previous_value__",lI="__local_write_time__";function Rx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oI])==null?void 0:r.stringValue)===iI}function lm(t){const e=t.mapValue.fields[aI];return Rx(e)?lm(e):e}function Qc(t){const e=Ai(t.mapValue.fields[lI].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Yh="(default)";class Ja{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new Ja("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof Ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="__type__",uI="__max__",Sd={mapValue:{fields:{__type__:{stringValue:uI}}}},dI="__vector__",Xh="value";function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rx(t)?4:h9(t)?9007199254740991:d9(t)?10:11:ge(28295,{value:t})}function Zr(t,e){if(t===e)return!0;const n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ai(s.timestampValue),l=Ai(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ji(s.bytesValue).isEqual(ji(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return mt(s.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return mt(s.integerValue)===mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=mt(s.doubleValue),l=mt(i.doubleValue);return o===l?Qh(o)===Qh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(o_(o)!==o_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Zr(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>Zr(n,e))!==void 0}function Za(t,e){if(t===e)return 0;const n=Ri(t),r=Ri(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=mt(i.integerValue||i.doubleValue),c=mt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return l_(t.timestampValue,e.timestampValue);case 4:return l_(Qc(t),Qc(e));case 5:return Ey(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ji(i),c=ji(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ie(l[u],c[u]);if(h!==0)return h}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(mt(i.latitude),mt(o.latitude));return l!==0?l:Ie(mt(i.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,y,b,v;const l=i.fields||{},c=o.fields||{},u=(p=l[Xh])==null?void 0:p.arrayValue,h=(y=c[Xh])==null?void 0:y.arrayValue,f=Ie(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:c_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Sd.mapValue&&o===Sd.mapValue)return 0;if(i===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Ey(c[f],h[f]);if(p!==0)return p;const y=Za(l[c[f]],u[h[f]]);if(y!==0)return y}return Ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function l_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Ai(t),r=Ai(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function c_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Za(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function el(t){return Sy(t)}function Sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Sy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Sy(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function th(t){switch(Ri(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(t);return e?16+th(e):16;case 5:return 2*t.stringValue.length;case 6:return ji(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+th(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return $i(r.fields,(i,o)=>{s+=i.length+th(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function u_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Px(t){return!!t&&"arrayValue"in t}function d_(t){return!!t&&"nullValue"in t}function h_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function d9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cI])==null?void 0:r.stringValue)===dI}function pc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return{...t}}function h9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=pc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){$i(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xn(pc(this.value))}}function hI(t){const e=[];return $i(t.fields,(n,r)=>{const s=new Pt([n]);if(nh(r)){const i=hI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,ve.min(),ve.min(),ve.min(),xn.empty(),0)}static newFoundDocument(e,n,r,s){return new Zt(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new Zt(e,2,n,ve.min(),ve.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,ve.min(),ve.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.position=e,this.inclusive=n}}function f_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=Za(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function m_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function f9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{}class vt extends fI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new p9(e,n,r):n==="array-contains"?new v9(e,r):n==="in"?new x9(e,r):n==="not-in"?new w9(e,r):n==="array-contains-any"?new b9(e,r):new vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new g9(e,r):new y9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Za(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends fI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Er(e,n)}matches(e){return mI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mI(t){return t.op==="and"}function pI(t){return m9(t)&&mI(t)}function m9(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function Ny(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+el(t.value);if(pI(t))return t.filters.map(e=>Ny(e)).join(",");{const e=t.filters.map(n=>Ny(n)).join(",");return`${t.op}(${e})`}}function gI(t,e){return t instanceof vt?function(r,s){return s instanceof vt&&r.op===s.op&&r.field.isEqual(s.field)&&Zr(r.value,s.value)}(t,e):t instanceof Er?function(r,s){return s instanceof Er&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&gI(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function yI(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${el(n.value)}`}(t):t instanceof Er?function(n){return n.op.toString()+" {"+n.getFilters().map(yI).join(" ,")+"}"}(t):"Filter"}class p9 extends vt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class g9 extends vt{constructor(e,n){super(e,"in",n),this.keys=vI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y9 extends vt{constructor(e,n){super(e,"not-in",n),this.keys=vI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class v9 extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Px(n)&&Yc(n.arrayValue,this.value)}}class x9 extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class w9 extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class b9 extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Px(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function p_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _9(t,e,n,r,s,i,o)}function Dx(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>el(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>el(r)).join(",")),e.Te=n}return e.Te}function Mx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m_(t.startAt,e.startAt)&&m_(t.endAt,e.endAt)}function Cy(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function E9(t,e,n,r,s,i,o,l){return new gl(t,e,n,r,s,i,o,l)}function cm(t){return new gl(t)}function g_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xI(t){return t.collectionGroup!==null}function gc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ct(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Xc(i,r))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Xc(Pt.keyField(),r))}return e.Ie}function Kr(t){const e=we(t);return e.Ee||(e.Ee=S9(e,gc(t))),e.Ee}function S9(t,e){if(t.limitType==="F")return p_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xc(s.field,i)});const n=t.endAt?new Jh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jh(t.startAt.position,t.startAt.inclusive):null;return p_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ky(t,e){const n=t.filters.concat([e]);return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zh(t,e,n){return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function um(t,e){return Mx(Kr(t),Kr(e))&&t.limitType===e.limitType}function wI(t){return`${Dx(Kr(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yI(s)).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>el(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>el(s)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of gc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=f_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,gc(r),s)||r.endAt&&!function(o,l,c){const u=f_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,gc(r),s))}(t,e)}function T9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bI(t){return(e,n)=>{let r=!1;for(const s of gc(t)){const i=N9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function N9(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Za(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=new ut(me.comparator);function Ns(){return C9}const _I=new ut(me.comparator);function Zl(...t){let e=_I;for(const n of t)e=e.insert(n.key,n);return e}function EI(t){let e=_I;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function uo(){return yc()}function SI(){return yc()}function yc(){return new zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const k9=new ut(me.comparator),I9=new Ct(me.comparator);function Ae(...t){let e=I9;for(const n of t)e=e.add(n);return e}const A9=new Ct(Ie);function j9(){return A9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function TI(t){return{integerValue:""+t}}function R9(t,e){return o9(e)?TI(e):Ox(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function P9(t,e,n){return t instanceof Jc?function(s,i){const o={fields:{[oI]:{stringValue:iI},[lI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rx(i)&&(i=lm(i)),i&&(o.fields[aI]=i),{mapValue:o}}(n,e):t instanceof tl?CI(t,e):t instanceof Zc?kI(t,e):function(s,i){const o=NI(s,i),l=y_(o)+y_(s.Ae);return Ty(o)&&Ty(s.Ae)?TI(l):Ox(s.serializer,l)}(t,e)}function D9(t,e,n){return t instanceof tl?CI(t,e):t instanceof Zc?kI(t,e):n}function NI(t,e){return t instanceof ef?function(r){return Ty(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jc extends hm{}class tl extends hm{constructor(e){super(),this.elements=e}}function CI(t,e){const n=II(e);for(const r of t.elements)n.some(s=>Zr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zc extends hm{constructor(e){super(),this.elements=e}}function kI(t,e){let n=II(e);for(const r of t.elements)n=n.filter(s=>!Zr(s,r));return{arrayValue:{values:n}}}class ef extends hm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function y_(t){return mt(t.integerValue||t.doubleValue)}function II(t){return Px(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.field=e,this.transform=n}}function M9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof tl&&s instanceof tl||r instanceof Zc&&s instanceof Zc?Xa(r.elements,s.elements,Zr):r instanceof ef&&s instanceof ef?Zr(r.Ae,s.Ae):r instanceof Jc&&s instanceof Jc}(t.transform,e.transform)}class O9{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function jI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lx(t.key,gr.none()):new Nu(t.key,t.data,gr.none());{const n=t.data,r=xn.empty();let s=new Ct(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Bi(t.key,r,new Dn(s.toArray()),gr.none())}}function L9(t,e,n){t instanceof Nu?function(s,i,o){const l=s.value.clone(),c=x_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Bi?function(s,i,o){if(!rh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=x_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(RI(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vc(t,e,n,r){return t instanceof Nu?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=i.value.clone(),h=w_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bi?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=w_(i.fieldTransforms,c,o),h=o.data;return h.setAll(RI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return rh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function V9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=NI(r.transform,s||null);i!=null&&(n===null&&(n=xn.empty()),n.set(r.field,i))}return n||null}function v_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xa(r,s,(i,o)=>M9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nu extends fm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bi extends fm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function x_(t,e,n){const r=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,D9(o,l,n[s]))}return r}function w_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,P9(i,o,e))}return r}class Lx extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F9 extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&L9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=jI(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>v_(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>v_(n,r))}}class Vx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return k9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Re;function B9(t){switch(t){case W.OK:return ge(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function PI(t){if(t===void 0)return Ts("GRPC error has no .code"),W.UNKNOWN;switch(t){case gt.OK:return W.OK;case gt.CANCELLED:return W.CANCELLED;case gt.UNKNOWN:return W.UNKNOWN;case gt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case gt.INTERNAL:return W.INTERNAL;case gt.UNAVAILABLE:return W.UNAVAILABLE;case gt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case gt.NOT_FOUND:return W.NOT_FOUND;case gt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case gt.ABORTED:return W.ABORTED;case gt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case gt.DATA_LOSS:return W.DATA_LOSS;default:return ge(39323,{code:t})}}(Re=gt||(gt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new xi([4294967295,4294967295],0);function b_(t){const e=H9().encode(t),n=new Hk;return n.update(e),new Uint8Array(n.digest())}function __(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xi([n,r],0),new xi([s,i],0)]}class Fx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ec(`Invalid padding: ${n}`);if(r<0)throw new ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(xi.fromNumber(r)));return s.compare(W9)===1&&(s=new xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b_(e),[r,s]=__(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=b_(e),[r,s]=__(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mm(ve.min(),s,new ut(Ie),Ns(),Ae())}}class Cu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class DI{constructor(e,n){this.targetId=e,this.Ce=n}}class MI{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class E_{constructor(){this.ve=0,this.Fe=S_(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}}),new Cu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=S_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class q9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=Td(),this.He=Td(),this.Ye=new ut(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Cy(i))if(r===0){const o=new me(i.path);this.et(n,o,Zt.newNoDocument(o,ve.min()))}else Ue(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ji(r).toUint8Array()}catch(c){if(c instanceof sI)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Fx(o,s,i)}catch(c){return Po(c instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Cy(l.target)){const c=new me(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Zt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new mm(e,n,this.Ye,this.je,r);return this.je=Ns(),this.Je=Td(),this.He=Td(),this.Ye=new ut(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new E_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Td(){return new ut(me.comparator)}function S_(){return new ut(me.comparator)}const G9={asc:"ASCENDING",desc:"DESCENDING"},K9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q9={and:"AND",or:"OR"};class Y9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iy(t,e){return t.useProto3Json||am(e)?e:{value:e}}function tf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X9(t,e){return tf(t,e.toTimestamp())}function Qr(t){return Ue(!!t,49232),ve.fromTimestamp(function(n){const r=Ai(n);return new Ye(r.seconds,r.nanos)}(t))}function zx(t,e){return Ay(t,e).canonicalString()}function Ay(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LI(t){const e=Qe.fromString(t);return Ue($I(e),10190,{key:e.toString()}),e}function jy(t,e){return zx(t.databaseId,e.path)}function $p(t,e){const n=LI(e);if(n.get(1)!==t.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(FI(n))}function VI(t,e){return zx(t.databaseId,e)}function J9(t){const e=LI(t);return e.length===4?Qe.emptyPath():FI(e)}function Ry(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FI(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function T_(t,e,n){return{name:jy(t,e),fields:n.value.mapValue.fields}}function Z9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?W.UNKNOWN:PI(u.code);return new le(h,u.message||"")}(o);n=new MI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$p(t,r.document.name),i=Qr(r.document.updateTime),o=r.document.createTime?Qr(r.document.createTime):ve.min(),l=new xn({mapValue:{fields:r.document.fields}}),c=Zt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new sh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$p(t,r.document),i=r.readTime?Qr(r.readTime):ve.min(),o=Zt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new sh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$p(t,r.document),i=r.removedTargetIds||[];n=new sh([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $9(s,i),l=r.targetId;n=new DI(l,o)}}return n}function ez(t,e){let n;if(e instanceof Nu)n={update:T_(t,e.key,e.value)};else if(e instanceof Lx)n={delete:jy(t,e.key)};else if(e instanceof Bi)n={update:T_(t,e.key,e.data),updateMask:cz(e.fieldMask)};else{if(!(e instanceof F9))return ge(16599,{Vt:e.type});n={verify:jy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ef)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:X9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function tz(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Qr(s.updateTime):Qr(i);return o.isEqual(ve.min())&&(o=Qr(i)),new O9(o,s.transformResults||[])}(n,e))):[]}function nz(t,e){return{documents:[VI(t,e.path)]}}function rz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VI(t,s);const i=function(u){if(u.length!==0)return UI(Er.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Xo(p.field),direction:oz(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Iy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function sz(t){let e=J9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ue(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=zI(f);return p instanceof Er&&pI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Xc(Jo(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,am(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,y=f.values||[];return new Jh(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new Jh(y,p)}(n.endAt)),E9(e,s,o,i,l,"F",c,u)}function iz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jo(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jo(n.unaryFilter.field);return vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jo(n.unaryFilter.field);return vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jo(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Jo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Er.create(n.compositeFilter.filters.map(r=>zI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function oz(t){return G9[t]}function az(t){return K9[t]}function lz(t){return Q9[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Pt.fromServerFormat(t.fieldPath)}function UI(t){return t instanceof vt?function(n){if(n.op==="=="){if(h_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NAN"}};if(d_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NAN"}};if(d_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(n.field),op:az(n.op),value:n.value}}}(t):t instanceof Er?function(n){const r=n.getFilters().map(s=>UI(s));return r.length===1?r[0]:{compositeFilter:{op:lz(n.op),filters:r}}}(t):ge(54877,{filter:t})}function cz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $I(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r,s,i=ve.min(),o=ve.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.yt=e}}function dz(t){const e=sz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.Cn=new fz}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Ii.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class fz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ct(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BI=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(BI,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LruGarbageCollector",mz=1048576;function k_([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class pz{constructor(e){this.Ir=e,this.buffer=new Ct(k_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();k_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(C_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pl(n)?ue(C_,"Ignoring IndexedDB error during garbage collection: ",n):await ml(n)}await this.Vr(3e5)})}}class yz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(om.ce);const r=new pz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(N_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Qo()<=ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function vz(t,e){return new yz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(){this.changes=new zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vc(r.mutation,s,Dn.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=uo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Zl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ns();const o=yc(),l=function(){return yc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Bi)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),vc(h.mutation,u,h.mutation.getFieldMask(),Ye.now())):o.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new wz(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=yc();let s=new ut((o,l)=>o-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Dn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ae()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=SI();h.forEach(p=>{if(!i.has(p)){const y=jI(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(uo());let l=Kc,c=i;return o.next(u=>q.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ae())).next(h=>({batchId:l,changes:EI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=Zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Zl();return this.indexManager.getCollectionParents(e,i).next(l=>q.forEach(l,c=>{const u=function(f,p){return new gl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let l=Zl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&vc(h.mutation,u,Dn.empty(),Ye.now()),dm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:dz(s.bundledQuery),readTime:Qr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.overlays=new ut(me.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uo();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=uo(),i=n.length+1,o=new me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=uo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=uo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.Qr=new Ct(At.$r),this.Ur=new Ct(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new me(new Qe([])),r=new At(n,e),s=new At(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Qe([])),r=new At(n,e),s=new At(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new At(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(At.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new z9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new At(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?jx:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),s=new At(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(Ie);return n.forEach(s=>{const i=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new At(new me(i),0);let l=new Ct(Ie);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new At(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new At(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.ri=e,this.docs=function(){return new ut(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=Ns();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Zt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ns();const o=n.path,l=new me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||n9(t9(h),r)<=0||(s.has(h.key)||dm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cz(this)}getSize(e){return q.resolve(this.size)}}class Cz extends xz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.persistence=e,this.si=new zo(n=>Dx(n),Mx),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Ux,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.ui={},this.overlays={},this.ci=new om(0),this.li=!1,this.li=!0,this.hi=new Sz,this.referenceDelegate=e(this),this.Pi=new kz(this),this.indexManager=new hz,this.remoteDocumentCache=function(s){return new Nz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new uz(n),this.Ii=new _z(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ez,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Tz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new Iz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Iz extends s9{constructor(e){super(),this.currentSequenceNumber=e}}class $x{constructor(e){this.persistence=e,this.Ri=new Ux,this.Vi=null}static mi(e){return new $x(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=me.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nf{constructor(e,n){this.persistence=e,this.pi=new zo(r=>a9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=vz(this,n)}static mi(e,n){return new nf(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return TL()?8:i9(tn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Az;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Qo()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Qo()<=ke.DEBUG&&ue("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Qo()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):q.resolve())}ys(e,n){if(g_(n))return q.resolve(null);let r=Kr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zh(n,null,"F"),r=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Zh(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return g_(n)||s.isEqual(ve.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Qo()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yo(n)),this.vs(e,o,n,e9(s,Kc)).next(l=>l))})}Ds(e,n){let r=new Ct(bI(e));return n.forEach((s,i)=>{dm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Qo()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ii.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LocalStore",Rz=3e8;class Pz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ut(Ie),this.xs=new zo(i=>Dx(i),Mx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Dz(t,e,n,r){return new Pz(t,e,n,r)}async function WI(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Mz(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let y=q.resolve();return p.forEach(b=>{y=y.next(()=>h.getEntry(c,b)).next(v=>{const E=u.docVersions.get(b);Ue(E!==null,48541),v.version.compareTo(E)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qI(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Oz(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ot.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,E,w){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Rz?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=Ns(),u=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Lz(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function Lz(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ns();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ue(Hx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function Vz(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fz(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Py(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pl(o))throw o;ue(Hx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function I_(t,e,n){const r=we(t);let s=ve.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?q.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,Kr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:Ae())).next(l=>(zz(r,T9(e),l),{documents:l,Qs:i})))}function zz(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class A_{constructor(){this.activeTargetIds=j9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uz{constructor(){this.Mo=new A_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class R_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(j_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(j_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function Dy(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="RestConnection",Bz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Dy(),l=this.zo(e,n.toUriEncodedString());ue(Bp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=ul(u);return this.Jo(e,l,c,r,h).then(f=>(ue(Bp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Po(Bp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Bz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class qz extends Hz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Dy();return new Promise((l,c)=>{const u=new Wk;u.setWithCredentials(!0),u.listenOnce(qk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eh.NO_ERROR:const f=u.getResponseJson();ue(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case eh.TIMEOUT:ue(Kt,`RPC '${e}' ${o} timed out`),c(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const p=u.getStatus();if(ue(Kt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const v=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(x)>=0?x:W.UNKNOWN}(b.status);c(new le(v,b.message))}else c(new le(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(W.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ue(Kt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ue(Kt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Dy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qk(),l=Kk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ue(Kt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,y=!1;const b=new Wz({Yo:E=>{y?ue(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(ue(Kt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ue(Kt,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},Zo:()=>f.close()}),v=(E,w,x)=>{E.listen(w,_=>{try{x(_)}catch(I){setTimeout(()=>{throw I},0)}})};return v(f,Jl.EventType.OPEN,()=>{y||(ue(Kt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),v(f,Jl.EventType.CLOSE,()=>{y||(y=!0,ue(Kt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),v(f,Jl.EventType.ERROR,E=>{y||(y=!0,Po(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new le(W.UNAVAILABLE,"The operation could not be completed")))}),v(f,Jl.EventType.MESSAGE,E=>{var w;if(!y){const x=E.data[0];Ue(!!x,16349);const _=x,I=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(I){ue(Kt,`RPC '${e}' stream ${s} received error:`,I);const M=I.status;let D=function(C){const k=gt[C];if(k!==void 0)return PI(k)}(M),T=I.message;D===void 0&&(D=W.INTERNAL,T="Unknown error status: "+M+" with message "+I.message),y=!0,b.a_(new le(D,T)),f.close()}else ue(Kt,`RPC '${e}' stream ${s} received:`,x),b.u_(x)}}),v(l,Gk.STAT_EVENT,E=>{E.stat===_y.PROXY?ue(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===_y.NOPROXY&&ue(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return new Y9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="PersistentStream";class KI{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ue(P_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ue(P_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gz extends KI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Z9(this.serializer,e),r=function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Qr(o.readTime):ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ry(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Cy(c)?{documents:nz(i,c)}:{query:rz(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=OI(i,o.resumeToken);const u=Iy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=tf(i,o.snapshotVersion.toTimestamp());const u=Iy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=iz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ry(this.serializer),n.removeTarget=e,this.q_(n)}}class Kz extends KI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tz(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ry(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ez(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{}class Yz extends Qz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Ay(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Ay(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Xz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class Jz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Uo(this)&&(ue(Do,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await ku(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gm(u)}(this))})}),this.Ra=new Xz(r,s)}}async function gm(t){if(Uo(t))for(const e of t.da)await e(!0)}async function ku(t){for(const e of t.da)await e(!1)}function QI(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kx(n)?Gx(n):yl(n).O_()&&qx(n,e))}function Wx(t,e){const n=we(t),r=yl(n);n.Ia.delete(e),r.O_()&&YI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Uo(n)&&n.Ra.set("Unknown"))}function qx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yl(t).Y_(e)}function YI(t,e){t.Va.Ue(e),yl(t).Z_(e)}function Gx(t){t.Va=new q9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yl(t).start(),t.Ra.ua()}function Kx(t){return Uo(t)&&!yl(t).x_()&&t.Ia.size>0}function Uo(t){return we(t).Ea.size===0}function XI(t){t.Va=void 0}async function Zz(t){t.Ra.set("Online")}async function e8(t){t.Ia.forEach((e,n)=>{qx(t,e)})}async function t8(t,e){XI(t),Kx(t)?(t.Ra.ha(e),Gx(t)):t.Ra.set("Unknown")}async function n8(t,e,n){if(t.Ra.set("Online"),e instanceof MI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ue(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rf(t,r)}else if(e instanceof sh?t.Va.Ze(e):e instanceof DI?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await qI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),YI(i,c);const f=new oi(h.target,c,u,h.sequenceNumber);qx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ue(Do,"Failed to raise snapshot:",r),await rf(t,r)}}async function rf(t,e,n){if(!pl(e))throw e;t.Ea.add(1),await ku(t),t.Ra.set("Offline"),n||(n=()=>qI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue(Do,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gm(t)})}function JI(t,e){return e().catch(n=>rf(t,n,e))}async function ym(t){const e=we(t),n=Pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jx;for(;r8(e);)try{const s=await Vz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,s8(e,s)}catch(s){await rf(e,s)}ZI(e)&&e2(e)}function r8(t){return Uo(t)&&t.Ta.length<10}function s8(t,e){t.Ta.push(e);const n=Pi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZI(t){return Uo(t)&&!Pi(t).x_()&&t.Ta.length>0}function e2(t){Pi(t).start()}async function i8(t){Pi(t).ra()}async function o8(t){const e=Pi(t);for(const n of t.Ta)e.ea(n.mutations)}async function a8(t,e,n){const r=t.Ta.shift(),s=Vx.from(r,e,n);await JI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ym(t)}async function l8(t,e){e&&Pi(t).X_&&await async function(r,s){if(function(o){return B9(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();Pi(r).B_(),await JI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ym(r)}}(t,e),ZI(t)&&e2(t)}async function D_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ue(Do,"RemoteStore received new credentials");const r=Uo(n);n.Ea.add(3),await ku(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gm(n)}async function c8(t,e){const n=we(t);e?(n.Ea.delete(2),await gm(n)):e||(n.Ea.add(2),await ku(n),n.Ra.set("Unknown"))}function yl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new Gz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Zz.bind(null,t),t_:e8.bind(null,t),r_:t8.bind(null,t),H_:n8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kx(t)?Gx(t):t.Ra.set("Unknown")):(await t.ma.stop(),XI(t))})),t.ma}function Pi(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new Kz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:i8.bind(null,t),r_:l8.bind(null,t),ta:o8.bind(null,t),na:a8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ym(t)):(await t.fa.stop(),t.Ta.length>0&&(ue(Do,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Qx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yx(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),pl(t))return new le(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static emptySet(e){return new Ea(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Zl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.ga=new ut(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class rl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new rl(e,n,Ea.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class d8{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=O_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(W.ABORTED,"Firestore shutting down"))}}function O_(){return new zo(t=>wI(t),um)}async function t2(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new u8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Yx(o,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xx(n)}async function n2(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h8(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Xx(n)}function f8(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xx(t){t.Ca.forEach(e=>{e.next()})}var My,L_;(L_=My||(My={})).Ma="default",L_.Cache="cache";class r2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==My.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.key=e}}class i2{constructor(e){this.key=e}}class m8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=bI(e),this.tu=new Ea(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new M_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=dm(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;p&&y?p.data.isEqual(y.data)?b!==v&&(r.track({type:3,doc:y}),E=!0):this.su(p,y)||(r.track({type:2,doc:y}),E=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!p&&y?(r.track({type:0,doc:y}),E=!0):p&&!y&&(r.track({type:1,doc:p}),E=!0,(c||u)&&(l=!0)),E&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,b){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:E})}};return v(y)-v(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new rl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new M_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new i2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new s2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jx="SyncEngine";class p8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g8{constructor(e){this.key=e,this.hu=!1}}class y8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new zo(l=>wI(l),um),this.Iu=new Map,this.Eu=new Set,this.du=new ut(me.comparator),this.Au=new Map,this.Ru=new Ux,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v8(t,e,n=!0){const r=d2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await o2(r,e,n,!0),s}async function x8(t,e){const n=d2(t);await o2(n,e,!0,!1)}async function o2(t,e,n,r){const s=await Fz(t.localStore,Kr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await w8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&QI(t.remoteStore,s),l}async function w8(t,e,n,r,s){t.pu=(f,p,y)=>async function(v,E,w,x){let _=E.view.ru(w);_.Cs&&(_=await I_(v.localStore,E.query,!1).then(({documents:T})=>E.view.ru(T,_)));const I=x&&x.targetChanges.get(E.targetId),M=x&&x.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(_,v.isPrimaryClient,I,M);return F_(v,E.targetId,D.au),D.snapshot}(t,f,p,y);const i=await I_(t.localStore,e,!0),o=new m8(e,i.Qs),l=o.ru(i.documents),c=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);F_(t,n,u.au);const h=new p8(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function b8(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!um(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Py(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wx(r.remoteStore,s.targetId),Oy(r,s.targetId)}).catch(ml)):(Oy(r,s.targetId),await Py(r.localStore,s.targetId,!0))}async function _8(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wx(n.remoteStore,r.targetId))}async function E8(t,e,n){const r=A8(t);try{const s=await function(o,l){const c=we(o),u=Ye.now(),h=l.reduce((y,b)=>y.add(b.key),Ae());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ns(),v=Ae();return c.Ns.getEntries(y,h).next(E=>{b=E,b.forEach((w,x)=>{x.isValidDocument()||(v=v.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(E=>{f=E;const w=[];for(const x of l){const _=V9(x,f.get(x.key).overlayedDocument);_!=null&&w.push(new Bi(x.key,_,hI(_.value.mapValue),gr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,w,l)}).next(E=>{p=E;const w=E.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(y,E.batchId,w)})}).then(()=>({batchId:p.batchId,changes:EI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ut(Ie)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Iu(r,s.changes),await ym(r.remoteStore)}catch(s){const i=Yx(s,"Failed to persist write");n.reject(i)}}async function a2(t,e){const n=we(t);try{const r=await Oz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ue(o.hu,14607):s.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))}),await Iu(n,r,e)}catch(r){await ml(r)}}function V_(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Xx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S8(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ut(me.comparator);o=o.insert(i,Zt.newNoDocument(i,ve.min()));const l=Ae().add(i),c=new mm(ve.min(),new Map,new ut(Ie),o,l);await a2(r,c),r.du=r.du.remove(i),r.Au.delete(e),Zx(r)}else await Py(r.localStore,e,!1).then(()=>Oy(r,e,n)).catch(ml)}async function T8(t,e){const n=we(t),r=e.batch.batchId;try{const s=await Mz(n.localStore,e);c2(n,r,null),l2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,s)}catch(s){await ml(s)}}async function N8(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ue(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);c2(r,e,n),l2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,s)}catch(s){await ml(s)}}function l2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function c2(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Oy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||u2(t,r)})}function u2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zx(t))}function F_(t,e,n){for(const r of n)r instanceof s2?(t.Ru.addReference(r.key,e),C8(t,r)):r instanceof i2?(ue(Jx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||u2(t,r.key)):ge(19791,{wu:r})}function C8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ue(Jx,"New document in limbo: "+n),t.Eu.add(r),Zx(t))}function Zx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(Qe.fromString(e)),r=t.fu.next();t.Au.set(r,new g8(n)),t.du=t.du.insert(n,r),QI(t.remoteStore,new oi(Kr(cm(n.path)),r,"TargetPurposeLimboResolution",om.ce))}}async function Iu(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Bx.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,p=>q.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>q.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!pl(f))throw f;ue(Hx,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),b=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,v)}}}(r.localStore,i))}async function k8(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ue(Jx,"User change. New user:",e.toKey());const r=await WI(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.Ls)}}function I8(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function d2(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S8.bind(null,e),e.Pu.H_=h8.bind(null,e.eventManager),e.Pu.yu=f8.bind(null,e.eventManager),e}function A8(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N8.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Dz(this.persistence,new jz,e.initialUser,this.serializer)}Cu(e){return new HI($x.mi,this.serializer)}Du(e){return new Uz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class j8 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new HI(r=>nf.mi(r,n),this.serializer)}}class Ly{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>V_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k8.bind(null,this.syncEngine),await c8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d8}()}createDatastore(e){const n=pm(e.databaseInfo.databaseId),r=function(i){return new qz(i)}(e.databaseInfo);return function(i,o,l,c){return new Yz(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Jz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>V_(this.syncEngine,n,0),function(){return R_.v()?new R_:new $z}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new y8(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);ue(Do,"RemoteStore shutting down."),i.Ea.add(5),await ku(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="FirestoreClient";class R8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue(Di,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue(Di,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wp(t,e){t.asyncQueue.verifyOperationInProgress(),ue(Di,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await WI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await P8(t);ue(Di,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>D_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>D_(e.remoteStore,s)),t._onlineComponents=e}async function P8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue(Di,"Using user provided OfflineComponentProvider");try{await Wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Wp(t,new sf)}}else ue(Di,"Using default OfflineComponentProvider"),await Wp(t,new j8(void 0));return t._offlineComponents}async function f2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue(Di,"Using user provided OnlineComponentProvider"),await z_(t,t._uninitializedComponentsProvider._online)):(ue(Di,"Using default OnlineComponentProvider"),await z_(t,new Ly))),t._onlineComponents}function D8(t){return f2(t).then(e=>e.syncEngine)}async function Vy(t){const e=await f2(t),n=e.eventManager;return n.onListen=v8.bind(null,e.syncEngine),n.onUnlisten=b8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_8.bind(null,e.syncEngine),n}function M8(t,e,n={}){const r=new wi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new h2({next:p=>{h.Nu(),o.enqueueAndForget(()=>n2(i,f));const y=p.docs.has(l);!y&&p.fromCache?u.reject(new le(W.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?u.reject(new le(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new r2(cm(l.path),h,{includeMetadataChanges:!0,qa:!0});return t2(i,f)}(await Vy(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firestore.googleapis.com",$_=!0;class B_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p2,this.ssl=$_}else this.host=e.host,this.ssl=e.ssl??$_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mz)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jk;switch(r.type){case"firstParty":return new KF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=U_.get(n);r&&(ue("ComponentProvider","Removing Datastore"),U_.delete(n),r.terminate())}(this),Promise.resolve()}}function g2(t,e,n,r={}){var u;t=Yn(t,vm);const s=ul(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(ok(`https://${l}`),ak("Firestore",!0)),i.host!==p2&&i.host!==l&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!ki(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Yt.MOCK_USER;else{h=gL(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Yt(p)}t._authCredentials=new WF(new Xk(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tu(n,at._jsonSchema))return new at(e,r||null,new me(Qe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:xt("string",at._jsonSchemaVersion),referencePath:xt("string")};class gs extends Is{constructor(e,n,r){super(e,n,cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new me(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function e0(t,e,...n){if(t=Mt(t),Zk("collection","path",e),t instanceof vm){const r=Qe.fromString(e,...n);return n_(r),new gs(t,null,r)}{if(!(t instanceof at||t instanceof gs))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return n_(r),new gs(t.firestore,null,r)}}function ze(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=sm.newId()),Zk("doc","path",e),t instanceof vm){const r=Qe.fromString(e,...n);return t_(r),new at(t,null,new me(r))}{if(!(t instanceof at||t instanceof gs))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return t_(r),new at(t.firestore,t instanceof gs?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="AsyncQueue";class W_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GI(this,"async_queue_retry"),this._c=()=>{const r=Hp();r&&ue(H_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pl(e))throw e;ue(H_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",q_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Qx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:q_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function q_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Mi extends vm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new W_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W_(e),this._firestoreClient=void 0,await e}}}function y2(t,e){const n=typeof t=="object"?t:dk(),r=typeof t=="string"?t:Yh,s=xx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mL("firestore");i&&g2(s,...i)}return s}function xm(t){if(t._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O8(t),t._firestoreClient}function O8(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new u9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,m2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new R8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Ot.fromBase64String(e))}catch(n){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:xt("string",Rn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:xt("string",yr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vr(e.vectorValues);throw new le(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:xt("string",vr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=/^__.*__$/;class V8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}class v2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class wm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x2(this.Ac)&&L8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pm(e)}Cc(e,n,r,s=!1){return new wm({Ac:e,methodName:n,Dc:r,path:Pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t0(t){const e=t._freezeSettings(),n=pm(t._databaseId);return new F8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function z8(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);s0("Data must be an object, but it was:",o,r);const l=w2(r,o);let c,u;if(i.merge)c=new Dn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Fy(e,f,n);if(!o.contains(p))throw new le(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_2(h,p)||h.push(p)}c=new Dn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new V8(new xn(l),c,u)}class bm extends vl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}function U8(t,e,n){return new wm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n0 extends vl{_toFieldTransform(e){return new AI(e.path,new Jc)}isEqual(e){return e instanceof n0}}class r0 extends vl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=U8(this,e,!0),r=this.vc.map(i=>xl(i,n)),s=new tl(r);return new AI(e.path,s)}isEqual(e){return e instanceof r0&&ki(this.vc,e.vc)}}function $8(t,e,n,r){const s=t.Cc(1,e,n);s0("Data must be an object, but it was:",s,r);const i=[],o=xn.empty();$i(r,(c,u)=>{const h=i0(e,c,n);u=Mt(u);const f=s.yc(h);if(u instanceof bm)i.push(h);else{const p=xl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Dn(i);return new v2(o,l,s.fieldTransforms)}function B8(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Fy(e,r,n)],c=[s];if(i.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Fy(e,i[p])),c.push(i[p+1]);const u=[],h=xn.empty();for(let p=l.length-1;p>=0;--p)if(!_2(u,l[p])){const y=l[p];let b=c[p];b=Mt(b);const v=o.yc(y);if(b instanceof bm)u.push(y);else{const E=xl(b,v);E!=null&&(u.push(y),h.set(y,E))}}const f=new Dn(u);return new v2(h,f,o.fieldTransforms)}function H8(t,e,n,r=!1){return xl(n,t.Cc(r?4:3,e))}function xl(t,e){if(b2(t=Mt(t)))return s0("Unsupported field value:",e,t),w2(t,e);if(t instanceof vl)return function(r,s){if(!x2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=xl(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:tf(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tf(s.serializer,i)}}if(r instanceof yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:OI(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vr)return function(o,l){return{mapValue:{fields:{[cI]:{stringValue:dI},[Xh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ox(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${im(r)}`)}(t,e)}function w2(t,e){const n={};return rI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(t,(r,s)=>{const i=xl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function b2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof yr||t instanceof Rn||t instanceof at||t instanceof vl||t instanceof vr)}function s0(t,e,n){if(!b2(n)||!tI(n)){const r=im(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Fy(t,e,n){if((e=Mt(e))instanceof Au)return e._internalPath;if(typeof e=="string")return i0(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const W8=new RegExp("[~\\*/\\[\\]]");function i0(t,e,n){if(e.search(W8)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new le(W.INVALID_ARGUMENT,l+t+c)}function _2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(o0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q8 extends E2{data(){return super.data()}}function o0(t,e){return typeof e=="string"?i0(t,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class _m extends a0{}function l0(t,e,...n){let r=[];e instanceof a0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Sm).length,l=i.filter(c=>c instanceof Em).length;if(o>1||o>0&&l>0)throw new le(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Em extends _m{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Em(e,n,r)}_apply(e){const n=this._parse(e);return T2(e._query,n),new Is(e.firestore,e.converter,ky(e._query,n))}_parse(e){const n=t0(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Q_(f,h);const b=[];for(const v of f)b.push(K_(c,i,v));p={arrayValue:{values:b}}}else p=K_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Q_(f,h),p=H8(l,o,f,h==="in"||h==="not-in");return vt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sm extends a0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)T2(o,c),o=ky(o,c)}(e._query,n),new Is(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends _m{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xc(i,o)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new gl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function c0(t,e="asc"){const n=e,r=o0("orderBy",t);return Tm._create(r,n)}class Nm extends _m{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){return new Is(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function S2(t){return Nm._create("limit",t,"F")}function K_(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new le(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xI(e)&&n.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!me.isDocumentKey(r))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return u_(t,new me(r))}if(n instanceof at)return u_(t,n._key);throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${im(n)}.`)}function Q_(t,e){if(!Array.isArray(t)||t.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N2{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $i(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>mt(o.doubleValue));return new vr(n)}convertGeoPoint(e){return new yr(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=Ai(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);Ue($I(r),9688,{name:e});const s=new Ja(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||Ts(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bi extends E2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(o0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:xt("string",bi._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class xc extends bi{data(e={}){return super.data(e)}}class bo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xc(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new xc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new da(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new xc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new da(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Q8(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){t=Yn(t,at);const e=Yn(t.firestore,Mi);return M8(xm(e),t._key).then(n=>A2(e,t,n))}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:xt("string",bo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class C2 extends N2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function $t(t,e,n){t=Yn(t,at);const r=Yn(t.firestore,Mi),s=K8(t.converter,e,n);return Cm(r,[z8(t0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gr.none())])}function k2(t,e,n,...r){t=Yn(t,at);const s=Yn(t.firestore,Mi),i=t0(s);let o;return o=typeof(e=Mt(e))=="string"||e instanceof Au?B8(i,"updateDoc",t._key,e,n,r):$8(i,"updateDoc",t._key,e),Cm(s,[o.toMutation(t._key,gr.exists(!0))])}function I2(t){return Cm(Yn(t.firestore,Mi),[new Lx(t._key,gr.none())])}function As(t,...e){var c,u,h;t=Mt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||G_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(G_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof at)o=Yn(t.firestore,Mi),l=cm(t._key.path),i={next:f=>{e[r]&&e[r](A2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Yn(t,Is);o=Yn(f.firestore,Mi),l=f._query;const p=new C2(o);i={next:y=>{e[r]&&e[r](new bo(o,p,f,y))},error:e[r+1],complete:e[r+2]},G8(t._query)}return function(p,y,b,v){const E=new h2(v),w=new r2(y,E,b);return p.asyncQueue.enqueueAndForget(async()=>t2(await Vy(p),w)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>n2(await Vy(p),w))}}(xm(o),l,s,i)}function Cm(t,e){return function(r,s){const i=new wi;return r.asyncQueue.enqueueAndForget(async()=>E8(await D8(r),s,i)),i.promise}(xm(t),e)}function A2(t,e,n){const r=n.docs.get(e._key),s=new C2(t);return new bi(t,s,e._key,r,new da(n.hasPendingWrites,n.fromCache),e.converter)}function km(){return new n0("serverTimestamp")}function j2(...t){return new r0("arrayUnion",t)}(function(e,n=!0){(function(s){fl=s})(dl),Qa(new Ao("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Mi(new qF(r.getProvider("auth-internal")),new QF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),vi(Xb,Jb,e),vi(Xb,Jb,"esm2020")})();const Y_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:N2,Bytes:Rn,CollectionReference:gs,DocumentReference:at,DocumentSnapshot:bi,FieldPath:Au,FieldValue:vl,Firestore:Mi,FirestoreError:le,GeoPoint:yr,Query:Is,QueryCompositeFilterConstraint:Sm,QueryConstraint:_m,QueryDocumentSnapshot:xc,QueryFieldFilterConstraint:Em,QueryLimitConstraint:Nm,QueryOrderByConstraint:Tm,QuerySnapshot:bo,SnapshotMetadata:da,Timestamp:Ye,VectorValue:vr,_AutoId:sm,_ByteString:Ot,_DatabaseId:Ja,_DocumentKey:me,_EmptyAuthCredentialsProvider:Jk,_FieldPath:Pt,_cast:Yn,_logWarn:Po,_validateIsNotUsedTogether:eI,arrayUnion:j2,collection:e0,connectFirestoreEmulator:g2,deleteDoc:I2,doc:ze,ensureFirestoreConfigured:xm,executeWrite:Cm,getDoc:Sr,getFirestore:y2,limit:S2,onSnapshot:As,orderBy:c0,query:l0,serverTimestamp:km,setDoc:$t,updateDoc:k2},Symbol.toStringTag,{value:"Module"})),Y8={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},u0=uk(Y8),io=UF(u0),Oe=y2(u0),Tr=new Xt;Tr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Tr.addScope("https://www.googleapis.com/auth/calendar");Tr.addScope("https://www.googleapis.com/auth/gmail.send");Tr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const X_=Object.freeze(Object.defineProperty({__proto__:null,app:u0,auth:io,db:Oe,googleProvider:Tr},Symbol.toStringTag,{value:"Module"})),R2=m.createContext(void 0);function X8({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>localStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>AV(io,x=>{n(x),x||(h(null),s(!1),o(null),localStorage.removeItem("google_access_token"))}),[]),m.useEffect(()=>{async function w(){if(!e||!i){if(e&&!i){const x=localStorage.getItem("google_access_token");if(x){o(x);return}}e||s(!1);return}try{s(!0);const x=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let _=!1;if(x.ok){const D=await x.json();D.courses&&D.courses.length>0&&(_=!0)}if(_){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const I=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let M=!1;if(I.ok){const D=await I.json();D.courses&&D.courses.length>0&&(M=!0)}M?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(x){console.error("Role detection failed:",x),h("no_access")}finally{s(!1)}}w()},[e,i]);const f=async()=>{try{c(null),Tr.setCustomParameters({prompt:"consent",access_type:"offline"});const w=await bd(io,Tr),x=Xt.credentialFromResult(w);x!=null&&x.accessToken&&(o(x.accessToken),localStorage.setItem("google_access_token",x.accessToken))}catch(w){const x=w instanceof Error?w.message:"Failed to sign in";c(x),console.error("Sign in error:",w)}},p=async()=>{try{c(null);const w=new Xt;w.addScope("https://www.googleapis.com/auth/gmail.send"),w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await bd(io,w),_=Xt.credentialFromResult(x),I=x._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),localStorage.setItem("google_access_token",_.accessToken)),I!=null&&I.oauthRefreshToken){const{doc:M,setDoc:D,serverTimestamp:T}=await xd(async()=>{const{doc:C,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>Y_);return{doc:C,setDoc:k,serverTimestamp:A}},void 0),{db:N}=await xd(async()=>{const{db:C}=await Promise.resolve().then(()=>X_);return{db:C}},void 0);if(e&&I.oauthRefreshToken)return await D(M(N,"users",e.uid,"private_tokens","google"),{refreshToken:I.oauthRefreshToken,updatedAt:T()}),!0}return!!(_!=null&&_.accessToken)}catch(w){const x=w instanceof Error?w.message:"Failed to get Gmail permissions";return c(x),console.error("Permission error:",w),!1}},y=async()=>{try{c(null);const w=new Xt;w.addScope("https://www.googleapis.com/auth/calendar.events"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await bd(io,w),_=Xt.credentialFromResult(x),I=x._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),localStorage.setItem("google_access_token",_.accessToken)),e&&(I!=null&&I.oauthRefreshToken)){const{doc:M,setDoc:D,serverTimestamp:T}=await xd(async()=>{const{doc:C,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>Y_);return{doc:C,setDoc:k,serverTimestamp:A}},void 0),{db:N}=await xd(async()=>{const{db:C}=await Promise.resolve().then(()=>X_);return{db:C}},void 0);return await D(M(N,"users",e.uid,"private_tokens","calendar"),{refreshToken:I.oauthRefreshToken,updatedAt:T(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(w){const x=w instanceof Error?w.message:"Failed to get Calendar permissions";return c(x),console.error("Permission error:",w),!1}},b=async()=>{if(!e)return!1;try{const w=new Xt;w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),w.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),w.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const x=await bd(io,w),_=Xt.credentialFromResult(x);return _!=null&&_.accessToken?(o(_.accessToken),localStorage.setItem("google_access_token",_.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(w){return console.error("Failed to refresh access token:",w),!1}},v=async()=>b(),E=async()=>{try{await jV(io),o(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(w){const x=w instanceof Error?w.message:"Failed to sign out";c(x)}};return a.jsx(R2.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:y,refreshAccessToken:v,signOut:E,error:l},children:t})}function it(){const t=m.useContext(R2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const P2=m.createContext(void 0);function J8({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(P2.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function d0(){const t=m.useContext(P2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class Z8{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const o=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-o)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,o){try{const{totalXP:l,processedIds:c}=this.calculateXP(i),u=n.includes("@")?n.split("@")[1]:"",h=o.map(v=>v.id),f=ze(Oe,"leaderboards","all-courses","students",e),p=await Sr(f),y=p.exists()?p.data().badges||[]:[],b=this.calculateBadges(c.length,y);await $t(f,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:u,enrolledCourseIds:h,totalXP:l,processedAssignmentIds:c,lastSyncedAt:km(),badges:b},{merge:!0})}catch(l){throw console.error(" Failed to sync leaderboard:",l),l}}static async resetLeaderboardForSemester(e){try{const n=ze(Oe,"leaderboards","all-courses","students",e);await I2(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=ze(Oe,"leaderboards","all-courses","students",e),s=await Sr(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],o=new Set(n),l=new Set(i);if(o.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!o.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,o){try{const l=o.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,o)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}async function eU(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function tU(t,e,n,r){const s=ze(Oe,"users",n,"settings","calendar"),i=await Sr(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const y=ze(Oe,"users",n,"calendarEvents",c.id),b=await Sr(y),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let E;if(b.exists()){const{calendarEventId:w}=b.data();E=await fetch(`${v}/${w}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(E=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),E.ok){const w=await E.json();await $t(y,{calendarEventId:w.id,assignmentId:c.id,updatedAt:km()})}if(!E.ok&&E.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(E){console.warn(`Failed to sync assignment ${c.id} to calendar`,E)}}}const D2=m.createContext(void 0);function nU(){return Math.random().toString(36).substring(2,15)}async function eu(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,y={};try{const b=await u.json();y=b,p=((o=b.error)==null?void 0:o.message)||b.message||p,console.error("API Error Response:",b)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const J_=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function rU(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%J_.length;return J_[n]}async function sU(t,e){const r=await eu(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:i.id,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s,color:rU(i.id)}))}async function iU(t,e,n,r){var l,c;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await eu(t,s,u=>u.courseWork||[],u=>u.nextPageToken),o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const E=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await eu(t,E,x=>x.studentSubmissions||[],x=>x.nextPageToken))[0]||null}catch(E){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,E)}let f=null,p=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((l=u.dueTime)==null?void 0:l.hours)||23,((c=u.dueTime)==null?void 0:c.minutes)||59).toISOString(),u.dueTime&&(p=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const y=new Date;let b="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?b="graded":h.state==="TURNED_IN"||h.turnInTime?b="submitted":h.state==="CREATED"&&(b=f&&new Date(f)<y?"overdue":"backlog"):f&&new Date(f)<y?b="overdue":b="backlog";const v={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:e,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:p,maxPoints:u.maxPoints||null,systemStatus:b,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)??(h==null?void 0:h.assignedGrade)??(h==null?void 0:h.draftGrade)??null,alternateLink:u.alternateLink||null,createdAt:u.creationTime||y.toISOString(),lastSyncedAt:y.toISOString()};o.push(v)}return o}async function oU(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,o=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([eu(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),eu(t,o,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var y,b;return((y=p.message)!=null&&y.includes("insufficient authentication scopes")||(b=p.message)!=null&&b.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const y=p.text||"Announcement Material",b=y.split(`
`)[0].length>60?y.split(`
`)[0].substring(0,57)+"...":y.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:b,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function aU({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=it();m.useEffect(()=>{!s&&!e&&(o([]),c([]),h([]),p(new Map),x(null),D(!1),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const[i,o]=m.useState(()=>{const U=localStorage.getItem("classroom_courses");return U?JSON.parse(U):[]}),[l,c]=m.useState(()=>{const U=localStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[u,h]=m.useState(()=>{const U=localStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[f,p]=m.useState(()=>{const U=localStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[y,b]=m.useState(()=>!localStorage.getItem("classroom_courses")),[v,E]=m.useState(!1),[w,x]=m.useState(()=>{const U=localStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[_,I]=m.useState(null),[M,D]=m.useState(!1),[T,N]=m.useState(!1),{toast:C}=Fo(),k=m.useCallback(async(U=!1)=>{var Q;if(!e){I("Please sign in with Google to sync your Classroom data"),b(!1);return}let H=n;if(!H){console.log("No access token found, attempting to refresh...");try{if(await r()){await new Promise(X=>setTimeout(X,500));const J=localStorage.getItem("google_access_token");if(J)H=J,console.log("Successfully refreshed access token");else throw new Error("Token refresh succeeded but token not found")}else throw new Error("Token refresh failed")}catch(te){console.error("Failed to refresh token:",te),I("Your session has expired. Please click below to sign in again and refresh your access."),b(!1);return}}E(!0),l.length===0&&b(!0),I(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!H});const te=await sU(H,e.uid);if(te.length===0){I("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),o([]),c([]),x(new Date),E(!1),b(!1);return}const J=[],X=[];for(const re of te)try{const[L,K]=await Promise.all([iU(H,re.classroomId,re.name,e.uid),oU(H,re.classroomId,re.name,e.uid,()=>N(!0))]);J.push(...L),X.push(...K)}catch(L){console.warn(`Failed to fetch data for course ${re.name}:`,L)}console.log(`Sync complete: ${te.length} courses, ${J.length} assignments, ${X.length} materials`),o(te),c(J),h(X),x(new Date);try{await Z8.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",J,te),console.log(" Leaderboard auto-synced successfully")}catch(re){console.error(" Leaderboard sync failed:",re)}b(!1);try{await tU(J,H,e.uid,C)}catch(re){console.error("Calendar sync failed:",re)}try{const re=ze(Oe,"users",e.uid,"settings","notifications"),L=await Sr(re);if(L.exists()&&L.data().enabled&&L.data().notifyDueSoon){const ce=ze(Oe,"users",e.uid,"notifications","digest"),Y=await Sr(ce),se=Y.exists()?(Q=Y.data().lastSent)==null?void 0:Q.toDate():null,ie=new Date;if(!(se&&se.getDate()===ie.getDate()&&se.getMonth()===ie.getMonth()&&se.getFullYear()===ie.getFullYear())){const Te=new Date(ie);Te.setDate(Te.getDate()+1),Te.setHours(23,59,59,999);const Ge=J.filter(je=>{if(!je.dueDate||je.systemStatus==="submitted"||je.systemStatus==="graded")return!1;const Ve=new Date(je.dueDate);return Ve>=ie&&Ve<=Te});if(Ge.length>0&&e.email){const je=Ge.map(Lt=>`<li><strong>${Lt.title}</strong> <span style="color:#666">(${Lt.courseName})</span><br>Due: ${new Date(Lt.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),Ve=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;">Daily Digest</h2>
                           <p>You have <strong>${Ge.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${je}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await eU(e.email,`Student Sphere: ${Ge.length} Tasks Due Soon`,Ve,H),await $t(ce,{lastSent:km()}),console.log("Daily digest email delivered.")}}}}catch(re){console.warn("Notification sync failed (non-critical):",re)}U||C({title:"Sync Complete",description:`Successfully synced ${te.length} courses, ${J.length} assignments, and updated Google Calendar.`})}catch(te){console.error("Sync error details:",te);let J="Failed to sync";if(te!=null&&te.message){const X=te.message.toLowerCase();X.includes("401")||X.includes("unauthorized")||X.includes("invalid_token")||X.includes("token expired")?J="Authentication failed. Your access token may have expired. Please sign out and sign in again.":X.includes("403")||X.includes("forbidden")||X.includes("permission denied")?J="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":X.includes("quota")||X.includes("rate")||X.includes("429")?J="API quota exceeded. Please try again later.":X.includes("cors")||X.includes("network")?J="Network error. Please check your internet connection and try again.":J=`Sync failed: ${te.message}`}else te instanceof TypeError&&te.message.includes("fetch")&&(J="Network error. Please check your internet connection.");I(J),console.error("Sync error:",te),U||C({variant:"destructive",title:"Sync Failed",description:J})}finally{E(!1),b(!1)}},[e,n,r,C]);m.useEffect(()=>{if(!e){D(!1),b(!1);return}if(!n){b(!1);return}!M&&!v&&(D(!0),k(!0))},[e,n,M,i.length,l.length,v]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(i))},[i]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(u))},[u]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(f.entries())))},[f]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(l))},[l]),m.useEffect(()=>{w?localStorage.setItem("classroom_lastSyncedAt",w.toISOString()):localStorage.removeItem("classroom_lastSyncedAt")},[w]);const A=m.useCallback((U,H)=>{c(Q=>Q.map(te=>te.id===U?{...te,userStatus:H}:te))},[]),P=m.useCallback((U,H,Q=!1)=>{const te={id:nU(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:H,isImportant:Q,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};p(J=>{const X=new Map(J),re=X.get(U)||[];return X.set(U,[...re,te]),X})},[e]),R=m.useCallback((U,H,Q)=>{p(te=>{const J=new Map(te);for(const[X,re]of Array.from(J.entries())){const L=re.findIndex(K=>K.id===U);if(L!==-1){const K=[...re];K[L]={...K[L],content:H,isImportant:Q??K[L].isImportant,updatedAt:new Date().toISOString()},J.set(X,K);break}}return J})},[]),F=m.useCallback((U,H)=>{p(Q=>{const te=new Map(Q),J=te.get(H)||[];return te.set(H,J.filter(X=>X.id!==U)),te})},[]),ae=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return l.forEach(H=>{const Q=H.userStatus==="in_progress"?"in_progress":H.systemStatus,te=U.find(J=>J.id===Q);te&&te.assignments.push(H)}),U.forEach(H=>{H.assignments.sort((Q,te)=>Q.dueDate?te.dueDate?new Date(Q.dueDate).getTime()-new Date(te.dueDate).getTime():-1:1)}),U},[l]),ee=m.useCallback(()=>{const U=new Date,H=new Date(U);H.setDate(H.getDate()+3);const Q=new Date(U);Q.setDate(Q.getDate()+7);const te=l.filter(se=>se.systemStatus!=="graded"&&se.systemStatus!=="submitted"),J=l.filter(se=>{if(!se.dueDate||se.systemStatus==="graded"||se.systemStatus==="submitted")return!1;const ie=new Date(se.dueDate);return ie>=U&&ie<=H}),X=l.filter(se=>{if(!se.dueDate||se.systemStatus==="graded"||se.systemStatus==="submitted")return!1;const ie=new Date(se.dueDate);return ie>=U&&ie<=Q}),re=l.filter(se=>se.systemStatus==="overdue"),L=[],K=new Date,ce=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let se=0;se<7;se++){const ie=new Date(K);ie.setDate(ie.getDate()+se);const Se=ie.toISOString().split("T")[0],Te=l.filter(Ge=>Ge.dueDate?Ge.dueDate.split("T")[0]===Se:!1).length;L.push({day:ce[ie.getDay()],count:Te,isToday:se===0})}const Y=[...te].filter(se=>se.dueDate).sort((se,ie)=>new Date(se.dueDate).getTime()-new Date(ie.dueDate).getTime()).slice(0,5);return{totalActive:te.length,upcoming3Days:J.length,upcoming7Days:X.length,overdue:re.length,weeklyWorkload:L,nextActions:Y}},[l]),Z=m.useCallback(U=>{let H=[...l];U!=null&&U.courseId&&(H=H.filter(X=>X.courseId===U.courseId)),U!=null&&U.status&&(H=H.filter(X=>X.systemStatus===U.status)),H.sort((X,re)=>X.dueDate?re.dueDate?new Date(X.dueDate).getTime()-new Date(re.dueDate).getTime():-1:1);const Q=new Map,te=new Date,J=new Date(te);return J.setDate(J.getDate()+1),H.forEach(X=>{if(!X.dueDate)return;const re=X.dueDate.split("T")[0],L=new Date(X.dueDate);let K;re===te.toISOString().split("T")[0]?K="Today":re===J.toISOString().split("T")[0]?K="Tomorrow":K=L.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),Q.has(re)||Q.set(re,{date:re,dateLabel:K,assignments:[]}),Q.get(re).assignments.push(X)}),Array.from(Q.values())},[l]),O=m.useCallback(U=>l.find(H=>H.id===U),[l]),B=m.useCallback(U=>f.get(U)||[],[f]);return a.jsx(D2.Provider,{value:{courses:i,assignments:l,notes:f,isLoading:y,isSyncing:v,lastSyncedAt:w,error:_,syncClassroom:k,updateAssignmentStatus:A,addNote:P,updateNote:R,deleteNote:F,getPipelineColumns:ae,getDashboardMetrics:ee,getTimelineGroups:Z,getAssignmentById:O,getNotesForAssignment:B,materials:u,reauthRequired:T},children:t})}function wn(){const t=m.useContext(D2);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var qp="focusScope.autoFocusOnMount",Gp="focusScope.autoFocusOnUnmount",Z_={bubbles:!1,cancelable:!0},lU="FocusScope",h0=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=cn(s),h=cn(i),f=m.useRef(null),p=Be(e,v=>c(v)),y=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(_){if(y.paused||!l)return;const I=_.target;l.contains(I)?f.current=I:Hs(f.current,{select:!0})},E=function(_){if(y.paused||!l)return;const I=_.relatedTarget;I!==null&&(l.contains(I)||Hs(f.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const M of _)M.removedNodes.length>0&&Hs(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",E);const x=new MutationObserver(w);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",E),x.disconnect()}}},[r,l,y.paused]),m.useEffect(()=>{if(l){tE.add(y);const v=document.activeElement;if(!l.contains(v)){const w=new CustomEvent(qp,Z_);l.addEventListener(qp,u),l.dispatchEvent(w),w.defaultPrevented||(cU(mU(M2(l)),{select:!0}),document.activeElement===v&&Hs(l))}return()=>{l.removeEventListener(qp,u),setTimeout(()=>{const w=new CustomEvent(Gp,Z_);l.addEventListener(Gp,h),l.dispatchEvent(w),w.defaultPrevented||Hs(v??document.body,{select:!0}),l.removeEventListener(Gp,h),tE.remove(y)},0)}}},[l,u,h,y]);const b=m.useCallback(v=>{if(!n&&!r||y.paused)return;const E=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(E&&w){const x=v.currentTarget,[_,I]=uU(x);_&&I?!v.shiftKey&&w===I?(v.preventDefault(),n&&Hs(_,{select:!0})):v.shiftKey&&w===_&&(v.preventDefault(),n&&Hs(I,{select:!0})):w===x&&v.preventDefault()}},[n,r,y.paused]);return a.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});h0.displayName=lU;function cU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Hs(r,{select:e}),document.activeElement!==n)return}function uU(t){const e=M2(t),n=eE(e,t),r=eE(e.reverse(),t);return[n,r]}function M2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eE(t,e){for(const n of t)if(!dU(n,{upTo:e}))return n}function dU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hU(t){return t instanceof HTMLInputElement&&"select"in t}function Hs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&hU(t)&&e&&t.select()}}var tE=fU();function fU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=nE(t,e),t.unshift(e)},remove(e){var n;t=nE(t,e),(n=t[0])==null||n.resume()}}}function nE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function mU(t){return t.filter(e=>e.tagName!=="A")}var Kp=0;function O2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??rE()),document.body.insertAdjacentElement("beforeend",t[1]??rE()),Kp++,()=>{Kp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kp--}},[])}function rE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Br=function(){return Br=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Br.apply(this,arguments)};function L2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var ih="right-scroll-bar-position",oh="width-before-scroll-bar",gU="with-scroll-bars-hidden",yU="--removed-body-scroll-bar-size";function Qp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vU(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var xU=typeof window<"u"?m.useLayoutEffect:m.useEffect,sE=new WeakMap;function wU(t,e){var n=vU(null,function(r){return t.forEach(function(s){return Qp(s,r)})});return xU(function(){var r=sE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Qp(l,null)}),i.forEach(function(l){s.has(l)||Qp(l,o)})}sE.set(n,t)},[t]),n}function bU(t){return t}function _U(t,e){e===void 0&&(e=bU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function EU(t){t===void 0&&(t={});var e=_U(null);return e.options=Br({async:!0,ssr:!1},t),e}var V2=function(t){var e=t.sideCar,n=L2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Br({},n))};V2.isSideCarExport=!0;function SU(t,e){return t.useMedium(e),V2}var F2=EU(),Yp=function(){},Im=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Yp,onWheelCapture:Yp,onTouchMoveCapture:Yp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,y=t.noIsolation,b=t.inert,v=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,x=t.gapMode,_=L2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,M=wU([n,e]),D=Br(Br({},_),s);return m.createElement(m.Fragment,null,h&&m.createElement(I,{sideCar:F2,removeScrollBar:u,shards:f,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?m.cloneElement(m.Children.only(l),Br(Br({},D),{ref:M})):m.createElement(w,Br({},D,{className:c,ref:M}),l))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:oh,zeroRight:ih};var TU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=TU();return e&&t.setAttribute("nonce",e),t}function CU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function kU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var IU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=NU())&&(CU(e,n),kU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},AU=function(){var t=IU();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},z2=function(){var t=AU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},jU={left:0,top:0,right:0,gap:0},Xp=function(t){return parseInt(t||"",10)||0},RU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Xp(n),Xp(r),Xp(s)]},PU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jU;var e=RU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},DU=z2(),Sa="data-scroll-locked",MU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Sa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ih,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(oh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ih," .").concat(ih,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(oh," .").concat(oh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sa,`] {
    `).concat(yU,": ").concat(l,`px;
  }
`)},iE=function(){var t=parseInt(document.body.getAttribute(Sa)||"0",10);return isFinite(t)?t:0},OU=function(){m.useEffect(function(){return document.body.setAttribute(Sa,(iE()+1).toString()),function(){var t=iE()-1;t<=0?document.body.removeAttribute(Sa):document.body.setAttribute(Sa,t.toString())}},[])},LU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;OU();var i=m.useMemo(function(){return PU(s)},[s]);return m.createElement(DU,{styles:MU(i,!e,s,n?"":"!important")})},zy=!1;if(typeof window<"u")try{var Cd=Object.defineProperty({},"passive",{get:function(){return zy=!0,!0}});window.addEventListener("test",Cd,Cd),window.removeEventListener("test",Cd,Cd)}catch{zy=!1}var qo=zy?{passive:!1}:!1,VU=function(t){return t.tagName==="TEXTAREA"},U2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!VU(t)&&n[e]==="visible")},FU=function(t){return U2(t,"overflowY")},zU=function(t){return U2(t,"overflowX")},oE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$2(t,r);if(s){var i=B2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},$U=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$2=function(t,e){return t==="v"?FU(e):zU(e)},B2=function(t,e){return t==="v"?UU(e):$U(e)},BU=function(t,e){return t==="h"&&e==="rtl"?-1:1},HU=function(t,e,n,r,s){var i=BU(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var y=B2(t,l),b=y[0],v=y[1],E=y[2],w=v-E-i*b;(b||w)&&$2(t,l)&&(f+=w,p+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},kd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aE=function(t){return[t.deltaX,t.deltaY]},lE=function(t){return t&&"current"in t?t.current:t},WU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GU=0,Go=[];function KU(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(GU++)[0],i=m.useState(z2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=pU([t.lockRef.current],(t.shards||[]).map(lE),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(v,E){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=kd(v),x=n.current,_="deltaX"in v?v.deltaX:x[0]-w[0],I="deltaY"in v?v.deltaY:x[1]-w[1],M,D=v.target,T=Math.abs(_)>Math.abs(I)?"h":"v";if("touches"in v&&T==="h"&&D.type==="range")return!1;var N=oE(T,D);if(!N)return!0;if(N?M=T:(M=T==="v"?"h":"v",N=oE(T,D)),!N)return!1;if(!r.current&&"changedTouches"in v&&(_||I)&&(r.current=M),!M)return!0;var C=r.current||M;return HU(C,E,v,C==="h"?_:I,!0)},[]),c=m.useCallback(function(v){var E=v;if(!(!Go.length||Go[Go.length-1]!==i)){var w="deltaY"in E?aE(E):kd(E),x=e.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&WU(M.delta,w)})[0];if(x&&x.should){E.cancelable&&E.preventDefault();return}if(!x){var _=(o.current.shards||[]).map(lE).filter(Boolean).filter(function(M){return M.contains(E.target)}),I=_.length>0?l(E,_[0]):!o.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),u=m.useCallback(function(v,E,w,x){var _={name:v,delta:E,target:w,should:x,shadowParent:QU(w)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(I){return I!==_})},1)},[]),h=m.useCallback(function(v){n.current=kd(v),r.current=void 0},[]),f=m.useCallback(function(v){u(v.type,aE(v),v.target,l(v,t.lockRef.current))},[]),p=m.useCallback(function(v){u(v.type,kd(v),v.target,l(v,t.lockRef.current))},[]);m.useEffect(function(){return Go.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,qo),document.addEventListener("touchmove",c,qo),document.addEventListener("touchstart",h,qo),function(){Go=Go.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,qo),document.removeEventListener("touchmove",c,qo),document.removeEventListener("touchstart",h,qo)}},[]);var y=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:qU(s)}):null,y?m.createElement(LU,{gapMode:t.gapMode}):null)}function QU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const YU=SU(F2,KU);var f0=m.forwardRef(function(t,e){return m.createElement(Im,Br({},t,{ref:e,sideCar:YU}))});f0.classNames=Im.classNames;var XU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ko=new WeakMap,Id=new WeakMap,Ad={},Jp=0,H2=function(t){return t&&(t.host||H2(t.parentNode))},JU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=H2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ZU=function(t,e,n,r){var s=JU(e,Array.isArray(t)?t:[t]);Ad[n]||(Ad[n]=new WeakMap);var i=Ad[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var y=p.getAttribute(r),b=y!==null&&y!=="false",v=(Ko.get(p)||0)+1,E=(i.get(p)||0)+1;Ko.set(p,v),i.set(p,E),o.push(p),v===1&&b&&Id.set(p,!0),E===1&&p.setAttribute(n,"true"),b||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return h(e),l.clear(),Jp++,function(){o.forEach(function(f){var p=Ko.get(f)-1,y=i.get(f)-1;Ko.set(f,p),i.set(f,y),p||(Id.has(f)||f.removeAttribute(r),Id.delete(f)),y||f.removeAttribute(n)}),Jp--,Jp||(Ko=new WeakMap,Ko=new WeakMap,Id=new WeakMap,Ad={})}},W2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=XU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),ZU(r,s,n,"aria-hidden")):function(){return null}},m0="Dialog",[q2,G2]=kr(m0),[e7,Ir]=q2(m0),K2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Si({prop:r,defaultProp:s,onChange:i});return a.jsx(e7,{scope:e,triggerRef:l,contentRef:c,contentId:ps(),titleId:ps(),descriptionId:ps(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};K2.displayName=m0;var Q2="DialogTrigger",Y2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(Q2,n),i=Be(e,s.triggerRef);return a.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":y0(s.open),...r,ref:i,onClick:pe(t.onClick,s.onOpenToggle)})});Y2.displayName=Q2;var p0="DialogPortal",[t7,X2]=q2(p0,{forceMount:void 0}),J2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ir(p0,e);return a.jsx(t7,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(zi,{present:n||i.open,children:a.jsx(mu,{asChild:!0,container:s,children:o})}))})};J2.displayName=p0;var af="DialogOverlay",Z2=m.forwardRef((t,e)=>{const n=X2(af,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ir(af,t.__scopeDialog);return i.modal?a.jsx(zi,{present:r||i.open,children:a.jsx(r7,{...s,ref:e})}):null});Z2.displayName=af;var n7=Ha("DialogOverlay.RemoveScroll"),r7=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(af,n);return a.jsx(f0,{as:n7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(xe.div,{"data-state":y0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Mo="DialogContent",eA=m.forwardRef((t,e)=>{const n=X2(Mo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ir(Mo,t.__scopeDialog);return a.jsx(zi,{present:r||i.open,children:i.modal?a.jsx(s7,{...s,ref:e}):a.jsx(i7,{...s,ref:e})})});eA.displayName=Mo;var s7=m.forwardRef((t,e)=>{const n=Ir(Mo,t.__scopeDialog),r=m.useRef(null),s=Be(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return W2(i)},[]),a.jsx(tA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault())})}),i7=m.forwardRef((t,e)=>{const n=Ir(Mo,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(tA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),tA=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Ir(Mo,n),c=m.useRef(null),u=Be(e,c);return O2(),a.jsxs(a.Fragment,{children:[a.jsx(h0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(fu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":y0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(a7,{titleId:l.titleId}),a.jsx(c7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),g0="DialogTitle",nA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(g0,n);return a.jsx(xe.h2,{id:s.titleId,...r,ref:e})});nA.displayName=g0;var rA="DialogDescription",sA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(rA,n);return a.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});sA.displayName=rA;var iA="DialogClose",oA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(iA,n);return a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});oA.displayName=iA;function y0(t){return t?"open":"closed"}var aA="DialogTitleWarning",[o7,lA]=DM(aA,{contentName:Mo,titleName:g0,docsSlug:"dialog"}),a7=({titleId:t})=>{const e=lA(aA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},l7="DialogDescriptionWarning",c7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lA(l7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},cA=K2,u7=Y2,uA=J2,v0=Z2,x0=eA,w0=nA,b0=sA,_0=oA,dA="AlertDialog",[d7,qW]=kr(dA,[G2]),js=G2(),hA=t=>{const{__scopeAlertDialog:e,...n}=t,r=js(e);return a.jsx(cA,{...r,...n,modal:!0})};hA.displayName=dA;var h7="AlertDialogTrigger",fA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(u7,{...s,...r,ref:e})});fA.displayName=h7;var f7="AlertDialogPortal",mA=t=>{const{__scopeAlertDialog:e,...n}=t,r=js(e);return a.jsx(uA,{...r,...n})};mA.displayName=f7;var m7="AlertDialogOverlay",pA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(v0,{...s,...r,ref:e})});pA.displayName=m7;var Ta="AlertDialogContent",[p7,g7]=d7(Ta),y7=_N("AlertDialogContent"),gA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=js(n),o=m.useRef(null),l=Be(e,o),c=m.useRef(null);return a.jsx(o7,{contentName:Ta,titleName:yA,docsSlug:"alert-dialog",children:a.jsx(p7,{scope:n,cancelRef:c,children:a.jsxs(x0,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:pe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(y7,{children:r}),a.jsx(x7,{contentRef:o})]})})})});gA.displayName=Ta;var yA="AlertDialogTitle",vA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(w0,{...s,...r,ref:e})});vA.displayName=yA;var xA="AlertDialogDescription",wA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(b0,{...s,...r,ref:e})});wA.displayName=xA;var v7="AlertDialogAction",bA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(_0,{...s,...r,ref:e})});bA.displayName=v7;var _A="AlertDialogCancel",EA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=g7(_A,n),i=js(n),o=Be(e,s);return a.jsx(_0,{...i,...r,ref:o})});EA.displayName=_A;var x7=({contentRef:t})=>{const e=`\`${Ta}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ta}\` by passing a \`${xA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ta}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},w7=hA,b7=fA,_7=mA,SA=pA,TA=gA,NA=bA,CA=EA,kA=vA,IA=wA;const E0=gu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?OM:"button";return a.jsx(o,{className:$(E0({variant:e,size:n,className:t})),ref:i,...s})});fe.displayName="Button";const AA=w7,jA=b7,E7=_7,RA=m.forwardRef(({className:t,...e},n)=>a.jsx(SA,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));RA.displayName=SA.displayName;const S0=m.forwardRef(({className:t,...e},n)=>a.jsxs(E7,{children:[a.jsx(RA,{}),a.jsx(TA,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));S0.displayName=TA.displayName;const T0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});T0.displayName="AlertDialogHeader";const N0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});N0.displayName="AlertDialogFooter";const C0=m.forwardRef(({className:t,...e},n)=>a.jsx(kA,{ref:n,className:$("text-lg font-semibold",t),...e}));C0.displayName=kA.displayName;const k0=m.forwardRef(({className:t,...e},n)=>a.jsx(IA,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));k0.displayName=IA.displayName;const I0=m.forwardRef(({className:t,...e},n)=>a.jsx(NA,{ref:n,className:$(E0(),t),...e}));I0.displayName=NA.displayName;const A0=m.forwardRef(({className:t,...e},n)=>a.jsx(CA,{ref:n,className:$(E0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));A0.displayName=CA.displayName;const Zp=768;function Am(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Zp-1}px)`),r=()=>{e(window.innerWidth<Zp)};return n.addEventListener("change",r),e(window.innerWidth<Zp),()=>n.removeEventListener("change",r)},[]),!!t}var j0="Avatar",[S7,GW]=kr(j0),[T7,PA]=S7(j0),DA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(T7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(xe.span,{...r,ref:e})})});DA.displayName=j0;var MA="AvatarImage",OA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=PA(MA,n),l=N7(r,i),c=cn(u=>{s(u),o.onImageLoadingStatusChange(u)});return kt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(xe.img,{...i,ref:e,src:r}):null});OA.displayName=MA;var LA="AvatarFallback",VA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=PA(LA,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(xe.span,{...s,ref:e}):null});VA.displayName=LA;function cE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function N7(t,{referrerPolicy:e,crossOrigin:n}){const r=k7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>cE(i,t));return kt(()=>{l(cE(i,t))},[i,t]),kt(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function C7(){return()=>{}}function k7(){return m.useSyncExternalStore(C7,()=>!0,()=>!1)}var FA=DA,zA=OA,UA=VA;const as=m.forwardRef(({className:t,...e},n)=>a.jsx(FA,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));as.displayName=FA.displayName;const ls=m.forwardRef(({className:t,...e},n)=>a.jsx(zA,{ref:n,className:$("aspect-square h-full w-full",t),...e}));ls.displayName=zA.displayName;const cs=m.forwardRef(({className:t,...e},n)=>a.jsx(UA,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));cs.displayName=UA.displayName;const I7=[{path:"/dashboard",label:"Dashboard",icon:YN},{path:"/pipeline",label:"Pipeline",icon:eC},{path:"/leaderboard",label:"Leaderboard",icon:sx},{path:"/timeline",label:"Timeline",icon:Ui},{path:"/attendance",label:"Attendance",icon:lC},{path:"/notes",label:"Notes",icon:vo}];function A7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Lf(),r=Am(),{user:s,signOut:i}=it(),{theme:o,toggleTheme:l}=d0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(ko,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(as,{className:"h-8 w-8",children:[a.jsx(ls,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),I7.map(p=>{const y=n===p.path,b=p.icon;return a.jsxs(Yr,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(b,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(rx,{className:"w-4 h-4 mr-3"}):a.jsx(Bf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(Yr,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(iC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(AA,{children:[a.jsx(jA,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Bc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(S0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(k0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(I0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const lf=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));lf.displayName="Input";function j7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=wn(),[r]=Lf(),[s,i]=m.useState(""),o=Am(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(fe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(rC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(B5,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(lf,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(fe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:$(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(qa,{className:"w-5 h-5"})})})]})}var $A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uE=Ne.createContext&&Ne.createContext($A),R7=["attr","size","title"];function P7(t,e){if(t==null)return{};var n=D7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function D7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(this,arguments)}function dE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dE(Object(n),!0).forEach(function(r){M7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M7(t,e,n){return e=O7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O7(t){var e=L7(t,"string");return typeof e=="symbol"?e:e+""}function L7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BA(t){return t&&t.map((e,n)=>Ne.createElement(e.tag,uf({key:n},e.attr),BA(e.child)))}function R0(t){return e=>Ne.createElement(V7,cf({attr:uf({},t.attr)},e),BA(t.child))}function V7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=P7(t,R7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ne.createElement("svg",cf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:uf(uf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ne.createElement("title",null,i),t.children)};return uE!==void 0?Ne.createElement(uE.Consumer,null,n=>e(n)):e($A)}function HA(t){return R0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function F7(t){return R0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const z7=[{icon:F7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:F5,title:"Kanban Board",description:"Visual assignment tracking."},{icon:C5,title:"Linear Timeline",description:"Chronological deadline view."},{icon:k5,title:"Performance Metrics",description:"Grade & workload analytics."}];function U7(){const{signInWithGoogle:t,loading:e,error:n}=it();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:z7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(Vn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(fe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(HA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(Vn,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(H5,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function $7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const jm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function P0(t){return"nodeType"in t}function hn(t){var e,n;return t?wl(t)?t:P0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function D0(t){const{Document:e}=hn(t);return t instanceof e}function ju(t){return wl(t)?!1:t instanceof hn(t).HTMLElement}function WA(t){return t instanceof hn(t).SVGElement}function bl(t){return t?wl(t)?t.document:P0(t)?D0(t)?t:ju(t)||WA(t)?t.ownerDocument:document:document:document}const Nr=jm?m.useLayoutEffect:m.useEffect;function Rm(t){const e=m.useRef(t);return Nr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function B7(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function tu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return Nr(()=>{n.current!==t&&(n.current=t)},e),n}function Ru(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function df(t){const e=Rm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function hf(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let eg={};function Pu(t,e){return m.useMemo(()=>{if(e)return e;const n=eg[t]==null?0:eg[t]+1;return eg[t]=n,t+"-"+n},[t,e])}function qA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Na=qA(1),ff=qA(-1);function H7(t){return"clientX"in t&&"clientY"in t}function Pm(t){if(!t)return!1;const{KeyboardEvent:e}=hn(t.target);return e&&t instanceof e}function W7(t){if(!t)return!1;const{TouchEvent:e}=hn(t.target);return e&&t instanceof e}function mf(t){if(W7(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return H7(t)?{x:t.clientX,y:t.clientY}:null}const Oi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Oi.Translate.toString(t),Oi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),hE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function q7(t){return t.matches(hE)?t:t.querySelector(hE)}const G7={display:"none"};function K7(t){let{id:e,value:n}=t;return Ne.createElement("div",{id:e,style:G7},n)}function Q7(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ne.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Y7(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const GA=m.createContext(null);function X7(t){const e=m.useContext(GA);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function J7(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const Z7={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e$={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function t$(t){let{announcements:e=e$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Z7}=t;const{announce:i,announcement:o}=Y7(),l=Pu("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),X7(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:y}=f;e.onDragMove&&i(e.onDragMove({active:p,over:y}))},onDragOver(f){let{active:p,over:y}=f;i(e.onDragOver({active:p,over:y}))},onDragEnd(f){let{active:p,over:y}=f;i(e.onDragEnd({active:p,over:y}))},onDragCancel(f){let{active:p,over:y}=f;i(e.onDragCancel({active:p,over:y}))}}),[i,e])),!c)return null;const h=Ne.createElement(Ne.Fragment,null,Ne.createElement(K7,{id:r,value:s.draggable}),Ne.createElement(Q7,{id:l,announcement:o}));return n?Kn.createPortal(h,n):h}var Tt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Tt||(Tt={}));function pf(){}function fE(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function n$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Cr=Object.freeze({x:0,y:0});function r$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s$(t,e){const n=mf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function i$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function o$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function a$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function mE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const l$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=mE(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=r$(mE(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(i$)};function c$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const u$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=c$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(o$)};function d$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function KA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Cr}function h$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const f$=h$(1);function QA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function m$(t,e,n){const r=QA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const p$={ignoreTransform:!1};function _l(t,e){e===void 0&&(e=p$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=hn(t).getComputedStyle(t);u&&(n=m$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function pE(t){return _l(t,{ignoreTransform:!0})}function g$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function y$(t,e){return e===void 0&&(e=hn(t).getComputedStyle(t)),e.position==="fixed"}function v$(t,e){e===void 0&&(e=hn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function M0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(D0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ju(s)||WA(s)||n.includes(s))return n;const i=hn(t).getComputedStyle(s);return s!==t&&v$(s,i)&&n.push(s),y$(s,i)?n:r(s.parentNode)}return t?r(t):n}function YA(t){const[e]=M0(t,1);return e??null}function tg(t){return!jm||!t?null:wl(t)?t:P0(t)?D0(t)||t===bl(t).scrollingElement?window:ju(t)?t:null:null}function XA(t){return wl(t)?t.scrollX:t.scrollLeft}function JA(t){return wl(t)?t.scrollY:t.scrollTop}function Uy(t){return{x:XA(t),y:JA(t)}}var Rt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Rt||(Rt={}));function ZA(t){return!jm||!t?!1:t===document.scrollingElement}function ej(t){const e={x:0,y:0},n=ZA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const x$={x:.2,y:.2};function w$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=x$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=ej(t),y={x:0,y:0},b={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(y.y=Rt.Backward,b.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&c>=e.bottom-v.height&&(y.y=Rt.Forward,b.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!p&&l>=e.right-v.width?(y.x=Rt.Forward,b.x=r*Math.abs((e.right-v.width-l)/v.width)):!f&&o<=e.left+v.width&&(y.x=Rt.Backward,b.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:y,speed:b}}function b$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function tj(t){return t.reduce((e,n)=>Na(e,Uy(n)),Cr)}function _$(t){return t.reduce((e,n)=>e+XA(n),0)}function E$(t){return t.reduce((e,n)=>e+JA(n),0)}function nj(t,e){if(e===void 0&&(e=_l),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);YA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const S$=[["x",["left","right"],_$],["y",["top","bottom"],E$]];class O0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=M0(n),s=tj(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of S$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function T$(t){const{EventTarget:e}=hn(t);return t instanceof e?t:bl(t)}function ng(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Bn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bn||(Bn={}));function gE(t){t.preventDefault()}function N$(t){t.stopPropagation()}var Le;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Le||(Le={}));const rj={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},C$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Le.Right:return{...n,x:n.x+25};case Le.Left:return{...n,x:n.x-25};case Le.Down:return{...n,y:n.y+25};case Le.Up:return{...n,y:n.y-25}}};class L0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new wc(bl(n)),this.windowListeners=new wc(hn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&nj(r),n(Cr)}handleKeyDown(e){if(Pm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=rj,coordinateGetter:o=C$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Cr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=ff(f,h),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const E=e.code,{isTop:w,isRight:x,isLeft:_,isBottom:I,maxScroll:M,minScroll:D}=ej(v),T=b$(v),N={x:Math.min(E===Le.Right?T.right-T.width/2:T.right,Math.max(E===Le.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(E===Le.Down?T.bottom-T.height/2:T.bottom,Math.max(E===Le.Down?T.top:T.top+T.height/2,f.y))},C=E===Le.Right&&!x||E===Le.Left&&!_,k=E===Le.Down&&!I||E===Le.Up&&!w;if(C&&N.x!==f.x){const A=v.scrollLeft+p.x,P=E===Le.Right&&A<=M.x||E===Le.Left&&A>=D.x;if(P&&!p.y){v.scrollTo({left:A,behavior:l});return}P?y.x=v.scrollLeft-A:y.x=E===Le.Right?v.scrollLeft-M.x:v.scrollLeft-D.x,y.x&&v.scrollBy({left:-y.x,behavior:l});break}else if(k&&N.y!==f.y){const A=v.scrollTop+p.y,P=E===Le.Down&&A<=M.y||E===Le.Up&&A>=D.y;if(P&&!p.x){v.scrollTo({top:A,behavior:l});return}P?y.y=v.scrollTop-A:y.y=E===Le.Down?v.scrollTop-M.y:v.scrollTop-D.y,y.y&&v.scrollBy({top:-y.y,behavior:l});break}}this.handleMove(e,Na(ff(f,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=rj,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function yE(t){return!!(t&&"distance"in t)}function vE(t){return!!(t&&"delay"in t)}class V0{constructor(e,n,r){var s;r===void 0&&(r=T$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=bl(o),this.documentListeners=new wc(this.document),this.listeners=new wc(r),this.windowListeners=new wc(hn(o)),this.initialCoordinates=(s=mf(i))!=null?s:Cr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.DragStart,gE),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),this.windowListeners.add(Bn.ContextMenu,gE),this.documentListeners.add(Bn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(yE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bn.Click,N$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=mf(e))!=null?n:Cr,u=ff(s,c);if(!r&&l){if(yE(l)){if(l.tolerance!=null&&ng(u,l.tolerance))return this.handleCancel();if(ng(u,l.distance))return this.handleStart()}if(vE(l)&&ng(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const k$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class F0 extends V0{constructor(e){const{event:n}=e,r=bl(n.target);super(e,k$,r)}}F0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const I$={move:{name:"mousemove"},end:{name:"mouseup"}};var $y;(function(t){t[t.RightClick=2]="RightClick"})($y||($y={}));class A$ extends V0{constructor(e){super(e,I$,bl(e.event.target))}}A$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===$y.RightClick?!1:(r==null||r({event:n}),!0)}}];const rg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class j$ extends V0{constructor(e){super(e,rg)}static setup(){return window.addEventListener(rg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(rg.move.name,e)};function e(){}}}j$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var bc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(bc||(bc={}));var gf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(gf||(gf={}));function R$(t){let{acceleration:e,activator:n=bc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=gf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const y=D$({delta:f,disabled:!i}),[b,v]=B7(),E=m.useRef({x:0,y:0}),w=m.useRef({x:0,y:0}),x=m.useMemo(()=>{switch(n){case bc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case bc.DraggableRect:return s}},[n,s,c]),_=m.useRef(null),I=m.useCallback(()=>{const D=_.current;if(!D)return;const T=E.current.x*w.current.x,N=E.current.y*w.current.y;D.scrollBy(T,N)},[]),M=m.useMemo(()=>l===gf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!x){v();return}for(const D of M){if((r==null?void 0:r(D))===!1)continue;const T=u.indexOf(D),N=h[T];if(!N)continue;const{direction:C,speed:k}=w$(D,N,x,e,p);for(const A of["x","y"])y[A][C[A]]||(k[A]=0,C[A]=0);if(k.x>0||k.y>0){v(),_.current=D,b(I,o),E.current=k,w.current=C;return}}E.current={x:0,y:0},w.current={x:0,y:0},v()},[e,I,r,v,i,o,JSON.stringify(x),JSON.stringify(y),b,u,M,h,JSON.stringify(p)])}const P$={x:{[Rt.Backward]:!1,[Rt.Forward]:!1},y:{[Rt.Backward]:!1,[Rt.Forward]:!1}};function D$(t){let{delta:e,disabled:n}=t;const r=hf(e);return Ru(s=>{if(n||!r||!s)return P$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Rt.Backward]:s.x[Rt.Backward]||i.x===-1,[Rt.Forward]:s.x[Rt.Forward]||i.x===1},y:{[Rt.Backward]:s.y[Rt.Backward]||i.y===-1,[Rt.Forward]:s.y[Rt.Forward]||i.y===1}}},[n,e,r])}function M$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Ru(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function O$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var nu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(nu||(nu={}));var By;(function(t){t.Optimized="optimized"})(By||(By={}));const xE=new Map;function L$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=E(),p=tu(f),y=m.useCallback(function(w){w===void 0&&(w=[]),!p.current&&o(x=>x===null?w:x.concat(w.filter(_=>!x.includes(_))))},[p]),b=m.useRef(null),v=Ru(w=>{if(f&&!n)return xE;if(!w||w===xE||h.current!==t||i!=null){const x=new Map;for(let _ of t){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){x.set(_.id,_.rect.current);continue}const I=_.node.current,M=I?new O0(c(I),I):null;_.rect.current=M,M&&x.set(_.id,M)}return x}return w},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||y()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},l))},[l,f,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:i!=null};function E(){switch(u){case nu.Always:return!1;case nu.BeforeDragging:return n;default:return!n}}}function z0(t,e){return Ru(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function V$(t,e){return z0(t,e)}function F$(t){let{callback:e,disabled:n}=t;const r=Rm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Dm(t){let{callback:e,disabled:n}=t;const r=Rm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function z$(t){return new O0(_l(t),t)}function wE(t,e,n){e===void 0&&(e=z$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=F$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Dm({callback:i});return Nr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function U$(t){const e=z0(t);return KA(t,e)}const bE=[];function $$(t){const e=m.useRef(t),n=Ru(r=>t?r&&r!==bE&&t&&e.current&&t.parentNode===e.current.parentNode?r:M0(t):bE,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function B$(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=tg(i.target);o&&n(l=>l?(l.set(o,Uy(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=tg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Uy(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=tg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Na(i,o),Cr):tj(t):Cr,[t,e])}function _E(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Cr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?ff(t,n.current):Cr}function H$(t){m.useEffect(()=>{if(!jm)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function W$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function sj(t){return m.useMemo(()=>t?g$(t):null,[t])}const EE=[];function q$(t,e){e===void 0&&(e=_l);const[n]=t,r=sj(n?hn(n):null),[s,i]=m.useState(EE);function o(){i(()=>t.length?t.map(c=>ZA(c)?r:new O0(e(c),c)):EE)}const l=Dm({callback:o});return Nr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function ij(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ju(e)?e:t}function G$(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(ju(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Dm({callback:s}),o=m.useCallback(u=>{const h=ij(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=df(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const K$=[{sensor:F0,options:{}},{sensor:L0,options:{}}],Q$={current:{}},ah={draggable:{measure:pE},droppable:{measure:pE,strategy:nu.WhileDragging,frequency:By.Optimized},dragOverlay:{measure:_l}};class _c extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Y$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _c,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ah,measureDroppableContainers:pf,windowRect:null,measuringScheduled:!1},oj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pf,draggableNodes:new Map,over:null,measureDroppableContainers:pf},Du=m.createContext(oj),aj=m.createContext(Y$);function X$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _c}}}function J$(t,e){switch(e.type){case Tt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Tt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Tt.DragEnd:case Tt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new _c(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Tt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new _c(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Tt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new _c(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Z$(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Du),i=hf(r),o=hf(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Pm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=q7(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function lj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function eB(t){return m.useMemo(()=>({draggable:{...ah.draggable,...t==null?void 0:t.draggable},droppable:{...ah.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ah.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function tB(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Nr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=KA(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=YA(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Mm=m.createContext({...Cr,scaleX:1,scaleY:1});var Gs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Gs||(Gs={}));const nB=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=K$,collisionDetection:f=u$,measuring:p,modifiers:y,...b}=e;const v=m.useReducer(J$,void 0,X$),[E,w]=v,[x,_]=J7(),[I,M]=m.useState(Gs.Uninitialized),D=I===Gs.Initialized,{draggable:{active:T,nodes:N,translate:C},droppable:{containers:k}}=E,A=T!=null?N.get(T):null,P=m.useRef({initial:null,translated:null}),R=m.useMemo(()=>{var Me;return T!=null?{id:T,data:(Me=A==null?void 0:A.data)!=null?Me:Q$,rect:P}:null},[T,A]),F=m.useRef(null),[ae,ee]=m.useState(null),[Z,O]=m.useState(null),B=tu(b,Object.values(b)),U=Pu("DndDescribedBy",o),H=m.useMemo(()=>k.getEnabled(),[k]),Q=eB(p),{droppableRects:te,measureDroppableContainers:J,measuringScheduled:X}=L$(H,{dragging:D,dependencies:[C.x,C.y],config:Q.droppable}),re=M$(N,T),L=m.useMemo(()=>Z?mf(Z):null,[Z]),K=Uu(),ce=V$(re,Q.draggable.measure);tB({activeNode:T!=null?N.get(T):null,config:K.layoutShiftCompensation,initialRect:ce,measure:Q.draggable.measure});const Y=wE(re,Q.draggable.measure,ce),se=wE(re?re.parentElement:null),ie=m.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=k.getNodeFor((n=ie.current.over)==null?void 0:n.id),Te=G$({measure:Q.dragOverlay.measure}),Ge=(r=Te.nodeRef.current)!=null?r:re,je=D?(s=Te.rect)!=null?s:Y:null,Ve=!!(Te.nodeRef.current&&Te.rect),Lt=U$(Ve?null:Y),We=sj(Ge?hn(Ge):null),Ke=$$(D?Se??re:null),Zn=q$(Ke),Rs=lj(y,{transform:{x:C.x-Lt.x,y:C.y-Lt.y,scaleX:1,scaleY:1},activatorEvent:Z,active:R,activeNodeRect:Y,containerNodeRect:se,draggingNodeRect:je,over:ie.current.over,overlayNodeRect:Te.rect,scrollableAncestors:Ke,scrollableAncestorRects:Zn,windowRect:We}),Tl=L?Na(L,C):null,Ou=B$(Ke),qi=_E(Ou),Lu=_E(Ou,[Y]),ts=Na(Rs,qi),jr=je?f$(je,Rs):null,Gi=R&&jr?f({active:R,collisionRect:jr,droppableRects:te,droppableContainers:H,pointerCoordinates:Tl}):null,Vu=a$(Gi,"id"),[er,Nl]=m.useState(null),Ki=Ve?Rs:Na(Rs,Lu),Cl=d$(Ki,(i=er==null?void 0:er.rect)!=null?i:null,Y),Qi=m.useRef(null),Rr=m.useCallback((Me,Ht)=>{let{sensor:wt,options:fn}=Ht;if(F.current==null)return;const mn=N.get(F.current);if(!mn)return;const nn=Me.nativeEvent,Vt=new wt({active:F.current,activeNode:mn,event:nn,options:fn,context:ie,onAbort(bt){if(!N.get(bt))return;const{onDragAbort:Cn}=B.current,Un={id:bt};Cn==null||Cn(Un),x({type:"onDragAbort",event:Un})},onPending(bt,Nn,Cn,Un){if(!N.get(bt))return;const{onDragPending:tr}=B.current,Pr={id:bt,constraint:Nn,initialCoordinates:Cn,offset:Un};tr==null||tr(Pr),x({type:"onDragPending",event:Pr})},onStart(bt){const Nn=F.current;if(Nn==null)return;const Cn=N.get(Nn);if(!Cn)return;const{onDragStart:Un}=B.current,ns={activatorEvent:nn,active:{id:Nn,data:Cn.data,rect:P}};Kn.unstable_batchedUpdates(()=>{Un==null||Un(ns),M(Gs.Initializing),w({type:Tt.DragStart,initialCoordinates:bt,active:Nn}),x({type:"onDragStart",event:ns}),ee(Qi.current),O(nn)})},onMove(bt){w({type:Tt.DragMove,coordinates:bt})},onEnd:Ps(Tt.DragEnd),onCancel:Ps(Tt.DragCancel)});Qi.current=Vt;function Ps(bt){return async function(){const{active:Cn,collisions:Un,over:ns,scrollAdjustedTranslate:tr}=ie.current;let Pr=null;if(Cn&&tr){const{cancelDrop:pn}=B.current;Pr={activatorEvent:nn,active:Cn,collisions:Un,delta:tr,over:ns},bt===Tt.DragEnd&&typeof pn=="function"&&await Promise.resolve(pn(Pr))&&(bt=Tt.DragCancel)}F.current=null,Kn.unstable_batchedUpdates(()=>{w({type:bt}),M(Gs.Uninitialized),Nl(null),ee(null),O(null),Qi.current=null;const pn=bt===Tt.DragEnd?"onDragEnd":"onDragCancel";if(Pr){const $o=B.current[pn];$o==null||$o(Pr),x({type:pn,event:Pr})}})}}},[N]),Fu=m.useCallback((Me,Ht)=>(wt,fn)=>{const mn=wt.nativeEvent,nn=N.get(fn);if(F.current!==null||!nn||mn.dndKit||mn.defaultPrevented)return;const Vt={active:nn};Me(wt,Ht.options,Vt)===!0&&(mn.dndKit={capturedBy:Ht.sensor},F.current=fn,Rr(wt,Ht))},[N,Rr]),Yi=O$(h,Fu);H$(h),Nr(()=>{Y&&I===Gs.Initializing&&M(Gs.Initialized)},[Y,I]),m.useEffect(()=>{const{onDragMove:Me}=B.current,{active:Ht,activatorEvent:wt,collisions:fn,over:mn}=ie.current;if(!Ht||!wt)return;const nn={active:Ht,activatorEvent:wt,collisions:fn,delta:{x:ts.x,y:ts.y},over:mn};Kn.unstable_batchedUpdates(()=>{Me==null||Me(nn),x({type:"onDragMove",event:nn})})},[ts.x,ts.y]),m.useEffect(()=>{const{active:Me,activatorEvent:Ht,collisions:wt,droppableContainers:fn,scrollAdjustedTranslate:mn}=ie.current;if(!Me||F.current==null||!Ht||!mn)return;const{onDragOver:nn}=B.current,Vt=fn.get(Vu),Ps=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,bt={active:Me,activatorEvent:Ht,collisions:wt,delta:{x:mn.x,y:mn.y},over:Ps};Kn.unstable_batchedUpdates(()=>{Nl(Ps),nn==null||nn(bt),x({type:"onDragOver",event:bt})})},[Vu]),Nr(()=>{ie.current={activatorEvent:Z,active:R,activeNode:re,collisionRect:jr,collisions:Gi,droppableRects:te,draggableNodes:N,draggingNode:Ge,draggingNodeRect:je,droppableContainers:k,over:er,scrollableAncestors:Ke,scrollAdjustedTranslate:ts},P.current={initial:je,translated:jr}},[R,re,Gi,jr,N,Ge,je,te,k,er,Ke,ts]),R$({...K,delta:C,draggingRect:jr,pointerCoordinates:Tl,scrollableAncestors:Ke,scrollableAncestorRects:Zn});const zu=m.useMemo(()=>({active:R,activeNode:re,activeNodeRect:Y,activatorEvent:Z,collisions:Gi,containerNodeRect:se,dragOverlay:Te,draggableNodes:N,droppableContainers:k,droppableRects:te,over:er,measureDroppableContainers:J,scrollableAncestors:Ke,scrollableAncestorRects:Zn,measuringConfiguration:Q,measuringScheduled:X,windowRect:We}),[R,re,Y,Z,Gi,se,Te,N,k,te,er,J,Ke,Zn,Q,X,We]),Xi=m.useMemo(()=>({activatorEvent:Z,activators:Yi,active:R,activeNodeRect:Y,ariaDescribedById:{draggable:U},dispatch:w,draggableNodes:N,over:er,measureDroppableContainers:J}),[Z,Yi,R,Y,w,U,N,er,J]);return Ne.createElement(GA.Provider,{value:_},Ne.createElement(Du.Provider,{value:Xi},Ne.createElement(aj.Provider,{value:zu},Ne.createElement(Mm.Provider,{value:Cl},u)),Ne.createElement(Z$,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ne.createElement(t$,{...l,hiddenTextDescribedById:U}));function Uu(){const Me=(ae==null?void 0:ae.autoScrollEnabled)===!1,Ht=typeof c=="object"?c.enabled===!1:c===!1,wt=D&&!Me&&!Ht;return typeof c=="object"?{...c,enabled:wt}:{enabled:wt}}}),rB=m.createContext(null),SE="button",sB="Draggable";function iB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Pu(sB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Du),{role:y=SE,roleDescription:b="draggable",tabIndex:v=0}=s??{},E=(c==null?void 0:c.id)===e,w=m.useContext(E?Mm:rB),[x,_]=df(),[I,M]=df(),D=W$(o,e),T=tu(n);Nr(()=>(f.set(e,{id:e,key:i,node:x,activatorNode:I,data:T}),()=>{const C=f.get(e);C&&C.key===i&&f.delete(e)}),[f,e]);const N=m.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":E&&y===SE?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,y,v,E,b,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:N,isDragging:E,listeners:r?void 0:D,node:x,over:p,setNodeRef:_,setActivatorNodeRef:M,transform:w}}function cj(){return m.useContext(aj)}const oB="Droppable",aB={timeout:25};function uj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Pu(oB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Du),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),y=m.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:E}={...aB,...s},w=tu(v??r),x=m.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),y.current=null},E)},[E]),_=Dm({callback:x,disabled:b||!o}),I=m.useCallback((N,C)=>{_&&(C&&(_.unobserve(C),f.current=!1),N&&_.observe(N))},[_]),[M,D]=df(I),T=tu(e);return m.useEffect(()=>{!_||!M.current||(_.disconnect(),f.current=!1,_.observe(M.current))},[M,_]),m.useEffect(()=>(l({type:Tt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:M,rect:p,data:T}}),()=>l({type:Tt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:Tt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:D}}function lB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=hf(n);return!n&&!r&&l&&s(l),Nr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ne.createElement(Ne.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const cB={x:0,y:0,scaleX:1,scaleY:1};function uB(t){let{children:e}=t;return Ne.createElement(Du.Provider,{value:oj},Ne.createElement(Mm.Provider,{value:cB},e))}const dB={position:"fixed",touchAction:"none"},hB=t=>Pm(t)?"transform 250ms ease":void 0,fB=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=hB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...dB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Oi.Transform.toString(f),transformOrigin:s&&r?s$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ne.createElement(n,{className:o,style:p,ref:e},i)}),mB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},pB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Oi.Transform.toString(e)},{transform:Oi.Transform.toString(n)}]},gB={duration:250,easing:"ease",keyframes:pB,sideEffects:mB({styles:{active:{opacity:"0"}}})};function yB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return Rm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=ij(o);if(!u)return;const{transform:h}=hn(o).getComputedStyle(o),f=QA(h);if(!f)return;const p=typeof e=="function"?e:vB(e);return nj(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function vB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...gB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},y=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[b]=y,v=y[y.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const E=r==null?void 0:r({active:o,dragOverlay:l,...u}),w=l.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{w.onfinish=()=>{E==null||E(),x()}})}}let TE=0;function xB(t){return m.useMemo(()=>{if(t!=null)return TE++,TE},[t])}const wB=Ne.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:y,draggableNodes:b,droppableContainers:v,dragOverlay:E,over:w,measuringConfiguration:x,scrollableAncestors:_,scrollableAncestorRects:I,windowRect:M}=cj(),D=m.useContext(Mm),T=xB(f==null?void 0:f.id),N=lj(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:y,draggingNodeRect:E.rect,over:w,overlayNodeRect:E.rect,scrollableAncestors:_,scrollableAncestorRects:I,transform:D,windowRect:M}),C=z0(p),k=yB({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:x}),A=C?E.setRef:void 0;return Ne.createElement(uB,null,Ne.createElement(lB,{animation:k},f&&T?Ne.createElement(fB,{key:T,id:f.id,ref:A,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:C,style:{zIndex:u,...s},transform:N},n):null))});function dj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function bB(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function jd(t){return t!==null&&t>=0}function _B(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function EB(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const hj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=dj(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Rd={scaleX:1,scaleY:1},SB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Rd}:null}const c=TB(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Rd}:s<n&&s>=o?{x:0,y:l.height+c,...Rd}:{x:0,y:0,...Rd}};function TB(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fj="Sortable",mj=Ne.createContext({activeIndex:-1,containerId:fj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hj,disabled:{draggable:!1,droppable:!1}});function NB(t){let{children:e,id:n,items:r,strategy:s=hj,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=cj(),f=Pu(fj,n),p=l.rect!==null,y=m.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),b=o!=null,v=o?y.indexOf(o.id):-1,E=u?y.indexOf(u.id):-1,w=m.useRef(y),x=!_B(y,w.current),_=E!==-1&&v===-1||x,I=EB(i);Nr(()=>{x&&b&&h(y)},[x,y,b,h]),m.useEffect(()=>{w.current=y},[y]);const M=m.useMemo(()=>({activeIndex:v,containerId:f,disabled:I,disableTransforms:_,items:y,overIndex:E,useDragOverlay:p,sortedRects:bB(y,c),strategy:s}),[v,f,I.draggable,I.droppable,_,y,E,c,p,s]);return Ne.createElement(mj.Provider,{value:M},e)}const CB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return dj(n,r,s).indexOf(e)},kB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},IB={duration:200,easing:"ease"},pj="transform",AB=Oi.Transition.toString({property:pj,duration:0,easing:"linear"}),jB={roleDescription:"sortable"};function RB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return Nr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=_l(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function PB(t){let{animateLayoutChanges:e=kB,attributes:n,disabled:r,data:s,getNewIndex:i=CB,id:o,strategy:l,resizeObserverConfig:c,transition:u=IB}=t;const{items:h,containerId:f,activeIndex:p,disabled:y,disableTransforms:b,sortedRects:v,overIndex:E,useDragOverlay:w,strategy:x}=m.useContext(mj),_=DB(r,y),I=h.indexOf(o),M=m.useMemo(()=>({sortable:{containerId:f,index:I,items:h},...s}),[f,s,I,h]),D=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:T,node:N,isOver:C,setNodeRef:k}=uj({id:o,data:M,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...c}}),{active:A,activatorEvent:P,activeNodeRect:R,attributes:F,setNodeRef:ae,listeners:ee,isDragging:Z,over:O,setActivatorNodeRef:B,transform:U}=iB({id:o,data:M,attributes:{...jB,...n},disabled:_.draggable}),H=$7(k,ae),Q=!!A,te=Q&&!b&&jd(p)&&jd(E),J=!w&&Z,X=J&&te?U:null,L=te?X??(l??x)({rects:v,activeNodeRect:R,activeIndex:p,overIndex:E,index:I}):null,K=jd(p)&&jd(E)?i({id:o,items:h,activeIndex:p,overIndex:E}):I,ce=A==null?void 0:A.id,Y=m.useRef({activeId:ce,items:h,newIndex:K,containerId:f}),se=h!==Y.current.items,ie=e({active:A,containerId:f,isDragging:Z,isSorting:Q,id:o,index:I,items:h,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:u,wasDragging:Y.current.activeId!=null}),Se=RB({disabled:!ie,index:I,node:N,rect:T});return m.useEffect(()=>{Q&&Y.current.newIndex!==K&&(Y.current.newIndex=K),f!==Y.current.containerId&&(Y.current.containerId=f),h!==Y.current.items&&(Y.current.items=h)},[Q,K,f,h]),m.useEffect(()=>{if(ce===Y.current.activeId)return;if(ce!=null&&Y.current.activeId==null){Y.current.activeId=ce;return}const Ge=setTimeout(()=>{Y.current.activeId=ce},50);return()=>clearTimeout(Ge)},[ce]),{active:A,activeIndex:p,attributes:F,data:M,rect:T,index:I,newIndex:K,items:h,isOver:C,isSorting:Q,isDragging:Z,listeners:ee,node:N,overIndex:E,over:O,setNodeRef:H,setActivatorNodeRef:B,setDroppableNodeRef:k,setDraggableNodeRef:ae,transform:Se??L,transition:Te()};function Te(){if(Se||se&&Y.current.newIndex===I)return AB;if(!(J&&!Pm(P)||!u)&&(Q||ie))return Oi.Transition.toString({...u,property:pj})}}function DB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;const MB=gu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ar({className:t,variant:e,...n}){return a.jsx("div",{className:$(MB({variant:e}),t),...n})}function on({className:t,...e}){return a.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const Pe=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Pe.displayName="Card";const tt=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));tt.displayName="CardHeader";const rt=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));rt.displayName="CardTitle";const yn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));yn.displayName="CardDescription";const He=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));He.displayName="CardContent";const U0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));U0.displayName="CardFooter";function gj(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function yj(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function vj({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=PB({id:t.id}),h={transform:Oi.Transform.toString(l),transition:c},f=yj(t.dueDate),p=f!==null&&f<=1&&f>=0,y=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Pe,{ref:o,style:h,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",y&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Ar,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:b=>b.stopPropagation(),children:a.jsx(M5,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Ui,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:$(y&&"text-destructive",p&&!y&&"text-foreground font-medium"),children:gj(t.dueDate)}),y&&a.jsx(Vn,{className:"h-3.5 w-3.5 text-destructive"}),p&&!y&&a.jsx(ZN,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(Wa,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Wa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(vo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function OB({assignment:t,onClick:e}){const n=yj(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:$("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:gj(t.dueDate)}),r&&a.jsx(Vn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const $0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));$0.displayName="Textarea";var LB="Separator",NE="horizontal",VB=["horizontal","vertical"],xj=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=NE,...s}=t,i=FB(r)?r:NE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});xj.displayName=LB;function FB(t){return VB.includes(t)}var wj=xj;const hr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(wj,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));hr.displayName=wj.displayName;const zB=cA,UB=uA,bj=m.forwardRef(({className:t,...e},n)=>a.jsx(v0,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));bj.displayName=v0.displayName;const $B=gu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_j=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(UB,{children:[a.jsx(bj,{}),a.jsxs(x0,{ref:s,className:$($B({side:t}),e),...r,children:[n,a.jsxs(_0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(ko,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_j.displayName=x0.displayName;const Ej=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ej.displayName="SheetHeader";const Sj=m.forwardRef(({className:t,...e},n)=>a.jsx(w0,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));Sj.displayName=w0.displayName;const BB=m.forwardRef(({className:t,...e},n)=>a.jsx(b0,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));BB.displayName=b0.displayName;function HB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function WB(t){return t?` at ${t}`:""}function qB({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(Wa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function GB({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(ay,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(ay,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(U5,{className:"h-3.5 w-3.5"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(q5,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(nx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function B0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=wn(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",y=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(zB,{open:e,onOpenChange:n,children:a.jsxs(_j,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(Ej,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Ar,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(Sj,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:$(p&&"text-destructive"),children:[HB(t.dueDate),WB(t.dueTime)]}),p&&a.jsx(Vn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(hr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(hr,{})]}),a.jsx(qB,{assignment:t}),a.jsx(hr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx($5,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:l,onChange:b=>c(b.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:y,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(nx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(b=>a.jsx(GB,{note:b,onUpdate:(v,E)=>i(b.id,v,E),onDelete:()=>o(b.id,t.id)},b.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(hr,{}),a.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(ry,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function El(){const{refreshAccessToken:t,signOut:e}=it(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),a.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:a.jsx(qa,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),a.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),a.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[a.jsx(fe,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx(qa,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{className:"font-medium",children:"Signing In..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(HA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),a.jsx(fe,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),a.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[a.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function KB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=uj({id:t});return a.jsxs("div",{ref:o,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Ar,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(NB,{items:n.map(l=>l.id),strategy:SB,children:n.length>0?n.map(l=>{var c;return a.jsx(vj,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function QB(){var N;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o,error:l}=wn();it();const[c,u]=m.useState(null),[h,f]=m.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return a.jsx(El,{});const p=m.useRef(null),[y,b]=m.useState(!1),v=m.useRef({x:0,left:0}),E=n$(fE(F0,{activationConstraint:{distance:8}}),fE(L0)),w=t(),x=h?i.find(C=>C.id===h):null,_=C=>{f(C.active.id)},I=C=>{const{active:k,over:A}=C;if(f(null),!A)return;const P=k.id,R=A.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const F=i.find(ae=>ae.id===P);F&&F.systemStatus!==R&&(R==="in_progress"?e(P,"in_progress"):e(P,"backlog"))}},M=C=>{C.button===2&&p.current&&(C.preventDefault(),b(!0),v.current={x:C.pageX,left:p.current.scrollLeft})},D=m.useCallback(C=>{if(!y||!p.current)return;C.preventDefault();const A=(C.pageX-v.current.x)*1.5;p.current.scrollLeft=v.current.left-A},[y]),T=m.useCallback(()=>{b(!1)},[]);return m.useEffect(()=>(y?(window.addEventListener("mousemove",D),window.addEventListener("mouseup",T)):(window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",T)}),[y,D,T]),a.jsxs(a.Fragment,{children:[l&&l.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:C=>{C.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs(nB,{sensors:E,collisionDetection:l$,onDragStart:_,onDragEnd:I,children:[a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsx("div",{ref:p,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",y?"cursor-grabbing":"cursor-grab"),onMouseDown:M,onContextMenu:C=>C.preventDefault(),children:w.map(C=>a.jsx(KB,{id:C.id,title:C.title,assignments:C.assignments,onCardClick:u,notes:s},C.id))}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(oy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),a.jsx(wB,{children:x&&a.jsx(vj,{assignment:x,isDragging:!0,hasNotes:(((N=s.get(x.id))==null?void 0:N.length)||0)>0})})]}),a.jsx(B0,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function CE(t,[e,n]){return Math.min(n,Math.max(e,t))}var YB=m.createContext(void 0);function H0(t){const e=m.useContext(YB);return t||e||"ltr"}function Tj(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var XB=[" ","Enter","ArrowUp","ArrowDown"],JB=[" ","Enter"],Mu="Select",[Om,Lm,ZB]=Qv(Mu),[Sl,KW]=kr(Mu,[ZB,Gf]),Vm=Gf(),[eH,Hi]=Sl(Mu),[tH,nH]=Sl(Mu),Nj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:y,form:b}=t,v=Vm(e),[E,w]=m.useState(null),[x,_]=m.useState(null),[I,M]=m.useState(!1),D=H0(u),[T=!1,N]=Si({prop:r,defaultProp:s,onChange:i}),[C,k]=Si({prop:o,defaultProp:l,onChange:c}),A=m.useRef(null),P=E?b||!!E.closest("form"):!0,[R,F]=m.useState(new Set),ae=Array.from(R).map(ee=>ee.props.value).join(";");return a.jsx(zC,{...v,children:a.jsxs(eH,{required:y,scope:e,trigger:E,onTriggerChange:w,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:I,onValueNodeHasChildrenChange:M,contentId:ps(),value:C,onValueChange:k,open:T,onOpenChange:N,dir:D,triggerPointerDownPosRef:A,disabled:p,children:[a.jsx(Om.Provider,{scope:e,children:a.jsx(tH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(ee=>{F(Z=>new Set(Z).add(ee))},[]),onNativeOptionRemove:m.useCallback(ee=>{F(Z=>{const O=new Set(Z);return O.delete(ee),O})},[]),children:n})}),P?a.jsxs(Xj,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:ee=>k(ee.target.value),disabled:p,form:b,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(R)]},ae):null]})})};Nj.displayName=Mu;var Cj="SelectTrigger",kj=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Vm(n),o=Hi(Cj,n),l=o.disabled||r,c=Be(e,o.onTriggerChange),u=Lm(n),h=m.useRef("touch"),[f,p,y]=Jj(v=>{const E=u().filter(_=>!_.disabled),w=E.find(_=>_.value===o.value),x=Zj(E,v,w);x!==void 0&&o.onValueChange(x.value)}),b=v=>{l||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(UC,{asChild:!0,...i,children:a.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Yj(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&b(v)}),onPointerDown:pe(s.onPointerDown,v=>{h.current=v.pointerType;const E=v.target;E.hasPointerCapture(v.pointerId)&&E.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:pe(s.onKeyDown,v=>{const E=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(E&&v.key===" ")&&XB.includes(v.key)&&(b(),v.preventDefault())})})})});kj.displayName=Cj;var Ij="SelectValue",Aj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Hi(Ij,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Be(e,c.onValueNodeChange);return kt(()=>{u(h)},[u,h]),a.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:Yj(c.value)?a.jsx(a.Fragment,{children:o}):i})});Aj.displayName=Ij;var rH="SelectIcon",jj=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});jj.displayName=rH;var sH="SelectPortal",Rj=t=>a.jsx(mu,{asChild:!0,...t});Rj.displayName=sH;var Oo="SelectContent",Pj=m.forwardRef((t,e)=>{const n=Hi(Oo,t.__scopeSelect),[r,s]=m.useState();if(kt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Kn.createPortal(a.jsx(Dj,{scope:t.__scopeSelect,children:a.jsx(Om.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(Mj,{...t,ref:e})});Pj.displayName=Oo;var sr=10,[Dj,Wi]=Sl(Oo),iH="SelectContentImpl",oH=Ha("SelectContent.RemoveScroll"),Mj=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E,...w}=t,x=Hi(Oo,n),[_,I]=m.useState(null),[M,D]=m.useState(null),T=Be(e,L=>I(L)),[N,C]=m.useState(null),[k,A]=m.useState(null),P=Lm(n),[R,F]=m.useState(!1),ae=m.useRef(!1);m.useEffect(()=>{if(_)return W2(_)},[_]),O2();const ee=m.useCallback(L=>{const[K,...ce]=P().map(ie=>ie.ref.current),[Y]=ce.slice(-1),se=document.activeElement;for(const ie of L)if(ie===se||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===K&&M&&(M.scrollTop=0),ie===Y&&M&&(M.scrollTop=M.scrollHeight),ie==null||ie.focus(),document.activeElement!==se))return},[P,M]),Z=m.useCallback(()=>ee([N,_]),[ee,N,_]);m.useEffect(()=>{R&&Z()},[R,Z]);const{onOpenChange:O,triggerPointerDownPosRef:B}=x;m.useEffect(()=>{if(_){let L={x:0,y:0};const K=Y=>{var se,ie;L={x:Math.abs(Math.round(Y.pageX)-(((se=B.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((ie=B.current)==null?void 0:ie.y)??0))}},ce=Y=>{L.x<=10&&L.y<=10?Y.preventDefault():_.contains(Y.target)||O(!1),document.removeEventListener("pointermove",K),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",ce,{capture:!0})}}},[_,O,B]),m.useEffect(()=>{const L=()=>O(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[O]);const[U,H]=Jj(L=>{const K=P().filter(se=>!se.disabled),ce=K.find(se=>se.ref.current===document.activeElement),Y=Zj(K,L,ce);Y&&setTimeout(()=>Y.ref.current.focus())}),Q=m.useCallback((L,K,ce)=>{const Y=!ae.current&&!ce;(x.value!==void 0&&x.value===K||Y)&&(C(L),Y&&(ae.current=!0))},[x.value]),te=m.useCallback(()=>_==null?void 0:_.focus(),[_]),J=m.useCallback((L,K,ce)=>{const Y=!ae.current&&!ce;(x.value!==void 0&&x.value===K||Y)&&A(L)},[x.value]),X=r==="popper"?Hy:Oj,re=X===Hy?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E}:{};return a.jsx(Dj,{scope:n,content:_,viewport:M,onViewportChange:D,itemRefCallback:Q,selectedItem:N,onItemLeave:te,itemTextRefCallback:J,focusSelectedItem:Z,selectedItemText:k,position:r,isPositioned:R,searchRef:U,children:a.jsx(f0,{as:oH,allowPinchZoom:!0,children:a.jsx(h0,{asChild:!0,trapped:x.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:pe(s,L=>{var K;(K=x.trigger)==null||K.focus({preventScroll:!0}),L.preventDefault()}),children:a.jsx(fu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(X,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:L=>L.preventDefault(),...w,...re,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:pe(w.onKeyDown,L=>{const K=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!K&&L.key.length===1&&H(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let Y=P().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(L.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const se=L.target,ie=Y.indexOf(se);Y=Y.slice(ie+1)}setTimeout(()=>ee(Y)),L.preventDefault()}})})})})})})});Mj.displayName=iH;var aH="SelectItemAlignedPosition",Oj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Hi(Oo,n),o=Wi(Oo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Be(e,T=>h(T)),p=Lm(n),y=m.useRef(!1),b=m.useRef(!0),{viewport:v,selectedItem:E,selectedItemText:w,focusSelectedItem:x}=o,_=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&E&&w){const T=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),k=w.getBoundingClientRect();if(i.dir!=="rtl"){const se=k.left-N.left,ie=C.left-se,Se=T.left-ie,Te=T.width+Se,Ge=Math.max(Te,N.width),je=window.innerWidth-sr,Ve=CE(ie,[sr,Math.max(sr,je-Ge)]);l.style.minWidth=Te+"px",l.style.left=Ve+"px"}else{const se=N.right-k.right,ie=window.innerWidth-C.right-se,Se=window.innerWidth-T.right-ie,Te=T.width+Se,Ge=Math.max(Te,N.width),je=window.innerWidth-sr,Ve=CE(ie,[sr,Math.max(sr,je-Ge)]);l.style.minWidth=Te+"px",l.style.right=Ve+"px"}const A=p(),P=window.innerHeight-sr*2,R=v.scrollHeight,F=window.getComputedStyle(u),ae=parseInt(F.borderTopWidth,10),ee=parseInt(F.paddingTop,10),Z=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),B=ae+ee+R+O+Z,U=Math.min(E.offsetHeight*5,B),H=window.getComputedStyle(v),Q=parseInt(H.paddingTop,10),te=parseInt(H.paddingBottom,10),J=T.top+T.height/2-sr,X=P-J,re=E.offsetHeight/2,L=E.offsetTop+re,K=ae+ee+L,ce=B-K;if(K<=J){const se=A.length>0&&E===A[A.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-v.offsetTop-v.offsetHeight,Se=Math.max(X,re+(se?te:0)+ie+Z),Te=K+Se;l.style.height=Te+"px"}else{const se=A.length>0&&E===A[0].ref.current;l.style.top="0px";const Se=Math.max(J,ae+v.offsetTop+(se?Q:0)+re)+ce;l.style.height=Se+"px",v.scrollTop=K-J+v.offsetTop}l.style.margin=`${sr}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,E,w,i.dir,r]);kt(()=>_(),[_]);const[I,M]=m.useState();kt(()=>{u&&M(window.getComputedStyle(u).zIndex)},[u]);const D=m.useCallback(T=>{T&&b.current===!0&&(_(),x==null||x(),b.current=!1)},[_,x]);return a.jsx(cH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:a.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Oj.displayName=aH;var lH="SelectPopperPosition",Hy=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=sr,...i}=t,o=Vm(n);return a.jsx($C,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hy.displayName=lH;var[cH,W0]=Sl(Oo,{}),Wy="SelectViewport",Lj=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Wi(Wy,n),o=W0(Wy,n),l=Be(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Om.Slot,{scope:n,children:a.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const b=window.innerHeight-sr*2,v=parseFloat(f.style.minHeight),E=parseFloat(f.style.height),w=Math.max(v,E);if(w<b){const x=w+y,_=Math.min(b,x),I=x-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Lj.displayName=Wy;var Vj="SelectGroup",[uH,dH]=Sl(Vj),hH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ps();return a.jsx(uH,{scope:n,id:s,children:a.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});hH.displayName=Vj;var Fj="SelectLabel",zj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=dH(Fj,n);return a.jsx(xe.div,{id:s.id,...r,ref:e})});zj.displayName=Fj;var yf="SelectItem",[fH,Uj]=Sl(yf),$j=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Hi(yf,n),c=Wi(yf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,y]=m.useState(!1),b=Be(e,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,s)}),v=ps(),E=m.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(fH,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:m.useCallback(x=>{f(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(Om.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:pe(o.onFocus,()=>y(!0)),onBlur:pe(o.onBlur,()=>y(!1)),onClick:pe(o.onClick,()=>{E.current!=="mouse"&&w()}),onPointerUp:pe(o.onPointerUp,()=>{E.current==="mouse"&&w()}),onPointerDown:pe(o.onPointerDown,x=>{E.current=x.pointerType}),onPointerMove:pe(o.onPointerMove,x=>{var _;E.current=x.pointerType,s?(_=c.onItemLeave)==null||_.call(c):E.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:pe(o.onKeyDown,x=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&x.key===" "||(JB.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});$j.displayName=yf;var tc="SelectItemText",Bj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Hi(tc,n),l=Wi(tc,n),c=Uj(tc,n),u=nH(tc,n),[h,f]=m.useState(null),p=Be(e,w=>f(w),c.onItemTextChange,w=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,w,c.value,c.disabled)}),y=h==null?void 0:h.textContent,b=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:E}=u;return kt(()=>(v(b),()=>E(b)),[v,E,b]),a.jsxs(a.Fragment,{children:[a.jsx(xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kn.createPortal(i.children,o.valueNode):null]})});Bj.displayName=tc;var Hj="SelectItemIndicator",Wj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Uj(Hj,n).isSelected?a.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});Wj.displayName=Hj;var qy="SelectScrollUpButton",qj=m.forwardRef((t,e)=>{const n=Wi(qy,t.__scopeSelect),r=W0(qy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Kj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});qj.displayName=qy;var Gy="SelectScrollDownButton",Gj=m.forwardRef((t,e)=>{const n=Wi(Gy,t.__scopeSelect),r=W0(Gy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Kj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Gj.displayName=Gy;var Kj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Wi("SelectScrollButton",n),o=m.useRef(null),l=Lm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),kt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),mH="SelectSeparator",Qj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});Qj.displayName=mH;var Ky="SelectArrow",pH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Vm(n),i=Hi(Ky,n),o=Wi(Ky,n);return i.open&&o.position==="popper"?a.jsx(BC,{...s,...r,ref:e}):null});pH.displayName=Ky;function Yj(t){return t===""||t===void 0}var Xj=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Be(e,s),o=Tj(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(pu,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});Xj.displayName="BubbleSelect";function Jj(t){const e=cn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Zj(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=gH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function gH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yH=Nj,eR=kj,vH=Aj,xH=jj,wH=Rj,tR=Pj,bH=Lj,nR=zj,rR=$j,_H=Bj,EH=Wj,sR=qj,iR=Gj,oR=Qj;const vf=yH,xf=vH,ru=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(eR,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(xH,{asChild:!0,children:a.jsx(XN,{className:"h-4 w-4 opacity-50"})})]}));ru.displayName=eR.displayName;const aR=m.forwardRef(({className:t,...e},n)=>a.jsx(sR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(j5,{className:"h-4 w-4"})}));aR.displayName=sR.displayName;const lR=m.forwardRef(({className:t,...e},n)=>a.jsx(iR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(XN,{className:"h-4 w-4"})}));lR.displayName=iR.displayName;const su=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(wH,{children:a.jsxs(tR,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(aR,{}),a.jsx(bH,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(lR,{})]})}));su.displayName=tR.displayName;const SH=m.forwardRef(({className:t,...e},n)=>a.jsx(nR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));SH.displayName=nR.displayName;const St=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(rR,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(EH,{children:a.jsx(Mh,{className:"h-4 w-4"})})}),a.jsx(_H,{children:e})]}));St.displayName=rR.displayName;const TH=m.forwardRef(({className:t,...e},n)=>a.jsx(oR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));TH.displayName=oR.displayName;function NH(t){return R0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const Pd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},CH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},kH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},sg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,kE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function IH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=wn();it();const[o,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,y]=m.useState("timeline"),[b,v]=m.useState(1),[E,w]=m.useState(!1),[x]=m.useState([]),_=m.useMemo(()=>{let C=[...s,...x];return o&&(C=C.filter(k=>k.courseId===o)),c&&(C=C.filter(k=>k.systemStatus===c)),C},[s,x,o,c]),I=()=>{l(null),u(null)},M=o||c,D=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({x:0,left:0}),F=60*b,{earliestDate:ae,latestDate:ee,initialScrollPosition:Z}=m.useMemo(()=>{const L=new Date;L.setHours(0,0,0,0);let K=new Date,ce=new Date;if(_.length>0){const je=_.flatMap(Ve=>{const Lt=[];return Ve.dueDate&&Lt.push(new Date(Ve.dueDate)),Ve.createdAt&&Lt.push(new Date(Ve.createdAt)),Lt});je.length>0&&(K=new Date(Math.min(...je.map(Ve=>Ve.getTime()))),ce=new Date(Math.max(...je.map(Ve=>Ve.getTime()))))}const Y=new Date(K);Y.setDate(Y.getDate()-30);const se=new Date(ce);se.setDate(se.getDate()+30);let ie=L;const Se=_.filter(je=>je.dueDate&&new Date(je.dueDate)>=L).sort((je,Ve)=>new Date(je.dueDate).getTime()-new Date(Ve.dueDate).getTime());Se.length>0&&(ie=new Date(Se[0].dueDate));const Ge=Math.ceil((ie.getTime()-Y.getTime())/(1e3*3600*24))*F+F/2-window.innerWidth/2;return{earliestDate:Y,latestDate:se,initialScrollPosition:Math.max(0,Ge)}},[_,F]),O=m.useMemo(()=>CH(ae,ee),[ae,ee]);m.useEffect(()=>{C.current&&(C.current.scrollLeft=Z)},[Z]);const B=L=>{L.button===2&&C.current&&(L.preventDefault(),A(!0),P.current={x:L.pageX,left:C.current.scrollLeft})},U=m.useCallback(L=>{if(!k||!C.current)return;L.preventDefault();const ce=(L.pageX-P.current.x)*1.5;C.current.scrollLeft=P.current.left-ce},[k]),H=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",U),window.addEventListener("mouseup",H)):(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",H)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",H)}),[k,U,H]);const[Q,te]=m.useState(!1),[J,X]=m.useState(!1),re=m.useRef(null);return m.useEffect(()=>{const L=()=>{if(re.current){const{scrollHeight:ce,clientHeight:Y,scrollTop:se}=re.current;te(ce>Y),X(se+Y>=ce-10)}};L();const K=re.current;return K==null||K.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{K==null||K.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[_,E]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:L=>{C.current=L,re.current=L},className:$("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:L=>L.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${O.length*F}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:O.map((L,K)=>{const ce=kE(L);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:F},children:[a.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",ce?"text-foreground":"text-muted-foreground"),children:L.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ce?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:L.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},K)})}),a.jsxs("div",{className:"relative pt-6",style:{minHeight:E?`${Math.max(300,_.filter(L=>L.dueDate).length*40)}px`:`${Math.max(400,_.filter(L=>L.dueDate).length*60)}px`},children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:O.map((L,K)=>{const ce=kE(L);return a.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",ce?"bg-accent/50":""),style:{width:F},children:ce&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},K)})}),a.jsx("div",{className:$("px-0 relative z-10 mt-2",E?"space-y-1":"space-y-3"),children:_.filter(L=>L.dueDate).map(L=>{const K=e.find(Rs=>Rs.id===L.courseId),ce=K==null?void 0:K.color,Y=L.systemStatus==="submitted"||L.systemStatus==="graded",se=L.createdAt?new Date(L.createdAt):new Date,ie=new Date(L.dueDate),Se=(se.getTime()-ae.getTime())/(1e3*3600*24),Te=(ie.getTime()-se.getTime())/(1e3*3600*24),Ge=Math.max(0,Se*F),je=Math.max(F,Te*F),Ve={left:`${Ge}px`,width:`${je}px`,minWidth:E?"100px":"140px",backgroundColor:Y?void 0:ce,borderColor:Y?void 0:ce?"rgba(0,0,0,0.1)":void 0};Pd[L.systemStatus]||Pd.backlog;const Lt="bg-green-100/80 border-green-300 text-green-800",We="bg-card border shadow-sm "+(ce?"text-slate-900":"text-foreground"),Ke=E?"h-8":"h-12",Zn=E?"h-9":"h-14";return a.jsx("div",{className:$("relative group",Zn),children:a.jsxs("div",{onClick:()=>f(L),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Ke,E?"px-2":"px-3",Y?Lt:We),style:Ve,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",E?"text-[10px]":"text-xs"),children:[L.courseId==="system"&&a.jsx(tx,{className:$("inline-block",E?"h-2.5 w-2.5":"h-3 w-3")}),Y&&a.jsx(Mh,{className:$("inline-block mr-0.5",E?"h-2.5 w-2.5":"h-3 w-3")}),L.title]})}),!E&&a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:L.courseName})})]})},L.id)})})]})]})}),Q&&!J&&_.length>0&&a.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(ab,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),a.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),a.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const L=C.current,K=(L==null?void 0:L.scrollLeft)||0,ce=(L==null?void 0:L.scrollTop)||0,Y=Math.min(2,b+.25);v(Y),Y>.75&&w(!1),setTimeout(()=>{L&&(L.scrollLeft=K*(Y/b),L.scrollTop=ce)},0)},disabled:b>=2,title:"Zoom In (Normal View)",children:a.jsx(K5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const L=C.current,K=(L==null?void 0:L.scrollLeft)||0,ce=(L==null?void 0:L.scrollTop)||0,Y=Math.max(.5,b-.25);v(Y),Y<=.75&&w(!0),setTimeout(()=>{L&&(L.scrollLeft=K*(Y/b),L.scrollTop=ce)},0)},disabled:b<=.5,title:"Zoom Out (Compact View)",children:a.jsx(Q5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[a.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(b*100),"%"]}),E&&a.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(oy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},T=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({y:0,top:0}),R=m.useRef({}),[F,ae]=m.useState(!1),{startMonth:ee,endMonth:Z}=m.useMemo(()=>{let X=new Date,re=new Date;if(_.length>0){const ce=_.filter(Y=>Y.dueDate).map(Y=>new Date(Y.dueDate));ce.length>0&&(X=new Date(Math.min(...ce.map(Y=>Y.getTime()))),re=new Date(Math.max(...ce.map(Y=>Y.getTime()))))}const L=new Date(X);L.setMonth(L.getMonth()-2),L.setDate(1);const K=new Date(re);return K.setMonth(K.getMonth()+4),K.setDate(1),{startMonth:L,endMonth:K}},[_]),O=m.useMemo(()=>kH(ee,Z),[ee,Z]),B=m.useCallback(()=>{var ce;const X=sg(new Date),re=R.current[X];if(!re){ae(!0);return}const L=re.getBoundingClientRect(),K=(ce=C.current)==null?void 0:ce.getBoundingClientRect();K&&ae(L.bottom<K.top||L.top>K.bottom)},[O]);m.useEffect(()=>{const X=C.current;return X&&(X.addEventListener("scroll",B),B()),()=>X==null?void 0:X.removeEventListener("scroll",B)},[B]),m.useEffect(()=>{setTimeout(()=>U(),100)},[]);const U=()=>{const X=sg(new Date),re=R.current[X];re&&re.scrollIntoView({behavior:"smooth",block:"center"})},H=X=>{X.button===2&&C.current&&(X.preventDefault(),A(!0),P.current={y:X.pageY,top:C.current.scrollTop})},Q=m.useCallback(X=>{if(!k||!C.current)return;X.preventDefault();const L=(X.pageY-P.current.y)*1.5;C.current.scrollTop=P.current.top-L},[k]),te=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",te)):(window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",te)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",te)}),[k,Q,te]);const J=X=>{const re=X.getFullYear(),L=X.getMonth(),K=new Date(re,L,1),ce=new Date(re,L+1,0),Y=[];for(let se=0;se<K.getDay();se++)Y.push({date:new Date(re,L,-K.getDay()+1+se),isCurrentMonth:!1});for(let se=1;se<=ce.getDate();se++)Y.push({date:new Date(re,L,se),isCurrentMonth:!0});for(;Y.length%7!==0;){const se=Y.length-(K.getDay()+ce.getDate())+1,ie=new Date(re,L+1,se);Y.push({date:ie,isCurrentMonth:!1})}return Y};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[F&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(ab,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:C,className:$("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:H,onContextMenu:X=>X.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:O.map(X=>{const re=J(X),L=sg(X);return a.jsxs("div",{ref:K=>R.current[L]=K,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:X.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(K=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:K},K))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:re.map((K,ce)=>{const Y=_.filter(ie=>{if(!ie.dueDate)return!1;const Se=new Date(ie.dueDate);Se.setHours(0,0,0,0);const Te=new Date(K.date);return Te.setHours(0,0,0,0),Te.toDateString()===Se.toDateString()}),se=K.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",K.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",se&&K.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:K.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:Y.map(ie=>{const Se=Pd[ie.systemStatus]||Pd.backlog;return a.jsx("div",{onClick:Te=>{Te.stopPropagation(),f(ie)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Se.color,Se.border),title:ie.title,children:ie.title},ie.id)})})]},ce)})})]},L)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(oy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(wn().error&&wn().error.toLowerCase().includes("session")){const{assignments:C,courses:k}=wn();if(!C.length&&!k.length)return a.jsx(El,{})}const{error:N}=wn();return a.jsxs(a.Fragment,{children:[N&&N.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx(Yr,{href:"/auth/refresh",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[a.jsx("div",{className:"border-b px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Timeline"}),a.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0",children:[a.jsxs("button",{onClick:()=>y("timeline"),className:$("px-3 py-1 rounded-md text-xs font-medium transition-all flex items-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx(cb,{className:"h-3.5 w-3.5"}),"Timeline"]}),a.jsxs("button",{onClick:()=>y("calendar"),className:$("px-3 py-1 rounded-md text-xs font-medium transition-all flex items-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx($c,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),a.jsxs("div",{className:"px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto",children:[a.jsx(cb,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a.jsxs(vf,{value:o||"all",onValueChange:C=>l(C==="all"?null:C),children:[a.jsx(ru,{className:"w-[180px] sm:w-[240px]","data-testid":"select-course-filter",children:a.jsx(xf,{placeholder:"All Courses"})}),a.jsxs(su,{children:[a.jsx(St,{value:"all",children:"All Courses"}),e.map(C=>a.jsx(St,{value:C.id,children:C.name},C.id))]})]}),a.jsxs(vf,{value:c||"all",onValueChange:C=>u(C==="all"?null:C),children:[a.jsx(ru,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:a.jsx(xf,{placeholder:"All Status"})}),a.jsxs(su,{children:[a.jsx(St,{value:"all",children:"All Status"}),a.jsx(St,{value:"backlog",children:"Backlog"}),a.jsx(St,{value:"in_progress",children:"In Progress"}),a.jsx(St,{value:"submitted",children:"Submitted"}),a.jsx(St,{value:"graded",children:"Graded"}),a.jsx(St,{value:"overdue",children:"Overdue"})]})]}),M&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:I,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[a.jsx(ko,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),a.jsx("div",{className:"ml-auto",children:a.jsx(Xf,{children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx(Yr,{href:"/settings/integrations",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[a.jsx(NH,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),a.jsxs(xu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?a.jsx(D,{}):a.jsx(T,{})})]}),a.jsx(B0,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}const IE="attendance_configs",qn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await $t(ze(Oe,IE,t),n)},async getCourseConfig(t){try{const e=ze(Oe,IE,t),n=await Sr(e);return n.exists()?n.data():null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var E;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=r.toUpperCase().charCodeAt(0)-65,o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,l=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw l.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):l.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const u=(await l.json()).values;if(!u||u.length<2)throw new Error("Sheet is empty or invalid format.");const h=u[0],f=u.find(w=>{var _;return((_=w[s])==null?void 0:_.toLowerCase().trim())===n.toLowerCase().trim()});if(!f)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let p=0,y=0;const b=[];for(let w=1;w<h.length;w++){const x=h[w],_=(E=f[w])==null?void 0:E.toUpperCase().trim();if(!x)continue;let I="Unknown";_==="P"||_==="PRESENT"||_==="1"?(I="Present",y++,p++):(_==="A"||_==="ABSENT"||_==="0")&&(I="Absent",p++),I!=="Unknown"&&b.push({date:x,status:I})}const v=p===0?0:Math.round(y/p*100);return{courseId:t,stats:{totalClasses:p,attendedClasses:y,percentage:v},history:b.reverse()}}},ai={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:ex,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:G5,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:sx,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:aC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:sC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:ay,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:$c,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:JN,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},AH=Object.keys(ai);function jH({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=ai[t],[i,o]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(Xf,{delayDuration:0,children:a.jsxs(Jf,{open:i,onOpenChange:o,children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),o(!i)},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(JC,{children:a.jsxs(xu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>o(!1),children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function nc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx(jH,{badgeId:l,size:n},l)),o>0&&a.jsx(Xf,{delayDuration:0,children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(JC,{children:a.jsx(xu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=ai[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function RH(){const{user:t}=it(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=As(ze(Oe,"leaderboards","all-courses","students",t.uid),p=>{var y;if(p.exists()){const b=p.data();n(b.badges||[]),s(b.loginStreak||0),o(((y=b.processedAssignmentIds)==null?void 0:y.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:ai["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:ai["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:ai["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:ai["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,y)=>y.percentage>p.percentage?y:p)},h=e.length===0?u():null;return a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),a.jsx(nC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-8 rounded-full"}),a.jsx(on,{className:"h-3 w-20"})]}):e.length>0?a.jsx("div",{className:"flex flex-col justify-between h-full gap-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(nc,{badges:e,limit:3,size:"md",className:"mt-2"})]})}):h?a.jsx("div",{className:"flex flex-col gap-3 justify-between h-full",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(ex,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(aC,{className:"h-5 w-5 text-blue-500"}):a.jsx($c,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]})}):a.jsx("div",{className:"flex flex-col gap-2 justify-between h-full",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."})})})]})}function PH(){const{user:t}=it(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=As(ze(Oe,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(ex,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function DH({courses:t}){const{user:e,accessToken:n}=it(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await qn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const y=qn.extractSheetId(p.sheetUrl);if(!y)return;const b=await qn.fetchAttendanceFromSheet(y,n,e.email,p.emailColumn||"A");b&&(c+=b.stats.attendedClasses,u+=b.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(Pe,{"data-testid":"card-attendance-overall",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(lC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:$("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),a.jsx("p",{className:"text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),a.jsx(Yr,{href:"/attendance",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function Dd({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return a.jsxs(Pe,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[a.jsx(tt,{className:$("pb-3",i.bg),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rt,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),a.jsx("div",{className:$("p-2 rounded-lg",i.iconBg),children:a.jsx(n,{className:$("h-4 w-4",i.iconColor)})})]})}),a.jsx(He,{className:"pt-2",children:a.jsx("div",{className:$("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function MH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Pe,{className:"overflow-hidden",children:[a.jsx(tt,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(rt,{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(Ui,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),a.jsxs(Ar,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),a.jsx(He,{className:"pt-4",children:a.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[a.jsx("span",{className:$("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),a.jsx("div",{className:"relative w-full",children:a.jsx("div",{className:$("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),a.jsx("span",{className:$("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function OH({courses:t,assignments:e}){const{user:n}=it(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,y=t.map(x=>x.id),b=new Set(e.map(x=>x.id)),v=f.filter(x=>{const _=x.email||"",I=x.emailDomain||(_.includes("@")?_.split("@")[1]:""),M=x.enrolledCourseIds||[],D=x.processedAssignmentIds||[],T=p&&I&&p===I,N=y.some(A=>M.includes(A)),k=!I&&D.some(A=>b.has(A));return x.id===n.uid?!0:T&&N||k});v.sort((x,_)=>_.totalXP-x.totalXP);const E=v.length;if(E===0){s(null),o(!1);return}const w=v.findIndex(x=>x.id===n.uid);if(w!==-1){const x=w+1,_=Math.round((E-x+1)/E*100),I=v[w];s({rank:x,total:E,percentile:_,xp:I.totalXP||0,badges:I.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=l0(e0(Oe,"leaderboards",f,"students"),c0("totalXP","desc")),y=As(p,b=>{b.docs.forEach(v=>{const E=v.data(),w={id:v.id,...E,email:E.email||"",emailDomain:E.emailDomain||(E.email?E.email.split("@")[1]:""),enrolledCourseIds:E.enrolledCourseIds||E.subjects||[],processedAssignmentIds:E.processedAssignmentIds||E.completedTasks||[],totalXP:E.totalXP||E.xp||0,badges:E.badges||[]},x=u.get(v.id);(!x||w.totalXP>=x.totalXP)&&u.set(v.id,w)}),h()},b=>{console.error(`Error fetching leaderboard source ${f}:`,b),h()});c.push(y)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Pe,{"data-testid":"card-class-rank",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(sx,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(Yr,{href:"/leaderboard",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function LH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:o}=wn();it();const[l,c]=m.useState(null),u=t();return o&&o.toLowerCase().includes("session")&&!(r.length>0||i.length>0||u.upcoming7Days>0)?a.jsx(El,{}):a.jsxs(a.Fragment,{children:[o&&o.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:a.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),a.jsx(Yr,{href:"/auth/refresh",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),a.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:a.jsx(tC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",a.jsxs(Ar,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",a.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(Yr,{href:"/timeline",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",a.jsx(T5,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Dd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:ZN,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Dd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Ui}),a.jsx(Dd,{title:"Overdue",value:u.overdue,icon:Vn,variant:u.overdue>0?"danger":"default"}),a.jsx(Dd,{title:"Total Active",value:u.totalActive,icon:Wa}),a.jsx(OH,{courses:i,assignments:r}),a.jsx(DH,{courses:i}),a.jsx(RH,{}),a.jsx(PH,{})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(MH,{data:u.weeklyWorkload}),a.jsxs(Pe,{children:[a.jsx(tt,{className:"pb-2",children:a.jsx(rt,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(He,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(OB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(Wa,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx(B0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function VH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=wn();it();const[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=Am(),f=t.find(b=>b.id===o),y=e.filter(b=>b.courseId===o).flatMap(b=>b.materials?b.materials.flatMap(v=>{let E=[];if(v.driveFile){const w=v.driveFile.driveFile;let x=w.thumbnailUrl||w.iconUrl||null;!x&&w.id&&(x=`https://drive.google.com/thumbnail?id=${w.id}&sz=w800`),E.push({id:w.id,title:w.title,link:w.alternateLink,thumbnail:x,type:"driveFile"})}return E}):[]).filter(b=>!!b.title);return n&&t.length===0?a.jsx(FH,{}):i&&t.length===0?a.jsx("div",{className:"h-full flex items-center justify-center p-4",children:a.jsx(El,{})}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:b=>{b.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(b=>a.jsxs("button",{onClick:()=>l(b.id),className:$("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===b.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===b.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(ub,{className:$("h-4 w-4",o===b.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:b.name}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium",o===b.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:b.section||"No Section"})]}),a.jsx(A5,{className:$("h-4 w-4 transition-transform",o===b.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},b.id))})]}),a.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx($f,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Ar,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[y.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx(eC,{className:"h-4 w-4"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(z5,{className:"h-4 w-4"})})]})]})]}),y.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:y.map((b,v)=>{var M;const E=((M=b.title)==null?void 0:M.toLowerCase())||"",w=E.endsWith(".pdf"),x=E.endsWith(".ppt")||E.endsWith(".pptx");let _="bg-zinc-100 text-zinc-600",I="FILE";return w?(_="bg-red-100 text-red-600",I="PDF DOCUMENT"):x?(_="bg-orange-100 text-orange-600",I="PRESENTATION"):(_="bg-blue-100 text-blue-600",I="DOCUMENT"),a.jsxs(Pe,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(tt,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",_),children:a.jsx(vo,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:b.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:I})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[b.thumbnail&&a.jsx("img",{src:b.thumbnail.includes("s220")?b.thumbnail.replace("s220","s800"):b.thumbnail,alt:b.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:D=>{var N;console.log("Thumbnail failed to load:",b.thumbnail),D.currentTarget.style.display="none";const T=(N=D.currentTarget.parentElement)==null?void 0:N.querySelector(".fallback-viewer");T&&(T.classList.remove("hidden"),T.classList.add("block"))}}),a.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",b.thumbnail?"hidden":"block"),children:a.jsx(zH,{type:w?"pdf":x?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(fe,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(ry,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${b.id}-${v}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:y.map((b,v)=>{var M;const E=((M=b.title)==null?void 0:M.toLowerCase())||"",w=E.endsWith(".pdf"),x=E.endsWith(".ppt")||E.endsWith(".pptx");let _="bg-zinc-100 text-zinc-600",I="File";return w?(_="bg-red-100 text-red-600",I="PDF Document"):x?(_="bg-orange-100 text-orange-600",I="Presentation"):(_="bg-blue-100 text-blue-600",I="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[b.thumbnail?a.jsx("img",{src:b.thumbnail.includes("s220")?b.thumbnail.replace("s220","s400"):b.thumbnail,alt:b.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:D=>{D.currentTarget.style.display="none";const T=D.currentTarget.nextElementSibling;T&&T.classList.remove("hidden")}}):null,a.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",b.thumbnail?"hidden":"flex",_),children:a.jsx(vo,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:b.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[I,"  Read Only"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(ry,{className:"h-4 w-4"})]})})]},`${b.id}-${v}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(ub,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(vo,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function FH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(on,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(on,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(on,{className:"h-4 w-20"}),a.jsx(on,{className:"h-10 w-80"}),a.jsx(on,{className:"h-4 w-64"})]}),a.jsx(on,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(on,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function zH({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(vo,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(vo,{className:"h-40 w-40"})})]})}function UH({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=AH.map(c=>ai[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(iy,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,y=0;if(c.id==="perfect-week"?(p=7,y=100):c.id==="attendance-champion"&&(p=30,y=90),p>0){const b=h>0?f/h*100:0,v=Math.min(h/p*100,100),E=Math.min(b/y*100,100),w=Math.min((v+E)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(b),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var q0="Switch",[$H,QW]=kr(q0),[BH,HH]=$H(q0),cR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,y]=m.useState(null),b=Be(e,_=>y(_)),v=m.useRef(!1),E=p?h||!!p.closest("form"):!0,[w=!1,x]=Si({prop:s,defaultProp:i,onChange:u});return a.jsxs(BH,{scope:n,checked:w,disabled:l,children:[a.jsx(xe.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":hR(w),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:pe(t.onClick,_=>{x(I=>!I),E&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),E&&a.jsx(WH,{control:p,bubbles:!v.current,name:r,value:c,checked:w,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});cR.displayName=q0;var uR="SwitchThumb",dR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=HH(uR,n);return a.jsx(xe.span,{"data-state":hR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});dR.displayName=uR;var WH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=Tj(n),l=AC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function hR(t){return t?"checked":"unchecked"}var fR=cR,qH=dR;const Tn=m.forwardRef(({className:t,...e},n)=>a.jsx(fR,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(qH,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tn.displayName=fR.displayName;var GH="Label",mR=m.forwardRef((t,e)=>a.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));mR.displayName=GH;var pR=mR;const KH=gu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xr=m.forwardRef(({className:t,...e},n)=>a.jsx(pR,{ref:n,className:$(KH(),t),...e}));xr.displayName=pR.displayName;var ig="rovingFocusGroup.onEntryFocus",QH={bubbles:!1,cancelable:!0},Fm="RovingFocusGroup",[Qy,gR,YH]=Qv(Fm),[XH,yR]=kr(Fm,[YH]),[JH,ZH]=XH(Fm),vR=m.forwardRef((t,e)=>a.jsx(Qy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Qy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(eW,{...t,ref:e})})}));vR.displayName=Fm;var eW=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),y=Be(e,p),b=H0(i),[v=null,E]=Si({prop:o,defaultProp:l,onChange:c}),[w,x]=m.useState(!1),_=cn(u),I=gR(n),M=m.useRef(!1),[D,T]=m.useState(0);return m.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(ig,_),()=>N.removeEventListener(ig,_)},[_]),a.jsx(JH,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(N=>E(N),[E]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>T(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>T(N=>N-1),[]),children:a.jsx(xe.div,{tabIndex:w||D===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{M.current=!0}),onFocus:pe(t.onFocus,N=>{const C=!M.current;if(N.target===N.currentTarget&&C&&!w){const k=new CustomEvent(ig,QH);if(N.currentTarget.dispatchEvent(k),!k.defaultPrevented){const A=I().filter(ee=>ee.focusable),P=A.find(ee=>ee.active),R=A.find(ee=>ee.id===v),ae=[P,R,...A].filter(Boolean).map(ee=>ee.ref.current);bR(ae,h)}}M.current=!1}),onBlur:pe(t.onBlur,()=>x(!1))})})}),xR="RovingFocusGroupItem",wR=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=ps(),c=i||l,u=ZH(xR,n),h=u.currentTabStopId===c,f=gR(n),{onFocusableItemAdd:p,onFocusableItemRemove:y}=u;return m.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),a.jsx(Qy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:pe(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=rW(b,u.orientation,u.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const x=w.indexOf(b.currentTarget);w=u.loop?sW(w,x+1):w.slice(x+1)}setTimeout(()=>bR(w))}})})})});wR.displayName=xR;var tW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function rW(t,e,n){const r=nW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return tW[r]}function bR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function sW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var iW=vR,oW=wR,G0="Tabs",[aW,YW]=kr(G0,[yR]),_R=yR(),[lW,K0]=aW(G0),ER=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=H0(l),[f,p]=Si({prop:r,onChange:s,defaultProp:i});return a.jsx(lW,{scope:n,baseId:ps(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(xe.div,{dir:h,"data-orientation":o,...u,ref:e})})});ER.displayName=G0;var SR="TabsList",TR=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=K0(SR,n),o=_R(n);return a.jsx(iW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});TR.displayName=SR;var NR="TabsTrigger",CR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=K0(NR,n),l=_R(n),c=AR(o.baseId,r),u=jR(o.baseId,r),h=r===o.value;return a.jsx(oW,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:pe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:pe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});CR.displayName=NR;var kR="TabsContent",IR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=K0(kR,n),c=AR(l.baseId,r),u=jR(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(zi,{present:s||h,children:({present:p})=>a.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});IR.displayName=kR;function AR(t,e){return`${t}-trigger-${e}`}function jR(t,e){return`${t}-content-${e}`}var cW=ER,RR=TR,PR=CR,DR=IR;const uW=cW,MR=m.forwardRef(({className:t,...e},n)=>a.jsx(RR,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));MR.displayName=RR.displayName;const lh=m.forwardRef(({className:t,...e},n)=>a.jsx(PR,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));lh.displayName=PR.displayName;const ch=m.forwardRef(({className:t,...e},n)=>a.jsx(DR,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ch.displayName=DR.displayName;function dW(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function hW(){const{user:t,requestCalendarPermissions:e}=it(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=As(ze(Oe,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await $t(ze(Oe,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await $t(ze(Oe,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await $t(ze(Oe,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Pe,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Ui,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Ar,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(fe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(Co,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(Tn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(Tn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(qa,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Pe,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(tx,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(Yr,{href:"/settings/notifications",children:a.jsx(fe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function fW(){var ae,ee;const{user:t,signOut:e}=it(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=wn(),{isInstallable:l,isInstalled:c,promptInstall:u}=dW(),{theme:h,setTheme:f}=d0(),[p,y]=m.useState(!0),[b,v]=m.useState("auto"),[E,w]=m.useState(!1),[x,_]=m.useState([]),[I,M]=m.useState(0),[D,T]=m.useState(0),[N,C]=m.useState(),[k,A]=m.useState("general");m.useEffect(()=>{const O=new URLSearchParams(window.location.search).get("tab");O&&["general","badges","integrations"].includes(O)&&A(O)},[]),m.useEffect(()=>{if(!t)return;const Z=As(ze(Oe,"leaderboards","all-courses","students",t.uid),O=>{var B;if(O.exists()){const U=O.data();_(U.badges||[]),M(U.loginStreak||0),T(((B=U.processedAssignmentIds)==null?void 0:B.length)||0)}else _([]),M(0),T(0)});return()=>Z()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let Z=0,O=0;o.forEach(B=>{if(B.attendanceData&&typeof B.attendanceData=="object"){const U=Object.values(B.attendanceData);Z+=U.length,O+=U.filter(H=>typeof H=="string"?H.toLowerCase()==="present":H===!0||H===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:Z,attendedClasses:O}),Z>0&&C({total:Z,attended:O})},[o]),m.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var X;const O=ze(Oe,"leaderboards","all-courses","students",t.uid),B=await Sr(O);if(!B.exists())return;const U=B.data(),H=new Set(U.badges||[]);let Q=!1;const te=U.loginStreak||0;te>=5&&!H.has("5-day-consistent")&&(H.add("5-day-consistent"),Q=!0),te>=10&&!H.has("10-day-consistent")&&(H.add("10-day-consistent"),Q=!0),te>=30&&!H.has("30-day-consistent")&&(H.add("30-day-consistent"),Q=!0);const J=((X=U.processedAssignmentIds)==null?void 0:X.length)||0;J>=10&&!H.has("10-submissions")&&(H.add("10-submissions"),Q=!0),J>=25&&!H.has("25-submissions")&&(H.add("25-submissions"),Q=!0),J>=50&&!H.has("50-submissions")&&(H.add("50-submissions"),Q=!0),Q&&await $t(O,{badges:Array.from(H)},{merge:!0})})()},[t,k]);const P=((ae=t==null?void 0:t.displayName)==null?void 0:ae.split(" ").map(Z=>Z[0]).join("").toUpperCase())||((ee=t==null?void 0:t.email)==null?void 0:ee[0].toUpperCase())||"U",R=()=>n?n.toLocaleString():"Never",F=async()=>{w(!0);try{await u()}catch(Z){console.error("Install failed:",Z)}finally{w(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(uW,{value:k,onValueChange:A,className:"w-full",children:[a.jsxs(MR,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(lh,{value:"general",children:"General"}),a.jsx(lh,{value:"badges",children:"Badges"}),a.jsx(lh,{value:"integrations",children:"Integrations"})]}),a.jsxs(ch,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{className:"text-base",children:"Connected Account"}),a.jsx(yn,{children:"Your Google account linked to this app"})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(as,{className:"h-12 w-12",children:[a.jsx(ls,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{children:P})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Mh,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(hr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",R()]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:Z=>{Z.preventDefault(),s().catch(O=>{console.error("Sync failed:",O)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(qa,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{className:"text-base",children:"Sync Settings"}),a.jsx(yn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(Tn,{id:"background-sync",checked:p,onCheckedChange:y,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{className:"text-base",children:"Theme"}),a.jsx(yn,{children:"Choose your preferred color theme"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(rx,{className:"h-4 w-4"}),"Light"]}),a.jsxs(fe,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx(Bf,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Pe,{className:"border-primary/20",children:[a.jsxs(tt,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(lb,{className:"h-4 w-4"}),"Install App"]}),a.jsx(yn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(He,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Mh,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(W5,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(fe,{onClick:F,disabled:E,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(lb,{className:"h-4 w-4 mr-2"}),E?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(xo,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{className:"text-base",children:"Preferences"}),a.jsx(yn,{children:"Customize your experience"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(vf,{value:b,onValueChange:v,children:[a.jsx(ru,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(xf,{})}),a.jsxs(su,{children:[a.jsx(St,{value:"auto",children:"Auto-detect"}),a.jsx(St,{value:"America/New_York",children:"Eastern Time"}),a.jsx(St,{value:"America/Chicago",children:"Central Time"}),a.jsx(St,{value:"America/Denver",children:"Mountain Time"}),a.jsx(St,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(St,{value:"Europe/London",children:"London"}),a.jsx(St,{value:"Europe/Paris",children:"Paris"}),a.jsx(St,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(Bc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(yn,{children:"Manage your session"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(AA,{children:[a.jsx(jA,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(S0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(k0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(I0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(ch,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(nC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(yn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(He,{children:a.jsx(UH,{earnedBadges:x,currentStreak:I,submissionCount:D,attendanceStats:N})})]})}),a.jsx(ch,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(hW,{})})]})]})}function mW(){const{user:t,requestGmailPermissions:e,accessToken:n}=it(),{toast:r}=Fo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function b(){if(t)try{const v=ze(Oe,"users",t.uid,"settings","notifications"),E=await Sr(v);if(E.exists()){const w=E.data();i(w.enabled??!1),l(w.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}b()},[t]),m.useEffect(()=>{async function b(){if(!(!t||h))try{const E=ze(Oe,"users",t.uid,"settings","notifications");await $t(E,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(E){console.error("Failed to save settings",E)}}const v=setTimeout(b,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(b){console.error(b),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},y=b=>{l(v=>({...v,[b]:!v[b]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Yr,{href:"/settings",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx($f,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(tt,{className:"pb-4",children:[a.jsxs(rt,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(tx,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(yn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(hr,{}),a.jsxs(He,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(Tn,{checked:o.dueReminder,onCheckedChange:()=>y("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(hr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(Tn,{checked:o.missedSubmission,onCheckedChange:()=>y("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(hr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(xr,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(Tn,{checked:o.workloadWarning,onCheckedChange:()=>y("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(U0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(Wa,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(fe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(xo,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(Co,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function pW(){const[t,e]=Lf(),{user:n,requestCalendarPermissions:r}=it(),{toast:s}=Fo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const b=As(ze(Oe,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>b()},[n]);const f=async()=>{c(!0);try{await r()?(await $t(ze(Oe,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(b){console.error(b),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await $t(ze(Oe,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(b){console.error(b)}},y=async(b,v)=>{h(E=>({...E,[b]:v}));try{await $t(ze(Oe,"users",n.uid,"settings","calendar"),{[b]:v},{merge:!0})}catch(E){console.error(E)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Co,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(I5,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Pe,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(tt,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Ui,{className:"h-6 w-6"})}),a.jsx(rt,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Ar,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(Co,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(hr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(Tn,{checked:u.syncAssignments,onCheckedChange:b=>y("syncAssignments",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(Tn,{checked:u.syncExams,onCheckedChange:b=>y("syncExams",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(Tn,{checked:u.syncPersonal,onCheckedChange:b=>y("syncPersonal",b)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(qa,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(gW,{})]})]})}function gW(){const{user:t,requestGmailPermissions:e}=it(),{toast:n}=Fo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=As(ze(Oe,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await $t(ze(Oe,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await $t(ze(Oe,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await $t(ze(Oe,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Pe,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(tt,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(rt,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Ar,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(Co,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(hr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(Tn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(Tn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function yW(){var N,C,k,A,P,R;const{user:t,signOut:e}=it(),{courses:n,assignments:r,isLoading:s,error:i}=wn();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return a.jsx(El,{});const[o,l]=m.useState("class"),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,y]=m.useState(!0),[b,v]=m.useState(!0);m.useEffect(()=>{f(!0);const F=Array.from(new Set(["all-courses",...n.map(O=>O.id)])),ae=[],ee=new Map,Z=()=>{const O=[],B=t!=null&&t.email?t.email.split("@")[1]:null,U=n.map(Q=>Q.id),H=new Set(r.map(Q=>Q.id));ee.forEach(Q=>{const te=Q.email||"";let J=Q.emailDomain||"";!J&&te.includes("@")&&(J=te.split("@")[1]);const X=Q.enrolledCourseIds||[],re=Q.processedAssignmentIds||[],L=B&&J&&B===J,K=U.some(ie=>X.includes(ie)),Y=!J&&re.some(ie=>H.has(ie));let se=!1;o==="college"?(se=!!L,(Q.id===(t==null?void 0:t.uid)||L)&&console.log(`[College Filter] Student: ${Q.displayName}, Domain: ${J}, User Domain: ${B}, Match: ${L}`)):se=L&&K||Y,se&&O.push(Q)}),O.sort((Q,te)=>te.totalXP-Q.totalXP),u(O),f(!1)};return F.forEach(O=>{const B=e0(Oe,"leaderboards",O,"students"),U=l0(B,c0("totalXP","desc"),S2(50)),H=As(U,Q=>{Q.forEach(te=>{const J=te.data(),X={id:te.id,displayName:J.displayName||J.name||"Anonymous",photoUrl:J.photoUrl||J.avatar||"",totalXP:J.totalXP||J.xp||0,processedAssignmentIds:J.processedAssignmentIds||J.completedTasks||[],email:J.email||"",emailDomain:J.emailDomain||(J.email?J.email.split("@")[1]:""),enrolledCourseIds:J.enrolledCourseIds||J.subjects||[],badges:J.badges||[]},re=ee.get(te.id);(!re||X.totalXP>=re.totalXP)&&ee.set(te.id,X)}),Z()});ae.push(H)}),()=>{ae.forEach(O=>O())}},[o,t,n,r]);const E=o==="class"?"My Class":"My College",w=c.find(F=>F.id===(t==null?void 0:t.uid));w!=null&&w.totalXP;const x=!!w,_=c.filter(F=>F.totalXP>0),I=c.filter(F=>F.totalXP===0),M=c.length>0&&_.length===0,D=[...I].sort((F,ae)=>{const ee=Z=>Z?typeof Z.toMillis=="function"?Z.toMillis():typeof Z=="number"?Z:Z instanceof Date?Z.getTime():typeof Z=="string"?new Date(Z).getTime():0:0;return ee(F.lastSyncedAt)-ee(ae.lastSyncedAt)}),T=[..._,...D];return a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(xo,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:F=>{F.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[E," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(vf,{value:o,onValueChange:F=>l(F),children:[a.jsx(ru,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(xf,{placeholder:"Select View"})}),a.jsxs(su,{children:[a.jsx(St,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(St,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&o==="class"&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>y(!1),children:a.jsx(ko,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(O5,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),o==="college"&&b&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>v(!1),children:a.jsx(ko,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(xo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(oC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(xo,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!x&&!h?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(Co,{className:"h-6 w-6 text-primary animate-spin"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},F))}):c.length===0?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):M?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(tC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:T.map((F,ae)=>{var Z,O;const ee=F.id===(t==null?void 0:t.uid);return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",ee?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(as,{className:$("h-10 w-10 border flex-shrink-0",ee?"border-primary/20":"border-border"),children:[a.jsx(ls,{src:F.photoUrl}),a.jsx(cs,{className:"text-xs bg-muted text-muted-foreground",children:(O=(Z=F.displayName)==null?void 0:Z[0])==null?void 0:O.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:$("text-sm font-medium truncate",ee?"text-primary":"text-foreground"),children:[F.displayName,ee&&a.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},F.id)})})]}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[T.length>0&&a.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:T[1]&&T[1].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(as,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(ls,{src:T[1].photoUrl}),a.jsx(cs,{className:"text-lg bg-zinc-100 text-zinc-500",children:(C=(N=T[1].displayName)==null?void 0:N[0])==null?void 0:C.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:T[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[T[1].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:T[1].badges||[],limit:2,size:"sm"})})]})]}):_.length===1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(P5,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(as,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(ls,{src:T[0].photoUrl}),a.jsx(cs,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(A=(k=T[0].displayName)==null?void 0:k[0])==null?void 0:A.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:T[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[T[0].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:T[0].badges||[],limit:3,size:"sm"})})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:T[2]&&T[2].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(as,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(ls,{src:T[2].photoUrl}),a.jsx(cs,{className:"text-lg bg-amber-50 text-amber-700",children:(R=(P=T[2].displayName)==null?void 0:P[0])==null?void 0:R.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:T[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[T[2].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:T[2].badges||[],limit:2,size:"sm"})})]})]}):_.length>=1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:T.slice(Math.min(3,_.length)).map((F,ae)=>{var O,B;const ee=F.id===(t==null?void 0:t.uid),Z=Math.min(3,_.length)+ae+1;return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",ee?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:F.totalXP>0?`#${Z}`:"-"})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(as,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",ee?"border-primary/20":"border-border"),children:[a.jsx(ls,{src:F.photoUrl}),a.jsx(cs,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(B=(O=F.displayName)==null?void 0:O[0])==null?void 0:B.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",ee?"text-primary":"text-foreground"),children:[F.displayName," ",ee&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(nc,{badges:F.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[F.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:F.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},F.id)})})]})]})})]})}function vW(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const AE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function xW(){const{courses:t,error:e}=wn();if(e&&e.toLowerCase().includes("session")&&t.length===0)return a.jsx(El,{});const{accessToken:n,user:r}=it();Fo();const[s,i]=m.useState(""),[o,l]=m.useState({}),[c,u]=m.useState(!1),[h,f]=m.useState(null);m.useState("");const p=m.useMemo(()=>vW(),[]);m.useEffect(()=>{if(!t||!r)return;(async()=>{const T=await Promise.all(t.map(async C=>{var A;if(((A=o[C.id])==null?void 0:A.state)==="loaded")return o[C.id];const k=await qn.getCourseConfig(C.id);return k?k.isVisible?(y(C.id,k.sheetUrl),{courseId:C.id,state:"loading"}):{courseId:C.id,state:"hidden"}:{courseId:C.id,state:"no-config"}})),N={};T.forEach(C=>{N[C.courseId]=C}),l(C=>({...C,...N}))})()},[t,r]),m.useEffect(()=>{t.length>0&&!s&&i(t[0].id)},[t,s]);const y=async(D,T)=>{if(!n||!(r!=null&&r.email))return;const N=qn.extractSheetId(T);if(!N){l(A=>({...A,[D]:{courseId:D,state:"error",error:"Invalid configuration"}}));return}const C=await qn.getCourseConfig(D),k=(C==null?void 0:C.emailColumn)||"A";try{const A=await qn.fetchAttendanceFromSheet(N,n,r.email,k);l(P=>({...P,[D]:{courseId:D,state:"loaded",data:A}}))}catch(A){console.error(A),l(P=>({...P,[D]:{courseId:D,state:"error",error:A.message||"Failed to load"}}))}},b=async D=>{D==null||D.stopPropagation(),u(!0);const T=Object.values(o).filter(N=>N.state==="loaded"||N.state==="error"||N.state==="loading").map(async N=>{const C=await qn.getCourseConfig(N.courseId);return C?y(N.courseId,C.sheetUrl):Promise.resolve()});await Promise.allSettled(T),u(!1)},v=Object.values(o).filter(D=>D.state==="loaded"&&D.data),E=v.reduce((D,T)=>{var N;return D+(((N=T.data)==null?void 0:N.stats.attendedClasses)||0)},0),w=v.reduce((D,T)=>{var N;return D+(((N=T.data)==null?void 0:N.stats.totalClasses)||0)},0),x=AE(E,w),_=o[s],I=t.find(D=>D.id===s),M=_==null?void 0:_.data;return m.useEffect(()=>{if(!r||w<5)return;const T=setTimeout(async()=>{const N=[],C=E,k=w,A=k>0?C/k:0;if(k>=10&&A===1&&N.push("perfect-week"),k>=30&&A>=.95&&N.push("attendance-champion"),N.length>0)try{const P=ze(Oe,"leaderboards","all-courses","students",r.uid);await k2(P,{badges:j2(...N)})}catch(P){console.debug("Could not award attendance badges:",P)}},3e3);return()=>clearTimeout(T)},[r,w,E]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),a.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),a.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",p]})]}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:b,className:$("text-muted-foreground h-8 shrink-0",c&&"opacity-70"),children:[a.jsx(Oh,{className:$("h-3.5 w-3.5 sm:mr-2",c&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),e&&e.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(xo,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:D=>{D.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:v.length>0?a.jsx(Pe,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(He,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Ar,{variant:x.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",x.color),children:x.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[x.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",v.length," active courses"]})]})]})})}):a.jsx(Pe,{className:"border-border shadow-sm bg-card",children:a.jsxs(He,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:a.jsx($c,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2 max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",a.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[a.jsx(Vn,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(D=>{var A,P;const T=o[D.id],N=(T==null?void 0:T.state)||"loading",C=T!=null&&T.data?AE(T.data.stats.attendedClasses,T.data.stats.totalClasses):null,k=s===D.id;return a.jsx(Pe,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",k&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>i(D.id),children:a.jsxs(He,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:D.name})}),a.jsx(xu,{children:a.jsx("p",{children:D.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:D.section||"No Section"})]}),N==="loaded"&&C&&a.jsxs("span",{className:$("text-lg font-bold tabular-nums",C.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[C.percentage,"%"]}),N==="hidden"&&a.jsx(sy,{className:"h-5 w-5 text-muted-foreground/50"}),N==="locked"&&a.jsx(iy,{className:"h-5 w-5 text-amber-500/80"}),N==="error"&&a.jsx(xo,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[N==="loaded"&&C&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(A=T.data)==null?void 0:A.stats.attendedClasses,"/",(P=T.data)==null?void 0:P.stats.totalClasses," classes"]}),a.jsx("span",{className:C.status==="safe"?"text-emerald-500":"text-red-500",children:C.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:$("h-full rounded-full transition-all duration-500",C.progressColor),style:{width:`${C.percentage}%`}})})]}),N==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(fe,{size:"sm",variant:"secondary",className:"w-full",onClick:R=>{R.stopPropagation(),f(D.id)},children:[a.jsx(L5,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),N==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),N==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),N==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:T==null?void 0:T.error}),N==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Oh,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},D.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx($c,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(I==null?void 0:I.section)||(I==null?void 0:I.name.slice(0,3).toUpperCase())})]}),a.jsx(Pe,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:M?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:M.history.map((D,T)=>{const N=D.status==="Present",C=T===0,k=T===5;return a.jsxs("div",{className:"group",children:[C&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),k&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",N?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),T!==M.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",N?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:D.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:D.date})]})})]})]},T)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(_==null?void 0:_.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(iy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(_==null?void 0:_.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(sy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((_==null?void 0:_.state)==="error"||(_==null?void 0:_.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(Vn,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function wW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Pe,{className:"w-full max-w-md mx-4",children:a.jsxs(He,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(Vn,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function OR(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const bW=864e5;function Yy(t){const e=OR(t);return e.setHours(0,0,0,0),e}function jE(t){const e=OR(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _W(t,e){const n=Yy(t),r=Yy(e),s=+n-jE(n),i=+r-jE(r);return Math.round((s-i)/bW)}function EW(){const{user:t}=it();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=ze(Oe,"leaderboards","all-courses","students",t.uid),r=await Sr(n),s=Yy(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=_W(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await $t(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const SW=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function Q0({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:SW;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(Co,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(oC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Student Sphere Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(QN,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(sC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const TW=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function NW({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,y;const{user:s,signOut:i}=it(),{theme:o,toggleTheme:l}=d0(),c=Am(),u=[{id:"dashboard",label:"Dashboard",icon:V5},{id:"courses",label:"Courses",icon:Zv},{id:"settings",label:"Settings",icon:iC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(b=>b[0]).join("").toUpperCase())||((y=s==null?void 0:s.email)==null?void 0:y[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(ko,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(as,{className:"h-8 w-8",children:[a.jsx(ls,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(b=>a.jsxs("button",{onClick:()=>{e(b.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===b.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(b.icon,{className:"h-4 w-4"}),b.label]},b.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(rx,{className:"w-4 h-4 mr-3"}):a.jsx(Bf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Bc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function CW({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>qn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(Zv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(D5,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(sy,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function kW({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(Oh,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Pe,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(fe,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(IW,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(fe,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function IW({courseId:t}){const{toast:e}=Fo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let y=!0;return(async()=>{f(!0);const v=await qn.getCourseConfig(t);y&&v&&(r(v.isVisible),i(v.sheetUrl),l(v.emailColumn||"A")),y&&f(!1)})(),()=>{y=!1}},[t]);const p=async()=>{if(!qn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await qn.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:o.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Oh,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ar,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(Tn,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(xr,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(lf,{id:`sheet-${t}`,value:s,onChange:y=>i(y.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(xr,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(lf,{id:`email-col-${t}`,value:o,onChange:y=>l(y.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?a.jsxs(a.Fragment,{children:[a.jsx(JN,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(nx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function AW(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{children:"Notifications"}),a.jsx(yn,{children:"Configure how you receive alerts."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N5,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(xr,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(Tn,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Pe,{children:[a.jsxs(tt,{children:[a.jsx(rt,{children:"Display"}),a.jsx(yn,{children:"Customize your dashboard appearance."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bf,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(xr,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function jW(){const{accessToken:t}=it(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(Q0,{message:"Preparing Teacher Workspace...",tips:TW}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(NW,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(rC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(CW,{courses:r}),e==="courses"&&a.jsx(kW,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(AW,{})]})]})]})}function RW(){const{signOut:t,signInWithGoogle:e}=it();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Pe,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(tt,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(R5,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(rt,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(yn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(YN,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Zv,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(QN,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ui,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(U0,{className:"flex flex-col gap-2",children:[a.jsx(fe,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(fe,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function PW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx($f,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function DW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx($f,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),a.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Track attendance"})," and academic performance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),a.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),a.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),a.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),a.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),a.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),a.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),a.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),a.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),a.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),a.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),a.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),a.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),a.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),a.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"The Service will be uninterrupted or error-free"}),a.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),a.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),a.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Violates these Terms of Service"}),a.jsx("li",{children:"Is harmful to other users or the Service"}),a.jsx("li",{children:"Exposes us to legal liability"})]}),a.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),a.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),a.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const MW=()=>"/";function OW(){const[t,e]=m.useState(!1),{isLoading:n}=wn(),r=MW();return n?a.jsx(Q0,{message:"Setting up your workspace..."}):a.jsx(dN,{base:r,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(A7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx(EW,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(j7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(tM,{children:[a.jsx(rr,{path:"/pipeline",component:QB}),a.jsx(rr,{path:"/",children:()=>{const[,s]=Lf();return m.useEffect(()=>{s("/dashboard")},[s]),null}}),a.jsx(rr,{path:"/leaderboard",component:yW}),a.jsx(rr,{path:"/timeline",component:IH}),a.jsx(rr,{path:"/dashboard",component:LH}),a.jsx(rr,{path:"/notes",component:VH}),a.jsx(rr,{path:"/attendance",component:xW}),a.jsx(rr,{path:"/settings",component:fW}),a.jsx(rr,{path:"/settings/notifications",component:mW}),a.jsx(rr,{path:"/settings/integrations",component:pW}),a.jsx(rr,{component:wW})]})})]})]})})}function LW(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(PW,{});if(window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service"))return a.jsx(DW,{});const{user:t,loading:e,role:n}=it();return e?a.jsx(Q0,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(jW,{}):n==="no_access"?a.jsx(RW,{}):a.jsx(aU,{children:a.jsx(OW,{})}):a.jsx(U7,{})}function VW(){return a.jsx(TM,{client:kM,children:a.jsx(J8,{children:a.jsx(X8,{children:a.jsxs(Xf,{children:[a.jsx(jO,{}),a.jsx(LW,{})]})})})})}eN(document.getElementById("root")).render(a.jsx(VW,{}));
