var b1=t=>{throw TypeError(t)};var Ig=(t,e,n)=>e.has(t)||b1("Cannot "+n);var Q=(t,e,n)=>(Ig(t,e,"read from private field"),n?n.call(t):e.get(t)),nt=(t,e,n)=>e.has(t)?b1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Me=(t,e,n,r)=>(Ig(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),dn=(t,e,n)=>(Ig(t,e,"access private method"),n);var uh=(t,e,n,r)=>({set _(s){Me(t,e,s,n)},get _(){return Q(t,e,r)}});function y5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ME(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OE={exports:{}},$m={},LE={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=Symbol.for("react.element"),v5=Symbol.for("react.portal"),w5=Symbol.for("react.fragment"),b5=Symbol.for("react.strict_mode"),_5=Symbol.for("react.profiler"),N5=Symbol.for("react.provider"),S5=Symbol.for("react.context"),E5=Symbol.for("react.forward_ref"),j5=Symbol.for("react.suspense"),C5=Symbol.for("react.memo"),T5=Symbol.for("react.lazy"),_1=Symbol.iterator;function k5(t){return t===null||typeof t!="object"?null:(t=_1&&t[_1]||t["@@iterator"],typeof t=="function"?t:null)}var VE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FE=Object.assign,zE={};function rc(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||VE}rc.prototype.isReactComponent={};rc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UE(){}UE.prototype=rc.prototype;function Pv(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||VE}var Dv=Pv.prototype=new UE;Dv.constructor=Pv;FE(Dv,rc.prototype);Dv.isPureReactComponent=!0;var N1=Array.isArray,$E=Object.prototype.hasOwnProperty,Mv={current:null},BE={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)$E.call(e,r)&&!BE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:hd,type:t,key:i,ref:a,props:s,_owner:Mv.current}}function I5(t,e){return{$$typeof:hd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ov(t){return typeof t=="object"&&t!==null&&t.$$typeof===hd}function A5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S1=/\/+/g;function Ag(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A5(""+t.key):e.toString(36)}function Gh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case hd:case v5:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ag(a,0):r,N1(s)?(n="",t!=null&&(n=t.replace(S1,"$&/")+"/"),Gh(s,e,n,"",function(u){return u})):s!=null&&(Ov(s)&&(s=I5(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(S1,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",N1(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ag(i,l);a+=Gh(i,e,n,c,s)}else if(c=k5(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ag(i,l++),a+=Gh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function dh(t,e,n){if(t==null)return t;var r=[],s=0;return Gh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function R5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},Kh={transition:null},P5={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:Kh,ReactCurrentOwner:Mv};function WE(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:dh,forEach:function(t,e,n){dh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dh(t,function(){e++}),e},toArray:function(t){return dh(t,function(e){return e})||[]},only:function(t){if(!Ov(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=rc;ze.Fragment=w5;ze.Profiler=_5;ze.PureComponent=Pv;ze.StrictMode=b5;ze.Suspense=j5;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P5;ze.act=WE;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=FE({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Mv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$E.call(e,c)&&!BE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:hd,type:t.type,key:s,ref:i,props:r,_owner:a}};ze.createContext=function(t){return t={$$typeof:S5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N5,_context:t},t.Consumer=t};ze.createElement=qE;ze.createFactory=function(t){var e=qE.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:E5,render:t}};ze.isValidElement=Ov;ze.lazy=function(t){return{$$typeof:T5,_payload:{_status:-1,_result:t},_init:R5}};ze.memo=function(t,e){return{$$typeof:C5,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Kh.transition;Kh.transition={};try{t()}finally{Kh.transition=e}};ze.unstable_act=WE;ze.useCallback=function(t,e){return Mn.current.useCallback(t,e)};ze.useContext=function(t){return Mn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Mn.current.useEffect(t,e)};ze.useId=function(){return Mn.current.useId()};ze.useImperativeHandle=function(t,e,n){return Mn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Mn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return Mn.current.useReducer(t,e,n)};ze.useRef=function(t){return Mn.current.useRef(t)};ze.useState=function(t){return Mn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return Mn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return Mn.current.useTransition()};ze.version="18.3.1";LE.exports=ze;var f=LE.exports;const Oe=ME(f),HE=y5({__proto__:null,default:Oe},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=f,M5=Symbol.for("react.element"),O5=Symbol.for("react.fragment"),L5=Object.prototype.hasOwnProperty,V5=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F5={key:!0,ref:!0,__self:!0,__source:!0};function GE(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)L5.call(e,r)&&!F5.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M5,type:t,key:i,ref:a,props:s,_owner:V5.current}}$m.Fragment=O5;$m.jsx=GE;$m.jsxs=GE;OE.exports=$m;var o=OE.exports,KE={exports:{}},dr={},XE={exports:{}},QE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,O){var L=$.length;$.push(O);e:for(;0<L;){var B=L-1>>>1,W=$[B];if(0<s(W,O))$[B]=O,$[L]=W,L=B;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var O=$[0],L=$.pop();if(L!==O){$[0]=L;e:for(var B=0,W=$.length,K=W>>>1;B<K;){var le=2*(B+1)-1,oe=$[le],ce=le+1,F=$[ce];if(0>s(oe,L))ce<W&&0>s(F,oe)?($[B]=F,$[ce]=L,B=ce):($[B]=oe,$[le]=L,B=le);else if(ce<W&&0>s(F,L))$[B]=F,$[ce]=L,B=ce;else break e}}return O}function s($,O){var L=$.sortIndex-O.sortIndex;return L!==0?L:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,m=null,p=3,g=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=$)r(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(u)}}function T($){if(y=!1,S($),!x)if(n(c)!==null)x=!0,Z(A);else{var O=n(u);O!==null&&te(T,O.startTime-$)}}function A($,O){x=!1,y&&(y=!1,b(E),E=-1),g=!0;var L=p;try{for(S(O),m=n(c);m!==null&&(!(m.expirationTime>O)||$&&!I());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var W=B(m.expirationTime<=O);O=t.unstable_now(),typeof W=="function"?m.callback=W:m===n(c)&&r(c),S(O)}else r(c);m=n(c)}if(m!==null)var K=!0;else{var le=n(u);le!==null&&te(T,le.startTime-O),K=!1}return K}finally{m=null,p=L,g=!1}}var M=!1,N=null,E=-1,j=5,k=-1;function I(){return!(t.unstable_now()-k<j)}function D(){if(N!==null){var $=t.unstable_now();k=$;var O=!0;try{O=N(!0,$)}finally{O?P():(M=!1,N=null)}}else M=!1}var P;if(typeof w=="function")P=function(){w(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,re=V.port2;V.port1.onmessage=D,P=function(){re.postMessage(null)}}else P=function(){_(D,0)};function Z($){N=$,M||(M=!0,P())}function te($,O){E=_(function(){$(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,Z(A))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var L=p;p=O;try{return $()}finally{p=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=p;p=$;try{return O()}finally{p=L}},t.unstable_scheduleCallback=function($,O,L){var B=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?B+L:B):L=B,$){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,$={id:h++,callback:O,priorityLevel:$,startTime:L,expirationTime:W,sortIndex:-1},L>B?($.sortIndex=L,e(u,$),n(c)===null&&$===n(u)&&(y?(b(E),E=-1):y=!0,te(T,L-B))):($.sortIndex=W,e(c,$),x||g||(x=!0,Z(A))),$},t.unstable_shouldYield=I,t.unstable_wrapCallback=function($){var O=p;return function(){var L=p;p=O;try{return $.apply(this,arguments)}finally{p=L}}}})(QE);XE.exports=QE;var z5=XE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U5=f,cr=z5;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YE=new Set,_u={};function va(t,e){Il(t,e),Il(t+"Capture",e)}function Il(t,e){for(_u[t]=e,t=0;t<e.length;t++)YE.add(e[t])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vx=Object.prototype.hasOwnProperty,$5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E1={},j1={};function B5(t){return Vx.call(j1,t)?!0:Vx.call(E1,t)?!1:$5.test(t)?j1[t]=!0:(E1[t]=!0,!1)}function q5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W5(t,e,n,r){if(e===null||typeof e>"u"||q5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lv=/[\-:]([a-z])/g;function Vv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lv,Vv);cn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lv,Vv);cn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lv,Vv);cn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fv(t,e,n,r){var s=cn.hasOwnProperty(e)?cn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W5(e,n,s,r)&&(n=null),r||s===null?B5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var io=U5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hh=Symbol.for("react.element"),Ba=Symbol.for("react.portal"),qa=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),Fx=Symbol.for("react.profiler"),JE=Symbol.for("react.provider"),ZE=Symbol.for("react.context"),Uv=Symbol.for("react.forward_ref"),zx=Symbol.for("react.suspense"),Ux=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),ej=Symbol.for("react.offscreen"),C1=Symbol.iterator;function Pc(t){return t===null||typeof t!="object"?null:(t=C1&&t[C1]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,Rg;function Bc(t){if(Rg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rg=e&&e[1]||""}return`
`+Rg+t}var Pg=!1;function Dg(t,e){if(!t||Pg)return"";Pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bc(t):""}function H5(t){switch(t.tag){case 5:return Bc(t.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 2:case 15:return t=Dg(t.type,!1),t;case 11:return t=Dg(t.type.render,!1),t;case 1:return t=Dg(t.type,!0),t;default:return""}}function $x(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qa:return"Fragment";case Ba:return"Portal";case Fx:return"Profiler";case zv:return"StrictMode";case zx:return"Suspense";case Ux:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZE:return(t.displayName||"Context")+".Consumer";case JE:return(t._context.displayName||"Context")+".Provider";case Uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $v:return e=t.displayName||null,e!==null?e:$x(t.type)||"Memo";case Eo:e=t._payload,t=t._init;try{return $x(t(e))}catch{}}return null}function G5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $x(e);case 8:return e===zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K5(t){var e=tj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fh(t){t._valueTracker||(t._valueTracker=K5(t))}function nj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bx(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rj(t,e){e=e.checked,e!=null&&Fv(t,"checked",e,!1)}function qx(t,e){rj(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wx(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wx(t,e,n){(e!=="number"||kf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qc=Array.isArray;function sl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(qc(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function sj(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function A1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mh,ij=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mh=mh||document.createElement("div"),mh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X5=["Webkit","ms","Moz","O"];Object.keys(Zc).forEach(function(t){X5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zc[e]=Zc[t]})});function aj(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zc.hasOwnProperty(t)&&Zc[t]?(""+e).trim():e+"px"}function lj(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aj(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Q5=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kx(t,e){if(e){if(Q5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Xx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qx=null;function Bv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yx=null,ol=null,il=null;function R1(t){if(t=pd(t)){if(typeof Yx!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Gm(e),Yx(t.stateNode,t.type,e))}}function cj(t){ol?il?il.push(t):il=[t]:ol=t}function uj(){if(ol){var t=ol,e=il;if(il=ol=null,R1(t),e)for(t=0;t<e.length;t++)R1(e[t])}}function dj(t,e){return t(e)}function hj(){}var Mg=!1;function fj(t,e,n){if(Mg)return t(e,n);Mg=!0;try{return dj(t,e,n)}finally{Mg=!1,(ol!==null||il!==null)&&(hj(),uj())}}function Su(t,e){var n=t.stateNode;if(n===null)return null;var r=Gm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var Jx=!1;if(Ks)try{var Dc={};Object.defineProperty(Dc,"passive",{get:function(){Jx=!0}}),window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{Jx=!1}function Y5(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var eu=!1,If=null,Af=!1,Zx=null,J5={onError:function(t){eu=!0,If=t}};function Z5(t,e,n,r,s,i,a,l,c){eu=!1,If=null,Y5.apply(J5,arguments)}function eM(t,e,n,r,s,i,a,l,c){if(Z5.apply(this,arguments),eu){if(eu){var u=If;eu=!1,If=null}else throw Error(ne(198));Af||(Af=!0,Zx=u)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P1(t){if(wa(t)!==t)throw Error(ne(188))}function tM(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return P1(s),t;if(i===r)return P1(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function pj(t){return t=tM(t),t!==null?gj(t):null}function gj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gj(t);if(e!==null)return e;t=t.sibling}return null}var xj=cr.unstable_scheduleCallback,D1=cr.unstable_cancelCallback,nM=cr.unstable_shouldYield,rM=cr.unstable_requestPaint,Mt=cr.unstable_now,sM=cr.unstable_getCurrentPriorityLevel,qv=cr.unstable_ImmediatePriority,yj=cr.unstable_UserBlockingPriority,Rf=cr.unstable_NormalPriority,oM=cr.unstable_LowPriority,vj=cr.unstable_IdlePriority,Bm=null,ms=null;function iM(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Bm,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:cM,aM=Math.log,lM=Math.LN2;function cM(t){return t>>>=0,t===0?32:31-(aM(t)/lM|0)|0}var ph=64,gh=4194304;function Wc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Wc(l):(i&=a,i!==0&&(r=Wc(i)))}else a=n&~s,a!==0?r=Wc(a):i!==0&&(r=Wc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),s=1<<n,r|=t[n],e&=~s;return r}function uM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-zr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=uM(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function ey(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wj(){var t=ph;return ph<<=1,!(ph&4194240)&&(ph=64),t}function Og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function hM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Wv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var at=0;function bj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _j,Hv,Nj,Sj,Ej,ty=!1,xh=[],$o=null,Bo=null,qo=null,Eu=new Map,ju=new Map,To=[],fM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M1(t,e){switch(t){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":Eu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Mc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pd(e),e!==null&&Hv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mM(t,e,n,r,s){switch(e){case"focusin":return $o=Mc($o,t,e,n,r,s),!0;case"dragenter":return Bo=Mc(Bo,t,e,n,r,s),!0;case"mouseover":return qo=Mc(qo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Eu.set(i,Mc(Eu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ju.set(i,Mc(ju.get(i)||null,t,e,n,r,s)),!0}return!1}function jj(t){var e=$i(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=mj(n),e!==null){t.blockedOn=e,Ej(t.priority,function(){Nj(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ny(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qx=r,n.target.dispatchEvent(r),Qx=null}else return e=pd(n),e!==null&&Hv(e),t.blockedOn=n,!1;e.shift()}return!0}function O1(t,e,n){Xh(t)&&n.delete(e)}function pM(){ty=!1,$o!==null&&Xh($o)&&($o=null),Bo!==null&&Xh(Bo)&&(Bo=null),qo!==null&&Xh(qo)&&(qo=null),Eu.forEach(O1),ju.forEach(O1)}function Oc(t,e){t.blockedOn===e&&(t.blockedOn=null,ty||(ty=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,pM)))}function Cu(t){function e(s){return Oc(s,t)}if(0<xh.length){Oc(xh[0],t);for(var n=1;n<xh.length;n++){var r=xh[n];r.blockedOn===t&&(r.blockedOn=null)}}for($o!==null&&Oc($o,t),Bo!==null&&Oc(Bo,t),qo!==null&&Oc(qo,t),Eu.forEach(e),ju.forEach(e),n=0;n<To.length;n++)r=To[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<To.length&&(n=To[0],n.blockedOn===null);)jj(n),n.blockedOn===null&&To.shift()}var al=io.ReactCurrentBatchConfig,Df=!0;function gM(t,e,n,r){var s=at,i=al.transition;al.transition=null;try{at=1,Gv(t,e,n,r)}finally{at=s,al.transition=i}}function xM(t,e,n,r){var s=at,i=al.transition;al.transition=null;try{at=4,Gv(t,e,n,r)}finally{at=s,al.transition=i}}function Gv(t,e,n,r){if(Df){var s=ny(t,e,n,r);if(s===null)Hg(t,e,r,Mf,n),M1(t,r);else if(mM(s,t,e,n,r))r.stopPropagation();else if(M1(t,r),e&4&&-1<fM.indexOf(t)){for(;s!==null;){var i=pd(s);if(i!==null&&_j(i),i=ny(t,e,n,r),i===null&&Hg(t,e,r,Mf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hg(t,e,r,null,n)}}var Mf=null;function ny(t,e,n,r){if(Mf=null,t=Bv(r),t=$i(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mj(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mf=t,null}function Cj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sM()){case qv:return 1;case yj:return 4;case Rf:case oM:return 16;case vj:return 536870912;default:return 16}default:return 16}}var Fo=null,Kv=null,Qh=null;function Tj(){if(Qh)return Qh;var t,e=Kv,n=e.length,r,s="value"in Fo?Fo.value:Fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Qh=s.slice(t,1<r?1-r:void 0)}function Yh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yh(){return!0}function L1(){return!1}function hr(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yh:L1,this.isPropagationStopped=L1,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yh)},persist:function(){},isPersistent:yh}),e}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=hr(sc),md=Et({},sc,{view:0,detail:0}),yM=hr(md),Lg,Vg,Lc,qm=Et({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lc&&(Lc&&t.type==="mousemove"?(Lg=t.screenX-Lc.screenX,Vg=t.screenY-Lc.screenY):Vg=Lg=0,Lc=t),Lg)},movementY:function(t){return"movementY"in t?t.movementY:Vg}}),V1=hr(qm),vM=Et({},qm,{dataTransfer:0}),wM=hr(vM),bM=Et({},md,{relatedTarget:0}),Fg=hr(bM),_M=Et({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),NM=hr(_M),SM=Et({},sc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EM=hr(SM),jM=Et({},sc,{data:0}),F1=hr(jM),CM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kM[t])?!!e[t]:!1}function Qv(){return IM}var AM=Et({},md,{key:function(t){if(t.key){var e=CM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(t){return t.type==="keypress"?Yh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RM=hr(AM),PM=Et({},qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z1=hr(PM),DM=Et({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),MM=hr(DM),OM=Et({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),LM=hr(OM),VM=Et({},qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FM=hr(VM),zM=[9,13,27,32],Yv=Ks&&"CompositionEvent"in window,tu=null;Ks&&"documentMode"in document&&(tu=document.documentMode);var UM=Ks&&"TextEvent"in window&&!tu,kj=Ks&&(!Yv||tu&&8<tu&&11>=tu),U1=" ",$1=!1;function Ij(t,e){switch(t){case"keyup":return zM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wa=!1;function $M(t,e){switch(t){case"compositionend":return Aj(e);case"keypress":return e.which!==32?null:($1=!0,U1);case"textInput":return t=e.data,t===U1&&$1?null:t;default:return null}}function BM(t,e){if(Wa)return t==="compositionend"||!Yv&&Ij(t,e)?(t=Tj(),Qh=Kv=Fo=null,Wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kj&&e.locale!=="ko"?null:e.data;default:return null}}var qM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qM[t.type]:e==="textarea"}function Rj(t,e,n,r){cj(r),e=Of(e,"onChange"),0<e.length&&(n=new Xv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nu=null,Tu=null;function WM(t){Bj(t,0)}function Wm(t){var e=Ka(t);if(nj(e))return t}function HM(t,e){if(t==="change")return e}var Pj=!1;if(Ks){var zg;if(Ks){var Ug="oninput"in document;if(!Ug){var q1=document.createElement("div");q1.setAttribute("oninput","return;"),Ug=typeof q1.oninput=="function"}zg=Ug}else zg=!1;Pj=zg&&(!document.documentMode||9<document.documentMode)}function W1(){nu&&(nu.detachEvent("onpropertychange",Dj),Tu=nu=null)}function Dj(t){if(t.propertyName==="value"&&Wm(Tu)){var e=[];Rj(e,Tu,t,Bv(t)),fj(WM,e)}}function GM(t,e,n){t==="focusin"?(W1(),nu=e,Tu=n,nu.attachEvent("onpropertychange",Dj)):t==="focusout"&&W1()}function KM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wm(Tu)}function XM(t,e){if(t==="click")return Wm(e)}function QM(t,e){if(t==="input"||t==="change")return Wm(e)}function YM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:YM;function ku(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vx.call(e,s)||!Wr(t[s],e[s]))return!1}return!0}function H1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G1(t,e){var n=H1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=H1(n)}}function Mj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Oj(){for(var t=window,e=kf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kf(t.document)}return e}function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JM(t){var e=Oj(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mj(n.ownerDocument.documentElement,n)){if(r!==null&&Jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G1(n,i);var a=G1(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZM=Ks&&"documentMode"in document&&11>=document.documentMode,Ha=null,ry=null,ru=null,sy=!1;function K1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sy||Ha==null||Ha!==kf(r)||(r=Ha,"selectionStart"in r&&Jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ru&&ku(ru,r)||(ru=r,r=Of(ry,"onSelect"),0<r.length&&(e=new Xv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ha)))}function vh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ga={animationend:vh("Animation","AnimationEnd"),animationiteration:vh("Animation","AnimationIteration"),animationstart:vh("Animation","AnimationStart"),transitionend:vh("Transition","TransitionEnd")},$g={},Lj={};Ks&&(Lj=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Hm(t){if($g[t])return $g[t];if(!Ga[t])return t;var e=Ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lj)return $g[t]=e[n];return t}var Vj=Hm("animationend"),Fj=Hm("animationiteration"),zj=Hm("animationstart"),Uj=Hm("transitionend"),$j=new Map,X1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,e){$j.set(t,e),va(e,[t])}for(var Bg=0;Bg<X1.length;Bg++){var qg=X1[Bg],eO=qg.toLowerCase(),tO=qg[0].toUpperCase()+qg.slice(1);yi(eO,"on"+tO)}yi(Vj,"onAnimationEnd");yi(Fj,"onAnimationIteration");yi(zj,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(Uj,"onTransitionEnd");Il("onMouseEnter",["mouseout","mouseover"]);Il("onMouseLeave",["mouseout","mouseover"]);Il("onPointerEnter",["pointerout","pointerover"]);Il("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function Q1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eM(r,e,void 0,t),t.currentTarget=null}function Bj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Q1(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Q1(s,l,u),i=c}}}if(Af)throw t=Zx,Af=!1,Zx=null,t}function yt(t,e){var n=e[cy];n===void 0&&(n=e[cy]=new Set);var r=t+"__bubble";n.has(r)||(qj(e,t,2,!1),n.add(r))}function Wg(t,e,n){var r=0;e&&(r|=4),qj(n,t,r,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[wh]){t[wh]=!0,YE.forEach(function(n){n!=="selectionchange"&&(nO.has(n)||Wg(n,!1,t),Wg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wh]||(e[wh]=!0,Wg("selectionchange",!1,e))}}function qj(t,e,n,r){switch(Cj(e)){case 1:var s=gM;break;case 4:s=xM;break;default:s=Gv}n=s.bind(null,e,n,t),s=void 0,!Jx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=$i(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}fj(function(){var u=i,h=Bv(n),m=[];e:{var p=$j.get(t);if(p!==void 0){var g=Xv,x=t;switch(t){case"keypress":if(Yh(n)===0)break e;case"keydown":case"keyup":g=RM;break;case"focusin":x="focus",g=Fg;break;case"focusout":x="blur",g=Fg;break;case"beforeblur":case"afterblur":g=Fg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=V1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=wM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=MM;break;case Vj:case Fj:case zj:g=NM;break;case Uj:g=LM;break;case"scroll":g=yM;break;case"wheel":g=FM;break;case"copy":case"cut":case"paste":g=EM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=z1}var y=(e&4)!==0,_=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var w=u,S;w!==null;){S=w;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,b!==null&&(T=Su(w,b),T!=null&&y.push(Au(w,T,S)))),_)break;w=w.return}0<y.length&&(p=new g(p,x,null,n,h),m.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Qx&&(x=n.relatedTarget||n.fromElement)&&($i(x)||x[Xs]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?$i(x):null,x!==null&&(_=wa(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(y=V1,T="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=z1,T="onPointerLeave",b="onPointerEnter",w="pointer"),_=g==null?p:Ka(g),S=x==null?p:Ka(x),p=new y(T,w+"leave",g,n,h),p.target=_,p.relatedTarget=S,T=null,$i(h)===u&&(y=new y(b,w+"enter",x,n,h),y.target=S,y.relatedTarget=_,T=y),_=T,g&&x)t:{for(y=g,b=x,w=0,S=y;S;S=Ma(S))w++;for(S=0,T=b;T;T=Ma(T))S++;for(;0<w-S;)y=Ma(y),w--;for(;0<S-w;)b=Ma(b),S--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=Ma(y),b=Ma(b)}y=null}else y=null;g!==null&&Y1(m,p,g,y,!1),x!==null&&_!==null&&Y1(m,_,x,y,!0)}}e:{if(p=u?Ka(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var A=HM;else if(B1(p))if(Pj)A=QM;else{A=KM;var M=GM}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=XM);if(A&&(A=A(t,u))){Rj(m,A,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Wx(p,"number",p.value)}switch(M=u?Ka(u):window,t){case"focusin":(B1(M)||M.contentEditable==="true")&&(Ha=M,ry=u,ru=null);break;case"focusout":ru=ry=Ha=null;break;case"mousedown":sy=!0;break;case"contextmenu":case"mouseup":case"dragend":sy=!1,K1(m,n,h);break;case"selectionchange":if(ZM)break;case"keydown":case"keyup":K1(m,n,h)}var N;if(Yv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Wa?Ij(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(kj&&n.locale!=="ko"&&(Wa||E!=="onCompositionStart"?E==="onCompositionEnd"&&Wa&&(N=Tj()):(Fo=h,Kv="value"in Fo?Fo.value:Fo.textContent,Wa=!0)),M=Of(u,E),0<M.length&&(E=new F1(E,t,null,n,h),m.push({event:E,listeners:M}),N?E.data=N:(N=Aj(n),N!==null&&(E.data=N)))),(N=UM?$M(t,n):BM(t,n))&&(u=Of(u,"onBeforeInput"),0<u.length&&(h=new F1("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:u}),h.data=N))}Bj(m,e)})}function Au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Of(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Su(t,n),i!=null&&r.unshift(Au(t,i,s)),i=Su(t,e),i!=null&&r.push(Au(t,i,s))),t=t.return}return r}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y1(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Su(n,i),c!=null&&a.unshift(Au(n,c,l))):s||(c=Su(n,i),c!=null&&a.push(Au(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var rO=/\r\n?/g,sO=/\u0000|\uFFFD/g;function J1(t){return(typeof t=="string"?t:""+t).replace(rO,`
`).replace(sO,"")}function bh(t,e,n){if(e=J1(e),J1(t)!==e&&n)throw Error(ne(425))}function Lf(){}var oy=null,iy=null;function ay(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ly=typeof setTimeout=="function"?setTimeout:void 0,oO=typeof clearTimeout=="function"?clearTimeout:void 0,Z1=typeof Promise=="function"?Promise:void 0,iO=typeof queueMicrotask=="function"?queueMicrotask:typeof Z1<"u"?function(t){return Z1.resolve(null).then(t).catch(aO)}:ly;function aO(t){setTimeout(function(){throw t})}function Gg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cu(e)}function Wo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oc=Math.random().toString(36).slice(2),hs="__reactFiber$"+oc,Ru="__reactProps$"+oc,Xs="__reactContainer$"+oc,cy="__reactEvents$"+oc,lO="__reactListeners$"+oc,cO="__reactHandles$"+oc;function $i(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xs]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=e_(t);t!==null;){if(n=t[hs])return n;t=e_(t)}return e}t=n,n=t.parentNode}return null}function pd(t){return t=t[hs]||t[Xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ka(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Gm(t){return t[Ru]||null}var uy=[],Xa=-1;function vi(t){return{current:t}}function vt(t){0>Xa||(t.current=uy[Xa],uy[Xa]=null,Xa--)}function mt(t,e){Xa++,uy[Xa]=t.current,t.current=e}var ai={},Sn=vi(ai),Gn=vi(!1),sa=ai;function Al(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Kn(t){return t=t.childContextTypes,t!=null}function Vf(){vt(Gn),vt(Sn)}function t_(t,e,n){if(Sn.current!==ai)throw Error(ne(168));mt(Sn,e),mt(Gn,n)}function Wj(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,G5(t)||"Unknown",s));return Et({},n,r)}function Ff(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,sa=Sn.current,mt(Sn,t),mt(Gn,Gn.current),!0}function n_(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=Wj(t,e,sa),r.__reactInternalMemoizedMergedChildContext=t,vt(Gn),vt(Sn),mt(Sn,t)):vt(Gn),mt(Gn,n)}var Ls=null,Km=!1,Kg=!1;function Hj(t){Ls===null?Ls=[t]:Ls.push(t)}function uO(t){Km=!0,Hj(t)}function wi(){if(!Kg&&Ls!==null){Kg=!0;var t=0,e=at;try{var n=Ls;for(at=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ls=null,Km=!1}catch(s){throw Ls!==null&&(Ls=Ls.slice(t+1)),xj(qv,wi),s}finally{at=e,Kg=!1}}return null}var Qa=[],Ya=0,zf=null,Uf=0,xr=[],yr=0,oa=null,Fs=1,zs="";function Oi(t,e){Qa[Ya++]=Uf,Qa[Ya++]=zf,zf=t,Uf=e}function Gj(t,e,n){xr[yr++]=Fs,xr[yr++]=zs,xr[yr++]=oa,oa=t;var r=Fs;t=zs;var s=32-zr(r)-1;r&=~(1<<s),n+=1;var i=32-zr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Fs=1<<32-zr(e)+s|n<<s|r,zs=i+t}else Fs=1<<i|n<<s|r,zs=t}function Zv(t){t.return!==null&&(Oi(t,1),Gj(t,1,0))}function e0(t){for(;t===zf;)zf=Qa[--Ya],Qa[Ya]=null,Uf=Qa[--Ya],Qa[Ya]=null;for(;t===oa;)oa=xr[--yr],xr[yr]=null,zs=xr[--yr],xr[yr]=null,Fs=xr[--yr],xr[yr]=null}var ar=null,sr=null,wt=!1,Or=null;function Kj(t,e){var n=wr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function r_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ar=t,sr=Wo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ar=t,sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oa!==null?{id:Fs,overflow:zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ar=t,sr=null,!0):!1;default:return!1}}function dy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hy(t){if(wt){var e=sr;if(e){var n=e;if(!r_(t,e)){if(dy(t))throw Error(ne(418));e=Wo(n.nextSibling);var r=ar;e&&r_(t,e)?Kj(r,n):(t.flags=t.flags&-4097|2,wt=!1,ar=t)}}else{if(dy(t))throw Error(ne(418));t.flags=t.flags&-4097|2,wt=!1,ar=t}}}function s_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function _h(t){if(t!==ar)return!1;if(!wt)return s_(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ay(t.type,t.memoizedProps)),e&&(e=sr)){if(dy(t))throw Xj(),Error(ne(418));for(;e;)Kj(t,e),e=Wo(e.nextSibling)}if(s_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sr=Wo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sr=null}}else sr=ar?Wo(t.stateNode.nextSibling):null;return!0}function Xj(){for(var t=sr;t;)t=Wo(t.nextSibling)}function Rl(){sr=ar=null,wt=!1}function t0(t){Or===null?Or=[t]:Or.push(t)}var dO=io.ReactCurrentBatchConfig;function Vc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Nh(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o_(t){var e=t._init;return e(t._payload)}function Qj(t){function e(b,w){if(t){var S=b.deletions;S===null?(b.deletions=[w],b.flags|=16):S.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=Xo(b,w),b.index=0,b.sibling=null,b}function i(b,w,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<w?(b.flags|=2,w):S):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,w,S,T){return w===null||w.tag!==6?(w=tx(S,b.mode,T),w.return=b,w):(w=s(w,S),w.return=b,w)}function c(b,w,S,T){var A=S.type;return A===qa?h(b,w,S.props.children,T,S.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Eo&&o_(A)===w.type)?(T=s(w,S.props),T.ref=Vc(b,w,S),T.return=b,T):(T=sf(S.type,S.key,S.props,null,b.mode,T),T.ref=Vc(b,w,S),T.return=b,T)}function u(b,w,S,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=nx(S,b.mode,T),w.return=b,w):(w=s(w,S.children||[]),w.return=b,w)}function h(b,w,S,T,A){return w===null||w.tag!==7?(w=Ji(S,b.mode,T,A),w.return=b,w):(w=s(w,S),w.return=b,w)}function m(b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tx(""+w,b.mode,S),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hh:return S=sf(w.type,w.key,w.props,null,b.mode,S),S.ref=Vc(b,null,w),S.return=b,S;case Ba:return w=nx(w,b.mode,S),w.return=b,w;case Eo:var T=w._init;return m(b,T(w._payload),S)}if(qc(w)||Pc(w))return w=Ji(w,b.mode,S,null),w.return=b,w;Nh(b,w)}return null}function p(b,w,S,T){var A=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:l(b,w,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hh:return S.key===A?c(b,w,S,T):null;case Ba:return S.key===A?u(b,w,S,T):null;case Eo:return A=S._init,p(b,w,A(S._payload),T)}if(qc(S)||Pc(S))return A!==null?null:h(b,w,S,T,null);Nh(b,S)}return null}function g(b,w,S,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(S)||null,l(w,b,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hh:return b=b.get(T.key===null?S:T.key)||null,c(w,b,T,A);case Ba:return b=b.get(T.key===null?S:T.key)||null,u(w,b,T,A);case Eo:var M=T._init;return g(b,w,S,M(T._payload),A)}if(qc(T)||Pc(T))return b=b.get(S)||null,h(w,b,T,A,null);Nh(w,T)}return null}function x(b,w,S,T){for(var A=null,M=null,N=w,E=w=0,j=null;N!==null&&E<S.length;E++){N.index>E?(j=N,N=null):j=N.sibling;var k=p(b,N,S[E],T);if(k===null){N===null&&(N=j);break}t&&N&&k.alternate===null&&e(b,N),w=i(k,w,E),M===null?A=k:M.sibling=k,M=k,N=j}if(E===S.length)return n(b,N),wt&&Oi(b,E),A;if(N===null){for(;E<S.length;E++)N=m(b,S[E],T),N!==null&&(w=i(N,w,E),M===null?A=N:M.sibling=N,M=N);return wt&&Oi(b,E),A}for(N=r(b,N);E<S.length;E++)j=g(N,b,E,S[E],T),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?E:j.key),w=i(j,w,E),M===null?A=j:M.sibling=j,M=j);return t&&N.forEach(function(I){return e(b,I)}),wt&&Oi(b,E),A}function y(b,w,S,T){var A=Pc(S);if(typeof A!="function")throw Error(ne(150));if(S=A.call(S),S==null)throw Error(ne(151));for(var M=A=null,N=w,E=w=0,j=null,k=S.next();N!==null&&!k.done;E++,k=S.next()){N.index>E?(j=N,N=null):j=N.sibling;var I=p(b,N,k.value,T);if(I===null){N===null&&(N=j);break}t&&N&&I.alternate===null&&e(b,N),w=i(I,w,E),M===null?A=I:M.sibling=I,M=I,N=j}if(k.done)return n(b,N),wt&&Oi(b,E),A;if(N===null){for(;!k.done;E++,k=S.next())k=m(b,k.value,T),k!==null&&(w=i(k,w,E),M===null?A=k:M.sibling=k,M=k);return wt&&Oi(b,E),A}for(N=r(b,N);!k.done;E++,k=S.next())k=g(N,b,E,k.value,T),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),w=i(k,w,E),M===null?A=k:M.sibling=k,M=k);return t&&N.forEach(function(D){return e(b,D)}),wt&&Oi(b,E),A}function _(b,w,S,T){if(typeof S=="object"&&S!==null&&S.type===qa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case hh:e:{for(var A=S.key,M=w;M!==null;){if(M.key===A){if(A=S.type,A===qa){if(M.tag===7){n(b,M.sibling),w=s(M,S.props.children),w.return=b,b=w;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Eo&&o_(A)===M.type){n(b,M.sibling),w=s(M,S.props),w.ref=Vc(b,M,S),w.return=b,b=w;break e}n(b,M);break}else e(b,M);M=M.sibling}S.type===qa?(w=Ji(S.props.children,b.mode,T,S.key),w.return=b,b=w):(T=sf(S.type,S.key,S.props,null,b.mode,T),T.ref=Vc(b,w,S),T.return=b,b=T)}return a(b);case Ba:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(b,w.sibling),w=s(w,S.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=nx(S,b.mode,T),w.return=b,b=w}return a(b);case Eo:return M=S._init,_(b,w,M(S._payload),T)}if(qc(S))return x(b,w,S,T);if(Pc(S))return y(b,w,S,T);Nh(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,S),w.return=b,b=w):(n(b,w),w=tx(S,b.mode,T),w.return=b,b=w),a(b)):n(b,w)}return _}var Pl=Qj(!0),Yj=Qj(!1),$f=vi(null),Bf=null,Ja=null,n0=null;function r0(){n0=Ja=Bf=null}function s0(t){var e=$f.current;vt($f),t._currentValue=e}function fy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ll(t,e){Bf=t,n0=Ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function jr(t){var e=t._currentValue;if(n0!==t)if(t={context:t,memoizedValue:e,next:null},Ja===null){if(Bf===null)throw Error(ne(308));Ja=t,Bf.dependencies={lanes:0,firstContext:t}}else Ja=Ja.next=t;return e}var Bi=null;function o0(t){Bi===null?Bi=[t]:Bi.push(t)}function Jj(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,o0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qs(t,r)}function Qs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jo=!1;function i0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ho(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qs(t,n)}return s=r.interleaved,s===null?(e.next=e,o0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qs(t,n)}function Jh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wv(t,n)}}function i_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qf(t,e,n,r){var s=t.updateQueue;jo=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,y=l;switch(p=e,g=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){m=x.call(g,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(g,m,p):x,p==null)break e;m=Et({},m,p);break e;case 2:jo=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=m):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);aa|=a,t.lanes=a,t.memoizedState=m}}function a_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var gd={},ps=vi(gd),Pu=vi(gd),Du=vi(gd);function qi(t){if(t===gd)throw Error(ne(174));return t}function a0(t,e){switch(mt(Du,e),mt(Pu,t),mt(ps,gd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gx(e,t)}vt(ps),mt(ps,e)}function Dl(){vt(ps),vt(Pu),vt(Du)}function eC(t){qi(Du.current);var e=qi(ps.current),n=Gx(e,t.type);e!==n&&(mt(Pu,t),mt(ps,n))}function l0(t){Pu.current===t&&(vt(ps),vt(Pu))}var _t=vi(0);function Wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xg=[];function c0(){for(var t=0;t<Xg.length;t++)Xg[t]._workInProgressVersionPrimary=null;Xg.length=0}var Zh=io.ReactCurrentDispatcher,Qg=io.ReactCurrentBatchConfig,ia=0,St=null,$t=null,Yt=null,Hf=!1,su=!1,Mu=0,hO=0;function hn(){throw Error(ne(321))}function u0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function d0(t,e,n,r,s,i){if(ia=i,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zh.current=t===null||t.memoizedState===null?gO:xO,t=n(r,s),su){i=0;do{if(su=!1,Mu=0,25<=i)throw Error(ne(301));i+=1,Yt=$t=null,e.updateQueue=null,Zh.current=yO,t=n(r,s)}while(su)}if(Zh.current=Gf,e=$t!==null&&$t.next!==null,ia=0,Yt=$t=St=null,Hf=!1,e)throw Error(ne(300));return t}function h0(){var t=Mu!==0;return Mu=0,t}function as(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?St.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Cr(){if($t===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=Yt===null?St.memoizedState:Yt.next;if(e!==null)Yt=e,$t=t;else{if(t===null)throw Error(ne(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Yt===null?St.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Ou(t,e){return typeof e=="function"?e(t):e}function Yg(t){var e=Cr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=$t,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((ia&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,St.lanes|=h,aa|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Wr(r,e.memoizedState)||(Hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,St.lanes|=i,aa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jg(t){var e=Cr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Wr(i,e.memoizedState)||(Hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tC(){}function nC(t,e){var n=St,r=Cr(),s=e(),i=!Wr(r.memoizedState,s);if(i&&(r.memoizedState=s,Hn=!0),r=r.queue,f0(oC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,sC.bind(null,n,r,s,e),void 0,null),tn===null)throw Error(ne(349));ia&30||rC(n,e,s)}return s}function rC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sC(t,e,n,r){e.value=n,e.getSnapshot=r,iC(e)&&aC(t)}function oC(t,e,n){return n(function(){iC(e)&&aC(t)})}function iC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function aC(t){var e=Qs(t,1);e!==null&&Ur(e,t,1,-1)}function l_(t){var e=as();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:t},e.queue=t,t=t.dispatch=pO.bind(null,St,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lC(){return Cr().memoizedState}function ef(t,e,n,r){var s=as();St.flags|=t,s.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function Xm(t,e,n,r){var s=Cr();r=r===void 0?null:r;var i=void 0;if($t!==null){var a=$t.memoizedState;if(i=a.destroy,r!==null&&u0(r,a.deps)){s.memoizedState=Lu(e,n,i,r);return}}St.flags|=t,s.memoizedState=Lu(1|e,n,i,r)}function c_(t,e){return ef(8390656,8,t,e)}function f0(t,e){return Xm(2048,8,t,e)}function cC(t,e){return Xm(4,2,t,e)}function uC(t,e){return Xm(4,4,t,e)}function dC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hC(t,e,n){return n=n!=null?n.concat([t]):null,Xm(4,4,dC.bind(null,e,t),n)}function m0(){}function fC(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mC(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pC(t,e,n){return ia&21?(Wr(n,e)||(n=wj(),St.lanes|=n,aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n)}function fO(t,e){var n=at;at=n!==0&&4>n?n:4,t(!0);var r=Qg.transition;Qg.transition={};try{t(!1),e()}finally{at=n,Qg.transition=r}}function gC(){return Cr().memoizedState}function mO(t,e,n){var r=Ko(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xC(t))yC(e,n);else if(n=Jj(t,e,n,r),n!==null){var s=Rn();Ur(n,t,r,s),vC(n,e,r)}}function pO(t,e,n){var r=Ko(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xC(t))yC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Wr(l,a)){var c=e.interleaved;c===null?(s.next=s,o0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Jj(t,e,s,r),n!==null&&(s=Rn(),Ur(n,t,r,s),vC(n,e,r))}}function xC(t){var e=t.alternate;return t===St||e!==null&&e===St}function yC(t,e){su=Hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wv(t,n)}}var Gf={readContext:jr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},gO={readContext:jr,useCallback:function(t,e){return as().memoizedState=[t,e===void 0?null:e],t},useContext:jr,useEffect:c_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ef(4194308,4,dC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ef(4194308,4,t,e)},useInsertionEffect:function(t,e){return ef(4,2,t,e)},useMemo:function(t,e){var n=as();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=as();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mO.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=as();return t={current:t},e.memoizedState=t},useState:l_,useDebugValue:m0,useDeferredValue:function(t){return as().memoizedState=t},useTransition:function(){var t=l_(!1),e=t[0];return t=fO.bind(null,t[1]),as().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=as();if(wt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),tn===null)throw Error(ne(349));ia&30||rC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,c_(oC.bind(null,r,i,t),[t]),r.flags|=2048,Lu(9,sC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=as(),e=tn.identifierPrefix;if(wt){var n=zs,r=Fs;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xO={readContext:jr,useCallback:fC,useContext:jr,useEffect:f0,useImperativeHandle:hC,useInsertionEffect:cC,useLayoutEffect:uC,useMemo:mC,useReducer:Yg,useRef:lC,useState:function(){return Yg(Ou)},useDebugValue:m0,useDeferredValue:function(t){var e=Cr();return pC(e,$t.memoizedState,t)},useTransition:function(){var t=Yg(Ou)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:tC,useSyncExternalStore:nC,useId:gC,unstable_isNewReconciler:!1},yO={readContext:jr,useCallback:fC,useContext:jr,useEffect:f0,useImperativeHandle:hC,useInsertionEffect:cC,useLayoutEffect:uC,useMemo:mC,useReducer:Jg,useRef:lC,useState:function(){return Jg(Ou)},useDebugValue:m0,useDeferredValue:function(t){var e=Cr();return $t===null?e.memoizedState=t:pC(e,$t.memoizedState,t)},useTransition:function(){var t=Jg(Ou)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:tC,useSyncExternalStore:nC,useId:gC,unstable_isNewReconciler:!1};function Rr(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function my(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qm={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rn(),s=Ko(t),i=qs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ho(t,i,s),e!==null&&(Ur(e,t,s,r),Jh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rn(),s=Ko(t),i=qs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ho(t,i,s),e!==null&&(Ur(e,t,s,r),Jh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rn(),r=Ko(t),s=qs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ho(t,s,r),e!==null&&(Ur(e,t,r,n),Jh(e,t,r))}};function u_(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ku(n,r)||!ku(s,i):!0}function wC(t,e,n){var r=!1,s=ai,i=e.contextType;return typeof i=="object"&&i!==null?i=jr(i):(s=Kn(e)?sa:Sn.current,r=e.contextTypes,i=(r=r!=null)?Al(t,s):ai),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function d_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qm.enqueueReplaceState(e,e.state,null)}function py(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},i0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jr(i):(i=Kn(e)?sa:Sn.current,s.context=Al(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(my(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qm.enqueueReplaceState(s,s.state,null),qf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ml(t,e){try{var n="",r=e;do n+=H5(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vO=typeof WeakMap=="function"?WeakMap:Map;function bC(t,e,n){n=qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xf||(Xf=!0,jy=r),gy(t,e)},n}function _C(t,e,n){n=qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gy(t,e),typeof r!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function h_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=PO.bind(null,t,e,n),e.then(t,t))}function f_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qs(-1,1),e.tag=2,Ho(n,e,1))),n.lanes|=1),t)}var wO=io.ReactCurrentOwner,Hn=!1;function Tn(t,e,n,r){e.child=t===null?Yj(e,null,n,r):Pl(e,t.child,n,r)}function p_(t,e,n,r,s){n=n.render;var i=e.ref;return ll(e,s),r=d0(t,e,n,r,i,s),n=h0(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(wt&&n&&Zv(e),e.flags|=1,Tn(t,e,r,s),e.child)}function g_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NC(t,e,i,r,s)):(t=sf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(a,r)&&t.ref===e.ref)return Ys(t,e,s)}return e.flags|=1,t=Xo(i,r),t.ref=e.ref,t.return=e,e.child=t}function NC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ku(i,r)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Ys(t,e,s)}return xy(t,e,n,r,s)}function SC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(el,er),er|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(el,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,mt(el,er),er|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,mt(el,er),er|=r;return Tn(t,e,s,n),e.child}function EC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xy(t,e,n,r,s){var i=Kn(n)?sa:Sn.current;return i=Al(e,i),ll(e,s),n=d0(t,e,n,r,i,s),r=h0(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(wt&&r&&Zv(e),e.flags|=1,Tn(t,e,n,s),e.child)}function x_(t,e,n,r,s){if(Kn(n)){var i=!0;Ff(e)}else i=!1;if(ll(e,s),e.stateNode===null)tf(t,e),wC(e,n,r),py(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=Kn(n)?sa:Sn.current,u=Al(e,u));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&d_(e,a,r,u),jo=!1;var p=e.memoizedState;a.state=p,qf(e,r,a,s),c=e.memoizedState,l!==r||p!==c||Gn.current||jo?(typeof h=="function"&&(my(e,n,h,r),c=e.memoizedState),(l=jo||u_(e,n,l,r,p,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Zj(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Rr(e.type,l),a.props=u,m=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=jr(c):(c=Kn(n)?sa:Sn.current,c=Al(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||p!==c)&&d_(e,a,r,c),jo=!1,p=e.memoizedState,a.state=p,qf(e,r,a,s);var x=e.memoizedState;l!==m||p!==x||Gn.current||jo?(typeof g=="function"&&(my(e,n,g,r),x=e.memoizedState),(u=jo||u_(e,n,u,r,p,x,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return yy(t,e,n,r,i,s)}function yy(t,e,n,r,s,i){EC(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&n_(e,n,!1),Ys(t,e,i);r=e.stateNode,wO.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pl(e,t.child,null,i),e.child=Pl(e,null,l,i)):Tn(t,e,l,i),e.memoizedState=r.state,s&&n_(e,n,!0),e.child}function jC(t){var e=t.stateNode;e.pendingContext?t_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t_(t,e.context,!1),a0(t,e.containerInfo)}function y_(t,e,n,r,s){return Rl(),t0(s),e.flags|=256,Tn(t,e,n,r),e.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function wy(t){return{baseLanes:t,cachePool:null,transitions:null}}function CC(t,e,n){var r=e.pendingProps,s=_t.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mt(_t,s&1),t===null)return hy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Zm(a,r,0,null),t=Ji(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wy(n),e.memoizedState=vy,t):p0(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return bO(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xo(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xo(l,i):(i=Ji(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?wy(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=vy,r}return i=t.child,t=i.sibling,r=Xo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function p0(t,e){return e=Zm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sh(t,e,n,r){return r!==null&&t0(r),Pl(e,t.child,null,n),t=p0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bO(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Zg(Error(ne(422))),Sh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zm({mode:"visible",children:r.children},s,0,null),i=Ji(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pl(e,t.child,null,a),e.child.memoizedState=wy(a),e.memoizedState=vy,i);if(!(e.mode&1))return Sh(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ne(419)),r=Zg(i,r,void 0),Sh(t,e,a,r)}if(l=(a&t.childLanes)!==0,Hn||l){if(r=tn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qs(t,s),Ur(r,t,s,-1))}return b0(),r=Zg(Error(ne(421))),Sh(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,sr=Wo(s.nextSibling),ar=e,wt=!0,Or=null,t!==null&&(xr[yr++]=Fs,xr[yr++]=zs,xr[yr++]=oa,Fs=t.id,zs=t.overflow,oa=e),e=p0(e,r.children),e.flags|=4096,e)}function v_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fy(t.return,e,n)}function ex(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function TC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tn(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v_(t,n,e);else if(t.tag===19)v_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mt(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ex(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ex(e,!0,n,null,i);break;case"together":ex(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Xo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _O(t,e,n){switch(e.tag){case 3:jC(e),Rl();break;case 5:eC(e);break;case 1:Kn(e.type)&&Ff(e);break;case 4:a0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;mt($f,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?CC(t,e,n):(mt(_t,_t.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);mt(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,SC(t,e,n)}return Ys(t,e,n)}var kC,by,IC,AC;kC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};by=function(){};IC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qi(ps.current);var i=null;switch(n){case"input":s=Bx(t,s),r=Bx(t,r),i=[];break;case"select":s=Et({},s,{value:void 0}),r=Et({},r,{value:void 0}),i=[];break;case"textarea":s=Hx(t,s),r=Hx(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lf)}Kx(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_u.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_u.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&yt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};AC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fc(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NO(t,e,n){var r=e.pendingProps;switch(e0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Kn(e.type)&&Vf(),fn(e),null;case 3:return r=e.stateNode,Dl(),vt(Gn),vt(Sn),c0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(ky(Or),Or=null))),by(t,e),fn(e),null;case 5:l0(e);var s=qi(Du.current);if(n=e.type,t!==null&&e.stateNode!=null)IC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return fn(e),null}if(t=qi(ps.current),_h(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[Ru]=i,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<Hc.length;s++)yt(Hc[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":T1(r,i),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},yt("invalid",r);break;case"textarea":I1(r,i),yt("invalid",r)}Kx(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&bh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bh(r.textContent,l,t),s=["children",""+l]):_u.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&yt("scroll",r)}switch(n){case"input":fh(r),k1(r,i,!0);break;case"textarea":fh(r),A1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Lf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oj(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hs]=e,t[Ru]=r,kC(t,e,!1,!1),e.stateNode=t;e:{switch(a=Xx(n,r),n){case"dialog":yt("cancel",t),yt("close",t),s=r;break;case"iframe":case"object":case"embed":yt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hc.length;s++)yt(Hc[s],t);s=r;break;case"source":yt("error",t),s=r;break;case"img":case"image":case"link":yt("error",t),yt("load",t),s=r;break;case"details":yt("toggle",t),s=r;break;case"input":T1(t,r),s=Bx(t,r),yt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Et({},r,{value:void 0}),yt("invalid",t);break;case"textarea":I1(t,r),s=Hx(t,r),yt("invalid",t);break;default:s=r}Kx(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lj(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ij(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nu(t,c):typeof c=="number"&&Nu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_u.hasOwnProperty(i)?c!=null&&i==="onScroll"&&yt("scroll",t):c!=null&&Fv(t,i,c,a))}switch(n){case"input":fh(t),k1(t,r,!1);break;case"textarea":fh(t),A1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?sl(t,!!r.multiple,i,!1):r.defaultValue!=null&&sl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)AC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=qi(Du.current),qi(ps.current),_h(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=ar,t!==null))switch(t.tag){case 3:bh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return fn(e),null;case 13:if(vt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&sr!==null&&e.mode&1&&!(e.flags&128))Xj(),Rl(),e.flags|=98560,i=!1;else if(i=_h(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[hs]=e}else Rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),i=!1}else Or!==null&&(ky(Or),Or=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?qt===0&&(qt=3):b0())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Dl(),by(t,e),t===null&&Iu(e.stateNode.containerInfo),fn(e),null;case 10:return s0(e.type._context),fn(e),null;case 17:return Kn(e.type)&&Vf(),fn(e),null;case 19:if(vt(_t),i=e.memoizedState,i===null)return fn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Fc(i,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Wf(t),a!==null){for(e.flags|=128,Fc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mt()>Ol&&(e.flags|=128,r=!0,Fc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wf(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!wt)return fn(e),null}else 2*Mt()-i.renderingStartTime>Ol&&n!==1073741824&&(e.flags|=128,r=!0,Fc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,n=_t.current,mt(_t,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return w0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function SO(t,e){switch(e0(e),e.tag){case 1:return Kn(e.type)&&Vf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dl(),vt(Gn),vt(Sn),c0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l0(e),null;case 13:if(vt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Rl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(_t),null;case 4:return Dl(),null;case 10:return s0(e.type._context),null;case 22:case 23:return w0(),null;case 24:return null;default:return null}}var Eh=!1,yn=!1,EO=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Za(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function _y(t,e,n){try{n()}catch(r){kt(t,e,r)}}var w_=!1;function jO(t,e){if(oy=Df,t=Oj(),Jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,m=t,p=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++u===s&&(l=a),p===i&&++h===r&&(c=a),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(iy={focusedElem:t,selectionRange:n},Df=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,_=x.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Rr(e.type,y),_);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(T){kt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return x=w_,w_=!1,x}function ou(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_y(e,n,i)}s=s.next}while(s!==r)}}function Ym(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ny(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RC(t){var e=t.alternate;e!==null&&(t.alternate=null,RC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[Ru],delete e[cy],delete e[lO],delete e[cO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PC(t){return t.tag===5||t.tag===3||t.tag===4}function b_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lf));else if(r!==4&&(t=t.child,t!==null))for(Sy(t,e,n),t=t.sibling;t!==null;)Sy(t,e,n),t=t.sibling}function Ey(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ey(t,e,n),t=t.sibling;t!==null;)Ey(t,e,n),t=t.sibling}var rn=null,Mr=!1;function vo(t,e,n){for(n=n.child;n!==null;)DC(t,e,n),n=n.sibling}function DC(t,e,n){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Bm,n)}catch{}switch(n.tag){case 5:yn||Za(n,e);case 6:var r=rn,s=Mr;rn=null,vo(t,e,n),rn=r,Mr=s,rn!==null&&(Mr?(t=rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rn.removeChild(n.stateNode));break;case 18:rn!==null&&(Mr?(t=rn,n=n.stateNode,t.nodeType===8?Gg(t.parentNode,n):t.nodeType===1&&Gg(t,n),Cu(t)):Gg(rn,n.stateNode));break;case 4:r=rn,s=Mr,rn=n.stateNode.containerInfo,Mr=!0,vo(t,e,n),rn=r,Mr=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&_y(n,e,a),s=s.next}while(s!==r)}vo(t,e,n);break;case 1:if(!yn&&(Za(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){kt(n,e,l)}vo(t,e,n);break;case 21:vo(t,e,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,vo(t,e,n),yn=r):vo(t,e,n);break;default:vo(t,e,n)}}function __(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EO),e.forEach(function(r){var s=MO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,Mr=!1;break e;case 3:rn=l.stateNode.containerInfo,Mr=!0;break e;case 4:rn=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(rn===null)throw Error(ne(160));DC(i,a,s),rn=null,Mr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){kt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MC(e,t),e=e.sibling}function MC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),os(t),r&4){try{ou(3,t,t.return),Ym(3,t)}catch(y){kt(t,t.return,y)}try{ou(5,t,t.return)}catch(y){kt(t,t.return,y)}}break;case 1:Ir(e,t),os(t),r&512&&n!==null&&Za(n,n.return);break;case 5:if(Ir(e,t),os(t),r&512&&n!==null&&Za(n,n.return),t.flags&32){var s=t.stateNode;try{Nu(s,"")}catch(y){kt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rj(s,i),Xx(l,a);var u=Xx(l,i);for(a=0;a<c.length;a+=2){var h=c[a],m=c[a+1];h==="style"?lj(s,m):h==="dangerouslySetInnerHTML"?ij(s,m):h==="children"?Nu(s,m):Fv(s,h,m,u)}switch(l){case"input":qx(s,i);break;case"textarea":sj(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?sl(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?sl(s,!!i.multiple,i.defaultValue,!0):sl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ru]=i}catch(y){kt(t,t.return,y)}}break;case 6:if(Ir(e,t),os(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){kt(t,t.return,y)}}break;case 3:if(Ir(e,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cu(e.containerInfo)}catch(y){kt(t,t.return,y)}break;case 4:Ir(e,t),os(t);break;case 13:Ir(e,t),os(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(y0=Mt())),r&4&&__(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(u=yn)||h,Ir(e,t),yn=u):Ir(e,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(xe=t,h=t.child;h!==null;){for(m=xe=h;xe!==null;){switch(p=xe,g=p.child,p.tag){case 0:case 11:case 14:case 15:ou(4,p,p.return);break;case 1:Za(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){kt(r,n,y)}}break;case 5:Za(p,p.return);break;case 22:if(p.memoizedState!==null){S_(m);continue}}g!==null?(g.return=p,xe=g):S_(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=aj("display",a))}catch(y){kt(t,t.return,y)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(y){kt(t,t.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ir(e,t),os(t),r&4&&__(t);break;case 21:break;default:Ir(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PC(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nu(s,""),r.flags&=-33);var i=b_(t);Ey(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=b_(t);Sy(t,l,a);break;default:throw Error(ne(161))}}catch(c){kt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CO(t,e,n){xe=t,OC(t)}function OC(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Eh;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||yn;l=Eh;var u=yn;if(Eh=a,(yn=c)&&!u)for(xe=s;xe!==null;)a=xe,c=a.child,a.tag===22&&a.memoizedState!==null?E_(s):c!==null?(c.return=a,xe=c):E_(s);for(;i!==null;)xe=i,OC(i),i=i.sibling;xe=s,Eh=l,yn=u}N_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):N_(t)}}function N_(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Ym(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Rr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&a_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a_(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Cu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}yn||e.flags&512&&Ny(e)}catch(p){kt(e,e.return,p)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function S_(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function E_(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ym(4,e)}catch(c){kt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){kt(e,s,c)}}var i=e.return;try{Ny(e)}catch(c){kt(e,i,c)}break;case 5:var a=e.return;try{Ny(e)}catch(c){kt(e,a,c)}}}catch(c){kt(e,e.return,c)}if(e===t){xe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,xe=l;break}xe=e.return}}var TO=Math.ceil,Kf=io.ReactCurrentDispatcher,g0=io.ReactCurrentOwner,_r=io.ReactCurrentBatchConfig,Ye=0,tn=null,Lt=null,an=0,er=0,el=vi(0),qt=0,Vu=null,aa=0,Jm=0,x0=0,iu=null,$n=null,y0=0,Ol=1/0,Ms=null,Xf=!1,jy=null,Go=null,jh=!1,zo=null,Qf=0,au=0,Cy=null,nf=-1,rf=0;function Rn(){return Ye&6?Mt():nf!==-1?nf:nf=Mt()}function Ko(t){return t.mode&1?Ye&2&&an!==0?an&-an:dO.transition!==null?(rf===0&&(rf=wj()),rf):(t=at,t!==0||(t=window.event,t=t===void 0?16:Cj(t.type)),t):1}function Ur(t,e,n,r){if(50<au)throw au=0,Cy=null,Error(ne(185));fd(t,n,r),(!(Ye&2)||t!==tn)&&(t===tn&&(!(Ye&2)&&(Jm|=n),qt===4&&ko(t,an)),Xn(t,r),n===1&&Ye===0&&!(e.mode&1)&&(Ol=Mt()+500,Km&&wi()))}function Xn(t,e){var n=t.callbackNode;dM(t,e);var r=Pf(t,t===tn?an:0);if(r===0)n!==null&&D1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&D1(n),e===1)t.tag===0?uO(j_.bind(null,t)):Hj(j_.bind(null,t)),iO(function(){!(Ye&6)&&wi()}),n=null;else{switch(bj(r)){case 1:n=qv;break;case 4:n=yj;break;case 16:n=Rf;break;case 536870912:n=vj;break;default:n=Rf}n=qC(n,LC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LC(t,e){if(nf=-1,rf=0,Ye&6)throw Error(ne(327));var n=t.callbackNode;if(cl()&&t.callbackNode!==n)return null;var r=Pf(t,t===tn?an:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yf(t,r);else{e=r;var s=Ye;Ye|=2;var i=FC();(tn!==t||an!==e)&&(Ms=null,Ol=Mt()+500,Yi(t,e));do try{AO();break}catch(l){VC(t,l)}while(!0);r0(),Kf.current=i,Ye=s,Lt!==null?e=0:(tn=null,an=0,e=qt)}if(e!==0){if(e===2&&(s=ey(t),s!==0&&(r=s,e=Ty(t,s))),e===1)throw n=Vu,Yi(t,0),ko(t,r),Xn(t,Mt()),n;if(e===6)ko(t,r);else{if(s=t.current.alternate,!(r&30)&&!kO(s)&&(e=Yf(t,r),e===2&&(i=ey(t),i!==0&&(r=i,e=Ty(t,i))),e===1))throw n=Vu,Yi(t,0),ko(t,r),Xn(t,Mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Li(t,$n,Ms);break;case 3:if(ko(t,r),(r&130023424)===r&&(e=y0+500-Mt(),10<e)){if(Pf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Rn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ly(Li.bind(null,t,$n,Ms),e);break}Li(t,$n,Ms);break;case 4:if(ko(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-zr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TO(r/1960))-r,10<r){t.timeoutHandle=ly(Li.bind(null,t,$n,Ms),r);break}Li(t,$n,Ms);break;case 5:Li(t,$n,Ms);break;default:throw Error(ne(329))}}}return Xn(t,Mt()),t.callbackNode===n?LC.bind(null,t):null}function Ty(t,e){var n=iu;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=Yf(t,e),t!==2&&(e=$n,$n=n,e!==null&&ky(e)),t}function ky(t){$n===null?$n=t:$n.push.apply($n,t)}function kO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ko(t,e){for(e&=~x0,e&=~Jm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function j_(t){if(Ye&6)throw Error(ne(327));cl();var e=Pf(t,0);if(!(e&1))return Xn(t,Mt()),null;var n=Yf(t,e);if(t.tag!==0&&n===2){var r=ey(t);r!==0&&(e=r,n=Ty(t,r))}if(n===1)throw n=Vu,Yi(t,0),ko(t,e),Xn(t,Mt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,$n,Ms),Xn(t,Mt()),null}function v0(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(Ol=Mt()+500,Km&&wi())}}function la(t){zo!==null&&zo.tag===0&&!(Ye&6)&&cl();var e=Ye;Ye|=1;var n=_r.transition,r=at;try{if(_r.transition=null,at=1,t)return t()}finally{at=r,_r.transition=n,Ye=e,!(Ye&6)&&wi()}}function w0(){er=el.current,vt(el)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oO(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(e0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vf();break;case 3:Dl(),vt(Gn),vt(Sn),c0();break;case 5:l0(r);break;case 4:Dl();break;case 13:vt(_t);break;case 19:vt(_t);break;case 10:s0(r.type._context);break;case 22:case 23:w0()}n=n.return}if(tn=t,Lt=t=Xo(t.current,null),an=er=e,qt=0,Vu=null,x0=Jm=aa=0,$n=iu=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Bi=null}return t}function VC(t,e){do{var n=Lt;try{if(r0(),Zh.current=Gf,Hf){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hf=!1}if(ia=0,Yt=$t=St=null,su=!1,Mu=0,g0.current=null,n===null||n.return===null){qt=1,Vu=e,Lt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=an,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=f_(a);if(g!==null){g.flags&=-257,m_(g,a,l,i,e),g.mode&1&&h_(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var y=new Set;y.add(c),e.updateQueue=y}else x.add(c);break e}else{if(!(e&1)){h_(i,u,e),b0();break e}c=Error(ne(426))}}else if(wt&&l.mode&1){var _=f_(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),m_(_,a,l,i,e),t0(Ml(c,l));break e}}i=c=Ml(c,l),qt!==4&&(qt=2),iu===null?iu=[i]:iu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=bC(i,c,e);i_(i,b);break e;case 1:l=c;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Go===null||!Go.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=_C(i,l,e);i_(i,T);break e}}i=i.return}while(i!==null)}UC(n)}catch(A){e=A,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function FC(){var t=Kf.current;return Kf.current=Gf,t===null?Gf:t}function b0(){(qt===0||qt===3||qt===2)&&(qt=4),tn===null||!(aa&268435455)&&!(Jm&268435455)||ko(tn,an)}function Yf(t,e){var n=Ye;Ye|=2;var r=FC();(tn!==t||an!==e)&&(Ms=null,Yi(t,e));do try{IO();break}catch(s){VC(t,s)}while(!0);if(r0(),Ye=n,Kf.current=r,Lt!==null)throw Error(ne(261));return tn=null,an=0,qt}function IO(){for(;Lt!==null;)zC(Lt)}function AO(){for(;Lt!==null&&!nM();)zC(Lt)}function zC(t){var e=BC(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?UC(t):Lt=e,g0.current=null}function UC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SO(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Lt=null;return}}else if(n=NO(n,e,er),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);qt===0&&(qt=5)}function Li(t,e,n){var r=at,s=_r.transition;try{_r.transition=null,at=1,RO(t,e,n,r)}finally{_r.transition=s,at=r}return null}function RO(t,e,n,r){do cl();while(zo!==null);if(Ye&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hM(t,i),t===tn&&(Lt=tn=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jh||(jh=!0,qC(Rf,function(){return cl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_r.transition,_r.transition=null;var a=at;at=1;var l=Ye;Ye|=4,g0.current=null,jO(t,n),MC(n,t),JM(iy),Df=!!oy,iy=oy=null,t.current=n,CO(n),rM(),Ye=l,at=a,_r.transition=i}else t.current=n;if(jh&&(jh=!1,zo=t,Qf=s),i=t.pendingLanes,i===0&&(Go=null),iM(n.stateNode),Xn(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xf)throw Xf=!1,t=jy,jy=null,t;return Qf&1&&t.tag!==0&&cl(),i=t.pendingLanes,i&1?t===Cy?au++:(au=0,Cy=t):au=0,wi(),null}function cl(){if(zo!==null){var t=bj(Qf),e=_r.transition,n=at;try{if(_r.transition=null,at=16>t?16:t,zo===null)var r=!1;else{if(t=zo,zo=null,Qf=0,Ye&6)throw Error(ne(331));var s=Ye;for(Ye|=4,xe=t.current;xe!==null;){var i=xe,a=i.child;if(xe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(xe=u;xe!==null;){var h=xe;switch(h.tag){case 0:case 11:case 15:ou(8,h,i)}var m=h.child;if(m!==null)m.return=h,xe=m;else for(;xe!==null;){h=xe;var p=h.sibling,g=h.return;if(RC(h),h===u){xe=null;break}if(p!==null){p.return=g,xe=p;break}xe=g}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}xe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xe=a;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ou(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,xe=b;break e}xe=i.return}}var w=t.current;for(xe=w;xe!==null;){a=xe;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,xe=S;else e:for(a=w;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ym(9,l)}}catch(A){kt(l,l.return,A)}if(l===a){xe=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,xe=T;break e}xe=l.return}}if(Ye=s,wi(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Bm,t)}catch{}r=!0}return r}finally{at=n,_r.transition=e}}return!1}function C_(t,e,n){e=Ml(n,e),e=bC(t,e,1),t=Ho(t,e,1),e=Rn(),t!==null&&(fd(t,1,e),Xn(t,e))}function kt(t,e,n){if(t.tag===3)C_(t,t,n);else for(;e!==null;){if(e.tag===3){C_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Go===null||!Go.has(r))){t=Ml(n,t),t=_C(e,t,1),e=Ho(e,t,1),t=Rn(),e!==null&&(fd(e,1,t),Xn(e,t));break}}e=e.return}}function PO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rn(),t.pingedLanes|=t.suspendedLanes&n,tn===t&&(an&n)===n&&(qt===4||qt===3&&(an&130023424)===an&&500>Mt()-y0?Yi(t,0):x0|=n),Xn(t,e)}function $C(t,e){e===0&&(t.mode&1?(e=gh,gh<<=1,!(gh&130023424)&&(gh=4194304)):e=1);var n=Rn();t=Qs(t,e),t!==null&&(fd(t,e,n),Xn(t,n))}function DO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$C(t,n)}function MO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),$C(t,n)}var BC;BC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gn.current)Hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hn=!1,_O(t,e,n);Hn=!!(t.flags&131072)}else Hn=!1,wt&&e.flags&1048576&&Gj(e,Uf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tf(t,e),t=e.pendingProps;var s=Al(e,Sn.current);ll(e,n),s=d0(null,e,r,t,s,n);var i=h0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(r)?(i=!0,Ff(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,i0(e),s.updater=Qm,e.stateNode=s,s._reactInternals=e,py(e,r,t,n),e=yy(null,e,r,!0,i,n)):(e.tag=0,wt&&i&&Zv(e),Tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LO(r),t=Rr(r,t),s){case 0:e=xy(null,e,r,t,n);break e;case 1:e=x_(null,e,r,t,n);break e;case 11:e=p_(null,e,r,t,n);break e;case 14:e=g_(null,e,r,Rr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rr(r,s),xy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rr(r,s),x_(t,e,r,s,n);case 3:e:{if(jC(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Zj(t,e),qf(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ml(Error(ne(423)),e),e=y_(t,e,r,n,s);break e}else if(r!==s){s=Ml(Error(ne(424)),e),e=y_(t,e,r,n,s);break e}else for(sr=Wo(e.stateNode.containerInfo.firstChild),ar=e,wt=!0,Or=null,n=Yj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),r===s){e=Ys(t,e,n);break e}Tn(t,e,r,n)}e=e.child}return e;case 5:return eC(e),t===null&&hy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ay(r,s)?a=null:i!==null&&ay(r,i)&&(e.flags|=32),EC(t,e),Tn(t,e,a,n),e.child;case 6:return t===null&&hy(e),null;case 13:return CC(t,e,n);case 4:return a0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pl(e,null,r,n):Tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rr(r,s),p_(t,e,r,s,n);case 7:return Tn(t,e,e.pendingProps,n),e.child;case 8:return Tn(t,e,e.pendingProps.children,n),e.child;case 12:return Tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,mt($f,r._currentValue),r._currentValue=a,i!==null)if(Wr(i.value,a)){if(i.children===s.children&&!Gn.current){e=Ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fy(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ne(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),fy(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ll(e,n),s=jr(s),r=r(s),e.flags|=1,Tn(t,e,r,n),e.child;case 14:return r=e.type,s=Rr(r,e.pendingProps),s=Rr(r.type,s),g_(t,e,r,s,n);case 15:return NC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rr(r,s),tf(t,e),e.tag=1,Kn(r)?(t=!0,Ff(e)):t=!1,ll(e,n),wC(e,r,s),py(e,r,s,n),yy(null,e,r,!0,t,n);case 19:return TC(t,e,n);case 22:return SC(t,e,n)}throw Error(ne(156,e.tag))};function qC(t,e){return xj(t,e)}function OO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,e,n,r){return new OO(t,e,n,r)}function _0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LO(t){if(typeof t=="function")return _0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uv)return 11;if(t===$v)return 14}return 2}function Xo(t,e){var n=t.alternate;return n===null?(n=wr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sf(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")_0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qa:return Ji(n.children,s,i,e);case zv:a=8,s|=8;break;case Fx:return t=wr(12,n,e,s|2),t.elementType=Fx,t.lanes=i,t;case zx:return t=wr(13,n,e,s),t.elementType=zx,t.lanes=i,t;case Ux:return t=wr(19,n,e,s),t.elementType=Ux,t.lanes=i,t;case ej:return Zm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JE:a=10;break e;case ZE:a=9;break e;case Uv:a=11;break e;case $v:a=14;break e;case Eo:a=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=wr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ji(t,e,n,r){return t=wr(7,t,r,e),t.lanes=n,t}function Zm(t,e,n,r){return t=wr(22,t,r,e),t.elementType=ej,t.lanes=n,t.stateNode={isHidden:!1},t}function tx(t,e,n){return t=wr(6,t,null,e),t.lanes=n,t}function nx(t,e,n){return e=wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Og(0),this.expirationTimes=Og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Og(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function N0(t,e,n,r,s,i,a,l,c){return t=new VO(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},i0(i),t}function FO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WC(t){if(!t)return ai;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(Kn(n))return Wj(t,n,e)}return e}function HC(t,e,n,r,s,i,a,l,c){return t=N0(n,r,!0,t,s,i,a,l,c),t.context=WC(null),n=t.current,r=Rn(),s=Ko(n),i=qs(r,s),i.callback=e??null,Ho(n,i,s),t.current.lanes=s,fd(t,s,r),Xn(t,r),t}function ep(t,e,n,r){var s=e.current,i=Rn(),a=Ko(s);return n=WC(n),e.context===null?e.context=n:e.pendingContext=n,e=qs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ho(s,e,a),t!==null&&(Ur(t,s,a,i),Jh(t,s,a)),a}function Jf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S0(t,e){T_(t,e),(t=t.alternate)&&T_(t,e)}function zO(){return null}var GC=typeof reportError=="function"?reportError:function(t){console.error(t)};function E0(t){this._internalRoot=t}tp.prototype.render=E0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));ep(t,e,null,null)};tp.prototype.unmount=E0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;la(function(){ep(null,t,null,null)}),e[Xs]=null}};function tp(t){this._internalRoot=t}tp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sj();t={blockedOn:null,target:t,priority:e};for(var n=0;n<To.length&&e!==0&&e<To[n].priority;n++);To.splice(n,0,t),n===0&&jj(t)}};function j0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function np(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k_(){}function UO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Jf(a);i.call(u)}}var a=HC(e,r,t,0,null,!1,!1,"",k_);return t._reactRootContainer=a,t[Xs]=a.current,Iu(t.nodeType===8?t.parentNode:t),la(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Jf(c);l.call(u)}}var c=N0(t,0,!1,null,null,!1,!1,"",k_);return t._reactRootContainer=c,t[Xs]=c.current,Iu(t.nodeType===8?t.parentNode:t),la(function(){ep(e,c,n,r)}),c}function rp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Jf(a);l.call(c)}}ep(e,a,t,s)}else a=UO(n,e,t,s,r);return Jf(a)}_j=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wc(e.pendingLanes);n!==0&&(Wv(e,n|1),Xn(e,Mt()),!(Ye&6)&&(Ol=Mt()+500,wi()))}break;case 13:la(function(){var r=Qs(t,1);if(r!==null){var s=Rn();Ur(r,t,1,s)}}),S0(t,1)}};Hv=function(t){if(t.tag===13){var e=Qs(t,134217728);if(e!==null){var n=Rn();Ur(e,t,134217728,n)}S0(t,134217728)}};Nj=function(t){if(t.tag===13){var e=Ko(t),n=Qs(t,e);if(n!==null){var r=Rn();Ur(n,t,e,r)}S0(t,e)}};Sj=function(){return at};Ej=function(t,e){var n=at;try{return at=t,e()}finally{at=n}};Yx=function(t,e,n){switch(e){case"input":if(qx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gm(r);if(!s)throw Error(ne(90));nj(r),qx(r,s)}}}break;case"textarea":sj(t,n);break;case"select":e=n.value,e!=null&&sl(t,!!n.multiple,e,!1)}};dj=v0;hj=la;var $O={usingClientEntryPoint:!1,Events:[pd,Ka,Gm,cj,uj,v0]},zc={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BO={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:io.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pj(t),t===null?null:t.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||zO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{Bm=Ch.inject(BO),ms=Ch}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$O;dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j0(e))throw Error(ne(200));return FO(t,e,null,n)};dr.createRoot=function(t,e){if(!j0(t))throw Error(ne(299));var n=!1,r="",s=GC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=N0(t,1,!1,null,null,n,!1,r,s),t[Xs]=e.current,Iu(t.nodeType===8?t.parentNode:t),new E0(e)};dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=pj(e),t=t===null?null:t.stateNode,t};dr.flushSync=function(t){return la(t)};dr.hydrate=function(t,e,n){if(!np(e))throw Error(ne(200));return rp(null,t,e,!0,n)};dr.hydrateRoot=function(t,e,n){if(!j0(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=GC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=HC(e,null,t,1,n??null,s,!1,i,a),t[Xs]=e.current,Iu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tp(e)};dr.render=function(t,e,n){if(!np(e))throw Error(ne(200));return rp(null,t,e,!1,n)};dr.unmountComponentAtNode=function(t){if(!np(t))throw Error(ne(40));return t._reactRootContainer?(la(function(){rp(null,null,t,!1,function(){t._reactRootContainer=null,t[Xs]=null})}),!0):!1};dr.unstable_batchedUpdates=v0;dr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!np(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return rp(t,e,n,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function KC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KC)}catch(t){console.error(t)}}KC(),KE.exports=dr;var br=KE.exports;const qO=ME(br);var XC,I_=br;XC=I_.createRoot,I_.hydrateRoot;function WO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var QC={exports:{}},YC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=f;function HO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var GO=typeof Object.is=="function"?Object.is:HO,KO=Ll.useState,XO=Ll.useEffect,QO=Ll.useLayoutEffect,YO=Ll.useDebugValue;function JO(t,e){var n=e(),r=KO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return QO(function(){s.value=n,s.getSnapshot=e,rx(s)&&i({inst:s})},[t,n,e]),XO(function(){return rx(s)&&i({inst:s}),t(function(){rx(s)&&i({inst:s})})},[t]),YO(n),n}function rx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!GO(t,n)}catch{return!0}}function ZO(t,e){return e()}var e3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZO:JO;YC.useSyncExternalStore=Ll.useSyncExternalStore!==void 0?Ll.useSyncExternalStore:e3;QC.exports=YC;var t3=QC.exports;const n3=HE.useInsertionEffect,r3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s3=r3?f.useLayoutEffect:f.useEffect,o3=n3||s3,JC=t=>{const e=f.useRef([t,(...n)=>e[0](...n)]).current;return o3(()=>{e[0]=t}),e[1]},i3="popstate",C0="pushState",T0="replaceState",a3="hashchange",A_=[i3,C0,T0,a3],l3=t=>{for(const e of A_)addEventListener(e,t);return()=>{for(const e of A_)removeEventListener(e,t)}},ZC=(t,e)=>t3.useSyncExternalStore(l3,t,e),c3=()=>location.search,u3=({ssrSearch:t=""}={})=>ZC(c3,()=>t),R_=()=>location.pathname,d3=({ssrPath:t}={})=>ZC(R_,t?()=>t:R_),h3=(t,{replace:e=!1,state:n=null}={})=>history[e?T0:C0](n,"",t),f3=(t={})=>[d3(t),h3],P_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[P_]>"u"){for(const t of[C0,T0]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,P_,{value:!0})}const m3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",eT=(t="")=>t==="/"?"":t,p3=(t,e)=>t[0]==="~"?t.slice(1):eT(e)+t,g3=(t="",e)=>m3(D_(eT(t)),D_(e)),D_=t=>{try{return decodeURI(t)}catch{return t}},tT={hook:f3,searchHook:u3,parser:WO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},nT=f.createContext(tT),xd=()=>f.useContext(nT),rT={},sT=f.createContext(rT),x3=()=>f.useContext(sT),sp=t=>{const[e,n]=t.hook(t);return[g3(t.base,e),JC((r,s)=>n(p3(r,t.base),s))]},op=()=>sp(xd()),oT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((m,p)=>[m,c[p]])):a.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},iT=({children:t,...e})=>{var h,m;const n=xd(),r=e.hook?tT:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=f.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return f.createElement(nT.Provider,{value:s,children:t})},M_=({children:t,component:e},n)=>e?f.createElement(e,{params:n}):typeof t=="function"?t(n):t,y3=t=>{let e=f.useRef(rT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},mr=({path:t,nest:e,match:n,...r})=>{const s=xd(),[i]=sp(s),[a,l,c]=n??oT(s.parser,t,i,e),u=y3({...x3(),...l});if(!a)return null;const h=c?f.createElement(iT,{base:c},M_(r,u)):M_(r,u);return f.createElement(sT.Provider,{value:u,children:h})},Qn=f.forwardRef((t,e)=>{const n=xd(),[r,s]=sp(n),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:h,replace:m,state:p,...g}=t,x=JC(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(a,t)))}),y=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&f.isValidElement(u)?f.cloneElement(u,{onClick:x,href:y}):f.createElement("a",{...g,onClick:x,href:y,className:h!=null&&h.call?h(r===a):h,children:u,ref:e})}),aT=t=>Array.isArray(t)?t.flatMap(e=>aT(e&&e.type===f.Fragment?e.props.children:e)):[t],v3=({children:t,location:e})=>{const n=xd(),[r]=sp(n);for(const s of aT(t)){let i=0;if(f.isValidElement(s)&&(i=oT(n.parser,s.props.path,e||r,s.props.nest))[0])return f.cloneElement(s,{match:i})}return null};var ip=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ap=typeof window>"u"||"Deno"in globalThis;function Pr(){}function w3(t,e){return typeof t=="function"?t(e):t}function b3(t){return typeof t=="number"&&t>=0&&t!==1/0}function _3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function O_(t,e){return typeof t=="function"?t(e):t}function N3(t,e){return typeof t=="function"?t(e):t}function L_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==k0(a,e.options))return!1}else if(!zu(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function V_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Fu(e.options.mutationKey)!==Fu(i))return!1}else if(!zu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function k0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fu)(t)}function Fu(t){return JSON.stringify(t,(e,n)=>Iy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function zu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!zu(t[n],e[n])):!1}function lT(t,e){if(t===e)return t;const n=F_(t)&&F_(e);if(n||Iy(t)&&Iy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=lT(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function F_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Iy(t){if(!z_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!z_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function z_(t){return Object.prototype.toString.call(t)==="[object Object]"}function S3(t){return new Promise(e=>{setTimeout(e,t)})}function E3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?lT(t,e):e}function j3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function C3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var I0=Symbol();function cT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===I0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Gi,Do,bl,CE,T3=(CE=class extends ip{constructor(){super();nt(this,Gi);nt(this,Do);nt(this,bl);Me(this,bl,e=>{if(!ap&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Do)||this.setEventListener(Q(this,bl))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Do))==null||e.call(this),Me(this,Do,void 0))}setEventListener(e){var n;Me(this,bl,e),(n=Q(this,Do))==null||n.call(this),Me(this,Do,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,Gi)!==e&&(Me(this,Gi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,Gi)=="boolean"?Q(this,Gi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gi=new WeakMap,Do=new WeakMap,bl=new WeakMap,CE),uT=new T3,_l,Mo,Nl,TE,k3=(TE=class extends ip{constructor(){super();nt(this,_l,!0);nt(this,Mo);nt(this,Nl);Me(this,Nl,e=>{if(!ap&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Mo)||this.setEventListener(Q(this,Nl))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Mo))==null||e.call(this),Me(this,Mo,void 0))}setEventListener(e){var n;Me(this,Nl,e),(n=Q(this,Mo))==null||n.call(this),Me(this,Mo,e(this.setOnline.bind(this)))}setOnline(e){Q(this,_l)!==e&&(Me(this,_l,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,_l)}},_l=new WeakMap,Mo=new WeakMap,Nl=new WeakMap,TE),Zf=new k3;function I3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function A3(t){return Math.min(1e3*2**t,3e4)}function dT(t){return(t??"online")==="online"?Zf.isOnline():!0}var hT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sx(t){return t instanceof hT}function fT(t){let e=!1,n=0,r=!1,s;const i=I3(),a=y=>{var _;r||(p(new hT(y)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>uT.isFocused()&&(t.networkMode==="always"||Zf.isOnline())&&t.canRun(),h=()=>dT(t.networkMode)&&t.canRun(),m=y=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,y),s==null||s(),i.resolve(y))},p=y=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,y),s==null||s(),i.reject(y))},g=()=>new Promise(y=>{var _;s=b=>{(r||u())&&y(b)},(_=t.onPause)==null||_.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),x=()=>{if(r)return;let y;const _=n===0?t.initialPromise:void 0;try{y=_??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(m).catch(b=>{var M;if(r)return;const w=t.retry??(ap?0:3),S=t.retryDelay??A3,T=typeof S=="function"?S(n,b):S,A=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,b);if(e||!A){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),S3(T).then(()=>u()?void 0:g()).then(()=>{e?p(b):x()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():g().then(x),i)}}function R3(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var In=R3(),Ki,kE,mT=(kE=class{constructor(){nt(this,Ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),b3(this.gcTime)&&Me(this,Ki,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ap?1/0:5*60*1e3))}clearGcTimeout(){Q(this,Ki)&&(clearTimeout(Q(this,Ki)),Me(this,Ki,void 0))}},Ki=new WeakMap,kE),Sl,El,pr,pn,ud,Xi,Dr,Ds,IE,P3=(IE=class extends mT{constructor(n){super();nt(this,Dr);nt(this,Sl);nt(this,El);nt(this,pr);nt(this,pn);nt(this,ud);nt(this,Xi);Me(this,Xi,!1),Me(this,ud,n.defaultOptions),this.setOptions(n.options),this.observers=[],Me(this,pr,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Me(this,Sl,M3(this.options)),this.state=n.state??Q(this,Sl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,pn))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,ud),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,pr).remove(this)}setData(n,r){const s=E3(this.state.data,n,this.options);return dn(this,Dr,Ds).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){dn(this,Dr,Ds).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,pn))==null?void 0:s.promise;return(i=Q(this,pn))==null||i.cancel(n),r?r.then(Pr).catch(Pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Sl))}isActive(){return this.observers.some(n=>N3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===I0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!_3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,pn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,pn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,pr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,pn)&&(Q(this,Xi)?Q(this,pn).cancel({revert:!0}):Q(this,pn).cancelRetry()),this.scheduleGc()),Q(this,pr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||dn(this,Dr,Ds).call(this,{type:"invalidate"})}fetch(n,r){var u,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,pn))return Q(this,pn).continueRetry(),Q(this,pn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Me(this,Xi,!0),s.signal)})},a=()=>{const p=cT(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Me(this,Xi,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Me(this,El,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&dn(this,Dr,Ds).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=p=>{var g,x,y,_;sx(p)&&p.silent||dn(this,Dr,Ds).call(this,{type:"error",error:p}),sx(p)||((x=(g=Q(this,pr).config).onError)==null||x.call(g,p,this),(_=(y=Q(this,pr).config).onSettled)==null||_.call(y,this.state.data,p,this)),this.scheduleGc()};return Me(this,pn,fT({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,x,y,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(x=(g=Q(this,pr).config).onSuccess)==null||x.call(g,p,this),(_=(y=Q(this,pr).config).onSettled)==null||_.call(y,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{dn(this,Dr,Ds).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{dn(this,Dr,Ds).call(this,{type:"pause"})},onContinue:()=>{dn(this,Dr,Ds).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,pn).start()}},Sl=new WeakMap,El=new WeakMap,pr=new WeakMap,pn=new WeakMap,ud=new WeakMap,Xi=new WeakMap,Dr=new WeakSet,Ds=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...D3(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return sx(i)&&i.revert&&Q(this,El)?{...Q(this,El),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),In.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,pr).notify({query:this,type:"updated",action:n})})},IE);function D3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function M3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var cs,AE,O3=(AE=class extends ip{constructor(e={}){super();nt(this,cs);this.config=e,Me(this,cs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??k0(s,n);let a=this.get(i);return a||(a=new P3({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){Q(this,cs).has(e.queryHash)||(Q(this,cs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,cs).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,cs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){In.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,cs).get(e)}getAll(){return[...Q(this,cs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>L_(e,r)):n}notify(e){In.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){In.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){In.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},cs=new WeakMap,AE),us,Cn,Qi,ds,No,RE,L3=(RE=class extends mT{constructor(n){super();nt(this,ds);nt(this,us);nt(this,Cn);nt(this,Qi);this.mutationId=n.mutationId,Me(this,Cn,n.mutationCache),Me(this,us,[]),this.state=n.state||V3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,us).includes(n)||(Q(this,us).push(n),this.clearGcTimeout(),Q(this,Cn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Me(this,us,Q(this,us).filter(r=>r!==n)),this.scheduleGc(),Q(this,Cn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,us).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Cn).remove(this))}continue(){var n;return((n=Q(this,Qi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,u,h,m,p,g,x,y,_,b,w,S,T,A,M,N,E;Me(this,Qi,fT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(j,k)=>{dn(this,ds,No).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{dn(this,ds,No).call(this,{type:"pause"})},onContinue:()=>{dn(this,ds,No).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Cn).canRun(this)}));const r=this.state.status==="pending",s=!Q(this,Qi).canStart();try{if(!r){dn(this,ds,No).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=Q(this,Cn).config).onMutate)==null?void 0:a.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&dn(this,ds,No).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const j=await Q(this,Qi).start();return await((h=(u=Q(this,Cn).config).onSuccess)==null?void 0:h.call(u,j,n,this.state.context,this)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,j,n,this.state.context)),await((x=(g=Q(this,Cn).config).onSettled)==null?void 0:x.call(g,j,null,this.state.variables,this.state.context,this)),await((_=(y=this.options).onSettled)==null?void 0:_.call(y,j,null,n,this.state.context)),dn(this,ds,No).call(this,{type:"success",data:j}),j}catch(j){try{throw await((w=(b=Q(this,Cn).config).onError)==null?void 0:w.call(b,j,n,this.state.context,this)),await((T=(S=this.options).onError)==null?void 0:T.call(S,j,n,this.state.context)),await((M=(A=Q(this,Cn).config).onSettled)==null?void 0:M.call(A,void 0,j,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,j,n,this.state.context)),j}finally{dn(this,ds,No).call(this,{type:"error",error:j})}}finally{Q(this,Cn).runNext(this)}}},us=new WeakMap,Cn=new WeakMap,Qi=new WeakMap,ds=new WeakSet,No=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),In.batch(()=>{Q(this,us).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Cn).notify({mutation:this,type:"updated",action:n})})},RE);function V3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zn,dd,PE,F3=(PE=class extends ip{constructor(e={}){super();nt(this,Zn);nt(this,dd);this.config=e,Me(this,Zn,new Map),Me(this,dd,Date.now())}build(e,n,r){const s=new L3({mutationCache:this,mutationId:++uh(this,dd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Th(e),r=Q(this,Zn).get(n)??[];r.push(e),Q(this,Zn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Th(e);if(Q(this,Zn).has(n)){const s=(r=Q(this,Zn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Q(this,Zn).delete(n):Q(this,Zn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Q(this,Zn).get(Th(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Q(this,Zn).get(Th(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){In.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Q(this,Zn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>V_(n,r))}findAll(e={}){return this.getAll().filter(n=>V_(e,n))}notify(e){In.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return In.batch(()=>Promise.all(e.map(n=>n.continue().catch(Pr))))}},Zn=new WeakMap,dd=new WeakMap,PE);function Th(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function U_(t){return{onFetch:(e,n)=>{var h,m,p,g,x;const r=e.options,s=(p=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=cT(e.options,e.fetchOptions),w=async(S,T,A)=>{if(y)return Promise.reject();if(T==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:T,direction:A?"backward":"forward",meta:e.options.meta};_(M);const N=await b(M),{maxPages:E}=e.options,j=A?C3:j3;return{pages:j(S.pages,N,E),pageParams:j(S.pageParams,T,E)}};if(s&&i.length){const S=s==="backward",T=S?z3:$_,A={pages:i,pageParams:a},M=T(r,A);l=await w(A,M,S)}else{const S=t??i.length;do{const T=c===0?a[0]??r.initialPageParam:$_(r,l);if(c>0&&T==null)break;l=await w(l,T),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var y,_;return(_=(y=e.options).persister)==null?void 0:_.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function $_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function z3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tt,Oo,Lo,jl,Cl,Vo,Tl,kl,DE,U3=(DE=class{constructor(t={}){nt(this,Tt);nt(this,Oo);nt(this,Lo);nt(this,jl);nt(this,Cl);nt(this,Vo);nt(this,Tl);nt(this,kl);Me(this,Tt,t.queryCache||new O3),Me(this,Oo,t.mutationCache||new F3),Me(this,Lo,t.defaultOptions||{}),Me(this,jl,new Map),Me(this,Cl,new Map),Me(this,Vo,0)}mount(){uh(this,Vo)._++,Q(this,Vo)===1&&(Me(this,Tl,uT.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,Tt).onFocus())})),Me(this,kl,Zf.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,Tt).onOnline())})))}unmount(){var t,e;uh(this,Vo)._--,Q(this,Vo)===0&&((t=Q(this,Tl))==null||t.call(this),Me(this,Tl,void 0),(e=Q(this,kl))==null||e.call(this),Me(this,kl,void 0))}isFetching(t){return Q(this,Tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Oo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,Tt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Q(this,Tt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(O_(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,Tt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,Tt).get(r.queryHash),i=s==null?void 0:s.state.data,a=w3(e,i);if(a!==void 0)return Q(this,Tt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return In.batch(()=>Q(this,Tt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,Tt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,Tt);In.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,Tt),r={type:"active",...t};return In.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=In.batch(()=>Q(this,Tt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Pr).catch(Pr)}invalidateQueries(t={},e={}){return In.batch(()=>{if(Q(this,Tt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=In.batch(()=>Q(this,Tt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,Tt).build(this,e);return n.isStaleByTime(O_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pr).catch(Pr)}fetchInfiniteQuery(t){return t.behavior=U_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pr).catch(Pr)}ensureInfiniteQueryData(t){return t.behavior=U_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zf.isOnline()?Q(this,Oo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,Tt)}getMutationCache(){return Q(this,Oo)}getDefaultOptions(){return Q(this,Lo)}setDefaultOptions(t){Me(this,Lo,t)}setQueryDefaults(t,e){Q(this,jl).set(Fu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,jl).values()];let n={};return e.forEach(r=>{zu(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Cl).set(Fu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Cl).values()];let n={};return e.forEach(r=>{zu(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Lo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=k0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===I0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Lo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,Tt).clear(),Q(this,Oo).clear()}},Tt=new WeakMap,Oo=new WeakMap,Lo=new WeakMap,jl=new WeakMap,Cl=new WeakMap,Vo=new WeakMap,Tl=new WeakMap,kl=new WeakMap,DE),$3=f.createContext(void 0),B3=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx($3.Provider,{value:t,children:e}));async function q3(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const W3=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await q3(n),await n.json())},H3=new U3({defaultOptions:{queries:{queryFn:W3({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),G3=1,K3=1e6;let ox=0;function X3(){return ox=(ox+1)%Number.MAX_SAFE_INTEGER,ox.toString()}const ix=new Map,B_=t=>{if(ix.has(t))return;const e=setTimeout(()=>{ix.delete(t),lu({type:"REMOVE_TOAST",toastId:t})},K3);ix.set(t,e)},Q3=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,G3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?B_(n):t.toasts.forEach(r=>{B_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},of=[];let af={toasts:[]};function lu(t){af=Q3(af,t),of.forEach(e=>{e(af)})}function Y3({...t}){const e=X3(),n=s=>lu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>lu({type:"DISMISS_TOAST",toastId:e});return lu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ao(){const[t,e]=f.useState(af);return f.useEffect(()=>(of.push(e),()=>{const n=of.indexOf(e);n>-1&&of.splice(n,1)}),[t]),{...t,toast:Y3,dismiss:n=>lu({type:"DISMISS_TOAST",toastId:n})}}function se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function q_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lp(...t){return e=>{let n=!1;const r=t.map(s=>{const i=q_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():q_(t[s],null)}}}}function ke(...t){return f.useCallback(lp(...t),t)}function J3(t,e){const n=f.createContext(e),r=i=>{const{children:a,...l}=i,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=f.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function un(t,e=[]){let n=[];function r(i,a){const l=f.createContext(a),c=n.length;n=[...n,a];const u=m=>{var b;const{scope:p,children:g,...x}=m,y=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,_=f.useMemo(()=>x,Object.values(x));return o.jsx(y.Provider,{value:_,children:g})};u.displayName=i+"Provider";function h(m,p){var y;const g=((y=p==null?void 0:p[t])==null?void 0:y[c])||l,x=f.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(a=>f.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,Z3(s,...e)]}function Z3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function li(t){const e=tL(t),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(nL);if(c){const u=c.props.children,h=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return o.jsx(e,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var eL=li("Slot");function tL(t){const e=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=sL(s),l=rL(i,s.props);return s.type!==f.Fragment&&(l.ref=r?lp(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pT=Symbol("radix.slottable");function gT(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pT,e}function nL(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pT}function rL(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function sL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cp(t){const e=t+"CollectionProvider",[n,r]=un(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:_,children:b}=y,w=Oe.useRef(null),S=Oe.useRef(new Map).current;return o.jsx(s,{scope:_,itemMap:S,collectionRef:w,children:b})};a.displayName=e;const l=t+"CollectionSlot",c=li(l),u=Oe.forwardRef((y,_)=>{const{scope:b,children:w}=y,S=i(l,b),T=ke(_,S.collectionRef);return o.jsx(c,{ref:T,children:w})});u.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",p=li(h),g=Oe.forwardRef((y,_)=>{const{scope:b,children:w,...S}=y,T=Oe.useRef(null),A=ke(_,T),M=i(h,b);return Oe.useEffect(()=>(M.itemMap.set(T,{ref:T,...S}),()=>void M.itemMap.delete(T))),o.jsx(p,{[m]:"",ref:A,children:w})});g.displayName=h;function x(y){const _=i(t+"CollectionConsumer",y);return Oe.useCallback(()=>{const w=_.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${m}]`));return Array.from(_.itemMap.values()).sort((M,N)=>S.indexOf(M.ref.current)-S.indexOf(N.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},x,r]}var oL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=oL.reduce((t,e)=>{const n=li(`Primitive.${e}`),r=f.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function A0(t,e){t&&br.flushSync(()=>t.dispatchEvent(e))}function bt(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function iL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var aL="DismissableLayer",Ay="dismissableLayer.update",lL="dismissableLayer.pointerDownOutside",cL="dismissableLayer.focusOutside",W_,xT=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ba=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=f.useContext(xT),[h,m]=f.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=f.useState({}),x=ke(e,N=>m(N)),y=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(_),w=h?y.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,T=w>=b,A=dL(N=>{const E=N.target,j=[...u.branches].some(k=>k.contains(E));!T||j||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},p),M=hL(N=>{const E=N.target;[...u.branches].some(k=>k.contains(E))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},p);return iL(N=>{w===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(W_=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),H_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=W_)}},[h,p,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),H_())},[h,u]),f.useEffect(()=>{const N=()=>g({});return document.addEventListener(Ay,N),()=>document.removeEventListener(Ay,N)},[]),o.jsx(we.div,{...c,ref:x,style:{pointerEvents:S?T?"auto":"none":void 0,...t.style},onFocusCapture:se(t.onFocusCapture,M.onFocusCapture),onBlurCapture:se(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:se(t.onPointerDownCapture,A.onPointerDownCapture)})});ba.displayName=aL;var uL="DismissableLayerBranch",yT=f.forwardRef((t,e)=>{const n=f.useContext(xT),r=f.useRef(null),s=ke(e,r);return f.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(we.div,{...t,ref:s})});yT.displayName=uL;function dL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){vT(lL,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t),r=f.useRef(!1);return f.useEffect(()=>{const s=i=>{i.target&&!r.current&&vT(cL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function H_(){const t=new CustomEvent(Ay);document.dispatchEvent(t)}function vT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?A0(s,i):s.dispatchEvent(i)}var fL=ba,mL=yT,zt=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},pL="Portal",_a=f.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=f.useState(!1);zt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?qO.createPortal(o.jsx(we.div,{...r,ref:e}),a):null});_a.displayName=pL;function gL(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var Gt=t=>{const{present:e,children:n}=t,r=xL(e),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=ke(r.ref,yL(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:i}):null};Gt.displayName="Presence";function xL(t){const[e,n]=f.useState(),r=f.useRef({}),s=f.useRef(t),i=f.useRef("none"),a=t?"mounted":"unmounted",[l,c]=gL(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=kh(r.current);i.current=l==="mounted"?u:"none"},[l]),zt(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=kh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),zt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,m=g=>{const y=kh(r.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=g=>{g.target===e&&(i.current=kh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function kh(t){return(t==null?void 0:t.animationName)||"none"}function yL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Hr({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=vL({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=bt(n),c=f.useCallback(u=>{if(i){const m=typeof u=="function"?u(t):u;m!==t&&l(m)}else s(u)},[i,t,s,l]);return[a,c]}function vL({defaultProp:t,onChange:e}){const n=f.useState(t),[r]=n,s=f.useRef(r),i=bt(e);return f.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var wL="VisuallyHidden",yd=f.forwardRef((t,e)=>o.jsx(we.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));yd.displayName=wL;var bL=yd,R0="ToastProvider",[P0,_L,NL]=cp("Toast"),[wT,fY]=un("Toast",[NL]),[SL,up]=wT(R0),bT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=f.useState(null),[u,h]=f.useState(0),m=f.useRef(!1),p=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${R0}\`. Expected non-empty \`string\`.`),o.jsx(P0.Provider,{scope:e,children:o.jsx(SL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>h(g=>g+1),[]),onToastRemove:f.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:a})})};bT.displayName=R0;var _T="ToastViewport",EL=["F8"],Ry="toast.viewportPause",Py="toast.viewportResume",NT=f.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=EL,label:s="Notifications ({hotkey})",...i}=t,a=up(_T,n),l=_L(n),c=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=f.useRef(null),p=ke(e,m,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;f.useEffect(()=>{const _=b=>{var S;r.length!==0&&r.every(T=>b[T]||b.code===T)&&((S=m.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),f.useEffect(()=>{const _=c.current,b=m.current;if(x&&_&&b){const w=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Ry);b.dispatchEvent(M),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Py);b.dispatchEvent(M),a.isClosePausedRef.current=!1}},T=M=>{!_.contains(M.relatedTarget)&&S()},A=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",w),_.addEventListener("focusout",T),_.addEventListener("pointermove",w),_.addEventListener("pointerleave",A),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",w),_.removeEventListener("focusout",T),_.removeEventListener("pointermove",w),_.removeEventListener("pointerleave",A),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[x,a.isClosePausedRef]);const y=f.useCallback(({tabbingDirection:_})=>{const w=l().map(S=>{const T=S.ref.current,A=[T,...VL(T)];return _==="forwards"?A:A.reverse()});return(_==="forwards"?w.reverse():w).flat()},[l]);return f.useEffect(()=>{const _=m.current;if(_){const b=w=>{var A,M,N;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const E=document.activeElement,j=w.shiftKey;if(w.target===_&&j){(A=u.current)==null||A.focus();return}const D=y({tabbingDirection:j?"backwards":"forwards"}),P=D.findIndex(V=>V===E);ax(D.slice(P+1))?w.preventDefault():j?(M=u.current)==null||M.focus():(N=h.current)==null||N.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[l,y]),o.jsxs(mL,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(Dy,{ref:u,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});ax(_)}}),o.jsx(P0.Slot,{scope:n,children:o.jsx(we.ol,{tabIndex:-1,...i,ref:p})}),x&&o.jsx(Dy,{ref:h,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});ax(_)}})]})});NT.displayName=_T;var ST="ToastFocusProxy",Dy=f.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=up(ST,n);return o.jsx(yd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Dy.displayName=ST;var dp="Toast",jL="toast.swipeStart",CL="toast.swipeMove",TL="toast.swipeCancel",kL="toast.swipeEnd",ET=f.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Hr({prop:r,defaultProp:s,onChange:i});return o.jsx(Gt,{present:n||l,children:o.jsx(RL,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:bt(t.onPause),onResume:bt(t.onResume),onSwipeStart:se(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:se(t.onSwipeMove,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:se(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:se(t.onSwipeEnd,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});ET.displayName=dp;var[IL,AL]=wT(dp,{onClose(){}}),RL=f.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:g,...x}=t,y=up(dp,n),[_,b]=f.useState(null),w=ke(e,V=>b(V)),S=f.useRef(null),T=f.useRef(null),A=s||y.duration,M=f.useRef(0),N=f.useRef(A),E=f.useRef(0),{onToastAdd:j,onToastRemove:k}=y,I=bt(()=>{var re;(_==null?void 0:_.contains(document.activeElement))&&((re=y.viewport)==null||re.focus()),a()}),D=f.useCallback(V=>{!V||V===1/0||(window.clearTimeout(E.current),M.current=new Date().getTime(),E.current=window.setTimeout(I,V))},[I]);f.useEffect(()=>{const V=y.viewport;if(V){const re=()=>{D(N.current),u==null||u()},Z=()=>{const te=new Date().getTime()-M.current;N.current=N.current-te,window.clearTimeout(E.current),c==null||c()};return V.addEventListener(Ry,Z),V.addEventListener(Py,re),()=>{V.removeEventListener(Ry,Z),V.removeEventListener(Py,re)}}},[y.viewport,A,c,u,D]),f.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(A)},[i,A,y.isClosePausedRef,D]),f.useEffect(()=>(j(),()=>k()),[j,k]);const P=f.useMemo(()=>_?RT(_):null,[_]);return y.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(PL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(IL,{scope:n,onClose:I,children:br.createPortal(o.jsx(P0.ItemSlot,{scope:n,children:o.jsx(fL,{asChild:!0,onEscapeKeyDown:se(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||I(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:se(t.onKeyDown,V=>{V.key==="Escape"&&(l==null||l(V.nativeEvent),V.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:se(t.onPointerDown,V=>{V.button===0&&(S.current={x:V.clientX,y:V.clientY})}),onPointerMove:se(t.onPointerMove,V=>{if(!S.current)return;const re=V.clientX-S.current.x,Z=V.clientY-S.current.y,te=!!T.current,$=["left","right"].includes(y.swipeDirection),O=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,L=$?O(0,re):0,B=$?0:O(0,Z),W=V.pointerType==="touch"?10:2,K={x:L,y:B},le={originalEvent:V,delta:K};te?(T.current=K,Ih(CL,m,le,{discrete:!1})):G_(K,y.swipeDirection,W)?(T.current=K,Ih(jL,h,le,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(re)>W||Math.abs(Z)>W)&&(S.current=null)}),onPointerUp:se(t.onPointerUp,V=>{const re=T.current,Z=V.target;if(Z.hasPointerCapture(V.pointerId)&&Z.releasePointerCapture(V.pointerId),T.current=null,S.current=null,re){const te=V.currentTarget,$={originalEvent:V,delta:re};G_(re,y.swipeDirection,y.swipeThreshold)?Ih(kL,g,$,{discrete:!0}):Ih(TL,p,$,{discrete:!0}),te.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),PL=t=>{const{__scopeToast:e,children:n,...r}=t,s=up(dp,e),[i,a]=f.useState(!1),[l,c]=f.useState(!1);return OL(()=>a(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(_a,{asChild:!0,children:o.jsx(yd,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},DL="ToastTitle",jT=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});jT.displayName=DL;var ML="ToastDescription",CT=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});CT.displayName=ML;var TT="ToastAction",kT=f.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(AT,{altText:n,asChild:!0,children:o.jsx(D0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${TT}\`. Expected non-empty \`string\`.`),null)});kT.displayName=TT;var IT="ToastClose",D0=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=AL(IT,n);return o.jsx(AT,{asChild:!0,children:o.jsx(we.button,{type:"button",...r,ref:e,onClick:se(t.onClick,s.onClose)})})});D0.displayName=IT;var AT=f.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function RT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),LL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...RT(r))}}),e}function Ih(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?A0(s,i):s.dispatchEvent(i)}var G_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function OL(t=()=>{}){const e=bt(t);zt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function LL(t){return t.nodeType===t.ELEMENT_NODE}function VL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ax(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var FL=bT,PT=NT,DT=ET,MT=jT,OT=CT,LT=kT,VT=D0;function FT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=FT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=FT(t))&&(r&&(r+=" "),r+=e);return r}const K_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,X_=zT,vd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return X_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],m=i==null?void 0:i[u];if(h===null)return null;const p=K_(h)||K_(m);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[m,p]=h;return p===void 0||(u[m]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:m,className:p,...g}=h;return Object.entries(g).every(x=>{let[y,_]=x;return Array.isArray(_)?_.includes({...i,...l}[y]):{...i,...l}[y]===_})?[...u,m,p]:u},[]);return X_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>f.createElement("svg",{ref:c,...UL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:UT("lucide",s),...l},[...a.map(([u,h])=>f.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=f.forwardRef(({className:r,...s},i)=>f.createElement($L,{ref:i,iconNode:e,className:UT(`lucide-${zL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=he("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=he("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=he("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=he("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=he("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=he("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=he("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=he("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=he("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=he("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=he("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=he("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=he("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=he("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=he("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=he("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=he("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=he("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=he("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=he("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=he("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=he("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=he("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=he("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=he("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=he("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=he("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=he("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=he("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=he("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=he("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),B0="-",v6=t=>{const e=b6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(B0);return l[0]===""&&l.length!==1&&l.shift(),e2(l,e)||w6(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},e2=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?e2(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(B0);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},eN=/^\[(.+)\]$/,w6=t=>{if(eN.test(t)){const e=eN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},b6=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return N6(Object.entries(t.classGroups),n).forEach(([i,a])=>{Uy(a,r,i,e)}),r},Uy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:tN(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(_6(s)){Uy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Uy(a,tN(e,i),n,r)})})},tN=(t,e)=>{let n=t;return e.split(B0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_6=t=>t.isThemeGetter,N6=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,S6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},t2="!",E6=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,h=0,m;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(b==="/"){m=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(t2),x=g?p.substring(1):p,y=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:a}):a},j6=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},C6=t=>({cache:S6(t.cacheSize),parseClassName:E6(t),...v6(t)}),T6=/\s+/,k6=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(T6);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let x=!!g,y=r(x?p.substring(0,g):p);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const _=j6(h).join(":"),b=m?_+t2:_,w=b+y;if(i.includes(w))continue;i.push(w);const S=s(y,x);for(let T=0;T<S.length;++T){const A=S[T];i.push(b+A)}l=u+(l.length>0?" "+l:l)}return l};function I6(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=n2(e))&&(r&&(r+=" "),r+=n);return r}const n2=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=n2(t[r]))&&(n&&(n+=" "),n+=e);return n};function A6(t,...e){let n,r,s,i=a;function a(c){const u=e.reduce((h,m)=>m(h),t());return n=C6(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=k6(c,n);return s(c,h),h}return function(){return i(I6.apply(null,arguments))}}const xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},r2=/^\[(?:([a-z-]+):)?(.+)\]$/i,R6=/^\d+\/\d+$/,P6=new Set(["px","full","screen"]),D6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,O6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,L6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ps=t=>ul(t)||P6.has(t)||R6.test(t),wo=t=>ic(t,"length",H6),ul=t=>!!t&&!Number.isNaN(Number(t)),lx=t=>ic(t,"number",ul),Uc=t=>!!t&&Number.isInteger(Number(t)),F6=t=>t.endsWith("%")&&ul(t.slice(0,-1)),Re=t=>r2.test(t),bo=t=>D6.test(t),z6=new Set(["length","size","percentage"]),U6=t=>ic(t,z6,s2),$6=t=>ic(t,"position",s2),B6=new Set(["image","url"]),q6=t=>ic(t,B6,K6),W6=t=>ic(t,"",G6),$c=()=>!0,ic=(t,e,n)=>{const r=r2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},H6=t=>M6.test(t)&&!O6.test(t),s2=()=>!1,G6=t=>L6.test(t),K6=t=>V6.test(t),X6=()=>{const t=xt("colors"),e=xt("spacing"),n=xt("blur"),r=xt("brightness"),s=xt("borderColor"),i=xt("borderRadius"),a=xt("borderSpacing"),l=xt("borderWidth"),c=xt("contrast"),u=xt("grayscale"),h=xt("hueRotate"),m=xt("invert"),p=xt("gap"),g=xt("gradientColorStops"),x=xt("gradientColorStopPositions"),y=xt("inset"),_=xt("margin"),b=xt("opacity"),w=xt("padding"),S=xt("saturate"),T=xt("scale"),A=xt("sepia"),M=xt("skew"),N=xt("space"),E=xt("translate"),j=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Re,e],D=()=>[Re,e],P=()=>["",Ps,wo],V=()=>["auto",ul,Re],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Re],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[ul,Re];return{cacheSize:500,separator:":",theme:{colors:[$c],spacing:[Ps,wo],blur:["none","",bo,Re],brightness:B(),borderColor:[t],borderRadius:["none","","full",bo,Re],borderSpacing:D(),borderWidth:P(),contrast:B(),grayscale:O(),hueRotate:B(),invert:O(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[F6,wo],inset:I(),margin:I(),opacity:B(),padding:D(),saturate:B(),scale:B(),sepia:O(),skew:B(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[bo]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Re]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uc,Re]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Uc,Re]}],"grid-cols":[{"grid-cols":[$c]}],"col-start-end":[{col:["auto",{span:["full",Uc,Re]},Re]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[$c]}],"row-start-end":[{row:["auto",{span:[Uc,Re]},Re]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,e]}],"min-w":[{"min-w":[Re,e,"min","max","fit"]}],"max-w":[{"max-w":[Re,e,"none","full","min","max","fit","prose",{screen:[bo]},bo]}],h:[{h:[Re,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bo,wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lx]}],"font-family":[{font:[$c]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",ul,lx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ps,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ps,wo]}],"underline-offset":[{"underline-offset":["auto",Ps,Re]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),$6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",U6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},q6]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Ps,Re]}],"outline-w":[{outline:[Ps,wo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ps,wo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",bo,W6]}],"shadow-color":[{shadow:[$c]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",bo,Re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Uc,Re]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ps,wo,lx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Q6=A6(X6);function U(...t){return Q6(zT(t))}const Y6=FL,o2=f.forwardRef(({className:t,...e},n)=>o.jsx(PT,{ref:n,className:U("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));o2.displayName=PT.displayName;const J6=vd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),i2=f.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(DT,{ref:r,className:U(J6({variant:e}),t),...n}));i2.displayName=DT.displayName;const Z6=f.forwardRef(({className:t,...e},n)=>o.jsx(LT,{ref:n,className:U("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Z6.displayName=LT.displayName;const a2=f.forwardRef(({className:t,...e},n)=>o.jsx(VT,{ref:n,className:U("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Gr,{className:"h-4 w-4"})}));a2.displayName=VT.displayName;const l2=f.forwardRef(({className:t,...e},n)=>o.jsx(MT,{ref:n,className:U("text-sm font-semibold",t),...e}));l2.displayName=MT.displayName;const c2=f.forwardRef(({className:t,...e},n)=>o.jsx(OT,{ref:n,className:U("text-sm opacity-90",t),...e}));c2.displayName=OT.displayName;function eV(){const{toasts:t}=ao();return o.jsxs(Y6,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(i2,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(l2,{children:n}),r&&o.jsx(c2,{children:r})]}),s,o.jsx(a2,{})]},e)}),o.jsx(o2,{})]})}var tV=HE[" useId ".trim().toString()]||(()=>{}),nV=0;function Nr(t){const[e,n]=f.useState(tV());return zt(()=>{n(r=>r??String(nV++))},[t]),e?`radix-${e}`:""}const rV=["top","right","bottom","left"],ci=Math.min,nr=Math.max,nm=Math.round,Ah=Math.floor,gs=t=>({x:t,y:t}),sV={left:"right",right:"left",bottom:"top",top:"bottom"},oV={start:"end",end:"start"};function $y(t,e,n){return nr(t,ci(e,n))}function Js(t,e){return typeof t=="function"?t(e):t}function Zs(t){return t.split("-")[0]}function ac(t){return t.split("-")[1]}function q0(t){return t==="x"?"y":"x"}function W0(t){return t==="y"?"height":"width"}function ui(t){return["top","bottom"].includes(Zs(t))?"y":"x"}function H0(t){return q0(ui(t))}function iV(t,e,n){n===void 0&&(n=!1);const r=ac(t),s=H0(t),i=W0(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=rm(a)),[a,rm(a)]}function aV(t){const e=rm(t);return[By(t),e,By(e)]}function By(t){return t.replace(/start|end/g,e=>oV[e])}function lV(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function cV(t,e,n,r){const s=ac(t);let i=lV(Zs(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(By)))),i}function rm(t){return t.replace(/left|right|bottom|top/g,e=>sV[e])}function uV(t){return{top:0,right:0,bottom:0,left:0,...t}}function u2(t){return typeof t!="number"?uV(t):{top:t,right:t,bottom:t,left:t}}function sm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function nN(t,e,n){let{reference:r,floating:s}=t;const i=ui(e),a=H0(e),l=W0(a),c=Zs(e),u=i==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-s.width,y:m};break;default:g={x:r.x,y:r.y}}switch(ac(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}const dV=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:m}=nN(u,r,c),p=r,g={},x=0;for(let y=0;y<l.length;y++){const{name:_,fn:b}=l[y],{x:w,y:S,data:T,reset:A}=await b({x:h,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});h=w??h,m=S??m,g={...g,[_]:{...g[_],...T}},A&&x<=50&&(x++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:h,y:m}=nN(u,p,c)),y=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:g}};async function $u(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:g=0}=Js(e,t),x=u2(g),_=l[p?m==="floating"?"reference":"floating":m],b=sm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),T=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},A=sm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(b.top-A.top+x.top)/T.y,bottom:(A.bottom-b.bottom+x.bottom)/T.y,left:(b.left-A.left+x.left)/T.x,right:(A.right-b.right+x.right)/T.x}}const hV=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Js(t,e)||{};if(u==null)return{};const m=u2(h),p={x:n,y:r},g=H0(s),x=W0(g),y=await a.getDimensions(u),_=g==="y",b=_?"top":"left",w=_?"bottom":"right",S=_?"clientHeight":"clientWidth",T=i.reference[x]+i.reference[g]-p[g]-i.floating[x],A=p[g]-i.reference[g],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=M?M[S]:0;(!N||!await(a.isElement==null?void 0:a.isElement(M)))&&(N=l.floating[S]||i.floating[x]);const E=T/2-A/2,j=N/2-y[x]/2-1,k=ci(m[b],j),I=ci(m[w],j),D=k,P=N-y[x]-I,V=N/2-y[x]/2+E,re=$y(D,V,P),Z=!c.arrow&&ac(s)!=null&&V!==re&&i.reference[x]/2-(V<D?k:I)-y[x]/2<0,te=Z?V<D?V-D:V-P:0;return{[g]:p[g]+te,data:{[g]:re,centerOffset:V-re-te,...Z&&{alignmentOffset:te}},reset:Z}}}),fV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,..._}=Js(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Zs(s),w=ui(l),S=Zs(l)===l,T=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=p||(S||!y?[rm(l)]:aV(l)),M=x!=="none";!p&&M&&A.push(...cV(l,y,x,T));const N=[l,...A],E=await $u(e,_),j=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&j.push(E[b]),m){const V=iV(s,a,T);j.push(E[V[0]],E[V[1]])}if(k=[...k,{placement:s,overflows:j}],!j.every(V=>V<=0)){var I,D;const V=(((I=i.flip)==null?void 0:I.index)||0)+1,re=N[V];if(re)return{data:{index:V,overflows:k},reset:{placement:re}};let Z=(D=k.filter(te=>te.overflows[0]<=0).sort((te,$)=>te.overflows[1]-$.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(g){case"bestFit":{var P;const te=(P=k.filter($=>{if(M){const O=ui($.placement);return O===w||O==="y"}return!0}).map($=>[$.placement,$.overflows.filter(O=>O>0).reduce((O,L)=>O+L,0)]).sort(($,O)=>$[1]-O[1])[0])==null?void 0:P[0];te&&(Z=te);break}case"initialPlacement":Z=l;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function rN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sN(t){return rV.some(e=>t[e]>=0)}const mV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Js(t,e);switch(r){case"referenceHidden":{const i=await $u(e,{...s,elementContext:"reference"}),a=rN(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:sN(a)}}}case"escaped":{const i=await $u(e,{...s,altBoundary:!0}),a=rN(i,n.floating);return{data:{escapedOffsets:a,escaped:sN(a)}}}default:return{}}}}};async function pV(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Zs(n),l=ac(n),c=ui(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,m=Js(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const gV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await pV(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},xV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:_=>{let{x:b,y:w}=_;return{x:b,y:w}}},...c}=Js(t,e),u={x:n,y:r},h=await $u(e,c),m=ui(Zs(s)),p=q0(m);let g=u[p],x=u[m];if(i){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=g+h[_],S=g-h[b];g=$y(w,g,S)}if(a){const _=m==="y"?"top":"left",b=m==="y"?"bottom":"right",w=x+h[_],S=x-h[b];x=$y(w,x,S)}const y=l.fn({...e,[p]:g,[m]:x});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[m]:a}}}}}},yV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Js(t,e),h={x:n,y:r},m=ui(s),p=q0(m);let g=h[p],x=h[m];const y=Js(l,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const S=p==="y"?"height":"width",T=i.reference[p]-i.floating[S]+_.mainAxis,A=i.reference[p]+i.reference[S]-_.mainAxis;g<T?g=T:g>A&&(g=A)}if(u){var b,w;const S=p==="y"?"width":"height",T=["top","left"].includes(Zs(s)),A=i.reference[m]-i.floating[S]+(T&&((b=a.offset)==null?void 0:b[m])||0)+(T?0:_.crossAxis),M=i.reference[m]+i.reference[S]+(T?0:((w=a.offset)==null?void 0:w[m])||0)-(T?_.crossAxis:0);x<A?x=A:x>M&&(x=M)}return{[p]:g,[m]:x}}}},vV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Js(t,e),h=await $u(e,u),m=Zs(s),p=ac(s),g=ui(s)==="y",{width:x,height:y}=i.floating;let _,b;m==="top"||m==="bottom"?(_=m,b=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,_=p==="end"?"top":"bottom");const w=y-h.top-h.bottom,S=x-h.left-h.right,T=ci(y-h[_],w),A=ci(x-h[b],S),M=!e.middlewareData.shift;let N=T,E=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=w),M&&!p){const k=nr(h.left,0),I=nr(h.right,0),D=nr(h.top,0),P=nr(h.bottom,0);g?E=x-2*(k!==0||I!==0?k+I:nr(h.left,h.right)):N=y-2*(D!==0||P!==0?D+P:nr(h.top,h.bottom))}await c({...e,availableWidth:E,availableHeight:N});const j=await a.getDimensions(l.floating);return x!==j.width||y!==j.height?{reset:{rects:!0}}:{}}}};function mp(){return typeof window<"u"}function lc(t){return d2(t)?(t.nodeName||"").toLowerCase():"#document"}function lr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Es(t){var e;return(e=(d2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function d2(t){return mp()?t instanceof Node||t instanceof lr(t).Node:!1}function Kr(t){return mp()?t instanceof Element||t instanceof lr(t).Element:!1}function bs(t){return mp()?t instanceof HTMLElement||t instanceof lr(t).HTMLElement:!1}function oN(t){return!mp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof lr(t).ShadowRoot}function Nd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function wV(t){return["table","td","th"].includes(lc(t))}function pp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function G0(t){const e=K0(),n=Kr(t)?Xr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function bV(t){let e=di(t);for(;bs(e)&&!Fl(e);){if(G0(e))return e;if(pp(e))return null;e=di(e)}return null}function K0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fl(t){return["html","body","#document"].includes(lc(t))}function Xr(t){return lr(t).getComputedStyle(t)}function gp(t){return Kr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function di(t){if(lc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||oN(t)&&t.host||Es(t);return oN(e)?e.host:e}function h2(t){const e=di(t);return Fl(e)?t.ownerDocument?t.ownerDocument.body:t.body:bs(e)&&Nd(e)?e:h2(e)}function Bu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=h2(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=lr(s);if(i){const l=qy(a);return e.concat(a,a.visualViewport||[],Nd(s)?s:[],l&&n?Bu(l):[])}return e.concat(s,Bu(s,[],n))}function qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function f2(t){const e=Xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=bs(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=nm(n)!==i||nm(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function X0(t){return Kr(t)?t:t.contextElement}function dl(t){const e=X0(t);if(!bs(e))return gs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=f2(e);let a=(i?nm(n.width):n.width)/r,l=(i?nm(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const _V=gs(0);function m2(t){const e=lr(t);return!K0()||!e.visualViewport?_V:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NV(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==lr(t)?!1:e}function ua(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=X0(t);let a=gs(1);e&&(r?Kr(r)&&(a=dl(r)):a=dl(t));const l=NV(i,n,r)?m2(i):gs(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,h=s.width/a.x,m=s.height/a.y;if(i){const p=lr(i),g=r&&Kr(r)?lr(r):r;let x=p,y=qy(x);for(;y&&r&&g!==x;){const _=dl(y),b=y.getBoundingClientRect(),w=Xr(y),S=b.left+(y.clientLeft+parseFloat(w.paddingLeft))*_.x,T=b.top+(y.clientTop+parseFloat(w.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,m*=_.y,c+=S,u+=T,x=lr(y),y=qy(x)}}return sm({width:h,height:m,x:c,y:u})}function Q0(t,e){const n=gp(t).scrollLeft;return e?e.left+n:ua(Es(t)).left+n}function p2(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Q0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function SV(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Es(r),l=e?pp(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=gs(1);const h=gs(0),m=bs(r);if((m||!m&&!i)&&((lc(r)!=="body"||Nd(a))&&(c=gp(r)),bs(r))){const g=ua(r);u=dl(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=a&&!m&&!i?p2(a,c,!0):gs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function EV(t){return Array.from(t.getClientRects())}function jV(t){const e=Es(t),n=gp(t),r=t.ownerDocument.body,s=nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Q0(t);const l=-n.scrollTop;return Xr(r).direction==="rtl"&&(a+=nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function CV(t,e){const n=lr(t),r=Es(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=K0();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function TV(t,e){const n=ua(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=bs(t)?dl(t):gs(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function iN(t,e,n){let r;if(e==="viewport")r=CV(t,n);else if(e==="document")r=jV(Es(t));else if(Kr(e))r=TV(e,n);else{const s=m2(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return sm(r)}function g2(t,e){const n=di(t);return n===e||!Kr(n)||Fl(n)?!1:Xr(n).position==="fixed"||g2(n,e)}function kV(t,e){const n=e.get(t);if(n)return n;let r=Bu(t,[],!1).filter(l=>Kr(l)&&lc(l)!=="body"),s=null;const i=Xr(t).position==="fixed";let a=i?di(t):t;for(;Kr(a)&&!Fl(a);){const l=Xr(a),c=G0(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Nd(a)&&!c&&g2(t,a))?r=r.filter(h=>h!==a):s=l,a=di(a)}return e.set(t,r),r}function IV(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?pp(e)?[]:kV(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,h)=>{const m=iN(e,h,s);return u.top=nr(m.top,u.top),u.right=ci(m.right,u.right),u.bottom=ci(m.bottom,u.bottom),u.left=nr(m.left,u.left),u},iN(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function AV(t){const{width:e,height:n}=f2(t);return{width:e,height:n}}function RV(t,e,n){const r=bs(e),s=Es(e),i=n==="fixed",a=ua(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=gs(0);if(r||!r&&!i)if((lc(e)!=="body"||Nd(s))&&(l=gp(e)),r){const p=ua(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Q0(s));const u=s&&!r&&!i?p2(s,l):gs(0),h=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:a.width,height:a.height}}function cx(t){return Xr(t).position==="static"}function aN(t,e){if(!bs(t)||Xr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Es(t)===n&&(n=n.ownerDocument.body),n}function x2(t,e){const n=lr(t);if(pp(t))return n;if(!bs(t)){let s=di(t);for(;s&&!Fl(s);){if(Kr(s)&&!cx(s))return s;s=di(s)}return n}let r=aN(t,e);for(;r&&wV(r)&&cx(r);)r=aN(r,e);return r&&Fl(r)&&cx(r)&&!G0(r)?n:r||bV(t)||n}const PV=async function(t){const e=this.getOffsetParent||x2,n=this.getDimensions,r=await n(t.floating);return{reference:RV(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function DV(t){return Xr(t).direction==="rtl"}const MV={convertOffsetParentRelativeRectToViewportRelativeRect:SV,getDocumentElement:Es,getClippingRect:IV,getOffsetParent:x2,getElementRects:PV,getClientRects:EV,getDimensions:AV,getScale:dl,isElement:Kr,isRTL:DV};function y2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function OV(t,e){let n=null,r;const s=Es(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:m,width:p,height:g}=u;if(l||e(),!p||!g)return;const x=Ah(m),y=Ah(s.clientWidth-(h+p)),_=Ah(s.clientHeight-(m+g)),b=Ah(h),S={rootMargin:-x+"px "+-y+"px "+-_+"px "+-b+"px",threshold:nr(0,ci(1,c))||1};let T=!0;function A(M){const N=M[0].intersectionRatio;if(N!==c){if(!T)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!y2(u,t.getBoundingClientRect())&&a(),T=!1}try{n=new IntersectionObserver(A,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,S)}n.observe(t)}return a(!0),i}function LV(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=X0(t),h=s||i?[...u?Bu(u):[],...Bu(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const m=u&&l?OV(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let x,y=c?ua(t):null;c&&_();function _(){const b=ua(t);y&&!y2(y,b)&&n(),y=b,x=requestAnimationFrame(_)}return n(),()=>{var b;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),m==null||m(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const VV=gV,FV=xV,zV=fV,UV=vV,$V=mV,lN=hV,BV=yV,qV=(t,e,n)=>{const r=new Map,s={platform:MV,...n},i={...s.platform,_c:r};return dV(t,e,{...s,platform:i})};var lf=typeof document<"u"?f.useLayoutEffect:f.useEffect;function om(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!om(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!om(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function v2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function cN(t,e){const n=v2(t);return Math.round(e*n)/n}function ux(t){const e=f.useRef(t);return lf(()=>{e.current=t}),e}function WV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,m]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=f.useState(r);om(p,r)||g(r);const[x,y]=f.useState(null),[_,b]=f.useState(null),w=f.useCallback($=>{$!==M.current&&(M.current=$,y($))},[]),S=f.useCallback($=>{$!==N.current&&(N.current=$,b($))},[]),T=i||x,A=a||_,M=f.useRef(null),N=f.useRef(null),E=f.useRef(h),j=c!=null,k=ux(c),I=ux(s),D=ux(u),P=f.useCallback(()=>{if(!M.current||!N.current)return;const $={placement:e,strategy:n,middleware:p};I.current&&($.platform=I.current),qV(M.current,N.current,$).then(O=>{const L={...O,isPositioned:D.current!==!1};V.current&&!om(E.current,L)&&(E.current=L,br.flushSync(()=>{m(L)}))})},[p,e,n,I,D]);lf(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[u]);const V=f.useRef(!1);lf(()=>(V.current=!0,()=>{V.current=!1}),[]),lf(()=>{if(T&&(M.current=T),A&&(N.current=A),T&&A){if(k.current)return k.current(T,A,P);P()}},[T,A,P,k,j]);const re=f.useMemo(()=>({reference:M,floating:N,setReference:w,setFloating:S}),[w,S]),Z=f.useMemo(()=>({reference:T,floating:A}),[T,A]),te=f.useMemo(()=>{const $={position:n,left:0,top:0};if(!Z.floating)return $;const O=cN(Z.floating,h.x),L=cN(Z.floating,h.y);return l?{...$,transform:"translate("+O+"px, "+L+"px)",...v2(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:L}},[n,l,Z.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:P,refs:re,elements:Z,floatingStyles:te}),[h,P,re,Z,te])}const HV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?lN({element:r.current,padding:s}).fn(n):{}:r?lN({element:r,padding:s}).fn(n):{}}}},GV=(t,e)=>({...VV(t),options:[t,e]}),KV=(t,e)=>({...FV(t),options:[t,e]}),XV=(t,e)=>({...BV(t),options:[t,e]}),QV=(t,e)=>({...zV(t),options:[t,e]}),YV=(t,e)=>({...UV(t),options:[t,e]}),JV=(t,e)=>({...$V(t),options:[t,e]}),ZV=(t,e)=>({...HV(t),options:[t,e]});var eF="Arrow",w2=f.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(we.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});w2.displayName=eF;var tF=w2;function Y0(t){const[e,n]=f.useState(void 0);return zt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var J0="Popper",[b2,bi]=un(J0),[nF,_2]=b2(J0),N2=t=>{const{__scopePopper:e,children:n}=t,[r,s]=f.useState(null);return o.jsx(nF,{scope:e,anchor:r,onAnchorChange:s,children:n})};N2.displayName=J0;var S2="PopperAnchor",E2=f.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=_2(S2,n),a=f.useRef(null),l=ke(e,a);return f.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(we.div,{...s,ref:l})});E2.displayName=S2;var Z0="PopperContent",[rF,sF]=b2(Z0),j2=f.forwardRef((t,e)=>{var F,Y,ue,J,ie,de;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...y}=t,_=_2(Z0,n),[b,w]=f.useState(null),S=ke(e,Te=>w(Te)),[T,A]=f.useState(null),M=Y0(T),N=(M==null?void 0:M.width)??0,E=(M==null?void 0:M.height)??0,j=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],D=I.length>0,P={padding:k,boundary:I.filter(iF),altBoundary:D},{refs:V,floatingStyles:re,placement:Z,isPositioned:te,middlewareData:$}=WV({strategy:"fixed",placement:j,whileElementsMounted:(...Te)=>LV(...Te,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[GV({mainAxis:s+E,alignmentAxis:a}),c&&KV({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?XV():void 0,...P}),c&&QV({...P}),YV({...P,apply:({elements:Te,rects:qe,availableWidth:pt,availableHeight:tt})=>{const{width:st,height:jn}=qe.reference,Ze=Te.floating.style;Ze.setProperty("--radix-popper-available-width",`${pt}px`),Ze.setProperty("--radix-popper-available-height",`${tt}px`),Ze.setProperty("--radix-popper-anchor-width",`${st}px`),Ze.setProperty("--radix-popper-anchor-height",`${jn}px`)}}),T&&ZV({element:T,padding:l}),aF({arrowWidth:N,arrowHeight:E}),p&&JV({strategy:"referenceHidden",...P})]}),[O,L]=k2(Z),B=bt(x);zt(()=>{te&&(B==null||B())},[te,B]);const W=(F=$.arrow)==null?void 0:F.x,K=(Y=$.arrow)==null?void 0:Y.y,le=((ue=$.arrow)==null?void 0:ue.centerOffset)!==0,[oe,ce]=f.useState();return zt(()=>{b&&ce(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:te?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(J=$.transformOrigin)==null?void 0:J.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((de=$.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(rF,{scope:n,placedSide:O,onArrowChange:A,arrowX:W,arrowY:K,shouldHideArrow:le,children:o.jsx(we.div,{"data-side":O,"data-align":L,...y,ref:S,style:{...y.style,animation:te?void 0:"none"}})})})});j2.displayName=Z0;var C2="PopperArrow",oF={top:"bottom",right:"left",bottom:"top",left:"right"},T2=f.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=sF(C2,r),a=oF[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(tF,{...s,ref:n,style:{...s.style,display:"block"}})})});T2.displayName=C2;function iF(t){return t!==null}var aF=t=>({name:"transformOrigin",options:t,fn(e){var _,b,w;const{placement:n,rects:r,middlewareData:s}=e,a=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=k2(n),m={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=a?m:`${p}px`,y=`${-c}px`):u==="top"?(x=a?m:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=a?m:`${g}px`):u==="left"&&(x=`${r.floating.width+c}px`,y=a?m:`${g}px`),{data:{x,y}}}});function k2(t){const[e,n="center"]=t.split("-");return[e,n]}var xp=N2,Sd=E2,yp=j2,vp=T2,[wp,mY]=un("Tooltip",[bi]),bp=bi(),I2="TooltipProvider",lF=700,Wy="tooltip.open",[cF,ew]=wp(I2),A2=t=>{const{__scopeTooltip:e,delayDuration:n=lF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(cF,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};A2.displayName=I2;var _p="Tooltip",[uF,Ed]=wp(_p),R2=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=t,c=ew(_p,t.__scopeTooltip),u=bp(e),[h,m]=f.useState(null),p=Nr(),g=f.useRef(0),x=a??c.disableHoverableContent,y=l??c.delayDuration,_=f.useRef(!1),[b=!1,w]=Hr({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Wy))):c.onClose(),i==null||i(N)}}),S=f.useMemo(()=>b?_.current?"delayed-open":"instant-open":"closed",[b]),T=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,w(!0)},[w]),A=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),M=f.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,w(!0),g.current=0},y)},[y,w]);return f.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(xp,{...u,children:o.jsx(uF,{scope:e,contentId:p,open:b,stateAttribute:S,trigger:h,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?M():T()},[c.isOpenDelayedRef,M,T]),onTriggerLeave:f.useCallback(()=>{x?A():(window.clearTimeout(g.current),g.current=0)},[A,x]),onOpen:T,onClose:A,disableHoverableContent:x,children:n})})};R2.displayName=_p;var Hy="TooltipTrigger",P2=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ed(Hy,n),i=ew(Hy,n),a=bp(n),l=f.useRef(null),c=ke(e,l,s.onTriggerChange),u=f.useRef(!1),h=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Sd,{asChild:!0,...a,children:o.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:se(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:se(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:se(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:se(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:se(t.onBlur,s.onClose),onClick:se(t.onClick,s.onClose)})})});P2.displayName=Hy;var tw="TooltipPortal",[dF,hF]=wp(tw,{forceMount:void 0}),D2=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Ed(tw,e);return o.jsx(dF,{scope:e,forceMount:n,children:o.jsx(Gt,{present:n||i.open,children:o.jsx(_a,{asChild:!0,container:s,children:r})})})};D2.displayName=tw;var zl="TooltipContent",M2=f.forwardRef((t,e)=>{const n=hF(zl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Ed(zl,t.__scopeTooltip);return o.jsx(Gt,{present:r||a.open,children:a.disableHoverableContent?o.jsx(O2,{side:s,...i,ref:e}):o.jsx(fF,{side:s,...i,ref:e})})}),fF=f.forwardRef((t,e)=>{const n=Ed(zl,t.__scopeTooltip),r=ew(zl,t.__scopeTooltip),s=f.useRef(null),i=ke(e,s),[a,l]=f.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),g=f.useCallback((x,y)=>{const _=x.currentTarget,b={x:x.clientX,y:x.clientY},w=yF(b,_.getBoundingClientRect()),S=vF(b,w),T=wF(y.getBoundingClientRect()),A=_F([...S,...T]);l(A),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&h){const x=_=>g(_,h),y=_=>g(_,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",y)}}},[c,h,g,p]),f.useEffect(()=>{if(a){const x=y=>{const _=y.target,b={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!bF(b,a);w?p():S&&(p(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,a,u,p]),o.jsx(O2,{...t,ref:i})}),[mF,pF]=wp(_p,{isInside:!1}),gF=gT("TooltipContent"),O2=f.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Ed(zl,n),u=bp(n),{onClose:h}=c;return f.useEffect(()=>(document.addEventListener(Wy,h),()=>document.removeEventListener(Wy,h)),[h]),f.useEffect(()=>{if(c.trigger){const m=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),o.jsx(ba,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:o.jsxs(yp,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(gF,{children:r}),o.jsx(mF,{scope:n,isInside:!0,children:o.jsx(bL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});M2.displayName=zl;var L2="TooltipArrow",xF=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=bp(n);return pF(L2,n).isInside?null:o.jsx(vp,{...s,...r,ref:e})});xF.displayName=L2;function yF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function wF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function bF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function _F(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),NF(e)}function NF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var SF=A2,EF=R2,jF=P2,V2=D2,F2=M2;const jd=SF,Jo=EF,Zo=jF,Ws=f.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(F2,{ref:r,sideOffset:e,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Ws.displayName=F2.displayName;const CF="modulepreload",TF=function(t){return"/"+t},uN={},tl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=TF(c),c in uN)return;uN[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":CF,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},kF=()=>{};var dN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},IF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},U2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),r.push(n[h],n[m],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||m==null)throw new AF;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),m!==64){const x=u<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RF=function(t){const e=z2(t);return U2.encodeByteArray(e,!0)},im=function(t){return RF(t).replace(/\./g,"")},$2=function(t){try{return U2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=()=>PF().__FIREBASE_DEFAULTS__,MF=()=>{if(typeof process>"u"||typeof dN>"u")return;const t=dN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$2(t[1]);return e&&JSON.parse(e)},Np=()=>{try{return kF()||DF()||MF()||OF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},B2=t=>{var e,n;return(n=(e=Np())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LF=t=>{const e=B2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q2=()=>{var t;return(t=Np())==null?void 0:t.config},W2=t=>{var e;return(e=Np())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[im(JSON.stringify(n)),im(JSON.stringify(a)),""].join(".")}const hu={};function zF(){const t={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function UF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hN=!1;function G2(t,e){if(typeof window>"u"||typeof document>"u"||!cc(window.location.host)||hu[t]===e||hu[t]||hN)return;hu[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=zF().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hN=!0,a()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=UF(r),g=n("text"),x=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),_=document.getElementById(y)||document.createElement("a"),b=n("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,y);const T=u();c(w,b),S.append(w,x,_,T),document.body.appendChild(S)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $F(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function BF(){var e;const t=(e=Np())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GF(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KF(){return!BF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XF(){try{return typeof indexedDB=="object"}catch{return!1}}function QF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF="FirebaseError";class lo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YF,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cd.prototype.create)}}class Cd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?JF(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new lo(s,l,r)}}function JF(t,e){return t.replace(ZF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ZF=/\{\$([^}]+)}/g;function e9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(fN(i)&&fN(a)){if(!eo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function t9(t,e){const n=new n9(t,e);return n.subscribe.bind(n)}class n9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dx),s.error===void 0&&(s.error=dx),s.complete===void 0&&(s.complete=dx);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class da{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i9(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o9(t){return t===Vi?void 0:t}function i9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new s9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const l9={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},c9=Ue.INFO,u9={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},d9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=u9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nw{constructor(e){this.name=e,this._logLevel=c9,this._logHandler=d9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const h9=(t,e)=>e.some(n=>t instanceof n);let mN,pN;function f9(){return mN||(mN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m9(){return pN||(pN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K2=new WeakMap,Gy=new WeakMap,X2=new WeakMap,hx=new WeakMap,rw=new WeakMap;function p9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ei(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&K2.set(n,t)}).catch(()=>{}),rw.set(e,t),e}function g9(t){if(Gy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Gy.set(t,e)}let Ky={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x9(t){Ky=t(Ky)}function y9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fx(this),e,...n);return X2.set(r,e.sort?e.sort():[e]),ei(r)}:m9().includes(t)?function(...e){return t.apply(fx(this),e),ei(K2.get(this))}:function(...e){return ei(t.apply(fx(this),e))}}function v9(t){return typeof t=="function"?y9(t):(t instanceof IDBTransaction&&g9(t),h9(t,f9())?new Proxy(t,Ky):t)}function ei(t){if(t instanceof IDBRequest)return p9(t);if(hx.has(t))return hx.get(t);const e=v9(t);return e!==t&&(hx.set(t,e),rw.set(e,t)),e}const fx=t=>rw.get(t);function w9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=ei(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ei(a.result),c.oldVersion,c.newVersion,ei(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const b9=["get","getKey","getAll","getAllKeys","count"],_9=["put","add","delete","clear"],mx=new Map;function gN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mx.get(e))return mx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b9.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return mx.set(e,i),i}x9(t=>({...t,get:(e,n,r)=>gN(e,n)||t.get(e,n,r),has:(e,n)=>!!gN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xy="@firebase/app",xN="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new nw("@firebase/app"),E9="@firebase/app-compat",j9="@firebase/analytics-compat",C9="@firebase/analytics",T9="@firebase/app-check-compat",k9="@firebase/app-check",I9="@firebase/auth",A9="@firebase/auth-compat",R9="@firebase/database",P9="@firebase/data-connect",D9="@firebase/database-compat",M9="@firebase/functions",O9="@firebase/functions-compat",L9="@firebase/installations",V9="@firebase/installations-compat",F9="@firebase/messaging",z9="@firebase/messaging-compat",U9="@firebase/performance",$9="@firebase/performance-compat",B9="@firebase/remote-config",q9="@firebase/remote-config-compat",W9="@firebase/storage",H9="@firebase/storage-compat",G9="@firebase/firestore",K9="@firebase/ai",X9="@firebase/firestore-compat",Q9="firebase",Y9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="[DEFAULT]",J9={[Xy]:"fire-core",[E9]:"fire-core-compat",[C9]:"fire-analytics",[j9]:"fire-analytics-compat",[k9]:"fire-app-check",[T9]:"fire-app-check-compat",[I9]:"fire-auth",[A9]:"fire-auth-compat",[R9]:"fire-rtdb",[P9]:"fire-data-connect",[D9]:"fire-rtdb-compat",[M9]:"fire-fn",[O9]:"fire-fn-compat",[L9]:"fire-iid",[V9]:"fire-iid-compat",[F9]:"fire-fcm",[z9]:"fire-fcm-compat",[U9]:"fire-perf",[$9]:"fire-perf-compat",[B9]:"fire-rc",[q9]:"fire-rc-compat",[W9]:"fire-gcs",[H9]:"fire-gcs-compat",[G9]:"fire-fst",[X9]:"fire-fst-compat",[K9]:"fire-vertex","fire-js":"fire-js",[Q9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new Map,Z9=new Map,Yy=new Map;function yN(t,e){try{t.container.addComponent(e)}catch(n){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ul(t){const e=t.name;if(Yy.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,t);for(const n of am.values())yN(n,t);for(const n of Z9.values())yN(n,t);return!0}function sw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new Cd("app","Firebase",ez);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=Y9;function Q2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ti.create("bad-app-name",{appName:String(s)});if(n||(n=q2()),!n)throw ti.create("no-options");const i=am.get(s);if(i){if(eo(n,i.options)&&eo(r,i.config))return i;throw ti.create("duplicate-app",{appName:s})}const a=new a9(s);for(const c of Yy.values())a.addComponent(c);const l=new tz(n,r,a);return am.set(s,l),l}function Y2(t=Qy){const e=am.get(t);if(!e&&t===Qy&&q2())return Q2();if(!e)throw ti.create("no-app",{appName:t});return e}function ni(t,e,n){let r=J9[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(a.join(" "));return}Ul(new da(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="firebase-heartbeat-database",rz=1,qu="firebase-heartbeat-store";let px=null;function J2(){return px||(px=w9(nz,rz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ti.create("idb-open",{originalErrorMessage:t.message})})),px}async function sz(t){try{const n=(await J2()).transaction(qu),r=await n.objectStore(qu).get(Z2(t));return await n.done,r}catch(e){if(e instanceof lo)to.warn(e.message);else{const n=ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(n.message)}}}async function vN(t,e){try{const r=(await J2()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,Z2(t)),await r.done}catch(n){if(n instanceof lo)to.warn(n.message);else{const r=ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});to.warn(r.message)}}}function Z2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=1024,iz=30;class az{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>iz){const a=uz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){to.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wN(),{heartbeatsToSend:r,unsentEntries:s}=lz(this._heartbeatsCache.heartbeats),i=im(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return to.warn(n),""}}}function wN(){return new Date().toISOString().substring(0,10)}function lz(t,e=oz){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),bN(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XF()?QF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function bN(t){return im(JSON.stringify({version:2,heartbeats:t})).length}function uz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(t){Ul(new da("platform-logger",e=>new N9(e),"PRIVATE")),Ul(new da("heartbeat",e=>new az(e),"PRIVATE")),ni(Xy,xN,t),ni(Xy,xN,"esm2020"),ni("fire-js","")}dz("");function ek(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hz=ek,tk=new Cd("auth","Firebase",ek());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new nw("@firebase/auth");function fz(t,...e){lm.logLevel<=Ue.WARN&&lm.warn(`Auth (${uc}): ${t}`,...e)}function cf(t,...e){lm.logLevel<=Ue.ERROR&&lm.error(`Auth (${uc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,...e){throw iw(t,...e)}function $r(t,...e){return iw(t,...e)}function ow(t,e,n){const r={...hz(),[e]:n};return new Cd("auth","Firebase",r).create(e,{appName:t.name})}function na(t){return ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_s(t,"argument-error"),ow(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tk.create(t,...e)}function je(t,e,...n){if(!t)throw iw(e,...n)}function Us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function no(t,e){t||Us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pz(){return _N()==="http:"||_N()==="https:"}function _N(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pz()||WF()||"connection"in navigator)?navigator.onLine:!0}function xz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.shortDelay=e,this.longDelay=n,no(n>e,"Short delay should be less than long delay!"),this.isMobile=$F()||HF()}get(){return gz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){no(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wz=new kd(3e4,6e4);function lw(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Na(t,e,n,r,s={}){return rk(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Td({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return qF()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&cc(t.emulatorConfig.host)&&(u.credentials="include"),nk.fetch()(await sk(t,t.config.apiHost,n,l),u)})}async function rk(t,e,n){t._canInitEmulator=!1;const r={...yz,...e};try{const s=new _z(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Rh(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Rh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Rh(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ow(t,h,u);_s(t,h)}}catch(s){if(s instanceof lo)throw s;_s(t,"network-request-failed",{message:String(s)})}}async function bz(t,e,n,r,s={}){const i=await Na(t,e,n,r,s);return"mfaPendingCredential"in i&&_s(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function sk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?aw(t.config,s):`${t.config.apiScheme}://${s}`;return vz.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class _z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),wz.get())})}}function Rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$r(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nz(t,e){return Na(t,"POST","/v1/accounts:delete",e)}async function cm(t,e){return Na(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sz(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),s=cw(r);je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fu(gx(s.auth_time)),issuedAtTime:fu(gx(s.iat)),expirationTime:fu(gx(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gx(t){return Number(t)*1e3}function cw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=$2(n);return s?JSON.parse(s):(cf("Failed to decode base64 JWT payload"),null)}catch(s){return cf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function NN(t){const e=cw(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lo&&Ez(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ez({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t){var m;const e=t.auth,n=await t.getIdToken(),r=await $l(t,cm(e,{idToken:n}));je(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?ok(s.providerUserInfo):[],a=Tz(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Cz(t){const e=Ht(t);await um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tz(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ok(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e){const n=await rk(t,{},async()=>{const r=Td({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await sk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&cc(t.emulatorConfig.host)&&(c.credentials="include"),nk.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Iz(t,e){return Na(t,"POST","/v2/accounts:revokeToken",lw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=NN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kz(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new hl;return r&&(je(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(je(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hl,this.toJSON())}_performRefresh(){return Us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new jz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Sz(this,e)}reload(){return Cz(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lr(this.auth.app))return Promise.reject(na(this.auth));const e=await this.getIdToken();return await $l(this,Nz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:g,providerData:x,stsTokenManager:y}=n;je(m&&y,e,"internal-error");const _=hl.fromJSON(this.name,y);je(typeof m=="string",e,"internal-error"),_o(r,e.name),_o(s,e.name),je(typeof p=="boolean",e,"internal-error"),je(typeof g=="boolean",e,"internal-error"),_o(i,e.name),_o(a,e.name),_o(l,e.name),_o(c,e.name),_o(u,e.name),_o(h,e.name);const b=new Fr({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(b.providerData=x.map(w=>({...w}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new hl;s.updateFromServerResponse(n);const i=new Fr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await um(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];je(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ok(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new hl;l.updateFromIdToken(r);const c=new Fr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Map;function $s(t){no(t instanceof Function,"Expected a class definition");let e=SN.get(t);return e?(no(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ik.type="NONE";const EN=ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n){return`firebase:${t}:${e}:${n}`}class fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=uf(this.userKey,s.apiKey,i),this.fullPersistenceKey=uf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cm(this.auth,{idToken:e}).catch(()=>{});return n?Fr._fromGetAccountInfoResponse(this.auth,n,e):null}return Fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fl($s(EN),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||$s(EN);const a=uf(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let m;if(typeof h=="string"){const p=await cm(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Fr._fromGetAccountInfoResponse(e,p,h)}else m=Fr._fromJSON(e,h);u!==i&&(l=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new fl(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new fl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ak(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hk(e))return"Blackberry";if(fk(e))return"Webos";if(lk(e))return"Safari";if((e.includes("chrome/")||ck(e))&&!e.includes("edge/"))return"Chrome";if(dk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ak(t=En()){return/firefox\//i.test(t)}function lk(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ck(t=En()){return/crios\//i.test(t)}function uk(t=En()){return/iemobile/i.test(t)}function dk(t=En()){return/android/i.test(t)}function hk(t=En()){return/blackberry/i.test(t)}function fk(t=En()){return/webos/i.test(t)}function uw(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Az(t=En()){var e;return uw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Rz(){return GF()&&document.documentMode===10}function mk(t=En()){return uw(t)||dk(t)||fk(t)||hk(t)||/windows phone/i.test(t)||uk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e=[]){let n;switch(t){case"Browser":n=jN(En());break;case"Worker":n=`${jN(En())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(t,e={}){return Na(t,"GET","/v2/passwordPolicy",lw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=6;class Oz{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Mz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CN(this),this.idTokenSubscription=new CN(this),this.beforeStateQueue=new Pz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$s(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cm(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Lr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lr(this.app))return Promise.reject(na(this));const n=e?Ht(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lr(this.app)?Promise.reject(na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lr(this.app)?Promise.reject(na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Dz(this),n=new Oz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Iz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$s(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[$s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&fz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sp(t){return Ht(t)}class CN{constructor(e){this.auth=e,this.observer=null,this.addObserver=t9(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vz(t){dw=t}function Fz(t){return dw.loadJS(t)}function zz(){return dw.gapiScript}function Uz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t,e){const n=sw(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(eo(i,e??{}))return s;_s(s,"already-initialized")}return n.initialize({options:e})}function Bz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qz(t,e,n){const r=Sp(t);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=gk(e),{host:a,port:l}=Wz(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(eo(u,r.config.emulator)&&eo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cc(a)?(H2(`${i}//${a}${c}`),G2("Auth",!0)):Hz()}function gk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wz(t){const e=gk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:TN(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:TN(a)}}}function TN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Hz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Us("not implemented")}_getIdTokenResponse(e){return Us("not implemented")}_linkToIdToken(e,n){return Us("not implemented")}_getReauthenticationResolver(e){return Us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e){return bz(t,"POST","/v1/accounts:signInWithIdp",lw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz="http://localhost";class ha extends xk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_s("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new ha(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ml(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ml(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ml(e,n)}buildRequest(){const e={requestUri:Gz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Td(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Id{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.FACEBOOK_SIGN_IN_METHOD="facebook.com";Io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xn.credential(n,r)}catch{return null}}}xn.GOOGLE_SIGN_IN_METHOD="google.com";xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Id{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Id{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ro.credential(n,r)}catch{return null}}}Ro.TWITTER_SIGN_IN_METHOD="twitter.com";Ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Fr._fromIdTokenResponse(e,r,s),a=kN(r);return new Bl({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=kN(r);return new Bl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function kN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends lo{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dm(e,n,r,s)}}function yk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dm._fromErrorAndOperation(t,i,e,r):i})}async function Kz(t,e,n=!1){const r=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xz(t,e,n=!1){const{auth:r}=t;if(Lr(r.app))return Promise.reject(na(r));const s="reauthenticate";try{const i=await $l(t,yk(r,s,e,t),n);je(i.idToken,r,"internal-error");const a=cw(i.idToken);je(a,r,"internal-error");const{sub:l}=a;return je(t.uid===l,r,"user-mismatch"),Bl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_s(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e,n=!1){if(Lr(t.app))return Promise.reject(na(t));const r="signIn",s=await yk(t,r,e),i=await Bl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yz(t,e){return Na(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ht(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await $l(r,Yz(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Zz(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function e8(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function t8(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function n8(t){return Ht(t).signOut()}const hm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=1e3,s8=10;class wk extends vk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Rz()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,s8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},r8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wk.type="LOCAL";const o8=wk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk extends vk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bk.type="SESSION";const _k=bk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await i8(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=fw("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function l8(t){xs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function c8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function d8(){return Nk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="firebaseLocalStorageDb",h8=1,fm="firebaseLocalStorage",Ek="fbase_key";class Ad{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jp(t,e){return t.transaction([fm],e?"readwrite":"readonly").objectStore(fm)}function f8(){const t=indexedDB.deleteDatabase(Sk);return new Ad(t).toPromise()}function ev(){const t=indexedDB.open(Sk,h8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fm,{keyPath:Ek})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fm)?e(r):(r.close(),await f8(),e(await ev()))})})}async function IN(t,e,n){const r=jp(t,!0).put({[Ek]:e,value:n});return new Ad(r).toPromise()}async function m8(t,e){const n=jp(t,!1).get(e),r=await new Ad(n).toPromise();return r===void 0?null:r.value}function AN(t,e){const n=jp(t,!0).delete(e);return new Ad(n).toPromise()}const p8=800,g8=3;class jk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ev(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>g8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(d8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await c8(),!this.activeServiceWorker)return;this.sender=new a8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ev();return await IN(e,hm,"1"),await AN(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>m8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>AN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=jp(s,!1).getAll();return new Ad(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jk.type="LOCAL";const x8=jk;new kd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e){return e?$s(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends xk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function y8(t){return Qz(t.auth,new mw(t),t.bypassAuthState)}function v8(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),Xz(n,new mw(t),t.bypassAuthState)}async function w8(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),Kz(n,new mw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y8;case"linkViaPopup":case"linkViaRedirect":return w8;case"reauthViaPopup":case"reauthViaRedirect":return v8;default:_s(this.auth,"internal-error")}}resolve(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new kd(2e3,1e4);async function Ph(t,e,n){if(Lr(t.app))return Promise.reject($r(t,"operation-not-supported-in-this-environment"));const r=Sp(t);mz(t,e,hw);const s=Ck(r,n);return new Wi(r,"signInViaPopup",e,s).executeNotNull()}class Wi extends Tk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){no(this.filter.length===1,"Popup operations only handle one event");const e=fw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b8.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="pendingRedirect",df=new Map;class N8 extends Tk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const r=await S8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S8(t,e){const n=C8(e),r=j8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function E8(t,e){df.set(t._key(),e)}function j8(t){return $s(t._redirectPersistence)}function C8(t){return uf(_8,t.config.apiKey,t.name)}async function T8(t,e,n=!1){if(Lr(t.app))return Promise.reject(na(t));const r=Sp(t),s=Ck(r,e),a=await new N8(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=10*60*1e3;class I8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($r(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k8&&this.cachedEventUids.clear(),this.cachedEventUids.has(RN(e))}saveEventToCache(e){this.cachedEventUids.add(RN(e)),this.lastProcessedEventTime=Date.now()}}function RN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e={}){return Na(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D8=/^https?/;async function M8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R8(t);for(const n of e)try{if(O8(n))return}catch{}_s(t,"unauthorized-domain")}function O8(t){const e=Jy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!D8.test(n))return!1;if(P8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=new kd(3e4,6e4);function PN(){const t=xs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V8(t){return new Promise((e,n)=>{var s,i,a;function r(){PN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PN(),n($r(t,"network-request-failed"))},timeout:L8.get()})}if((i=(s=xs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=xs().gapi)!=null&&a.load)r();else{const l=Uz("iframefcb");return xs()[l]=()=>{gapi.load?r():n($r(t,"network-request-failed"))},Fz(`${zz()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw hf=null,e})}let hf=null;function F8(t){return hf=hf||V8(t),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=new kd(5e3,15e3),U8="__/auth/iframe",$8="emulator/auth/iframe",B8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W8(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?aw(e,$8):`https://${t.config.authDomain}/${U8}`,r={apiKey:e.apiKey,appName:t.name,v:uc},s=q8.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Td(r).slice(1)}`}async function H8(t){const e=await F8(t),n=xs().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:W8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B8,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=$r(t,"network-request-failed"),l=xs().setTimeout(()=>{i(a)},z8.get());function c(){xs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K8=500,X8=600,Q8="_blank",Y8="http://localhost";class DN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J8(t,e,n,r=K8,s=X8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...G8,width:r.toString(),height:s.toString(),top:i,left:a},u=En().toLowerCase();n&&(l=ck(u)?Q8:n),ak(u)&&(e=e||Y8,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,x])=>`${p}${g}=${x},`,"");if(Az(u)&&l!=="_self")return Z8(e||"",l),new DN(null);const m=window.open(e||"",l,h);je(m,t,"popup-blocked");try{m.focus()}catch{}return new DN(m)}function Z8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="__/auth/handler",tU="emulator/auth/handler",nU=encodeURIComponent("fac");async function MN(t,e,n,r,s,i){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uc,eventId:s};if(e instanceof hw){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",e9(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Id){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${nU}=${encodeURIComponent(c)}`:"";return`${rU(t)}?${Td(l).slice(1)}${u}`}function rU({config:t}){return t.emulator?aw(t,tU):`https://${t.authDomain}/${eU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="webStorageSupport";class sU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_k,this._completeRedirectFn=T8,this._overrideRedirectResult=E8}async _openPopup(e,n,r,s){var a;no((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await MN(e,n,r,Jy(),s);return J8(e,i,fw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await MN(e,n,r,Jy(),s);return l8(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(no(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H8(e),r=new I8(e);return n.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xx,{type:xx},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[xx];i!==void 0&&n(!!i),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mk()||lk()||uw()}}const oU=sU;var ON="@firebase/auth",LN="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lU(t){Ul(new da("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;je(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pk(t)},u=new Lz(r,s,i,c);return Bz(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ul(new da("auth-internal",e=>{const n=Sp(e.getProvider("auth").getImmediate());return(r=>new iU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(ON,LN,aU(t)),ni(ON,LN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=5*60,uU=W2("authIdTokenMaxAge")||cU;let VN=null;const dU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uU)return;const s=n==null?void 0:n.token;VN!==s&&(VN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hU(t=Y2()){const e=sw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$z(t,{popupRedirectResolver:oU,persistence:[x8,o8,_k]}),r=W2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=dU(i.toString());e8(n,a,()=>a(n.currentUser)),Zz(n,l=>a(l))}}const s=B2("auth");return s&&qz(n,`http://${s}`),n}function fU(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Vz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=$r("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lU("Browser");var mU="firebase",pU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(mU,pU,"app");var FN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Ik;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function j(){}j.prototype=E.prototype,N.F=E.prototype,N.prototype=new j,N.prototype.constructor=N,N.D=function(k,I,D){for(var P=Array(arguments.length-2),V=2;V<arguments.length;V++)P[V-2]=arguments[V];return E.prototype[I].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,E,j){j||(j=0);const k=Array(16);if(typeof E=="string")for(var I=0;I<16;++I)k[I]=E.charCodeAt(j++)|E.charCodeAt(j++)<<8|E.charCodeAt(j++)<<16|E.charCodeAt(j++)<<24;else for(I=0;I<16;++I)k[I]=E[j++]|E[j++]<<8|E[j++]<<16|E[j++]<<24;E=N.g[0],j=N.g[1],I=N.g[2];let D=N.g[3],P;P=E+(D^j&(I^D))+k[0]+3614090360&4294967295,E=j+(P<<7&4294967295|P>>>25),P=D+(I^E&(j^I))+k[1]+3905402710&4294967295,D=E+(P<<12&4294967295|P>>>20),P=I+(j^D&(E^j))+k[2]+606105819&4294967295,I=D+(P<<17&4294967295|P>>>15),P=j+(E^I&(D^E))+k[3]+3250441966&4294967295,j=I+(P<<22&4294967295|P>>>10),P=E+(D^j&(I^D))+k[4]+4118548399&4294967295,E=j+(P<<7&4294967295|P>>>25),P=D+(I^E&(j^I))+k[5]+1200080426&4294967295,D=E+(P<<12&4294967295|P>>>20),P=I+(j^D&(E^j))+k[6]+2821735955&4294967295,I=D+(P<<17&4294967295|P>>>15),P=j+(E^I&(D^E))+k[7]+4249261313&4294967295,j=I+(P<<22&4294967295|P>>>10),P=E+(D^j&(I^D))+k[8]+1770035416&4294967295,E=j+(P<<7&4294967295|P>>>25),P=D+(I^E&(j^I))+k[9]+2336552879&4294967295,D=E+(P<<12&4294967295|P>>>20),P=I+(j^D&(E^j))+k[10]+4294925233&4294967295,I=D+(P<<17&4294967295|P>>>15),P=j+(E^I&(D^E))+k[11]+2304563134&4294967295,j=I+(P<<22&4294967295|P>>>10),P=E+(D^j&(I^D))+k[12]+1804603682&4294967295,E=j+(P<<7&4294967295|P>>>25),P=D+(I^E&(j^I))+k[13]+4254626195&4294967295,D=E+(P<<12&4294967295|P>>>20),P=I+(j^D&(E^j))+k[14]+2792965006&4294967295,I=D+(P<<17&4294967295|P>>>15),P=j+(E^I&(D^E))+k[15]+1236535329&4294967295,j=I+(P<<22&4294967295|P>>>10),P=E+(I^D&(j^I))+k[1]+4129170786&4294967295,E=j+(P<<5&4294967295|P>>>27),P=D+(j^I&(E^j))+k[6]+3225465664&4294967295,D=E+(P<<9&4294967295|P>>>23),P=I+(E^j&(D^E))+k[11]+643717713&4294967295,I=D+(P<<14&4294967295|P>>>18),P=j+(D^E&(I^D))+k[0]+3921069994&4294967295,j=I+(P<<20&4294967295|P>>>12),P=E+(I^D&(j^I))+k[5]+3593408605&4294967295,E=j+(P<<5&4294967295|P>>>27),P=D+(j^I&(E^j))+k[10]+38016083&4294967295,D=E+(P<<9&4294967295|P>>>23),P=I+(E^j&(D^E))+k[15]+3634488961&4294967295,I=D+(P<<14&4294967295|P>>>18),P=j+(D^E&(I^D))+k[4]+3889429448&4294967295,j=I+(P<<20&4294967295|P>>>12),P=E+(I^D&(j^I))+k[9]+568446438&4294967295,E=j+(P<<5&4294967295|P>>>27),P=D+(j^I&(E^j))+k[14]+3275163606&4294967295,D=E+(P<<9&4294967295|P>>>23),P=I+(E^j&(D^E))+k[3]+4107603335&4294967295,I=D+(P<<14&4294967295|P>>>18),P=j+(D^E&(I^D))+k[8]+1163531501&4294967295,j=I+(P<<20&4294967295|P>>>12),P=E+(I^D&(j^I))+k[13]+2850285829&4294967295,E=j+(P<<5&4294967295|P>>>27),P=D+(j^I&(E^j))+k[2]+4243563512&4294967295,D=E+(P<<9&4294967295|P>>>23),P=I+(E^j&(D^E))+k[7]+1735328473&4294967295,I=D+(P<<14&4294967295|P>>>18),P=j+(D^E&(I^D))+k[12]+2368359562&4294967295,j=I+(P<<20&4294967295|P>>>12),P=E+(j^I^D)+k[5]+4294588738&4294967295,E=j+(P<<4&4294967295|P>>>28),P=D+(E^j^I)+k[8]+2272392833&4294967295,D=E+(P<<11&4294967295|P>>>21),P=I+(D^E^j)+k[11]+1839030562&4294967295,I=D+(P<<16&4294967295|P>>>16),P=j+(I^D^E)+k[14]+4259657740&4294967295,j=I+(P<<23&4294967295|P>>>9),P=E+(j^I^D)+k[1]+2763975236&4294967295,E=j+(P<<4&4294967295|P>>>28),P=D+(E^j^I)+k[4]+1272893353&4294967295,D=E+(P<<11&4294967295|P>>>21),P=I+(D^E^j)+k[7]+4139469664&4294967295,I=D+(P<<16&4294967295|P>>>16),P=j+(I^D^E)+k[10]+3200236656&4294967295,j=I+(P<<23&4294967295|P>>>9),P=E+(j^I^D)+k[13]+681279174&4294967295,E=j+(P<<4&4294967295|P>>>28),P=D+(E^j^I)+k[0]+3936430074&4294967295,D=E+(P<<11&4294967295|P>>>21),P=I+(D^E^j)+k[3]+3572445317&4294967295,I=D+(P<<16&4294967295|P>>>16),P=j+(I^D^E)+k[6]+76029189&4294967295,j=I+(P<<23&4294967295|P>>>9),P=E+(j^I^D)+k[9]+3654602809&4294967295,E=j+(P<<4&4294967295|P>>>28),P=D+(E^j^I)+k[12]+3873151461&4294967295,D=E+(P<<11&4294967295|P>>>21),P=I+(D^E^j)+k[15]+530742520&4294967295,I=D+(P<<16&4294967295|P>>>16),P=j+(I^D^E)+k[2]+3299628645&4294967295,j=I+(P<<23&4294967295|P>>>9),P=E+(I^(j|~D))+k[0]+4096336452&4294967295,E=j+(P<<6&4294967295|P>>>26),P=D+(j^(E|~I))+k[7]+1126891415&4294967295,D=E+(P<<10&4294967295|P>>>22),P=I+(E^(D|~j))+k[14]+2878612391&4294967295,I=D+(P<<15&4294967295|P>>>17),P=j+(D^(I|~E))+k[5]+4237533241&4294967295,j=I+(P<<21&4294967295|P>>>11),P=E+(I^(j|~D))+k[12]+1700485571&4294967295,E=j+(P<<6&4294967295|P>>>26),P=D+(j^(E|~I))+k[3]+2399980690&4294967295,D=E+(P<<10&4294967295|P>>>22),P=I+(E^(D|~j))+k[10]+4293915773&4294967295,I=D+(P<<15&4294967295|P>>>17),P=j+(D^(I|~E))+k[1]+2240044497&4294967295,j=I+(P<<21&4294967295|P>>>11),P=E+(I^(j|~D))+k[8]+1873313359&4294967295,E=j+(P<<6&4294967295|P>>>26),P=D+(j^(E|~I))+k[15]+4264355552&4294967295,D=E+(P<<10&4294967295|P>>>22),P=I+(E^(D|~j))+k[6]+2734768916&4294967295,I=D+(P<<15&4294967295|P>>>17),P=j+(D^(I|~E))+k[13]+1309151649&4294967295,j=I+(P<<21&4294967295|P>>>11),P=E+(I^(j|~D))+k[4]+4149444226&4294967295,E=j+(P<<6&4294967295|P>>>26),P=D+(j^(E|~I))+k[11]+3174756917&4294967295,D=E+(P<<10&4294967295|P>>>22),P=I+(E^(D|~j))+k[2]+718787259&4294967295,I=D+(P<<15&4294967295|P>>>17),P=j+(D^(I|~E))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(I+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+D&4294967295}r.prototype.v=function(N,E){E===void 0&&(E=N.length);const j=E-this.blockSize,k=this.C;let I=this.h,D=0;for(;D<E;){if(I==0)for(;D<=j;)s(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<E;)if(k[I++]=N.charCodeAt(D++),I==this.blockSize){s(this,k),I=0;break}}else for(;D<E;)if(k[I++]=N[D++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=E},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;E=this.o*8;for(var j=N.length-8;j<N.length;++j)N[j]=E&255,E/=256;for(this.v(N),N=Array(16),E=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)N[E++]=this.g[j]>>>k&255;return N};function i(N,E){var j=l;return Object.prototype.hasOwnProperty.call(j,N)?j[N]:j[N]=E(N)}function a(N,E){this.h=E;const j=[];let k=!0;for(let I=N.length-1;I>=0;I--){const D=N[I]|0;k&&D==E||(j[I]=D,k=!1)}this.g=j}var l={};function c(N){return-128<=N&&N<128?i(N,function(E){return new a([E|0],E<0?-1:0)}):new a([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return m;if(N<0)return _(u(-N));const E=[];let j=1;for(let k=0;N>=j;k++)E[k]=N/j|0,j*=4294967296;return new a(E,0)}function h(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return _(h(N.substring(1),E));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=u(Math.pow(E,8));let k=m;for(let D=0;D<N.length;D+=8){var I=Math.min(8,N.length-D);const P=parseInt(N.substring(D,D+I),E);I<8?(I=u(Math.pow(E,I)),k=k.j(I).add(u(P))):(k=k.j(j),k=k.add(u(P)))}return k}var m=c(0),p=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(y(this))return-_(this).m();let N=0,E=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);N+=(k>=0?k:4294967296+k)*E,E*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(y(this))return"-"+_(this).toString(N);const E=u(Math.pow(N,6));var j=this;let k="";for(;;){const I=T(j,E).g;j=b(j,I.j(E));let D=((j.g.length>0?j.g[0]:j.h)>>>0).toString(N);if(j=I,x(j))return D+k;for(;D.length<6;)D="0"+D;k=D+k}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(let E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function y(N){return N.h==-1}t.l=function(N){return N=b(this,N),y(N)?-1:x(N)?0:1};function _(N){const E=N.g.length,j=[];for(let k=0;k<E;k++)j[k]=~N.g[k];return new a(j,~N.h).add(p)}t.abs=function(){return y(this)?_(this):this},t.add=function(N){const E=Math.max(this.g.length,N.g.length),j=[];let k=0;for(let I=0;I<=E;I++){let D=k+(this.i(I)&65535)+(N.i(I)&65535),P=(D>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);k=P>>>16,D&=65535,P&=65535,j[I]=P<<16|D}return new a(j,j[j.length-1]&-2147483648?-1:0)};function b(N,E){return N.add(_(E))}t.j=function(N){if(x(this)||x(N))return m;if(y(this))return y(N)?_(this).j(_(N)):_(_(this).j(N));if(y(N))return _(this.j(_(N)));if(this.l(g)<0&&N.l(g)<0)return u(this.m()*N.m());const E=this.g.length+N.g.length,j=[];for(var k=0;k<2*E;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<N.g.length;I++){const D=this.i(k)>>>16,P=this.i(k)&65535,V=N.i(I)>>>16,re=N.i(I)&65535;j[2*k+2*I]+=P*re,w(j,2*k+2*I),j[2*k+2*I+1]+=D*re,w(j,2*k+2*I+1),j[2*k+2*I+1]+=P*V,w(j,2*k+2*I+1),j[2*k+2*I+2]+=D*V,w(j,2*k+2*I+2)}for(N=0;N<E;N++)j[N]=j[2*N+1]<<16|j[2*N];for(N=E;N<2*E;N++)j[N]=0;return new a(j,0)};function w(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function S(N,E){this.g=N,this.h=E}function T(N,E){if(x(E))throw Error("division by zero");if(x(N))return new S(m,m);if(y(N))return E=T(_(N),E),new S(_(E.g),_(E.h));if(y(E))return E=T(N,_(E)),new S(_(E.g),E.h);if(N.g.length>30){if(y(N)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var j=p,k=E;k.l(N)<=0;)j=A(j),k=A(k);var I=M(j,1),D=M(k,1);for(k=M(k,2),j=M(j,2);!x(k);){var P=D.add(k);P.l(N)<=0&&(I=I.add(j),D=P),k=M(k,1),j=M(j,1)}return E=b(N,I.j(E)),new S(I,E)}for(I=m;N.l(E)>=0;){for(j=Math.max(1,Math.floor(N.m()/E.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),D=u(j),P=D.j(E);y(P)||P.l(N)>0;)j-=k,D=u(j),P=D.j(E);x(D)&&(D=p),I=I.add(D),N=b(N,P)}return new S(I,N)}t.B=function(N){return T(this,N).h},t.and=function(N){const E=Math.max(this.g.length,N.g.length),j=[];for(let k=0;k<E;k++)j[k]=this.i(k)&N.i(k);return new a(j,this.h&N.h)},t.or=function(N){const E=Math.max(this.g.length,N.g.length),j=[];for(let k=0;k<E;k++)j[k]=this.i(k)|N.i(k);return new a(j,this.h|N.h)},t.xor=function(N){const E=Math.max(this.g.length,N.g.length),j=[];for(let k=0;k<E;k++)j[k]=this.i(k)^N.i(k);return new a(j,this.h^N.h)};function A(N){const E=N.g.length+1,j=[];for(let k=0;k<E;k++)j[k]=N.i(k)<<1|N.i(k-1)>>>31;return new a(j,N.h)}function M(N,E){const j=E>>5;E%=32;const k=N.g.length-j,I=[];for(let D=0;D<k;D++)I[D]=E>0?N.i(D+j)>>>E|N.i(D+j+1)<<32-E:N.i(D+j);return new a(I,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ik=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,ri=a}).apply(typeof FN<"u"?FN:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ak,Gc,Rk,ff,tv,Pk,Dk,Mk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var v=0;v<d.length;++v){var C=d[v];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function s(d,v){if(v)e:{var C=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var z=d[R];if(!(z in C))break e;C=C[z]}d=d[d.length-1],R=C[d],v=v(R),v!=R&&v!=null&&e(C,d,{configurable:!0,writable:!0,value:v})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(v){var C=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&C.push([R,v[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function c(d,v,C){return d.call.apply(d.bind,arguments)}function u(d,v,C){return u=c,u.apply(null,arguments)}function h(d,v){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function m(d,v){function C(){}C.prototype=v.prototype,d.Z=v.prototype,d.prototype=new C,d.prototype.constructor=d,d.Ob=function(R,z,q){for(var fe=Array(arguments.length-2),De=2;De<arguments.length;De++)fe[De-2]=arguments[De];return v.prototype[z].apply(R,fe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const v=d.length;if(v>0){const C=Array(v);for(let R=0;R<v;R++)C[R]=d[R];return C}return[]}function x(d,v){for(let R=1;R<arguments.length;R++){const z=arguments[R];var C=typeof z;if(C=C!="object"?C:z?Array.isArray(z)?"array":C:"null",C=="array"||C=="object"&&typeof z.length=="number"){C=d.length||0;const q=z.length||0;d.length=C+q;for(let fe=0;fe<q;fe++)d[C+fe]=z[fe]}else d.push(z)}}class y{constructor(v,C){this.i=v,this.j=C,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _(d){a.setTimeout(()=>{throw d},0)}function b(){var d=N;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class w{constructor(){this.h=this.g=null}add(v,C){const R=S.get();R.set(v,C),this.h?this.h.next=R:this.g=R,this.h=R}}var S=new y(()=>new T,d=>d.reset());class T{constructor(){this.next=this.g=this.h=null}set(v,C){this.h=v,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let A,M=!1,N=new w,E=()=>{const d=Promise.resolve(void 0);A=()=>{d.then(j)}};function j(){for(var d;d=b();){try{d.h.call(d.g)}catch(C){_(C)}var v=S;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};a.addEventListener("test",C,v),a.removeEventListener("test",C,v)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function V(d,v){I.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}m(V,I),V.prototype.init=function(d,v){const C=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(C=="mouseover"?v=d.fromElement:C=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),Z=0;function te(d,v,C,R,z){this.listener=d,this.proxy=null,this.src=v,this.type=C,this.capture=!!R,this.ha=z,this.key=++Z,this.da=this.fa=!1}function $(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function O(d,v,C){for(const R in d)v.call(C,d[R],R,d)}function L(d,v){for(const C in d)v.call(void 0,d[C],C,d)}function B(d){const v={};for(const C in d)v[C]=d[C];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(d,v){let C,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(C in R)d[C]=R[C];for(let q=0;q<W.length;q++)C=W[q],Object.prototype.hasOwnProperty.call(R,C)&&(d[C]=R[C])}}function le(d){this.src=d,this.g={},this.h=0}le.prototype.add=function(d,v,C,R,z){const q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);const fe=ce(d,v,R,z);return fe>-1?(v=d[fe],C||(v.fa=!1)):(v=new te(v,this.src,q,!!R,z),v.fa=C,d.push(v)),v};function oe(d,v){const C=v.type;if(C in d.g){var R=d.g[C],z=Array.prototype.indexOf.call(R,v,void 0),q;(q=z>=0)&&Array.prototype.splice.call(R,z,1),q&&($(v),d.g[C].length==0&&(delete d.g[C],d.h--))}}function ce(d,v,C,R){for(let z=0;z<d.length;++z){const q=d[z];if(!q.da&&q.listener==v&&q.capture==!!C&&q.ha==R)return z}return-1}var F="closure_lm_"+(Math.random()*1e6|0),Y={};function ue(d,v,C,R,z){if(Array.isArray(v)){for(let q=0;q<v.length;q++)ue(d,v[q],C,R,z);return null}return C=jn(C),d&&d[re]?d.J(v,C,l(R)?!!R.capture:!!R,z):J(d,v,C,!1,R,z)}function J(d,v,C,R,z,q){if(!v)throw Error("Invalid event type");const fe=l(z)?!!z.capture:!!z;let De=tt(d);if(De||(d[F]=De=new le(d)),C=De.add(v,C,R,fe,q),C.proxy)return C;if(R=ie(),C.proxy=R,R.src=d,R.listener=C,d.addEventListener)D||(z=fe),z===void 0&&(z=!1),d.addEventListener(v.toString(),R,z);else if(d.attachEvent)d.attachEvent(qe(v.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ie(){function d(C){return v.call(d.src,d.listener,C)}const v=pt;return d}function de(d,v,C,R,z){if(Array.isArray(v))for(var q=0;q<v.length;q++)de(d,v[q],C,R,z);else R=l(R)?!!R.capture:!!R,C=jn(C),d&&d[re]?(d=d.i,q=String(v).toString(),q in d.g&&(v=d.g[q],C=ce(v,C,R,z),C>-1&&($(v[C]),Array.prototype.splice.call(v,C,1),v.length==0&&(delete d.g[q],d.h--)))):d&&(d=tt(d))&&(v=d.g[v.toString()],d=-1,v&&(d=ce(v,C,R,z)),(C=d>-1?v[d]:null)&&Te(C))}function Te(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[re])oe(v.i,d);else{var C=d.type,R=d.proxy;v.removeEventListener?v.removeEventListener(C,R,d.capture):v.detachEvent?v.detachEvent(qe(C),R):v.addListener&&v.removeListener&&v.removeListener(R),(C=tt(v))?(oe(C,d),C.h==0&&(C.src=null,v[F]=null)):$(d)}}}function qe(d){return d in Y?Y[d]:Y[d]="on"+d}function pt(d,v){if(d.da)d=!0;else{v=new V(v,this);const C=d.listener,R=d.ha||d.src;d.fa&&Te(d),d=C.call(R,v)}return d}function tt(d){return d=d[F],d instanceof le?d:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function jn(d){return typeof d=="function"?d:(d[st]||(d[st]=function(v){return d.handleEvent(v)}),d[st])}function Ze(){k.call(this),this.i=new le(this),this.M=this,this.G=null}m(Ze,k),Ze.prototype[re]=!0,Ze.prototype.removeEventListener=function(d,v,C,R){de(this,d,v,C,R)};function ot(d,v){var C,R=d.G;if(R)for(C=[];R;R=R.G)C.push(R);if(d=d.M,R=v.type||v,typeof v=="string")v=new I(v,d);else if(v instanceof I)v.target=v.target||d;else{var z=v;v=new I(R,d),K(v,z)}z=!0;let q,fe;if(C)for(fe=C.length-1;fe>=0;fe--)q=v.g=C[fe],z=We(q,R,!0,v)&&z;if(q=v.g=d,z=We(q,R,!0,v)&&z,z=We(q,R,!1,v)&&z,C)for(fe=0;fe<C.length;fe++)q=v.g=C[fe],z=We(q,R,!1,v)&&z}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const C=d.g[v];for(let R=0;R<C.length;R++)$(C[R]);delete d.g[v],d.h--}}this.G=null},Ze.prototype.J=function(d,v,C,R){return this.i.add(String(d),v,!1,C,R)},Ze.prototype.K=function(d,v,C,R){return this.i.add(String(d),v,!0,C,R)};function We(d,v,C,R){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let z=!0;for(let q=0;q<v.length;++q){const fe=v[q];if(fe&&!fe.da&&fe.capture==C){const De=fe.listener,Ut=fe.ha||fe.src;fe.fa&&oe(d.i,fe),z=De.call(Ut,R)!==!1&&z}}return z&&!R.defaultPrevented}function ts(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:a.setTimeout(d,v||0)}function Ci(d){d.g=ts(()=>{d.g=null,d.i&&(d.i=!1,Ci(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Ti extends k{constructor(v,C){super(),this.m=v,this.l=C,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ci(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(d){k.call(this),this.h=d,this.g={}}m(Ts,k);var uo=[];function kr(d){O(d.g,function(v,C){this.g.hasOwnProperty(C)&&Te(v)},d),d.g={}}Ts.prototype.N=function(){Ts.Z.N.call(this),kr(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=a.JSON.stringify,ks=a.JSON.parse,Ia=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function zn(){}function ho(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ki(){I.call(this,"d")}m(ki,I);function Is(){I.call(this,"c")}m(Is,I);var fr={},fo=null;function As(){return fo=fo||new Ze}fr.Ia="serverreachability";function Aa(d){I.call(this,fr.Ia,d)}m(Aa,I);function Rs(d){const v=As();ot(v,new Aa(v))}fr.STAT_EVENT="statevent";function Ii(d,v){I.call(this,fr.STAT_EVENT,d),this.stat=v}m(Ii,I);function Ke(d){const v=As();ot(v,new Ii(v,d))}fr.Ja="timingevent";function Kt(d,v){I.call(this,fr.Ja,d),this.size=v}m(Kt,I);function It(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function H(){this.g=!0}H.prototype.ua=function(){this.g=!1};function ge(d,v,C,R,z,q){d.info(function(){if(d.g)if(q){var fe="",De=q.split("&");for(let lt=0;lt<De.length;lt++){var Ut=De[lt].split("=");if(Ut.length>1){const Xt=Ut[0];Ut=Ut[1];const ss=Xt.split("_");fe=ss.length>=2&&ss[1]=="type"?fe+(Xt+"="+Ut+"&"):fe+(Xt+"=redacted&")}}}else fe=null;else fe=q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+v+`
`+C+`
`+fe})}function ve(d,v,C,R,z,q,fe){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+v+`
`+C+`
`+q+" "+fe})}function ee(d,v,C,R){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+_e(d,C)+(R?" "+R:"")})}function ye(d,v){d.info(function(){return"TIMEOUT: "+v})}H.prototype.info=function(){};function _e(d,v){if(!d.g)return v;if(!v)return null;try{const q=JSON.parse(v);if(q){for(d=0;d<q.length;d++)if(Array.isArray(q[d])){var C=q[d];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var z=R[0];if(z!="noop"&&z!="stop"&&z!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return Fn(q)}catch{return v}}var Se={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ve={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xe;function Pe(){}m(Pe,zn),Pe.prototype.g=function(){return new XMLHttpRequest},Xe=new Pe;function He(d){return encodeURIComponent(String(d))}function dt(d){var v=1;d=d.split(":");const C=[];for(;v>0&&d.length;)C.push(d.shift()),v--;return d.length&&C.push(d.join(":")),C}function Fe(d,v,C,R){this.j=d,this.i=v,this.l=C,this.S=R||1,this.V=new Ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Ra={},Ai={};function yg(d,v,C){d.M=1,d.A=nh(rs(v)),d.u=C,d.R=!0,zb(d,null)}function zb(d,v){d.F=Date.now(),th(d),d.B=rs(d.A);var C=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Zb(C.i,"t",R),d.C=0,C=d.j.L,d.h=new At,d.g=x1(d.j,C?v:null,!d.u),d.P>0&&(d.O=new Ti(u(d.Y,d,d.g),d.P)),v=d.V,C=d.g,R=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(uo[0]=z.toString()),z=uo);for(let q=0;q<z.length;q++){const fe=ue(C,z[q],R||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=d.J?B(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Rs(),ge(d.i,d.v,d.B,d.l,d.S,d.u)}Fe.prototype.ba=function(d){d=d.target;const v=this.O;v&&go(d)==3?v.j():this.Y(d)},Fe.prototype.Y=function(d){try{if(d==this.g)e:{const De=go(this.g),Ut=this.g.ya(),lt=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||i1(this.g)))){this.K||De!=4||Ut==7||(Ut==8||lt<=0?Rs(3):Rs(2)),vg(this);var v=this.g.ca();this.X=v;var C=t5(this);if(this.o=v==200,ve(this.i,this.v,this.B,this.l,this.S,De,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,z=this.g;if((R=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var q=R;break t}}q=null}if(d=q)ee(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wg(this,d);else{this.o=!1,this.m=3,Ke(12),Ri(this),Nc(this);break e}}if(this.R){d=!0;let Xt;for(;!this.K&&this.C<C.length;)if(Xt=n5(this,C),Xt==Ai){De==4&&(this.m=4,Ke(14),d=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Ra){this.m=4,Ke(15),ee(this.i,this.l,C,"[Invalid Chunk]"),d=!1;break}else ee(this.i,this.l,Xt,null),wg(this,Xt);if(Ub(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,Ke(16),d=!1),this.o=this.o&&d,!d)ee(this.i,this.l,C,"[Invalid Chunked Response]"),Ri(this),Nc(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Tg(fe),fe.P=!0,Ke(11))}}else ee(this.i,this.l,C,null),wg(this,C);De==4&&Ri(this),this.o&&!this.K&&(De==4?f1(this.j,this):(this.o=!1,th(this)))}else g5(this.g),v==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),Ri(this),Nc(this)}}}catch{}finally{}};function t5(d){if(!Ub(d))return d.g.la();const v=i1(d.g);if(v==="")return"";let C="";const R=v.length,z=go(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ri(d),Nc(d),"";d.h.i=new a.TextDecoder}for(let q=0;q<R;q++)d.h.h=!0,C+=d.h.i.decode(v[q],{stream:!(z&&q==R-1)});return v.length=0,d.h.g+=C,d.C=0,d.h.g}function Ub(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function n5(d,v){var C=d.C,R=v.indexOf(`
`,C);return R==-1?Ai:(C=Number(v.substring(C,R)),isNaN(C)?Ra:(R+=1,R+C>v.length?Ai:(v=v.slice(R,R+C),d.C=R+C,v)))}Fe.prototype.cancel=function(){this.K=!0,Ri(this)};function th(d){d.T=Date.now()+d.H,$b(d,d.H)}function $b(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=It(u(d.aa,d),v)}function vg(d){d.D&&(a.clearTimeout(d.D),d.D=null)}Fe.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ye(this.i,this.B),this.M!=2&&(Rs(),Ke(17)),Ri(this),this.m=2,Nc(this)):$b(this,this.T-d)};function Nc(d){d.j.I==0||d.K||f1(d.j,d)}function Ri(d){vg(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,kr(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function wg(d,v){try{var C=d.j;if(C.I!=0&&(C.g==d||bg(C.h,d))){if(!d.L&&bg(C.h,d)&&C.I==3){try{var R=C.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<d.F)ah(C),oh(C);else break e;Cg(C),Ke(18)}}else C.xa=z[1],0<C.xa-C.K&&z[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=It(u(C.Va,C),6e3));Wb(C.h)<=1&&C.ta&&(C.ta=void 0)}else Di(C,11)}else if((d.L||C.g==d)&&ah(C),!P(v))for(z=C.Ba.g.parse(v),v=0;v<z.length;v++){let lt=z[v];const Xt=lt[0];if(!(Xt<=C.K))if(C.K=Xt,lt=lt[1],C.I==2)if(lt[0]=="c"){C.M=lt[1],C.ba=lt[2];const ss=lt[3];ss!=null&&(C.ka=ss,C.j.info("VER="+C.ka));const Mi=lt[4];Mi!=null&&(C.za=Mi,C.j.info("SVER="+C.za));const xo=lt[5];xo!=null&&typeof xo=="number"&&xo>0&&(R=1.5*xo,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const yo=d.g;if(yo){const ch=yo.g?yo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ch){var q=R.h;q.g||ch.indexOf("spdy")==-1&&ch.indexOf("quic")==-1&&ch.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(_g(q,q.h),q.h=null))}if(R.G){const kg=yo.g?yo.g.getResponseHeader("X-HTTP-Session-Id"):null;kg&&(R.wa=kg,gt(R.J,R.G,kg))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-d.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var fe=d;if(R.na=g1(R,R.L?R.ba:null,R.W),fe.L){Hb(R.h,fe);var De=fe,Ut=R.O;Ut&&(De.H=Ut),De.D&&(vg(De),th(De)),R.g=fe}else d1(R);C.i.length>0&&ih(C)}else lt[0]!="stop"&&lt[0]!="close"||Di(C,7);else C.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Di(C,7):jg(C):lt[0]!="noop"&&C.l&&C.l.qa(lt),C.A=0)}}Rs(4)}catch{}}var r5=class{constructor(d,v){this.g=d,this.map=v}};function Bb(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qb(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Wb(d){return d.h?1:d.g?d.g.size:0}function bg(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function _g(d,v){d.g?d.g.add(v):d.h=v}function Hb(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Bb.prototype.cancel=function(){if(this.i=Gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Gb(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const C of d.g.values())v=v.concat(C.G);return v}return g(d.i)}var Kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s5(d,v){if(d){d=d.split("&");for(let C=0;C<d.length;C++){const R=d[C].indexOf("=");let z,q=null;R>=0?(z=d[C].substring(0,R),q=d[C].substring(R+1)):z=d[C],v(z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function mo(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof mo?(this.l=d.l,Sc(this,d.j),this.o=d.o,this.g=d.g,Ec(this,d.u),this.h=d.h,Ng(this,e1(d.i)),this.m=d.m):d&&(v=String(d).match(Kb))?(this.l=!1,Sc(this,v[1]||"",!0),this.o=jc(v[2]||""),this.g=jc(v[3]||"",!0),Ec(this,v[4]),this.h=jc(v[5]||"",!0),Ng(this,v[6]||"",!0),this.m=jc(v[7]||"")):(this.l=!1,this.i=new Tc(null,this.l))}mo.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Cc(v,Xb,!0),":");var C=this.g;return(C||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Cc(v,Xb,!0),"@"),d.push(He(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&d.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(Cc(C,C.charAt(0)=="/"?a5:i5,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",Cc(C,c5)),d.join("")},mo.prototype.resolve=function(d){const v=rs(this);let C=!!d.j;C?Sc(v,d.j):C=!!d.o,C?v.o=d.o:C=!!d.g,C?v.g=d.g:C=d.u!=null;var R=d.h;if(C)Ec(v,d.u);else if(C=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var z=v.h.lastIndexOf("/");z!=-1&&(R=v.h.slice(0,z+1)+R)}if(z=R,z==".."||z==".")R="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){R=z.lastIndexOf("/",0)==0,z=z.split("/");const q=[];for(let fe=0;fe<z.length;){const De=z[fe++];De=="."?R&&fe==z.length&&q.push(""):De==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),R&&fe==z.length&&q.push("")):(q.push(De),R=!0)}R=q.join("/")}else R=z}return C?v.h=R:C=d.i.toString()!=="",C?Ng(v,e1(d.i)):C=!!d.m,C&&(v.m=d.m),v};function rs(d){return new mo(d)}function Sc(d,v,C){d.j=C?jc(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Ec(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Ng(d,v,C){v instanceof Tc?(d.i=v,u5(d.i,d.l)):(C||(v=Cc(v,l5)),d.i=new Tc(v,d.l))}function gt(d,v,C){d.i.set(v,C)}function nh(d){return gt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function jc(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Cc(d,v,C){return typeof d=="string"?(d=encodeURI(d).replace(v,o5),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function o5(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xb=/[#\/\?@]/g,i5=/[#\?:]/g,a5=/[#\?]/g,l5=/[#\?@]/g,c5=/#/g;function Tc(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Pi(d){d.g||(d.g=new Map,d.h=0,d.i&&s5(d.i,function(v,C){d.add(decodeURIComponent(v.replace(/\+/g," ")),C)}))}t=Tc.prototype,t.add=function(d,v){Pi(this),this.i=null,d=Pa(this,d);let C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(v),this.h+=1,this};function Qb(d,v){Pi(d),v=Pa(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Yb(d,v){return Pi(d),v=Pa(d,v),d.g.has(v)}t.forEach=function(d,v){Pi(this),this.g.forEach(function(C,R){C.forEach(function(z){d.call(v,z,R,this)},this)},this)};function Jb(d,v){Pi(d);let C=[];if(typeof v=="string")Yb(d,v)&&(C=C.concat(d.g.get(Pa(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)C=C.concat(d[v]);return C}t.set=function(d,v){return Pi(this),this.i=null,d=Pa(this,d),Yb(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=Jb(this,d),d.length>0?String(d[0]):v):v};function Zb(d,v,C){Qb(d,v),C.length>0&&(d.i=null,d.g.set(Pa(d,v),g(C)),d.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var C=v[R];const z=He(C);C=Jb(this,C);for(let q=0;q<C.length;q++){let fe=z;C[q]!==""&&(fe+="="+He(C[q])),d.push(fe)}}return this.i=d.join("&")};function e1(d){const v=new Tc;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Pa(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function u5(d,v){v&&!d.j&&(Pi(d),d.i=null,d.g.forEach(function(C,R){const z=R.toLowerCase();R!=z&&(Qb(this,R),Zb(this,z,C))},d)),d.j=v}function d5(d,v){const C=new H;if(a.Image){const R=new Image;R.onload=h(po,C,"TestLoadImage: loaded",!0,v,R),R.onerror=h(po,C,"TestLoadImage: error",!1,v,R),R.onabort=h(po,C,"TestLoadImage: abort",!1,v,R),R.ontimeout=h(po,C,"TestLoadImage: timeout",!1,v,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else v(!1)}function h5(d,v){const C=new H,R=new AbortController,z=setTimeout(()=>{R.abort(),po(C,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:R.signal}).then(q=>{clearTimeout(z),q.ok?po(C,"TestPingServer: ok",!0,v):po(C,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),po(C,"TestPingServer: error",!1,v)})}function po(d,v,C,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(C)}catch{}}function f5(){this.g=new Ia}function Sg(d){this.i=d.Sb||null,this.h=d.ab||!1}m(Sg,zn),Sg.prototype.g=function(){return new rh(this.i,this.h)};function rh(d,v){Ze.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(rh,Ze),t=rh.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Ic(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||a).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;t1(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function t1(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?kc(this):Ic(this),this.readyState==3&&t1(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,kc(this))},t.Na=function(d){this.g&&(this.response=d,kc(this))},t.ga=function(){this.g&&kc(this)};function kc(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ic(d)}t.setRequestHeader=function(d,v){this.A.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var C=v.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=v.next();return d.join(`\r
`)};function Ic(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(rh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function n1(d){let v="";return O(d,function(C,R){v+=R,v+=":",v+=C,v+=`\r
`}),v}function Eg(d,v,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=n1(C),typeof d=="string"?C!=null&&He(C):gt(d,v,C))}function Ct(d){Ze.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ct,Ze);var m5=/^https?$/i,p5=["POST","PUT"];t=Ct.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,v,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xe.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(q){r1(this,q);return}if(d=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)C.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const q of R.keys())C.set(q,R.get(q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(q=>q.toLowerCase()=="content-type"),z=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(p5,v,void 0)>=0)||R||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,fe]of C)this.g.setRequestHeader(q,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(q){r1(this,q)}};function r1(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,s1(d),sh(d)}function s1(d){d.A||(d.A=!0,ot(d,"complete"),ot(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ot(this,"complete"),ot(this,"abort"),sh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sh(this,!0)),Ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?o1(this):this.Xa())},t.Xa=function(){o1(this)};function o1(d){if(d.h&&typeof i<"u"){if(d.v&&go(d)==4)setTimeout(d.Ca.bind(d),0);else if(ot(d,"readystatechange"),go(d)==4){d.h=!1;try{const q=d.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var C;if(!(C=v)){var R;if(R=q===0){let fe=String(d.D).match(Kb)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),R=!m5.test(fe?fe.toLowerCase():"")}C=R}if(C)ot(d,"complete"),ot(d,"success");else{d.o=6;try{var z=go(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",s1(d)}}finally{sh(d)}}}}function sh(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const C=d.g;d.g=null,v||ot(d,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function go(d){return d.g?d.g.readyState:0}t.ca=function(){try{return go(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ks(v)}};function i1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function g5(d){const v={};d=(d.g&&go(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(P(d[R]))continue;var C=dt(d[R]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const q=v[z]||[];v[z]=q,q.push(C)}L(v,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ac(d,v,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||v}function a1(d){this.za=0,this.i=[],this.j=new H,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ac("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ac("baseRetryDelayMs",5e3,d),this.Za=Ac("retryDelaySeedMs",1e4,d),this.Ta=Ac("forwardChannelMaxRetries",2,d),this.va=Ac("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Bb(d&&d.concurrentRequestLimit),this.Ba=new f5,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=a1.prototype,t.ka=8,t.I=1,t.connect=function(d,v,C,R){Ke(0),this.W=d,this.H=v||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=g1(this,null,this.W),ih(this)};function jg(d){if(l1(d),d.I==3){var v=d.V++,C=rs(d.J);if(gt(C,"SID",d.M),gt(C,"RID",v),gt(C,"TYPE","terminate"),Rc(d,C),v=new Fe(d,d.j,v),v.M=2,v.A=nh(rs(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(v.A.toString(),"")}catch{}!C&&a.Image&&(new Image().src=v.A,C=!0),C||(v.g=x1(v.j,null),v.g.ea(v.A)),v.F=Date.now(),th(v)}p1(d)}function oh(d){d.g&&(Tg(d),d.g.cancel(),d.g=null)}function l1(d){oh(d),d.v&&(a.clearTimeout(d.v),d.v=null),ah(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function ih(d){if(!qb(d.h)&&!d.m){d.m=!0;var v=d.Ea;A||E(),M||(A(),M=!0),N.add(v,d),d.D=0}}function x5(d,v){return Wb(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=It(u(d.Ea,d,v),m1(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Fe(this,this.j,d);let q=this.o;if(this.U&&(q?(q=B(q),K(q,this.U)):q=this.U),this.u!==null||this.R||(z.J=q,q=null),this.S)e:{for(var v=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=C;break e}if(v===4096||C===this.i.length-1){v=C+1;break e}}v=1e3}else v=1e3;v=u1(this,z,v),C=rs(this.J),gt(C,"RID",d),gt(C,"CVER",22),this.G&&gt(C,"X-HTTP-Session-Id",this.G),Rc(this,C),q&&(this.R?v="headers="+He(n1(q))+"&"+v:this.u&&Eg(C,this.u,q)),_g(this.h,z),this.Ra&&gt(C,"TYPE","init"),this.S?(gt(C,"$req",v),gt(C,"SID","null"),z.U=!0,yg(z,C,null)):yg(z,C,v),this.I=2}}else this.I==3&&(d?c1(this,d):this.i.length==0||qb(this.h)||c1(this))};function c1(d,v){var C;v?C=v.l:C=d.V++;const R=rs(d.J);gt(R,"SID",d.M),gt(R,"RID",C),gt(R,"AID",d.K),Rc(d,R),d.u&&d.o&&Eg(R,d.u,d.o),C=new Fe(d,d.j,C,d.D+1),d.u===null&&(C.J=d.o),v&&(d.i=v.G.concat(d.i)),v=u1(d,C,1e3),C.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),_g(d.h,C),yg(C,R,v)}function Rc(d,v){d.H&&O(d.H,function(C,R){gt(v,R,C)}),d.l&&O({},function(C,R){gt(v,R,C)})}function u1(d,v,C){C=Math.min(d.i.length,C);const R=d.l?u(d.l.Ka,d.l,d):null;e:{var z=d.i;let De=-1;for(;;){const Ut=["count="+C];De==-1?C>0?(De=z[0].g,Ut.push("ofs="+De)):De=0:Ut.push("ofs="+De);let lt=!0;for(let Xt=0;Xt<C;Xt++){var q=z[Xt].g;const ss=z[Xt].map;if(q-=De,q<0)De=Math.max(0,z[Xt].g-100),lt=!1;else try{q="req"+q+"_"||"";try{var fe=ss instanceof Map?ss:Object.entries(ss);for(const[Mi,xo]of fe){let yo=xo;l(xo)&&(yo=Fn(xo)),Ut.push(q+Mi+"="+encodeURIComponent(yo))}}catch(Mi){throw Ut.push(q+"type="+encodeURIComponent("_badmap")),Mi}}catch{R&&R(ss)}}if(lt){fe=Ut.join("&");break e}}fe=void 0}return d=d.i.splice(0,C),v.G=d,fe}function d1(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;A||E(),M||(A(),M=!0),N.add(v,d),d.A=0}}function Cg(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=It(u(d.Da,d),m1(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,h1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=It(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),oh(this),h1(this))};function Tg(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function h1(d){d.g=new Fe(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=rs(d.na);gt(v,"RID","rpc"),gt(v,"SID",d.M),gt(v,"AID",d.K),gt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&gt(v,"TO",d.ia),gt(v,"TYPE","xmlhttp"),Rc(d,v),d.u&&d.o&&Eg(v,d.u,d.o),d.O&&(d.g.H=d.O);var C=d.g;d=d.ba,C.M=1,C.A=nh(rs(v)),C.u=null,C.R=!0,zb(C,d)}t.Va=function(){this.C!=null&&(this.C=null,oh(this),Cg(this),Ke(19))};function ah(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function f1(d,v){var C=null;if(d.g==v){ah(d),Tg(d),d.g=null;var R=2}else if(bg(d.h,v))C=v.G,Hb(d.h,v),R=1;else return;if(d.I!=0){if(v.o)if(R==1){C=v.u?v.u.length:0,v=Date.now()-v.F;var z=d.D;R=As(),ot(R,new Kt(R,C)),ih(d)}else d1(d);else if(z=v.m,z==3||z==0&&v.X>0||!(R==1&&x5(d,v)||R==2&&Cg(d)))switch(C&&C.length>0&&(v=d.h,v.i=v.i.concat(C)),z){case 1:Di(d,5);break;case 4:Di(d,10);break;case 3:Di(d,6);break;default:Di(d,2)}}}function m1(d,v){let C=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(C*=2),C*v}function Di(d,v){if(d.j.info("Error code "+v),v==2){var C=u(d.bb,d),R=d.Ua;const z=!R;R=new mo(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(R,"https"),nh(R),z?d5(R.toString(),C):h5(R.toString(),C)}else Ke(2);d.I=0,d.l&&d.l.pa(v),p1(d),l1(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function p1(d){if(d.I=0,d.ja=[],d.l){const v=Gb(d.h);(v.length!=0||d.i.length!=0)&&(x(d.ja,v),x(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function g1(d,v,C){var R=C instanceof mo?rs(C):new mo(C);if(R.g!="")v&&(R.g=v+"."+R.g),Ec(R,R.u);else{var z=a.location;R=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;const q=new mo(null);R&&Sc(q,R),v&&(q.g=v),z&&Ec(q,z),C&&(q.h=C),R=q}return C=d.G,v=d.wa,C&&v&&gt(R,C,v),gt(R,"VER",d.ka),Rc(d,R),R}function x1(d,v,C){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Ct(new Sg({ab:C})):new Ct(d.ma),v.Fa(d.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y1(){}t=y1.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function lh(){}lh.prototype.g=function(d,v){return new Jn(d,v)};function Jn(d,v){Ze.call(this),this.g=new a1(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!P(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Da(this)}m(Jn,Ze),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){jg(this.g)},Jn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.v&&(C={},C.__data__=Fn(d),d=C);v.i.push(new r5(v.Ya++,d)),v.I==3&&ih(v)},Jn.prototype.N=function(){this.g.l=null,delete this.j,jg(this.g),delete this.g,Jn.Z.N.call(this)};function v1(d){ki.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const C in v){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}m(v1,ki);function w1(){Is.call(this),this.status=1}m(w1,Is);function Da(d){this.g=d}m(Da,y1),Da.prototype.ra=function(){ot(this.g,"a")},Da.prototype.qa=function(d){ot(this.g,new v1(d))},Da.prototype.pa=function(d){ot(this.g,new w1)},Da.prototype.oa=function(){ot(this.g,"b")},lh.prototype.createWebChannel=lh.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,Mk=function(){return new lh},Dk=function(){return As()},Pk=fr,tv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,ff=Se,Ve.COMPLETE="complete",Rk=Ve,ho.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Gc=ho,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,Ak=Ct}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const zN="@firebase/firestore",UN="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new nw("@firebase/firestore");function Fa(){return fa.logLevel}function pe(t,...e){if(fa.logLevel<=Ue.DEBUG){const n=e.map(pw);fa.debug(`Firestore (${dc}): ${t}`,...n)}}function ro(t,...e){if(fa.logLevel<=Ue.ERROR){const n=e.map(pw);fa.error(`Firestore (${dc}): ${t}`,...n)}}function ma(t,...e){if(fa.logLevel<=Ue.WARN){const n=e.map(pw);fa.warn(`Firestore (${dc}): ${t}`,...n)}}function pw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ok(t,r,n)}function Ok(t,e,n){let r=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ro(r),new Error(r)}function rt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Ok(e,s,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class gU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xU{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new Lk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class yU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $N{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=i=>{i.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,pe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $N(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $N(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bU(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function nv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return yx(s)===yx(i)?$e(s,i):yx(s)?1:-1}return $e(t.length,e.length)}const _U=55296,NU=57343;function yx(t){const e=t.charCodeAt(0);return e>=_U&&e<=NU}function ql(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="__name__";class ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ls?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ls.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return $e(e.length,n.length)}static compareSegments(e,n){const r=ls.isNumericId(e),s=ls.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ls.extractNumericId(e).compare(ls.extractNumericId(n)):nv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ri.fromString(e.substring(4,e.length-2))}}class ht extends ls{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const SU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends ls{construct(e,n,r){return new en(e,n,r)}static isValidIdentifier(e){return SU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BN}static keyField(){return new en([BN])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new me(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new me(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new me(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new me(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(ht.fromString(e))}static fromName(e){return new Ne(ht.fromString(e).popFirst(5))}static empty(){return new Ne(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e,n){if(!n)throw new me(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zk(t,e,n,r){if(e===!0&&r===!0)throw new me(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qN(t){if(!Ne.isDocumentKey(t))throw new me(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WN(t){if(Ne.isDocumentKey(t))throw new me(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee(12329,{type:typeof t})}function Pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(t);throw new me(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EU(t,e){if(e<=0)throw new me(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function Rd(t,e){if(!Uk(t))throw new me(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new me(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=-62135596800,GN=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GN);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HN)throw new me(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GN}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rd(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ft("string",ft._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ft(0,0))}static max(){return new Ce(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=-1;function jU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new hi(s,Ne.empty(),e)}function CU(t){return new hi(t.readTime,t.key,Wu)}class hi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hi(Ce.min(),Ne.empty(),Wu)}static max(){return new hi(Ce.max(),Ne.empty(),Wu)}}function TU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==kU)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(s=>s?X.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new X((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new X((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function AU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=-1;function Ip(t){return t==null}function mm(t){return t===0&&1/t==-1/0}function RU(t){return typeof t=="number"&&Number.isInteger(t)&&!mm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="";function PU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KN(e)),e=DU(t.get(n),e);return KN(e)}function DU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $k:n+="";break;default:n+=i}}return n}function KN(t){return t+$k+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mh(this.root,e,this.comparator,!0)}}class Mh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??sn.RED,this.left=s??sn.EMPTY,this.right=i??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new sn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return sn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QN(this.data.getIterator())}getIteratorFrom(e){return new QN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class QN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new or([])}unionWith(e){let n=new Wt(en.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qk("Invalid base64 string: "+i):i}}(e);return new nn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const MU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=MU.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="server_timestamp",Hk="__type__",Gk="__previous_value__",Kk="__local_write_time__";function xw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Hk])==null?void 0:r.stringValue)===Wk}function Ap(t){const e=t.mapValue.fields[Gk];return xw(e)?Ap(e):e}function Hu(t){const e=fi(t.mapValue.fields[Kk].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,r,s,i,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const pm="(default)";class Wl{constructor(e,n){this.projectId=e,this.database=n||pm}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===pm}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__type__",Qk="__max__",Oh={mapValue:{fields:{__type__:{stringValue:Qk}}}},Yk="__vector__",gm="value";function pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xw(t)?4:VU(t)?9007199254740991:LU(t)?10:11:Ee(28295,{value:t})}function Ns(t,e){if(t===e)return!0;const n=pi(t);if(n!==pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=fi(s.timestampValue),l=fi(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mi(s.bytesValue).isEqual(mi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Rt(s.geoPointValue.latitude)===Rt(i.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Rt(s.integerValue)===Rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Rt(s.doubleValue),l=Rt(i.doubleValue);return a===l?mm(a)===mm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ql(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(XN(a)!==XN(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Ns(a[c],l[c])))return!1;return!0}(t,e);default:return Ee(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find(n=>Ns(n,e))!==void 0}function Hl(t,e){if(t===e)return 0;const n=pi(t),r=pi(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Rt(i.integerValue||i.doubleValue),c=Rt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return YN(t.timestampValue,e.timestampValue);case 4:return YN(Hu(t),Hu(e));case 5:return nv(t.stringValue,e.stringValue);case 6:return function(i,a){const l=mi(i),c=mi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=$e(l[u],c[u]);if(h!==0)return h}return $e(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=$e(Rt(i.latitude),Rt(a.latitude));return l!==0?l:$e(Rt(i.longitude),Rt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return JN(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,g,x,y;const l=i.fields||{},c=a.fields||{},u=(p=l[gm])==null?void 0:p.arrayValue,h=(g=c[gm])==null?void 0:g.arrayValue,m=$e(((x=u==null?void 0:u.values)==null?void 0:x.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return m!==0?m:JN(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Oh.mapValue&&a===Oh.mapValue)return 0;if(i===Oh.mapValue)return 1;if(a===Oh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=nv(c[m],h[m]);if(p!==0)return p;const g=Hl(l[c[m]],u[h[m]]);if(g!==0)return g}return $e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function YN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=fi(t),r=fi(e),s=$e(n.seconds,r.seconds);return s!==0?s:$e(n.nanos,r.nanos)}function JN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hl(n[s],r[s]);if(i)return i}return $e(n.length,r.length)}function Gl(t){return rv(t)}function rv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${rv(n.fields[a])}`;return s+"}"}(t.mapValue):Ee(61005,{value:t})}function mf(t){switch(pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ap(t);return e?16+mf(e):16;case 5:return 2*t.stringValue.length;case 6:return mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+mf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return _i(r.fields,(i,a)=>{s+=i.length+mf(a)}),s}(t.mapValue);default:throw Ee(13486,{value:t})}}function ZN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sv(t){return!!t&&"integerValue"in t}function yw(t){return!!t&&"arrayValue"in t}function eS(t){return!!t&&"nullValue"in t}function tS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pf(t){return!!t&&"mapValue"in t}function LU(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Xk])==null?void 0:r.stringValue)===Yk}function mu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(t.arrayValue.values[n]);return e}return{...t}}function VU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Qk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=en.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=mu(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_i(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bn(mu(this.value))}}function Jk(t){const e=[];return _i(t.fields,(n,r)=>{const s=new en([n]);if(pf(r)){const i=Jk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new vn(e,0,Ce.min(),Ce.min(),Ce.min(),Bn.empty(),0)}static newFoundDocument(e,n,r,s){return new vn(e,1,n,Ce.min(),r,s,0)}static newNoDocument(e,n){return new vn(e,2,n,Ce.min(),Ce.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Ce.min(),Ce.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.position=e,this.inclusive=n}}function nS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(a.referenceValue),n.key):r=Hl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function FU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{}class Vt extends Zk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UU(e,n,r):n==="array-contains"?new qU(e,r):n==="in"?new WU(e,r):n==="not-in"?new HU(e,r):n==="array-contains-any"?new GU(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $U(e,r):new BU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hl(n,this.value)):n!==null&&pi(this.value)===pi(n)&&this.matchesComparison(Hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qr extends Zk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qr(e,n)}matches(e){return eI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eI(t){return t.op==="and"}function tI(t){return zU(t)&&eI(t)}function zU(t){for(const e of t.filters)if(e instanceof Qr)return!1;return!0}function ov(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Gl(t.value);if(tI(t))return t.filters.map(e=>ov(e)).join(",");{const e=t.filters.map(n=>ov(n)).join(",");return`${t.op}(${e})`}}function nI(t,e){return t instanceof Vt?function(r,s){return s instanceof Vt&&r.op===s.op&&r.field.isEqual(s.field)&&Ns(r.value,s.value)}(t,e):t instanceof Qr?function(r,s){return s instanceof Qr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&nI(a,s.filters[l]),!0):!1}(t,e):void Ee(19439)}function rI(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Gl(n.value)}`}(t):t instanceof Qr?function(n){return n.op.toString()+" {"+n.getFilters().map(rI).join(" ,")+"}"}(t):"Filter"}class UU extends Vt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class $U extends Vt{constructor(e,n){super(e,"in",n),this.keys=sI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BU extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=sI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class qU extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yw(n)&&Gu(n.arrayValue,this.value)}}class WU extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class HU extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}}class GU extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function sS(t,e=null,n=[],r=[],s=null,i=null,a=null){return new KU(t,e,n,r,s,i,a)}function vw(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ov(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ip(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gl(r)).join(",")),e.Te=n}return e.Te}function ww(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rS(t.startAt,e.startAt)&&rS(t.endAt,e.endAt)}function iv(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XU(t,e,n,r,s,i,a,l){return new mc(t,e,n,r,s,i,a,l)}function Rp(t){return new mc(t)}function oS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oI(t){return t.collectionGroup!==null}function pu(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Wt(en.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ku(i,r))}),n.has(en.keyField().canonicalString())||e.Ie.push(new Ku(en.keyField(),r))}return e.Ie}function ys(t){const e=Ie(t);return e.Ee||(e.Ee=QU(e,pu(t))),e.Ee}function QU(t,e){if(t.limitType==="F")return sS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ku(s.field,i)});const n=t.endAt?new xm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xm(t.startAt.position,t.startAt.inclusive):null;return sS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function av(t,e){const n=t.filters.concat([e]);return new mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ym(t,e,n){return new mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pp(t,e){return ww(ys(t),ys(e))&&t.limitType===e.limitType}function iI(t){return`${vw(ys(t))}|lt:${t.limitType}`}function za(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rI(s)).join(", ")}]`),Ip(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Gl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Gl(s)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function Dp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of pu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=nS(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,pu(r),s)||r.endAt&&!function(a,l,c){const u=nS(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,pu(r),s))}(t,e)}function YU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aI(t){return(e,n)=>{let r=!1;for(const s of pu(t)){const i=JU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JU(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Hl(c,u):Ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=new jt(Ne.comparator);function so(){return ZU}const lI=new jt(Ne.comparator);function Kc(...t){let e=lI;for(const n of t)e=e.insert(n.key,n);return e}function cI(t){let e=lI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return gu()}function uI(){return gu()}function gu(){return new Sa(t=>t.toString(),(t,e)=>t.isEqual(e))}const e7=new jt(Ne.comparator),t7=new Wt(Ne.comparator);function Be(...t){let e=t7;for(const n of t)e=e.add(n);return e}const n7=new Wt($e);function r7(){return n7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(e)?"-0":e}}function dI(t){return{integerValue:""+t}}function s7(t,e){return RU(e)?dI(e):bw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this._=void 0}}function o7(t,e,n){return t instanceof Xu?function(s,i){const a={fields:{[Hk]:{stringValue:Wk},[Kk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xw(i)&&(i=Ap(i)),i&&(a.fields[Gk]=i),{mapValue:a}}(n,e):t instanceof Kl?fI(t,e):t instanceof Xl?mI(t,e):function(s,i){const a=hI(s,i),l=iS(a)+iS(s.Ae);return sv(a)&&sv(s.Ae)?dI(l):bw(s.serializer,l)}(t,e)}function i7(t,e,n){return t instanceof Kl?fI(t,e):t instanceof Xl?mI(t,e):n}function hI(t,e){return t instanceof vm?function(r){return sv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xu extends Mp{}class Kl extends Mp{constructor(e){super(),this.elements=e}}function fI(t,e){const n=pI(e);for(const r of t.elements)n.some(s=>Ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xl extends Mp{constructor(e){super(),this.elements=e}}function mI(t,e){let n=pI(e);for(const r of t.elements)n=n.filter(s=>!Ns(s,r));return{arrayValue:{values:n}}}class vm extends Mp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iS(t){return Rt(t.integerValue||t.doubleValue)}function pI(t){return yw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.field=e,this.transform=n}}function a7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Kl&&s instanceof Kl||r instanceof Xl&&s instanceof Xl?ql(r.elements,s.elements,Ns):r instanceof vm&&s instanceof vm?Ns(r.Ae,s.Ae):r instanceof Xu&&s instanceof Xu}(t.transform,e.transform)}class l7{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Op{}function gI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nw(t.key,Sr.none()):new Pd(t.key,t.data,Sr.none());{const n=t.data,r=Bn.empty();let s=new Wt(en.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ni(t.key,r,new or(s.toArray()),Sr.none())}}function c7(t,e,n){t instanceof Pd?function(s,i,a){const l=s.value.clone(),c=lS(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ni?function(s,i,a){if(!gf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=lS(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(xI(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function xu(t,e,n,r){return t instanceof Pd?function(i,a,l,c){if(!gf(i.precondition,a))return l;const u=i.value.clone(),h=cS(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ni?function(i,a,l,c){if(!gf(i.precondition,a))return l;const u=cS(i.fieldTransforms,c,a),h=a.data;return h.setAll(xI(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return gf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function u7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hI(r.transform,s||null);i!=null&&(n===null&&(n=Bn.empty()),n.set(r.field,i))}return n||null}function aS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ql(r,s,(i,a)=>a7(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pd extends Op{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ni extends Op{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lS(t,e,n){const r=new Map;rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,i7(a,l,n[s]))}return r}function cS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,o7(i,a,e))}return r}class Nw extends Op{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d7 extends Op{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&c7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uI();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=gI(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(n,r)=>aS(n,r))&&ql(this.baseMutations,e.baseMutations,(n,r)=>aS(n,r))}}class Sw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return e7}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Sw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f7=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Qe;function p7(t){switch(t){case G.OK:return Ee(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Ee(15467,{code:t})}}function yI(t){if(t===void 0)return ro("GRPC error has no .code"),G.UNKNOWN;switch(t){case Ot.OK:return G.OK;case Ot.CANCELLED:return G.CANCELLED;case Ot.UNKNOWN:return G.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return G.INTERNAL;case Ot.UNAVAILABLE:return G.UNAVAILABLE;case Ot.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ot.NOT_FOUND:return G.NOT_FOUND;case Ot.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ot.ABORTED:return G.ABORTED;case Ot.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ot.DATA_LOSS:return G.DATA_LOSS;default:return Ee(39323,{code:t})}}(Qe=Ot||(Ot={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=new ri([4294967295,4294967295],0);function uS(t){const e=g7().encode(t),n=new Ik;return n.update(e),new Uint8Array(n.digest())}function dS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ri([n,r],0),new ri([s,i],0)]}class Ew{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xc(`Invalid padding: ${n}`);if(r<0)throw new Xc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ri.fromNumber(r)));return s.compare(x7)===1&&(s=new ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uS(e),[r,s]=dS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ew(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=uS(e),[r,s]=dS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lp(Ce.min(),s,new jt($e),so(),Be())}}class Dd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dd(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class vI{constructor(e,n){this.targetId=e,this.Ce=n}}class wI{constructor(e,n,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hS{constructor(){this.ve=0,this.Fe=fS(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),r=Be();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ee(38017,{changeType:i})}}),new Dd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=fS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class y7{constructor(e){this.Ge=e,this.ze=new Map,this.je=so(),this.Je=Lh(),this.He=Lh(),this.Ye=new jt($e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(iv(i))if(r===0){const a=new Ne(i.path);this.et(n,a,vn.newNoDocument(a,Ce.min()))}else rt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=mi(r).toUint8Array()}catch(c){if(c instanceof qk)return ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ew(a,s,i)}catch(c){return ma(c instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&iv(l.target)){const c=new Ne(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,vn.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Be();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Lp(e,n,this.Ye,this.je,r);return this.je=so(),this.Je=Lh(),this.He=Lh(),this.Ye=new jt($e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Wt($e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Wt($e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lh(){return new jt(Ne.comparator)}function fS(){return new jt(Ne.comparator)}const v7={asc:"ASCENDING",desc:"DESCENDING"},w7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b7={and:"AND",or:"OR"};class _7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lv(t,e){return t.useProto3Json||Ip(e)?e:{value:e}}function wm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N7(t,e){return wm(t,e.toTimestamp())}function vs(t){return rt(!!t,49232),Ce.fromTimestamp(function(n){const r=fi(n);return new ft(r.seconds,r.nanos)}(t))}function jw(t,e){return cv(t,e).canonicalString()}function cv(t,e){const n=function(s){return new ht(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _I(t){const e=ht.fromString(t);return rt(CI(e),10190,{key:e.toString()}),e}function uv(t,e){return jw(t.databaseId,e.path)}function vx(t,e){const n=_I(e);if(n.get(1)!==t.databaseId.projectId)throw new me(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(SI(n))}function NI(t,e){return jw(t.databaseId,e)}function S7(t){const e=_I(t);return e.length===4?ht.emptyPath():SI(e)}function dv(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SI(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mS(t,e,n){return{name:uv(t,e),fields:n.value.mapValue.fields}}function E7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ee(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(rt(h===void 0||typeof h=="string",58123),nn.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?G.UNKNOWN:yI(u.code);return new me(h,u.message||"")}(a);n=new wI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vx(t,r.document.name),i=vs(r.document.updateTime),a=r.document.createTime?vs(r.document.createTime):Ce.min(),l=new Bn({mapValue:{fields:r.document.fields}}),c=vn.newFoundDocument(s,i,a,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new xf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vx(t,r.document),i=r.readTime?vs(r.readTime):Ce.min(),a=vn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vx(t,r.document),i=r.removedTargetIds||[];n=new xf([],i,s,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new m7(s,i),l=r.targetId;n=new vI(l,a)}}return n}function j7(t,e){let n;if(e instanceof Pd)n={update:mS(t,e.key,e.value)};else if(e instanceof Nw)n={delete:uv(t,e.key)};else if(e instanceof Ni)n={update:mS(t,e.key,e.data),updateMask:M7(e.fieldMask)};else{if(!(e instanceof d7))return Ee(16599,{Vt:e.type});n={verify:uv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Xu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vm)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Ee(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ee(27497)}(t,e.precondition)),n}function C7(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?vs(s.updateTime):vs(i);return a.isEqual(Ce.min())&&(a=vs(i)),new l7(a,s.transformResults||[])}(n,e))):[]}function T7(t,e){return{documents:[NI(t,e.path)]}}function k7(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NI(t,s);const i=function(u){if(u.length!==0)return jI(Qr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Ua(p.field),direction:R7(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=lv(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function I7(t){let e=S7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){rt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=EI(m);return p instanceof Qr&&tI(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(x){return new Ku($a(x.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Ip(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,g=m.values||[];return new xm(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const p=!m.before,g=m.values||[];return new xm(g,p)}(n.endAt)),XU(e,s,a,i,l,"F",c,u)}function A7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$a(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$a(n.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$a(n.unaryFilter.field);return Vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$a(n.unaryFilter.field);return Vt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Vt.create($a(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qr.create(n.compositeFilter.filters.map(r=>EI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(t):Ee(30097,{filter:t})}function R7(t){return v7[t]}function P7(t){return w7[t]}function D7(t){return b7[t]}function Ua(t){return{fieldPath:t.canonicalString()}}function $a(t){return en.fromServerFormat(t.fieldPath)}function jI(t){return t instanceof Vt?function(n){if(n.op==="=="){if(tS(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NAN"}};if(eS(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tS(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NAN"}};if(eS(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(n.field),op:P7(n.op),value:n.value}}}(t):t instanceof Qr?function(n){const r=n.getFilters().map(s=>jI(s));return r.length===1?r[0]:{compositeFilter:{op:D7(n.op),filters:r}}}(t):Ee(54877,{filter:t})}function M7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,r,s,i=Ce.min(),a=Ce.min(),l=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.yt=e}}function L7(t){const e=I7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.Cn=new F7}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(hi.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class F7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Wt(ht.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Wt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(TI,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="LruGarbageCollector",z7=1048576;function xS([t,e],[n,r]){const s=$e(t,n);return s===0?$e(e,r):s}class U7{constructor(e){this.Ir=e,this.buffer=new Wt(xS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(gS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fc(n)?pe(gS,"Ignoring IndexedDB error during garbage collection: ",n):await hc(n)}await this.Vr(3e5)})}}class B7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return X.resolve(kp.ce);const r=new U7(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(pS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Fa()<=Ue.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function q7(t,e){return new B7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.changes=new Sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xu(r.mutation,s,or.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const s=Hi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Kc();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=so();const a=gu(),l=function(){return gu()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ni)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),xu(h.mutation,u,h.mutation.getFieldMask(),ft.now())):a.set(u.key,or.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>l.set(u,new H7(h,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=gu();let s=new jt((a,l)=>a-l),i=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||or.empty();h=l.applyToLocalView(u,h),r.set(c,h);const m=(s.get(l.batchId)||Be()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,m=uI();h.forEach(p=>{if(!i.has(p)){const g=gI(n.get(p),r.get(p));g!==null&&m.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return X.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Ne.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):X.resolve(Hi());let l=Wu,c=i;return a.next(u=>X.forEach(u,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Be())).next(h=>({batchId:l,changes:cI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let s=Kc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Kc();return this.indexManager.getCollectionParents(e,i).next(l=>X.forEach(l,c=>{const u=function(m,p){return new mc(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,vn.newInvalidDocument(h)))});let l=Kc();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&xu(h.mutation,u,or.empty(),ft.now()),Dp(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vs(s.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:L7(s.bundledQuery),readTime:vs(s.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this.overlays=new jt(Ne.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return X.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const s=Hi(),i=n.length+1,a=new Ne(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return X.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new jt((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Hi(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Hi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return X.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new f7(n,r));let i=this.qr.get(n);i===void 0&&(i=Be(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.Qr=new Wt(Qt.$r),this.Ur=new Wt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ne(new ht([])),r=new Qt(n,e),s=new Qt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ne(new ht([])),r=new Qt(n,e),s=new Qt(n,e+1);let i=Be();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Qt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ne.comparator(e.key,n.key)||$e(e.Yr,n.Yr)}static Kr(e,n){return $e(e.Yr,n.Yr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(Qt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new h7(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Qt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?gw:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qt(n,0),s=new Qt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt($e);return n.forEach(s=>{const i=new Qt(s,0),a=new Qt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const a=new Qt(new Ne(i),0);let l=new Wt($e);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),X.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(n.mutations,s=>{const i=new Qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qt(n,0),s=this.Zr.firstAfterOrEqual(r);return X.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.ri=e,this.docs=function(){return new jt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let r=so();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vn.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=so();const a=n.path,l=new Ne(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||TU(CU(h),r)<=0||(s.has(h.key)||Dp(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ee(9500)}ii(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z7(this)}getSize(e){return X.resolve(this.size)}}class Z7 extends W7{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.persistence=e,this.si=new Sa(n=>vw(n),ww),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Cw,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ql(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),X.waitFor(i).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.ui={},this.overlays={},this.ci=new kp(0),this.li=!1,this.li=!0,this.hi=new Q7,this.referenceDelegate=e(this),this.Pi=new e$(this),this.indexManager=new V7,this.remoteDocumentCache=function(s){return new J7(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new O7(n),this.Ii=new K7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Y7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const s=new t$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return X.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class t$ extends IU{constructor(e){super(),this.currentSequenceNumber=e}}class Tw{constructor(e){this.persistence=e,this.Ri=new Cw,this.Vi=null}static mi(e){return new Tw(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,r=>{const s=Ne.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class bm{constructor(e,n){this.persistence=e,this.pi=new Sa(r=>PU(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=q7(this,n)}static mi(e,n){return new bm(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return X.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?X.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,Ce.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mf(e.data.value)),n}br(e,n,r){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Be(),s=Be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KF()?8:AU(En())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new n$;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Fa()<=Ue.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",za(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Fa()<=Ue.DEBUG&&pe("QueryEngine","Query:",za(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Fa()<=Ue.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",za(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):X.resolve())}ys(e,n){if(oS(n))return X.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ym(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Be(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,ym(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return oS(n)||s.isEqual(Ce.min())?X.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?X.resolve(null):(Fa()<=Ue.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),za(n)),this.vs(e,a,n,jU(s,Wu)).next(l=>l))})}Ds(e,n){let r=new Wt(aI(e));return n.forEach((s,i)=>{Dp(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Fa()<=Ue.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",za(n)),this.ps.getDocumentsMatchingQuery(e,n,hi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="LocalStore",s$=3e8;class o${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new jt($e),this.xs=new Sa(i=>vw(i),ww),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G7(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function i$(t,e,n,r){return new o$(t,e,n,r)}async function II(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Be();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function a$(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const m=u.batch,p=m.keys();let g=X.resolve();return p.forEach(x=>{g=g.next(()=>h.getEntry(c,x)).next(y=>{const _=u.docVersions.get(x);rt(_!==null,48541),y.version.compareTo(_)<0&&(m.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Be();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function AI(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function l$(t,e){const n=Ie(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,m)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(m,g),function(y,_,b){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=s$?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=so(),u=Be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(c$(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return X.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function c$(t,e,n){let r=Be(),s=Be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=so();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ce.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):pe(Iw,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function u$(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d$(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,X.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Uo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function hv(t,e,n){const r=Ie(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!fc(a))throw a;pe(Iw,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function yS(t,e,n){const r=Ie(t);let s=Ce.min(),i=Be();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const m=Ie(c),p=m.xs.get(h);return p!==void 0?X.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,h)}(r,a,ys(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:Ce.min(),n?i:Be())).next(l=>(h$(r,YU(e),l),{documents:l,Qs:i})))}function h$(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class vS{constructor(){this.activeTargetIds=r7()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f${constructor(){this.Mo=new vS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="ConnectivityMonitor";class bS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(wS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(wS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function fv(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="RestConnection",p$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===pm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=fv(),l=this.zo(e,n.toUriEncodedString());pe(wx,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=cc(u);return this.Jo(e,l,c,r,h).then(m=>(pe(wx,`Received RPC '${e}' ${a}: `,m),m),m=>{throw ma(wx,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=p$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class y$ extends g${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=fv();return new Promise((l,c)=>{const u=new Ak;u.setWithCredentials(!0),u.listenOnce(Rk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ff.NO_ERROR:const m=u.getResponseJson();pe(mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case ff.TIMEOUT:pe(mn,`RPC '${e}' ${a} timed out`),c(new me(G.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const p=u.getStatus();if(pe(mn,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const y=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(w)>=0?w:G.UNKNOWN}(x.status);c(new me(y,x.message))}else c(new me(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new me(G.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{pe(mn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);pe(mn,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=fv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Mk(),l=Dk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");pe(mn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const m=a.createWebChannel(h,c);this.I_(m);let p=!1,g=!1;const x=new x$({Yo:_=>{g?pe(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(pe(mn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),pe(mn,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},Zo:()=>m.close()}),y=(_,b,w)=>{_.listen(b,S=>{try{w(S)}catch(T){setTimeout(()=>{throw T},0)}})};return y(m,Gc.EventType.OPEN,()=>{g||(pe(mn,`RPC '${e}' stream ${s} transport opened.`),x.o_())}),y(m,Gc.EventType.CLOSE,()=>{g||(g=!0,pe(mn,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(m))}),y(m,Gc.EventType.ERROR,_=>{g||(g=!0,ma(mn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),x.a_(new me(G.UNAVAILABLE,"The operation could not be completed")))}),y(m,Gc.EventType.MESSAGE,_=>{var b;if(!g){const w=_.data[0];rt(!!w,16349);const S=w,T=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(T){pe(mn,`RPC '${e}' stream ${s} received error:`,T);const A=T.status;let M=function(j){const k=Ot[j];if(k!==void 0)return yI(k)}(A),N=T.message;M===void 0&&(M=G.INTERNAL,N="Unknown error status: "+A+" with message "+T.message),g=!0,x.a_(new me(M,N)),m.close()}else pe(mn,`RPC '${e}' stream ${s} received:`,w),x.u_(w)}}),y(l,Pk.STAT_EVENT,_=>{_.stat===tv.PROXY?pe(mn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===tv.NOPROXY&&pe(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function bx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t){return new _7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="PersistentStream";class PI{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ro(n.toString()),ro("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new me(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return pe(_S,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(pe(_S,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v$ extends PI{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=E7(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ce.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ce.min():a.readTime?vs(a.readTime):Ce.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dv(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=iv(c)?{documents:T7(i,c)}:{query:k7(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=bI(i,a.resumeToken);const u=lv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ce.min())>0){l.readTime=wm(i,a.snapshotVersion.toTimestamp());const u=lv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=A7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dv(this.serializer),n.removeTarget=e,this.q_(n)}}class w$ extends PI{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C7(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>j7(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${}class _$ extends b${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new me(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,cv(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new me(G.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,cv(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(G.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class N${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ro(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class S${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Ea(this)&&(pe(pa,"Restarting streams for network reachability change."),await async function(c){const u=Ie(c);u.Ea.add(4),await Md(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Fp(u)}(this))})}),this.Ra=new N$(r,s)}}async function Fp(t){if(Ea(t))for(const e of t.da)await e(!0)}async function Md(t){for(const e of t.da)await e(!1)}function DI(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dw(n)?Pw(n):pc(n).O_()&&Rw(n,e))}function Aw(t,e){const n=Ie(t),r=pc(n);n.Ia.delete(e),r.O_()&&MI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ea(n)&&n.Ra.set("Unknown"))}function Rw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pc(t).Y_(e)}function MI(t,e){t.Va.Ue(e),pc(t).Z_(e)}function Pw(t){t.Va=new y7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pc(t).start(),t.Ra.ua()}function Dw(t){return Ea(t)&&!pc(t).x_()&&t.Ia.size>0}function Ea(t){return Ie(t).Ea.size===0}function OI(t){t.Va=void 0}async function E$(t){t.Ra.set("Online")}async function j$(t){t.Ia.forEach((e,n)=>{Rw(t,e)})}async function C$(t,e){OI(t),Dw(t)?(t.Ra.ha(e),Pw(t)):t.Ra.set("Unknown")}async function T$(t,e,n){if(t.Ra.set("Online"),e instanceof wI&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){pe(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _m(t,r)}else if(e instanceof xf?t.Va.Ze(e):e instanceof vI?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await AI(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),MI(i,c);const m=new Uo(h.target,c,u,h.sequenceNumber);Rw(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){pe(pa,"Failed to raise snapshot:",r),await _m(t,r)}}async function _m(t,e,n){if(!fc(e))throw e;t.Ea.add(1),await Md(t),t.Ra.set("Offline"),n||(n=()=>AI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(pa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fp(t)})}function LI(t,e){return e().catch(n=>_m(t,n,e))}async function zp(t){const e=Ie(t),n=gi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gw;for(;k$(e);)try{const s=await u$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,I$(e,s)}catch(s){await _m(e,s)}VI(e)&&FI(e)}function k$(t){return Ea(t)&&t.Ta.length<10}function I$(t,e){t.Ta.push(e);const n=gi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function VI(t){return Ea(t)&&!gi(t).x_()&&t.Ta.length>0}function FI(t){gi(t).start()}async function A$(t){gi(t).ra()}async function R$(t){const e=gi(t);for(const n of t.Ta)e.ea(n.mutations)}async function P$(t,e,n){const r=t.Ta.shift(),s=Sw.from(r,e,n);await LI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zp(t)}async function D$(t,e){e&&gi(t).X_&&await async function(r,s){if(function(a){return p7(a)&&a!==G.ABORTED}(s.code)){const i=r.Ta.shift();gi(r).B_(),await LI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zp(r)}}(t,e),VI(t)&&FI(t)}async function NS(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),pe(pa,"RemoteStore received new credentials");const r=Ea(n);n.Ea.add(3),await Md(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fp(n)}async function M$(t,e){const n=Ie(t);e?(n.Ea.delete(2),await Fp(n)):e||(n.Ea.add(2),await Md(n),n.Ra.set("Unknown"))}function pc(t){return t.ma||(t.ma=function(n,r,s){const i=Ie(n);return i.sa(),new v$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:E$.bind(null,t),t_:j$.bind(null,t),r_:C$.bind(null,t),H_:T$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Dw(t)?Pw(t):t.Ra.set("Unknown")):(await t.ma.stop(),OI(t))})),t.ma}function gi(t){return t.fa||(t.fa=function(n,r,s){const i=Ie(n);return i.sa(),new w$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:A$.bind(null,t),r_:D$.bind(null,t),ta:R$.bind(null,t),na:P$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zp(t)):(await t.fa.stop(),t.Ta.length>0&&(pe(pa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Mw(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ow(t,e){if(ro("AsyncQueue",`${e}: ${t}`),fc(t))return new me(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=Kc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.ga=new jt(Ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yl{constructor(e,n,r,s,i,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Yl(e,n,pl.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L${constructor(){this.queries=ES(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ie(n),i=s.queries;s.queries=ES(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new me(G.ABORTED,"Firestore shutting down"))}}function ES(){return new Sa(t=>iI(t),Pp)}async function Lw(t,e){const n=Ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new O$,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ow(a,`Initialization of query '${za(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Fw(n)}async function Vw(t,e){const n=Ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V$(t,e){const n=Ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Fw(n)}function F$(t,e,n){const r=Ie(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Fw(t){t.Ca.forEach(e=>{e.next()})}var mv,jS;(jS=mv||(mv={})).Ma="default",jS.Cache="cache";class zw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.key=e}}class UI{constructor(e){this.key=e}}class z${constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=aI(e),this.tu=new pl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new SS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),g=Dp(this.query,m)?m:null,x=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?x!==y&&(r.track({type:3,doc:g}),_=!0):this.su(p,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(a=a.add(g),i=y?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(g,x){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:_})}};return y(g)-y(x)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new Yl(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new UI(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new zI(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Uw="SyncEngine";class U${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $${constructor(e){this.key=e,this.hu=!1}}class B${constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Sa(l=>iI(l),Pp),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Ne.comparator),this.Au=new Map,this.Ru=new Cw,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function q$(t,e,n=!0){const r=GI(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await $I(r,e,n,!0),s}async function W$(t,e){const n=GI(t);await $I(n,e,!0,!1)}async function $I(t,e,n,r){const s=await d$(t.localStore,ys(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await H$(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&DI(t.remoteStore,s),l}async function H$(t,e,n,r,s){t.pu=(m,p,g)=>async function(y,_,b,w){let S=_.view.ru(b);S.Cs&&(S=await yS(y.localStore,_.query,!1).then(({documents:N})=>_.view.ru(N,S)));const T=w&&w.targetChanges.get(_.targetId),A=w&&w.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,y.isPrimaryClient,T,A);return TS(y,_.targetId,M.au),M.snapshot}(t,m,p,g);const i=await yS(t.localStore,e,!0),a=new z$(e,i.Qs),l=a.ru(i.documents),c=Dd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);TS(t,n,u.au);const h=new U$(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function G$(t,e,n){const r=Ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Pp(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Aw(r.remoteStore,s.targetId),pv(r,s.targetId)}).catch(hc)):(pv(r,s.targetId),await hv(r.localStore,s.targetId,!0))}async function K$(t,e){const n=Ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Aw(n.remoteStore,r.targetId))}async function X$(t,e,n){const r=nB(t);try{const s=await function(a,l){const c=Ie(a),u=ft.now(),h=l.reduce((g,x)=>g.add(x.key),Be());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=so(),y=Be();return c.Ns.getEntries(g,h).next(_=>{x=_,x.forEach((b,w)=>{w.isValidDocument()||(y=y.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(_=>{m=_;const b=[];for(const w of l){const S=u7(w,m.get(w.key).overlayedDocument);S!=null&&b.push(new Ni(w.key,S,Jk(S.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(_=>{p=_;const b=_.applyToLocalDocumentSet(m,y);return c.documentOverlayCache.saveOverlays(g,_.batchId,b)})}).then(()=>({batchId:p.batchId,changes:cI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new jt($e)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await Od(r,s.changes),await zp(r.remoteStore)}catch(s){const i=Ow(s,"Failed to persist write");n.reject(i)}}async function BI(t,e){const n=Ie(t);try{const r=await l$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?rt(a.hu,14607):s.removedDocuments.size>0&&(rt(a.hu,42227),a.hu=!1))}),await Od(n,r,e)}catch(r){await hc(r)}}function CS(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Ie(a);c.onlineState=l;let u=!1;c.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(u=!0)}),u&&Fw(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Q$(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new jt(Ne.comparator);a=a.insert(i,vn.newNoDocument(i,Ce.min()));const l=Be().add(i),c=new Lp(Ce.min(),new Map,new jt($e),a,l);await BI(r,c),r.du=r.du.remove(i),r.Au.delete(e),$w(r)}else await hv(r.localStore,e,!1).then(()=>pv(r,e,n)).catch(hc)}async function Y$(t,e){const n=Ie(t),r=e.batch.batchId;try{const s=await a$(n.localStore,e);WI(n,r,null),qI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Od(n,s)}catch(s){await hc(s)}}async function J$(t,e,n){const r=Ie(t);try{const s=await function(a,l){const c=Ie(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(rt(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);WI(r,e,n),qI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Od(r,s)}catch(s){await hc(s)}}function qI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WI(t,e,n){const r=Ie(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function pv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||HI(t,r)})}function HI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Aw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),$w(t))}function TS(t,e,n){for(const r of n)r instanceof zI?(t.Ru.addReference(r.key,e),Z$(t,r)):r instanceof UI?(pe(Uw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||HI(t,r.key)):Ee(19791,{wu:r})}function Z$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(pe(Uw,"New document in limbo: "+n),t.Eu.add(r),$w(t))}function $w(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ne(ht.fromString(e)),r=t.fu.next();t.Au.set(r,new $$(n)),t.du=t.du.insert(n,r),DI(t.remoteStore,new Uo(ys(Rp(n.path)),r,"TargetPurposeLimboResolution",kp.ce))}}async function Od(t,e,n){const r=Ie(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=kw.As(c.targetId,u);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const h=Ie(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>X.forEach(u,p=>X.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>X.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!fc(m))throw m;pe(Iw,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const g=h.Ms.get(p),x=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(p,y)}}}(r.localStore,i))}async function eB(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){pe(Uw,"User change. New user:",e.toKey());const r=await II(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new me(G.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Od(n,r.Ls)}}function tB(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function GI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q$.bind(null,e),e.Pu.H_=V$.bind(null,e.eventManager),e.Pu.yu=F$.bind(null,e.eventManager),e}function nB(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J$.bind(null,e),e}class Nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return i$(this.persistence,new r$,e.initialUser,this.serializer)}Cu(e){return new kI(Tw.mi,this.serializer)}Du(e){return new f$}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nm.provider={build:()=>new Nm};class rB extends Nm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof bm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $7(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new kI(r=>bm.mi(r,n),this.serializer)}}class gv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eB.bind(null,this.syncEngine),await M$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L$}()}createDatastore(e){const n=Vp(e.databaseInfo.databaseId),r=function(i){return new y$(i)}(e.databaseInfo);return function(i,a,l,c){return new _$(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new S$(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>CS(this.syncEngine,n,0),function(){return bS.v()?new bS:new m$}())}createSyncEngine(e,n){return function(s,i,a,l,c,u,h){const m=new B$(s,i,a,l,c,u);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ie(s);pe(pa,"RemoteStore shutting down."),i.Ea.add(5),await Md(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gv.provider={build:()=>new gv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ro("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class sB{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{pe(xi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(pe(xi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ow(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _x(t,e){t.asyncQueue.verifyOperationInProgress(),pe(xi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await II(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oB(t);pe(xi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>NS(e.remoteStore,s)),t._onlineComponents=e}async function oB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(xi,"Using user provided OfflineComponentProvider");try{await _x(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await _x(t,new Nm)}}else pe(xi,"Using default OfflineComponentProvider"),await _x(t,new rB(void 0));return t._offlineComponents}async function KI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(xi,"Using user provided OnlineComponentProvider"),await kS(t,t._uninitializedComponentsProvider._online)):(pe(xi,"Using default OnlineComponentProvider"),await kS(t,new gv))),t._onlineComponents}function iB(t){return KI(t).then(e=>e.syncEngine)}async function Sm(t){const e=await KI(t),n=e.eventManager;return n.onListen=q$.bind(null,e.syncEngine),n.onUnlisten=G$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=W$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K$.bind(null,e.syncEngine),n}function aB(t,e,n={}){const r=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new Bw({next:p=>{h.Nu(),a.enqueueAndForget(()=>Vw(i,m));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new me(G.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new me(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new zw(Rp(l.path),h,{includeMetadataChanges:!0,qa:!0});return Lw(i,m)}(await Sm(t),t.asyncQueue,e,n,r)),r.promise}function lB(t,e,n={}){const r=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new Bw({next:p=>{h.Nu(),a.enqueueAndForget(()=>Vw(i,m)),p.fromCache&&c.source==="server"?u.reject(new me(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new zw(l,h,{includeMetadataChanges:!0,qa:!0});return Lw(i,m)}(await Sm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firestore.googleapis.com",AS=!0;class RS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QI,this.ssl=AS}else this.host=e.host,this.ssl=e.ssl??AS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z7)throw new me(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vk;switch(r.type){case"firstParty":return new vU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IS.get(n);r&&(pe("ComponentProvider","Removing Datastore"),IS.delete(n),r.terminate())}(this),Promise.resolve()}}function YI(t,e,n,r={}){var u;t=Pn(t,Up);const s=cc(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(H2(`https://${l}`),G2("Firestore",!0)),i.host!==QI&&i.host!==l&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!eo(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=gn.MOCK_USER;else{h=FF(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new me(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gn(p)}t._authCredentials=new gU(new Lk(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rd(n,Nt._jsonSchema))return new Nt(e,r||null,new Ne(ht.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Ft("string",Nt._jsonSchemaVersion),referencePath:Ft("string")};class Gs extends js{constructor(e,n,r){super(e,n,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ne(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function Zt(t,e,...n){if(t=Ht(t),Fk("collection","path",e),t instanceof Up){const r=ht.fromString(e,...n);return WN(r),new Gs(t,null,r)}{if(!(t instanceof Nt||t instanceof Gs))throw new me(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return WN(r),new Gs(t.firestore,null,r)}}function Ae(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=Cp.newId()),Fk("doc","path",e),t instanceof Up){const r=ht.fromString(e,...n);return qN(r),new Nt(t,null,new Ne(r))}{if(!(t instanceof Nt||t instanceof Gs))throw new me(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return qN(r),new Nt(t.firestore,t instanceof Gs?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="AsyncQueue";class DS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RI(this,"async_queue_retry"),this._c=()=>{const r=bx();r&&pe(PS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Hs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fc(e))throw e;pe(PS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ro("INTERNAL UNHANDLED ERROR: ",MS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Mw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Ee(47125,{Pc:MS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function MS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ss extends Up{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new DS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DS(e),this._firestoreClient=void 0,await e}}}function JI(t,e){const n=typeof t=="object"?t:Y2(),r=typeof t=="string"?t:pm,s=sw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=LF("firestore");i&&YI(s,...i)}return s}function Ld(t){if(t._terminated)throw new me(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cB(t),t._firestoreClient}function cB(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new OU(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sB(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(nn.fromBase64String(e))}catch(n){throw new me(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rr(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rd(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:Ft("string",rr._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Rd(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Ft("string",Br._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rd(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qr(e.vectorValues);throw new me(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Ft("string",qr._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=/^__.*__$/;class dB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pd(e,this.data,n,this.fieldTransforms)}}class ZI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:t})}}class $p{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $p({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Em(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eA(this.Ac)&&uB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vp(e)}Cc(e,n,r,s=!1){return new $p({Ac:e,methodName:n,Dc:r,path:en.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bp(t){const e=t._freezeSettings(),n=Vp(t._databaseId);return new hB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tA(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Gw("Data must be an object, but it was:",a,r);const l=rA(r,a);let c,u;if(i.merge)c=new or(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=xv(e,m,n);if(!a.contains(p))throw new me(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);oA(h,p)||h.push(p)}c=new or(h),u=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=a.fieldTransforms;return new dB(new Bn(l),c,u)}class qp extends ja{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qp}}function nA(t,e,n){return new $p({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qw extends ja{_toFieldTransform(e){return new _w(e.path,new Xu)}isEqual(e){return e instanceof qw}}class Ww extends ja{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=nA(this,e,!0),r=this.vc.map(i=>Ca(i,n)),s=new Kl(r);return new _w(e.path,s)}isEqual(e){return e instanceof Ww&&eo(this.vc,e.vc)}}class Hw extends ja{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=nA(this,e,!0),r=this.vc.map(i=>Ca(i,n)),s=new Xl(r);return new _w(e.path,s)}isEqual(e){return e instanceof Hw&&eo(this.vc,e.vc)}}function fB(t,e,n,r){const s=t.Cc(1,e,n);Gw("Data must be an object, but it was:",s,r);const i=[],a=Bn.empty();_i(r,(c,u)=>{const h=Kw(e,c,n);u=Ht(u);const m=s.yc(h);if(u instanceof qp)i.push(h);else{const p=Ca(u,m);p!=null&&(i.push(h),a.set(h,p))}});const l=new or(i);return new ZI(a,l,s.fieldTransforms)}function mB(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[xv(e,r,n)],c=[s];if(i.length%2!=0)throw new me(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(xv(e,i[p])),c.push(i[p+1]);const u=[],h=Bn.empty();for(let p=l.length-1;p>=0;--p)if(!oA(u,l[p])){const g=l[p];let x=c[p];x=Ht(x);const y=a.yc(g);if(x instanceof qp)u.push(g);else{const _=Ca(x,y);_!=null&&(u.push(g),h.set(g,_))}}const m=new or(u);return new ZI(h,m,a.fieldTransforms)}function pB(t,e,n,r=!1){return Ca(n,t.Cc(r?4:3,e))}function Ca(t,e){if(sA(t=Ht(t)))return Gw("Unsupported field value:",e,t),rA(t,e);if(t instanceof ja)return function(r,s){if(!eA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ca(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s7(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ft.fromDate(r);return{timestampValue:wm(s.serializer,i)}}if(r instanceof ft){const i=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wm(s.serializer,i)}}if(r instanceof Br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:bI(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qr)return function(a,l){return{mapValue:{fields:{[Xk]:{stringValue:Yk},[gm]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return bw(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Tp(r)}`)}(t,e)}function rA(t,e){const n={};return Bk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(r,s)=>{const i=Ca(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Br||t instanceof rr||t instanceof Nt||t instanceof ja||t instanceof qr)}function Gw(t,e,n){if(!sA(n)||!Uk(n)){const r=Tp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xv(t,e,n){if((e=Ht(e))instanceof Vd)return e._internalPath;if(typeof e=="string")return Kw(t,e);throw Em("Field path arguments must be of type string or ",t,!1,void 0,n)}const gB=new RegExp("[~\\*/\\[\\]]");function Kw(t,e,n){if(e.search(gB)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vd(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Em(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new me(G.INVALID_ARGUMENT,l+t+c)}function oA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xB extends iA{data(){return super.data()}}function Wp(t,e){return typeof e=="string"?Kw(t,e):e instanceof Vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xw{}class Hp extends Xw{}function qn(t,e,...n){let r=[];e instanceof Xw&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Gp).length,l=i.filter(c=>c instanceof Fd).length;if(a>1||a>0&&l>0)throw new me(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fd extends Hp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fd(e,n,r)}_apply(e){const n=this._parse(e);return lA(e._query,n),new js(e.firestore,e.converter,av(e._query,n))}_parse(e){const n=Bp(e.firestore);return function(i,a,l,c,u,h,m){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new me(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){VS(m,h);const x=[];for(const y of m)x.push(LS(c,i,y));p={arrayValue:{values:x}}}else p=LS(c,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||VS(m,h),p=pB(l,a,m,h==="in"||h==="not-in");return Vt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(t,e,n){const r=e,s=Wp("where",t);return Fd._create(s,r,n)}class Gp extends Xw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)lA(a,c),a=av(a,c)}(e._query,n),new js(e.firestore,e.converter,av(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kp extends Hp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new me(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ku(i,a)}(e._query,this._field,this._direction);return new js(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new mc(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ra(t,e="asc"){const n=e,r=Wp("orderBy",t);return Kp._create(r,n)}class Xp extends Hp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xp(e,n,r)}_apply(e){return new js(e.firestore,e.converter,ym(e._query,this._limit,this._limitType))}}function gl(t){return EU("limit",t),Xp._create("limit",t,"F")}function LS(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new me(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oI(e)&&n.indexOf("/")!==-1)throw new me(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!Ne.isDocumentKey(r))throw new me(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ZN(t,new Ne(r))}if(n instanceof Nt)return ZN(t,n._key);throw new me(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tp(n)}.`)}function VS(t,e){if(!Array.isArray(t)||t.length===0)throw new me(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lA(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new me(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cA{convertValue(e,n="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _i(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[gm].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Rt(a.doubleValue));return new qr(n)}convertGeoPoint(e){return new Br(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=fi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);rt(CI(r),9688,{name:e});const s=new Wl(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return s.isEqual(n)||ro(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class si extends iA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=si._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}si._jsonSchemaVersion="firestore/documentSnapshot/1.0",si._jsonSchema={type:Ft("string",si._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class yu extends si{data(e={}){return super.data(e)}}class oi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new nl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yu(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:yB(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t){t=Pn(t,Nt);const e=Pn(t.firestore,Ss);return aB(Ld(e),t._key).then(n=>dA(e,t,n))}oi._jsonSchemaVersion="firestore/querySnapshot/1.0",oi._jsonSchema={type:Ft("string",oi._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Qw extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function xl(t){t=Pn(t,js);const e=Pn(t.firestore,Ss),n=Ld(e),r=new Qw(e);return aA(t._query),lB(n,t._query).then(s=>new oi(e,r,t,s))}function ln(t,e,n){t=Pn(t,Nt);const r=Pn(t.firestore,Ss),s=uA(t.converter,e,n);return zd(r,[tA(Bp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Sr.none())])}function Vs(t,e,n,...r){t=Pn(t,Nt);const s=Pn(t.firestore,Ss),i=Bp(s);let a;return a=typeof(e=Ht(e))=="string"||e instanceof Vd?mB(i,"updateDoc",t._key,e,n,r):fB(i,"updateDoc",t._key,e),zd(s,[a.toMutation(t._key,Sr.exists(!0))])}function rl(t){return zd(Pn(t.firestore,Ss),[new Nw(t._key,Sr.none())])}function Jl(t,e){const n=Pn(t.firestore,Ss),r=Ae(t),s=uA(t.converter,e);return zd(n,[tA(Bp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}function Dn(t,...e){var c,u,h;t=Ht(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||OS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(OS(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(u=m.error)==null?void 0:u.bind(m),e[r+2]=(h=m.complete)==null?void 0:h.bind(m)}let i,a,l;if(t instanceof Nt)a=Pn(t.firestore,Ss),l=Rp(t._key.path),i={next:m=>{e[r]&&e[r](dA(a,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Pn(t,js);a=Pn(m.firestore,Ss),l=m._query;const p=new Qw(a);i={next:g=>{e[r]&&e[r](new oi(a,p,m,g))},error:e[r+1],complete:e[r+2]},aA(t._query)}return function(p,g,x,y){const _=new Bw(y),b=new zw(g,_,x);return p.asyncQueue.enqueueAndForget(async()=>Lw(await Sm(p),b)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>Vw(await Sm(p),b))}}(Ld(a),l,s,i)}function zd(t,e){return function(r,s){const i=new Hs;return r.asyncQueue.enqueueAndForget(async()=>X$(await iB(r),s,i)),i.promise}(Ld(t),e)}function dA(t,e,n){const r=n.docs.get(e._key),s=new Qw(t);return new si(t,s,e._key,r,new nl(n.hasPendingWrites,n.fromCache),e.converter)}function ga(){return new qw("serverTimestamp")}function Qp(...t){return new Ww("arrayUnion",t)}function yv(...t){return new Hw("arrayRemove",t)}(function(e,n=!0){(function(s){dc=s})(uc),Ul(new da("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ss(new xU(r.getProvider("auth-internal")),new wU(a,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new me(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(u.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ni(zN,UN,e),ni(zN,UN,"esm2020")})();const FS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:cA,Bytes:rr,CollectionReference:Gs,DocumentReference:Nt,DocumentSnapshot:si,FieldPath:Vd,FieldValue:ja,Firestore:Ss,FirestoreError:me,GeoPoint:Br,Query:js,QueryCompositeFilterConstraint:Gp,QueryConstraint:Hp,QueryDocumentSnapshot:yu,QueryFieldFilterConstraint:Fd,QueryLimitConstraint:Xp,QueryOrderByConstraint:Kp,QuerySnapshot:oi,SnapshotMetadata:nl,Timestamp:ft,VectorValue:qr,_AutoId:Cp,_ByteString:nn,_DatabaseId:Wl,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:Vk,_FieldPath:en,_cast:Pn,_logWarn:ma,_validateIsNotUsedTogether:zk,addDoc:Jl,arrayRemove:yv,arrayUnion:Qp,collection:Zt,connectFirestoreEmulator:YI,deleteDoc:rl,doc:Ae,ensureFirestoreConfigured:Ld,executeWrite:zd,getDoc:wn,getDocs:xl,getFirestore:JI,limit:gl,onSnapshot:Dn,orderBy:ra,query:qn,serverTimestamp:ga,setDoc:ln,updateDoc:Vs,where:tr},Symbol.toStringTag,{value:"Module"})),vB={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},Yw=Q2(vB),Fi=hU(Yw),be=JI(Yw),Yr=new xn;Yr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Yr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Yr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Yr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Yr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Yr.addScope("https://www.googleapis.com/auth/calendar");Yr.addScope("https://www.googleapis.com/auth/gmail.send");Yr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const zS=Object.freeze(Object.defineProperty({__proto__:null,app:Yw,auth:Fi,db:be,googleProvider:Yr},Symbol.toStringTag,{value:"Module"})),yf="trace_current_user_id",wB=["theme","trace_docs_seen"];function bB(){const t={};wB.forEach(e=>{const n=localStorage.getItem(e);n&&(t[e]=n)}),localStorage.clear(),Object.entries(t).forEach(([e,n])=>{localStorage.setItem(e,n)})}function _B(t){const e=localStorage.getItem(yf);return e?e!==t?(console.log(" Account switch detected. Clearing old user data..."),bB(),localStorage.setItem(yf,t),!0):!1:(localStorage.setItem(yf,t),!1)}function US(){localStorage.removeItem(yf)}const hA=f.createContext(void 0);function NB({children:t}){const[e,n]=f.useState(null),[r,s]=f.useState(!0),[i,a]=f.useState(()=>localStorage.getItem("google_access_token")),[l,c]=f.useState(null),[u,h]=f.useState(()=>localStorage.getItem("user_role")),[m,p]=f.useState(0),[g,x]=f.useState(null),y=f.useMemo(()=>e?g?new Proxy(e,{get(N,E){return E==="photoURL"?g:N[E]}}):e:null,[e,g,m]);f.useEffect(()=>t8(Fi,E=>{if(E&&_B(E.uid)){window.location.reload();return}n(E),E||(h(null),s(!1),a(null),localStorage.removeItem("google_access_token"),US())}),[]),f.useEffect(()=>{async function N(){if(!e||!i){if(e&&!i){const E=localStorage.getItem("google_access_token");if(E){a(E);return}}e||s(!1);return}try{s(!0);const E=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});if(E.status===401){console.log("Token expired (401). User needs to re-authenticate."),c("Session expired. Please sign in again."),h(null),s(!1),localStorage.removeItem("google_access_token");return}let j=!1;if(E.ok){const D=await E.json();D.courses&&D.courses.length>0&&(j=!0)}if(j){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const k=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let I=!1;if(k.ok){const D=await k.json();D.courses&&D.courses.length>0&&(I=!0)}I?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(E){console.error("Role detection failed:",E),h("no_access")}finally{s(!1)}}N()},[e,i]);const _=async()=>{try{c(null),Yr.setCustomParameters({prompt:"consent",access_type:"offline"});const N=await Ph(Fi,Yr),E=xn.credentialFromResult(N);E!=null&&E.accessToken&&(a(E.accessToken),localStorage.setItem("google_access_token",E.accessToken))}catch(N){const E=N instanceof Error?N.message:"Failed to sign in";c(E),console.error("Sign in error:",N)}},b=async()=>{try{c(null);const N=new xn;N.addScope("https://www.googleapis.com/auth/gmail.send"),N.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),N.setCustomParameters({access_type:"offline",prompt:"consent"});const E=await Ph(Fi,N),j=xn.credentialFromResult(E),k=E._tokenResponse;if(j!=null&&j.accessToken&&(a(j.accessToken),localStorage.setItem("google_access_token",j.accessToken)),k!=null&&k.oauthRefreshToken){const{doc:I,setDoc:D,serverTimestamp:P}=await tl(async()=>{const{doc:re,setDoc:Z,serverTimestamp:te}=await Promise.resolve().then(()=>FS);return{doc:re,setDoc:Z,serverTimestamp:te}},void 0),{db:V}=await tl(async()=>{const{db:re}=await Promise.resolve().then(()=>zS);return{db:re}},void 0);if(e&&k.oauthRefreshToken)return await D(I(V,"users",e.uid,"private_tokens","google"),{refreshToken:k.oauthRefreshToken,updatedAt:P()}),!0}return!!(j!=null&&j.accessToken)}catch(N){const E=N instanceof Error?N.message:"Failed to get Gmail permissions";return c(E),console.error("Permission error:",N),!1}},w=async()=>{try{c(null);const N=new xn;N.addScope("https://www.googleapis.com/auth/calendar.events"),N.setCustomParameters({access_type:"offline",prompt:"consent"});const E=await Ph(Fi,N),j=xn.credentialFromResult(E),k=E._tokenResponse;if(j!=null&&j.accessToken&&(a(j.accessToken),localStorage.setItem("google_access_token",j.accessToken)),e&&(k!=null&&k.oauthRefreshToken)){const{doc:I,setDoc:D,serverTimestamp:P}=await tl(async()=>{const{doc:re,setDoc:Z,serverTimestamp:te}=await Promise.resolve().then(()=>FS);return{doc:re,setDoc:Z,serverTimestamp:te}},void 0),{db:V}=await tl(async()=>{const{db:re}=await Promise.resolve().then(()=>zS);return{db:re}},void 0);return await D(I(V,"users",e.uid,"private_tokens","calendar"),{refreshToken:k.oauthRefreshToken,updatedAt:P(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(N){const E=N instanceof Error?N.message:"Failed to get Calendar permissions";return c(E),console.error("Permission error:",N),!1}},S=async()=>{if(!e)return!1;try{const N=new xn;N.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),N.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),N.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),N.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),N.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),N.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const E=await Ph(Fi,N),j=xn.credentialFromResult(E);return j!=null&&j.accessToken?(a(j.accessToken),localStorage.setItem("google_access_token",j.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(N){return console.error("Failed to refresh access token:",N),!1}},T=async()=>S(),A=async()=>{try{await n8(Fi),a(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role"),US()}catch(N){const E=N instanceof Error?N.message:"Failed to sign out";c(E)}},M=async N=>{if(e)try{await Jz(e,N),N.photoURL!==void 0&&x(N.photoURL),p(E=>E+1)}catch(E){const j=E instanceof Error?E.message:"Failed to update profile";throw c(j),E}};return o.jsx(hA.Provider,{value:{user:y,loading:r,role:u,accessToken:i,signInWithGoogle:_,requestGmailPermissions:b,requestCalendarPermissions:w,refreshAccessToken:T,signOut:A,updateUserProfile:M,error:l},children:t})}function ut(){const t=f.useContext(hA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const fA=f.createContext(void 0);function SB({children:t}){const[e,n]=f.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});f.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return o.jsx(fA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function Jw(){const t=f.useContext(fA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class EB{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const a=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-a)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,a){var l;try{const{totalXP:c,processedIds:u}=this.calculateXP(i),h=n.includes("@")?n.split("@")[1]:"",m=a.map(b=>b.id),p=Ae(be,"leaderboards","all-courses","students",e),g=await wn(p),x=g.exists()?g.data().badges||[]:[],y=this.calculateBadges(u.length,x);await ln(p,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:h,enrolledCourseIds:m,totalXP:c,processedAssignmentIds:u,lastSyncedAt:ga(),badges:y},{merge:!0});const _=y.filter(b=>!x.includes(b));if(_.length>0){const{BADGES:b}=await tl(async()=>{const{BADGES:w}=await Promise.resolve().then(()=>JP);return{BADGES:w}},void 0);for(const w of _)await Jl(Zt(be,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((l=b[w])==null?void 0:l.label)||"New Badge"}' badge!`,courseId:"all-courses",emailDomain:h,visibility:"public",createdAt:new Date().toISOString()})}}catch(c){throw console.error(" Failed to sync leaderboard:",c),c}}static async resetLeaderboardForSemester(e){try{const n=Ae(be,"leaderboards","all-courses","students",e),r=await wn(n),s=r.exists()?r.data().badges||[]:[];await ln(n,{badges:s,totalXP:0,processedAssignmentIds:[],enrolledCourseIds:[],lastSyncedAt:ga()})}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=Ae(be,"leaderboards","all-courses","students",e),s=await wn(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],a=new Set(n),l=new Set(i);if(a.size!==l.size)return!0;for(const c of n)if(!l.has(c))return!0;for(const c of i)if(!a.has(c))return!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,a){try{const l=a.map(u=>u.id);await this.hasCoursesChanged(e,l)&&await this.resetLeaderboardForSemester(e),await this.syncUserLeaderboard(e,n,r,s,i,a)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}const Wn={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearPattern:t=>{Object.keys(localStorage).forEach(e=>{e.startsWith("trace_cache_")&&e.includes(t)&&localStorage.removeItem(e)})},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},$S={async fetchCourses(t,e){const n=Wn.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const a=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:jB(l.id)}));return Wn.set(`courses_${e}`,a,60*60*24),a},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,a=Wn.get(i);if(a)return console.log(`[CACHE HIT] Using cached assignments for ${s.name}`),a;console.log(`[CACHE MISS] Fetching fresh data for ${s.name}`);const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,updateTime)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(x=>(x.ok||console.error(`Coursework fetch failed: ${x.status} ${x.statusText}`),x.ok?x.json():{courseWork:[]})),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(async x=>{if(!x.ok){console.error(` Submissions fetch failed: ${x.status} ${x.statusText}`),console.error(" This usually means missing OAuth scope: classroom.student-submissions.me.readonly"),console.error(" Please sign out and sign in again to grant permissions");const y=await x.text();return console.error(" Error response:",y),{studentSubmissions:[]}}return x.json()})]),m=u.courseWork||[],p=h.studentSubmissions||[];console.log(`[API DATA] Course: ${s.name}`),console.log(`  - Coursework items: ${m.length}`),console.log(`  - Submissions: ${p.length}`),console.log("  - Submission states:",p.map(x=>({id:x.courseWorkId,state:x.state})));const g=m.filter(x=>!x.workType||x.workType==="ASSIGNMENT"||x.workType==="MULTIPLE_CHOICE_QUESTION").map(x=>{const y=p.find(_=>_.courseWorkId===x.id);return CB(x,s,y)});return Wn.set(i,g,300),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},BS=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function jB(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%BS.length;return BS[n]}function CB(t,e,n){var m,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((m=t.dueTime)==null?void 0:m.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let a="backlog",l="backlog",c=null,u=null,h=null;return n&&(console.log(`Assignment "${t.title}" submission state:`,n.state),n.state==="TURNED_IN"||n.state==="SUBMITTED"?(a="submitted",l="submitted",u=n.updateTime):n.state==="RETURNED"?(a="graded",l="graded",c=n.assignedGrade,u=n.updateTime,h=n.updateTime):(n.state==="reclaimed_by_student"||n.state==="NEW"||n.state==="CREATED")&&(a="backlog",l="backlog")),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",a="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:a,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function TB(t,e,n,r){const s=Ae(be,"users",n,"settings","calendar"),i=await wn(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],m={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),m.end.date=p.toISOString().split("T")[0];const g=Ae(be,"users",n,"calendarEvents",c.id),x=await wn(g),y="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(x.exists()){const{calendarEventId:b}=x.data();_=await fetch(`${y}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)})}else if(_=await fetch(y,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)}),_.ok){const b=await _.json();await ln(g,{calendarEventId:b.id,assignmentId:c.id,updatedAt:ga()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const mA=f.createContext(void 0);function kB(){return Math.random().toString(36).substring(2,15)}async function qS(t,e,n,r){var a;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const x=await u.json();g=x,p=((a=x.error)==null?void 0:a.message)||x.message||p,console.error("API Error Response:",x)}catch{const y=await u.text().catch(()=>"");console.error("API Error (non-JSON):",y)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),m=n(h);s.push(...m),i=r(h)}while(i);return s}async function IB(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,a=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([qS(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),qS(t,a,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,x;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(x=p.message)!=null&&x.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),m=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",x=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:x,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...m]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function AB({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=ut(),{toast:i}=ao(),[a,l]=f.useState(()=>{if(!e)return[];const L=Wn.get(`courses_${e.uid}`);if(L)return L;const B=localStorage.getItem("classroom_courses");return B?JSON.parse(B):[]}),[c,u]=f.useState(()=>{if(!e)return[];const L=localStorage.getItem("classroom_assignments");return L?JSON.parse(L):[]}),[h,m]=f.useState(()=>{const L=localStorage.getItem("classroom_materials");return L?JSON.parse(L):[]}),[p,g]=f.useState(()=>{const L=localStorage.getItem("classroom_notes");return L?new Map(JSON.parse(L)):new Map}),[x,y]=f.useState(()=>e&&Wn.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,b]=f.useState(!1),[w,S]=f.useState(()=>{const L=localStorage.getItem("classroom_lastSyncedAt");return L?new Date(L):null}),[T,A]=f.useState(null),[M,N]=f.useState(!1),[E,j]=f.useState(!1);f.useEffect(()=>{!s&&!e&&(l([]),u([]),m([]),g(new Map),S(null),N(!1),Wn.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const k=f.useCallback(async(L=!1)=>{if(!e)return;let B=n;if(!B)try{await r()&&(B=localStorage.getItem("google_access_token"))}catch(W){console.error(W)}if(!B){A("Session expired. Please sign in again.");return}b(!0),A(null),L||Wn.clearPattern("assignments_");try{let W;try{W=await $S.fetchCourses(B,e.uid)}catch(le){throw le.message&&le.message.includes("401")?(console.log("Sync 401. Session expired."),A("Your session has expired. Please sign out and sign in again."),i({variant:"destructive",title:"Session Expired",description:"Please sign out and sign in again to continue."}),new Error("Session expired")):le}l(le=>JSON.stringify(le)!==JSON.stringify(W)?W:le);const K=await $S.fetchAssignmentsParallel(B,W);u(K),S(new Date),Promise.all(W.map(le=>IB(B,le.classroomId,le.name,e.uid,()=>j(!0)))).then(le=>{const oe=le.flat();m(oe)}),TB(K,B,e.uid,i).catch(le=>console.warn(le)),EB.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",K,W).catch(console.warn)}catch(W){console.error("Sync Error",W),A(W.message||"Failed to sync"),L||i({variant:"destructive",title:"Sync Failed",description:W.message})}finally{b(!1),y(!1)}},[e,n,r,i]);f.useEffect(()=>{!e||!n||!M&&!_&&(N(!0),k(!0))},[e,n,M,_,k]),f.useEffect(()=>{if(!e||!n)return;const L=setInterval(()=>{console.log("Running periodic sync to check for submission updates..."),k(!0)},10*60*1e3);return()=>clearInterval(L)},[e,n,k]),f.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(a))},[a]),f.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(h))},[h]),f.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(p.entries())))},[p]),f.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(c))},[c]),f.useEffect(()=>{w&&localStorage.setItem("classroom_lastSyncedAt",w.toISOString())},[w]);const I=f.useCallback((L,B)=>{u(W=>W.map(K=>K.id===L?{...K,userStatus:B}:K))},[]),D=f.useCallback((L,B,W=!1)=>{const K={id:kB(),userId:(e==null?void 0:e.uid)||"",assignmentId:L,content:B,isImportant:W,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(le=>{const oe=new Map(le),ce=oe.get(L)||[];return oe.set(L,[...ce,K]),oe})},[e]),P=f.useCallback((L,B,W)=>{g(K=>{const le=new Map(K);for(const[oe,ce]of Array.from(le.entries())){const F=ce.findIndex(Y=>Y.id===L);if(F!==-1){const Y=[...ce];Y[F]={...Y[F],content:B,isImportant:W??Y[F].isImportant,updatedAt:new Date().toISOString()},le.set(oe,Y);break}}return le})},[]),V=f.useCallback((L,B)=>{g(W=>{const K=new Map(W),le=K.get(B)||[];return K.set(B,le.filter(oe=>oe.id!==L)),K})},[]),re=f.useCallback(()=>{const L=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return c.forEach(B=>{let W=B.systemStatus;B.userStatus==="in_progress"&&W!=="submitted"&&W!=="graded"&&(W="in_progress");const K=L.find(le=>le.id===W);K&&K.assignments.push(B)}),L.forEach(B=>{B.assignments.sort((W,K)=>W.dueDate?K.dueDate?new Date(W.dueDate).getTime()-new Date(K.dueDate).getTime():-1:1)}),L},[c]),Z=f.useCallback(()=>{const L=new Date,B=new Date(L);B.setDate(B.getDate()+3);const W=new Date(L);W.setDate(W.getDate()+7);const K=c.filter(ie=>ie.systemStatus!=="graded"&&ie.systemStatus!=="submitted"),le=c.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const de=new Date(ie.dueDate);return de>=L&&de<=B}),oe=c.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const de=new Date(ie.dueDate);return de>=L&&de<=W}),ce=c.filter(ie=>ie.systemStatus==="overdue"),F=[],Y=new Date,ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let ie=0;ie<7;ie++){const de=new Date(Y);de.setDate(de.getDate()+ie);const Te=de.toISOString().split("T")[0],qe=c.filter(pt=>pt.dueDate&&pt.dueDate.startsWith(Te)).length;F.push({day:ue[de.getDay()],count:qe,isToday:ie===0})}const J=[...K].filter(ie=>ie.dueDate).sort((ie,de)=>new Date(ie.dueDate).getTime()-new Date(de.dueDate).getTime()).slice(0,5);return{totalActive:K.length,upcoming3Days:le.length,upcoming7Days:oe.length,overdue:ce.length,weeklyWorkload:F,nextActions:J}},[c]),te=f.useCallback(L=>{let B=[...c];L!=null&&L.courseId&&(B=B.filter(oe=>oe.courseId===L.courseId)),L!=null&&L.status&&(B=B.filter(oe=>oe.systemStatus===L.status)),B.sort((oe,ce)=>oe.dueDate?ce.dueDate?new Date(oe.dueDate).getTime()-new Date(ce.dueDate).getTime():-1:1);const W=new Map,K=new Date,le=new Date(K);return le.setDate(le.getDate()+1),B.forEach(oe=>{if(!oe.dueDate)return;const ce=oe.dueDate.split("T")[0],F=new Date(oe.dueDate);let Y=ce===K.toISOString().split("T")[0]?"Today":ce===le.toISOString().split("T")[0]?"Tomorrow":F.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});W.has(ce)||W.set(ce,{date:ce,dateLabel:Y,assignments:[]}),W.get(ce).assignments.push(oe)}),Array.from(W.values())},[c]),$=f.useCallback(L=>c.find(B=>B.id===L),[c]),O=f.useCallback(L=>p.get(L)||[],[p]);return o.jsx(mA.Provider,{value:{courses:a,assignments:c,notes:p,isLoading:x,isSyncing:_,lastSyncedAt:w,error:T,syncClassroom:k,updateAssignmentStatus:I,addNote:D,updateNote:P,deleteNote:V,getPipelineColumns:re,getDashboardMetrics:Z,getTimelineGroups:te,getAssignmentById:$,getNotesForAssignment:O,materials:h,reauthRequired:E},children:t})}function An(){const t=f.useContext(mA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const Nx=768;function Yp(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Nx-1}px)`),r=()=>{e(window.innerWidth<Nx)};return n.addEventListener("change",r),e(window.innerWidth<Nx),()=>n.removeEventListener("change",r)},[]),!!t}var Zw="Avatar",[RB,xY]=un(Zw),[PB,pA]=RB(Zw),gA=f.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=f.useState("idle");return o.jsx(PB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(we.span,{...r,ref:e})})});gA.displayName=Zw;var xA="AvatarImage",yA=f.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=pA(xA,n),l=DB(r,i),c=bt(u=>{s(u),a.onImageLoadingStatusChange(u)});return zt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(we.img,{...i,ref:e,src:r}):null});yA.displayName=xA;var vA="AvatarFallback",wA=f.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=pA(vA,n),[a,l]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(we.span,{...s,ref:e}):null});wA.displayName=vA;function WS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function DB(t,{referrerPolicy:e,crossOrigin:n}){const r=OB(),s=f.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=f.useState(()=>WS(i,t));return zt(()=>{l(WS(i,t))},[i,t]),zt(()=>{const c=m=>()=>{l(m)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}function MB(){return()=>{}}function OB(){return f.useSyncExternalStore(MB,()=>!0,()=>!1)}var bA=gA,_A=yA,NA=wA;const bn=f.forwardRef(({className:t,...e},n)=>o.jsx(bA,{ref:n,className:U(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));bn.displayName=bA.displayName;const _n=f.forwardRef(({className:t,...e},n)=>o.jsx(_A,{ref:n,className:U("aspect-square h-full w-full",t),...e}));_n.displayName=_A.displayName;const Nn=f.forwardRef(({className:t,...e},n)=>o.jsx(NA,{ref:n,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Nn.displayName=NA.displayName;const LB=[{path:"/dashboard",label:"Dashboard",icon:BT},{path:"/pipeline",label:"Pipeline",icon:KT},{path:"/leaderboard",label:"Leaderboard",icon:Yo},{path:"/clans",label:"Clans",icon:du},{path:"/timeline",label:"Timeline",icon:ws},{path:"/attendance",label:"Attendance",icon:Fy},{path:"/notes",label:"Notes",icon:ea}];function VB({mobileOpen:t,onMobileClose:e}){var h,m;const[n]=op(),r=Yp(),{user:s,signOut:i}=ut(),{theme:a,toggleTheme:l}=Jw(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((m=s==null?void 0:s.email)==null?void 0:m[0].toUpperCase())||"U",u=()=>o.jsxs("div",{className:"flex flex-col h-full bg-background",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&o.jsx("button",{className:"ml-auto",onClick:e,children:o.jsx(Gr,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(bn,{className:"h-8 w-8",children:[o.jsx(_n,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nn,{className:"text-xs",children:c})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),LB.map(p=>{const g=n===p.path,x=p.icon;return o.jsxs(Qn,{href:p.path,onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(x,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),o.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx($0,{className:"w-4 h-4 mr-3"}):o.jsx(hp,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(Qn,{href:"/settings",onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[o.jsx(uu,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:o.jsx(u,{})}),r&&t&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const eb=vd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ae=f.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?eL:"button";return o.jsx(a,{className:U(eb({variant:e,size:n,className:t})),ref:i,...s})});ae.displayName="Button";var Sx=0;function Jp(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??HS()),document.body.insertAdjacentElement("beforeend",t[1]??HS()),Sx++,()=>{Sx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sx--}},[])}function HS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ex="focusScope.autoFocusOnMount",jx="focusScope.autoFocusOnUnmount",GS={bubbles:!1,cancelable:!0},FB="FocusScope",Ud=f.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=f.useState(null),u=bt(s),h=bt(i),m=f.useRef(null),p=ke(e,y=>c(y)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(S){if(g.paused||!l)return;const T=S.target;l.contains(T)?m.current=T:So(m.current,{select:!0})},_=function(S){if(g.paused||!l)return;const T=S.relatedTarget;T!==null&&(l.contains(T)||So(m.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const A of S)A.removedNodes.length>0&&So(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),w.disconnect()}}},[r,l,g.paused]),f.useEffect(()=>{if(l){XS.add(g);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(Ex,GS);l.addEventListener(Ex,u),l.dispatchEvent(b),b.defaultPrevented||(zB(WB(SA(l)),{select:!0}),document.activeElement===y&&So(l))}return()=>{l.removeEventListener(Ex,u),setTimeout(()=>{const b=new CustomEvent(jx,GS);l.addEventListener(jx,h),l.dispatchEvent(b),b.defaultPrevented||So(y??document.body,{select:!0}),l.removeEventListener(jx,h),XS.remove(g)},0)}}},[l,u,h,g]);const x=f.useCallback(y=>{if(!n&&!r||g.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(_&&b){const w=y.currentTarget,[S,T]=UB(w);S&&T?!y.shiftKey&&b===T?(y.preventDefault(),n&&So(S,{select:!0})):y.shiftKey&&b===S&&(y.preventDefault(),n&&So(T,{select:!0})):b===w&&y.preventDefault()}},[n,r,g.paused]);return o.jsx(we.div,{tabIndex:-1,...a,ref:p,onKeyDown:x})});Ud.displayName=FB;function zB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(So(r,{select:e}),document.activeElement!==n)return}function UB(t){const e=SA(t),n=KS(e,t),r=KS(e.reverse(),t);return[n,r]}function SA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function KS(t,e){for(const n of t)if(!$B(n,{upTo:e}))return n}function $B(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function BB(t){return t instanceof HTMLInputElement&&"select"in t}function So(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&BB(t)&&e&&t.select()}}var XS=qB();function qB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=QS(t,e),t.unshift(e)},remove(e){var n;t=QS(t,e),(n=t[0])==null||n.resume()}}}function QS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function WB(t){return t.filter(e=>e.tagName!=="A")}var HB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Oa=new WeakMap,Fh=new WeakMap,zh={},Cx=0,EA=function(t){return t&&(t.host||EA(t.parentNode))},GB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=EA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},KB=function(t,e,n,r){var s=GB(e,Array.isArray(t)?t:[t]);zh[n]||(zh[n]=new WeakMap);var i=zh[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),x=g!==null&&g!=="false",y=(Oa.get(p)||0)+1,_=(i.get(p)||0)+1;Oa.set(p,y),i.set(p,_),a.push(p),y===1&&x&&Fh.set(p,!0),_===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),Cx++,function(){a.forEach(function(m){var p=Oa.get(m)-1,g=i.get(m)-1;Oa.set(m,p),i.set(m,g),p||(Fh.has(m)||m.removeAttribute(r),Fh.delete(m)),g||m.removeAttribute(n)}),Cx--,Cx||(Oa=new WeakMap,Oa=new WeakMap,Fh=new WeakMap,zh={})}},Zp=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=HB(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),KB(r,s,n,"aria-hidden")):function(){return null}},fs=function(){return fs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fs.apply(this,arguments)};function jA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var vf="right-scroll-bar-position",wf="width-before-scroll-bar",QB="with-scroll-bars-hidden",YB="--removed-body-scroll-bar-size";function Tx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function JB(t,e){var n=f.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var ZB=typeof window<"u"?f.useLayoutEffect:f.useEffect,YS=new WeakMap;function eq(t,e){var n=JB(null,function(r){return t.forEach(function(s){return Tx(s,r)})});return ZB(function(){var r=YS.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Tx(l,null)}),i.forEach(function(l){s.has(l)||Tx(l,a)})}YS.set(n,t)},[t]),n}function tq(t){return t}function nq(t,e){e===void 0&&(e=tq);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return s}function rq(t){t===void 0&&(t={});var e=nq(null);return e.options=fs({async:!0,ssr:!1},t),e}var CA=function(t){var e=t.sideCar,n=jA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,fs({},n))};CA.isSideCarExport=!0;function sq(t,e){return t.useMedium(e),CA}var TA=rq(),kx=function(){},eg=f.forwardRef(function(t,e){var n=f.useRef(null),r=f.useState({onScrollCapture:kx,onWheelCapture:kx,onTouchMoveCapture:kx}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,m=t.shards,p=t.sideCar,g=t.noIsolation,x=t.inert,y=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,w=t.gapMode,S=jA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=p,A=eq([n,e]),M=fs(fs({},S),s);return f.createElement(f.Fragment,null,h&&f.createElement(T,{sideCar:TA,removeScrollBar:u,shards:m,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:w}),a?f.cloneElement(f.Children.only(l),fs(fs({},M),{ref:A})):f.createElement(b,fs({},M,{className:c,ref:A}),l))});eg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eg.classNames={fullWidth:wf,zeroRight:vf};var oq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=oq();return e&&t.setAttribute("nonce",e),t}function aq(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function lq(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var cq=function(){var t=0,e=null;return{add:function(n){t==0&&(e=iq())&&(aq(e,n),lq(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},uq=function(){var t=cq();return function(e,n){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},kA=function(){var t=uq(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},dq={left:0,top:0,right:0,gap:0},Ix=function(t){return parseInt(t||"",10)||0},hq=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ix(n),Ix(r),Ix(s)]},fq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return dq;var e=hq(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},mq=kA(),yl="data-scroll-locked",pq=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(QB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(yl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(wf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(vf," .").concat(vf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wf," .").concat(wf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yl,`] {
    `).concat(YB,": ").concat(l,`px;
  }
`)},JS=function(){var t=parseInt(document.body.getAttribute(yl)||"0",10);return isFinite(t)?t:0},gq=function(){f.useEffect(function(){return document.body.setAttribute(yl,(JS()+1).toString()),function(){var t=JS()-1;t<=0?document.body.removeAttribute(yl):document.body.setAttribute(yl,t.toString())}},[])},xq=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;gq();var i=f.useMemo(function(){return fq(s)},[s]);return f.createElement(mq,{styles:pq(i,!e,s,n?"":"!important")})},vv=!1;if(typeof window<"u")try{var Uh=Object.defineProperty({},"passive",{get:function(){return vv=!0,!0}});window.addEventListener("test",Uh,Uh),window.removeEventListener("test",Uh,Uh)}catch{vv=!1}var La=vv?{passive:!1}:!1,yq=function(t){return t.tagName==="TEXTAREA"},IA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!yq(t)&&n[e]==="visible")},vq=function(t){return IA(t,"overflowY")},wq=function(t){return IA(t,"overflowX")},ZS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=AA(t,r);if(s){var i=RA(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},bq=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},_q=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},AA=function(t,e){return t==="v"?vq(e):wq(e)},RA=function(t,e){return t==="v"?bq(e):_q(e)},Nq=function(t,e){return t==="h"&&e==="rtl"?-1:1},Sq=function(t,e,n,r,s){var i=Nq(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),u=!1,h=a>0,m=0,p=0;do{var g=RA(t,l),x=g[0],y=g[1],_=g[2],b=y-_-i*x;(x||b)&&AA(t,l)&&(m+=b,p+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(m)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},$h=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},eE=function(t){return[t.deltaX,t.deltaY]},tE=function(t){return t&&"current"in t?t.current:t},Eq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},jq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Cq=0,Va=[];function Tq(t){var e=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(Cq++)[0],i=f.useState(kA)[0],a=f.useRef(t);f.useEffect(function(){a.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=XB([t.lockRef.current],(t.shards||[]).map(tE),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var b=$h(y),w=n.current,S="deltaX"in y?y.deltaX:w[0]-b[0],T="deltaY"in y?y.deltaY:w[1]-b[1],A,M=y.target,N=Math.abs(S)>Math.abs(T)?"h":"v";if("touches"in y&&N==="h"&&M.type==="range")return!1;var E=ZS(N,M);if(!E)return!0;if(E?A=N:(A=N==="v"?"h":"v",E=ZS(N,M)),!E)return!1;if(!r.current&&"changedTouches"in y&&(S||T)&&(r.current=A),!A)return!0;var j=r.current||A;return Sq(j,_,y,j==="h"?S:T,!0)},[]),c=f.useCallback(function(y){var _=y;if(!(!Va.length||Va[Va.length-1]!==i)){var b="deltaY"in _?eE(_):$h(_),w=e.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&Eq(A.delta,b)})[0];if(w&&w.should){_.cancelable&&_.preventDefault();return}if(!w){var S=(a.current.shards||[]).map(tE).filter(Boolean).filter(function(A){return A.contains(_.target)}),T=S.length>0?l(_,S[0]):!a.current.noIsolation;T&&_.cancelable&&_.preventDefault()}}},[]),u=f.useCallback(function(y,_,b,w){var S={name:y,delta:_,target:b,should:w,shadowParent:kq(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(T){return T!==S})},1)},[]),h=f.useCallback(function(y){n.current=$h(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,eE(y),y.target,l(y,t.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,$h(y),y.target,l(y,t.lockRef.current))},[]);f.useEffect(function(){return Va.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,La),document.addEventListener("touchmove",c,La),document.addEventListener("touchstart",h,La),function(){Va=Va.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,La),document.removeEventListener("touchmove",c,La),document.removeEventListener("touchstart",h,La)}},[]);var g=t.removeScrollBar,x=t.inert;return f.createElement(f.Fragment,null,x?f.createElement(i,{styles:jq(s)}):null,g?f.createElement(xq,{gapMode:t.gapMode}):null)}function kq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Iq=sq(TA,Tq);var $d=f.forwardRef(function(t,e){return f.createElement(eg,fs({},t,{ref:e,sideCar:Iq}))});$d.classNames=eg.classNames;var tb="Popover",[PA,yY]=un(tb,[bi]),Bd=bi(),[Aq,Si]=PA(tb),DA=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=Bd(e),c=f.useRef(null),[u,h]=f.useState(!1),[m=!1,p]=Hr({prop:r,defaultProp:s,onChange:i});return o.jsx(xp,{...l,children:o.jsx(Aq,{scope:e,contentId:Nr(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>h(!0),[]),onCustomAnchorRemove:f.useCallback(()=>h(!1),[]),modal:a,children:n})})};DA.displayName=tb;var MA="PopoverAnchor",Rq=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Si(MA,n),i=Bd(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Sd,{...i,...r,ref:e})});Rq.displayName=MA;var OA="PopoverTrigger",LA=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Si(OA,n),i=Bd(n),a=ke(e,s.triggerRef),l=o.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$A(s.open),...r,ref:a,onClick:se(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Sd,{asChild:!0,...i,children:l})});LA.displayName=OA;var nb="PopoverPortal",[Pq,Dq]=PA(nb,{forceMount:void 0}),VA=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Si(nb,e);return o.jsx(Pq,{scope:e,forceMount:n,children:o.jsx(Gt,{present:n||i.open,children:o.jsx(_a,{asChild:!0,container:s,children:r})})})};VA.displayName=nb;var Zl="PopoverContent",FA=f.forwardRef((t,e)=>{const n=Dq(Zl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Si(Zl,t.__scopePopover);return o.jsx(Gt,{present:r||i.open,children:i.modal?o.jsx(Oq,{...s,ref:e}):o.jsx(Lq,{...s,ref:e})})});FA.displayName=Zl;var Mq=li("PopoverContent.RemoveScroll"),Oq=f.forwardRef((t,e)=>{const n=Si(Zl,t.__scopePopover),r=f.useRef(null),s=ke(e,r),i=f.useRef(!1);return f.useEffect(()=>{const a=r.current;if(a)return Zp(a)},[]),o.jsx($d,{as:Mq,allowPinchZoom:!0,children:o.jsx(zA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:se(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lq=f.forwardRef((t,e)=>{const n=Si(Zl,t.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(zA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zA=f.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...m}=t,p=Si(Zl,n),g=Bd(n);return Jp(),o.jsx(Ud,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(ba,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(yp,{"data-state":$A(p.open),role:"dialog",id:p.contentId,...g,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),UA="PopoverClose",Vq=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Si(UA,n);return o.jsx(we.button,{type:"button",...r,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});Vq.displayName=UA;var Fq="PopoverArrow",zq=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Bd(n);return o.jsx(vp,{...s,...r,ref:e})});zq.displayName=Fq;function $A(t){return t?"open":"closed"}var Uq=DA,$q=LA,Bq=VA,BA=FA;const qq=Uq,Wq=$q,qA=f.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>o.jsx(Bq,{children:o.jsx(BA,{ref:s,align:e,sideOffset:n,className:U("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));qA.displayName=BA.displayName;var Hq=f.createContext(void 0);function gc(t){const e=f.useContext(Hq);return t||e||"ltr"}function wv(t,[e,n]){return Math.min(n,Math.max(e,t))}function Gq(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var rb="ScrollArea",[WA,vY]=un(rb),[Kq,Tr]=WA(rb),HA=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[l,c]=f.useState(null),[u,h]=f.useState(null),[m,p]=f.useState(null),[g,x]=f.useState(null),[y,_]=f.useState(null),[b,w]=f.useState(0),[S,T]=f.useState(0),[A,M]=f.useState(!1),[N,E]=f.useState(!1),j=ke(e,I=>c(I)),k=gc(s);return o.jsx(Kq,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:m,onContentChange:p,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:A,onScrollbarXEnabledChange:M,scrollbarY:y,onScrollbarYChange:_,scrollbarYEnabled:N,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:T,children:o.jsx(we.div,{dir:k,...a,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});HA.displayName=rb;var GA="ScrollAreaViewport",KA=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=Tr(GA,n),l=f.useRef(null),c=ke(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(we.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});KA.displayName=GA;var Cs="ScrollAreaScrollbar",sb=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(Cs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(Xq,{...r,ref:e,forceMount:n}):s.type==="scroll"?o.jsx(Qq,{...r,ref:e,forceMount:n}):s.type==="auto"?o.jsx(XA,{...r,ref:e,forceMount:n}):s.type==="always"?o.jsx(ob,{...r,ref:e}):null});sb.displayName=Cs;var Xq=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(Cs,t.__scopeScrollArea),[i,a]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Gt,{present:n||i,children:o.jsx(XA,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Qq=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(Cs,t.__scopeScrollArea),i=t.orientation==="horizontal",a=ng(()=>c("SCROLL_END"),100),[l,c]=Gq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let m=u[h];const p=()=>{const g=u[h];m!==g&&(c("SCROLL"),a()),m=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),o.jsx(Gt,{present:n||l!=="hidden",children:o.jsx(ob,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:se(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:se(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),XA=f.forwardRef((t,e)=>{const n=Tr(Cs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=f.useState(!1),l=t.orientation==="horizontal",c=ng(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:h)}},10);return ec(n.viewport,c),ec(n.content,c),o.jsx(Gt,{present:r||i,children:o.jsx(ob,{"data-state":i?"visible":"hidden",...s,ref:e})})}),ob=f.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Tr(Cs,t.__scopeScrollArea),i=f.useRef(null),a=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=eR(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function m(p,g){return nW(p,a.current,l,g)}return n==="horizontal"?o.jsx(Yq,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=nE(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx(Jq,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=nE(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Yq=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Tr(Cs,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=ke(e,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(YA,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),nR(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Cm(a.paddingLeft),paddingEnd:Cm(a.paddingRight)}})}})}),Jq=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Tr(Cs,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=ke(e,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(YA,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),nR(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Cm(a.paddingTop),paddingEnd:Cm(a.paddingBottom)}})}})}),[Zq,QA]=WA(Cs),YA=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:m,...p}=t,g=Tr(Cs,n),[x,y]=f.useState(null),_=ke(e,j=>y(j)),b=f.useRef(null),w=f.useRef(""),S=g.viewport,T=r.content-r.viewport,A=bt(h),M=bt(c),N=ng(m,10);function E(j){if(b.current){const k=j.clientX-b.current.left,I=j.clientY-b.current.top;u({x:k,y:I})}}return f.useEffect(()=>{const j=k=>{const I=k.target;(x==null?void 0:x.contains(I))&&A(k,T)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[S,x,T,A]),f.useEffect(M,[r,M]),ec(x,N),ec(g.content,N),o.jsx(Zq,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:bt(i),onThumbPointerUp:bt(a),onThumbPositionChange:M,onThumbPointerDown:bt(l),children:o.jsx(we.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:se(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),b.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(j))}),onPointerMove:se(t.onPointerMove,E),onPointerUp:se(t.onPointerUp,j=>{const k=j.target;k.hasPointerCapture(j.pointerId)&&k.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),jm="ScrollAreaThumb",JA=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=QA(jm,t.__scopeScrollArea);return o.jsx(Gt,{present:n||s.hasThumb,children:o.jsx(eW,{ref:e,...r})})}),eW=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Tr(jm,n),a=QA(jm,n),{onThumbPositionChange:l}=a,c=ke(e,m=>a.onThumbChange(m)),u=f.useRef(void 0),h=ng(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=i.viewport;if(m){const p=()=>{if(h(),!u.current){const g=rW(m,l);u.current=g,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[i.viewport,h,l]),o.jsx(we.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:se(t.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),x=m.clientX-g.left,y=m.clientY-g.top;a.onThumbPointerDown({x,y})}),onPointerUp:se(t.onPointerUp,a.onThumbPointerUp)})});JA.displayName=jm;var ib="ScrollAreaCorner",ZA=f.forwardRef((t,e)=>{const n=Tr(ib,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(tW,{...t,ref:e}):null});ZA.displayName=ib;var tW=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Tr(ib,n),[i,a]=f.useState(0),[l,c]=f.useState(0),u=!!(i&&l);return ec(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),ec(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?o.jsx(we.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Cm(t){return t?parseInt(t,10):0}function eR(t,e){const n=t/e;return isNaN(n)?0:n}function tg(t){const e=eR(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function nW(t,e,n,r="ltr"){const s=tg(n),i=s/2,a=e||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return tR([c,u],m)(t)}function nE(t,e,n="ltr"){const r=tg(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=wv(t,c);return tR([0,a],[0,l])(u)}function tR(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function nR(t,e){return t>0&&t<e}var rW=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function ng(t,e){const n=bt(t),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function ec(t,e){const n=bt(e);zt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var rR=HA,sW=KA,oW=ZA;const sR=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(rR,{ref:r,className:U("relative overflow-hidden",t),...n,children:[o.jsx(sW,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(oR,{}),o.jsx(oW,{})]}));sR.displayName=rR.displayName;const oR=f.forwardRef(({className:t,orientation:e="vertical",...n},r)=>o.jsx(sb,{ref:r,orientation:e,className:U("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:o.jsx(JA,{className:"relative flex-1 rounded-full bg-border"})}));oR.displayName=sb.displayName;const iW=vd("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function on({className:t,variant:e,...n}){return o.jsx("div",{className:U(iW({variant:e}),t),...n})}function aW(){const{user:t}=ut(),{toast:e}=ao(),[n,r]=f.useState([]),[s,i]=f.useState([]),[a,l]=f.useState(0),[c,u]=f.useState(!1),[h,m]=f.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));f.useEffect(()=>{if(!t)return;const w=qn(Zt(be,"clan_requests"),tr("leaderId","==",t.uid),tr("status","==","pending")),S=Dn(w,M=>{const N=M.docs.map(E=>({id:E.id,...E.data()}));console.log("Notification requests for user",t.uid,":",N),i(N)}),T=qn(Zt(be,"activities"),ra("createdAt","desc"),gl(20)),A=Dn(T,M=>{const E=M.docs.map(j=>({id:j.id,...j.data()})).filter(j=>{if(!j.userId||j.userId===t.uid)return!1;if(j.type==="clan_invite"||j.visibility==="private")return j.relatedUserId===t.uid;if(j.emailDomain&&t.email){const k=t.email.split("@")[1];if(j.emailDomain!==k)return!1}return!0});r(E)});return()=>{S(),A()}},[t]),f.useEffect(()=>{const w=n.filter(S=>new Date(S.createdAt).getTime()>h).length;l(w+s.length)},[n,s,h]),f.useEffect(()=>{if(!t)return;const w=async()=>{try{const T=new Date;T.setHours(T.getHours()-24);const A=Zt(be,"activities"),M=qn(A,tr("createdAt","<",T.toISOString())),N=await xl(M),E=N.docs.map(V=>rl(V.ref));await Promise.all(E),N.docs.length>0&&console.log(`Cleaned up ${N.docs.length} old activities`);const j=new Date;j.setDate(j.getDate()-7);const k=Zt(be,"clan_requests"),I=qn(k,tr("createdAt","<",j.toISOString())),D=await xl(I),P=D.docs.map(V=>rl(V.ref));await Promise.all(P),D.docs.length>0&&console.log(`Cleaned up ${D.docs.length} old clan requests`)}catch(T){console.error("Error cleaning up old data:",T)}};w();const S=setInterval(w,60*60*1e3);return()=>clearInterval(S)},[t]);const p=w=>{if(u(w),w){const S=Date.now();m(S),localStorage.setItem("lastNotificationRead",S.toString())}},g=async w=>{try{const S=Ae(be,"study_squads",w.clanId);await Vs(S,{members:Qp(w.requesterId)}),await rl(Ae(be,"clan_requests",w.id)),await Jl(Zt(be,"activities"),{userId:t.uid,userName:t.displayName,userAvatar:t.photoURL,type:"clan_invite",content:`accepted ${w.requesterName} into ${w.clanName}`,relatedUserId:w.requesterId,visibility:"private",createdAt:new Date().toISOString()}),e({title:"Request Accepted",description:`${w.requesterName} has joined your squad.`})}catch(S){console.error(S),e({title:"Error",description:"Failed to accept request",variant:"destructive"})}},x=async w=>{try{await rl(Ae(be,"clan_requests",w)),e({title:"Request Declined",description:"The request has been removed."})}catch(S){console.error(S)}},y=w=>{if(!w)return"";const S=new Date(w),A=(new Date().getTime()-S.getTime())/1e3;return A<60?"Just now":A<3600?`${Math.floor(A/60)}m`:A<86400?`${Math.floor(A/3600)}h`:A<604800?`${Math.floor(A/86400)}d`:`${Math.floor(A/604800)}w`},_=w=>{switch(w){case"badge_earned":return o.jsx(Yo,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return o.jsx(_d,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return o.jsx(O0,{className:"h-3 w-3 text-white"});default:return o.jsx(cu,{className:"h-3 w-3 text-white"})}},b=w=>{switch(w){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return o.jsxs(qq,{open:c,onOpenChange:p,children:[o.jsx(Wq,{asChild:!0,children:o.jsxs(ae,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[o.jsx(cu,{className:"h-5 w-5"}),a>0&&o.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),o.jsxs(qA,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),a>0&&o.jsxs(on,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[a," new"]})]}),o.jsx(sR,{className:"h-[300px]",children:n.length>0||s.length>0?o.jsxs("div",{className:"flex flex-col",children:[s.length>0&&o.jsxs("div",{className:"bg-muted/30 pb-2",children:[o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-muted/50",children:"Squad Requests"}),s.map(w=>o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs(bn,{className:"h-10 w-10 border border-border",children:[o.jsx(_n,{src:w.requesterAvatar}),o.jsx(Nn,{children:w.requesterName[0]})]}),o.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:w.requesterName})," ","wants to join"," ",o.jsx("span",{className:"font-semibold text-primary",children:w.clanName})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ae,{size:"sm",className:"h-7 px-2 text-xs bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>g(w),children:[o.jsx(Zi,{className:"h-3 w-3 mr-1"})," Accept"]}),o.jsxs(ae,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>x(w.id),children:[o.jsx(Gr,{className:"h-3 w-3 mr-1"})," Decline"]})]})]})]},w.id))]}),n.length>0&&o.jsxs(o.Fragment,{children:[s.length>0&&o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-muted/50 border-t",children:"Recent Activity"}),n.map(w=>{var S;return o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(bn,{className:"h-10 w-10 border border-border",children:[o.jsx(_n,{src:w.userAvatar||void 0}),o.jsx(Nn,{children:((S=w.userName)==null?void 0:S[0])||"?"})]}),o.jsx("div",{className:U("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",b(w.type)),children:_(w.type)})]}),o.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:w.userName})," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:w.content.replace(w.userName,"").trim()})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:y(w.createdAt)})]}),new Date(w.createdAt).getTime()>h&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},w.id)})]})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[o.jsx("div",{className:"p-3 bg-muted rounded-full",children:o.jsx(cu,{className:"h-6 w-6 opacity-20"})}),o.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function lW({onMobileMenuClick:t}){var y;const{syncClassroom:e,isSyncing:n}=An(),[r]=op(),s=Yp(),{user:i}=ut(),[a,l]=f.useState(!1);f.useEffect(()=>{if(i&&!localStorage.getItem("trace_docs_seen")){l(!0);const b=setTimeout(()=>{l(!1),localStorage.setItem("trace_docs_seen","true")},1e4);return()=>clearTimeout(b)}},[i]);const c=()=>{l(!1),localStorage.setItem("trace_docs_seen","true"),window.location.href="/docs"},u=()=>{console.log("[GLOBAL REFRESH] Clearing all caches..."),Wn.clearAll(),console.log("[GLOBAL REFRESH] Cache cleared. Starting sync..."),e().catch(_=>{console.error("Sync failed:",_)}),setTimeout(()=>{console.log("[GLOBAL REFRESH] Reloading page..."),window.location.reload()},1e3)},h=((y=i==null?void 0:i.email)==null?void 0:y.split("@")[1])||"",p=h&&!["gmail.com","yahoo.com","outlook.com","hotmail.com","live.com","aol.com","icloud.com","protonmail.com","mail.com","zoho.com","yandex.com"].includes(h.toLowerCase())&&!h.endsWith(".com")&&h.includes("."),x={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return o.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center flex-1",children:[s&&o.jsx(ae,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:o.jsx(YT,{className:"h-5 w-5"})}),o.jsx("span",{className:"md:hidden font-medium text-lg",children:x}),!s&&p&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(t6,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:h})]})]}),o.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[o.jsx(aW,{}),o.jsxs(Jo,{open:a,children:[o.jsx(Zo,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",onClick:c,title:"Documentation",children:o.jsx(em,{className:"w-5 h-5"})})}),o.jsx(Ws,{side:"bottom",className:"max-w-xs",children:o.jsx("p",{className:"text-sm",children:"New to Trace? Check out our documentation to learn all features!"})})]}),o.jsx(ae,{variant:"ghost",size:"icon",onClick:u,disabled:n,className:U(n&&"animate-spin"),title:"Refresh Everything",children:o.jsx(ca,{className:"w-5 h-5"})})]})]})}var iR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rE=Oe.createContext&&Oe.createContext(iR),cW=["attr","size","title"];function uW(t,e){if(t==null)return{};var n=dW(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tm.apply(this,arguments)}function sE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sE(Object(n),!0).forEach(function(r){hW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hW(t,e,n){return e=fW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fW(t){var e=mW(t,"string");return typeof e=="symbol"?e:e+""}function mW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aR(t){return t&&t.map((e,n)=>Oe.createElement(e.tag,km({key:n},e.attr),aR(e.child)))}function ab(t){return e=>Oe.createElement(pW,Tm({attr:km({},t.attr)},e),aR(t.child))}function pW(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=uW(t,cW),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Oe.createElement("svg",Tm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:km(km({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Oe.createElement("title",null,i),t.children)};return rE!==void 0?Oe.createElement(rE.Consumer,null,n=>e(n)):e(iR)}function lR(t){return ab({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function gW(t){return ab({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const xW=[{icon:gW,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:s6,title:"Kanban Board",description:"Visual assignment tracking."},{icon:qL,title:"Linear Timeline",description:"Chronological deadline view."},{icon:WL,title:"Performance Metrics",description:"Grade & workload analytics."}];function yW(){const{signInWithGoogle:t,loading:e,error:n}=ut();return o.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),o.jsx("header",{className:"px-10 py-8 z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",o.jsx("br",{}),o.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),o.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),o.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:xW.map(r=>o.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[o.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),o.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),o.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),o.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),o.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[o.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),o.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[o.jsx(ur,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",o.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),o.jsxs(ae,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[o.jsx(lR,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[o.jsx(ur,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:n})]})]}),o.jsx("div",{className:"pt-8 border-t border-zinc-100",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(u6,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),o.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),o.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[o.jsx("span",{children:" 2024 Trace Inc."}),o.jsxs("div",{className:"flex gap-6",children:[o.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function vW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const rg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function lb(t){return"nodeType"in t}function Ln(t){var e,n;return t?xc(t)?t:lb(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function cb(t){const{Document:e}=Ln(t);return t instanceof e}function qd(t){return xc(t)?!1:t instanceof Ln(t).HTMLElement}function cR(t){return t instanceof Ln(t).SVGElement}function yc(t){return t?xc(t)?t.document:lb(t)?cb(t)?t:qd(t)||cR(t)?t.ownerDocument:document:document:document}const Jr=rg?f.useLayoutEffect:f.useEffect;function sg(t){const e=f.useRef(t);return Jr(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function wW(){const t=f.useRef(null),e=f.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Qu(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return Jr(()=>{n.current!==t&&(n.current=t)},e),n}function Wd(t,e){const n=f.useRef();return f.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Im(t){const e=sg(t),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Am(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let Ax={};function Hd(t,e){return f.useMemo(()=>{if(e)return e;const n=Ax[t]==null?0:Ax[t]+1;return Ax[t]=n,t+"-"+n},[t,e])}function uR(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const vl=uR(1),Yu=uR(-1);function bW(t){return"clientX"in t&&"clientY"in t}function og(t){if(!t)return!1;const{KeyboardEvent:e}=Ln(t.target);return e&&t instanceof e}function _W(t){if(!t)return!1;const{TouchEvent:e}=Ln(t.target);return e&&t instanceof e}function Rm(t){if(_W(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return bW(t)?{x:t.clientX,y:t.clientY}:null}const oo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[oo.Translate.toString(t),oo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),oE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function NW(t){return t.matches(oE)?t:t.querySelector(oE)}const SW={display:"none"};function EW(t){let{id:e,value:n}=t;return Oe.createElement("div",{id:e,style:SW},n)}function jW(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Oe.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function CW(){const[t,e]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const dR=f.createContext(null);function TW(t){const e=f.useContext(dR);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function kW(){const[t]=f.useState(()=>new Set),e=f.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[f.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const IW={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},AW={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function RW(t){let{announcements:e=AW,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=IW}=t;const{announce:i,announcement:a}=CW(),l=Hd("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),TW(f.useMemo(()=>({onDragStart(m){let{active:p}=m;i(e.onDragStart({active:p}))},onDragMove(m){let{active:p,over:g}=m;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(m){let{active:p,over:g}=m;i(e.onDragOver({active:p,over:g}))},onDragEnd(m){let{active:p,over:g}=m;i(e.onDragEnd({active:p,over:g}))},onDragCancel(m){let{active:p,over:g}=m;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Oe.createElement(Oe.Fragment,null,Oe.createElement(EW,{id:r,value:s.draggable}),Oe.createElement(jW,{id:l,announcement:a}));return n?br.createPortal(h,n):h}var Bt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Bt||(Bt={}));function Pm(){}function Dm(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function hR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Zr=Object.freeze({x:0,y:0});function fR(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function PW(t,e){const n=Rm(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function mR(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function DW(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function iE(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function pR(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function aE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const gR=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=aE(e,e.left,e.top),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=fR(aE(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(mR)},MW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=iE(e),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=iE(c),h=s.reduce((p,g,x)=>p+fR(u[x],g),0),m=Number((h/4).toFixed(4));i.push({id:l,data:{droppableContainer:a,value:m}})}}return i.sort(mR)};function OW(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=a*l,m=h/(c+u-h);return Number(m.toFixed(4))}return 0}const LW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=OW(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(DW)};function VW(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function xR(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Zr}function FW(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const zW=FW(1);function yR(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function UW(t,e,n){const r=yR(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:l}=r,c=t.left-a-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:h,height:m,top:u,right:c+h,bottom:u+m,left:c}}const $W={ignoreTransform:!1};function vc(t,e){e===void 0&&(e=$W);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=Ln(t).getComputedStyle(t);u&&(n=UW(n,u,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:c}}function lE(t){return vc(t,{ignoreTransform:!0})}function BW(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function qW(t,e){return e===void 0&&(e=Ln(t).getComputedStyle(t)),e.position==="fixed"}function WW(t,e){e===void 0&&(e=Ln(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function ig(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(cb(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!qd(s)||cR(s)||n.includes(s))return n;const i=Ln(t).getComputedStyle(s);return s!==t&&WW(s,i)&&n.push(s),qW(s,i)?n:r(s.parentNode)}return t?r(t):n}function vR(t){const[e]=ig(t,1);return e??null}function Rx(t){return!rg||!t?null:xc(t)?t:lb(t)?cb(t)||t===yc(t).scrollingElement?window:qd(t)?t:null:null}function wR(t){return xc(t)?t.scrollX:t.scrollLeft}function bR(t){return xc(t)?t.scrollY:t.scrollTop}function bv(t){return{x:wR(t),y:bR(t)}}var Jt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Jt||(Jt={}));function _R(t){return!rg||!t?!1:t===document.scrollingElement}function NR(t){const e={x:0,y:0},n=_R(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const HW={x:.2,y:.2};function GW(t,e,n,r,s){let{top:i,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=HW);const{isTop:u,isBottom:h,isLeft:m,isRight:p}=NR(t),g={x:0,y:0},x={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+y.height?(g.y=Jt.Backward,x.y=r*Math.abs((e.top+y.height-i)/y.height)):!h&&c>=e.bottom-y.height&&(g.y=Jt.Forward,x.y=r*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(g.x=Jt.Forward,x.x=r*Math.abs((e.right-y.width-l)/y.width)):!m&&a<=e.left+y.width&&(g.x=Jt.Backward,x.x=r*Math.abs((e.left+y.width-a)/y.width)),{direction:g,speed:x}}function KW(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function SR(t){return t.reduce((e,n)=>vl(e,bv(n)),Zr)}function XW(t){return t.reduce((e,n)=>e+wR(n),0)}function QW(t){return t.reduce((e,n)=>e+bR(n),0)}function ER(t,e){if(e===void 0&&(e=vc),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);vR(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const YW=[["x",["left","right"],XW],["y",["top","bottom"],QW]];class ub{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ig(n),s=SR(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of YW)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function JW(t){const{EventTarget:e}=Ln(t);return t instanceof e?t:yc(t)}function Px(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var gr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(gr||(gr={}));function cE(t){t.preventDefault()}function ZW(t){t.stopPropagation()}var Ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ge||(Ge={}));const jR={start:[Ge.Space,Ge.Enter],cancel:[Ge.Esc],end:[Ge.Space,Ge.Enter,Ge.Tab]},eH=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ge.Right:return{...n,x:n.x+25};case Ge.Left:return{...n,x:n.x-25};case Ge.Down:return{...n,y:n.y+25};case Ge.Up:return{...n,y:n.y-25}}};class ag{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new vu(yc(n)),this.windowListeners=new vu(Ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(gr.Resize,this.handleCancel),this.windowListeners.add(gr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(gr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&ER(r),n(Zr)}handleKeyDown(e){if(og(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=jR,coordinateGetter:a=eH,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Zr;this.referenceCoordinates||(this.referenceCoordinates=h);const m=a(e,{active:n,context:r.current,currentCoordinates:h});if(m){const p=Yu(m,h),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const y of x){const _=e.code,{isTop:b,isRight:w,isLeft:S,isBottom:T,maxScroll:A,minScroll:M}=NR(y),N=KW(y),E={x:Math.min(_===Ge.Right?N.right-N.width/2:N.right,Math.max(_===Ge.Right?N.left:N.left+N.width/2,m.x)),y:Math.min(_===Ge.Down?N.bottom-N.height/2:N.bottom,Math.max(_===Ge.Down?N.top:N.top+N.height/2,m.y))},j=_===Ge.Right&&!w||_===Ge.Left&&!S,k=_===Ge.Down&&!T||_===Ge.Up&&!b;if(j&&E.x!==m.x){const I=y.scrollLeft+p.x,D=_===Ge.Right&&I<=A.x||_===Ge.Left&&I>=M.x;if(D&&!p.y){y.scrollTo({left:I,behavior:l});return}D?g.x=y.scrollLeft-I:g.x=_===Ge.Right?y.scrollLeft-A.x:y.scrollLeft-M.x,g.x&&y.scrollBy({left:-g.x,behavior:l});break}else if(k&&E.y!==m.y){const I=y.scrollTop+p.y,D=_===Ge.Down&&I<=A.y||_===Ge.Up&&I>=M.y;if(D&&!p.x){y.scrollTo({top:I,behavior:l});return}D?g.y=y.scrollTop-I:g.y=_===Ge.Down?y.scrollTop-A.y:y.scrollTop-M.y,g.y&&y.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,vl(Yu(m,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ag.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=jR,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function uE(t){return!!(t&&"distance"in t)}function dE(t){return!!(t&&"delay"in t)}class db{constructor(e,n,r){var s;r===void 0&&(r=JW(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=yc(a),this.documentListeners=new vu(this.document),this.listeners=new vu(r),this.windowListeners=new vu(Ln(a)),this.initialCoordinates=(s=Rm(i))!=null?s:Zr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(gr.Resize,this.handleCancel),this.windowListeners.add(gr.DragStart,cE),this.windowListeners.add(gr.VisibilityChange,this.handleCancel),this.windowListeners.add(gr.ContextMenu,cE),this.documentListeners.add(gr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(uE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(gr.Click,ZW,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(gr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=Rm(e))!=null?n:Zr,u=Yu(s,c);if(!r&&l){if(uE(l)){if(l.tolerance!=null&&Px(u,l.tolerance))return this.handleCancel();if(Px(u,l.distance))return this.handleStart()}if(dE(l)&&Px(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const tH={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lg extends db{constructor(e){const{event:n}=e,r=yc(n.target);super(e,tH,r)}}lg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const nH={move:{name:"mousemove"},end:{name:"mouseup"}};var _v;(function(t){t[t.RightClick=2]="RightClick"})(_v||(_v={}));class rH extends db{constructor(e){super(e,nH,yc(e.event.target))}}rH.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===_v.RightClick?!1:(r==null||r({event:n}),!0)}}];const Dx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class sH extends db{constructor(e){super(e,Dx)}static setup(){return window.addEventListener(Dx.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Dx.move.name,e)};function e(){}}}sH.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var wu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wu||(wu={}));var Mm;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mm||(Mm={}));function oH(t){let{acceleration:e,activator:n=wu.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=Mm.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:m,threshold:p}=t;const g=aH({delta:m,disabled:!i}),[x,y]=wW(),_=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),w=f.useMemo(()=>{switch(n){case wu.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case wu.DraggableRect:return s}},[n,s,c]),S=f.useRef(null),T=f.useCallback(()=>{const M=S.current;if(!M)return;const N=_.current.x*b.current.x,E=_.current.y*b.current.y;M.scrollBy(N,E)},[]),A=f.useMemo(()=>l===Mm.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const M of A){if((r==null?void 0:r(M))===!1)continue;const N=u.indexOf(M),E=h[N];if(!E)continue;const{direction:j,speed:k}=GW(M,E,w,e,p);for(const I of["x","y"])g[I][j[I]]||(k[I]=0,j[I]=0);if(k.x>0||k.y>0){y(),S.current=M,x(T,a),_.current=k,b.current=j;return}}_.current={x:0,y:0},b.current={x:0,y:0},y()},[e,T,r,y,i,a,JSON.stringify(w),JSON.stringify(g),x,u,A,h,JSON.stringify(p)])}const iH={x:{[Jt.Backward]:!1,[Jt.Forward]:!1},y:{[Jt.Backward]:!1,[Jt.Forward]:!1}};function aH(t){let{delta:e,disabled:n}=t;const r=Am(e);return Wd(s=>{if(n||!r||!s)return iH;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Jt.Backward]:s.x[Jt.Backward]||i.x===-1,[Jt.Forward]:s.x[Jt.Forward]||i.x===1},y:{[Jt.Backward]:s.y[Jt.Backward]||i.y===-1,[Jt.Forward]:s.y[Jt.Forward]||i.y===1}}},[n,e,r])}function lH(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Wd(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function cH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var Ju;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ju||(Ju={}));var Nv;(function(t){t.Optimized="optimized"})(Nv||(Nv={}));const hE=new Map;function uH(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,h=f.useRef(t),m=_(),p=Qu(m),g=f.useCallback(function(b){b===void 0&&(b=[]),!p.current&&a(w=>w===null?b:w.concat(b.filter(S=>!w.includes(S))))},[p]),x=f.useRef(null),y=Wd(b=>{if(m&&!n)return hE;if(!b||b===hE||h.current!==t||i!=null){const w=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const T=S.node.current,A=T?new ub(c(T),T):null;S.rect.current=A,A&&w.set(S.id,A)}return w}return b},[t,i,n,m,c]);return f.useEffect(()=>{h.current=t},[t]),f.useEffect(()=>{m||g()},[n,m]),f.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),f.useEffect(()=>{m||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},l))},[l,m,g,...r]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case Ju.Always:return!1;case Ju.BeforeDragging:return n;default:return!n}}}function hb(t,e){return Wd(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function dH(t,e){return hb(t,e)}function hH(t){let{callback:e,disabled:n}=t;const r=sg(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function cg(t){let{callback:e,disabled:n}=t;const r=sg(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function fH(t){return new ub(vc(t),t)}function fE(t,e,n){e===void 0&&(e=fH);const[r,s]=f.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=hH({callback(c){if(t)for(const u of c){const{type:h,target:m}=u;if(h==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=cg({callback:i});return Jr(()=>{i(),t?(l==null||l.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[t]),r}function mH(t){const e=hb(t);return xR(t,e)}const mE=[];function pH(t){const e=f.useRef(t),n=Wd(r=>t?r&&r!==mE&&t&&e.current&&t.parentNode===e.current.parentNode?r:ig(t):mE,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function gH(t){const[e,n]=f.useState(null),r=f.useRef(t),s=f.useCallback(i=>{const a=Rx(i.target);a&&n(l=>l?(l.set(a,bv(a)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=r.current;if(t!==i){a(i);const l=t.map(c=>{const u=Rx(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,bv(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const u=Rx(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>vl(i,a),Zr):SR(t):Zr,[t,e])}function pE(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const r=t!==Zr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Yu(t,n.current):Zr}function xH(t){f.useEffect(()=>{if(!rg)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function yH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function CR(t){return f.useMemo(()=>t?BW(t):null,[t])}const gE=[];function vH(t,e){e===void 0&&(e=vc);const[n]=t,r=CR(n?Ln(n):null),[s,i]=f.useState(gE);function a(){i(()=>t.length?t.map(c=>_R(c)?r:new ub(e(c),c)):gE)}const l=cg({callback:a});return Jr(()=>{l==null||l.disconnect(),a(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function TR(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return qd(e)?e:t}function wH(t){let{measure:e}=t;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:h}of u)if(qd(h)){r(m=>{const p=e(h);return m?{...m,width:p.width,height:p.height}:p});break}},[e]),i=cg({callback:s}),a=f.useCallback(u=>{const h=TR(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Im(a);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const bH=[{sensor:lg,options:{}},{sensor:ag,options:{}}],_H={current:{}},bf={draggable:{measure:lE},droppable:{measure:lE,strategy:Ju.WhileDragging,frequency:Nv.Optimized},dragOverlay:{measure:vc}};class bu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const NH={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bf,measureDroppableContainers:Pm,windowRect:null,measuringScheduled:!1},kR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pm,draggableNodes:new Map,over:null,measureDroppableContainers:Pm},Gd=f.createContext(kR),IR=f.createContext(NH);function SH(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bu}}}function EH(t,e){switch(e.type){case Bt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Bt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Bt.DragEnd:case Bt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new bu(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Bt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new bu(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case Bt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new bu(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function jH(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(Gd),i=Am(r),a=Am(n==null?void 0:n.id);return f.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!og(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const m=NW(h);if(m){m.focus();break}}})}},[r,e,s,a,i]),null}function AR(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function CH(t){return f.useMemo(()=>({draggable:{...bf.draggable,...t==null?void 0:t.draggable},droppable:{...bf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...bf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function TH(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=f.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Jr(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),m=xR(h,r);if(a||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=vR(u);p&&p.scrollBy({top:m.y,left:m.x})}},[e,a,l,r,n])}const ug=f.createContext({...Zr,scaleX:1,scaleY:1});var Co;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Co||(Co={}));const RR=f.memo(function(e){var n,r,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:h=bH,collisionDetection:m=LW,measuring:p,modifiers:g,...x}=e;const y=f.useReducer(EH,void 0,SH),[_,b]=y,[w,S]=kW(),[T,A]=f.useState(Co.Uninitialized),M=T===Co.Initialized,{draggable:{active:N,nodes:E,translate:j},droppable:{containers:k}}=_,I=N!=null?E.get(N):null,D=f.useRef({initial:null,translated:null}),P=f.useMemo(()=>{var Ke;return N!=null?{id:N,data:(Ke=I==null?void 0:I.data)!=null?Ke:_H,rect:D}:null},[N,I]),V=f.useRef(null),[re,Z]=f.useState(null),[te,$]=f.useState(null),O=Qu(x,Object.values(x)),L=Hd("DndDescribedBy",a),B=f.useMemo(()=>k.getEnabled(),[k]),W=CH(p),{droppableRects:K,measureDroppableContainers:le,measuringScheduled:oe}=uH(B,{dragging:M,dependencies:[j.x,j.y],config:W.droppable}),ce=lH(E,N),F=f.useMemo(()=>te?Rm(te):null,[te]),Y=Ii(),ue=dH(ce,W.draggable.measure);TH({activeNode:N!=null?E.get(N):null,config:Y.layoutShiftCompensation,initialRect:ue,measure:W.draggable.measure});const J=fE(ce,W.draggable.measure,ue),ie=fE(ce?ce.parentElement:null),de=f.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=k.getNodeFor((n=de.current.over)==null?void 0:n.id),qe=wH({measure:W.dragOverlay.measure}),pt=(r=qe.nodeRef.current)!=null?r:ce,tt=M?(s=qe.rect)!=null?s:J:null,st=!!(qe.nodeRef.current&&qe.rect),jn=mH(st?null:J),Ze=CR(pt?Ln(pt):null),ot=pH(M?Te??ce:null),We=vH(ot),ts=AR(g,{transform:{x:j.x-jn.x,y:j.y-jn.y,scaleX:1,scaleY:1},activatorEvent:te,active:P,activeNodeRect:J,containerNodeRect:ie,draggingNodeRect:tt,over:de.current.over,overlayNodeRect:qe.rect,scrollableAncestors:ot,scrollableAncestorRects:We,windowRect:Ze}),Ci=F?vl(F,j):null,Ti=gH(ot),Ts=pE(Ti),uo=pE(Ti,[J]),kr=vl(ts,Ts),Fn=tt?zW(tt,ts):null,ks=P&&Fn?m({active:P,collisionRect:Fn,droppableRects:K,droppableContainers:B,pointerCoordinates:Ci}):null,Ia=pR(ks,"id"),[zn,ho]=f.useState(null),ns=st?ts:vl(ts,uo),ki=VW(ns,(i=zn==null?void 0:zn.rect)!=null?i:null,J),Is=f.useRef(null),fr=f.useCallback((Ke,Kt)=>{let{sensor:It,options:H}=Kt;if(V.current==null)return;const ge=E.get(V.current);if(!ge)return;const ve=Ke.nativeEvent,ee=new It({active:V.current,activeNode:ge,event:ve,options:H,context:de,onAbort(_e){if(!E.get(_e))return;const{onDragAbort:Ve}=O.current,Xe={id:_e};Ve==null||Ve(Xe),w({type:"onDragAbort",event:Xe})},onPending(_e,Se,Ve,Xe){if(!E.get(_e))return;const{onDragPending:He}=O.current,dt={id:_e,constraint:Se,initialCoordinates:Ve,offset:Xe};He==null||He(dt),w({type:"onDragPending",event:dt})},onStart(_e){const Se=V.current;if(Se==null)return;const Ve=E.get(Se);if(!Ve)return;const{onDragStart:Xe}=O.current,Pe={activatorEvent:ve,active:{id:Se,data:Ve.data,rect:D}};br.unstable_batchedUpdates(()=>{Xe==null||Xe(Pe),A(Co.Initializing),b({type:Bt.DragStart,initialCoordinates:_e,active:Se}),w({type:"onDragStart",event:Pe}),Z(Is.current),$(ve)})},onMove(_e){b({type:Bt.DragMove,coordinates:_e})},onEnd:ye(Bt.DragEnd),onCancel:ye(Bt.DragCancel)});Is.current=ee;function ye(_e){return async function(){const{active:Ve,collisions:Xe,over:Pe,scrollAdjustedTranslate:He}=de.current;let dt=null;if(Ve&&He){const{cancelDrop:Fe}=O.current;dt={activatorEvent:ve,active:Ve,collisions:Xe,delta:He,over:Pe},_e===Bt.DragEnd&&typeof Fe=="function"&&await Promise.resolve(Fe(dt))&&(_e=Bt.DragCancel)}V.current=null,br.unstable_batchedUpdates(()=>{b({type:_e}),A(Co.Uninitialized),ho(null),Z(null),$(null),Is.current=null;const Fe=_e===Bt.DragEnd?"onDragEnd":"onDragCancel";if(dt){const At=O.current[Fe];At==null||At(dt),w({type:Fe,event:dt})}})}}},[E]),fo=f.useCallback((Ke,Kt)=>(It,H)=>{const ge=It.nativeEvent,ve=E.get(H);if(V.current!==null||!ve||ge.dndKit||ge.defaultPrevented)return;const ee={active:ve};Ke(It,Kt.options,ee)===!0&&(ge.dndKit={capturedBy:Kt.sensor},V.current=H,fr(It,Kt))},[E,fr]),As=cH(h,fo);xH(h),Jr(()=>{J&&T===Co.Initializing&&A(Co.Initialized)},[J,T]),f.useEffect(()=>{const{onDragMove:Ke}=O.current,{active:Kt,activatorEvent:It,collisions:H,over:ge}=de.current;if(!Kt||!It)return;const ve={active:Kt,activatorEvent:It,collisions:H,delta:{x:kr.x,y:kr.y},over:ge};br.unstable_batchedUpdates(()=>{Ke==null||Ke(ve),w({type:"onDragMove",event:ve})})},[kr.x,kr.y]),f.useEffect(()=>{const{active:Ke,activatorEvent:Kt,collisions:It,droppableContainers:H,scrollAdjustedTranslate:ge}=de.current;if(!Ke||V.current==null||!Kt||!ge)return;const{onDragOver:ve}=O.current,ee=H.get(Ia),ye=ee&&ee.rect.current?{id:ee.id,rect:ee.rect.current,data:ee.data,disabled:ee.disabled}:null,_e={active:Ke,activatorEvent:Kt,collisions:It,delta:{x:ge.x,y:ge.y},over:ye};br.unstable_batchedUpdates(()=>{ho(ye),ve==null||ve(_e),w({type:"onDragOver",event:_e})})},[Ia]),Jr(()=>{de.current={activatorEvent:te,active:P,activeNode:ce,collisionRect:Fn,collisions:ks,droppableRects:K,draggableNodes:E,draggingNode:pt,draggingNodeRect:tt,droppableContainers:k,over:zn,scrollableAncestors:ot,scrollAdjustedTranslate:kr},D.current={initial:tt,translated:Fn}},[P,ce,ks,Fn,E,pt,tt,K,k,zn,ot,kr]),oH({...Y,delta:j,draggingRect:Fn,pointerCoordinates:Ci,scrollableAncestors:ot,scrollableAncestorRects:We});const Aa=f.useMemo(()=>({active:P,activeNode:ce,activeNodeRect:J,activatorEvent:te,collisions:ks,containerNodeRect:ie,dragOverlay:qe,draggableNodes:E,droppableContainers:k,droppableRects:K,over:zn,measureDroppableContainers:le,scrollableAncestors:ot,scrollableAncestorRects:We,measuringConfiguration:W,measuringScheduled:oe,windowRect:Ze}),[P,ce,J,te,ks,ie,qe,E,k,K,zn,le,ot,We,W,oe,Ze]),Rs=f.useMemo(()=>({activatorEvent:te,activators:As,active:P,activeNodeRect:J,ariaDescribedById:{draggable:L},dispatch:b,draggableNodes:E,over:zn,measureDroppableContainers:le}),[te,As,P,J,b,L,E,zn,le]);return Oe.createElement(dR.Provider,{value:S},Oe.createElement(Gd.Provider,{value:Rs},Oe.createElement(IR.Provider,{value:Aa},Oe.createElement(ug.Provider,{value:ki},u)),Oe.createElement(jH,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Oe.createElement(RW,{...l,hiddenTextDescribedById:L}));function Ii(){const Ke=(re==null?void 0:re.autoScrollEnabled)===!1,Kt=typeof c=="object"?c.enabled===!1:c===!1,It=M&&!Ke&&!Kt;return typeof c=="object"?{...c,enabled:It}:{enabled:It}}}),kH=f.createContext(null),xE="button",IH="Draggable";function AH(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Hd(IH),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:m,over:p}=f.useContext(Gd),{role:g=xE,roleDescription:x="draggable",tabIndex:y=0}=s??{},_=(c==null?void 0:c.id)===e,b=f.useContext(_?ug:kH),[w,S]=Im(),[T,A]=Im(),M=yH(a,e),N=Qu(n);Jr(()=>(m.set(e,{id:e,key:i,node:w,activatorNode:T,data:N}),()=>{const j=m.get(e);j&&j.key===i&&m.delete(e)}),[m,e]);const E=f.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":r,"aria-pressed":_&&g===xE?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,g,y,_,x,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:_,listeners:r?void 0:M,node:w,over:p,setNodeRef:S,setActivatorNodeRef:A,transform:b}}function PR(){return f.useContext(IR)}const RH="Droppable",PH={timeout:25};function DR(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Hd(RH),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(Gd),h=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),g=f.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:_}={...PH,...s},b=Qu(y??r),w=f.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},_)},[_]),S=cg({callback:w,disabled:x||!a}),T=f.useCallback((E,j)=>{S&&(j&&(S.unobserve(j),m.current=!1),E&&S.observe(E))},[S]),[A,M]=Im(T),N=Qu(e);return f.useEffect(()=>{!S||!A.current||(S.disconnect(),m.current=!1,S.observe(A.current))},[A,S]),f.useEffect(()=>(l({type:Bt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:A,rect:p,data:N}}),()=>l({type:Bt.UnregisterDroppable,key:i,id:r})),[r]),f.useEffect(()=>{n!==h.current.disabled&&(l({type:Bt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:p,isOver:(c==null?void 0:c.id)===r,node:A,over:c,setNodeRef:M}}function DH(t){let{animation:e,children:n}=t;const[r,s]=f.useState(null),[i,a]=f.useState(null),l=Am(n);return!n&&!r&&l&&s(l),Jr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Oe.createElement(Oe.Fragment,null,n,r?f.cloneElement(r,{ref:a}):null)}const MH={x:0,y:0,scaleX:1,scaleY:1};function OH(t){let{children:e}=t;return Oe.createElement(Gd.Provider,{value:kR},Oe.createElement(ug.Provider,{value:MH},e))}const LH={position:"fixed",touchAction:"none"},VH=t=>og(t)?"transform 250ms ease":void 0,FH=f.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:l,style:c,transform:u,transition:h=VH}=t;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...LH,width:l.width,height:l.height,top:l.top,left:l.left,transform:oo.Transform.toString(m),transformOrigin:s&&r?PW(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Oe.createElement(n,{className:a,style:p,ref:e},i)}),zH=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:a}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},UH=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:oo.Transform.toString(e)},{transform:oo.Transform.toString(n)}]},$H={duration:250,easing:"ease",keyframes:UH,sideEffects:zH({styles:{active:{opacity:"0"}}})};function BH(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return sg((i,a)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=TR(a);if(!u)return;const{transform:h}=Ln(a).getComputedStyle(a),m=yR(h);if(!m)return;const p=typeof e=="function"?e:qH(e);return ER(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function qH(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...$H,...t};return i=>{let{active:a,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},m={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...m},g=s({...u,active:a,dragOverlay:l,transform:{initial:c,final:p}}),[x]=g,y=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(y))return;const _=r==null?void 0:r({active:a,dragOverlay:l,...u}),b=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{b.onfinish=()=>{_==null||_(),w()}})}}let yE=0;function WH(t){return f.useMemo(()=>{if(t!=null)return yE++,yE},[t])}const HH=Oe.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggableNodes:x,droppableContainers:y,dragOverlay:_,over:b,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:T,windowRect:A}=PR(),M=f.useContext(ug),N=WH(m==null?void 0:m.id),E=AR(a,{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:_.rect,over:b,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:T,transform:M,windowRect:A}),j=hb(p),k=BH({config:r,draggableNodes:x,droppableContainers:y,measuringConfiguration:w}),I=j?_.setRef:void 0;return Oe.createElement(OH,null,Oe.createElement(DH,{animation:k},m&&N?Oe.createElement(FH,{key:N,id:m.id,ref:I,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:j,style:{zIndex:u,...s},transform:E},n):null))});function fb(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function GH(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Bh(t){return t!==null&&t>=0}function KH(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XH(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const MR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=fb(e,r,n),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},qh={scaleX:1,scaleY:1},OR=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...qh}:null}const c=QH(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-c,...qh}:s<n&&s>=a?{x:0,y:l.height+c,...qh}:{x:0,y:0,...qh}};function QH(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const LR="Sortable",VR=Oe.createContext({activeIndex:-1,containerId:LR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:MR,disabled:{draggable:!1,droppable:!1}});function FR(t){let{children:e,id:n,items:r,strategy:s=MR,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=PR(),m=Hd(LR,n),p=l.rect!==null,g=f.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),x=a!=null,y=a?g.indexOf(a.id):-1,_=u?g.indexOf(u.id):-1,b=f.useRef(g),w=!KH(g,b.current),S=_!==-1&&y===-1||w,T=XH(i);Jr(()=>{w&&x&&h(g)},[w,g,x,h]),f.useEffect(()=>{b.current=g},[g]);const A=f.useMemo(()=>({activeIndex:y,containerId:m,disabled:T,disableTransforms:S,items:g,overIndex:_,useDragOverlay:p,sortedRects:GH(g,c),strategy:s}),[y,m,T.draggable,T.droppable,S,g,_,c,p,s]);return Oe.createElement(VR.Provider,{value:A},e)}const YH=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return fb(n,r,s).indexOf(e)},JH=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===a?!1:n?!0:a!==s&&e===c},ZH={duration:200,easing:"ease"},zR="transform",eG=oo.Transition.toString({property:zR,duration:0,easing:"linear"}),tG={roleDescription:"sortable"};function nG(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=f.useState(null),l=f.useRef(n);return Jr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=vc(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),f.useEffect(()=>{i&&a(null)},[i]),i}function UR(t){let{animateLayoutChanges:e=JH,attributes:n,disabled:r,data:s,getNewIndex:i=YH,id:a,strategy:l,resizeObserverConfig:c,transition:u=ZH}=t;const{items:h,containerId:m,activeIndex:p,disabled:g,disableTransforms:x,sortedRects:y,overIndex:_,useDragOverlay:b,strategy:w}=f.useContext(VR),S=rG(r,g),T=h.indexOf(a),A=f.useMemo(()=>({sortable:{containerId:m,index:T,items:h},...s}),[m,s,T,h]),M=f.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:N,node:E,isOver:j,setNodeRef:k}=DR({id:a,data:A,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:I,activatorEvent:D,activeNodeRect:P,attributes:V,setNodeRef:re,listeners:Z,isDragging:te,over:$,setActivatorNodeRef:O,transform:L}=AH({id:a,data:A,attributes:{...tG,...n},disabled:S.draggable}),B=vW(k,re),W=!!I,K=W&&!x&&Bh(p)&&Bh(_),le=!b&&te,oe=le&&K?L:null,F=K?oe??(l??w)({rects:y,activeNodeRect:P,activeIndex:p,overIndex:_,index:T}):null,Y=Bh(p)&&Bh(_)?i({id:a,items:h,activeIndex:p,overIndex:_}):T,ue=I==null?void 0:I.id,J=f.useRef({activeId:ue,items:h,newIndex:Y,containerId:m}),ie=h!==J.current.items,de=e({active:I,containerId:m,isDragging:te,isSorting:W,id:a,index:T,items:h,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:u,wasDragging:J.current.activeId!=null}),Te=nG({disabled:!de,index:T,node:E,rect:N});return f.useEffect(()=>{W&&J.current.newIndex!==Y&&(J.current.newIndex=Y),m!==J.current.containerId&&(J.current.containerId=m),h!==J.current.items&&(J.current.items=h)},[W,Y,m,h]),f.useEffect(()=>{if(ue===J.current.activeId)return;if(ue!=null&&J.current.activeId==null){J.current.activeId=ue;return}const pt=setTimeout(()=>{J.current.activeId=ue},50);return()=>clearTimeout(pt)},[ue]),{active:I,activeIndex:p,attributes:V,data:A,rect:N,index:T,newIndex:Y,items:h,isOver:j,isSorting:W,isDragging:te,listeners:Z,node:E,overIndex:_,over:$,setNodeRef:B,setActivatorNodeRef:O,setDroppableNodeRef:k,setDraggableNodeRef:re,transform:Te??F,transition:qe()};function qe(){if(Te||ie&&J.current.newIndex===T)return eG;if(!(le&&!og(D)||!u)&&(W||de))return oo.Transition.toString({...u,property:zR})}}function rG(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Om(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const sG=[Ge.Down,Ge.Right,Ge.Up,Ge.Left],oG=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:l}}=e;if(sG.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];i.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const p=s.get(m.id);if(p)switch(t.code){case Ge.Down:r.top<p.top&&c.push(m);break;case Ge.Up:r.top>p.top&&c.push(m);break;case Ge.Left:r.left>p.left&&c.push(m);break;case Ge.Right:r.left<p.left&&c.push(m);break}});const u=MW({active:n,collisionRect:r,droppableRects:s,droppableContainers:c,pointerCoordinates:null});let h=pR(u,"id");if(h===(a==null?void 0:a.id)&&u.length>1&&(h=u[1].id),h!=null){const m=i.get(n.id),p=i.get(h),g=p?s.get(p.id):null,x=p==null?void 0:p.node.current;if(x&&g&&m&&p){const _=ig(x).some((M,N)=>l[N]!==M),b=$R(m,p),w=iG(m,p),S=_||!b?{x:0,y:0}:{x:w?r.width-g.width:0,y:w?r.height-g.height:0},T={x:g.left,y:g.top};return S.x&&S.y?T:Yu(T,S)}}}};function $R(t,e){return!Om(t)||!Om(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function iG(t,e){return!Om(t)||!Om(e)||!$R(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}function et({className:t,...e}){return o.jsx("div",{className:U("animate-pulse rounded-md bg-muted",t),...e})}const Le=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Le.displayName="Card";const it=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex flex-col space-y-1.5 p-6",t),...e}));it.displayName="CardHeader";const ct=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-2xl font-semibold leading-none tracking-tight",t),...e}));ct.displayName="CardTitle";const kn=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-sm text-muted-foreground",t),...e}));kn.displayName="CardDescription";const Je=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("p-6 pt-0",t),...e}));Je.displayName="CardContent";const mb=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex items-center p-6 pt-0",t),...e}));mb.displayName="CardFooter";function aG(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],a=r.toISOString().split("T")[0];return s===i?"Today":s===a?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function lG(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function BR({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:a,transform:l,transition:c,isDragging:u}=UR({id:t.id}),h={transform:oo.Transform.toString(l),transition:c},m=lG(t.dueDate),p=m!==null&&m<=1&&m>=0,g=t.systemStatus==="overdue"||m!==null&&m<0;return o.jsx(Le,{ref:a,style:h,className:U("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",g&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(on,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),o.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:x=>x.stopPropagation(),children:o.jsx(GT,{className:"h-4 w-4 text-muted-foreground"})})]}),o.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(ws,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:U(g&&"text-destructive",p&&!g&&"text-foreground font-medium"),children:aG(t.dueDate)}),g&&o.jsx(ur,{className:"h-3.5 w-3.5 text-destructive"}),p&&!g&&o.jsx(L0,{className:"h-3.5 w-3.5 text-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(Vl,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Vl,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Submitted"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:n&&o.jsx(ea,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}const pb=f.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));pb.displayName="Textarea";var cG="Separator",vE="horizontal",uG=["horizontal","vertical"],qR=f.forwardRef((t,e)=>{const{decorative:n,orientation:r=vE,...s}=t,i=dG(r)?r:vE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(we.div,{"data-orientation":i,...l,...s,ref:e})});qR.displayName=cG;function dG(t){return uG.includes(t)}var WR=qR;const ir=f.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>o.jsx(WR,{ref:s,decorative:n,orientation:e,className:U("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ir.displayName=WR.displayName;var gb="Dialog",[HR,GR]=un(gb),[hG,es]=HR(gb),KR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=f.useRef(null),c=f.useRef(null),[u=!1,h]=Hr({prop:r,defaultProp:s,onChange:i});return o.jsx(hG,{scope:e,triggerRef:l,contentRef:c,contentId:Nr(),titleId:Nr(),descriptionId:Nr(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:a,children:n})};KR.displayName=gb;var XR="DialogTrigger",QR=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(XR,n),i=ke(e,s.triggerRef);return o.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vb(s.open),...r,ref:i,onClick:se(t.onClick,s.onOpenToggle)})});QR.displayName=XR;var xb="DialogPortal",[fG,YR]=HR(xb,{forceMount:void 0}),JR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=es(xb,e);return o.jsx(fG,{scope:e,forceMount:n,children:f.Children.map(r,a=>o.jsx(Gt,{present:n||i.open,children:o.jsx(_a,{asChild:!0,container:s,children:a})}))})};JR.displayName=xb;var Lm="DialogOverlay",ZR=f.forwardRef((t,e)=>{const n=YR(Lm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=es(Lm,t.__scopeDialog);return i.modal?o.jsx(Gt,{present:r||i.open,children:o.jsx(pG,{...s,ref:e})}):null});ZR.displayName=Lm;var mG=li("DialogOverlay.RemoveScroll"),pG=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(Lm,n);return o.jsx($d,{as:mG,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(we.div,{"data-state":vb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),xa="DialogContent",eP=f.forwardRef((t,e)=>{const n=YR(xa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=es(xa,t.__scopeDialog);return o.jsx(Gt,{present:r||i.open,children:i.modal?o.jsx(gG,{...s,ref:e}):o.jsx(xG,{...s,ref:e})})});eP.displayName=xa;var gG=f.forwardRef((t,e)=>{const n=es(xa,t.__scopeDialog),r=f.useRef(null),s=ke(e,n.contentRef,r);return f.useEffect(()=>{const i=r.current;if(i)return Zp(i)},[]),o.jsx(tP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:se(t.onFocusOutside,i=>i.preventDefault())})}),xG=f.forwardRef((t,e)=>{const n=es(xa,t.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(tP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),tP=f.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=es(xa,n),c=f.useRef(null),u=ke(e,c);return Jp(),o.jsxs(o.Fragment,{children:[o.jsx(Ud,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(ba,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":vb(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(vG,{titleId:l.titleId}),o.jsx(bG,{contentRef:c,descriptionId:l.descriptionId})]})]})}),yb="DialogTitle",nP=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(yb,n);return o.jsx(we.h2,{id:s.titleId,...r,ref:e})});nP.displayName=yb;var rP="DialogDescription",sP=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(rP,n);return o.jsx(we.p,{id:s.descriptionId,...r,ref:e})});sP.displayName=rP;var oP="DialogClose",iP=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(oP,n);return o.jsx(we.button,{type:"button",...r,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});iP.displayName=oP;function vb(t){return t?"open":"closed"}var aP="DialogTitleWarning",[yG,lP]=J3(aP,{contentName:xa,titleName:yb,docsSlug:"dialog"}),vG=({titleId:t})=>{const e=lP(aP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},wG="DialogDescriptionWarning",bG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lP(wG).contentName}}.`;return f.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},wb=KR,cP=QR,bb=JR,Kd=ZR,Xd=eP,Qd=nP,Yd=sP,dg=iP;const _G=wb,NG=bb,uP=f.forwardRef(({className:t,...e},n)=>o.jsx(Kd,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));uP.displayName=Kd.displayName;const SG=vd("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),dP=f.forwardRef(({side:t="right",className:e,children:n,...r},s)=>o.jsxs(NG,{children:[o.jsx(uP,{}),o.jsxs(Xd,{ref:s,className:U(SG({side:t}),e),...r,children:[n,o.jsxs(dg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Gr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dP.displayName=Xd.displayName;const hP=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});hP.displayName="SheetHeader";const fP=f.forwardRef(({className:t,...e},n)=>o.jsx(Qd,{ref:n,className:U("text-lg font-semibold text-foreground",t),...e}));fP.displayName=Qd.displayName;const EG=f.forwardRef(({className:t,...e},n)=>o.jsx(Yd,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));EG.displayName=Yd.displayName;function jG(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function CG(t){return t?` at ${t}`:""}function TG({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),o.jsx("div",{className:"space-y-4",children:r.map((s,i)=>o.jsxs("div",{className:"flex items-start gap-3 relative",children:[o.jsx("div",{className:U("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&o.jsx(Vl,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:U("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function kG({note:t,onUpdate:e,onDelete:n}){const[r,s]=f.useState(!1),[i,a]=f.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return o.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&o.jsx(tm,{className:"h-3.5 w-3.5 fill-current text-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:o.jsx(tm,{className:U("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:o.jsx(i6,{className:"h-3.5 w-3.5"})}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:o.jsx(f6,{className:"h-3.5 w-3.5"})})]})]}),r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(pb,{value:i,onChange:c=>a(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),o.jsxs(ae,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[o.jsx(U0,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function _b({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:a}=An(),[l,c]=f.useState(""),[u,h]=f.useState(!1);if(!t)return null;const m=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return o.jsx(_G,{open:e,onOpenChange:n,children:o.jsxs(dP,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[o.jsx(hP,{className:"space-y-4",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx(on,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),o.jsx(fP,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(ws,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:U(p&&"text-destructive"),children:[jG(t.dueDate),CG(t.dueTime)]}),p&&o.jsx(ur,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?o.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):o.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),o.jsx(ir,{}),t.description&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),o.jsx(ir,{})]}),o.jsx(TG,{assignment:t}),o.jsx(ir,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&o.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[o.jsx(a6,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(pb,{value:l,onChange:x=>c(x.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),o.jsxs(ae,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[o.jsx(U0,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),m.length>0?o.jsx("div",{className:"space-y-2",children:m.map(x=>o.jsx(kG,{note:x,onUpdate:(y,_)=>i(x.id,y,_),onDelete:()=>a(x.id,t.id)},x.id))}):!u&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&o.jsxs(o.Fragment,{children:[o.jsx(ir,{}),o.jsxs(ae,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[o.jsx(My,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function wc(){const{refreshAccessToken:t,signOut:e}=ut(),[n,r]=f.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),o.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:o.jsx(ca,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),o.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),o.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[o.jsx(ae,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?o.jsxs(o.Fragment,{children:[o.jsx(ca,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:"Signing In..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(lR,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),o.jsx(ae,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),o.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[o.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function IG({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:a}=DR({id:t});return o.jsxs("div",{ref:a,className:U("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[o.jsx("h3",{className:"text-sm font-medium",children:e}),o.jsx(on,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),o.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:o.jsx(FR,{items:n.map(l=>l.id),strategy:OR,children:n.length>0?n.map(l=>{var c;return o.jsx(BR,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):o.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function AG(){return o.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx(et,{className:"h-5 w-24"}),o.jsx(et,{className:"h-5 w-8"})]}),o.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>o.jsx(et,{className:"h-32 w-full"},e))})]},t))})}function RG(){var E;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:a,error:l}=An();ut();const[c,u]=f.useState(null),[h,m]=f.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return o.jsx(wc,{});if(n)return o.jsx(AG,{});const p=f.useRef(null),[g,x]=f.useState(!1),y=f.useRef({x:0,left:0}),_=hR(Dm(lg,{activationConstraint:{distance:8}}),Dm(ag)),b=t(),w=h?i.find(j=>j.id===h):null,S=j=>{m(j.active.id)},T=j=>{const{active:k,over:I}=j;if(m(null),!I)return;const D=k.id,P=I.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(P)){const V=i.find(re=>re.id===D);V&&V.systemStatus!==P&&(P==="in_progress"?e(D,"in_progress"):e(D,"backlog"))}},A=j=>{j.button===2&&p.current&&(j.preventDefault(),x(!0),y.current={x:j.pageX,left:p.current.scrollLeft})},M=f.useCallback(j=>{if(!g||!p.current)return;j.preventDefault();const I=(j.pageX-y.current.x)*1.5;p.current.scrollLeft=y.current.left-I},[g]),N=f.useCallback(()=>{x(!1)},[]);return f.useEffect(()=>(g?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",N)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",N)}),[g,M,N]),o.jsxs(o.Fragment,{children:[l&&l.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ur,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:j=>{j.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs(RR,{sensors:_,collisionDetection:gR,onDragStart:S,onDragEnd:T,children:[o.jsxs("div",{className:"relative h-full flex flex-col",children:[o.jsx("div",{ref:p,className:U("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",g?"cursor-grabbing":"cursor-grab"),onMouseDown:A,onContextMenu:j=>j.preventDefault(),children:b.map(j=>o.jsx(IG,{id:j.id,title:j.title,assignments:j.assignments,onCardClick:u,notes:s},j.id))}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Vy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),o.jsx(HH,{children:w&&o.jsx(BR,{assignment:w,isDragging:!0,hasNotes:(((E=s.get(w.id))==null?void 0:E.length)||0)>0})})]}),o.jsx(_b,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function Nb(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var PG=[" ","Enter","ArrowUp","ArrowDown"],DG=[" ","Enter"],Jd="Select",[hg,fg,MG]=cp(Jd),[bc,wY]=un(Jd,[MG,bi]),mg=bi(),[OG,Ei]=bc(Jd),[LG,VG]=bc(Jd),mP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:m,disabled:p,required:g,form:x}=t,y=mg(e),[_,b]=f.useState(null),[w,S]=f.useState(null),[T,A]=f.useState(!1),M=gc(u),[N=!1,E]=Hr({prop:r,defaultProp:s,onChange:i}),[j,k]=Hr({prop:a,defaultProp:l,onChange:c}),I=f.useRef(null),D=_?x||!!_.closest("form"):!0,[P,V]=f.useState(new Set),re=Array.from(P).map(Z=>Z.props.value).join(";");return o.jsx(xp,{...y,children:o.jsxs(OG,{required:g,scope:e,trigger:_,onTriggerChange:b,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:T,onValueNodeHasChildrenChange:A,contentId:Nr(),value:j,onValueChange:k,open:N,onOpenChange:E,dir:M,triggerPointerDownPosRef:I,disabled:p,children:[o.jsx(hg.Provider,{scope:e,children:o.jsx(LG,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(Z=>{V(te=>new Set(te).add(Z))},[]),onNativeOptionRemove:f.useCallback(Z=>{V(te=>{const $=new Set(te);return $.delete(Z),$})},[]),children:n})}),D?o.jsxs(FP,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:m,value:j,onChange:Z=>k(Z.target.value),disabled:p,form:x,children:[j===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},re):null]})})};mP.displayName=Jd;var pP="SelectTrigger",gP=f.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=mg(n),a=Ei(pP,n),l=a.disabled||r,c=ke(e,a.onTriggerChange),u=fg(n),h=f.useRef("touch"),[m,p,g]=zP(y=>{const _=u().filter(S=>!S.disabled),b=_.find(S=>S.value===a.value),w=UP(_,y,b);w!==void 0&&a.onValueChange(w.value)}),x=y=>{l||(a.onOpenChange(!0),g()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx(Sd,{asChild:!0,...i,children:o.jsx(we.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":VP(a.value)?"":void 0,...s,ref:c,onClick:se(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&x(y)}),onPointerDown:se(s.onPointerDown,y=>{h.current=y.pointerType;const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:se(s.onKeyDown,y=>{const _=m.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(_&&y.key===" ")&&PG.includes(y.key)&&(x(),y.preventDefault())})})})});gP.displayName=pP;var xP="SelectValue",yP=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=Ei(xP,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,m=ke(e,c.onValueNodeChange);return zt(()=>{u(h)},[u,h]),o.jsx(we.span,{...l,ref:m,style:{pointerEvents:"none"},children:VP(c.value)?o.jsx(o.Fragment,{children:a}):i})});yP.displayName=xP;var FG="SelectIcon",vP=f.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(we.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});vP.displayName=FG;var zG="SelectPortal",wP=t=>o.jsx(_a,{asChild:!0,...t});wP.displayName=zG;var ya="SelectContent",bP=f.forwardRef((t,e)=>{const n=Ei(ya,t.__scopeSelect),[r,s]=f.useState();if(zt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?br.createPortal(o.jsx(_P,{scope:t.__scopeSelect,children:o.jsx(hg.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(NP,{...t,ref:e})});bP.displayName=ya;var Ar=10,[_P,ji]=bc(ya),UG="SelectContentImpl",$G=li("SelectContent.RemoveScroll"),NP=f.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:_,...b}=t,w=Ei(ya,n),[S,T]=f.useState(null),[A,M]=f.useState(null),N=ke(e,F=>T(F)),[E,j]=f.useState(null),[k,I]=f.useState(null),D=fg(n),[P,V]=f.useState(!1),re=f.useRef(!1);f.useEffect(()=>{if(S)return Zp(S)},[S]),Jp();const Z=f.useCallback(F=>{const[Y,...ue]=D().map(de=>de.ref.current),[J]=ue.slice(-1),ie=document.activeElement;for(const de of F)if(de===ie||(de==null||de.scrollIntoView({block:"nearest"}),de===Y&&A&&(A.scrollTop=0),de===J&&A&&(A.scrollTop=A.scrollHeight),de==null||de.focus(),document.activeElement!==ie))return},[D,A]),te=f.useCallback(()=>Z([E,S]),[Z,E,S]);f.useEffect(()=>{P&&te()},[P,te]);const{onOpenChange:$,triggerPointerDownPosRef:O}=w;f.useEffect(()=>{if(S){let F={x:0,y:0};const Y=J=>{var ie,de;F={x:Math.abs(Math.round(J.pageX)-(((ie=O.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(J.pageY)-(((de=O.current)==null?void 0:de.y)??0))}},ue=J=>{F.x<=10&&F.y<=10?J.preventDefault():S.contains(J.target)||$(!1),document.removeEventListener("pointermove",Y),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",ue,{capture:!0})}}},[S,$,O]),f.useEffect(()=>{const F=()=>$(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[$]);const[L,B]=zP(F=>{const Y=D().filter(ie=>!ie.disabled),ue=Y.find(ie=>ie.ref.current===document.activeElement),J=UP(Y,F,ue);J&&setTimeout(()=>J.ref.current.focus())}),W=f.useCallback((F,Y,ue)=>{const J=!re.current&&!ue;(w.value!==void 0&&w.value===Y||J)&&(j(F),J&&(re.current=!0))},[w.value]),K=f.useCallback(()=>S==null?void 0:S.focus(),[S]),le=f.useCallback((F,Y,ue)=>{const J=!re.current&&!ue;(w.value!==void 0&&w.value===Y||J)&&I(F)},[w.value]),oe=r==="popper"?Sv:SP,ce=oe===Sv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:_}:{};return o.jsx(_P,{scope:n,content:S,viewport:A,onViewportChange:M,itemRefCallback:W,selectedItem:E,onItemLeave:K,itemTextRefCallback:le,focusSelectedItem:te,selectedItemText:k,position:r,isPositioned:P,searchRef:L,children:o.jsx($d,{as:$G,allowPinchZoom:!0,children:o.jsx(Ud,{asChild:!0,trapped:w.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:se(s,F=>{var Y;(Y=w.trigger)==null||Y.focus({preventScroll:!0}),F.preventDefault()}),children:o.jsx(ba,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:F=>F.preventDefault(),...b,...ce,onPlaced:()=>V(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:se(b.onKeyDown,F=>{const Y=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!Y&&F.key.length===1&&B(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let J=D().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(F.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const ie=F.target,de=J.indexOf(ie);J=J.slice(de+1)}setTimeout(()=>Z(J)),F.preventDefault()}})})})})})})});NP.displayName=UG;var BG="SelectItemAlignedPosition",SP=f.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ei(ya,n),a=ji(ya,n),[l,c]=f.useState(null),[u,h]=f.useState(null),m=ke(e,N=>h(N)),p=fg(n),g=f.useRef(!1),x=f.useRef(!0),{viewport:y,selectedItem:_,selectedItemText:b,focusSelectedItem:w}=a,S=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&_&&b){const N=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),j=i.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(i.dir!=="rtl"){const ie=k.left-E.left,de=j.left-ie,Te=N.left-de,qe=N.width+Te,pt=Math.max(qe,E.width),tt=window.innerWidth-Ar,st=wv(de,[Ar,Math.max(Ar,tt-pt)]);l.style.minWidth=qe+"px",l.style.left=st+"px"}else{const ie=E.right-k.right,de=window.innerWidth-j.right-ie,Te=window.innerWidth-N.right-de,qe=N.width+Te,pt=Math.max(qe,E.width),tt=window.innerWidth-Ar,st=wv(de,[Ar,Math.max(Ar,tt-pt)]);l.style.minWidth=qe+"px",l.style.right=st+"px"}const I=p(),D=window.innerHeight-Ar*2,P=y.scrollHeight,V=window.getComputedStyle(u),re=parseInt(V.borderTopWidth,10),Z=parseInt(V.paddingTop,10),te=parseInt(V.borderBottomWidth,10),$=parseInt(V.paddingBottom,10),O=re+Z+P+$+te,L=Math.min(_.offsetHeight*5,O),B=window.getComputedStyle(y),W=parseInt(B.paddingTop,10),K=parseInt(B.paddingBottom,10),le=N.top+N.height/2-Ar,oe=D-le,ce=_.offsetHeight/2,F=_.offsetTop+ce,Y=re+Z+F,ue=O-Y;if(Y<=le){const ie=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const de=u.clientHeight-y.offsetTop-y.offsetHeight,Te=Math.max(oe,ce+(ie?K:0)+de+te),qe=Y+Te;l.style.height=qe+"px"}else{const ie=I.length>0&&_===I[0].ref.current;l.style.top="0px";const Te=Math.max(le,re+y.offsetTop+(ie?W:0)+ce)+ue;l.style.height=Te+"px",y.scrollTop=Y-le+y.offsetTop}l.style.margin=`${Ar}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,y,_,b,i.dir,r]);zt(()=>S(),[S]);const[T,A]=f.useState();zt(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const M=f.useCallback(N=>{N&&x.current===!0&&(S(),w==null||w(),x.current=!1)},[S,w]);return o.jsx(WG,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:o.jsx(we.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});SP.displayName=BG;var qG="SelectPopperPosition",Sv=f.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Ar,...i}=t,a=mg(n);return o.jsx(yp,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sv.displayName=qG;var[WG,Sb]=bc(ya,{}),Ev="SelectViewport",EP=f.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ji(Ev,n),a=Sb(Ev,n),l=ke(e,i.onViewportChange),c=f.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(hg.Slot,{scope:n,children:o.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:se(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&m){const g=Math.abs(c.current-h.scrollTop);if(g>0){const x=window.innerHeight-Ar*2,y=parseFloat(m.style.minHeight),_=parseFloat(m.style.height),b=Math.max(y,_);if(b<x){const w=b+g,S=Math.min(x,w),T=w-S;m.style.height=S+"px",m.style.bottom==="0px"&&(h.scrollTop=T>0?T:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});EP.displayName=Ev;var jP="SelectGroup",[HG,GG]=bc(jP),KG=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Nr();return o.jsx(HG,{scope:n,id:s,children:o.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:e})})});KG.displayName=jP;var CP="SelectLabel",TP=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=GG(CP,n);return o.jsx(we.div,{id:s.id,...r,ref:e})});TP.displayName=CP;var Vm="SelectItem",[XG,kP]=bc(Vm),IP=f.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=Ei(Vm,n),c=ji(Vm,n),u=l.value===r,[h,m]=f.useState(i??""),[p,g]=f.useState(!1),x=ke(e,w=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,w,r,s)}),y=Nr(),_=f.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(XG,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:f.useCallback(w=>{m(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(hg.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(we.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:x,onFocus:se(a.onFocus,()=>g(!0)),onBlur:se(a.onBlur,()=>g(!1)),onClick:se(a.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:se(a.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:se(a.onPointerDown,w=>{_.current=w.pointerType}),onPointerMove:se(a.onPointerMove,w=>{var S;_.current=w.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:se(a.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:se(a.onKeyDown,w=>{var T;((T=c.searchRef)==null?void 0:T.current)!==""&&w.key===" "||(DG.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});IP.displayName=Vm;var Qc="SelectItemText",AP=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=Ei(Qc,n),l=ji(Qc,n),c=kP(Qc,n),u=VG(Qc,n),[h,m]=f.useState(null),p=ke(e,b=>m(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),g=h==null?void 0:h.textContent,x=f.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:_}=u;return zt(()=>(y(x),()=>_(x)),[y,_,x]),o.jsxs(o.Fragment,{children:[o.jsx(we.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?br.createPortal(i.children,a.valueNode):null]})});AP.displayName=Qc;var RP="SelectItemIndicator",PP=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return kP(RP,n).isSelected?o.jsx(we.span,{"aria-hidden":!0,...r,ref:e}):null});PP.displayName=RP;var jv="SelectScrollUpButton",DP=f.forwardRef((t,e)=>{const n=ji(jv,t.__scopeSelect),r=Sb(jv,t.__scopeSelect),[s,i]=f.useState(!1),a=ke(e,r.onScrollButtonChange);return zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(OP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});DP.displayName=jv;var Cv="SelectScrollDownButton",MP=f.forwardRef((t,e)=>{const n=ji(Cv,t.__scopeSelect),r=Sb(Cv,t.__scopeSelect),[s,i]=f.useState(!1),a=ke(e,r.onScrollButtonChange);return zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(OP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});MP.displayName=Cv;var OP=f.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ji("SelectScrollButton",n),a=f.useRef(null),l=fg(n),c=f.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),zt(()=>{var h;const u=l().find(m=>m.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(we.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:se(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:se(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:se(s.onPointerLeave,()=>{c()})})}),QG="SelectSeparator",LP=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(we.div,{"aria-hidden":!0,...r,ref:e})});LP.displayName=QG;var Tv="SelectArrow",YG=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=mg(n),i=Ei(Tv,n),a=ji(Tv,n);return i.open&&a.position==="popper"?o.jsx(vp,{...s,...r,ref:e}):null});YG.displayName=Tv;function VP(t){return t===""||t===void 0}var FP=f.forwardRef((t,e)=>{const{value:n,...r}=t,s=f.useRef(null),i=ke(e,s),a=Nb(n);return f.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const m=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(yd,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});FP.displayName="BubbleSelect";function zP(t){const e=bt(t),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function UP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=JG(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function JG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var ZG=mP,$P=gP,eK=yP,tK=vP,nK=wP,BP=bP,rK=EP,qP=TP,WP=IP,sK=AP,oK=PP,HP=DP,GP=MP,KP=LP;const Zu=ZG,ed=eK,tc=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs($P,{ref:r,className:U("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(tK,{asChild:!0,children:o.jsx(qT,{className:"h-4 w-4 opacity-50"})})]}));tc.displayName=$P.displayName;const XP=f.forwardRef(({className:t,...e},n)=>o.jsx(HP,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(KL,{className:"h-4 w-4"})}));XP.displayName=HP.displayName;const QP=f.forwardRef(({className:t,...e},n)=>o.jsx(GP,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(qT,{className:"h-4 w-4"})}));QP.displayName=GP.displayName;const nc=f.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(nK,{children:o.jsxs(BP,{ref:s,className:U("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(XP,{}),o.jsx(rK,{className:U("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(QP,{})]})}));nc.displayName=BP.displayName;const iK=f.forwardRef(({className:t,...e},n)=>o.jsx(qP,{ref:n,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));iK.displayName=qP.displayName;const Pt=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(WP,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(oK,{children:o.jsx(Zi,{className:"h-4 w-4"})})}),o.jsx(sK,{children:e})]}));Pt.displayName=WP.displayName;const aK=f.forwardRef(({className:t,...e},n)=>o.jsx(KP,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));aK.displayName=KP.displayName;function lK(t){return ab({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function cK(){return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(et,{className:"h-10 w-40"}),o.jsx(et,{className:"h-10 w-40"})]}),[1,2,3].map(t=>o.jsxs("div",{className:"space-y-3",children:[o.jsx(et,{className:"h-6 w-32"}),o.jsx("div",{className:"space-y-2",children:[1,2].map(e=>o.jsx(et,{className:"h-16 w-full"},e))})]},t))]})}const Wh={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},uK=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},dK=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Mx=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,wE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function hK(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=An();ut();const[a,l]=f.useState(null),[c,u]=f.useState(null),[h,m]=f.useState(null),[p,g]=f.useState("timeline"),[x,y]=f.useState(1),[_,b]=f.useState(!1),[w]=f.useState([]);if(n)return o.jsx(cK,{});const S=f.useMemo(()=>{let j=[...s,...w];return a&&(j=j.filter(k=>k.courseId===a)),c&&(j=j.filter(k=>k.systemStatus===c)),j},[s,w,a,c]),T=()=>{l(null),u(null)},A=a||c,M=()=>{const j=f.useRef(null),[k,I]=f.useState(!1),D=f.useRef({x:0,left:0}),V=60*x,{earliestDate:re,latestDate:Z,initialScrollPosition:te}=f.useMemo(()=>{const F=new Date;F.setHours(0,0,0,0);let Y=new Date,ue=new Date;if(S.length>0){const tt=S.flatMap(st=>{const jn=[];return st.dueDate&&jn.push(new Date(st.dueDate)),st.createdAt&&jn.push(new Date(st.createdAt)),jn});tt.length>0&&(Y=new Date(Math.min(...tt.map(st=>st.getTime()))),ue=new Date(Math.max(...tt.map(st=>st.getTime()))))}const J=new Date(Y);J.setDate(J.getDate()-30);const ie=new Date(ue);ie.setDate(ie.getDate()+30);let de=F;const Te=S.filter(tt=>tt.dueDate&&new Date(tt.dueDate)>=F).sort((tt,st)=>new Date(tt.dueDate).getTime()-new Date(st.dueDate).getTime());Te.length>0&&(de=new Date(Te[0].dueDate));const pt=Math.ceil((de.getTime()-J.getTime())/(1e3*3600*24))*V+V/2-window.innerWidth/2;return{earliestDate:J,latestDate:ie,initialScrollPosition:Math.max(0,pt)}},[S,V]),$=f.useMemo(()=>uK(re,Z),[re,Z]);f.useEffect(()=>{j.current&&(j.current.scrollLeft=te)},[te]);const O=F=>{F.button===2&&j.current&&(F.preventDefault(),I(!0),D.current={x:F.pageX,left:j.current.scrollLeft})},L=f.useCallback(F=>{if(!k||!j.current)return;F.preventDefault();const ue=(F.pageX-D.current.x)*1.5;j.current.scrollLeft=D.current.left-ue},[k]),B=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",L),window.addEventListener("mouseup",B)):(window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",B)),()=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",B)}),[k,L,B]);const[W,K]=f.useState(!1),[le,oe]=f.useState(!1),ce=f.useRef(null);return f.useEffect(()=>{const F=()=>{if(ce.current){const{scrollHeight:ue,clientHeight:J,scrollTop:ie}=ce.current;K(ue>J),oe(ie+J>=ue-10)}};F();const Y=ce.current;return Y==null||Y.addEventListener("scroll",F),window.addEventListener("resize",F),()=>{Y==null||Y.removeEventListener("scroll",F),window.removeEventListener("resize",F)}},[S,_]),o.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[o.jsx("div",{ref:F=>{j.current=F,ce.current=F},className:U("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:O,onContextMenu:F=>F.preventDefault(),children:o.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${$.length*V}px`},children:[o.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:$.map((F,Y)=>{const ue=wE(F);return o.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:V},children:[o.jsx("span",{className:U("text-[10px] uppercase font-bold tracking-wider mb-1",ue?"text-foreground":"text-muted-foreground"),children:F.toLocaleDateString("en-US",{weekday:"narrow"})}),o.jsx("span",{className:U("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ue?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:F.getDate()}),o.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),o.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(F=>F.dueDate).length*40)}px`:`${Math.max(400,S.filter(F=>F.dueDate).length*60)}px`},children:[o.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:$.map((F,Y)=>{const ue=wE(F);return o.jsx("div",{className:U("flex-shrink-0 h-full border-r border-border relative",ue?"bg-accent/50":""),style:{width:V},children:ue&&o.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),o.jsx("div",{className:U("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(F=>F.dueDate).map(F=>{const Y=e.find(ts=>ts.id===F.courseId),ue=Y==null?void 0:Y.color,J=F.systemStatus==="submitted"||F.systemStatus==="graded",ie=F.createdAt?new Date(F.createdAt):new Date,de=new Date(F.dueDate),Te=(ie.getTime()-re.getTime())/(1e3*3600*24),qe=(de.getTime()-ie.getTime())/(1e3*3600*24),pt=Math.max(0,Te*V),tt=Math.max(V,qe*V),st={left:`${pt}px`,width:`${tt}px`,minWidth:_?"100px":"140px",backgroundColor:J?void 0:ue,borderColor:J?void 0:ue?"rgba(0,0,0,0.1)":void 0};Wh[F.systemStatus]||Wh.backlog;const jn="bg-green-100/80 border-green-300 text-green-800",Ze="bg-card border shadow-sm "+(ue?"text-slate-900":"text-foreground"),ot=_?"h-8":"h-12",We=_?"h-9":"h-14";return o.jsx("div",{className:U("relative group",We),children:o.jsxs("div",{onClick:()=>m(F),className:U("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",ot,_?"px-2":"px-3",J?jn:Ze),style:st,children:[o.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:o.jsxs("span",{className:U("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[F.courseId==="system"&&o.jsx(V0,{className:U("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),J&&o.jsx(Zi,{className:U("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),F.title]})}),!_&&o.jsx("div",{className:"flex items-center justify-between opacity-80",children:o.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:F.courseName})})]})},F.id)})})]})]})}),W&&!le&&S.length>0&&o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[o.jsx(Q_,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),o.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),o.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const F=j.current,Y=(F==null?void 0:F.scrollLeft)||0,ue=(F==null?void 0:F.scrollTop)||0,J=Math.min(2,x+.25);y(J),J>.75&&b(!1),setTimeout(()=>{F&&(F.scrollLeft=Y*(J/x),F.scrollTop=ue)},0)},disabled:x>=2,title:"Zoom In (Normal View)",children:o.jsx(x6,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const F=j.current,Y=(F==null?void 0:F.scrollLeft)||0,ue=(F==null?void 0:F.scrollTop)||0,J=Math.max(.5,x-.25);y(J),J<=.75&&b(!0),setTimeout(()=>{F&&(F.scrollLeft=Y*(J/x),F.scrollTop=ue)},0)},disabled:x<=.5,title:"Zoom Out (Compact View)",children:o.jsx(y6,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[o.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(x*100),"%"]}),_&&o.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Vy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},N=()=>{const j=f.useRef(null),[k,I]=f.useState(!1),D=f.useRef({y:0,top:0}),P=f.useRef({}),[V,re]=f.useState(!1),{startMonth:Z,endMonth:te}=f.useMemo(()=>{let oe=new Date,ce=new Date;if(S.length>0){const ue=S.filter(J=>J.dueDate).map(J=>new Date(J.dueDate));ue.length>0&&(oe=new Date(Math.min(...ue.map(J=>J.getTime()))),ce=new Date(Math.max(...ue.map(J=>J.getTime()))))}const F=new Date(oe);F.setMonth(F.getMonth()-2),F.setDate(1);const Y=new Date(ce);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:F,endMonth:Y}},[S]),$=f.useMemo(()=>dK(Z,te),[Z,te]),O=f.useCallback(()=>{var ue;const oe=Mx(new Date),ce=P.current[oe];if(!ce){re(!0);return}const F=ce.getBoundingClientRect(),Y=(ue=j.current)==null?void 0:ue.getBoundingClientRect();Y&&re(F.bottom<Y.top||F.top>Y.bottom)},[$]);f.useEffect(()=>{const oe=j.current;return oe&&(oe.addEventListener("scroll",O),O()),()=>oe==null?void 0:oe.removeEventListener("scroll",O)},[O]),f.useEffect(()=>{setTimeout(()=>L(),100)},[]);const L=()=>{const oe=Mx(new Date),ce=P.current[oe];ce&&ce.scrollIntoView({behavior:"smooth",block:"center"})},B=oe=>{oe.button===2&&j.current&&(oe.preventDefault(),I(!0),D.current={y:oe.pageY,top:j.current.scrollTop})},W=f.useCallback(oe=>{if(!k||!j.current)return;oe.preventDefault();const F=(oe.pageY-D.current.y)*1.5;j.current.scrollTop=D.current.top-F},[k]),K=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",K)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",K)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",K)}),[k,W,K]);const le=oe=>{const ce=oe.getFullYear(),F=oe.getMonth(),Y=new Date(ce,F,1),ue=new Date(ce,F+1,0),J=[];for(let ie=0;ie<Y.getDay();ie++)J.push({date:new Date(ce,F,-Y.getDay()+1+ie),isCurrentMonth:!1});for(let ie=1;ie<=ue.getDate();ie++)J.push({date:new Date(ce,F,ie),isCurrentMonth:!0});for(;J.length%7!==0;){const ie=J.length-(Y.getDay()+ue.getDate())+1,de=new Date(ce,F+1,ie);J.push({date:de,isCurrentMonth:!1})}return J};return o.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[V&&o.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:o.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[o.jsx(Q_,{size:14})," Jump to Today"]})}),o.jsx("div",{ref:j,className:U("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:oe=>oe.preventDefault(),children:o.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:$.map(oe=>{const ce=le(oe),F=Mx(oe);return o.jsxs("div",{ref:Y=>P.current[F]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[o.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:o.jsx("h3",{className:"text-lg font-bold",children:oe.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),o.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>o.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),o.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:ce.map((Y,ue)=>{const J=S.filter(de=>{if(!de.dueDate)return!1;const Te=new Date(de.dueDate);Te.setHours(0,0,0,0);const qe=new Date(Y.date);return qe.setHours(0,0,0,0),qe.toDateString()===Te.toDateString()}),ie=Y.date.toDateString()===new Date().toDateString();return o.jsxs("div",{className:U("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[o.jsx("span",{className:U("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",ie&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),o.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:J.map(de=>{const Te=Wh[de.systemStatus]||Wh.backlog;return o.jsx("div",{onClick:qe=>{qe.stopPropagation(),m(de)},className:U("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Te.color,Te.border),title:de.title,children:de.title},de.id)})})]},ue)})})]},F)})})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[o.jsx(Vy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(An().error&&An().error.toLowerCase().includes("session")){const{assignments:j,courses:k}=An();if(!j.length&&!k.length)return o.jsx(wc,{})}const{error:E}=An();return o.jsxs(o.Fragment,{children:[E&&E.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ur,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx(Qn,{href:"/auth/refresh",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>g("timeline"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(HL,{className:"h-3.5 w-3.5"}),"Timeline"]}),o.jsxs("button",{onClick:()=>g("calendar"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(Uu,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),o.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[o.jsx(JL,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),o.jsxs(Zu,{value:a||"all",onValueChange:j=>l(j==="all"?null:j),children:[o.jsx(tc,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:o.jsx(ed,{placeholder:"All Courses"})}),o.jsxs(nc,{children:[o.jsx(Pt,{value:"all",children:"All Courses"}),e.map(j=>o.jsx(Pt,{value:j.id,children:j.name},j.id))]})]}),o.jsxs(Zu,{value:c||"all",onValueChange:j=>u(j==="all"?null:j),children:[o.jsx(tc,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:o.jsx(ed,{placeholder:"All Status"})}),o.jsxs(nc,{children:[o.jsx(Pt,{value:"all",children:"All Status"}),o.jsx(Pt,{value:"backlog",children:"Backlog"}),o.jsx(Pt,{value:"in_progress",children:"In Progress"}),o.jsx(Pt,{value:"submitted",children:"Submitted"}),o.jsx(Pt,{value:"graded",children:"Graded"}),o.jsx(Pt,{value:"overdue",children:"Overdue"})]})]}),A&&o.jsxs(ae,{variant:"ghost",size:"sm",onClick:T,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[o.jsx(Gr,{className:"h-3.5 w-3.5 md:mr-1"}),o.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),o.jsx("div",{className:"ml-auto pl-2",children:o.jsx(jd,{children:o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsx(Qn,{href:"/settings/integrations",children:o.jsxs(ae,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[o.jsx(lK,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),o.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),o.jsxs(Ws,{side:"left",className:"max-w-xs",children:[o.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?o.jsx(M,{}):o.jsx(N,{})})]}),o.jsx(_b,{assignment:h,isOpen:!!h,onClose:()=>m(null)})]})}const bE="attendance_configs",vr={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await ln(Ae(be,bE,t),n),Wn.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=Wn.get(e);if(n)return n;const r=Ae(be,bE,t),s=await wn(r);if(s.exists()){const i=s.data();return Wn.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var S,T;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=Wn.get(s);if(i)return i;const a=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:ZZ500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const m=(await u.json()).values;if(!m||m.length<2)throw new Error("Sheet is empty or invalid format.");const p=m[0],g=m.find(A=>{var N;return((N=A[a])==null?void 0:N.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let x=0,y=0;const _=[];for(let A=1;A<p.length;A++){const M=(S=p[A])==null?void 0:S.trim();if(!M)break;const N=(T=g[A])==null?void 0:T.toUpperCase().trim();let E="Unknown";N==="P"||N==="PRESENT"||N==="1"?(E="Present",y++,x++):(N==="A"||N==="ABSENT"||N==="0")&&(E="Absent",x++),E!=="Unknown"&&_.push({date:M,status:E})}const b=x===0?0:Math.round(y/x*100),w={courseId:t,stats:{totalClasses:x,attendedClasses:y,percentage:b},history:_.reverse()};return Wn.set(s,w,60*30),w}},Bs={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:_d,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:ZT,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:Yo,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:fp,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:F0,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:tm,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:Uu,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:O0,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},YP=Object.keys(Bs),JP=Object.freeze(Object.defineProperty({__proto__:null,BADGES:Bs,BADGE_IDS:YP},Symbol.toStringTag,{value:"Module"}));function fK({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=Bs[t],[i,a]=f.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return o.jsx(jd,{delayDuration:0,children:o.jsxs(Jo,{open:i,onOpenChange:a,children:[o.jsx(Zo,{asChild:!0,children:o.jsxs("div",{className:U("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),a(!i)},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o.jsx(l,{className:U(u[e]),strokeWidth:2.5}),r&&o.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),o.jsx(V2,{children:o.jsxs(Ws,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>a(!1),children:[o.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function Yc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],a=i.length;return o.jsxs("div",{className:U("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>o.jsx(fK,{badgeId:l,size:n},l)),a>0&&o.jsx(jd,{delayDuration:0,children:o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",a]})}),o.jsx(V2,{children:o.jsx(Ws,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-xs font-medium",children:((c=Bs[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function mK(){const{user:t}=ut(),[e,n]=f.useState([]),[r,s]=f.useState(0),[i,a]=f.useState(0),[l,c]=f.useState(!0);f.useEffect(()=>{if(!t)return;const m=Dn(Ae(be,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const x=p.data();n(x.badges||[]),s(x.loginStreak||0),a(((g=x.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>m()},[t]);const u=()=>{const m=[];return m.push({badge:Bs["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),m.push({badge:Bs["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),m.push({badge:Bs["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),m.push({badge:Bs["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),m.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return o.jsxs(Le,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ct,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),o.jsx(QT,{className:"h-5 w-5 text-purple-500"})]}),o.jsx(Je,{className:"flex-1 flex flex-col",children:l?o.jsxs("div",{className:"space-y-2",children:[o.jsx(et,{className:"h-8 w-8 rounded-full"}),o.jsx(et,{className:"h-3 w-20"})]}):e.length>0?o.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,o.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),o.jsx(Yc,{badges:e,limit:3,size:"md",className:"mt-2"})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Qn,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):h?o.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?o.jsx(_d,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?o.jsx(fp,{className:"h-5 w-5 text-blue-500"}):o.jsx(Uu,{className:"h-5 w-5 text-emerald-500"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Qn,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Qn,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]})})]})}function pK(){const{user:t}=ut(),[e,n]=f.useState(null),[r,s]=f.useState(!0);return f.useEffect(()=>{if(!t)return;const i=Dn(Ae(be,"leaderboards","all-courses","students",t.uid),a=>{if(a.exists()){const l=a.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),o.jsxs(Le,{className:"flex flex-col h-full","data-testid":"card-streak",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ct,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),o.jsx(_d,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),o.jsx(Je,{className:"flex-1 flex flex-col justify-between",children:r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(et,{className:"h-8 w-16"}),o.jsx(et,{className:"h-3 w-24"})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function gK(){return o.jsxs(Le,{className:"overflow-hidden",children:[o.jsx(it,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(et,{className:"h-4 w-24"}),o.jsx(et,{className:"h-8 w-8 rounded-lg"})]})}),o.jsx(Je,{className:"pt-2",children:o.jsx(et,{className:"h-9 w-16"})})]})}function xK(){return o.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[o.jsx(et,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[o.jsx(et,{className:"h-4 w-[200px]"}),o.jsx(et,{className:"h-4 w-[150px]"})]})]})}function yK({courses:t,assignments:e}){const{user:n}=ut(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(m=>m.id)])),c=[],u=new Map,h=()=>{const m=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(w=>w.id),x=new Set(e.map(w=>w.id)),y=m.filter(w=>{const S=w.email||"",T=w.emailDomain||(S.includes("@")?S.split("@")[1]:""),A=w.enrolledCourseIds||[],M=w.processedAssignmentIds||[],N=p&&T&&p===T,E=g.some(I=>A.includes(I)),k=!T&&M.some(I=>x.has(I));return w.id===n.uid?!0:N&&E||k});y.sort((w,S)=>S.totalXP-w.totalXP);const _=y.length;if(_===0){s(null),a(!1);return}const b=y.findIndex(w=>w.id===n.uid);if(b!==-1){const w=b+1,S=Math.round((_-w+1)/_*100),T=y[b];s({rank:w,total:_,percentile:S,xp:T.totalXP||0,badges:T.badges||[]})}else s(null);a(!1)};return l.forEach(m=>{const p=qn(Zt(be,"leaderboards",m,"students"),ra("totalXP","desc")),g=Dn(p,x=>{x.docs.forEach(y=>{const _=y.data(),b={id:y.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},w=u.get(y.id);(!w||b.totalXP>=w.totalXP)&&u.set(y.id,b)}),h()},x=>{console.error(`Error fetching leaderboard source ${m}:`,x),h()});c.push(g)}),()=>{c.forEach(m=>m())}},[n,t,e]),o.jsxs(Le,{"data-testid":"card-class-rank",className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 group",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ct,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),o.jsx("div",{className:"p-1.5 rounded-md bg-amber-50 dark:bg-amber-900/20 text-amber-500 shadow-sm group-hover:scale-110 transition-transform",children:o.jsx(Yo,{className:"h-4 w-4"})})]}),o.jsx(Je,{className:"flex-1 flex flex-col justify-between pt-0 relative",children:i?o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsx(et,{className:"h-8 w-16"}),o.jsx(et,{className:"h-3 w-24"})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:["#",r.rank]}),o.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["/ ",r.total]})]}),o.jsx("div",{className:"mt-2 space-y-1",children:o.jsx("div",{className:"w-full h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full",style:{width:`${r.percentile}%`}})})}),o.jsxs("div",{className:"mt-2 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wide",children:[r.xp.toLocaleString()," Total XP"]})]})]}),o.jsx("div",{className:"pt-4 mt-auto",children:o.jsx(Qn,{href:"/leaderboard",children:o.jsxs(ae,{variant:"outline",size:"sm",className:"h-8 text-xs w-full border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-800 text-muted-foreground hover:text-foreground",children:["View Leaderboard",o.jsx(M0,{className:"ml-1.5 h-3 w-3"})]})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1 mt-2",children:[o.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),o.jsx(Qn,{href:"/leaderboard",className:"mt-auto",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function vK({courses:t}){const{user:e,accessToken:n}=ut(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){a(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async m=>{try{const p=await vr.getCourseConfig(m.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=vr.extractSheetId(p.sheetUrl);if(!g)return;const x=await vr.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");x&&(c+=x.stats.attendedClasses,u+=x.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const m=Math.round(c/u*100);let p="safe";m<70?p="danger":m<75&&(p="warning"),s({percentage:m,status:p,present:c,total:u})}a(!1)}l()},[t,e,n]),o.jsxs(Le,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full border-emerald-100 dark:border-emerald-900/30 overflow-hidden relative group",children:[o.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:o.jsx(Fy,{className:"w-24 h-24 text-emerald-500"})}),o.jsxs(it,{className:"flex flex-row items-center justify-between gap-2 pb-2 relative z-10",children:[o.jsx(ct,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),o.jsx("div",{className:"p-1.5 rounded-md bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400",children:o.jsx(Fy,{className:"h-4 w-4"})})]}),o.jsx(Je,{className:"relative z-10 flex-1 flex flex-col justify-end",children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx(et,{className:"h-8 w-16"}),o.jsx(et,{className:"h-3 w-24"})]}):r?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:U("text-4xl font-bold tracking-tight",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:r.percentage}),o.jsx("span",{className:"text-xl font-medium text-muted-foreground",children:"%"})]}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsx("div",{className:"w-full h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-1000 ease-out",r.status==="danger"?"bg-red-500":r.status==="warning"?"bg-amber-500":"bg-emerald-500"),style:{width:`${r.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground pt-1",children:[o.jsxs("span",{children:[r.present,"/",r.total," Classes"]}),o.jsx("span",{className:U("font-bold uppercase text-[10px]",r.status==="safe"?"text-emerald-600 dark:text-emerald-400":r.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"),children:r.status==="safe"?"On Track":"Low"})]})]})]}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Data Yet"}),o.jsx("p",{className:"text-[10px] text-muted-foreground/70 leading-snug",children:"Ask your teacher to use Trace for attendance."})]}),o.jsx(Qn,{href:"/attendance",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-8 text-xs w-full bg-transparent border-dashed hover:border-solid hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-600 hover:border-emerald-200 transition-all",children:"Check Details"})})]})})]})}function wK(){return o.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>o.jsx(gK,{},t))}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsx(et,{className:"h-[300px] w-full rounded-xl"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(et,{className:"h-8 w-40"}),[1,2,3].map(t=>o.jsx(xK,{},t))]})]}),o.jsx("div",{className:"space-y-6",children:o.jsx(et,{className:"h-[400px] w-full rounded-xl"})})]})]})}function Hh({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-white dark:bg-zinc-950",iconBg:"bg-zinc-100 dark:bg-zinc-800",iconColor:"text-zinc-600 dark:text-zinc-400",valueColor:"text-zinc-900 dark:text-zinc-50",border:"border-zinc-200 dark:border-zinc-800",ring:"group-hover:ring-zinc-200 dark:group-hover:ring-zinc-800"},warning:{bg:"bg-amber-50/30 dark:bg-amber-950/10",iconBg:"bg-amber-100 dark:bg-amber-900/30",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-400",border:"border-amber-200/60 dark:border-amber-800/60",ring:"group-hover:ring-amber-200 dark:group-hover:ring-amber-800/50"},danger:{bg:"bg-red-50/30 dark:bg-red-950/10",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",valueColor:"text-red-700 dark:text-red-400",border:"border-red-200/60 dark:border-red-800/60",ring:"group-hover:ring-red-200 dark:group-hover:ring-red-800/50"}}[r];return o.jsxs(Le,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:U("group overflow-hidden transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",i.bg,i.border,"hover:ring-1",i.ring),children:[o.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-1 p-3",children:[o.jsx(ct,{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:t}),o.jsx("div",{className:U("p-1.5 rounded-lg transition-all duration-300 group-hover:scale-110",i.iconBg),children:o.jsx(n,{className:U("h-3.5 w-3.5",i.iconColor)})})]}),o.jsx(Je,{className:"p-3 pt-0",children:o.jsx("div",{className:"flex items-baseline gap-2",children:o.jsx("div",{className:U("text-2xl font-bold tracking-tight tabular-nums",i.valueColor),children:e})})})]})}function bK(t,e,n,r){if(t.length<2)return"";const s=t.map((a,l)=>{const c=l/(t.length-1)*e,u=n-a.count/r*n;return[c,u]});let i=`M ${s[0][0]},${s[0][1]}`;for(let a=0;a<s.length-1;a++){const[l,c]=a>0?s[a-1]:s[0],[u,h]=s[a],[m,p]=s[a+1],[g,x]=a<s.length-2?s[a+2]:s[s.length-1],y=u+(m-l)/6,_=h+(p-c)/6,b=m-(g-u)/6,w=p-(x-h)/6;i+=` C ${y},${_} ${b},${w} ${m},${p}`}return i}function _K({data:t}){const e=Math.max(...t.map(a=>a.count),5),n=300,r=100,s=bK(t,n,r,e),i=`${s} L ${n},${r} L 0,${r} Z`;return o.jsxs(Le,{className:"overflow-hidden border-zinc-200 dark:border-zinc-800 shadow-sm",children:[o.jsxs(it,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ct,{className:"text-base font-semibold flex items-center gap-2",children:[o.jsx(ws,{className:"h-4 w-4 text-purple-500"}),"Weekly Workload"]}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl font-bold tabular-nums",children:t.reduce((a,l)=>a+l.count,0)}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Assignments"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Your assignment distribution for the next 7 days"})]}),o.jsxs(Je,{className:"pt-6 relative",children:[o.jsxs("div",{className:"h-40 w-full relative group",children:[o.jsxs("svg",{viewBox:`0 0 ${n} ${r}`,className:"w-full h-full overflow-visible",preserveAspectRatio:"none",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradientArea",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"rgb(168 85 247)",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"rgb(168 85 247)",stopOpacity:"0"})]})}),o.jsx("path",{d:i,fill:"url(#gradientArea)",className:"transition-all duration-500"}),o.jsx("path",{d:s,fill:"none",stroke:"rgb(168 85 247)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm transition-all duration-500"})]}),o.jsx("div",{className:"absolute inset-0 flex justify-between items-end pointer-events-none",children:t.map((a,l)=>{const c=a.count/e*100;return o.jsx("div",{className:"flex flex-col items-center justify-end h-full flex-1 relative group/point",children:o.jsxs("div",{className:"absolute w-full flex justify-center transition-all duration-500",style:{bottom:`${c}%`,marginBottom:"-6px"},children:[o.jsx("div",{className:U("h-3 w-3 rounded-full border-2 border-background transition-transform duration-300 z-10",a.isToday?"bg-purple-600 scale-125 ring-4 ring-purple-500/20":"bg-purple-400 opacity-0 group-hover/point:opacity-100 group-hover/point:scale-125")}),o.jsx("div",{className:U("absolute bottom-full mb-2 bg-foreground text-background text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm opacity-0 group-hover/point:opacity-100 transition-opacity duration-200 pointer-events-auto",a.isToday&&"opacity-100 bg-purple-600 text-white"),children:a.count})]})},l)})})]}),o.jsx("div",{className:"flex justify-between mt-2 px-1",children:t.map((a,l)=>o.jsx("div",{className:"flex-1 text-center",children:o.jsx("span",{className:U("text-[10px] uppercase font-bold tracking-wider transition-colors",a.isToday?"text-purple-600":"text-muted-foreground"),children:a.day})},l))})]})]})}function NK({assignments:t}){const n=[...t].sort((s,i)=>s.systemStatus==="overdue"&&i.systemStatus!=="overdue"?-1:i.systemStatus==="overdue"&&s.systemStatus!=="overdue"||!s.dueDate?1:i.dueDate?new Date(s.dueDate).getTime()-new Date(i.dueDate).getTime():-1),r=s=>{if(s.systemStatus==="overdue")return{label:"Overdue",color:"text-red-500",bg:"bg-red-500/10",border:"border-red-200 dark:border-red-900"};if(s.dueDate){const i=new Date,l=(new Date(s.dueDate).getTime()-i.getTime())/(1e3*60*60);if(l<24)return{label:"Due Soon",color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-200 dark:border-amber-900"};if(l<72)return{label:"Upcoming",color:"text-blue-500",bg:"bg-blue-500/10",border:"border-zinc-100 dark:border-zinc-800"}}return{label:"Backlog",color:"text-muted-foreground",bg:"bg-muted/50",border:"border-zinc-100 dark:border-zinc-800"}};return o.jsxs(Le,{className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm",children:[o.jsxs(it,{className:"pb-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ct,{className:"text-base font-semibold flex items-center gap-2",children:[o.jsx(ur,{className:"h-4 w-4 text-rose-500"}),"Next Actions"]}),o.jsxs(on,{variant:"outline",className:"font-mono text-xs",children:[t.length," pending"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Prioritized by deadline and urgency"})]}),o.jsx(Je,{className:"flex-1 overflow-y-auto pr-2 space-y-3",children:n.length>0?n.map(s=>{const i=r(s),a=s.dueDate?new Date(s.dueDate):null;return o.jsxs("div",{className:U("group flex items-start gap-3 p-3 rounded-xl border transition-all duration-200 hover:shadow-md hover:bg-zinc-50 dark:hover:bg-zinc-900/50 cursor-pointer bg-card",i.border),children:[o.jsx("div",{className:U("w-1 self-stretch rounded-full flex-shrink-0",i.bg.replace("/10",""))}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("h4",{className:"text-sm font-semibold truncate text-foreground group-hover:text-primary transition-colors",children:s.title}),o.jsx("span",{className:U("text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",i.bg,i.color),children:i.label})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(on,{variant:"secondary",className:"text-[10px] px-1 h-5 font-medium bg-zinc-100 dark:bg-zinc-800 text-muted-foreground hover:bg-zinc-200 dark:hover:bg-zinc-700",children:s.courseName}),a&&o.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(L0,{className:"h-3 w-3"}),a.toLocaleDateString(void 0,{month:"short",day:"numeric"}),s.dueTime?`, ${s.dueTime.slice(0,5)}`:""]})]})]}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 -mr-1 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(M0,{className:"h-4 w-4"})})]},s.id)}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-muted-foreground border-2 border-dashed rounded-xl border-zinc-100 dark:border-zinc-800",children:[o.jsx(Vl,{className:"h-10 w-10 mb-3 text-emerald-500/50"}),o.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),o.jsx("p",{className:"text-xs text-muted-foreground/60",children:"No pending actions for now."})]})})]})}function SK({id:t,children:e}){const{attributes:n,listeners:r,setNodeRef:s,transform:i,transition:a,isDragging:l}=UR({id:t}),c={transform:oo.Transform.toString(i),transition:a,opacity:l?.5:1};return o.jsxs("div",{ref:s,style:c,className:"relative group",children:[o.jsx("div",{...n,...r,className:"absolute -left-8 top-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-60 hover:!opacity-100 transition-opacity z-10",children:o.jsx("div",{className:"bg-muted border border-border rounded p-1",children:o.jsx(GT,{className:"h-4 w-4 text-muted-foreground"})})}),e]})}function EK(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:a}=An();ut();const[l,c]=f.useState(null),[u,h]=f.useState(()=>{const y=localStorage.getItem("dashboard_section_order");return y?JSON.parse(y):["metrics","features","charts"]}),m=hR(Dm(lg),Dm(ag,{coordinateGetter:oG})),p=y=>{const{active:_,over:b}=y;b&&_.id!==b.id&&h(w=>{const S=w.indexOf(_.id),T=w.indexOf(b.id),A=fb(w,S,T);return localStorage.setItem("dashboard_section_order",JSON.stringify(A)),A})};if(e)return o.jsx(wK,{});const g=t(),x=r.filter(y=>y.systemStatus!=="graded"&&y.systemStatus!=="submitted");return a&&a.toLowerCase().includes("session")&&!(r.length>0||i.length>0||g.upcoming7Days>0)?o.jsx(wc,{}):o.jsxs(o.Fragment,{children:[a&&a.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ur,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),o.jsx(Qn,{href:"/auth/refresh",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 space-y-6",children:[g.upcoming7Days>0&&o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),o.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:o.jsx(XT,{className:"h-5 w-5"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",o.jsxs(on,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[g.upcoming7Days," ",g.upcoming7Days===1?"task":"tasks"]})]}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",o.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[g.upcoming7Days," assignment",g.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),o.jsx(Qn,{href:"/timeline",children:o.jsxs(ae,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",o.jsx(M0,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),o.jsx(RR,{sensors:m,collisionDetection:gR,onDragEnd:p,children:o.jsx(FR,{items:u,strategy:OR,children:o.jsx("div",{className:"space-y-6",children:u.map(y=>{const _={metrics:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx(Hh,{title:"Due in 3 Days",value:g.upcoming3Days,icon:L0,variant:g.upcoming3Days>3?"warning":"default"}),o.jsx(Hh,{title:"Due in 7 Days",value:g.upcoming7Days,icon:ws}),o.jsx(Hh,{title:"Overdue",value:g.overdue,icon:ur,variant:g.overdue>0?"danger":"default"}),o.jsx(Hh,{title:"Total Active",value:g.totalActive,icon:Vl})]}),features:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[o.jsx(yK,{courses:i,assignments:r}),o.jsx(vK,{courses:i}),o.jsx(mK,{}),o.jsx(pK,{})]}),charts:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:h-[340px]",children:[o.jsx("div",{className:"lg:col-span-2 h-full min-h-[300px]",children:o.jsx(_K,{data:g.weeklyWorkload})}),o.jsx("div",{className:"lg:col-span-1 h-full min-h-[300px]",children:o.jsx(NK,{assignments:x})})]})};return o.jsx(SK,{id:y,children:_[y]},y)})})})})]}),o.jsx(_b,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function jK(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=An();ut();const[a,l]=f.useState(null),[c,u]=f.useState("grid"),h=Yp(),m=t.find(x=>x.id===a),g=e.filter(x=>x.courseId===a).flatMap(x=>x.materials?x.materials.flatMap(y=>{let _=[];if(y.driveFile){const b=y.driveFile.driveFile;let w=b.thumbnailUrl||b.iconUrl||null;!w&&b.id&&(w=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),_.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:w,type:"driveFile"})}return _}):[]).filter(x=>!!x.title);return n&&t.length===0?o.jsx(CK,{}):i&&t.length===0?o.jsx("div",{className:"h-full flex items-center justify-center p-4",children:o.jsx(wc,{})}):o.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ur,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:x=>{x.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:U("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&a?"hidden":"flex"),children:[o.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:o.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(x=>o.jsxs("button",{onClick:()=>l(x.id),className:U("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",a===x.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0",a===x.id?"bg-primary-foreground/20":"bg-muted"),children:o.jsx(Z_,{className:U("h-4 w-4",a===x.id?"text-primary-foreground":"text-muted-foreground")})}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:x.name}),o.jsx("p",{className:U("text-[10px] uppercase tracking-wider font-medium",a===x.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:x.section||"No Section"})]}),o.jsx(WT,{className:U("h-4 w-4 transition-transform",a===x.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},x.id))})]}),o.jsxs("div",{className:U("flex-1 overflow-y-auto bg-background",h&&!a?"hidden":"flex flex-col"),children:[h&&a&&o.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:o.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[o.jsx(wd,{className:"h-4 w-4"}),"Back to Courses"]})}),a?o.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[o.jsxs("div",{className:"space-y-1 max-w-full",children:[o.jsx(on,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),o.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:m==null?void 0:m.name}),o.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(m==null?void 0:m.descriptionHeading)||"Curated academic materials and notes."})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),o.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),o.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:o.jsx(KT,{className:"h-4 w-4"})}),o.jsx(ae,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:o.jsx(o6,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((x,y)=>{var A;const _=((A=x.title)==null?void 0:A.toLowerCase())||"",b=_.endsWith(".pdf"),w=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",T="FILE";return b?(S="bg-red-100 text-red-600",T="PDF DOCUMENT"):w?(S="bg-orange-100 text-orange-600",T="PRESENTATION"):(S="bg-blue-100 text-blue-600",T="DOCUMENT"),o.jsxs(Le,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[o.jsx(it,{className:"p-3 border-b border-border space-y-0 pb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:o.jsx(ea,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:x.title}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:T})]})]})}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[x.thumbnail&&o.jsx("img",{src:x.thumbnail.includes("s220")?x.thumbnail.replace("s220","s800"):x.thumbnail,alt:x.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var E;console.log("Thumbnail failed to load:",x.thumbnail),M.currentTarget.style.display="none";const N=(E=M.currentTarget.parentElement)==null?void 0:E.querySelector(".fallback-viewer");N&&(N.classList.remove("hidden"),N.classList.add("block"))}}),o.jsx("div",{className:U("fallback-viewer absolute inset-0 w-full h-full",x.thumbnail?"hidden":"block"),children:o.jsx(TK,{type:b?"pdf":w?"ppt":"doc"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:o.jsx(ae,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:o.jsxs("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(My,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${x.id}-${y}`)})}):o.jsx("div",{className:"space-y-2 pb-20",children:g.map((x,y)=>{var A;const _=((A=x.title)==null?void 0:A.toLowerCase())||"",b=_.endsWith(".pdf"),w=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",T="File";return b?(S="bg-red-100 text-red-600",T="PDF Document"):w?(S="bg-orange-100 text-orange-600",T="Presentation"):(S="bg-blue-100 text-blue-600",T="Document"),o.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[x.thumbnail?o.jsx("img",{src:x.thumbnail.includes("s220")?x.thumbnail.replace("s220","s400"):x.thumbnail,alt:x.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const N=M.currentTarget.nextElementSibling;N&&N.classList.remove("hidden")}}):null,o.jsx("div",{className:U("absolute inset-0 flex items-center justify-center",x.thumbnail?"hidden":"flex",S),children:o.jsx(ea,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:x.title}),o.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[T,"  Read Only"]})]}),o.jsx(ae,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:o.jsxs("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[o.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),o.jsx(My,{className:"h-4 w-4"})]})})]},`${x.id}-${y}`)})}):o.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[o.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:o.jsx(Z_,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:o.jsx(ea,{className:"h-10 w-10 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function CK(){return o.jsxs("div",{className:"flex h-full overflow-hidden",children:[o.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[o.jsx(et,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>o.jsx(et,{className:"h-16 w-full rounded-xl"},t))]}),o.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[o.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(et,{className:"h-4 w-20"}),o.jsx(et,{className:"h-10 w-80"}),o.jsx(et,{className:"h-4 w-64"})]}),o.jsx(et,{className:"h-10 w-32 rounded-lg"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>o.jsx(et,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function TK({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return o.jsxs("div",{className:U("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[o.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("div",{className:U("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:o.jsx(ea,{className:"h-6 w-6"})}),o.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[o.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),o.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&o.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),o.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:o.jsx(ea,{className:"h-40 w-40"})})]})}function kK({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),o.jsx("div",{className:"space-y-8",children:s.map(a=>{const l=YP.map(c=>Bs[c]).filter(c=>c.category===a.id);return l.length===0?null:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:a.label}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);let h=!1;return u||(a.id==="consistency"?h=!0:a.id==="productivity"?h=(n||0)>0:a.id==="reliability"&&(h=((r==null?void 0:r.total)||0)>0)),o.jsxs("div",{className:U("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":h?"bg-muted/40 border-dashed border-border/60":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[o.jsx("div",{className:U("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?U(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:o.jsx(c.icon,{className:U("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:U("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&o.jsx(Ly,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&a.id==="consistency"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let m=0;if(c.id==="5-day-consistent"?m=5:c.id==="10-day-consistent"?m=10:c.id==="30-day-consistent"&&(m=30),m>0){const p=Number(e)||1,g=Math.min(p/m*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",m," Days"]})]})]})}return null})()}),!u&&a.id==="productivity"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let m=0;if(c.id==="10-submissions"?m=10:c.id==="25-submissions"?m=25:c.id==="50-submissions"&&(m=50),m>0){const p=Number(n)||0,g=Math.min(p/m*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",m," Submissions"]})]})]})}return null})()}),!u&&a.id==="reliability"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:m,attended:p}=r||{total:0,attended:0};let g=0,x=0;if(c.id==="perfect-week"?(g=7,x=100):c.id==="attendance-champion"&&(g=30,x=90),g>0){const y=m>0?p/m*100:0,_=Math.min(m/g*100,100),b=Math.min(y/x*100,100),w=Math.min((_+b)/2,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[m," days "," ",Math.round(y),"% attended"]})]})]})}return null})()})]}),u&&o.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},a.id)})})}var Eb="Switch",[IK,bY]=un(Eb),[AK,RK]=IK(Eb),ZP=f.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:h,...m}=t,[p,g]=f.useState(null),x=ke(e,S=>g(S)),y=f.useRef(!1),_=p?h||!!p.closest("form"):!0,[b=!1,w]=Hr({prop:s,defaultProp:i,onChange:u});return o.jsxs(AK,{scope:n,checked:b,disabled:l,children:[o.jsx(we.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":nD(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onClick:se(t.onClick,S=>{w(T=>!T),_&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),_&&o.jsx(PK,{control:p,bubbles:!y.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});ZP.displayName=Eb;var eD="SwitchThumb",tD=f.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=RK(eD,n);return o.jsx(we.span,{"data-state":nD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});tD.displayName=eD;var PK=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=f.useRef(null),a=Nb(n),l=Y0(e);return f.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function nD(t){return t?"checked":"unchecked"}var rD=ZP,DK=tD;const Yn=f.forwardRef(({className:t,...e},n)=>o.jsx(rD,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(DK,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Yn.displayName=rD.displayName;var MK="Label",sD=f.forwardRef((t,e)=>o.jsx(we.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));sD.displayName=MK;var oD=sD;const OK=vd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Dt=f.forwardRef(({className:t,...e},n)=>o.jsx(oD,{ref:n,className:U(OK(),t),...e}));Dt.displayName=oD.displayName;var iD="AlertDialog",[LK,_Y]=un(iD,[GR]),co=GR(),aD=t=>{const{__scopeAlertDialog:e,...n}=t,r=co(e);return o.jsx(wb,{...r,...n,modal:!0})};aD.displayName=iD;var VK="AlertDialogTrigger",lD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=co(n);return o.jsx(cP,{...s,...r,ref:e})});lD.displayName=VK;var FK="AlertDialogPortal",cD=t=>{const{__scopeAlertDialog:e,...n}=t,r=co(e);return o.jsx(bb,{...r,...n})};cD.displayName=FK;var zK="AlertDialogOverlay",uD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=co(n);return o.jsx(Kd,{...s,...r,ref:e})});uD.displayName=zK;var wl="AlertDialogContent",[UK,$K]=LK(wl),BK=gT("AlertDialogContent"),dD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=co(n),a=f.useRef(null),l=ke(e,a),c=f.useRef(null);return o.jsx(yG,{contentName:wl,titleName:hD,docsSlug:"alert-dialog",children:o.jsx(UK,{scope:n,cancelRef:c,children:o.jsxs(Xd,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:se(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(BK,{children:r}),o.jsx(WK,{contentRef:a})]})})})});dD.displayName=wl;var hD="AlertDialogTitle",fD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=co(n);return o.jsx(Qd,{...s,...r,ref:e})});fD.displayName=hD;var mD="AlertDialogDescription",pD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=co(n);return o.jsx(Yd,{...s,...r,ref:e})});pD.displayName=mD;var qK="AlertDialogAction",gD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=co(n);return o.jsx(dg,{...s,...r,ref:e})});gD.displayName=qK;var xD="AlertDialogCancel",yD=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=$K(xD,n),i=co(n),a=ke(e,s);return o.jsx(dg,{...i,...r,ref:a})});yD.displayName=xD;var WK=({contentRef:t})=>{const e=`\`${wl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wl}\` by passing a \`${mD}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},HK=aD,GK=lD,KK=cD,vD=uD,wD=dD,bD=gD,_D=yD,ND=fD,SD=pD;const Fm=HK,_E=GK,XK=KK,ED=f.forwardRef(({className:t,...e},n)=>o.jsx(vD,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));ED.displayName=vD.displayName;const td=f.forwardRef(({className:t,...e},n)=>o.jsxs(XK,{children:[o.jsx(ED,{}),o.jsx(wD,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));td.displayName=wD.displayName;const nd=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});nd.displayName="AlertDialogHeader";const rd=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});rd.displayName="AlertDialogFooter";const sd=f.forwardRef(({className:t,...e},n)=>o.jsx(ND,{ref:n,className:U("text-lg font-semibold",t),...e}));sd.displayName=ND.displayName;const od=f.forwardRef(({className:t,...e},n)=>o.jsx(SD,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));od.displayName=SD.displayName;const id=f.forwardRef(({className:t,...e},n)=>o.jsx(bD,{ref:n,className:U(eb(),t),...e}));id.displayName=bD.displayName;const ad=f.forwardRef(({className:t,...e},n)=>o.jsx(_D,{ref:n,className:U(eb({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));ad.displayName=_D.displayName;var Ox="rovingFocusGroup.onEntryFocus",QK={bubbles:!1,cancelable:!0},pg="RovingFocusGroup",[kv,jD,YK]=cp(pg),[JK,_c]=un(pg,[YK]),[ZK,eX]=JK(pg),CD=f.forwardRef((t,e)=>o.jsx(kv.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(kv.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(tX,{...t,ref:e})})}));CD.displayName=pg;var tX=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=t,p=f.useRef(null),g=ke(e,p),x=gc(i),[y=null,_]=Hr({prop:a,defaultProp:l,onChange:c}),[b,w]=f.useState(!1),S=bt(u),T=jD(n),A=f.useRef(!1),[M,N]=f.useState(0);return f.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(Ox,S),()=>E.removeEventListener(Ox,S)},[S]),o.jsx(ZK,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(E=>_(E),[_]),onItemShiftTab:f.useCallback(()=>w(!0),[]),onFocusableItemAdd:f.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:f.useCallback(()=>N(E=>E-1),[]),children:o.jsx(we.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...m,ref:g,style:{outline:"none",...t.style},onMouseDown:se(t.onMouseDown,()=>{A.current=!0}),onFocus:se(t.onFocus,E=>{const j=!A.current;if(E.target===E.currentTarget&&j&&!b){const k=new CustomEvent(Ox,QK);if(E.currentTarget.dispatchEvent(k),!k.defaultPrevented){const I=T().filter(Z=>Z.focusable),D=I.find(Z=>Z.active),P=I.find(Z=>Z.id===y),re=[D,P,...I].filter(Boolean).map(Z=>Z.ref.current);ID(re,h)}}A.current=!1}),onBlur:se(t.onBlur,()=>w(!1))})})}),TD="RovingFocusGroupItem",kD=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Nr(),c=i||l,u=eX(TD,n),h=u.currentTabStopId===c,m=jD(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),o.jsx(kv.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(we.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:se(t.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:se(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:se(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=sX(x,u.orientation,u.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=m().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const w=b.indexOf(x.currentTarget);b=u.loop?oX(b,w+1):b.slice(w+1)}setTimeout(()=>ID(b))}})})})});kD.displayName=TD;var nX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function sX(t,e,n){const r=rX(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return nX[r]}function ID(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function oX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jb=CD,Cb=kD,Tb="Tabs",[iX,NY]=un(Tb,[_c]),AD=_c(),[aX,kb]=iX(Tb),RD=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=gc(l),[m,p]=Hr({prop:r,onChange:s,defaultProp:i});return o.jsx(aX,{scope:n,baseId:Nr(),value:m,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(we.div,{dir:h,"data-orientation":a,...u,ref:e})})});RD.displayName=Tb;var PD="TabsList",DD=f.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=kb(PD,n),a=AD(n);return o.jsx(jb,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(we.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});DD.displayName=PD;var MD="TabsTrigger",OD=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=kb(MD,n),l=AD(n),c=FD(a.baseId,r),u=zD(a.baseId,r),h=r===a.value;return o.jsx(Cb,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(we.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:se(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:se(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:se(t.onFocus,()=>{const m=a.activationMode!=="manual";!h&&!s&&m&&a.onValueChange(r)})})})});OD.displayName=MD;var LD="TabsContent",VD=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=kb(LD,n),c=FD(l.baseId,r),u=zD(l.baseId,r),h=r===l.value,m=f.useRef(h);return f.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(Gt,{present:s||h,children:({present:p})=>o.jsx(we.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&i})})});VD.displayName=LD;function FD(t,e){return`${t}-trigger-${e}`}function zD(t,e){return`${t}-content-${e}`}var lX=RD,UD=DD,$D=OD,BD=VD;const cX=lX,qD=f.forwardRef(({className:t,...e},n)=>o.jsx(UD,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));qD.displayName=UD.displayName;const _f=f.forwardRef(({className:t,...e},n)=>o.jsx($D,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));_f.displayName=$D.displayName;const Nf=f.forwardRef(({className:t,...e},n)=>o.jsx(BD,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Nf.displayName=BD.displayName;function uX(){const[t,e]=f.useState(null),[n,r]=f.useState(!1),[s,i]=f.useState(!1);return f.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function dX(){const{user:t,requestCalendarPermissions:e}=ut(),[n,r]=f.useState(!1),[s,i]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!t)return;const u=Dn(Ae(be,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const a=async()=>{r(!0);try{await e()&&await ln(Ae(be,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await ln(Ae(be,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(m=>({...m,[u]:h}));try{await ln(Ae(be,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(m){console.error(m)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Le,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(ws,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&o.jsx(on,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),o.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?o.jsx(ae,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):o.jsx(ae,{onClick:a,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?o.jsx(Vr,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&o.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"h-px w-full bg-border mb-6"}),o.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",o.jsxs("div",{className:"grid gap-3 max-w-xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),o.jsx(Yn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),o.jsx(Yn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(ca,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(Le,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(V0,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),o.jsx("div",{className:"shrink-0",children:o.jsx(Qn,{href:"/settings/notifications",children:o.jsx(ae,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function hX(){var Z,te,$;const{user:t,signOut:e,updateUserProfile:n}=ut(),{lastSyncedAt:r,isSyncing:s,syncClassroom:i,isLoading:a,courses:l}=An(),{isInstallable:c,isInstalled:u,promptInstall:h}=uX(),{theme:m,setTheme:p}=Jw(),[g,x]=f.useState(!0),[y,_]=f.useState("auto"),[b,w]=f.useState(!1),[S,T]=f.useState([]),[A,M]=f.useState(0),[N,E]=f.useState(0),[j,k]=f.useState(),[I,D]=f.useState("general");f.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("tab");L&&["general","badges","integrations"].includes(L)&&D(L)},[]),f.useEffect(()=>{if(!t)return;const O=Dn(Ae(be,"leaderboards","all-courses","students",t.uid),L=>{var B;if(L.exists()){const W=L.data();T(W.badges||[]),M(W.loginStreak||0),E(((B=W.processedAssignmentIds)==null?void 0:B.length)||0)}else T([]),M(0),E(0)});return()=>O()},[t]),f.useEffect(()=>{if(!l||l.length===0)return;let O=0,L=0;l.forEach(B=>{if(B.attendanceData&&typeof B.attendanceData=="object"){const W=Object.values(B.attendanceData);O+=W.length,L+=W.filter(K=>typeof K=="string"?K.toLowerCase()==="present":K===!0||K===1).length}}),O>0&&k({total:O,attended:L})},[l]),f.useEffect(()=>{if(!t||I!=="badges")return;(async()=>{var F,Y;const L=Ae(be,"leaderboards","all-courses","students",t.uid),B=await wn(L);if(!B.exists())return;const W=B.data(),K=new Set(W.badges||[]);let le=!1;const oe=W.loginStreak||0;oe>=5&&!K.has("5-day-consistent")&&(K.add("5-day-consistent"),le=!0),oe>=10&&!K.has("10-day-consistent")&&(K.add("10-day-consistent"),le=!0),oe>=30&&!K.has("30-day-consistent")&&(K.add("30-day-consistent"),le=!0);const ce=((F=W.processedAssignmentIds)==null?void 0:F.length)||0;if(ce>=10&&!K.has("10-submissions")&&(K.add("10-submissions"),le=!0),ce>=25&&!K.has("25-submissions")&&(K.add("25-submissions"),le=!0),ce>=50&&!K.has("50-submissions")&&(K.add("50-submissions"),le=!0),le){await ln(L,{badges:Array.from(K)},{merge:!0});const ue=[],J=new Set(W.badges||[]);K.forEach(de=>{J.has(de)||ue.push(de)});const{BADGES:ie}=await tl(async()=>{const{BADGES:de}=await Promise.resolve().then(()=>JP);return{BADGES:de}},void 0);for(const de of ue)await Jl(Zt(be,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((Y=ie[de])==null?void 0:Y.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,I]);const P=((Z=t==null?void 0:t.displayName)==null?void 0:Z.split(" ").map(O=>O[0]).join("").toUpperCase())||((te=t==null?void 0:t.email)==null?void 0:te[0].toUpperCase())||"U",V=()=>r?r.toLocaleString():"Never",re=async()=>{w(!0);try{await h()}catch(O){console.error("Install failed:",O)}finally{w(!1)}};return o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),o.jsxs(cX,{value:I,onValueChange:D,className:"w-full",children:[o.jsxs(qD,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[o.jsx(_f,{value:"general",children:"General"}),o.jsx(_f,{value:"badges",children:"Badges"}),o.jsx(_f,{value:"integrations",children:"Integrations"})]}),o.jsxs(Nf,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{className:"text-base",children:"Connected Account"}),o.jsx(kn,{children:"Your Google account linked to this app"})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(bn,{className:"h-12 w-12",children:[o.jsx(_n,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nn,{children:P})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Zi,{className:"h-3.5 w-3.5"}),"Connected"]})]}),o.jsx(ir,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Dt,{children:"Profile Avatar"}),o.jsx("div",{className:"flex gap-4 items-center flex-wrap",children:[{id:"google",src:(($=t==null?void 0:t.providerData[0])==null?void 0:$.photoURL)||(t==null?void 0:t.photoURL),label:"Google"},{id:"male",src:"/avatars/avatar_male.png",label:"Avatar 1"},{id:"female",src:"/avatars/avatar_female.png",label:"Avatar 2"},{id:"male_men",src:"/avatars/avatar_male_men.png",label:"Avatar 3"},{id:"male_women",src:"/avatars/avatar_male_women.png",label:"Avatar 4"}].map(O=>o.jsxs("button",{onClick:async()=>{if(O.src&&O.src!==(t==null?void 0:t.photoURL))try{await n({photoURL:O.src})}catch(L){console.error("Failed to update avatar",L)}},className:`relative group rounded-full p-1 transition-all ${(t==null?void 0:t.photoURL)===O.src?"ring-2 ring-primary ring-offset-2 bg-background":"hover:bg-muted"}`,children:[o.jsxs(bn,{className:"h-12 w-12 border border-border",children:[o.jsx(_n,{src:O.src||void 0}),o.jsx(Nn,{children:"?"})]}),(t==null?void 0:t.photoURL)===O.src&&o.jsx("div",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full w-4 h-4 flex items-center justify-center border-2 border-background",children:o.jsx(Zi,{className:"h-2.5 w-2.5"})})]},O.id))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose an avatar to represent you across the app."})]}),o.jsx(ir,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",V()]})]}),o.jsxs(ae,{variant:"outline",size:"sm",onClick:O=>{O.preventDefault(),i().catch(L=>{console.error("Sync failed:",L)})},disabled:s,"data-testid":"button-sync-settings",children:[o.jsx(ca,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),s?"Syncing...":"Sync Now"]})]})]})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{className:"text-base",children:"Sync Settings"}),o.jsx(kn,{children:"Configure how your data syncs with Google Classroom"})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),o.jsx(Yn,{id:"background-sync",checked:g,onCheckedChange:x,"data-testid":"switch-background-sync"})]}),o.jsx(ir,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{className:"text-sm font-medium",children:"Clear Cache"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all locally stored data. Use this if you're experiencing issues after switching accounts."})]}),o.jsxs(Fm,{children:[o.jsx(_E,{asChild:!0,children:o.jsxs(ae,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[o.jsx(ca,{className:"h-4 w-4 mr-2"}),"Clear Cache & Refresh"]})}),o.jsxs(td,{children:[o.jsxs(nd,{children:[o.jsx(sd,{children:"Clear all cached data?"}),o.jsx(od,{children:"This will clear all locally stored data and refresh the page. You'll need to re-sync your assignments. Your theme preference will be preserved."})]}),o.jsxs(rd,{children:[o.jsx(ad,{children:"Cancel"}),o.jsx(id,{onClick:()=>{const{clearUserData:O,handleUserSwitch:L}=require("@/lib/storage-manager");t&&(O(),L(t.uid)),window.location.reload()},className:"bg-destructive hover:bg-destructive/90",children:"Clear & Refresh"})]})]})]})]})]})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{className:"text-base",children:"Theme"}),o.jsx(kn,{children:"Choose your preferred color theme"})]}),o.jsx(Je,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ae,{variant:m==="light"?"default":"outline",size:"sm",onClick:()=>p("light"),className:"flex items-center gap-2",children:[o.jsx($0,{className:"h-4 w-4"}),"Light"]}),o.jsxs(ae,{variant:m==="dark"?"default":"outline",size:"sm",onClick:()=>p("dark"),className:"flex items-center gap-2",children:[o.jsx(hp,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),o.jsxs(Le,{className:"border-primary/20",children:[o.jsxs(it,{children:[o.jsxs(ct,{className:"text-base flex items-center gap-2",children:[o.jsx(J_,{className:"h-4 w-4"}),"Install App"]}),o.jsx(kn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),o.jsx(Je,{className:"space-y-4",children:u?o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[o.jsx(Zi,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),o.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):c?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[o.jsx(h6,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),o.jsxs(ae,{onClick:re,disabled:b,className:"w-full",size:"lg","data-testid":"button-install-app",children:[o.jsx(J_,{className:"h-4 w-4 mr-2"}),b?"Installing...":"Install App"]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[o.jsx(Qo,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{className:"text-base",children:"Preferences"}),o.jsx(kn,{children:"Customize your experience"})]}),o.jsx(Je,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),o.jsxs(Zu,{value:y,onValueChange:_,children:[o.jsx(tc,{className:"w-[180px]","data-testid":"select-timezone",children:o.jsx(ed,{})}),o.jsxs(nc,{children:[o.jsx(Pt,{value:"auto",children:"Auto-detect"}),o.jsx(Pt,{value:"America/New_York",children:"Eastern Time"}),o.jsx(Pt,{value:"America/Chicago",children:"Central Time"}),o.jsx(Pt,{value:"America/Denver",children:"Mountain Time"}),o.jsx(Pt,{value:"America/Los_Angeles",children:"Pacific Time"}),o.jsx(Pt,{value:"Europe/London",children:"London"}),o.jsx(Pt,{value:"Europe/Paris",children:"Paris"}),o.jsx(Pt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsxs(ct,{className:"text-base flex items-center gap-2",children:[o.jsx(ta,{className:"h-4 w-4"}),"Account Actions"]}),o.jsx(kn,{children:"Manage your session"})]}),o.jsx(Je,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),o.jsxs(Fm,{children:[o.jsx(_E,{asChild:!0,children:o.jsxs(ae,{variant:"outline",size:"sm","data-testid":"button-signout",children:[o.jsx(ta,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),o.jsxs(td,{children:[o.jsxs(nd,{children:[o.jsx(sd,{children:"Are you absolutely sure?"}),o.jsx(od,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),o.jsxs(rd,{children:[o.jsx(ad,{children:"Cancel"}),o.jsx(id,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),o.jsx(Nf,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsxs(ct,{className:"text-base flex items-center gap-2",children:[o.jsx(QT,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),o.jsx(kn,{children:"Track your progress and unlock rewards by staying consistent."})]}),o.jsx(Je,{children:o.jsx(kK,{earnedBadges:S,currentStreak:A,submissionCount:N,attendanceStats:j})})]})}),o.jsx(Nf,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsx(dX,{})})]})]})}function fX(){const{user:t,requestGmailPermissions:e,accessToken:n}=ut(),{toast:r}=ao(),[s,i]=f.useState(!1),[a,l]=f.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{async function x(){if(t)try{const y=Ae(be,"users",t.uid,"settings","notifications"),_=await wn(y);if(_.exists()){const b=_.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(y){console.error("Failed to load settings from Firestore",y)}finally{m(!1)}}x()},[t]),f.useEffect(()=>{async function x(){if(!(!t||h))try{const _=Ae(be,"users",t.uid,"settings","notifications");await ln(_,{enabled:s,config:a,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const y=setTimeout(x,1e3);return()=>clearTimeout(y)},[s,a,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(x){console.error(x),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=x=>{l(y=>({...y,[x]:!y[x]}))};return o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Qn,{href:"/settings",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"rounded-full",children:o.jsx(wd,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),o.jsxs(Le,{className:"border-border shadow-sm",children:[o.jsxs(it,{className:"pb-4",children:[o.jsxs(ct,{className:"flex items-center gap-2 text-lg",children:[o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:o.jsx(V0,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),o.jsxs(kn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),o.jsx(ir,{}),o.jsxs(Je,{className:"pt-6 space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{className:"text-base font-medium",children:"Assignment due reminder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),o.jsx(Yn,{checked:a.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(ir,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{className:"text-base font-medium",children:"Missed submission alert"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),o.jsx(Yn,{checked:a.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(ir,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Dt,{className:"text-base font-medium",children:"Heavy workload warning"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),o.jsx(Yn,{checked:a.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),o.jsxs(mb,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[o.jsx(Vl,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:"Academic alerts are active."})]}),o.jsx(ae,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[o.jsx(Qo,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),o.jsxs(ae,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&o.jsx(Vr,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function mX(){const[t,e]=op(),{user:n,requestCalendarPermissions:r}=ut(),{toast:s}=ao(),[i,a]=f.useState(!0),[l,c]=f.useState(!1),[u,h]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!n)return;const x=Dn(Ae(be,"users",n.uid,"settings","calendar"),y=>{y.exists()&&h(y.data()),a(!1)});return()=>x()},[n]);const m=async()=>{c(!0);try{await r()?(await ln(Ae(be,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(x){console.error(x),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await ln(Ae(be,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(x){console.error(x)}},g=async(x,y)=>{h(_=>({..._,[x]:y}));try{await ln(Ae(be,"users",n.uid,"settings","calendar"),{[x]:y},{merge:!0})}catch(_){console.error(_)}};return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(Vr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:o.jsx(GL,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(Le,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(it,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:o.jsx(ws,{className:"h-6 w-6"})}),o.jsx(ct,{className:"text-xl",children:"Google Calendar"}),u.enabled&&o.jsx(on,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),o.jsx(kn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?o.jsx(ae,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ae,{onClick:m,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?o.jsx(Vr,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&o.jsxs(Je,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(ir,{className:"mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),o.jsx(Yn,{checked:u.syncAssignments,onCheckedChange:x=>g("syncAssignments",x)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),o.jsx(Yn,{checked:u.syncExams,onCheckedChange:x=>g("syncExams",x)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),o.jsx(Yn,{checked:u.syncPersonal,onCheckedChange:x=>g("syncPersonal",x)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[o.jsx(ca,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(pX,{})]})]})}function pX(){const{user:t,requestGmailPermissions:e}=ut(),{toast:n}=ao(),[r,s]=f.useState(!1),[i,a]=f.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});f.useEffect(()=>{if(!t)return;const h=Dn(Ae(be,"users",t.uid,"settings","notifications"),m=>{m.exists()&&a(m.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await ln(Ae(be,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await ln(Ae(be,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,m)=>{a(p=>({...p,[h]:m}));try{await ln(Ae(be,"users",t.uid,"settings","notifications"),{[h]:m},{merge:!0})}catch(p){console.error(p)}};return o.jsxs(Le,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(it,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[o.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),o.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),o.jsx(ct,{className:"text-xl",children:"Email Notifications"}),i.enabled&&o.jsx(on,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),o.jsx(kn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?o.jsx(ae,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ae,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?o.jsx(Vr,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&o.jsxs(Je,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(ir,{className:"mb-6"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),o.jsx(Yn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),o.jsx(Yn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function gX(){var E,j,k,I,D,P;const{user:t,signOut:e}=ut(),{courses:n,assignments:r,isLoading:s,error:i}=An();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return o.jsx(wc,{});const[a,l]=f.useState("class"),[c,u]=f.useState([]),[h,m]=f.useState(!1),[p,g]=f.useState(!0),[x,y]=f.useState(!0);f.useEffect(()=>{if(!t)return;m(!0);const V=[],re=new Map,Z=()=>{const O=[],L=t!=null&&t.email?t.email.split("@")[1]:null,B=n.map(K=>K.id),W=new Set(r.map(K=>K.id));re.forEach(K=>{const le=K.email||"";let oe=K.emailDomain||"";!oe&&le.includes("@")&&(oe=le.split("@")[1]);const ce=K.enrolledCourseIds||[],F=K.processedAssignmentIds||[],Y=L&&oe&&L===oe,ue=B.some(Te=>ce.includes(Te)),ie=!oe&&F.some(Te=>W.has(Te));let de=!1;a==="college"?de=!!Y:de=Y&&ue||ie,de&&O.push(K)}),O.sort((K,le)=>le.totalXP-K.totalXP),u(O),m(!1)},te=O=>{O.forEach(L=>{const B=L.data(),W={id:L.id,displayName:B.displayName||B.name||"Anonymous",photoUrl:B.photoUrl||B.avatar||"",totalXP:B.totalXP||B.xp||0,processedAssignmentIds:B.processedAssignmentIds||B.completedTasks||[],email:B.email||"",emailDomain:B.emailDomain||(B.email?B.email.split("@")[1]:""),enrolledCourseIds:B.enrolledCourseIds||B.subjects||[],badges:B.badges||[]},K=re.get(L.id);(!K||W.totalXP>=K.totalXP)&&re.set(L.id,W)}),Z()},$=t.email?t.email.split("@")[1]:null;if(a==="college"&&$){const O=Zt(be,"leaderboards","all-courses","students"),L=qn(O,tr("emailDomain","==",$),ra("totalXP","desc"),gl(50)),B=Dn(L,te,W=>{console.warn("College query failed (likely missing index). Falling back to global list.",W);const K=qn(O,ra("totalXP","desc"),gl(100));Dn(K,te)});V.push(B)}else Array.from(new Set(["all-courses",...n.map(L=>L.id)])).forEach(L=>{const B=Zt(be,"leaderboards",L,"students"),W=qn(B,ra("totalXP","desc"),gl(50)),K=Dn(W,te);V.push(K)});return()=>{V.forEach(O=>O())}},[a,t,n,r]);const _=a==="class"?"My Class":"My College",b=c.find(V=>V.id===(t==null?void 0:t.uid));b!=null&&b.totalXP;const w=!!b,S=c.filter(V=>V.totalXP>0),T=c.filter(V=>V.totalXP===0),A=c.length>0&&S.length===0,M=[...T].sort((V,re)=>{const Z=te=>te?typeof te.toMillis=="function"?te.toMillis():typeof te=="number"?te:te instanceof Date?te.getTime():typeof te=="string"?new Date(te).getTime():0:0;return Z(V.lastSyncedAt)-Z(re.lastSyncedAt)}),N=[...S,...M];return o.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Qo,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:V=>{V.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[_," Leaderboard"]})]}),o.jsx("div",{className:"w-full sm:w-[200px]",children:o.jsxs(Zu,{value:a,onValueChange:V=>l(V),children:[o.jsx(tc,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:o.jsx(ed,{placeholder:"Select View"})}),o.jsxs(nc,{children:[o.jsx(Pt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),o.jsx(Pt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&a==="class"&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:o.jsx(Gr,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:o.jsx(em,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),o.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[o.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Submit"," ",o.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),a==="college"&&x&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>y(!1),children:o.jsx(Gr,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:o.jsx(Qo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),o.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[o.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",o.jsx(JT,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",o.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[o.jsx(Qo,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!w&&!h?o.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(Vr,{className:"h-6 w-6 text-primary animate-spin"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(V=>o.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},V))}):c.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):A?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[o.jsx(XT,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),o.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:N.map((V,re)=>{var te,$;const Z=V.id===(t==null?void 0:t.uid);return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",Z?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(bn,{className:U("h-10 w-10 border flex-shrink-0",Z?"border-primary/20":"border-border"),children:[o.jsx(_n,{src:V.photoUrl}),o.jsx(Nn,{className:"text-xs bg-muted text-muted-foreground",children:($=(te=V.displayName)==null?void 0:te[0])==null?void 0:$.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("span",{className:U("text-sm font-medium truncate",Z?"text-primary":"text-foreground"),children:[V.displayName,Z&&o.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},V.id)})})]}):o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[N.length>0&&o.jsxs("div",{className:U("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[o.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:N[1]&&N[1].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(bn,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[o.jsx(_n,{src:N[1].photoUrl}),o.jsx(Nn,{className:"text-lg bg-zinc-100 text-zinc-500",children:(j=(E=N[1].displayName)==null?void 0:E[0])==null?void 0:j.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:N[1].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[N[1].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(Yc,{badges:N[1].badges||[],limit:2,size:"sm"})})]})]}):S.length===1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):o.jsx("div",{className:"w-full"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:o.jsx(Os,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),o.jsxs(bn,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[o.jsx(_n,{src:N[0].photoUrl}),o.jsx(Nn,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(I=(k=N[0].displayName)==null?void 0:k[0])==null?void 0:I.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),o.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:N[0].displayName}),o.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[N[0].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:o.jsx(Yc,{badges:N[0].badges||[],limit:3,size:"sm"})})]})]}),o.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:N[2]&&N[2].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(bn,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[o.jsx(_n,{src:N[2].photoUrl}),o.jsx(Nn,{className:"text-lg bg-amber-50 text-amber-700",children:(P=(D=N[2].displayName)==null?void 0:D[0])==null?void 0:P.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:N[2].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[N[2].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(Yc,{badges:N[2].badges||[],limit:2,size:"sm"})})]})]}):S.length>=1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):o.jsx("div",{className:"w-full"})})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:N.slice(Math.min(3,S.length)).map((V,re)=>{var $,O;const Z=V.id===(t==null?void 0:t.uid),te=Math.min(3,S.length)+re+1;return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",Z?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[o.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:o.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:V.totalXP>0?`#${te}`:"-"})}),o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(bn,{className:U("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",Z?"border-primary/20":"border-border"),children:[o.jsx(_n,{src:V.photoUrl}),o.jsx(Nn,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(O=($=V.displayName)==null?void 0:$[0])==null?void 0:O.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsxs("span",{className:U("text-xs sm:text-sm font-medium truncate",Z?"text-primary":"text-foreground"),children:[V.displayName," ",Z&&o.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),o.jsx(Yc,{badges:V.badges||[],limit:3,size:"md",className:"scale-100"})]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[V.processedAssignmentIds.length," ",o.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),o.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:V.totalXP.toLocaleString()}),o.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},V.id)})})]})]})})]})}function xX(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const NE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function yX(){return o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[o.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>o.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function vX(){const{courses:t,error:e,isLoading:n}=An();if(n)return o.jsx(yX,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return o.jsx(wc,{});const{accessToken:r,user:s}=ut();ao();const[i,a]=f.useState(""),[l,c]=f.useState({}),[u,h]=f.useState(null);f.useState("");const m=f.useMemo(()=>xX(),[]);f.useEffect(()=>{if(!t||!s||!r)return;(async()=>{const A=await Promise.all(t.map(async N=>{const E=await vr.getCourseConfig(N.id);return E?E.isVisible?{courseId:N.id,state:"loading"}:{courseId:N.id,state:"hidden"}:{courseId:N.id,state:"no-config"}})),M={};A.forEach(N=>{M[N.courseId]=N}),c(N=>({...N,...M}));for(const N of t){const E=await vr.getCourseConfig(N.id);E&&E.isVisible&&p(N.id,E.sheetUrl)}})()},[t,s,r]),f.useEffect(()=>{t.length>0&&!i&&a(t[0].id)},[t,i]);const p=async(T,A)=>{if(!r||!(s!=null&&s.email)){console.log("Missing accessToken or user email");return}const M=vr.extractSheetId(A);if(!M){c(j=>({...j,[T]:{courseId:T,state:"error",error:"Invalid configuration"}}));return}const N=await vr.getCourseConfig(T),E=(N==null?void 0:N.emailColumn)||"A";try{const j=await vr.fetchAttendanceFromSheet(M,r,s.email,E);c(k=>({...k,[T]:{courseId:T,state:"loaded",data:j}}))}catch(j){console.error("Attendance fetch error:",j),c(k=>({...k,[T]:{courseId:T,state:"error",error:j.message||"Failed to load"}}))}},g=Object.values(l).filter(T=>T.state==="loaded"&&T.data),x=g.reduce((T,A)=>{var M;return T+(((M=A.data)==null?void 0:M.stats.attendedClasses)||0)},0),y=g.reduce((T,A)=>{var M;return T+(((M=A.data)==null?void 0:M.stats.totalClasses)||0)},0),_=NE(x,y),b=l[i],w=t.find(T=>T.id===i),S=b==null?void 0:b.data;return f.useEffect(()=>{if(!s||y<5)return;const A=setTimeout(async()=>{const M=[],N=x,E=y,j=E>0?N/E:0;if(E>=10&&j===1&&M.push("perfect-week"),E>=30&&j>=.95&&M.push("attendance-champion"),M.length>0)try{const k=Ae(be,"leaderboards","all-courses","students",s.uid);await Vs(k,{badges:Qp(...M)})}catch(k){console.debug("Could not award attendance badges:",k)}},3e3);return()=>clearTimeout(A)},[s,y,x]),o.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[o.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:o.jsx("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[o.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),o.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),o.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",m]})]})})}),e&&e.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Qo,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:T=>{T.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[o.jsx("section",{children:g.length>0?o.jsx(Le,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:o.jsx(Je,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[o.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),o.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),o.jsx(on,{variant:_.status==="safe"?"outline":"destructive",className:U("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",_.color),children:_.status==="safe"?"Safe Status":"Attention Needed"})]}),o.jsxs("div",{className:"flex items-baseline gap-3",children:[o.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[_.percentage,"%"]}),o.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",g.length," active courses"]})]})]})})}):o.jsx(Le,{className:"border-border shadow-sm bg-card",children:o.jsxs(Je,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[o.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:o.jsx(Uu,{className:"h-8 w-8 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2 max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),o.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",o.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[o.jsx(ur,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[o.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(T=>{var j,k;const A=l[T.id],M=(A==null?void 0:A.state)||"loading",N=A!=null&&A.data?NE(A.data.stats.attendedClasses,A.data.stats.totalClasses):null,E=i===T.id;return o.jsx(Le,{className:U("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",E&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>a(T.id),children:o.jsxs(Je,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:T.name})}),o.jsx(Ws,{children:o.jsx("p",{children:T.name})})]}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:T.section||"No Section"})]}),M==="loaded"&&N&&o.jsxs("span",{className:U("text-lg font-bold tabular-nums",N.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[N.percentage,"%"]}),M==="hidden"&&o.jsx(Oy,{className:"h-5 w-5 text-muted-foreground/50"}),M==="locked"&&o.jsx(Ly,{className:"h-5 w-5 text-amber-500/80"}),M==="error"&&o.jsx(Qo,{className:"h-5 w-5 text-destructive/80"})]}),o.jsxs("div",{className:"mt-auto",children:[M==="loaded"&&N&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[o.jsxs("span",{children:[(j=A.data)==null?void 0:j.stats.attendedClasses,"/",(k=A.data)==null?void 0:k.stats.totalClasses," classes"]}),o.jsx("span",{className:N.status==="safe"?"text-emerald-500":"text-red-500",children:N.status==="safe"?"On Track":"Low Attendance"})]}),o.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-500",N.progressColor),style:{width:`${N.percentage}%`}})})]}),M==="locked"&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),o.jsxs(ae,{size:"sm",variant:"secondary",className:"w-full",onClick:I=>{I.stopPropagation(),h(T.id)},children:[o.jsx(n6,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),M==="hidden"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),M==="no-config"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),M==="error"&&o.jsx("p",{className:"text-xs text-destructive",children:A==null?void 0:A.error}),M==="loading"&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(z0,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},T.id)})}),o.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1",children:[o.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[o.jsx(Uu,{className:"h-4 w-4"})," History"]}),o.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(w==null?void 0:w.section)||(w==null?void 0:w.name.slice(0,3).toUpperCase())})]}),o.jsx(Le,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:S?o.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:o.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:S.history.map((T,A)=>{const M=T.status==="Present",N=A===0,E=A===5;return o.jsxs("div",{className:"group",children:[N&&o.jsx("div",{className:"ml-5 mb-3 mt-1",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),E&&o.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),o.jsxs("div",{className:"relative pl-5 select-none",children:[o.jsx("div",{className:U("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",M?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),A!==S.history.length-1&&o.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),o.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[o.jsx("div",{className:U("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",M?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:T.status}),o.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:T.date})]})})]})]},A)})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(b==null?void 0:b.state)==="locked"&&o.jsxs(o.Fragment,{children:[o.jsx(Ly,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(b==null?void 0:b.state)==="hidden"&&o.jsxs(o.Fragment,{children:[o.jsx(Oy,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((b==null?void 0:b.state)==="error"||(b==null?void 0:b.state)==="no-config")&&o.jsxs(o.Fragment,{children:[o.jsx(ur,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}const Po=f.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:U("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Po.displayName="Input";const Lx=wb,wX=cP,bX=bb,WD=f.forwardRef(({className:t,...e},n)=>o.jsx(Kd,{ref:n,className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));WD.displayName=Kd.displayName;const Sf=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(bX,{children:[o.jsx(WD,{}),o.jsxs(Xd,{ref:r,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(dg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Gr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Sf.displayName=Xd.displayName;const Ef=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ef.displayName="DialogHeader";const jf=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});jf.displayName="DialogFooter";const Cf=f.forwardRef(({className:t,...e},n)=>o.jsx(Qd,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",t),...e}));Cf.displayName=Qd.displayName;const Iv=f.forwardRef(({className:t,...e},n)=>o.jsx(Yd,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Iv.displayName=Yd.displayName;var Av=["Enter"," "],_X=["ArrowDown","PageUp","Home"],HD=["ArrowUp","PageDown","End"],NX=[..._X,...HD],SX={ltr:[...Av,"ArrowRight"],rtl:[...Av,"ArrowLeft"]},EX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zd="Menu",[ld,jX,CX]=cp(Zd),[Ta,GD]=un(Zd,[CX,bi,_c]),gg=bi(),KD=_c(),[TX,ka]=Ta(Zd),[kX,eh]=Ta(Zd),XD=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=t,l=gg(e),[c,u]=f.useState(null),h=f.useRef(!1),m=bt(i),p=gc(s);return f.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(xp,{...l,children:o.jsx(TX,{scope:e,open:n,onOpenChange:m,content:c,onContentChange:u,children:o.jsx(kX,{scope:e,onClose:f.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:a,children:r})})})};XD.displayName=Zd;var IX="MenuAnchor",Ib=f.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=gg(n);return o.jsx(Sd,{...s,...r,ref:e})});Ib.displayName=IX;var Ab="MenuPortal",[AX,QD]=Ta(Ab,{forceMount:void 0}),YD=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=ka(Ab,e);return o.jsx(AX,{scope:e,forceMount:n,children:o.jsx(Gt,{present:n||i.open,children:o.jsx(_a,{asChild:!0,container:s,children:r})})})};YD.displayName=Ab;var Er="MenuContent",[RX,Rb]=Ta(Er),JD=f.forwardRef((t,e)=>{const n=QD(Er,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ka(Er,t.__scopeMenu),a=eh(Er,t.__scopeMenu);return o.jsx(ld.Provider,{scope:t.__scopeMenu,children:o.jsx(Gt,{present:r||i.open,children:o.jsx(ld.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(PX,{...s,ref:e}):o.jsx(DX,{...s,ref:e})})})})}),PX=f.forwardRef((t,e)=>{const n=ka(Er,t.__scopeMenu),r=f.useRef(null),s=ke(e,r);return f.useEffect(()=>{const i=r.current;if(i)return Zp(i)},[]),o.jsx(Pb,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:se(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),DX=f.forwardRef((t,e)=>{const n=ka(Er,t.__scopeMenu);return o.jsx(Pb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),MX=li("MenuContent.ScrollLock"),Pb=f.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:g,disableOutsideScroll:x,...y}=t,_=ka(Er,n),b=eh(Er,n),w=gg(n),S=KD(n),T=jX(n),[A,M]=f.useState(null),N=f.useRef(null),E=ke(e,N,_.onContentChange),j=f.useRef(0),k=f.useRef(""),I=f.useRef(0),D=f.useRef(null),P=f.useRef("right"),V=f.useRef(0),re=x?$d:f.Fragment,Z=x?{as:MX,allowPinchZoom:!0}:void 0,te=O=>{var F,Y;const L=k.current+O,B=T().filter(ue=>!ue.disabled),W=document.activeElement,K=(F=B.find(ue=>ue.ref.current===W))==null?void 0:F.textValue,le=B.map(ue=>ue.textValue),oe=GX(le,L,K),ce=(Y=B.find(ue=>ue.textValue===oe))==null?void 0:Y.ref.current;(function ue(J){k.current=J,window.clearTimeout(j.current),J!==""&&(j.current=window.setTimeout(()=>ue(""),1e3))})(L),ce&&setTimeout(()=>ce.focus())};f.useEffect(()=>()=>window.clearTimeout(j.current),[]),Jp();const $=f.useCallback(O=>{var B,W;return P.current===((B=D.current)==null?void 0:B.side)&&XX(O,(W=D.current)==null?void 0:W.area)},[]);return o.jsx(RX,{scope:n,searchRef:k,onItemEnter:f.useCallback(O=>{$(O)&&O.preventDefault()},[$]),onItemLeave:f.useCallback(O=>{var L;$(O)||((L=N.current)==null||L.focus(),M(null))},[$]),onTriggerLeave:f.useCallback(O=>{$(O)&&O.preventDefault()},[$]),pointerGraceTimerRef:I,onPointerGraceIntentChange:f.useCallback(O=>{D.current=O},[]),children:o.jsx(re,{...Z,children:o.jsx(Ud,{asChild:!0,trapped:s,onMountAutoFocus:se(i,O=>{var L;O.preventDefault(),(L=N.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(ba,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:g,children:o.jsx(jb,{asChild:!0,...S,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:M,onEntryFocus:se(c,O=>{b.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(yp,{role:"menu","aria-orientation":"vertical","data-state":m4(_.open),"data-radix-menu-content":"",dir:b.dir,...w,...y,ref:E,style:{outline:"none",...y.style},onKeyDown:se(y.onKeyDown,O=>{const B=O.target.closest("[data-radix-menu-content]")===O.currentTarget,W=O.ctrlKey||O.altKey||O.metaKey,K=O.key.length===1;B&&(O.key==="Tab"&&O.preventDefault(),!W&&K&&te(O.key));const le=N.current;if(O.target!==le||!NX.includes(O.key))return;O.preventDefault();const ce=T().filter(F=>!F.disabled).map(F=>F.ref.current);HD.includes(O.key)&&ce.reverse(),WX(ce)}),onBlur:se(t.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(j.current),k.current="")}),onPointerMove:se(t.onPointerMove,cd(O=>{const L=O.target,B=V.current!==O.clientX;if(O.currentTarget.contains(L)&&B){const W=O.clientX>V.current?"right":"left";P.current=W,V.current=O.clientX}}))})})})})})})});JD.displayName=Er;var OX="MenuGroup",Db=f.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{role:"group",...r,ref:e})});Db.displayName=OX;var LX="MenuLabel",ZD=f.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});ZD.displayName=LX;var zm="MenuItem",SE="menu.itemSelect",xg=f.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=f.useRef(null),a=eh(zm,t.__scopeMenu),l=Rb(zm,t.__scopeMenu),c=ke(e,i),u=f.useRef(!1),h=()=>{const m=i.current;if(!n&&m){const p=new CustomEvent(SE,{bubbles:!0,cancelable:!0});m.addEventListener(SE,g=>r==null?void 0:r(g),{once:!0}),A0(m,p),p.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(e4,{...s,ref:c,disabled:n,onClick:se(t.onClick,h),onPointerDown:m=>{var p;(p=t.onPointerDown)==null||p.call(t,m),u.current=!0},onPointerUp:se(t.onPointerUp,m=>{var p;u.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:se(t.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||Av.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});xg.displayName=zm;var e4=f.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,a=Rb(zm,n),l=KD(n),c=f.useRef(null),u=ke(e,c),[h,m]=f.useState(!1),[p,g]=f.useState("");return f.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),o.jsx(ld.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:o.jsx(Cb,{asChild:!0,...l,focusable:!r,children:o.jsx(we.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:se(t.onPointerMove,cd(x=>{r?a.onItemLeave(x):(a.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(t.onPointerLeave,cd(x=>a.onItemLeave(x))),onFocus:se(t.onFocus,()=>m(!0)),onBlur:se(t.onBlur,()=>m(!1))})})})}),VX="MenuCheckboxItem",t4=f.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return o.jsx(i4,{scope:t.__scopeMenu,checked:n,children:o.jsx(xg,{role:"menuitemcheckbox","aria-checked":Um(n)?"mixed":n,...s,ref:e,"data-state":Ob(n),onSelect:se(s.onSelect,()=>r==null?void 0:r(Um(n)?!0:!n),{checkForDefaultPrevented:!1})})})});t4.displayName=VX;var n4="MenuRadioGroup",[FX,zX]=Ta(n4,{value:void 0,onValueChange:()=>{}}),r4=f.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=bt(r);return o.jsx(FX,{scope:t.__scopeMenu,value:n,onValueChange:i,children:o.jsx(Db,{...s,ref:e})})});r4.displayName=n4;var s4="MenuRadioItem",o4=f.forwardRef((t,e)=>{const{value:n,...r}=t,s=zX(s4,t.__scopeMenu),i=n===s.value;return o.jsx(i4,{scope:t.__scopeMenu,checked:i,children:o.jsx(xg,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Ob(i),onSelect:se(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});o4.displayName=s4;var Mb="MenuItemIndicator",[i4,UX]=Ta(Mb,{checked:!1}),a4=f.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=UX(Mb,n);return o.jsx(Gt,{present:r||Um(i.checked)||i.checked===!0,children:o.jsx(we.span,{...s,ref:e,"data-state":Ob(i.checked)})})});a4.displayName=Mb;var $X="MenuSeparator",l4=f.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});l4.displayName=$X;var BX="MenuArrow",c4=f.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=gg(n);return o.jsx(vp,{...s,...r,ref:e})});c4.displayName=BX;var qX="MenuSub",[SY,u4]=Ta(qX),Jc="MenuSubTrigger",d4=f.forwardRef((t,e)=>{const n=ka(Jc,t.__scopeMenu),r=eh(Jc,t.__scopeMenu),s=u4(Jc,t.__scopeMenu),i=Rb(Jc,t.__scopeMenu),a=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=f.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return f.useEffect(()=>h,[h]),f.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),o.jsx(Ib,{asChild:!0,...u,children:o.jsx(e4,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":m4(n.open),...t,ref:lp(e,s.onTriggerChange),onClick:m=>{var p;(p=t.onClick)==null||p.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:se(t.onPointerMove,cd(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:se(t.onPointerLeave,cd(m=>{var g,x;h();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const y=(x=n.content)==null?void 0:x.dataset.side,_=y==="right",b=_?-5:5,w=p[_?"left":"right"],S=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:w,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:w,y:p.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:se(t.onKeyDown,m=>{var g;const p=i.searchRef.current!=="";t.disabled||p&&m.key===" "||SX[r.dir].includes(m.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),m.preventDefault())})})})});d4.displayName=Jc;var h4="MenuSubContent",f4=f.forwardRef((t,e)=>{const n=QD(Er,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ka(Er,t.__scopeMenu),a=eh(Er,t.__scopeMenu),l=u4(h4,t.__scopeMenu),c=f.useRef(null),u=ke(e,c);return o.jsx(ld.Provider,{scope:t.__scopeMenu,children:o.jsx(Gt,{present:r||i.open,children:o.jsx(ld.Slot,{scope:t.__scopeMenu,children:o.jsx(Pb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;a.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:se(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:se(t.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:se(t.onKeyDown,h=>{var g;const m=h.currentTarget.contains(h.target),p=EX[a.dir].includes(h.key);m&&p&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});f4.displayName=h4;function m4(t){return t?"open":"closed"}function Um(t){return t==="indeterminate"}function Ob(t){return Um(t)?"indeterminate":t?"checked":"unchecked"}function WX(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function HX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function GX(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=HX(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function KX(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function XX(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return KX(n,e)}function cd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var QX=XD,YX=Ib,JX=YD,ZX=JD,eQ=Db,tQ=ZD,nQ=xg,rQ=t4,sQ=r4,oQ=o4,iQ=a4,aQ=l4,lQ=c4,cQ=d4,uQ=f4,Lb="DropdownMenu",[dQ,EY]=un(Lb,[GD]),Vn=GD(),[hQ,p4]=dQ(Lb),g4=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=Vn(e),u=f.useRef(null),[h=!1,m]=Hr({prop:s,defaultProp:i,onChange:a});return o.jsx(hQ,{scope:e,triggerId:Nr(),triggerRef:u,contentId:Nr(),open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),modal:l,children:o.jsx(QX,{...c,open:h,onOpenChange:m,dir:r,modal:l,children:n})})};g4.displayName=Lb;var x4="DropdownMenuTrigger",y4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=p4(x4,n),a=Vn(n);return o.jsx(YX,{asChild:!0,...a,children:o.jsx(we.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:lp(e,i.triggerRef),onPointerDown:se(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:se(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});y4.displayName=x4;var fQ="DropdownMenuPortal",v4=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Vn(e);return o.jsx(JX,{...r,...n})};v4.displayName=fQ;var w4="DropdownMenuContent",b4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=p4(w4,n),i=Vn(n),a=f.useRef(!1);return o.jsx(ZX,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:se(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:se(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});b4.displayName=w4;var mQ="DropdownMenuGroup",pQ=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(eQ,{...s,...r,ref:e})});pQ.displayName=mQ;var gQ="DropdownMenuLabel",_4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(tQ,{...s,...r,ref:e})});_4.displayName=gQ;var xQ="DropdownMenuItem",N4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(nQ,{...s,...r,ref:e})});N4.displayName=xQ;var yQ="DropdownMenuCheckboxItem",S4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(rQ,{...s,...r,ref:e})});S4.displayName=yQ;var vQ="DropdownMenuRadioGroup",wQ=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(sQ,{...s,...r,ref:e})});wQ.displayName=vQ;var bQ="DropdownMenuRadioItem",E4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(oQ,{...s,...r,ref:e})});E4.displayName=bQ;var _Q="DropdownMenuItemIndicator",j4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(iQ,{...s,...r,ref:e})});j4.displayName=_Q;var NQ="DropdownMenuSeparator",C4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(aQ,{...s,...r,ref:e})});C4.displayName=NQ;var SQ="DropdownMenuArrow",EQ=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(lQ,{...s,...r,ref:e})});EQ.displayName=SQ;var jQ="DropdownMenuSubTrigger",T4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(cQ,{...s,...r,ref:e})});T4.displayName=jQ;var CQ="DropdownMenuSubContent",k4=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return o.jsx(uQ,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});k4.displayName=CQ;var TQ=g4,kQ=y4,IQ=v4,I4=b4,A4=_4,R4=N4,P4=S4,D4=E4,M4=j4,O4=C4,L4=T4,V4=k4;const EE=TQ,jE=kQ,AQ=f.forwardRef(({className:t,inset:e,children:n,...r},s)=>o.jsxs(L4,{ref:s,className:U("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,o.jsx(WT,{className:"ml-auto"})]}));AQ.displayName=L4.displayName;const RQ=f.forwardRef(({className:t,...e},n)=>o.jsx(V4,{ref:n,className:U("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));RQ.displayName=V4.displayName;const Rv=f.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(IQ,{children:o.jsx(I4,{ref:r,sideOffset:e,className:U("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Rv.displayName=I4.displayName;const zi=f.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(R4,{ref:r,className:U("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));zi.displayName=R4.displayName;const PQ=f.forwardRef(({className:t,children:e,checked:n,...r},s)=>o.jsxs(P4,{ref:s,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(M4,{children:o.jsx(Zi,{className:"h-4 w-4"})})}),e]}));PQ.displayName=P4.displayName;const DQ=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(D4,{ref:r,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(M4,{children:o.jsx(HT,{className:"h-2 w-2 fill-current"})})}),e]}));DQ.displayName=D4.displayName;const Tf=f.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(A4,{ref:r,className:U("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Tf.displayName=A4.displayName;const Ui=f.forwardRef(({className:t,...e},n)=>o.jsx(O4,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));Ui.displayName=O4.displayName;var Vb="Radio",[MQ,F4]=un(Vb),[OQ,LQ]=MQ(Vb),z4=f.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:a,value:l="on",onCheck:c,form:u,...h}=t,[m,p]=f.useState(null),g=ke(e,_=>p(_)),x=f.useRef(!1),y=m?u||!!m.closest("form"):!0;return o.jsxs(OQ,{scope:n,checked:s,disabled:a,children:[o.jsx(we.button,{type:"button",role:"radio","aria-checked":s,"data-state":B4(s),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onClick:se(t.onClick,_=>{s||c==null||c(),y&&(x.current=_.isPropagationStopped(),x.current||_.stopPropagation())})}),y&&o.jsx(VQ,{control:m,bubbles:!x.current,name:r,value:l,checked:s,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});z4.displayName=Vb;var U4="RadioIndicator",$4=f.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=LQ(U4,n);return o.jsx(Gt,{present:r||i.checked,children:o.jsx(we.span,{"data-state":B4(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});$4.displayName=U4;var VQ=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=f.useRef(null),a=Nb(n),l=Y0(e);return f.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function B4(t){return t?"checked":"unchecked"}var FQ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Fb="RadioGroup",[zQ,jY]=un(Fb,[_c,F4]),q4=_c(),W4=F4(),[UQ,$Q]=zQ(Fb),H4=f.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:u,loop:h=!0,onValueChange:m,...p}=t,g=q4(n),x=gc(u),[y,_]=Hr({prop:i,defaultProp:s,onChange:m});return o.jsx(UQ,{scope:n,name:r,required:a,disabled:l,value:y,onValueChange:_,children:o.jsx(jb,{asChild:!0,...g,orientation:c,dir:x,loop:h,children:o.jsx(we.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...p,ref:e})})})});H4.displayName=Fb;var G4="RadioGroupItem",K4=f.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=$Q(G4,n),a=i.disabled||r,l=q4(n),c=W4(n),u=f.useRef(null),h=ke(e,u),m=i.value===s.value,p=f.useRef(!1);return f.useEffect(()=>{const g=y=>{FQ.includes(y.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),o.jsx(Cb,{asChild:!0,...l,focusable:!a,active:m,children:o.jsx(z4,{disabled:a,required:i.required,checked:m,...c,...s,name:i.name,ref:h,onCheck:()=>i.onValueChange(s.value),onKeyDown:se(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:se(s.onFocus,()=>{var g;p.current&&((g=u.current)==null||g.click())})})})});K4.displayName=G4;var BQ="RadioGroupIndicator",X4=f.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=W4(n);return o.jsx($4,{...s,...r,ref:e})});X4.displayName=BQ;var Q4=H4,Y4=K4,qQ=X4;const J4=f.forwardRef(({className:t,...e},n)=>o.jsx(Q4,{className:U("grid gap-2",t),...e,ref:n}));J4.displayName=Q4.displayName;const Z4=f.forwardRef(({className:t,...e},n)=>o.jsx(Y4,{ref:n,className:U("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(qQ,{className:"flex items-center justify-center",children:o.jsx(HT,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Z4.displayName=Y4.displayName;const is=[{id:"swords",icon:du,label:"Warrior",color:"text-red-500",gradient:"bg-gradient-to-r from-red-600 to-orange-600"},{id:"shield",icon:d6,label:"Guardian",color:"text-blue-500",gradient:"bg-gradient-to-r from-blue-600 to-cyan-600"},{id:"zap",icon:ZT,label:"Speed",color:"text-yellow-500",gradient:"bg-gradient-to-r from-yellow-500 to-amber-600"},{id:"crown",icon:Os,label:"Royal",color:"text-purple-500",gradient:"bg-gradient-to-r from-purple-600 to-indigo-600"},{id:"flame",icon:_d,label:"Power",color:"text-orange-500",gradient:"bg-gradient-to-r from-orange-600 to-red-600"},{id:"rocket",icon:F0,label:"Launch",color:"text-cyan-500",gradient:"bg-gradient-to-r from-cyan-600 to-blue-600"},{id:"star",icon:tm,label:"Legend",color:"text-indigo-500",gradient:"bg-gradient-to-r from-indigo-600 to-purple-600"},{id:"target",icon:fp,label:"Focus",color:"text-emerald-500",gradient:"bg-gradient-to-r from-emerald-600 to-green-600"},{id:"book",icon:bd,label:"Scholar",color:"text-pink-500",gradient:"bg-gradient-to-r from-pink-600 to-rose-600"},{id:"ghost",icon:ZL,label:"Phantom",color:"text-slate-400",gradient:"bg-gradient-to-r from-slate-700 to-gray-800"}];function WQ(){const{user:t}=ut(),{toast:e}=ao(),{courses:n}=An(),[r,s]=f.useState("leaderboard"),[i,a]=f.useState(null),[l,c]=f.useState([]),[u,h]=f.useState(!0),[m,p]=f.useState([]),[g,x]=f.useState(""),[y,_]=f.useState(""),[b,w]=f.useState(""),[S,T]=f.useState(!1),[A,M]=f.useState(!0),[N,E]=f.useState(""),[j,k]=f.useState(!1),[I,D]=f.useState(""),[P,V]=f.useState(""),[re,Z]=f.useState(""),[te,$]=f.useState(!1),[O,L]=f.useState(!1),[B,W]=f.useState(!1),[K,le]=f.useState(""),[oe,ce]=f.useState(!1),[F,Y]=f.useState(!1),[ue,J]=f.useState(null),[ie,de]=f.useState("class"),[Te,qe]=f.useState(!0),[pt,tt]=f.useState([]),[st,jn]=f.useState({}),[Ze,ot]=f.useState(new Set);f.useEffect(()=>{if(!t||m.length===0){tt([]);return}const H=t.email?t.email.split("@")[1]:null,ge=n.map(ee=>ee.id),ve=m.filter(ee=>{if(ee.members.includes(t.uid))return!0;const ye=st[ee.id]||[],_e=ye.find(Xe=>Xe.uid===ee.leaderId)||ye.find(Xe=>Xe.role==="leader")||ye[0];if(!_e)return!1;const Se=_e.emailDomain,Ve=H&&Se&&H===Se;if(ie==="college")return!!Ve;{const Xe=_e.enrolledCourseIds||[],Pe=ge.some(He=>Xe.includes(He));return Ve&&Pe}});tt(ve)},[m,ie,t,n,st]);const[We,ts]=f.useState(null),[Ci,Ti]=f.useState([]),[Ts,uo]=f.useState(!1),[kr,Fn]=f.useState(!1),ks=async(H,ge)=>{Fn(!0);try{if(H.length===0){Ti([]),Fn(!1);return}const ve=H.map(async ye=>{try{const _e=Ae(be,"leaderboards","all-courses","students",ye),Se=await wn(_e);if(Se.exists()){const Ve=Se.data();return{uid:ye,displayName:Ve.displayName||Ve.name||"Unknown",photoUrl:Ve.photoUrl||Ve.photoURL||Ve.avatar||"",currentXP:Ve.totalXP||Ve.xp||Ve.currentXP||0,role:ye===ge?"leader":"member"}}else return t&&ye===t.uid?{uid:ye,displayName:t.displayName||"Me",photoUrl:t.photoURL||"",currentXP:0,role:ye===ge?"leader":"member"}:{uid:ye,displayName:"Unknown Member",photoUrl:"",currentXP:0,role:ye===ge?"leader":"member"}}catch(_e){return console.error(`Error fetching member ${ye}:`,_e),{uid:ye,displayName:"Error Loading",photoUrl:"",currentXP:0,role:"member"}}}),ee=await Promise.all(ve);ee.sort((ye,_e)=>_e.currentXP-ye.currentXP),Ti(ee)}catch(ve){console.error("Error fetching members:",ve)}finally{Fn(!1)}},Ia=H=>{i&&H.id===i.id?s("my-clan"):(ts(H),uo(!0),ks(H.members,H.leaderId))};f.useEffect(()=>{t&&ns()},[t]),f.useEffect(()=>{if(!t)return;const H=Zt(be,"clan_requests"),ge=qn(H,tr("requesterId","==",t.uid),tr("status","==","pending")),ve=Dn(ge,ee=>{const ye=new Set(ee.docs.map(_e=>_e.data().clanId));ot(ye)});return()=>ve()},[t]),f.useEffect(()=>{if(!t)return;const H=Zt(be,"study_squads"),ge=qn(H,tr("members","array-contains",t.uid)),ve=Dn(ge,async ee=>{if(ee.empty)a(null),c([]);else{const ye=ee.docs[0],_e={id:ye.id,...ye.data()};a(_e),D(_e.name),V(_e.tag),Z(_e.description),await ho(_e.members,_e.leaderId,ye.id)}h(!1)});return()=>ve()},[t]);const zn=async()=>{try{h(!0);const H=Zt(be,"study_squads"),ge=qn(H,tr("members","array-contains",t.uid)),ve=await xl(ge);if(ve.empty)a(null);else{const ee=ve.docs[0],ye={id:ee.id,...ee.data()};a(ye),D(ye.name),V(ye.tag),Z(ye.description),await ho(ye.members,ye.leaderId,ee.id)}}catch(H){console.error("Error fetching clan:",H)}finally{h(!1)}},ho=async(H,ge,ve)=>{const ee=[];let ye=0;for(const Se of H){const Ve=Ae(be,"leaderboards","all-courses","students",Se),Xe=await wn(Ve);let Pe=0,He="Unknown",dt="";if(Xe.exists()){const Fe=Xe.data();console.log("Student data for",Se,{displayName:Fe.displayName,photoUrl:Fe.photoUrl,photoURL:Fe.photoURL,avatar:Fe.avatar}),Pe=Fe.totalXP||Fe.xp||0,He=Fe.displayName||Fe.name||"Unknown",dt=Fe.photoUrl||Fe.photoURL||Fe.avatar||""}else console.log("Student snap does NOT exist for",Se),Se===(t==null?void 0:t.uid)&&(He=(t==null?void 0:t.displayName)||"Me",dt=(t==null?void 0:t.photoURL)||"",console.log("Using current user fallback:",{memberName:He,memberPhoto:dt}));ye+=Pe,ee.push({uid:Se,displayName:He,photoUrl:dt,currentXP:Pe,role:Se===ge?"leader":"member"})}ee.sort((Se,Ve)=>Ve.currentXP-Se.currentXP),console.log("About to setMembersData with details:",ee.map(Se=>({name:Se.displayName,photoUrl:Se.photoUrl,hasPhoto:!!Se.photoUrl}))),c(ee);const _e=Ae(be,"study_squads",ve);Vs(_e,{totalXP:ye}).catch(console.error)},ns=async()=>{try{const H=Zt(be,"study_squads"),ge=qn(H,ra("totalXP","desc"),gl(50)),ee=(await xl(ge)).docs.map(Pe=>({id:Pe.id,...Pe.data()}));p(ee);const ye=new Set;ee.forEach(Pe=>Pe.members.forEach(He=>ye.add(He)));const _e=Array.from(ye);if(_e.length===0)return;const Se={},Ve=[];for(let Pe=0;Pe<_e.length;Pe+=10)Ve.push(_e.slice(Pe,Pe+10));await Promise.all(Ve.map(async Pe=>{const He=Pe.map(Fe=>wn(Ae(be,"leaderboards","all-courses","students",Fe)));(await Promise.all(He)).forEach(Fe=>{if(Fe.exists()){const At=Fe.data();Se[Fe.id]={uid:Fe.id,displayName:At.displayName||"Unknown",photoUrl:At.photoUrl||At.photoURL||"",currentXP:At.totalXP||At.currentXP||0,role:"member",emailDomain:At.emailDomain||(At.email?At.email.split("@")[1]:void 0),enrolledCourseIds:At.enrolledCourseIds||At.subjects||[]}}})}));const Xe={};console.log("Building profilesByClan, memberDetailsMap has",Object.keys(Se).length,"members"),ee.forEach(Pe=>{console.log("Processing clan",Pe.name,"with member IDs:",Pe.members),Xe[Pe.id]=Pe.members.map(He=>{let dt=Se[He];if(console.log("Looking up member",He,"found:",!!dt),!dt&&He===(t==null?void 0:t.uid)){const Fe=t.email?t.email.split("@")[1]:void 0,At=n.map(Ra=>Ra.id);console.log("Using current user fallback for",He),dt={uid:t.uid,displayName:t.displayName||"Me",photoUrl:t.photoURL||"",currentXP:0,role:"member",emailDomain:Fe,enrolledCourseIds:At}}return dt}).filter(Boolean),console.log("Clan",Pe.name,"has",Xe[Pe.id].length,"profiles"),Xe[Pe.id].sort((He,dt)=>dt.currentXP-He.currentXP)}),jn(Xe)}catch(H){console.error("Error fetching top clans:",H)}},ki=async()=>{var H;if(!(!g||!y)){T(!0);try{const ge={name:g,tag:y,description:b||"We study hard!",leaderId:t.uid,members:[t.uid],totalXP:0,averageAttendance:0,bannerColor:"bg-blue-600",isPublic:!0,createdAt:ga()},ve=await Jl(Zt(be,"study_squads"),ge);e({title:"Clan Created!",description:`You are now the leader of ${g}`}),zn(),s("my-clan")}catch(ge){if(console.error("Create clan error:",ge),ge.code==="permission-denied")e({title:"Permission Denied",description:"Security Rules Error: Update Firestore Rules to allow 'study_squads'.",variant:"destructive"});else{const ve=((H=ge.message)==null?void 0:H.includes("BLOCKED"))||ge.code==="unavailable";e({title:ve?"Connection Blocked":"Error",description:ve?"Your browser or an extension is blocking the database. Please disable it for this site.":"Failed to create clan. Try again.",variant:"destructive"})}}finally{T(!1)}}},Is=async H=>{const ge=H||N;if(ge){k(!0);try{const ve=Ae(be,"study_squads",ge),ee=await wn(ve);if(!ee.exists()){e({title:"Error",description:"Clan not found",variant:"destructive"});return}const ye=ee.data();if(ye.members.length>=5){e({title:"Clan Full",description:"This clan already has 5 members.",variant:"destructive"});return}if(ye.members.includes(t.uid)){e({title:"Already a Member",description:"You are already in this clan."});return}const _e=Ae(be,"leaderboards","all-courses","students",ye.leaderId),Se=await wn(_e);let Ve=!1;if(Se.exists()){const Xe=Se.data(),Pe=Xe.emailDomain||(Xe.email?Xe.email.split("@")[1]:null),He=Xe.enrolledCourseIds||Xe.subjects||[],dt=t.email?t.email.split("@")[1]:null,Fe=n.map(Ai=>Ai.id),At=dt&&Pe&&dt===Pe,Ra=Fe.some(Ai=>He.includes(Ai));At&&Ra&&(Ve=!0)}else console.log("Leader profile not found during join check.");if(!Ve){e({title:"Restricted",description:"For fair play, you can only join squads from your own class.",variant:"destructive"});return}await Vs(ve,{members:Qp(t.uid)}),e({title:"Welcome!",description:`You joined ${ye.name}`}),await zn(),E(""),s("my-clan")}catch{e({title:"Error",description:"Failed to join clan.",variant:"destructive"})}finally{k(!1)}}},fr=async()=>{if(!We||!t)return;if(i){e({title:"Already in a Squad",description:"You must leave your current squad before joining another.",variant:"destructive"});return}if(We.members.length>=5){e({title:"Squad Full",description:"This squad already has 5 members.",variant:"destructive"});return}const H=Ae(be,"leaderboards","all-courses","students",We.leaderId),ge=await wn(H);let ve=!1;if(ge.exists()){const ee=ge.data(),ye=ee.emailDomain||(ee.email?ee.email.split("@")[1]:null),_e=ee.enrolledCourseIds||ee.subjects||[],Se=t.email?t.email.split("@")[1]:null,Ve=n.map(He=>He.id),Xe=Se&&ye&&Se===ye,Pe=Ve.some(He=>_e.includes(He));Xe&&Pe&&(ve=!0)}if(!ve){e({title:"Restricted",description:"For fair play, you can only join squads from your own class.",variant:"destructive"});return}try{const ee=Zt(be,"clan_requests"),ye=qn(ee,tr("clanId","==",We.id),tr("requesterId","==",t.uid),tr("status","==","pending"));if(!(await xl(ye)).empty){e({title:"Request Pending",description:"You have already sent a request to this squad."});return}console.log("Creating request with leaderId:",We.leaderId,"for clan:",We.name),await Jl(Zt(be,"clan_requests"),{clanId:We.id,clanName:We.name,leaderId:We.leaderId,requesterId:t.uid,requesterName:t.displayName,requesterAvatar:t.photoURL,status:"pending",createdAt:ga()}),ot(Se=>new Set(Se).add(We.id)),e({title:"Request Sent",description:`Your request to join ${We.name} has been sent.`}),uo(!1)}catch(ee){console.error("Error sending request:",ee),e({title:"Error",description:"Failed to send request.",variant:"destructive"})}},fo=()=>{ce(!0)},As=async()=>{if(i)try{const H=Ae(be,"study_squads",i.id);if(i.members.length<=1)await rl(H),e({title:"Squad Disbanded",description:"The squad has been deleted."});else{const ge={members:yv(t.uid)};if(i.leaderId===t.uid){const ve=i.members.filter(ee=>ee!==t.uid);ve.length>0&&(ge.leaderId=ve[0])}await Vs(H,ge),e({title:"Left Squad",description:"You have left the squad."})}ce(!1),a(null),c([]),s("leaderboard"),ns()}catch(H){console.error(H),e({title:"Error",description:"Failed to leave squad.",variant:"destructive"})}},Aa=(H,ge)=>{if(!i||i.leaderId!==t.uid){e({title:"Permission Denied",description:"Only the leader can remove members.",variant:"destructive"});return}if(H===t.uid){e({title:"Cannot Remove Yourself",description:"Use 'Leave Squad' or transfer leadership first.",variant:"destructive"});return}J({id:H,name:ge}),Y(!0)},Rs=async()=>{if(!(!i||!ue))try{const H=Ae(be,"study_squads",i.id);await Vs(H,{members:yv(ue.id)}),e({title:"Member Removed",description:`${ue.name} has been removed from the squad.`}),Y(!1),J(null)}catch(H){console.error(H),e({title:"Error",description:"Failed to remove member.",variant:"destructive"})}},Ii=async(H,ge)=>{if(!i||i.leaderId!==t.uid){e({title:"Permission Denied",description:"Only the current leader can transfer leadership.",variant:"destructive"});return}if(H===t.uid){e({title:"Already Leader",description:"You are already the leader.",variant:"destructive"});return}try{const ve=Ae(be,"study_squads",i.id);await Vs(ve,{leaderId:H}),e({title:"Leadership Transferred",description:`${ge} is now the squad leader.`}),W(!1),le("")}catch(ve){console.error(ve),e({title:"Error",description:"Failed to transfer leadership.",variant:"destructive"})}},Ke=()=>{if(!K){e({title:"No Member Selected",description:"Please select a member to transfer leadership to.",variant:"destructive"});return}const H=l.find(ge=>ge.uid===K);H&&Ii(H.uid,H.displayName)},Kt=async()=>{if(!(!i||!I||!P)){$(!0);try{const H=Ae(be,"study_squads",i.id);await Vs(H,{name:I,tag:P,description:re}),a(ge=>ge?{...ge,name:I,tag:P,description:re}:null),e({title:"Clan Updated",description:"Your clan settings have been saved."}),L(!1)}catch(H){console.error(H),e({title:"Update Failed",description:"Could not update clan details.",variant:"destructive"})}finally{$(!1)}}},It=H=>{const ve=(is.find(ee=>ee.id===H)||is[0]).icon;return o.jsx(ve,{className:"h-4 w-4"})};return u&&!i?o.jsx("div",{className:"flex h-screen items-center justify-center",children:o.jsx(Vr,{className:"h-8 w-8 animate-spin text-primary"})}):o.jsx(jd,{delayDuration:300,children:o.jsxs("div",{className:"flex flex-col h-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Clans"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>s("leaderboard"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",r==="leaderboard"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(e6,{className:"h-3.5 w-3.5"}),"Leaderboard"]}),o.jsxs("button",{onClick:()=>s("my-clan"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",r==="my-clan"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(du,{className:"h-3.5 w-3.5"}),"My Squad",i&&o.jsx("span",{className:"ml-1 h-1.5 w-1.5 rounded-full bg-primary/50"})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-20",children:r==="leaderboard"?o.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[o.jsx(Yo,{className:"h-5 w-5 text-yellow-500"}),"Top Study Squads",o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 rounded-full p-0",children:o.jsx(em,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),o.jsx(Ws,{side:"right",className:"max-w-[280px] p-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"font-bold text-primary",children:"How to Squad Up:"}),o.jsxs("div",{className:"text-xs space-y-1",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"To Join:"})," Enter a 6-digit Squad ID in the input box and click Join."]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"To Create:"}),' Go to the "My Squad" tab and fill out the form to start your own!']}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Max Members:"})," Each squad can have up to 5 members."]})]})]})})]})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Competed based on Total XP."})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsxs(Zu,{value:ie,onValueChange:H=>de(H),children:[o.jsx(tc,{className:"w-[140px] h-9",children:o.jsx(ed,{placeholder:"Select View"})}),o.jsxs(nc,{children:[o.jsx(Pt,{value:"class",children:"My Class"}),o.jsx(Pt,{value:"college",children:"This College"})]})]}),!i&&o.jsx("div",{className:"flex gap-2",children:o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Po,{placeholder:"Enter ID...",value:N,onChange:H=>E(H.target.value),className:"bg-background w-32 h-9"}),o.jsx(ae,{size:"sm",onClick:()=>Is(N),disabled:j||!N,children:j?o.jsx(Vr,{className:"animate-spin h-3 w-3"}):"Join"})]})}),o.jsx(Ws,{side:"top",children:o.jsx("p",{className:"text-xs",children:"Enter a 6-digit Squad ID to join"})})]})})]})]}),ie==="college"&&Te&&o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 flex gap-3 text-yellow-600 dark:text-yellow-400 text-sm animate-in fade-in slide-in-from-top-2",children:[o.jsx(Qo,{className:"h-5 w-5 shrink-0"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("p",{className:"font-medium",children:"Entertainment Purpose Only"}),o.jsx("button",{onClick:()=>qe(!1),className:"text-yellow-600/50 hover:text-yellow-600",children:o.jsx(Gr,{className:"h-4 w-4"})})]}),o.jsx("p",{className:"text-xs opacity-90 leading-relaxed",children:"This leaderboard includes all squads from your college. Note that students in different years or branches may have different workloads and assignment counts, so this comparison is not academically fair. It's just for fun!"})]})]}),o.jsxs("div",{className:"space-y-3",children:[pt.map((H,ge)=>{const ve=(i==null?void 0:i.id)===H.id;H.members.length>=5;const ee=st[H.id]||[],ye=is.find(Se=>Se.id===H.tag)||is[0],_e=ye.icon;return o.jsxs("div",{onClick:()=>Ia(H),className:U("relative flex flex-col md:flex-row md:items-center justify-between p-4 border rounded-xl transition-all cursor-pointer gap-4 md:gap-0",ve?"bg-primary/5 border-primary/20":"bg-card hover:border-primary/50"),children:[o.jsxs("div",{className:"absolute top-3 right-3 flex items-center text-xs text-muted-foreground gap-1 bg-background/50 backdrop-blur-sm p-1.5 rounded-md border shadow-sm z-10",children:[o.jsx(zy,{className:"h-3 w-3"}),H.members.length,"/5"]}),o.jsxs("div",{className:"flex items-center gap-4 md:flex-1",children:[o.jsx("div",{className:U("h-10 w-10 rounded-full flex items-center justify-center font-bold text-sm shrink-0",ge<3?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-500":"bg-muted text-muted-foreground"),children:ge+1}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[o.jsx("div",{className:U("p-2 rounded-lg mr-2 shadow-sm text-white shrink-0",ye.gradient||"bg-primary"),children:o.jsx(_e,{className:"h-4 w-4"})}),o.jsx("span",{className:"truncate",children:H.name}),ve&&o.jsx(on,{variant:"secondary",className:"text-[10px] shrink-0",children:"Your Clan"})]}),o.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[200px] md:max-w-md",children:H.description})]})]}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 md:mt-0 md:mx-auto md:mr-20",children:[o.jsx("div",{className:"flex -space-x-3",children:ee.slice(0,5).map(Se=>o.jsxs("div",{className:"relative group/avatar",children:[o.jsxs(bn,{className:"h-8 w-8 md:h-10 md:w-10 border-2 border-background ring-1 ring-border transition-transform hover:scale-110 hover:z-20",children:[o.jsx(_n,{src:Se.photoUrl}),o.jsx(Nn,{className:"text-[10px] md:text-xs",children:Se.displayName[0]})]}),o.jsx("div",{className:"absolute bottom-full mb-1 left-1/2 -translate-x-1/2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover/avatar:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:Se.displayName})]},Se.uid))}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"text-sm md:text-base font-bold text-foreground/80",children:[H.totalXP.toLocaleString()," ",o.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"XP"})]})})]})]},H.id)}),pt.length===0&&o.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:"No active clans found. Be the first to create one!"})]})]}):o.jsx(o.Fragment,{children:i?o.jsx("div",{className:"max-w-7xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:(()=>{const H=is.find(ee=>ee.id===i.tag)||is[0],ge=H.icon,ve=H.gradient||"bg-gradient-to-r from-blue-600 to-indigo-700";return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`relative rounded-xl overflow-hidden ${ve} p-4 md:p-8 text-white shadow-lg`,children:[o.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:o.jsx(ge,{className:"h-32 w-32"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-8 w-8 bg-white/20 rounded flex items-center justify-center backdrop-blur-sm",children:It(i.tag)}),i.leaderId===(t==null?void 0:t.uid)?o.jsxs(Lx,{open:O,onOpenChange:L,children:[o.jsx(wX,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white/50 hover:text-white hover:bg-white/20",children:o.jsx(uu,{className:"h-4 w-4"})})}),o.jsxs(Sf,{children:[o.jsx(Ef,{children:o.jsx(Cf,{children:"Edit Clan Details"})}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{children:"Name"}),o.jsx(Po,{value:I,onChange:ee=>D(ee.target.value)})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Dt,{children:"Badge"}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:is.map(ee=>{const ye=ee.icon,_e=P===ee.id;return o.jsx("div",{onClick:()=>V(ee.id),className:U("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",_e?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:o.jsx(ye,{className:U("h-5 w-5 mb-1",_e?ee.color:"text-foreground")})},ee.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{children:"Description (Max 20 chars)"}),o.jsx(Po,{value:re,onChange:ee=>Z(ee.target.value),maxLength:20})]}),o.jsx("div",{className:"pt-4 border-t mt-4",children:o.jsxs(ae,{variant:"destructive",size:"sm",className:"w-full",onClick:fo,children:[o.jsx(ta,{className:"h-4 w-4 mr-2"}),"Leave Clan"]})})]}),o.jsxs(jf,{children:[o.jsx(ae,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),o.jsx(ae,{onClick:Kt,disabled:te,children:"Save Changes"})]})]})]}):o.jsxs(EE,{children:[o.jsx(jE,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white/50 hover:text-white hover:bg-white/20 transition-all rounded-full",children:o.jsx(uu,{className:"h-4 w-4"})})}),o.jsxs(Rv,{align:"end",children:[o.jsx(Tf,{children:"Squad Settings"}),o.jsx(Ui,{}),o.jsxs(zi,{onClick:fo,className:"text-destructive focus:text-destructive",children:[o.jsx(ta,{className:"mr-2 h-4 w-4"}),"Leave Squad"]})]})]})]}),o.jsx("h2",{className:"text-xl md:text-3xl font-black tracking-tight",children:i.name}),o.jsx("p",{className:"text-blue-100 italic max-w-lg",children:i.description})]})}),o.jsxs("div",{className:"flex gap-3 mt-8",children:[o.jsxs(ae,{size:"sm",variant:"outline",className:"text-white border-white/40 hover:bg-white/10 hover:text-white",onClick:()=>{navigator.clipboard.writeText(i.id),e({title:"Copied!",description:"Clan ID copied to clipboard."})},children:[o.jsx(Y_,{className:"h-4 w-4 mr-2"}),"Copy Clan ID"]}),i.leaderId===(t==null?void 0:t.uid)&&o.jsxs(on,{variant:"outline",className:"text-white border-white/40 h-9 px-3",children:[o.jsx(Os,{className:"h-3 w-3 mr-1"}),"Leader"]})]}),o.jsxs("div",{className:"absolute bottom-0 right-0 text-right p-3 md:p-4 bg-white/10 rounded-lg backdrop-blur-sm border border-white/10 origin-bottom-right transform scale-75 md:scale-100",children:[o.jsx("div",{className:"text-3xl font-mono font-bold tracking-tighter",children:i.totalXP.toLocaleString()}),o.jsx("div",{className:"text-xs text-blue-200 font-medium tracking-widest uppercase",children:"Total XP"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(Le,{className:"lg:col-span-2 overflow-hidden",children:[o.jsx(it,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ct,{className:"text-sm font-semibold flex items-center gap-2",children:[o.jsx(zy,{className:"h-4 w-4 text-primary"}),"Squad Members"]}),o.jsxs(on,{variant:"outline",className:"text-xs font-mono tabular-nums",children:[l.length,"/5"]})]})}),o.jsxs(Je,{className:"space-y-3 pt-4",children:[(console.log("Rendering Squad Members, membersData:",l.map(ee=>({name:ee.displayName,photoUrl:ee.photoUrl,role:ee.role}))),null),l.map((ee,ye)=>o.jsxs("div",{className:"group/member flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-muted/50 hover:border-border transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:U("font-mono text-center text-sm font-bold w-7 h-7 rounded-md flex items-center justify-center shrink-0 transition-colors",ye===0?"bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-500":"bg-muted text-muted-foreground"),children:ye+1}),o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(bn,{className:"h-9 w-9 border",children:[o.jsx(_n,{src:ee.photoUrl,className:"object-cover",onError:_e=>{console.error("Failed to load avatar for",ee.displayName,"URL:",ee.photoUrl,_e)}}),o.jsx(Nn,{className:"text-xs",children:ee.displayName[0]})]}),ee.role==="leader"&&o.jsx("div",{className:"absolute -top-0.5 -right-0.5 p-0.5 bg-amber-500 rounded-full",children:o.jsx(Os,{className:"h-2.5 w-2.5 text-white fill-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"font-medium flex items-center gap-2 text-sm truncate",children:[o.jsx("span",{className:"truncate",children:ee.displayName}),ee.role==="leader"&&o.jsx(on,{variant:"secondary",className:"text-[10px] px-1 py-0 shrink-0",children:"Leader"})]}),o.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:ee.role})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:"font-bold text-sm font-mono tabular-nums",children:ee.currentXP.toLocaleString()}),o.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"XP"})]}),i.leaderId===(t==null?void 0:t.uid)&&o.jsxs(EE,{children:[o.jsx(jE,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:o.jsx(QL,{className:"h-4 w-4"})})}),o.jsx(Rv,{align:"end",children:ee.uid===(t==null?void 0:t.uid)?o.jsxs(o.Fragment,{children:[o.jsx(Tf,{children:"Leader Options"}),o.jsx(Ui,{}),o.jsxs(zi,{onClick:()=>L(!0),children:[o.jsx(uu,{className:"mr-2 h-4 w-4"}),"Edit Squad"]}),l.length>1&&o.jsxs(o.Fragment,{children:[o.jsx(Ui,{}),o.jsxs(zi,{onClick:()=>W(!0),children:[o.jsx(Os,{className:"mr-2 h-4 w-4"}),"Transfer Leadership"]})]}),o.jsx(Ui,{}),o.jsxs(zi,{onClick:fo,className:"text-destructive focus:text-destructive",children:[o.jsx(ta,{className:"mr-2 h-4 w-4"}),l.length===1?"Disband Squad":"Leave Squad"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Tf,{children:"Member Actions"}),o.jsx(Ui,{}),o.jsxs(zi,{onClick:()=>Ii(ee.uid,ee.displayName),children:[o.jsx(Os,{className:"mr-2 h-4 w-4"}),"Make Leader"]}),o.jsx(Ui,{}),o.jsxs(zi,{onClick:()=>Aa(ee.uid,ee.displayName),className:"text-destructive focus:text-destructive",children:[o.jsx(p6,{className:"mr-2 h-4 w-4"}),"Remove Member"]})]})})]})]},ee.uid)),l.length<5&&o.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 flex flex-col items-center justify-center text-muted-foreground gap-2 hover:bg-muted/50 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>{navigator.clipboard.writeText(i.id),e({title:"Copied!",description:"Share this ID with a friend."})},children:[o.jsx(g6,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Invite a Friend"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[5-l.length," ",5-l.length===1?"slot":"slots"," ","remaining"]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(Le,{className:"border-2 shadow-xl hover:shadow-2xl transition-all duration-300 group/stats overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-blue-500/5 opacity-0 group-hover/stats:opacity-100 transition-opacity duration-500 pointer-events-none"}),o.jsx(it,{className:"pb-3 relative z-10",children:o.jsxs(ct,{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest flex items-center gap-2",children:[o.jsx("div",{className:"h-1 w-1 rounded-full bg-primary animate-pulse"}),"Weekly Stats"]})}),o.jsxs(Je,{className:"space-y-4 pt-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:o.jsx(BL,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Avg. Attendance"})]}),o.jsx("div",{className:"text-3xl font-semibold font-mono tracking-tight text-emerald-600 dark:text-emerald-400",children:"-- %"})]}),o.jsx("div",{className:"h-px bg-border"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:o.jsx(l6,{className:"h-4 w-4 text-primary"})}),o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Class Rank"})]}),o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight",children:["#",pt.findIndex(ee=>ee.id===i.id)+1]})]}),o.jsx("div",{className:"h-px bg-border"}),o.jsxs(ae,{size:"sm",variant:"outline",className:"w-full h-8 text-xs",onClick:()=>{navigator.clipboard.writeText(i.id),e({title:"Copied!",description:"Clan ID copied to clipboard."})},children:[o.jsx(Y_,{className:"h-3 w-3 mr-2"}),"Copy Clan ID"]})]})]})})]}),o.jsx("style",{children:`
                        @keyframes fadeInUp {
                          from {
                            opacity: 0;
                            transform: translateY(10px);
                          }
                          to {
                            opacity: 1;
                            transform: translateY(0);
                          }
                        }
                      `})]})})()}):o.jsxs("div",{className:"max-w-4xl mx-auto w-full py-10 space-y-6 animate-in fade-in zoom-in-95 duration-500",children:[A&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-5 flex flex-col sm:flex-row gap-5 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>M(!1),children:o.jsx(Gr,{className:"h-4 w-4"})})}),o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center shrink-0",children:o.jsx(du,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:"Create Your Study Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed max-w-md",children:"Squad up with friends to track progress together, compete on the leaderboard, and keep each other accountable."})]})]}),o.jsxs(Le,{className:"border-2 border-primary/10 shadow-lg",children:[o.jsxs(it,{children:[o.jsxs(ct,{className:"flex items-center gap-2",children:["Squad Details",o.jsxs(Jo,{children:[o.jsx(Zo,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 rounded-full p-0",children:o.jsx(em,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),o.jsx(Ws,{side:"right",children:o.jsx("p",{className:"text-xs",children:"Give your squad a name and choose a badge to get started!"})})]})]}),o.jsx(kn,{children:"Start a new journey with up to 4 other friends."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{children:"Squad Name"}),o.jsx(Po,{placeholder:"e.g. Night Owls",value:g,onChange:H=>x(H.target.value),maxLength:20})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Dt,{children:"Choose Squad Badge"}),o.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:is.map(H=>{const ge=H.icon,ve=y===H.id;return o.jsxs("div",{onClick:()=>_(H.id),className:U("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",ve?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:[o.jsx(ge,{className:U("h-6 w-6 mb-1",ve?H.color:"text-muted-foreground")}),o.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:H.label})]},H.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{children:"Motto (Max 20 chars)"}),o.jsx(Po,{placeholder:"We never sleep...",value:b,onChange:H=>w(H.target.value),maxLength:20}),o.jsxs("div",{className:"text-xs text-right text-muted-foreground",children:[b.length,"/20"]})]}),o.jsxs(ae,{className:"w-full",size:"lg",onClick:ki,disabled:S||!g||!y,children:[S?o.jsx(Vr,{className:"animate-spin mr-2"}):o.jsx(du,{className:"mr-2 h-4 w-4"}),"Form Squad"]})]})]})]})})}),o.jsx(Lx,{open:Ts,onOpenChange:uo,children:o.jsx(Sf,{className:"max-w-md",children:We&&o.jsxs(o.Fragment,{children:[o.jsxs(Ef,{children:[o.jsx(Cf,{className:"flex items-center gap-3",children:(()=>{const H=is.find(ve=>ve.id===We.tag)||is[0],ge=H.icon;return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:U("p-2 rounded-lg text-white",H.gradient||"bg-primary"),children:o.jsx(ge,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("span",{children:We.name}),o.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:[We.totalXP.toLocaleString()," XP"]})]})]})})()}),o.jsx(Iv,{children:We.description})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground uppercase flex items-center justify-between",children:[o.jsx("span",{children:"Squad Members"}),o.jsxs("span",{className:"text-xs",children:[We.members.length,"/5"]})]}),kr?o.jsx("div",{className:"flex justify-center py-4",children:o.jsx(Vr,{className:"animate-spin h-6 w-6 text-muted-foreground"})}):o.jsx("div",{className:"space-y-3",children:Ci.map((H,ge)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs font-bold text-muted-foreground w-4 text-center",children:ge+1}),o.jsxs(bn,{className:"h-8 w-8",children:[o.jsx(_n,{src:H.photoUrl}),o.jsx(Nn,{children:H.displayName[0]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-sm font-medium leading-none flex items-center gap-1",children:[H.displayName,H.uid===We.leaderId&&o.jsx(Os,{className:"h-3 w-3 text-yellow-500"})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Level ",Math.floor(H.currentXP/1e3)+1]})]})]}),o.jsxs("div",{className:"text-sm font-bold",children:[H.currentXP.toLocaleString()," ",o.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"XP"})]})]},H.uid))})]}),!i&&We.members.length<5&&!We.members.includes(t.uid)&&o.jsxs(jf,{className:"flex-col sm:justify-between gap-2 border-t pt-4",children:[o.jsx("div",{className:"text-xs text-muted-foreground italic flex-1 flex items-center"}),o.jsxs(ae,{className:"w-full sm:w-auto",onClick:fr,disabled:Ze.has(We.id),variant:Ze.has(We.id)?"secondary":"default",children:[o.jsx(c6,{className:"w-4 h-4 mr-2"}),Ze.has(We.id)?"Requested":"Request to Join"]})]})]})})}),o.jsx(Lx,{open:B,onOpenChange:W,children:o.jsxs(Sf,{className:"max-w-md",children:[o.jsxs(Ef,{children:[o.jsxs(Cf,{className:"flex items-center gap-2",children:[o.jsx(Os,{className:"h-5 w-5 text-amber-500"}),"Transfer Leadership"]}),o.jsxs(Iv,{children:["Select a member to become the new squad leader."," ",o.jsx("strong",{children:"You will become a regular member"})," and lose all leader privileges."]})]}),o.jsxs("div",{className:"py-4",children:[o.jsx(Dt,{className:"text-sm font-medium mb-3 block",children:"Select New Leader"}),o.jsx(J4,{value:K,onValueChange:le,children:o.jsx("div",{className:"space-y-2",children:l.filter(H=>H.uid!==(t==null?void 0:t.uid)).map(H=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>le(H.uid),children:[o.jsx(Z4,{value:H.uid,id:H.uid}),o.jsxs(Dt,{htmlFor:H.uid,className:"flex items-center gap-3 flex-1 cursor-pointer",children:[o.jsxs(bn,{className:"h-9 w-9 border",children:[o.jsx(_n,{src:H.photoUrl}),o.jsx(Nn,{children:H.displayName[0]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm",children:H.displayName}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[H.currentXP.toLocaleString()," XP"]})]})]})]},H.uid))})})]}),o.jsxs(jf,{children:[o.jsx(ae,{variant:"outline",onClick:()=>{W(!1),le("")},children:"Cancel"}),o.jsxs(ae,{onClick:Ke,disabled:!K,children:[o.jsx(Os,{className:"mr-2 h-4 w-4"}),"Transfer Leadership"]})]})]})}),o.jsx(Fm,{open:oe,onOpenChange:ce,children:o.jsxs(td,{children:[o.jsxs(nd,{children:[o.jsx(sd,{children:"Leave Squad?"}),o.jsx(od,{children:i&&i.members.length===1?"You are the last member. The squad will be permanently deleted.":"Are you sure you want to leave this squad? You can join another squad or create a new one."})]}),o.jsxs(rd,{children:[o.jsx(ad,{children:"Cancel"}),o.jsx(id,{onClick:As,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:i&&i.members.length===1?"Disband Squad":"Leave Squad"})]})]})}),o.jsx(Fm,{open:F,onOpenChange:Y,children:o.jsxs(td,{children:[o.jsxs(nd,{children:[o.jsx(sd,{children:"Remove Member?"}),o.jsxs(od,{children:["Are you sure you want to remove"," ",o.jsx("strong",{children:ue==null?void 0:ue.name})," from"," ",o.jsx("strong",{children:i==null?void 0:i.name}),"? This action cannot be undone."]})]}),o.jsxs(rd,{children:[o.jsx(ad,{onClick:()=>J(null),children:"Cancel"}),o.jsx(id,{onClick:Rs,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove Member"})]})]})})]})})}function HQ(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(Le,{className:"w-full max-w-md mx-4",children:o.jsxs(Je,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(ur,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function GQ(){const{user:t}=ut(),e=f.useRef(!1);return f.useEffect(()=>{if(!t){e.current=!1;return}if(e.current)return;e.current=!0,(async()=>{try{const r=Ae(be,"leaderboards","all-courses","students",t.uid),s=await wn(r),i=x=>x.toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata"}),a=i(new Date),l=new Date;l.setDate(l.getDate()-1);const c=i(l);let u=0,h=0,m=null,p=[];if(s.exists()){const x=s.data();u=x.currentStreak||0,h=x.longestStreak||0,m=x.lastLoginDate||null,p=x.badges||[]}let g=!1;if(m?m===a||(m===c?(u+=1,g=!0):(u=1,g=!0)):(u=1,g=!0),g){u>h&&(h=u);const x=new Set(p);let y=!1;if(u>=7){const _="7-day-consistent"}u>=5&&x.add("5-day-consistent"),u>=10&&x.add("10-day-consistent"),u>=30&&x.add("30-day-consistent"),await ln(r,{currentStreak:u,longestStreak:h,lastLoginDate:a,badges:Array.from(x),lastSyncedAt:ga(),loginStreak:u},{merge:!0})}}catch(r){console.error("Failed to update streak:",r)}})()},[t]),null}const KQ=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function e5({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=f.useState(10),[i,a]=f.useState(0),l=n&&n.length>0?n:KQ;return f.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const m=Math.random()*15;return Math.min(h+m,90)})},400),u=setInterval(()=>{a(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),o.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),o.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),o.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),o.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:o.jsx(Vr,{className:"h-7 w-7 text-primary animate-spin"})}),o.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:o.jsx(JT,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($T,{className:"h-3 w-3"})," Optimizing"]}),o.jsxs("span",{children:[Math.round(r),"%"]})]})]}),o.jsxs("div",{className:"relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),o.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:o.jsx(F0,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1 pt-0.5",children:[o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const XQ=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function QQ({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=ut(),{theme:a,toggleTheme:l}=Jw(),c=Yp(),u=[{id:"dashboard",label:"Dashboard",icon:r6},{id:"courses",label:"Courses",icon:bd},{id:"settings",label:"Settings",icon:uu}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(x=>x[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",m=()=>o.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),o.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&o.jsx("button",{className:"ml-auto",onClick:r,children:o.jsx(Gr,{className:"w-5 h-5 text-muted-foreground"})})]}),o.jsx("div",{className:"p-4 border-b border-border shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(bn,{className:"h-8 w-8",children:[o.jsx(_n,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nn,{className:"text-xs",children:h})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(x=>o.jsxs("button",{onClick:()=>{e(x.id),c&&r()},className:U("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===x.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(x.icon,{className:"h-4 w-4"}),x.label]},x.id))}),o.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx($0,{className:"w-4 h-4 mr-3"}):o.jsx(hp,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(ae,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[o.jsx(ta,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:o.jsx(m,{})}),c&&n&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function YQ({courses:t}){const[e,n]=f.useState(0),[r,s]=f.useState(0);return f.useEffect(()=>{(async()=>{let a=0,l=0;(await Promise.all(t.map(u=>vr.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?a++:l++)}),n(a),s(l)})()},[t]),o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(Le,{className:"border-border shadow-sm",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ct,{className:"text-sm font-medium",children:"Total Courses"}),o.jsx(bd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Je,{children:o.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),o.jsxs(Le,{className:"border-border shadow-sm",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ct,{className:"text-sm font-medium",children:"Attendance Visible"}),o.jsx(YL,{className:"h-4 w-4 text-emerald-500"})]}),o.jsx(Je,{children:o.jsx("div",{className:"text-2xl font-bold",children:e})})]}),o.jsxs(Le,{className:"border-border shadow-sm",children:[o.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ct,{className:"text-sm font-medium",children:"Attendance Hidden"}),o.jsx(Oy,{className:"h-4 w-4 text-amber-500"})]}),o.jsx(Je,{children:o.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function JQ({courses:t,onRefresh:e,isLoading:n}){const[r,s]=f.useState(null);return o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),o.jsxs(ae,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[o.jsx(z0,{className:U("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),o.jsxs("div",{className:"grid gap-6",children:[t.map(i=>o.jsxs(Le,{className:"overflow-hidden border-border shadow-sm",children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),o.jsx(ae,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&o.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:o.jsx(ZQ,{courseId:i.id})})]},i.id)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No active courses found where you are a teacher."}),o.jsx(ae,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function ZQ({courseId:t}){const{toast:e}=ao(),[n,r]=f.useState(!1),[s,i]=f.useState(""),[a,l]=f.useState("A"),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{let g=!0;return(async()=>{m(!0);const y=await vr.getCourseConfig(t);g&&y&&(r(y.isVisible),i(y.sheetUrl),l(y.emailColumn||"A")),g&&m(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!vr.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await vr.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:a.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?o.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[o.jsx(z0,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):o.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(on,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),o.jsx(Yn,{checked:n,onCheckedChange:r})]})]}),o.jsxs("div",{className:"grid gap-4 max-w-xl",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),o.jsx(Po,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{htmlFor:`email-col-${t}`,children:"Email Column"}),o.jsx(Po,{id:`email-col-${t}`,value:a,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:o.jsx(ae,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?o.jsxs(o.Fragment,{children:[o.jsx(O0,{className:"w-4 h-4 mr-2"}),"Saved"]}):o.jsxs(o.Fragment,{children:[o.jsx(U0,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function eY(){return o.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{children:"Notifications"}),o.jsx(kn,{children:"Configure how you receive alerts."})]}),o.jsx(Je,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cu,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Dt,{htmlFor:"email-notif",children:"Email Summaries"})]}),o.jsx(Yn,{id:"email-notif",defaultChecked:!0})]})})]}),o.jsxs(Le,{children:[o.jsxs(it,{children:[o.jsx(ct,{children:"Display"}),o.jsx(kn,{children:"Customize your dashboard appearance."})]}),o.jsx(Je,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hp,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Dt,{children:"Dark Mode"})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function tY(){const{accessToken:t}=ut(),[e,n]=f.useState("dashboard"),[r,s]=f.useState([]),[i,a]=f.useState(!0),[l,c]=f.useState(!1);async function u(){if(t)try{a(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(m){console.error("Failed to fetch courses",m)}finally{setTimeout(()=>a(!1),1500)}}f.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?o.jsx(e5,{message:"Preparing Teacher Workspace...",tips:XQ}):o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(QQ,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[o.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[o.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:o.jsx(YT,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),o.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&o.jsx(YQ,{courses:r}),e==="courses"&&o.jsx(JQ,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&o.jsx(eY,{})]})]})]})}function nY(){const{signOut:t,signInWithGoogle:e}=ut();return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(Le,{className:"max-w-md w-full border-border shadow-lg",children:[o.jsxs(it,{className:"text-center space-y-2",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:o.jsx(XL,{className:"w-6 h-6 text-muted-foreground"})}),o.jsx(ct,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),o.jsx(kn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),o.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(BT,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(bd,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx($T,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(ws,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:o.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),o.jsxs(mb,{className:"flex flex-col gap-2",children:[o.jsx(ae,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),o.jsxs(ae,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[o.jsx(ta,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function rY(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(wd,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),o.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),o.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Courses:"})," To display your active classes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),o.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),o.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),o.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),o.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function sY(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(wd,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),o.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Track attendance"})," and academic performance"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),o.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),o.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),o.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),o.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),o.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),o.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),o.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),o.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),o.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),o.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),o.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),o.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),o.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),o.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),o.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"The Service will be uninterrupted or error-free"}),o.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),o.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),o.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Violates these Terms of Service"}),o.jsx("li",{children:"Is harmful to other users or the Service"}),o.jsx("li",{children:"Exposes us to legal liability"})]}),o.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),o.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),o.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),o.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function oY(){return o.jsx("div",{className:"min-h-screen bg-background text-foreground font-sans p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[o.jsxs("header",{className:"space-y-4 border-b border-border pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-muted-foreground hover:text-foreground",onClick:()=>window.location.href="/",children:[o.jsx(wd,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Trace Documentation"}),o.jsx("p",{className:"text-muted-foreground text-lg",children:"A comprehensive guide to mastering every feature of Trace"})]}),o.jsxs("nav",{className:"bg-muted/30 rounded-xl p-6 border",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Navigation"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsx("a",{href:"#dashboard",className:"text-sm hover:text-primary transition-colors",children:" Dashboard Overview"}),o.jsx("a",{href:"#timeline",className:"text-sm hover:text-primary transition-colors",children:" Timeline View"}),o.jsx("a",{href:"#attendance",className:"text-sm hover:text-primary transition-colors",children:" Attendance Tracking"}),o.jsx("a",{href:"#clans",className:"text-sm hover:text-primary transition-colors",children:" Study Squads"}),o.jsx("a",{href:"#leaderboard",className:"text-sm hover:text-primary transition-colors",children:" Leaderboard System"}),o.jsx("a",{href:"#notifications",className:"text-sm hover:text-primary transition-colors",children:" Notifications"}),o.jsx("a",{href:"#notes",className:"text-sm hover:text-primary transition-colors",children:" Class Materials"}),o.jsx("a",{href:"#badges",className:"text-sm hover:text-primary transition-colors",children:" Achievements & Badges"})]})]}),o.jsxs("div",{className:"space-y-16",children:[o.jsxs("section",{id:"dashboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-primary/10 rounded-xl",children:o.jsx(fp,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Your command center for all activities"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"20",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-primary/10"}),o.jsx("rect",{x:"220",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"420",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("rect",{x:"620",y:"20",width:"160",height:"160",rx:"12",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("text",{x:"110",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Metrics"}),o.jsx("text",{x:"310",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Attendance"}),o.jsx("text",{x:"510",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Due Soon"}),o.jsx("text",{x:"700",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Rank"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Assignment Metrics"})," - Quick overview of upcoming deadlines (3 days, 7 days, overdue)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Overall Attendance"})," - Aggregated attendance percentage across all courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Class Ranking"})," - See your position in the class leaderboard based on XP"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Weekly Focus Alert"})," - Highlighted banner when you have tasks due in the next 7 days"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Next Actions"})," - Smart list of assignments prioritized by urgency"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Click on any assignment card to see full details and submission links!"]})})]}),o.jsxs("section",{id:"timeline",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(ws,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Timeline View"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Visual calendar of all your assignments"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"200",height:"24",rx:"4",fill:"currentColor",className:"text-blue-500/30"}),o.jsx("rect",{x:"280",y:"80",width:"150",height:"24",rx:"4",fill:"currentColor",className:"text-emerald-500/30"}),o.jsx("rect",{x:"150",y:"120",width:"180",height:"24",rx:"4",fill:"currentColor",className:"text-amber-500/30"}),o.jsx("rect",{x:"400",y:"160",width:"220",height:"24",rx:"4",fill:"currentColor",className:"text-red-500/30"}),o.jsx("rect",{x:"100",y:"200",width:"160",height:"24",rx:"4",fill:"currentColor",className:"text-purple-500/30"}),o.jsx("line",{x1:"40",y1:"10",x2:"760",y2:"10",stroke:"currentColor",strokeWidth:"2",className:"text-border"}),o.jsx("text",{x:"400",y:"250",textAnchor:"middle",className:"text-xs fill-current text-muted-foreground",children:"Time "})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Horizontal Gantt View"})," - See all assignments laid out chronologically"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Color-Coded Courses"})," - Each course has its unique color for easy identification"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Zoom Controls"})," - Adjust timeline scale to see days, weeks, or months"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Interactive Bars"})," - Click any assignment bar to view details and open submission link"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the zoom in/out buttons to adjust the timeline scale for better planning!"]})})]}),o.jsxs("section",{id:"attendance",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(ws,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Attendance Tracking"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time attendance monitoring from Google Sheets"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-border"}),o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeDasharray:"283 377",className:"text-emerald-500"}),o.jsx("text",{x:"100",y:"105",textAnchor:"middle",className:"text-2xl font-bold fill-current",children:"75%"}),o.jsx("rect",{x:"250",y:"40",width:"500",height:"30",rx:"4",fill:"currentColor",className:"text-muted"}),o.jsx("rect",{x:"250",y:"40",width:"375",height:"30",rx:"4",fill:"currentColor",className:"text-emerald-500/50"}),o.jsx("text",{x:"500",y:"105",textAnchor:"middle",className:"text-sm fill-current",children:"15/20 Classes Attended"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Per-Course Tracking"})," - Individual attendance percentage for each subject"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Google Sheets Integration"})," - Teachers link their Google Sheets to automatically track attendance"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status Indicators"})," - Color-coded alerts (Safe: 75%+, Warning: 70-75%, Danger: <70%)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Privacy"})," - Password protection option for sensitive attendance sheets"]})]})]})]})]}),o.jsxs("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4 space-y-2",children:[o.jsx("p",{className:"text-sm font-semibold",children:" Setup Required:"}),o.jsx("p",{className:"text-sm",children:"Teachers need to configure attendance sheets in Settings. Students see data only after teacher setup."})]})]}),o.jsxs("section",{id:"clans",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl",children:o.jsx(zy,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Study Squads (Clans)"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Form teams and compete with classmates"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"200",cy:"100",r:"35",fill:"currentColor",className:"text-primary/20"}),o.jsx("circle",{cx:"280",cy:"100",r:"35",fill:"currentColor",className:"text-primary/20"}),o.jsx("circle",{cx:"360",cy:"100",r:"35",fill:"currentColor",className:"text-primary/20"}),o.jsx("circle",{cx:"440",cy:"100",r:"35",fill:"currentColor",className:"text-primary/20"}),o.jsx("circle",{cx:"520",cy:"100",r:"35",fill:"currentColor",className:"text-primary/20"}),o.jsx("polygon",{points:"200,55 190,70 210,70",fill:"currentColor",className:"text-amber-500"}),o.jsx("text",{x:"400",y:"170",textAnchor:"middle",className:"text-sm fill-current",children:"Your Squad (Max 5 Members)"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Create or Join Teams"})," - Form study groups with up to 5 members"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Squad Leader"})," - Founder gets special privileges (edit name, description, badge)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Squad XP"})," - Combined total XP of all members determines leaderboard rank"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Invite System"})," - Share your unique Clan ID to invite friends"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Custom Badges"})," - Choose from 12 unique icons (Warrior, Shield, Rocket, etc.)"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Copy your Clan ID from settings and share it with friends to grow your squad!"]})})]}),o.jsxs("section",{id:"leaderboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-amber-500/10 rounded-xl",children:o.jsx(Yo,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Leaderboard & XP System"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Compete and earn rewards for academic progress"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"320",y:"60",width:"160",height:"120",fill:"currentColor",className:"text-amber-500/20"}),o.jsx("rect",{x:"140",y:"100",width:"160",height:"80",fill:"currentColor",className:"text-slate-400/20"}),o.jsx("rect",{x:"500",y:"120",width:"160",height:"60",fill:"currentColor",className:"text-orange-600/20"}),o.jsx("text",{x:"400",y:"130",textAnchor:"middle",className:"text-3xl font-bold fill-current text-amber-500",children:"1"}),o.jsx("text",{x:"220",y:"150",textAnchor:"middle",className:"text-2xl font-bold fill-current text-slate-500",children:"2"}),o.jsx("text",{x:"580",y:"160",textAnchor:"middle",className:"text-2xl font-bold fill-current text-orange-600",children:"3"}),o.jsx("text",{x:"400",y:"220",textAnchor:"middle",className:"text-sm fill-current",children:"Based on Total XP"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"How to Earn XP:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-emerald-500",children:"+50 XP"}),o.jsxs("div",{children:["Complete an assignment ",o.jsx("strong",{children:"before deadline"})]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-blue-500",children:"+100 XP"}),o.jsx("div",{children:"Unlock achievement badges"})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-purple-500",children:"+25 XP"}),o.jsx("div",{children:"Daily streak milestone"})]})]}),o.jsx("h3",{className:"font-semibold pt-4",children:"Leaderboard Views:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Class View"})," - Compete with classmates in your courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"College View"})," - See rankings across your entire institution"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Maintain a daily streak by completing at least one task each day to earn bonus XP!"]})})]}),o.jsxs("section",{id:"notifications",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl",children:o.jsx(cu,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Activity Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on classmate achievements"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full mt-1",children:o.jsx(Yo,{className:"h-4 w-4 text-emerald-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Rahul Kumar"}),' earned the "Perfect Week" badge!']}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-blue-500/10 rounded-full mt-1",children:o.jsx(m6,{className:"h-4 w-4 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Priya Sharma"})," moved up to #3 on the leaderboard!"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"5 hours ago"})]})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"What You'll See:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Badge Achievements"})," - When classmates unlock new badges"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Leaderboard Updates"})," - Significant rank changes"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Squad Activities"})," - New members joining, achievements"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Red dot on bell icon indicates unread notifications!"]})})]}),o.jsxs("section",{id:"notes",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:o.jsx(bd,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Class Materials & Notes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Access all study resources in one place"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("rect",{x:"230",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"410",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-purple-500/10"}),o.jsx("rect",{x:"590",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("text",{x:"125",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"PDFs"}),o.jsx("text",{x:"305",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Links"}),o.jsx("text",{x:"485",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Videos"}),o.jsx("text",{x:"665",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Docs"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"All File Types"})," - View PDFs, documents, links, videos, and more"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Auto-Sync from Classroom"})," - Automatically fetches materials posted by teachers"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Organized by Course"})," - Filter materials by subject for easy access"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Search Functionality"})," - Quickly find specific materials by title or description"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the course filter dropdown to view materials for specific subjects!"]})})]}),o.jsxs("section",{id:"badges",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-xl",children:o.jsx(Yo,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Achievements & Badges"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Unlock rewards for consistent performance"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Streak Master"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"7 day streak"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Book Worm"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"50 completed"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Perfect Week"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"100% attendance"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Early Bird"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Submit early"})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Available Badges:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Academic Excellence"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Task Crusher (50 assignments)"}),o.jsx("li",{children:" Centurion (100 assignments)"}),o.jsx("li",{children:" Maximum Effort (200 assignments)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Attendance"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Perfect Week (100% weekly)"}),o.jsx("li",{children:" Attendance Champion"}),o.jsx("li",{children:" Never Miss"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Consistency"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" On Fire (3 day streak)"}),o.jsx("li",{children:" Unstoppable (7 day streak)"}),o.jsx("li",{children:" Immortal (30 day streak)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Time Management"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Early Bird (submit early)"}),o.jsx("li",{children:" Just in Time (last minute)"}),o.jsx("li",{children:" Time Lord (never late)"})]})]})]})]})]}),o.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Challenge yourself:"})," Try to collect all badges! Each one awards bonus XP."]})})]})]}),o.jsxs("section",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-xl p-8 border border-primary/20",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Quick Start Guide"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Sign in with Google"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your Google Classroom account to sync courses and assignments"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Explore the Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Check your upcoming tasks, attendance, and class ranking"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Join or Create a Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Team up with friends to compete on the leaderboard"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"4"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Start Earning XP"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete assignments and unlock badges to climb the leaderboard"})]})]})]})]}),o.jsxs("section",{className:"border-t pt-8",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Need Help?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"If you have questions or need assistance with any feature, feel free to reach out:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-primary hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]}),o.jsxs("footer",{className:"pt-8 mt-8 border-t text-sm text-muted-foreground text-center",children:[" ",new Date().getFullYear()," Trace - Your Academic Command Center"]})]})})}const iY=()=>"/";function aY(){const[t,e]=f.useState(!1),n=iY();return o.jsx(iT,{base:n,children:o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(VB,{mobileOpen:t,onMobileClose:()=>e(!1)}),o.jsx(GQ,{}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[o.jsx(lW,{onMobileMenuClick:()=>e(!0)}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:o.jsxs(v3,{children:[o.jsx(mr,{path:"/pipeline",component:RG}),o.jsx(mr,{path:"/",children:()=>{const[,r]=op();return f.useEffect(()=>{r("/dashboard")},[r]),null}}),o.jsx(mr,{path:"/leaderboard",component:gX}),o.jsx(mr,{path:"/clans",component:WQ}),o.jsx(mr,{path:"/timeline",component:hK}),o.jsx(mr,{path:"/dashboard",component:EK}),o.jsx(mr,{path:"/notes",component:jK}),o.jsx(mr,{path:"/attendance",component:vX}),o.jsx(mr,{path:"/settings",component:hX}),o.jsx(mr,{path:"/settings/notifications",component:fX}),o.jsx(mr,{path:"/settings/integrations",component:mX}),o.jsx(mr,{component:HQ})]})})]})]})})}function lY(){const{user:t,loading:e,role:n}=ut();return An(),window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy")?o.jsx(rY,{}):window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service")?o.jsx(sY,{}):window.location.pathname==="/docs"||window.location.pathname==="/docs/"||window.location.pathname.endsWith("/docs")?o.jsx(oY,{}):e?o.jsx(e5,{message:"Authenticating..."}):t?n==="teacher"?o.jsx(tY,{}):n==="no_access"?o.jsx(nY,{}):o.jsx(aY,{}):o.jsx(yW,{})}function cY(){return o.jsx(B3,{client:H3,children:o.jsx(SB,{children:o.jsx(NB,{children:o.jsx(AB,{children:o.jsxs(jd,{children:[o.jsx(eV,{}),o.jsx(lY,{})]})})})})})}XC(document.getElementById("root")).render(o.jsx(cY,{}));
