var yb=t=>{throw TypeError(t)};var Mp=(t,e,n)=>e.has(t)||yb("Cannot "+n);var Y=(t,e,n)=>(Mp(t,e,"read from private field"),n?n.call(t):e.get(t)),He=(t,e,n)=>e.has(t)?yb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Te=(t,e,n,r)=>(Mp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Mp(t,e,"access private method"),n);var _d=(t,e,n,r)=>({set _(s){Te(t,e,s,n)},get _(){return Y(t,e,r)}});function hD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function CE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kE={exports:{}},Qf={},jE={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=Symbol.for("react.element"),fD=Symbol.for("react.portal"),mD=Symbol.for("react.fragment"),pD=Symbol.for("react.strict_mode"),gD=Symbol.for("react.profiler"),yD=Symbol.for("react.provider"),vD=Symbol.for("react.context"),xD=Symbol.for("react.forward_ref"),wD=Symbol.for("react.suspense"),bD=Symbol.for("react.memo"),_D=Symbol.for("react.lazy"),vb=Symbol.iterator;function SD(t){return t===null||typeof t!="object"?null:(t=vb&&t[vb]||t["@@iterator"],typeof t=="function"?t:null)}var IE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AE=Object.assign,RE={};function bl(t,e,n){this.props=t,this.context=e,this.refs=RE,this.updater=n||IE}bl.prototype.isReactComponent={};bl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PE(){}PE.prototype=bl.prototype;function Pv(t,e,n){this.props=t,this.context=e,this.refs=RE,this.updater=n||IE}var Dv=Pv.prototype=new PE;Dv.constructor=Pv;AE(Dv,bl.prototype);Dv.isPureReactComponent=!0;var xb=Array.isArray,DE=Object.prototype.hasOwnProperty,Mv={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function OE(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)DE.call(e,r)&&!ME.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Eu,type:t,key:i,ref:a,props:s,_owner:Mv.current}}function ED(t,e){return{$$typeof:Eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ov(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eu}function ND(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wb=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ND(""+t.key):e.toString(36)}function ih(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Eu:case fD:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Op(a,0):r,xb(s)?(n="",t!=null&&(n=t.replace(wb,"$&/")+"/"),ih(s,e,n,"",function(u){return u})):s!=null&&(Ov(s)&&(s=ED(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",xb(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Op(i,l);a+=ih(i,e,n,c,s)}else if(c=SD(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Op(i,l++),a+=ih(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Sd(t,e,n){if(t==null)return t;var r=[],s=0;return ih(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},oh={transition:null},CD={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:oh,ReactCurrentOwner:Mv};function LE(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Sd,forEach:function(t,e,n){Sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sd(t,function(){e++}),e},toArray:function(t){return Sd(t,function(e){return e})||[]},only:function(t){if(!Ov(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=bl;Ie.Fragment=mD;Ie.Profiler=gD;Ie.PureComponent=Pv;Ie.StrictMode=pD;Ie.Suspense=wD;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CD;Ie.act=LE;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AE({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Mv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)DE.call(e,c)&&!ME.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Eu,type:t.type,key:s,ref:i,props:r,_owner:a}};Ie.createContext=function(t){return t={$$typeof:vD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yD,_context:t},t.Consumer=t};Ie.createElement=OE;Ie.createFactory=function(t){var e=OE.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:xD,render:t}};Ie.isValidElement=Ov;Ie.lazy=function(t){return{$$typeof:_D,_payload:{_status:-1,_result:t},_init:TD}};Ie.memo=function(t,e){return{$$typeof:bD,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=oh.transition;oh.transition={};try{t()}finally{oh.transition=e}};Ie.unstable_act=LE;Ie.useCallback=function(t,e){return fn.current.useCallback(t,e)};Ie.useContext=function(t){return fn.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return fn.current.useEffect(t,e)};Ie.useId=function(){return fn.current.useId()};Ie.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return fn.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Ie.useRef=function(t){return fn.current.useRef(t)};Ie.useState=function(t){return fn.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return fn.current.useTransition()};Ie.version="18.3.1";jE.exports=Ie;var f=jE.exports;const Ce=CE(f),VE=hD({__proto__:null,default:Ce},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kD=f,jD=Symbol.for("react.element"),ID=Symbol.for("react.fragment"),AD=Object.prototype.hasOwnProperty,RD=kD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PD={key:!0,ref:!0,__self:!0,__source:!0};function FE(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)AD.call(e,r)&&!PD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jD,type:t,key:i,ref:a,props:s,_owner:RD.current}}Qf.Fragment=ID;Qf.jsx=FE;Qf.jsxs=FE;kE.exports=Qf;var o=kE.exports,zE={exports:{}},Hn={},UE={exports:{}},$E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,q){var z=L.length;L.push(q);e:for(;0<z;){var B=z-1>>>1,Q=L[B];if(0<s(Q,q))L[B]=q,L[z]=Q,z=B;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],z=L.pop();if(z!==q){L[0]=z;e:for(var B=0,Q=L.length,re=Q>>>1;B<re;){var de=2*(B+1)-1,se=L[de],ae=de+1,V=L[ae];if(0>s(se,z))ae<Q&&0>s(V,se)?(L[B]=V,L[ae]=z,B=ae):(L[B]=se,L[de]=z,B=de);else if(ae<Q&&0>s(V,z))L[B]=V,L[ae]=z,B=ae;else break e}}return q}function s(L,q){var z=L.sortIndex-q.sortIndex;return z!==0?z:L.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,m=null,p=3,g=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=L)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function j(L){if(v=!1,S(L),!w)if(n(c)!==null)w=!0,te(D);else{var q=n(u);q!==null&&J(j,q.startTime-L)}}function D(L,q){w=!1,v&&(v=!1,b(C),C=-1),g=!0;var z=p;try{for(S(q),m=n(c);m!==null&&(!(m.expirationTime>q)||L&&!I());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var Q=B(m.expirationTime<=q);q=t.unstable_now(),typeof Q=="function"?m.callback=Q:m===n(c)&&r(c),S(q)}else r(c);m=n(c)}if(m!==null)var re=!0;else{var de=n(u);de!==null&&J(j,de.startTime-q),re=!1}return re}finally{m=null,p=z,g=!1}}var M=!1,E=null,C=-1,T=5,k=-1;function I(){return!(t.unstable_now()-k<T)}function P(){if(E!==null){var L=t.unstable_now();k=L;var q=!0;try{q=E(!0,L)}finally{q?R():(M=!1,E=null)}}else M=!1}var R;if(typeof x=="function")R=function(){x(P)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ie=O.port2;O.port1.onmessage=P,R=function(){ie.postMessage(null)}}else R=function(){_(P,0)};function te(L){E=L,M||(M=!0,R())}function J(L,q){C=_(function(){L(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,te(D))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var z=p;p=q;try{return L()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return q()}finally{p=z}},t.unstable_scheduleCallback=function(L,q,z){var B=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?B+z:B):z=B,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=z+Q,L={id:h++,callback:q,priorityLevel:L,startTime:z,expirationTime:Q,sortIndex:-1},z>B?(L.sortIndex=z,e(u,L),n(c)===null&&L===n(u)&&(v?(b(C),C=-1):v=!0,J(j,z-B))):(L.sortIndex=Q,e(c,L),w||g||(w=!0,te(D))),L},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(L){var q=p;return function(){var z=p;p=q;try{return L.apply(this,arguments)}finally{p=z}}}})($E);UE.exports=$E;var DD=UE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD=f,$n=DD;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BE=new Set,$c={};function Ko(t,e){Ya(t,e),Ya(t+"Capture",e)}function Ya(t,e){for($c[t]=e,t=0;t<e.length;t++)BE.add(e[t])}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$g=Object.prototype.hasOwnProperty,OD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bb={},_b={};function LD(t){return $g.call(_b,t)?!0:$g.call(bb,t)?!1:OD.test(t)?_b[t]=!0:(bb[t]=!0,!1)}function VD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FD(t,e,n,r){if(e===null||typeof e>"u"||VD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lv=/[\-:]([a-z])/g;function Vv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lv,Vv);Wt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lv,Vv);Wt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lv,Vv);Wt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fv(t,e,n,r){var s=Wt.hasOwnProperty(e)?Wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FD(e,n,s,r)&&(n=null),r||s===null?LD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $s=MD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),da=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),WE=Symbol.for("react.context"),Uv=Symbol.for("react.forward_ref"),Hg=Symbol.for("react.suspense"),Wg=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),ii=Symbol.for("react.lazy"),qE=Symbol.for("react.offscreen"),Sb=Symbol.iterator;function nc(t){return t===null||typeof t!="object"?null:(t=Sb&&t[Sb]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Lp;function hc(t){if(Lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lp=e&&e[1]||""}return`
`+Lp+t}var Vp=!1;function Fp(t,e){if(!t||Vp)return"";Vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hc(t):""}function zD(t){switch(t.tag){case 5:return hc(t.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return t=Fp(t.type,!1),t;case 11:return t=Fp(t.type.render,!1),t;case 1:return t=Fp(t.type,!0),t;default:return""}}function qg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ha:return"Fragment";case da:return"Portal";case Bg:return"Profiler";case zv:return"StrictMode";case Hg:return"Suspense";case Wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WE:return(t.displayName||"Context")+".Consumer";case HE:return(t._context.displayName||"Context")+".Provider";case Uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $v:return e=t.displayName||null,e!==null?e:qg(t.type)||"Memo";case ii:e=t._payload,t=t._init;try{return qg(t(e))}catch{}}return null}function UD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(e);case 8:return e===zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $D(t){var e=GE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nd(t){t._valueTracker||(t._valueTracker=$D(t))}function KE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Eb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QE(t,e){e=e.checked,e!=null&&Fv(t,"checked",e,!1)}function Kg(t,e){QE(t,e);var n=Oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qg(t,e.type,Oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qg(t,e,n){(e!=="number"||Mh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fc=Array.isArray;function Ta(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Oi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(fc(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oi(n)}}function XE(t,e){var n=Oi(e.value),r=Oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Td,JE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Td=Td||document.createElement("div"),Td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BD=["Webkit","ms","Moz","O"];Object.keys(bc).forEach(function(t){BD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bc[e]=bc[t]})});function ZE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bc.hasOwnProperty(t)&&bc[t]?(""+e).trim():e+"px"}function eN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HD=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jg(t,e){if(e){if(HD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Zg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ey=null;function Bv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ty=null,Ca=null,ka=null;function kb(t){if(t=Cu(t)){if(typeof ty!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=em(e),ty(t.stateNode,t.type,e))}}function tN(t){Ca?ka?ka.push(t):ka=[t]:Ca=t}function nN(){if(Ca){var t=Ca,e=ka;if(ka=Ca=null,kb(t),e)for(t=0;t<e.length;t++)kb(e[t])}}function rN(t,e){return t(e)}function sN(){}var zp=!1;function iN(t,e,n){if(zp)return t(e,n);zp=!0;try{return rN(t,e,n)}finally{zp=!1,(Ca!==null||ka!==null)&&(sN(),nN())}}function Hc(t,e){var n=t.stateNode;if(n===null)return null;var r=em(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var ny=!1;if(js)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){ny=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{ny=!1}function WD(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var _c=!1,Oh=null,Lh=!1,ry=null,qD={onError:function(t){_c=!0,Oh=t}};function GD(t,e,n,r,s,i,a,l,c){_c=!1,Oh=null,WD.apply(qD,arguments)}function KD(t,e,n,r,s,i,a,l,c){if(GD.apply(this,arguments),_c){if(_c){var u=Oh;_c=!1,Oh=null}else throw Error(ne(198));Lh||(Lh=!0,ry=u)}}function Qo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jb(t){if(Qo(t)!==t)throw Error(ne(188))}function QD(t){var e=t.alternate;if(!e){if(e=Qo(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jb(s),t;if(i===r)return jb(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function aN(t){return t=QD(t),t!==null?lN(t):null}function lN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lN(t);if(e!==null)return e;t=t.sibling}return null}var cN=$n.unstable_scheduleCallback,Ib=$n.unstable_cancelCallback,XD=$n.unstable_shouldYield,YD=$n.unstable_requestPaint,yt=$n.unstable_now,JD=$n.unstable_getCurrentPriorityLevel,Hv=$n.unstable_ImmediatePriority,uN=$n.unstable_UserBlockingPriority,Vh=$n.unstable_NormalPriority,ZD=$n.unstable_LowPriority,dN=$n.unstable_IdlePriority,Xf=null,Jr=null;function e4(t){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(Xf,t,void 0,(t.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:r4,t4=Math.log,n4=Math.LN2;function r4(t){return t>>>=0,t===0?32:31-(t4(t)/n4|0)|0}var Cd=64,kd=4194304;function mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=mc(l):(i&=a,i!==0&&(r=mc(i)))}else a=n&~s,a!==0?r=mc(a):i!==0&&(r=mc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nr(e),s=1<<n,r|=t[n],e&=~s;return r}function s4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Nr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=s4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function sy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hN(){var t=Cd;return Cd<<=1,!(Cd&4194240)&&(Cd=64),t}function Up(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nr(e),t[e]=n}function o4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Wv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ke=0;function fN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mN,qv,pN,gN,yN,iy=!1,jd=[],bi=null,_i=null,Si=null,Wc=new Map,qc=new Map,li=[],a4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ab(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function sc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Cu(e),e!==null&&qv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function l4(t,e,n,r,s){switch(e){case"focusin":return bi=sc(bi,t,e,n,r,s),!0;case"dragenter":return _i=sc(_i,t,e,n,r,s),!0;case"mouseover":return Si=sc(Si,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wc.set(i,sc(Wc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qc.set(i,sc(qc.get(i)||null,t,e,n,r,s)),!0}return!1}function vN(t){var e=xo(t.target);if(e!==null){var n=Qo(e);if(n!==null){if(e=n.tag,e===13){if(e=oN(n),e!==null){t.blockedOn=e,yN(t.priority,function(){pN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ah(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ey=r,n.target.dispatchEvent(r),ey=null}else return e=Cu(n),e!==null&&qv(e),t.blockedOn=n,!1;e.shift()}return!0}function Rb(t,e,n){ah(t)&&n.delete(e)}function c4(){iy=!1,bi!==null&&ah(bi)&&(bi=null),_i!==null&&ah(_i)&&(_i=null),Si!==null&&ah(Si)&&(Si=null),Wc.forEach(Rb),qc.forEach(Rb)}function ic(t,e){t.blockedOn===e&&(t.blockedOn=null,iy||(iy=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,c4)))}function Gc(t){function e(s){return ic(s,t)}if(0<jd.length){ic(jd[0],t);for(var n=1;n<jd.length;n++){var r=jd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&ic(bi,t),_i!==null&&ic(_i,t),Si!==null&&ic(Si,t),Wc.forEach(e),qc.forEach(e),n=0;n<li.length;n++)r=li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<li.length&&(n=li[0],n.blockedOn===null);)vN(n),n.blockedOn===null&&li.shift()}var ja=$s.ReactCurrentBatchConfig,zh=!0;function u4(t,e,n,r){var s=Ke,i=ja.transition;ja.transition=null;try{Ke=1,Gv(t,e,n,r)}finally{Ke=s,ja.transition=i}}function d4(t,e,n,r){var s=Ke,i=ja.transition;ja.transition=null;try{Ke=4,Gv(t,e,n,r)}finally{Ke=s,ja.transition=i}}function Gv(t,e,n,r){if(zh){var s=oy(t,e,n,r);if(s===null)Yp(t,e,r,Uh,n),Ab(t,r);else if(l4(s,t,e,n,r))r.stopPropagation();else if(Ab(t,r),e&4&&-1<a4.indexOf(t)){for(;s!==null;){var i=Cu(s);if(i!==null&&mN(i),i=oy(t,e,n,r),i===null&&Yp(t,e,r,Uh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yp(t,e,r,null,n)}}var Uh=null;function oy(t,e,n,r){if(Uh=null,t=Bv(r),t=xo(t),t!==null)if(e=Qo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uh=t,null}function xN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JD()){case Hv:return 1;case uN:return 4;case Vh:case ZD:return 16;case dN:return 536870912;default:return 16}default:return 16}}var vi=null,Kv=null,lh=null;function wN(){if(lh)return lh;var t,e=Kv,n=e.length,r,s="value"in vi?vi.value:vi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return lh=s.slice(t,1<r?1-r:void 0)}function ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Id(){return!0}function Pb(){return!1}function Wn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Id:Pb,this.isPropagationStopped=Pb,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Id)},persist:function(){},isPersistent:Id}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qv=Wn(_l),Tu=ut({},_l,{view:0,detail:0}),h4=Wn(Tu),$p,Bp,oc,Yf=ut({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oc&&(oc&&t.type==="mousemove"?($p=t.screenX-oc.screenX,Bp=t.screenY-oc.screenY):Bp=$p=0,oc=t),$p)},movementY:function(t){return"movementY"in t?t.movementY:Bp}}),Db=Wn(Yf),f4=ut({},Yf,{dataTransfer:0}),m4=Wn(f4),p4=ut({},Tu,{relatedTarget:0}),Hp=Wn(p4),g4=ut({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),y4=Wn(g4),v4=ut({},_l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x4=Wn(v4),w4=ut({},_l,{data:0}),Mb=Wn(w4),b4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=S4[t])?!!e[t]:!1}function Xv(){return E4}var N4=ut({},Tu,{key:function(t){if(t.key){var e=b4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(t){return t.type==="keypress"?ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T4=Wn(N4),C4=ut({},Yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ob=Wn(C4),k4=ut({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),j4=Wn(k4),I4=ut({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),A4=Wn(I4),R4=ut({},Yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),P4=Wn(R4),D4=[9,13,27,32],Yv=js&&"CompositionEvent"in window,Sc=null;js&&"documentMode"in document&&(Sc=document.documentMode);var M4=js&&"TextEvent"in window&&!Sc,bN=js&&(!Yv||Sc&&8<Sc&&11>=Sc),Lb=" ",Vb=!1;function _N(t,e){switch(t){case"keyup":return D4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fa=!1;function O4(t,e){switch(t){case"compositionend":return SN(e);case"keypress":return e.which!==32?null:(Vb=!0,Lb);case"textInput":return t=e.data,t===Lb&&Vb?null:t;default:return null}}function L4(t,e){if(fa)return t==="compositionend"||!Yv&&_N(t,e)?(t=wN(),lh=Kv=vi=null,fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bN&&e.locale!=="ko"?null:e.data;default:return null}}var V4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V4[t.type]:e==="textarea"}function EN(t,e,n,r){tN(r),e=$h(e,"onChange"),0<e.length&&(n=new Qv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ec=null,Kc=null;function F4(t){MN(t,0)}function Jf(t){var e=ga(t);if(KE(e))return t}function z4(t,e){if(t==="change")return e}var NN=!1;if(js){var Wp;if(js){var qp="oninput"in document;if(!qp){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),qp=typeof zb.oninput=="function"}Wp=qp}else Wp=!1;NN=Wp&&(!document.documentMode||9<document.documentMode)}function Ub(){Ec&&(Ec.detachEvent("onpropertychange",TN),Kc=Ec=null)}function TN(t){if(t.propertyName==="value"&&Jf(Kc)){var e=[];EN(e,Kc,t,Bv(t)),iN(F4,e)}}function U4(t,e,n){t==="focusin"?(Ub(),Ec=e,Kc=n,Ec.attachEvent("onpropertychange",TN)):t==="focusout"&&Ub()}function $4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jf(Kc)}function B4(t,e){if(t==="click")return Jf(e)}function H4(t,e){if(t==="input"||t==="change")return Jf(e)}function W4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:W4;function Qc(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$g.call(e,s)||!Ir(t[s],e[s]))return!1}return!0}function $b(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bb(t,e){var n=$b(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$b(n)}}function CN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?CN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kN(){for(var t=window,e=Mh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mh(t.document)}return e}function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q4(t){var e=kN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&CN(n.ownerDocument.documentElement,n)){if(r!==null&&Jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Bb(n,i);var a=Bb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G4=js&&"documentMode"in document&&11>=document.documentMode,ma=null,ay=null,Nc=null,ly=!1;function Hb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ly||ma==null||ma!==Mh(r)||(r=ma,"selectionStart"in r&&Jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nc&&Qc(Nc,r)||(Nc=r,r=$h(ay,"onSelect"),0<r.length&&(e=new Qv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ma)))}function Ad(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pa={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},Gp={},jN={};js&&(jN=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Zf(t){if(Gp[t])return Gp[t];if(!pa[t])return t;var e=pa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jN)return Gp[t]=e[n];return t}var IN=Zf("animationend"),AN=Zf("animationiteration"),RN=Zf("animationstart"),PN=Zf("transitionend"),DN=new Map,Wb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){DN.set(t,e),Ko(e,[t])}for(var Kp=0;Kp<Wb.length;Kp++){var Qp=Wb[Kp],K4=Qp.toLowerCase(),Q4=Qp[0].toUpperCase()+Qp.slice(1);Ki(K4,"on"+Q4)}Ki(IN,"onAnimationEnd");Ki(AN,"onAnimationIteration");Ki(RN,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(PN,"onTransitionEnd");Ya("onMouseEnter",["mouseout","mouseover"]);Ya("onMouseLeave",["mouseout","mouseover"]);Ya("onPointerEnter",["pointerout","pointerover"]);Ya("onPointerLeave",["pointerout","pointerover"]);Ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X4=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function qb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KD(r,e,void 0,t),t.currentTarget=null}function MN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;qb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;qb(s,l,u),i=c}}}if(Lh)throw t=ry,Lh=!1,ry=null,t}function st(t,e){var n=e[fy];n===void 0&&(n=e[fy]=new Set);var r=t+"__bubble";n.has(r)||(ON(e,t,2,!1),n.add(r))}function Xp(t,e,n){var r=0;e&&(r|=4),ON(n,t,r,e)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function Xc(t){if(!t[Rd]){t[Rd]=!0,BE.forEach(function(n){n!=="selectionchange"&&(X4.has(n)||Xp(n,!1,t),Xp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rd]||(e[Rd]=!0,Xp("selectionchange",!1,e))}}function ON(t,e,n,r){switch(xN(e)){case 1:var s=u4;break;case 4:s=d4;break;default:s=Gv}n=s.bind(null,e,n,t),s=void 0,!ny||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=xo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}iN(function(){var u=i,h=Bv(n),m=[];e:{var p=DN.get(t);if(p!==void 0){var g=Qv,w=t;switch(t){case"keypress":if(ch(n)===0)break e;case"keydown":case"keyup":g=T4;break;case"focusin":w="focus",g=Hp;break;case"focusout":w="blur",g=Hp;break;case"beforeblur":case"afterblur":g=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=m4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=j4;break;case IN:case AN:case RN:g=y4;break;case PN:g=A4;break;case"scroll":g=h4;break;case"wheel":g=P4;break;case"copy":case"cut":case"paste":g=x4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ob}var v=(e&4)!==0,_=!v&&t==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,S;x!==null;){S=x;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,b!==null&&(j=Hc(x,b),j!=null&&v.push(Yc(x,j,S)))),_)break;x=x.return}0<v.length&&(p=new g(p,w,null,n,h),m.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==ey&&(w=n.relatedTarget||n.fromElement)&&(xo(w)||w[Is]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?xo(w):null,w!==null&&(_=Qo(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(v=Db,j="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ob,j="onPointerLeave",b="onPointerEnter",x="pointer"),_=g==null?p:ga(g),S=w==null?p:ga(w),p=new v(j,x+"leave",g,n,h),p.target=_,p.relatedTarget=S,j=null,xo(h)===u&&(v=new v(b,x+"enter",w,n,h),v.target=S,v.relatedTarget=_,j=v),_=j,g&&w)t:{for(v=g,b=w,x=0,S=v;S;S=ra(S))x++;for(S=0,j=b;j;j=ra(j))S++;for(;0<x-S;)v=ra(v),x--;for(;0<S-x;)b=ra(b),S--;for(;x--;){if(v===b||b!==null&&v===b.alternate)break t;v=ra(v),b=ra(b)}v=null}else v=null;g!==null&&Gb(m,p,g,v,!1),w!==null&&_!==null&&Gb(m,_,w,v,!0)}}e:{if(p=u?ga(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=z4;else if(Fb(p))if(NN)D=H4;else{D=$4;var M=U4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=B4);if(D&&(D=D(t,u))){EN(m,D,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Qg(p,"number",p.value)}switch(M=u?ga(u):window,t){case"focusin":(Fb(M)||M.contentEditable==="true")&&(ma=M,ay=u,Nc=null);break;case"focusout":Nc=ay=ma=null;break;case"mousedown":ly=!0;break;case"contextmenu":case"mouseup":case"dragend":ly=!1,Hb(m,n,h);break;case"selectionchange":if(G4)break;case"keydown":case"keyup":Hb(m,n,h)}var E;if(Yv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fa?_N(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(bN&&n.locale!=="ko"&&(fa||C!=="onCompositionStart"?C==="onCompositionEnd"&&fa&&(E=wN()):(vi=h,Kv="value"in vi?vi.value:vi.textContent,fa=!0)),M=$h(u,C),0<M.length&&(C=new Mb(C,t,null,n,h),m.push({event:C,listeners:M}),E?C.data=E:(E=SN(n),E!==null&&(C.data=E)))),(E=M4?O4(t,n):L4(t,n))&&(u=$h(u,"onBeforeInput"),0<u.length&&(h=new Mb("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:u}),h.data=E))}MN(m,e)})}function Yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $h(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hc(t,n),i!=null&&r.unshift(Yc(t,i,s)),i=Hc(t,e),i!=null&&r.push(Yc(t,i,s))),t=t.return}return r}function ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gb(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Hc(n,i),c!=null&&a.unshift(Yc(n,c,l))):s||(c=Hc(n,i),c!=null&&a.push(Yc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Y4=/\r\n?/g,J4=/\u0000|\uFFFD/g;function Kb(t){return(typeof t=="string"?t:""+t).replace(Y4,`
`).replace(J4,"")}function Pd(t,e,n){if(e=Kb(e),Kb(t)!==e&&n)throw Error(ne(425))}function Bh(){}var cy=null,uy=null;function dy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hy=typeof setTimeout=="function"?setTimeout:void 0,Z4=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,e5=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(t){return Qb.resolve(null).then(t).catch(t5)}:hy;function t5(t){setTimeout(function(){throw t})}function Jp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gc(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Sl,Jc="__reactProps$"+Sl,Is="__reactContainer$"+Sl,fy="__reactEvents$"+Sl,n5="__reactListeners$"+Sl,r5="__reactHandles$"+Sl;function xo(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xb(t);t!==null;){if(n=t[Xr])return n;t=Xb(t)}return e}t=n,n=t.parentNode}return null}function Cu(t){return t=t[Xr]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ga(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function em(t){return t[Jc]||null}var my=[],ya=-1;function Qi(t){return{current:t}}function it(t){0>ya||(t.current=my[ya],my[ya]=null,ya--)}function Ze(t,e){ya++,my[ya]=t.current,t.current=e}var Li={},rn=Qi(Li),En=Qi(!1),Do=Li;function Ja(t,e){var n=t.type.contextTypes;if(!n)return Li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(t){return t=t.childContextTypes,t!=null}function Hh(){it(En),it(rn)}function Yb(t,e,n){if(rn.current!==Li)throw Error(ne(168));Ze(rn,e),Ze(En,n)}function LN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,UD(t)||"Unknown",s));return ut({},n,r)}function Wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Li,Do=rn.current,Ze(rn,t),Ze(En,En.current),!0}function Jb(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=LN(t,e,Do),r.__reactInternalMemoizedMergedChildContext=t,it(En),it(rn),Ze(rn,t)):it(En),Ze(En,n)}var xs=null,tm=!1,Zp=!1;function VN(t){xs===null?xs=[t]:xs.push(t)}function s5(t){tm=!0,VN(t)}function Xi(){if(!Zp&&xs!==null){Zp=!0;var t=0,e=Ke;try{var n=xs;for(Ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xs=null,tm=!1}catch(s){throw xs!==null&&(xs=xs.slice(t+1)),cN(Hv,Xi),s}finally{Ke=e,Zp=!1}}return null}var va=[],xa=0,qh=null,Gh=0,Yn=[],Jn=0,Mo=null,bs=1,_s="";function po(t,e){va[xa++]=Gh,va[xa++]=qh,qh=t,Gh=e}function FN(t,e,n){Yn[Jn++]=bs,Yn[Jn++]=_s,Yn[Jn++]=Mo,Mo=t;var r=bs;t=_s;var s=32-Nr(r)-1;r&=~(1<<s),n+=1;var i=32-Nr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,bs=1<<32-Nr(e)+s|n<<s|r,_s=i+t}else bs=1<<i|n<<s|r,_s=t}function Zv(t){t.return!==null&&(po(t,1),FN(t,1,0))}function ex(t){for(;t===qh;)qh=va[--xa],va[xa]=null,Gh=va[--xa],va[xa]=null;for(;t===Mo;)Mo=Yn[--Jn],Yn[Jn]=null,_s=Yn[--Jn],Yn[Jn]=null,bs=Yn[--Jn],Yn[Jn]=null}var zn=null,Vn=null,ot=!1,vr=null;function zN(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,Vn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mo!==null?{id:bs,overflow:_s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,Vn=null,!0):!1;default:return!1}}function py(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gy(t){if(ot){var e=Vn;if(e){var n=e;if(!Zb(t,e)){if(py(t))throw Error(ne(418));e=Ei(n.nextSibling);var r=zn;e&&Zb(t,e)?zN(r,n):(t.flags=t.flags&-4097|2,ot=!1,zn=t)}}else{if(py(t))throw Error(ne(418));t.flags=t.flags&-4097|2,ot=!1,zn=t}}}function e1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function Dd(t){if(t!==zn)return!1;if(!ot)return e1(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dy(t.type,t.memoizedProps)),e&&(e=Vn)){if(py(t))throw UN(),Error(ne(418));for(;e;)zN(t,e),e=Ei(e.nextSibling)}if(e1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=zn?Ei(t.stateNode.nextSibling):null;return!0}function UN(){for(var t=Vn;t;)t=Ei(t.nextSibling)}function Za(){Vn=zn=null,ot=!1}function tx(t){vr===null?vr=[t]:vr.push(t)}var i5=$s.ReactCurrentBatchConfig;function ac(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Md(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t1(t){var e=t._init;return e(t._payload)}function $N(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=ki(b,x),b.index=0,b.sibling=null,b}function i(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,j){return x===null||x.tag!==6?(x=og(S,b.mode,j),x.return=b,x):(x=s(x,S),x.return=b,x)}function c(b,x,S,j){var D=S.type;return D===ha?h(b,x,S.props.children,j,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ii&&t1(D)===x.type)?(j=s(x,S.props),j.ref=ac(b,x,S),j.return=b,j):(j=gh(S.type,S.key,S.props,null,b.mode,j),j.ref=ac(b,x,S),j.return=b,j)}function u(b,x,S,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=ag(S,b.mode,j),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function h(b,x,S,j,D){return x===null||x.tag!==7?(x=jo(S,b.mode,j,D),x.return=b,x):(x=s(x,S),x.return=b,x)}function m(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=og(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ed:return S=gh(x.type,x.key,x.props,null,b.mode,S),S.ref=ac(b,null,x),S.return=b,S;case da:return x=ag(x,b.mode,S),x.return=b,x;case ii:var j=x._init;return m(b,j(x._payload),S)}if(fc(x)||nc(x))return x=jo(x,b.mode,S,null),x.return=b,x;Md(b,x)}return null}function p(b,x,S,j){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(b,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ed:return S.key===D?c(b,x,S,j):null;case da:return S.key===D?u(b,x,S,j):null;case ii:return D=S._init,p(b,x,D(S._payload),j)}if(fc(S)||nc(S))return D!==null?null:h(b,x,S,j,null);Md(b,S)}return null}function g(b,x,S,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(S)||null,l(x,b,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ed:return b=b.get(j.key===null?S:j.key)||null,c(x,b,j,D);case da:return b=b.get(j.key===null?S:j.key)||null,u(x,b,j,D);case ii:var M=j._init;return g(b,x,S,M(j._payload),D)}if(fc(j)||nc(j))return b=b.get(S)||null,h(x,b,j,D,null);Md(x,j)}return null}function w(b,x,S,j){for(var D=null,M=null,E=x,C=x=0,T=null;E!==null&&C<S.length;C++){E.index>C?(T=E,E=null):T=E.sibling;var k=p(b,E,S[C],j);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(b,E),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k,E=T}if(C===S.length)return n(b,E),ot&&po(b,C),D;if(E===null){for(;C<S.length;C++)E=m(b,S[C],j),E!==null&&(x=i(E,x,C),M===null?D=E:M.sibling=E,M=E);return ot&&po(b,C),D}for(E=r(b,E);C<S.length;C++)T=g(E,b,C,S[C],j),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?C:T.key),x=i(T,x,C),M===null?D=T:M.sibling=T,M=T);return t&&E.forEach(function(I){return e(b,I)}),ot&&po(b,C),D}function v(b,x,S,j){var D=nc(S);if(typeof D!="function")throw Error(ne(150));if(S=D.call(S),S==null)throw Error(ne(151));for(var M=D=null,E=x,C=x=0,T=null,k=S.next();E!==null&&!k.done;C++,k=S.next()){E.index>C?(T=E,E=null):T=E.sibling;var I=p(b,E,k.value,j);if(I===null){E===null&&(E=T);break}t&&E&&I.alternate===null&&e(b,E),x=i(I,x,C),M===null?D=I:M.sibling=I,M=I,E=T}if(k.done)return n(b,E),ot&&po(b,C),D;if(E===null){for(;!k.done;C++,k=S.next())k=m(b,k.value,j),k!==null&&(x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return ot&&po(b,C),D}for(E=r(b,E);!k.done;C++,k=S.next())k=g(E,b,C,k.value,j),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?C:k.key),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return t&&E.forEach(function(P){return e(b,P)}),ot&&po(b,C),D}function _(b,x,S,j){if(typeof S=="object"&&S!==null&&S.type===ha&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ed:e:{for(var D=S.key,M=x;M!==null;){if(M.key===D){if(D=S.type,D===ha){if(M.tag===7){n(b,M.sibling),x=s(M,S.props.children),x.return=b,b=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ii&&t1(D)===M.type){n(b,M.sibling),x=s(M,S.props),x.ref=ac(b,M,S),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}S.type===ha?(x=jo(S.props.children,b.mode,j,S.key),x.return=b,b=x):(j=gh(S.type,S.key,S.props,null,b.mode,j),j.ref=ac(b,x,S),j.return=b,b=j)}return a(b);case da:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=ag(S,b.mode,j),x.return=b,b=x}return a(b);case ii:return M=S._init,_(b,x,M(S._payload),j)}if(fc(S))return w(b,x,S,j);if(nc(S))return v(b,x,S,j);Md(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=og(S,b.mode,j),x.return=b,b=x),a(b)):n(b,x)}return _}var el=$N(!0),BN=$N(!1),Kh=Qi(null),Qh=null,wa=null,nx=null;function rx(){nx=wa=Qh=null}function sx(t){var e=Kh.current;it(Kh),t._currentValue=e}function yy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ia(t,e){Qh=t,nx=wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(nx!==t)if(t={context:t,memoizedValue:e,next:null},wa===null){if(Qh===null)throw Error(ne(308));wa=t,Qh.dependencies={lanes:0,firstContext:t}}else wa=wa.next=t;return e}var wo=null;function ix(t){wo===null?wo=[t]:wo.push(t)}function HN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ix(e)):(n.next=s.next,s.next=n),e.interleaved=n,As(t,r)}function As(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oi=!1;function ox(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,As(t,n)}return s=r.interleaved,s===null?(e.next=e,ix(r)):(e.next=s.next,s.next=e),r.interleaved=e,As(t,n)}function uh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wv(t,n)}}function n1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xh(t,e,n,r){var s=t.updateQueue;oi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,v=l;switch(p=e,g=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){m=w.call(g,m,p);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(g,m,p):w,p==null)break e;m=ut({},m,p);break e;case 2:oi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=m):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lo|=a,t.lanes=a,t.memoizedState=m}}function r1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var ku={},Zr=Qi(ku),Zc=Qi(ku),eu=Qi(ku);function bo(t){if(t===ku)throw Error(ne(174));return t}function ax(t,e){switch(Ze(eu,e),Ze(Zc,t),Ze(Zr,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yg(e,t)}it(Zr),Ze(Zr,e)}function tl(){it(Zr),it(Zc),it(eu)}function qN(t){bo(eu.current);var e=bo(Zr.current),n=Yg(e,t.type);e!==n&&(Ze(Zc,t),Ze(Zr,n))}function lx(t){Zc.current===t&&(it(Zr),it(Zc))}var at=Qi(0);function Yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eg=[];function cx(){for(var t=0;t<eg.length;t++)eg[t]._workInProgressVersionPrimary=null;eg.length=0}var dh=$s.ReactCurrentDispatcher,tg=$s.ReactCurrentBatchConfig,Oo=0,ct=null,Tt=null,Pt=null,Jh=!1,Tc=!1,tu=0,o5=0;function Kt(){throw Error(ne(321))}function ux(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ir(t[n],e[n]))return!1;return!0}function dx(t,e,n,r,s,i){if(Oo=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dh.current=t===null||t.memoizedState===null?u5:d5,t=n(r,s),Tc){i=0;do{if(Tc=!1,tu=0,25<=i)throw Error(ne(301));i+=1,Pt=Tt=null,e.updateQueue=null,dh.current=h5,t=n(r,s)}while(Tc)}if(dh.current=Zh,e=Tt!==null&&Tt.next!==null,Oo=0,Pt=Tt=ct=null,Jh=!1,e)throw Error(ne(300));return t}function hx(){var t=tu!==0;return tu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ct.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function ar(){if(Tt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Pt===null?ct.memoizedState:Pt.next;if(e!==null)Pt=e,Tt=t;else{if(t===null)throw Error(ne(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Pt===null?ct.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function nu(t,e){return typeof e=="function"?e(t):e}function ng(t){var e=ar(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Oo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,ct.lanes|=h,Lo|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ir(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,Lo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rg(t){var e=ar(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ir(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function GN(){}function KN(t,e){var n=ct,r=ar(),s=e(),i=!Ir(r.memoizedState,s);if(i&&(r.memoizedState=s,Sn=!0),r=r.queue,fx(YN.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,ru(9,XN.bind(null,n,r,s,e),void 0,null),Ot===null)throw Error(ne(349));Oo&30||QN(n,e,s)}return s}function QN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XN(t,e,n,r){e.value=n,e.getSnapshot=r,JN(e)&&ZN(t)}function YN(t,e,n){return n(function(){JN(e)&&ZN(t)})}function JN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ir(t,n)}catch{return!0}}function ZN(t){var e=As(t,1);e!==null&&Tr(e,t,1,-1)}function s1(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:t},e.queue=t,t=t.dispatch=c5.bind(null,ct,t),[e.memoizedState,t]}function ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eT(){return ar().memoizedState}function hh(t,e,n,r){var s=Wr();ct.flags|=t,s.memoizedState=ru(1|e,n,void 0,r===void 0?null:r)}function nm(t,e,n,r){var s=ar();r=r===void 0?null:r;var i=void 0;if(Tt!==null){var a=Tt.memoizedState;if(i=a.destroy,r!==null&&ux(r,a.deps)){s.memoizedState=ru(e,n,i,r);return}}ct.flags|=t,s.memoizedState=ru(1|e,n,i,r)}function i1(t,e){return hh(8390656,8,t,e)}function fx(t,e){return nm(2048,8,t,e)}function tT(t,e){return nm(4,2,t,e)}function nT(t,e){return nm(4,4,t,e)}function rT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sT(t,e,n){return n=n!=null?n.concat([t]):null,nm(4,4,rT.bind(null,e,t),n)}function mx(){}function iT(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ux(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oT(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ux(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aT(t,e,n){return Oo&21?(Ir(n,e)||(n=hN(),ct.lanes|=n,Lo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function a5(t,e){var n=Ke;Ke=n!==0&&4>n?n:4,t(!0);var r=tg.transition;tg.transition={};try{t(!1),e()}finally{Ke=n,tg.transition=r}}function lT(){return ar().memoizedState}function l5(t,e,n){var r=Ci(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cT(t))uT(e,n);else if(n=HN(t,e,n,r),n!==null){var s=dn();Tr(n,t,r,s),dT(n,e,r)}}function c5(t,e,n){var r=Ci(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cT(t))uT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ir(l,a)){var c=e.interleaved;c===null?(s.next=s,ix(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HN(t,e,s,r),n!==null&&(s=dn(),Tr(n,t,r,s),dT(n,e,r))}}function cT(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function uT(t,e){Tc=Jh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wv(t,n)}}var Zh={readContext:or,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},u5={readContext:or,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:i1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hh(4194308,4,rT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return hh(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l5.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:s1,useDebugValue:mx,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=s1(!1),e=t[0];return t=a5.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Wr();if(ot){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),Ot===null)throw Error(ne(349));Oo&30||QN(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,i1(YN.bind(null,r,i,t),[t]),r.flags|=2048,ru(9,XN.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wr(),e=Ot.identifierPrefix;if(ot){var n=_s,r=bs;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=o5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d5={readContext:or,useCallback:iT,useContext:or,useEffect:fx,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:ng,useRef:eT,useState:function(){return ng(nu)},useDebugValue:mx,useDeferredValue:function(t){var e=ar();return aT(e,Tt.memoizedState,t)},useTransition:function(){var t=ng(nu)[0],e=ar().memoizedState;return[t,e]},useMutableSource:GN,useSyncExternalStore:KN,useId:lT,unstable_isNewReconciler:!1},h5={readContext:or,useCallback:iT,useContext:or,useEffect:fx,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:rg,useRef:eT,useState:function(){return rg(nu)},useDebugValue:mx,useDeferredValue:function(t){var e=ar();return Tt===null?e.memoizedState=t:aT(e,Tt.memoizedState,t)},useTransition:function(){var t=rg(nu)[0],e=ar().memoizedState;return[t,e]},useMutableSource:GN,useSyncExternalStore:KN,useId:lT,unstable_isNewReconciler:!1};function mr(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rm={isMounted:function(t){return(t=t._reactInternals)?Qo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Ci(t),i=Ts(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Tr(e,t,s,r),uh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Ci(t),i=Ts(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Tr(e,t,s,r),uh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=Ci(t),s=Ts(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ni(t,s,r),e!==null&&(Tr(e,t,r,n),uh(e,t,r))}};function o1(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Qc(n,r)||!Qc(s,i):!0}function hT(t,e,n){var r=!1,s=Li,i=e.contextType;return typeof i=="object"&&i!==null?i=or(i):(s=Nn(e)?Do:rn.current,r=e.contextTypes,i=(r=r!=null)?Ja(t,s):Li),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function a1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rm.enqueueReplaceState(e,e.state,null)}function xy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ox(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=or(i):(i=Nn(e)?Do:rn.current,s.context=Ja(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rm.enqueueReplaceState(s,s.state,null),Xh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function nl(t,e){try{var n="",r=e;do n+=zD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f5=typeof WeakMap=="function"?WeakMap:Map;function fT(t,e,n){n=Ts(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tf||(tf=!0,Iy=r),wy(t,e)},n}function mT(t,e,n){n=Ts(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wy(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function l1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=C5.bind(null,t,e,n),e.then(t,t))}function c1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ts(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var m5=$s.ReactCurrentOwner,Sn=!1;function ln(t,e,n,r){e.child=t===null?BN(e,null,n,r):el(e,t.child,n,r)}function d1(t,e,n,r,s){n=n.render;var i=e.ref;return Ia(e,s),r=dx(t,e,n,r,i,s),n=hx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):(ot&&n&&Zv(e),e.flags|=1,ln(t,e,r,s),e.child)}function h1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_x(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pT(t,e,i,r,s)):(t=gh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qc,n(a,r)&&t.ref===e.ref)return Rs(t,e,s)}return e.flags|=1,t=ki(i,r),t.ref=e.ref,t.return=e,e.child=t}function pT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qc(i,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,Rs(t,e,s)}return by(t,e,n,r,s)}function gT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(_a,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(_a,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ze(_a,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ze(_a,Mn),Mn|=r;return ln(t,e,s,n),e.child}function yT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function by(t,e,n,r,s){var i=Nn(n)?Do:rn.current;return i=Ja(e,i),Ia(e,s),n=dx(t,e,n,r,i,s),r=hx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):(ot&&r&&Zv(e),e.flags|=1,ln(t,e,n,s),e.child)}function f1(t,e,n,r,s){if(Nn(n)){var i=!0;Wh(e)}else i=!1;if(Ia(e,s),e.stateNode===null)fh(t,e),hT(e,n,r),xy(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=or(u):(u=Nn(n)?Do:rn.current,u=Ja(e,u));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&a1(e,a,r,u),oi=!1;var p=e.memoizedState;a.state=p,Xh(e,r,a,s),c=e.memoizedState,l!==r||p!==c||En.current||oi?(typeof h=="function"&&(vy(e,n,h,r),c=e.memoizedState),(l=oi||o1(e,n,l,r,p,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,WN(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:mr(e.type,l),a.props=u,m=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=or(c):(c=Nn(n)?Do:rn.current,c=Ja(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||p!==c)&&a1(e,a,r,c),oi=!1,p=e.memoizedState,a.state=p,Xh(e,r,a,s);var w=e.memoizedState;l!==m||p!==w||En.current||oi?(typeof g=="function"&&(vy(e,n,g,r),w=e.memoizedState),(u=oi||o1(e,n,u,r,p,w,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return _y(t,e,n,r,i,s)}function _y(t,e,n,r,s,i){yT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Jb(e,n,!1),Rs(t,e,i);r=e.stateNode,m5.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=el(e,t.child,null,i),e.child=el(e,null,l,i)):ln(t,e,l,i),e.memoizedState=r.state,s&&Jb(e,n,!0),e.child}function vT(t){var e=t.stateNode;e.pendingContext?Yb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yb(t,e.context,!1),ax(t,e.containerInfo)}function m1(t,e,n,r,s){return Za(),tx(s),e.flags|=256,ln(t,e,n,r),e.child}var Sy={dehydrated:null,treeContext:null,retryLane:0};function Ey(t){return{baseLanes:t,cachePool:null,transitions:null}}function xT(t,e,n){var r=e.pendingProps,s=at.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ze(at,s&1),t===null)return gy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=om(a,r,0,null),t=jo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ey(n),e.memoizedState=Sy,t):px(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return p5(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ki(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ki(l,i):(i=jo(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ey(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Sy,r}return i=t.child,t=i.sibling,r=ki(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function px(t,e){return e=om({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Od(t,e,n,r){return r!==null&&tx(r),el(e,t.child,null,n),t=px(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p5(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=sg(Error(ne(422))),Od(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=om({mode:"visible",children:r.children},s,0,null),i=jo(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&el(e,t.child,null,a),e.child.memoizedState=Ey(a),e.memoizedState=Sy,i);if(!(e.mode&1))return Od(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ne(419)),r=sg(i,r,void 0),Od(t,e,a,r)}if(l=(a&t.childLanes)!==0,Sn||l){if(r=Ot,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,As(t,s),Tr(r,t,s,-1))}return bx(),r=sg(Error(ne(421))),Od(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=k5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vn=Ei(s.nextSibling),zn=e,ot=!0,vr=null,t!==null&&(Yn[Jn++]=bs,Yn[Jn++]=_s,Yn[Jn++]=Mo,bs=t.id,_s=t.overflow,Mo=e),e=px(e,r.children),e.flags|=4096,e)}function p1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yy(t.return,e,n)}function ig(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ln(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p1(t,n,e);else if(t.tag===19)p1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(at,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ig(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ig(e,!0,n,null,i);break;case"together":ig(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g5(t,e,n){switch(e.tag){case 3:vT(e),Za();break;case 5:qN(e);break;case 1:Nn(e.type)&&Wh(e);break;case 4:ax(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ze(Kh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?xT(t,e,n):(Ze(at,at.current&1),t=Rs(t,e,n),t!==null?t.sibling:null);Ze(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,gT(t,e,n)}return Rs(t,e,n)}var bT,Ny,_T,ST;bT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ny=function(){};_T=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bo(Zr.current);var i=null;switch(n){case"input":s=Gg(t,s),r=Gg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Xg(t,s),r=Xg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bh)}Jg(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($c.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($c.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ST=function(t,e,n,r){n!==r&&(e.flags|=4)};function lc(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y5(t,e,n){var r=e.pendingProps;switch(ex(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Nn(e.type)&&Hh(),Qt(e),null;case 3:return r=e.stateNode,tl(),it(En),it(rn),cx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vr!==null&&(Py(vr),vr=null))),Ny(t,e),Qt(e),null;case 5:lx(e);var s=bo(eu.current);if(n=e.type,t!==null&&e.stateNode!=null)_T(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Qt(e),null}if(t=bo(Zr.current),Dd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xr]=e,r[Jc]=i,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(s=0;s<pc.length;s++)st(pc[s],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":Eb(r,i),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},st("invalid",r);break;case"textarea":Tb(r,i),st("invalid",r)}Jg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pd(r.textContent,l,t),s=["children",""+l]):$c.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&st("scroll",r)}switch(n){case"input":Nd(r),Nb(r,i,!0);break;case"textarea":Nd(r),Cb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xr]=e,t[Jc]=r,bT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Zg(n,r),n){case"dialog":st("cancel",t),st("close",t),s=r;break;case"iframe":case"object":case"embed":st("load",t),s=r;break;case"video":case"audio":for(s=0;s<pc.length;s++)st(pc[s],t);s=r;break;case"source":st("error",t),s=r;break;case"img":case"image":case"link":st("error",t),st("load",t),s=r;break;case"details":st("toggle",t),s=r;break;case"input":Eb(t,r),s=Gg(t,r),st("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),st("invalid",t);break;case"textarea":Tb(t,r),s=Xg(t,r),st("invalid",t);break;default:s=r}Jg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?eN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bc(t,c):typeof c=="number"&&Bc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($c.hasOwnProperty(i)?c!=null&&i==="onScroll"&&st("scroll",t):c!=null&&Fv(t,i,c,a))}switch(n){case"input":Nd(t),Nb(t,r,!1);break;case"textarea":Nd(t),Cb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Oi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ta(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)ST(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=bo(eu.current),bo(Zr.current),Dd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,(i=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:Pd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xr]=e,e.stateNode=r}return Qt(e),null;case 13:if(it(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Vn!==null&&e.mode&1&&!(e.flags&128))UN(),Za(),e.flags|=98560,i=!1;else if(i=Dd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Xr]=e}else Za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),i=!1}else vr!==null&&(Py(vr),vr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?jt===0&&(jt=3):bx())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return tl(),Ny(t,e),t===null&&Xc(e.stateNode.containerInfo),Qt(e),null;case 10:return sx(e.type._context),Qt(e),null;case 17:return Nn(e.type)&&Hh(),Qt(e),null;case 19:if(it(at),i=e.memoizedState,i===null)return Qt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)lc(i,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Yh(t),a!==null){for(e.flags|=128,lc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(at,at.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>rl&&(e.flags|=128,r=!0,lc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Yh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ot)return Qt(e),null}else 2*yt()-i.renderingStartTime>rl&&n!==1073741824&&(e.flags|=128,r=!0,lc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=at.current,Ze(at,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return wx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function v5(t,e){switch(ex(e),e.tag){case 1:return Nn(e.type)&&Hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tl(),it(En),it(rn),cx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lx(e),null;case 13:if(it(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(at),null;case 4:return tl(),null;case 10:return sx(e.type._context),null;case 22:case 23:return wx(),null;case 24:return null;default:return null}}var Ld=!1,en=!1,x5=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function Ty(t,e,n){try{n()}catch(r){mt(t,e,r)}}var g1=!1;function w5(t,e){if(cy=zh,t=kN(),Jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,m=t,p=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++u===s&&(l=a),p===i&&++h===r&&(c=a),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(uy={focusedElem:t,selectionRange:n},zh=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:mr(e.type,v),_);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(j){mt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return w=g1,g1=!1,w}function Cc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ty(e,n,i)}s=s.next}while(s!==r)}}function sm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ET(t){var e=t.alternate;e!==null&&(t.alternate=null,ET(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xr],delete e[Jc],delete e[fy],delete e[n5],delete e[r5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NT(t){return t.tag===5||t.tag===3||t.tag===4}function y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bh));else if(r!==4&&(t=t.child,t!==null))for(ky(t,e,n),t=t.sibling;t!==null;)ky(t,e,n),t=t.sibling}function jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jy(t,e,n),t=t.sibling;t!==null;)jy(t,e,n),t=t.sibling}var Ut=null,yr=!1;function Js(t,e,n){for(n=n.child;n!==null;)TT(t,e,n),n=n.sibling}function TT(t,e,n){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(Xf,n)}catch{}switch(n.tag){case 5:en||ba(n,e);case 6:var r=Ut,s=yr;Ut=null,Js(t,e,n),Ut=r,yr=s,Ut!==null&&(yr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(yr?(t=Ut,n=n.stateNode,t.nodeType===8?Jp(t.parentNode,n):t.nodeType===1&&Jp(t,n),Gc(t)):Jp(Ut,n.stateNode));break;case 4:r=Ut,s=yr,Ut=n.stateNode.containerInfo,yr=!0,Js(t,e,n),Ut=r,yr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ty(n,e,a),s=s.next}while(s!==r)}Js(t,e,n);break;case 1:if(!en&&(ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){mt(n,e,l)}Js(t,e,n);break;case 21:Js(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Js(t,e,n),en=r):Js(t,e,n);break;default:Js(t,e,n)}}function v1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x5),e.forEach(function(r){var s=j5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,yr=!1;break e;case 3:Ut=l.stateNode.containerInfo,yr=!0;break e;case 4:Ut=l.stateNode.containerInfo,yr=!0;break e}l=l.return}if(Ut===null)throw Error(ne(160));TT(i,a,s),Ut=null,yr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){mt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)CT(e,t),e=e.sibling}function CT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),Hr(t),r&4){try{Cc(3,t,t.return),sm(3,t)}catch(v){mt(t,t.return,v)}try{Cc(5,t,t.return)}catch(v){mt(t,t.return,v)}}break;case 1:hr(e,t),Hr(t),r&512&&n!==null&&ba(n,n.return);break;case 5:if(hr(e,t),Hr(t),r&512&&n!==null&&ba(n,n.return),t.flags&32){var s=t.stateNode;try{Bc(s,"")}catch(v){mt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&QE(s,i),Zg(l,a);var u=Zg(l,i);for(a=0;a<c.length;a+=2){var h=c[a],m=c[a+1];h==="style"?eN(s,m):h==="dangerouslySetInnerHTML"?JE(s,m):h==="children"?Bc(s,m):Fv(s,h,m,u)}switch(l){case"input":Kg(s,i);break;case"textarea":XE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ta(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ta(s,!!i.multiple,i.defaultValue,!0):Ta(s,!!i.multiple,i.multiple?[]:"",!1))}s[Jc]=i}catch(v){mt(t,t.return,v)}}break;case 6:if(hr(e,t),Hr(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){mt(t,t.return,v)}}break;case 3:if(hr(e,t),Hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gc(e.containerInfo)}catch(v){mt(t,t.return,v)}break;case 4:hr(e,t),Hr(t);break;case 13:hr(e,t),Hr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vx=yt())),r&4&&v1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(en=(u=en)||h,hr(e,t),en=u):hr(e,t),Hr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(m=fe=h;fe!==null;){switch(p=fe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Cc(4,p,p.return);break;case 1:ba(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){mt(r,n,v)}}break;case 5:ba(p,p.return);break;case 22:if(p.memoizedState!==null){w1(m);continue}}g!==null?(g.return=p,fe=g):w1(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ZE("display",a))}catch(v){mt(t,t.return,v)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(v){mt(t,t.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hr(e,t),Hr(t),r&4&&v1(t);break;case 21:break;default:hr(e,t),Hr(t)}}function Hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NT(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bc(s,""),r.flags&=-33);var i=y1(t);jy(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=y1(t);ky(t,l,a);break;default:throw Error(ne(161))}}catch(c){mt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b5(t,e,n){fe=t,kT(t)}function kT(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var s=fe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ld;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||en;l=Ld;var u=en;if(Ld=a,(en=c)&&!u)for(fe=s;fe!==null;)a=fe,c=a.child,a.tag===22&&a.memoizedState!==null?b1(s):c!==null?(c.return=a,fe=c):b1(s);for(;i!==null;)fe=i,kT(i),i=i.sibling;fe=s,Ld=l,en=u}x1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,fe=i):x1(t)}}function x1(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||sm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&r1(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r1(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Gc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}en||e.flags&512&&Cy(e)}catch(p){mt(e,e.return,p)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function w1(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function b1(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sm(4,e)}catch(c){mt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){mt(e,s,c)}}var i=e.return;try{Cy(e)}catch(c){mt(e,i,c)}break;case 5:var a=e.return;try{Cy(e)}catch(c){mt(e,a,c)}}}catch(c){mt(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var _5=Math.ceil,ef=$s.ReactCurrentDispatcher,gx=$s.ReactCurrentOwner,rr=$s.ReactCurrentBatchConfig,Le=0,Ot=null,xt=null,Ht=0,Mn=0,_a=Qi(0),jt=0,su=null,Lo=0,im=0,yx=0,kc=null,wn=null,vx=0,rl=1/0,vs=null,tf=!1,Iy=null,Ti=null,Vd=!1,xi=null,nf=0,jc=0,Ay=null,mh=-1,ph=0;function dn(){return Le&6?yt():mh!==-1?mh:mh=yt()}function Ci(t){return t.mode&1?Le&2&&Ht!==0?Ht&-Ht:i5.transition!==null?(ph===0&&(ph=hN()),ph):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:xN(t.type)),t):1}function Tr(t,e,n,r){if(50<jc)throw jc=0,Ay=null,Error(ne(185));Nu(t,n,r),(!(Le&2)||t!==Ot)&&(t===Ot&&(!(Le&2)&&(im|=n),jt===4&&ci(t,Ht)),Tn(t,r),n===1&&Le===0&&!(e.mode&1)&&(rl=yt()+500,tm&&Xi()))}function Tn(t,e){var n=t.callbackNode;i4(t,e);var r=Fh(t,t===Ot?Ht:0);if(r===0)n!==null&&Ib(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ib(n),e===1)t.tag===0?s5(_1.bind(null,t)):VN(_1.bind(null,t)),e5(function(){!(Le&6)&&Xi()}),n=null;else{switch(fN(r)){case 1:n=Hv;break;case 4:n=uN;break;case 16:n=Vh;break;case 536870912:n=dN;break;default:n=Vh}n=OT(n,jT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jT(t,e){if(mh=-1,ph=0,Le&6)throw Error(ne(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var r=Fh(t,t===Ot?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rf(t,r);else{e=r;var s=Le;Le|=2;var i=AT();(Ot!==t||Ht!==e)&&(vs=null,rl=yt()+500,ko(t,e));do try{N5();break}catch(l){IT(t,l)}while(!0);rx(),ef.current=i,Le=s,xt!==null?e=0:(Ot=null,Ht=0,e=jt)}if(e!==0){if(e===2&&(s=sy(t),s!==0&&(r=s,e=Ry(t,s))),e===1)throw n=su,ko(t,0),ci(t,r),Tn(t,yt()),n;if(e===6)ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!S5(s)&&(e=rf(t,r),e===2&&(i=sy(t),i!==0&&(r=i,e=Ry(t,i))),e===1))throw n=su,ko(t,0),ci(t,r),Tn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:go(t,wn,vs);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=vx+500-yt(),10<e)){if(Fh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hy(go.bind(null,t,wn,vs),e);break}go(t,wn,vs);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Nr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_5(r/1960))-r,10<r){t.timeoutHandle=hy(go.bind(null,t,wn,vs),r);break}go(t,wn,vs);break;case 5:go(t,wn,vs);break;default:throw Error(ne(329))}}}return Tn(t,yt()),t.callbackNode===n?jT.bind(null,t):null}function Ry(t,e){var n=kc;return t.current.memoizedState.isDehydrated&&(ko(t,e).flags|=256),t=rf(t,e),t!==2&&(e=wn,wn=n,e!==null&&Py(e)),t}function Py(t){wn===null?wn=t:wn.push.apply(wn,t)}function S5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ir(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~yx,e&=~im,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nr(e),r=1<<n;t[n]=-1,e&=~r}}function _1(t){if(Le&6)throw Error(ne(327));Aa();var e=Fh(t,0);if(!(e&1))return Tn(t,yt()),null;var n=rf(t,e);if(t.tag!==0&&n===2){var r=sy(t);r!==0&&(e=r,n=Ry(t,r))}if(n===1)throw n=su,ko(t,0),ci(t,e),Tn(t,yt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,go(t,wn,vs),Tn(t,yt()),null}function xx(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(rl=yt()+500,tm&&Xi())}}function Vo(t){xi!==null&&xi.tag===0&&!(Le&6)&&Aa();var e=Le;Le|=1;var n=rr.transition,r=Ke;try{if(rr.transition=null,Ke=1,t)return t()}finally{Ke=r,rr.transition=n,Le=e,!(Le&6)&&Xi()}}function wx(){Mn=_a.current,it(_a)}function ko(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z4(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(ex(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hh();break;case 3:tl(),it(En),it(rn),cx();break;case 5:lx(r);break;case 4:tl();break;case 13:it(at);break;case 19:it(at);break;case 10:sx(r.type._context);break;case 22:case 23:wx()}n=n.return}if(Ot=t,xt=t=ki(t.current,null),Ht=Mn=e,jt=0,su=null,yx=im=Lo=0,wn=kc=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}wo=null}return t}function IT(t,e){do{var n=xt;try{if(rx(),dh.current=Zh,Jh){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jh=!1}if(Oo=0,Pt=Tt=ct=null,Tc=!1,tu=0,gx.current=null,n===null||n.return===null){jt=1,su=e,xt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Ht,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=c1(a);if(g!==null){g.flags&=-257,u1(g,a,l,i,e),g.mode&1&&l1(i,u,e),e=g,c=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(c),e.updateQueue=v}else w.add(c);break e}else{if(!(e&1)){l1(i,u,e),bx();break e}c=Error(ne(426))}}else if(ot&&l.mode&1){var _=c1(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),u1(_,a,l,i,e),tx(nl(c,l));break e}}i=c=nl(c,l),jt!==4&&(jt=2),kc===null?kc=[i]:kc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=fT(i,c,e);n1(i,b);break e;case 1:l=c;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ti===null||!Ti.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=mT(i,l,e);n1(i,j);break e}}i=i.return}while(i!==null)}PT(n)}catch(D){e=D,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function AT(){var t=ef.current;return ef.current=Zh,t===null?Zh:t}function bx(){(jt===0||jt===3||jt===2)&&(jt=4),Ot===null||!(Lo&268435455)&&!(im&268435455)||ci(Ot,Ht)}function rf(t,e){var n=Le;Le|=2;var r=AT();(Ot!==t||Ht!==e)&&(vs=null,ko(t,e));do try{E5();break}catch(s){IT(t,s)}while(!0);if(rx(),Le=n,ef.current=r,xt!==null)throw Error(ne(261));return Ot=null,Ht=0,jt}function E5(){for(;xt!==null;)RT(xt)}function N5(){for(;xt!==null&&!XD();)RT(xt)}function RT(t){var e=MT(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?PT(t):xt=e,gx.current=null}function PT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v5(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,xt=null;return}}else if(n=y5(n,e,Mn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);jt===0&&(jt=5)}function go(t,e,n){var r=Ke,s=rr.transition;try{rr.transition=null,Ke=1,T5(t,e,n,r)}finally{rr.transition=s,Ke=r}return null}function T5(t,e,n,r){do Aa();while(xi!==null);if(Le&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(o4(t,i),t===Ot&&(xt=Ot=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vd||(Vd=!0,OT(Vh,function(){return Aa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rr.transition,rr.transition=null;var a=Ke;Ke=1;var l=Le;Le|=4,gx.current=null,w5(t,n),CT(n,t),q4(uy),zh=!!cy,uy=cy=null,t.current=n,b5(n),YD(),Le=l,Ke=a,rr.transition=i}else t.current=n;if(Vd&&(Vd=!1,xi=t,nf=s),i=t.pendingLanes,i===0&&(Ti=null),e4(n.stateNode),Tn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tf)throw tf=!1,t=Iy,Iy=null,t;return nf&1&&t.tag!==0&&Aa(),i=t.pendingLanes,i&1?t===Ay?jc++:(jc=0,Ay=t):jc=0,Xi(),null}function Aa(){if(xi!==null){var t=fN(nf),e=rr.transition,n=Ke;try{if(rr.transition=null,Ke=16>t?16:t,xi===null)var r=!1;else{if(t=xi,xi=null,nf=0,Le&6)throw Error(ne(331));var s=Le;for(Le|=4,fe=t.current;fe!==null;){var i=fe,a=i.child;if(fe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fe=u;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Cc(8,h,i)}var m=h.child;if(m!==null)m.return=h,fe=m;else for(;fe!==null;){h=fe;var p=h.sibling,g=h.return;if(ET(h),h===u){fe=null;break}if(p!==null){p.return=g,fe=p;break}fe=g}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}fe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,fe=a;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,fe=b;break e}fe=i.return}}var x=t.current;for(fe=x;fe!==null;){a=fe;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,fe=S;else e:for(a=x;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sm(9,l)}}catch(D){mt(l,l.return,D)}if(l===a){fe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,fe=j;break e}fe=l.return}}if(Le=s,Xi(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(Xf,t)}catch{}r=!0}return r}finally{Ke=n,rr.transition=e}}return!1}function S1(t,e,n){e=nl(n,e),e=fT(t,e,1),t=Ni(t,e,1),e=dn(),t!==null&&(Nu(t,1,e),Tn(t,e))}function mt(t,e,n){if(t.tag===3)S1(t,t,n);else for(;e!==null;){if(e.tag===3){S1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=nl(n,t),t=mT(e,t,1),e=Ni(e,t,1),t=dn(),e!==null&&(Nu(e,1,t),Tn(e,t));break}}e=e.return}}function C5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(Ht&n)===n&&(jt===4||jt===3&&(Ht&130023424)===Ht&&500>yt()-vx?ko(t,0):yx|=n),Tn(t,e)}function DT(t,e){e===0&&(t.mode&1?(e=kd,kd<<=1,!(kd&130023424)&&(kd=4194304)):e=1);var n=dn();t=As(t,e),t!==null&&(Nu(t,e,n),Tn(t,n))}function k5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DT(t,n)}function j5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),DT(t,n)}var MT;MT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,g5(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,ot&&e.flags&1048576&&FN(e,Gh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fh(t,e),t=e.pendingProps;var s=Ja(e,rn.current);Ia(e,n),s=dx(null,e,r,t,s,n);var i=hx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(i=!0,Wh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ox(e),s.updater=rm,e.stateNode=s,s._reactInternals=e,xy(e,r,t,n),e=_y(null,e,r,!0,i,n)):(e.tag=0,ot&&i&&Zv(e),ln(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=A5(r),t=mr(r,t),s){case 0:e=by(null,e,r,t,n);break e;case 1:e=f1(null,e,r,t,n);break e;case 11:e=d1(null,e,r,t,n);break e;case 14:e=h1(null,e,r,mr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),by(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),f1(t,e,r,s,n);case 3:e:{if(vT(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,WN(t,e),Xh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nl(Error(ne(423)),e),e=m1(t,e,r,n,s);break e}else if(r!==s){s=nl(Error(ne(424)),e),e=m1(t,e,r,n,s);break e}else for(Vn=Ei(e.stateNode.containerInfo.firstChild),zn=e,ot=!0,vr=null,n=BN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Za(),r===s){e=Rs(t,e,n);break e}ln(t,e,r,n)}e=e.child}return e;case 5:return qN(e),t===null&&gy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,dy(r,s)?a=null:i!==null&&dy(r,i)&&(e.flags|=32),yT(t,e),ln(t,e,a,n),e.child;case 6:return t===null&&gy(e),null;case 13:return xT(t,e,n);case 4:return ax(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=el(e,null,r,n):ln(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),d1(t,e,r,s,n);case 7:return ln(t,e,e.pendingProps,n),e.child;case 8:return ln(t,e,e.pendingProps.children,n),e.child;case 12:return ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ze(Kh,r._currentValue),r._currentValue=a,i!==null)if(Ir(i.value,a)){if(i.children===s.children&&!En.current){e=Rs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ts(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),yy(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ne(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),yy(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ln(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ia(e,n),s=or(s),r=r(s),e.flags|=1,ln(t,e,r,n),e.child;case 14:return r=e.type,s=mr(r,e.pendingProps),s=mr(r.type,s),h1(t,e,r,s,n);case 15:return pT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),fh(t,e),e.tag=1,Nn(r)?(t=!0,Wh(e)):t=!1,Ia(e,n),hT(e,r,s),xy(e,r,s,n),_y(null,e,r,!0,t,n);case 19:return wT(t,e,n);case 22:return gT(t,e,n)}throw Error(ne(156,e.tag))};function OT(t,e){return cN(t,e)}function I5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new I5(t,e,n,r)}function _x(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A5(t){if(typeof t=="function")return _x(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uv)return 11;if(t===$v)return 14}return 2}function ki(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")_x(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ha:return jo(n.children,s,i,e);case zv:a=8,s|=8;break;case Bg:return t=tr(12,n,e,s|2),t.elementType=Bg,t.lanes=i,t;case Hg:return t=tr(13,n,e,s),t.elementType=Hg,t.lanes=i,t;case Wg:return t=tr(19,n,e,s),t.elementType=Wg,t.lanes=i,t;case qE:return om(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HE:a=10;break e;case WE:a=9;break e;case Uv:a=11;break e;case $v:a=14;break e;case ii:a=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=tr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jo(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function om(t,e,n,r){return t=tr(22,t,r,e),t.elementType=qE,t.lanes=n,t.stateNode={isHidden:!1},t}function og(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function ag(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Up(0),this.expirationTimes=Up(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Up(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sx(t,e,n,r,s,i,a,l,c){return t=new R5(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ox(i),t}function P5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LT(t){if(!t)return Li;t=t._reactInternals;e:{if(Qo(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(Nn(n))return LN(t,n,e)}return e}function VT(t,e,n,r,s,i,a,l,c){return t=Sx(n,r,!0,t,s,i,a,l,c),t.context=LT(null),n=t.current,r=dn(),s=Ci(n),i=Ts(r,s),i.callback=e??null,Ni(n,i,s),t.current.lanes=s,Nu(t,s,r),Tn(t,r),t}function am(t,e,n,r){var s=e.current,i=dn(),a=Ci(s);return n=LT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ts(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(s,e,a),t!==null&&(Tr(t,s,a,i),uh(t,s,a)),a}function sf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ex(t,e){E1(t,e),(t=t.alternate)&&E1(t,e)}function D5(){return null}var FT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nx(t){this._internalRoot=t}lm.prototype.render=Nx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));am(t,e,null,null)};lm.prototype.unmount=Nx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){am(null,t,null,null)}),e[Is]=null}};function lm(t){this._internalRoot=t}lm.prototype.unstable_scheduleHydration=function(t){if(t){var e=gN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<li.length&&e!==0&&e<li[n].priority;n++);li.splice(n,0,t),n===0&&vN(t)}};function Tx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N1(){}function M5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=sf(a);i.call(u)}}var a=VT(e,r,t,0,null,!1,!1,"",N1);return t._reactRootContainer=a,t[Is]=a.current,Xc(t.nodeType===8?t.parentNode:t),Vo(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=sf(c);l.call(u)}}var c=Sx(t,0,!1,null,null,!1,!1,"",N1);return t._reactRootContainer=c,t[Is]=c.current,Xc(t.nodeType===8?t.parentNode:t),Vo(function(){am(e,c,n,r)}),c}function um(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=sf(a);l.call(c)}}am(e,a,t,s)}else a=M5(n,e,t,s,r);return sf(a)}mN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mc(e.pendingLanes);n!==0&&(Wv(e,n|1),Tn(e,yt()),!(Le&6)&&(rl=yt()+500,Xi()))}break;case 13:Vo(function(){var r=As(t,1);if(r!==null){var s=dn();Tr(r,t,1,s)}}),Ex(t,1)}};qv=function(t){if(t.tag===13){var e=As(t,134217728);if(e!==null){var n=dn();Tr(e,t,134217728,n)}Ex(t,134217728)}};pN=function(t){if(t.tag===13){var e=Ci(t),n=As(t,e);if(n!==null){var r=dn();Tr(n,t,e,r)}Ex(t,e)}};gN=function(){return Ke};yN=function(t,e){var n=Ke;try{return Ke=t,e()}finally{Ke=n}};ty=function(t,e,n){switch(e){case"input":if(Kg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=em(r);if(!s)throw Error(ne(90));KE(r),Kg(r,s)}}}break;case"textarea":XE(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};rN=xx;sN=Vo;var O5={usingClientEntryPoint:!1,Events:[Cu,ga,em,tN,nN,xx]},cc={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L5={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aN(t),t===null?null:t.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||D5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{Xf=Fd.inject(L5),Jr=Fd}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O5;Hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tx(e))throw Error(ne(200));return P5(t,e,null,n)};Hn.createRoot=function(t,e){if(!Tx(t))throw Error(ne(299));var n=!1,r="",s=FT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sx(t,1,!1,null,null,n,!1,r,s),t[Is]=e.current,Xc(t.nodeType===8?t.parentNode:t),new Nx(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=aN(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return Vo(t)};Hn.hydrate=function(t,e,n){if(!cm(e))throw Error(ne(200));return um(null,t,e,!0,n)};Hn.hydrateRoot=function(t,e,n){if(!Tx(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=FT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=VT(e,null,t,1,n??null,s,!1,i,a),t[Is]=e.current,Xc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lm(e)};Hn.render=function(t,e,n){if(!cm(e))throw Error(ne(200));return um(null,t,e,!1,n)};Hn.unmountComponentAtNode=function(t){if(!cm(t))throw Error(ne(40));return t._reactRootContainer?(Vo(function(){um(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};Hn.unstable_batchedUpdates=xx;Hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cm(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return um(t,e,n,!1,r)};Hn.version="18.3.1-next-f1338f8080-20240426";function zT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zT)}catch(t){console.error(t)}}zT(),zE.exports=Hn;var nr=zE.exports;const V5=CE(nr);var UT,T1=nr;UT=T1.createRoot,T1.hydrateRoot;function F5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var $T={exports:{}},BT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=f;function z5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var U5=typeof Object.is=="function"?Object.is:z5,$5=sl.useState,B5=sl.useEffect,H5=sl.useLayoutEffect,W5=sl.useDebugValue;function q5(t,e){var n=e(),r=$5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return H5(function(){s.value=n,s.getSnapshot=e,lg(s)&&i({inst:s})},[t,n,e]),B5(function(){return lg(s)&&i({inst:s}),t(function(){lg(s)&&i({inst:s})})},[t]),W5(n),n}function lg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!U5(t,n)}catch{return!0}}function G5(t,e){return e()}var K5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?G5:q5;BT.useSyncExternalStore=sl.useSyncExternalStore!==void 0?sl.useSyncExternalStore:K5;$T.exports=BT;var Q5=$T.exports;const X5=VE.useInsertionEffect,Y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J5=Y5?f.useLayoutEffect:f.useEffect,Z5=X5||J5,HT=t=>{const e=f.useRef([t,(...n)=>e[0](...n)]).current;return Z5(()=>{e[0]=t}),e[1]},eM="popstate",Cx="pushState",kx="replaceState",tM="hashchange",C1=[eM,Cx,kx,tM],nM=t=>{for(const e of C1)addEventListener(e,t);return()=>{for(const e of C1)removeEventListener(e,t)}},WT=(t,e)=>Q5.useSyncExternalStore(nM,t,e),rM=()=>location.search,sM=({ssrSearch:t=""}={})=>WT(rM,()=>t),k1=()=>location.pathname,iM=({ssrPath:t}={})=>WT(k1,t?()=>t:k1),oM=(t,{replace:e=!1,state:n=null}={})=>history[e?kx:Cx](n,"",t),aM=(t={})=>[iM(t),oM],j1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[j1]>"u"){for(const t of[Cx,kx]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,j1,{value:!0})}const lM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",qT=(t="")=>t==="/"?"":t,cM=(t,e)=>t[0]==="~"?t.slice(1):qT(e)+t,uM=(t="",e)=>lM(I1(qT(t)),I1(e)),I1=t=>{try{return decodeURI(t)}catch{return t}},GT={hook:aM,searchHook:sM,parser:F5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},KT=f.createContext(GT),ju=()=>f.useContext(KT),QT={},XT=f.createContext(QT),dM=()=>f.useContext(XT),dm=t=>{const[e,n]=t.hook(t);return[uM(t.base,e),HT((r,s)=>n(cM(r,t.base),s))]},hm=()=>dm(ju()),YT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((m,p)=>[m,c[p]])):a.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},JT=({children:t,...e})=>{var h,m;const n=ju(),r=e.hook?GT:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=f.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return f.createElement(KT.Provider,{value:s,children:t})},A1=({children:t,component:e},n)=>e?f.createElement(e,{params:n}):typeof t=="function"?t(n):t,hM=t=>{let e=f.useRef(QT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Kn=({path:t,nest:e,match:n,...r})=>{const s=ju(),[i]=dm(s),[a,l,c]=n??YT(s.parser,t,i,e),u=hM({...dM(),...l});if(!a)return null;const h=c?f.createElement(JT,{base:c},A1(r,u)):A1(r,u);return f.createElement(XT.Provider,{value:u,children:h})},Cn=f.forwardRef((t,e)=>{const n=ju(),[r,s]=dm(n),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:h,replace:m,state:p,...g}=t,w=HT(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&f.isValidElement(u)?f.cloneElement(u,{onClick:w,href:v}):f.createElement("a",{...g,onClick:w,href:v,className:h!=null&&h.call?h(r===a):h,children:u,ref:e})}),ZT=t=>Array.isArray(t)?t.flatMap(e=>ZT(e&&e.type===f.Fragment?e.props.children:e)):[t],fM=({children:t,location:e})=>{const n=ju(),[r]=dm(n);for(const s of ZT(t)){let i=0;if(f.isValidElement(s)&&(i=YT(n.parser,s.props.path,e||r,s.props.nest))[0])return f.cloneElement(s,{match:i})}return null};var fm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mm=typeof window>"u"||"Deno"in globalThis;function pr(){}function mM(t,e){return typeof t=="function"?t(e):t}function pM(t){return typeof t=="number"&&t>=0&&t!==1/0}function gM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function R1(t,e){return typeof t=="function"?t(e):t}function yM(t,e){return typeof t=="function"?t(e):t}function P1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==jx(a,e.options))return!1}else if(!ou(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function D1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(iu(e.options.mutationKey)!==iu(i))return!1}else if(!ou(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function jx(t,e){return((e==null?void 0:e.queryKeyHashFn)||iu)(t)}function iu(t){return JSON.stringify(t,(e,n)=>Dy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ou(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ou(t[n],e[n])):!1}function eC(t,e){if(t===e)return t;const n=M1(t)&&M1(e);if(n||Dy(t)&&Dy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=eC(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function M1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Dy(t){if(!O1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!O1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function O1(t){return Object.prototype.toString.call(t)==="[object Object]"}function vM(t){return new Promise(e=>{setTimeout(e,t)})}function xM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?eC(t,e):e}function wM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function bM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Ix=Symbol();function tC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ix?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Eo,fi,$a,xE,_M=(xE=class extends fm{constructor(){super();He(this,Eo);He(this,fi);He(this,$a);Te(this,$a,e=>{if(!mm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,fi)||this.setEventListener(Y(this,$a))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,fi))==null||e.call(this),Te(this,fi,void 0))}setEventListener(e){var n;Te(this,$a,e),(n=Y(this,fi))==null||n.call(this),Te(this,fi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,Eo)!==e&&(Te(this,Eo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Y(this,Eo)=="boolean"?Y(this,Eo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Eo=new WeakMap,fi=new WeakMap,$a=new WeakMap,xE),nC=new _M,Ba,mi,Ha,wE,SM=(wE=class extends fm{constructor(){super();He(this,Ba,!0);He(this,mi);He(this,Ha);Te(this,Ha,e=>{if(!mm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,mi)||this.setEventListener(Y(this,Ha))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,mi))==null||e.call(this),Te(this,mi,void 0))}setEventListener(e){var n;Te(this,Ha,e),(n=Y(this,mi))==null||n.call(this),Te(this,mi,e(this.setOnline.bind(this)))}setOnline(e){Y(this,Ba)!==e&&(Te(this,Ba,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,Ba)}},Ba=new WeakMap,mi=new WeakMap,Ha=new WeakMap,wE),of=new SM;function EM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function NM(t){return Math.min(1e3*2**t,3e4)}function rC(t){return(t??"online")==="online"?of.isOnline():!0}var sC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cg(t){return t instanceof sC}function iC(t){let e=!1,n=0,r=!1,s;const i=EM(),a=v=>{var _;r||(p(new sC(v)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>nC.isFocused()&&(t.networkMode==="always"||of.isOnline())&&t.canRun(),h=()=>rC(t.networkMode)&&t.canRun(),m=v=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var _;s=b=>{(r||u())&&v(b)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),w=()=>{if(r)return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(m).catch(b=>{var M;if(r)return;const x=t.retry??(mm?0:3),S=t.retryDelay??NM,j=typeof S=="function"?S(n,b):S,D=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!D){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),vM(j).then(()=>u()?void 0:g()).then(()=>{e?p(b):w()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():g().then(w),i)}}function TM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var un=TM(),No,bE,oC=(bE=class{constructor(){He(this,No)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pM(this.gcTime)&&Te(this,No,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(mm?1/0:5*60*1e3))}clearGcTimeout(){Y(this,No)&&(clearTimeout(Y(this,No)),Te(this,No,void 0))}},No=new WeakMap,bE),Wa,qa,Qn,Yt,_u,To,gr,ys,_E,CM=(_E=class extends oC{constructor(n){super();He(this,gr);He(this,Wa);He(this,qa);He(this,Qn);He(this,Yt);He(this,_u);He(this,To);Te(this,To,!1),Te(this,_u,n.defaultOptions),this.setOptions(n.options),this.observers=[],Te(this,Qn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Te(this,Wa,jM(this.options)),this.state=n.state??Y(this,Wa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Y(this,Yt))==null?void 0:n.promise}setOptions(n){this.options={...Y(this,_u),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,Qn).remove(this)}setData(n,r){const s=xM(this.state.data,n,this.options);return Gt(this,gr,ys).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,gr,ys).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Y(this,Yt))==null?void 0:s.promise;return(i=Y(this,Yt))==null||i.cancel(n),r?r.then(pr).catch(pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,Wa))}isActive(){return this.observers.some(n=>yM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ix||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!gM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Yt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Yt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Y(this,Qn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Y(this,Yt)&&(Y(this,To)?Y(this,Yt).cancel({revert:!0}):Y(this,Yt).cancelRetry()),this.scheduleGc()),Y(this,Qn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,gr,ys).call(this,{type:"invalidate"})}fetch(n,r){var u,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Yt))return Y(this,Yt).continueRetry(),Y(this,Yt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Te(this,To,!0),s.signal)})},a=()=>{const p=tC(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Te(this,To,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Te(this,qa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,gr,ys).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=p=>{var g,w,v,_;cg(p)&&p.silent||Gt(this,gr,ys).call(this,{type:"error",error:p}),cg(p)||((w=(g=Y(this,Qn).config).onError)==null||w.call(g,p,this),(_=(v=Y(this,Qn).config).onSettled)==null||_.call(v,this.state.data,p,this)),this.scheduleGc()};return Te(this,Yt,iC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,w,v,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(w=(g=Y(this,Qn).config).onSuccess)==null||w.call(g,p,this),(_=(v=Y(this,Qn).config).onSettled)==null||_.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Gt(this,gr,ys).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Gt(this,gr,ys).call(this,{type:"pause"})},onContinue:()=>{Gt(this,gr,ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Y(this,Yt).start()}},Wa=new WeakMap,qa=new WeakMap,Qn=new WeakMap,Yt=new WeakMap,_u=new WeakMap,To=new WeakMap,gr=new WeakSet,ys=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...kM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return cg(i)&&i.revert&&Y(this,qa)?{...Y(this,qa),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Y(this,Qn).notify({query:this,type:"updated",action:n})})},_E);function kM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Gr,SE,IM=(SE=class extends fm{constructor(e={}){super();He(this,Gr);this.config=e,Te(this,Gr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??jx(s,n);let a=this.get(i);return a||(a=new CM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){Y(this,Gr).has(e.queryHash)||(Y(this,Gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Y(this,Gr).get(e.queryHash);n&&(e.destroy(),n===e&&Y(this,Gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,Gr).get(e)}getAll(){return[...Y(this,Gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>P1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>P1(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Gr=new WeakMap,SE),Kr,an,Co,Qr,ri,EE,AM=(EE=class extends oC{constructor(n){super();He(this,Qr);He(this,Kr);He(this,an);He(this,Co);this.mutationId=n.mutationId,Te(this,an,n.mutationCache),Te(this,Kr,[]),this.state=n.state||RM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Y(this,Kr).includes(n)||(Y(this,Kr).push(n),this.clearGcTimeout(),Y(this,an).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Te(this,Kr,Y(this,Kr).filter(r=>r!==n)),this.scheduleGc(),Y(this,an).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Y(this,Kr).length||(this.state.status==="pending"?this.scheduleGc():Y(this,an).remove(this))}continue(){var n;return((n=Y(this,Co))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,u,h,m,p,g,w,v,_,b,x,S,j,D,M,E,C;Te(this,Co,iC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(T,k)=>{Gt(this,Qr,ri).call(this,{type:"failed",failureCount:T,error:k})},onPause:()=>{Gt(this,Qr,ri).call(this,{type:"pause"})},onContinue:()=>{Gt(this,Qr,ri).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,an).canRun(this)}));const r=this.state.status==="pending",s=!Y(this,Co).canStart();try{if(!r){Gt(this,Qr,ri).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=Y(this,an).config).onMutate)==null?void 0:a.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Gt(this,Qr,ri).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const T=await Y(this,Co).start();return await((h=(u=Y(this,an).config).onSuccess)==null?void 0:h.call(u,T,n,this.state.context,this)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,T,n,this.state.context)),await((w=(g=Y(this,an).config).onSettled)==null?void 0:w.call(g,T,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,T,null,n,this.state.context)),Gt(this,Qr,ri).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(b=Y(this,an).config).onError)==null?void 0:x.call(b,T,n,this.state.context,this)),await((j=(S=this.options).onError)==null?void 0:j.call(S,T,n,this.state.context)),await((M=(D=Y(this,an).config).onSettled)==null?void 0:M.call(D,void 0,T,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,T,n,this.state.context)),T}finally{Gt(this,Qr,ri).call(this,{type:"error",error:T})}}finally{Y(this,an).runNext(this)}}},Kr=new WeakMap,an=new WeakMap,Co=new WeakMap,Qr=new WeakSet,ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),un.batch(()=>{Y(this,Kr).forEach(s=>{s.onMutationUpdate(n)}),Y(this,an).notify({mutation:this,type:"updated",action:n})})},EE);function RM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dn,Su,NE,PM=(NE=class extends fm{constructor(e={}){super();He(this,Dn);He(this,Su);this.config=e,Te(this,Dn,new Map),Te(this,Su,Date.now())}build(e,n,r){const s=new AM({mutationCache:this,mutationId:++_d(this,Su)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=zd(e),r=Y(this,Dn).get(n)??[];r.push(e),Y(this,Dn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=zd(e);if(Y(this,Dn).has(n)){const s=(r=Y(this,Dn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Y(this,Dn).delete(n):Y(this,Dn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Y(this,Dn).get(zd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Y(this,Dn).get(zd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Y(this,Dn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D1(n,r))}findAll(e={}){return this.getAll().filter(n=>D1(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(pr))))}},Dn=new WeakMap,Su=new WeakMap,NE);function zd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function L1(t){return{onFetch:(e,n)=>{var h,m,p,g,w;const r=e.options,s=(p=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=tC(e.options,e.fetchOptions),x=async(S,j,D)=>{if(v)return Promise.reject();if(j==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:j,direction:D?"backward":"forward",meta:e.options.meta};_(M);const E=await b(M),{maxPages:C}=e.options,T=D?bM:wM;return{pages:T(S.pages,E,C),pageParams:T(S.pageParams,j,C)}};if(s&&i.length){const S=s==="backward",j=S?DM:V1,D={pages:i,pageParams:a},M=j(r,D);l=await x(D,M,S)}else{const S=t??i.length;do{const j=c===0?a[0]??r.initialPageParam:V1(r,l);if(c>0&&j==null)break;l=await x(l,j),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function V1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function DM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ft,pi,gi,Ga,Ka,yi,Qa,Xa,TE,MM=(TE=class{constructor(t={}){He(this,ft);He(this,pi);He(this,gi);He(this,Ga);He(this,Ka);He(this,yi);He(this,Qa);He(this,Xa);Te(this,ft,t.queryCache||new IM),Te(this,pi,t.mutationCache||new PM),Te(this,gi,t.defaultOptions||{}),Te(this,Ga,new Map),Te(this,Ka,new Map),Te(this,yi,0)}mount(){_d(this,yi)._++,Y(this,yi)===1&&(Te(this,Qa,nC.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,ft).onFocus())})),Te(this,Xa,of.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,ft).onOnline())})))}unmount(){var t,e;_d(this,yi)._--,Y(this,yi)===0&&((t=Y(this,Qa))==null||t.call(this),Te(this,Qa,void 0),(e=Y(this,Xa))==null||e.call(this),Te(this,Xa,void 0))}isFetching(t){return Y(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Y(this,ft).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(R1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Y(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Y(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,a=mM(e,i);if(a!==void 0)return Y(this,ft).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return un.batch(()=>Y(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Y(this,ft);un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Y(this,ft),r={type:"active",...t};return un.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=un.batch(()=>Y(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(pr).catch(pr)}invalidateQueries(t={},e={}){return un.batch(()=>{if(Y(this,ft).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=un.batch(()=>Y(this,ft).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Y(this,ft).build(this,e);return n.isStaleByTime(R1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pr).catch(pr)}fetchInfiniteQuery(t){return t.behavior=L1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pr).catch(pr)}ensureInfiniteQueryData(t){return t.behavior=L1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return of.isOnline()?Y(this,pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,ft)}getMutationCache(){return Y(this,pi)}getDefaultOptions(){return Y(this,gi)}setDefaultOptions(t){Te(this,gi,t)}setQueryDefaults(t,e){Y(this,Ga).set(iu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Y(this,Ga).values()];let n={};return e.forEach(r=>{ou(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Y(this,Ka).set(iu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Y(this,Ka).values()];let n={};return e.forEach(r=>{ou(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Y(this,gi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=jx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Ix&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,gi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,ft).clear(),Y(this,pi).clear()}},ft=new WeakMap,pi=new WeakMap,gi=new WeakMap,Ga=new WeakMap,Ka=new WeakMap,yi=new WeakMap,Qa=new WeakMap,Xa=new WeakMap,TE),OM=f.createContext(void 0),LM=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(OM.Provider,{value:t,children:e}));async function VM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const FM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await VM(n),await n.json())},zM=new MM({defaultOptions:{queries:{queryFn:FM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),UM=1,$M=1e6;let ug=0;function BM(){return ug=(ug+1)%Number.MAX_SAFE_INTEGER,ug.toString()}const dg=new Map,F1=t=>{if(dg.has(t))return;const e=setTimeout(()=>{dg.delete(t),Ic({type:"REMOVE_TOAST",toastId:t})},$M);dg.set(t,e)},HM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,UM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?F1(n):t.toasts.forEach(r=>{F1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},yh=[];let vh={toasts:[]};function Ic(t){vh=HM(vh,t),yh.forEach(e=>{e(vh)})}function WM({...t}){const e=BM(),n=s=>Ic({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Ic({type:"DISMISS_TOAST",toastId:e});return Ic({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Yi(){const[t,e]=f.useState(vh);return f.useEffect(()=>(yh.push(e),()=>{const n=yh.indexOf(e);n>-1&&yh.splice(n,1)}),[t]),{...t,toast:WM,dismiss:n=>Ic({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function z1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function aC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=z1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():z1(t[s],null)}}}}function je(...t){return f.useCallback(aC(...t),t)}function qM(t,e){const n=f.createContext(e),r=i=>{const{children:a,...l}=i,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=f.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function qn(t,e=[]){let n=[];function r(i,a){const l=f.createContext(a),c=n.length;n=[...n,a];const u=m=>{var b;const{scope:p,children:g,...w}=m,v=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,_=f.useMemo(()=>w,Object.values(w));return o.jsx(v.Provider,{value:_,children:g})};u.displayName=i+"Provider";function h(m,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,w=f.useContext(g);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(a=>f.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,GM(s,...e)]}function GM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Fo(t){const e=QM(t),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(XM);if(c){const u=c.props.children,h=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return o.jsx(e,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var KM=Fo("Slot");function QM(t){const e=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=JM(s),l=YM(i,s.props);return s.type!==f.Fragment&&(l.ref=r?aC(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lC=Symbol("radix.slottable");function cC(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=lC,e}function XM(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lC}function YM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function JM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ax(t){const e=t+"CollectionProvider",[n,r]=qn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:_,children:b}=v,x=Ce.useRef(null),S=Ce.useRef(new Map).current;return o.jsx(s,{scope:_,itemMap:S,collectionRef:x,children:b})};a.displayName=e;const l=t+"CollectionSlot",c=Fo(l),u=Ce.forwardRef((v,_)=>{const{scope:b,children:x}=v,S=i(l,b),j=je(_,S.collectionRef);return o.jsx(c,{ref:j,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",p=Fo(h),g=Ce.forwardRef((v,_)=>{const{scope:b,children:x,...S}=v,j=Ce.useRef(null),D=je(_,j),M=i(h,b);return Ce.useEffect(()=>(M.itemMap.set(j,{ref:j,...S}),()=>void M.itemMap.delete(j))),o.jsx(p,{[m]:"",ref:D,children:x})});g.displayName=h;function w(v){const _=i(t+"CollectionConsumer",v);return Ce.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(_.itemMap.values()).sort((M,E)=>S.indexOf(M.ref.current)-S.indexOf(E.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},w,r]}var ZM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ge=ZM.reduce((t,e)=>{const n=Fo(`Primitive.${e}`),r=f.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uC(t,e){t&&nr.flushSync(()=>t.dispatchEvent(e))}function pt(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function eO(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var tO="DismissableLayer",My="dismissableLayer.update",nO="dismissableLayer.pointerDownOutside",rO="dismissableLayer.focusOutside",U1,dC=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),El=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=f.useContext(dC),[h,m]=f.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=f.useState({}),w=je(e,E=>m(E)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(_),x=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,j=x>=b,D=iO(E=>{const C=E.target,T=[...u.branches].some(k=>k.contains(C));!j||T||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},p),M=oO(E=>{const C=E.target;[...u.branches].some(k=>k.contains(C))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},p);return eO(E=>{x===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(U1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=U1)}},[h,p,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$1())},[h,u]),f.useEffect(()=>{const E=()=>g({});return document.addEventListener(My,E),()=>document.removeEventListener(My,E)},[]),o.jsx(ge.div,{...c,ref:w,style:{pointerEvents:S?j?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,M.onFocusCapture),onBlurCapture:me(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,D.onPointerDownCapture)})});El.displayName=tO;var sO="DismissableLayerBranch",hC=f.forwardRef((t,e)=>{const n=f.useContext(dC),r=f.useRef(null),s=je(e,r);return f.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(ge.div,{...t,ref:s})});hC.displayName=sO;function iO(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){fC(nO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function oO(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t),r=f.useRef(!1);return f.useEffect(()=>{const s=i=>{i.target&&!r.current&&fC(rO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $1(){const t=new CustomEvent(My);document.dispatchEvent(t)}function fC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uC(s,i):s.dispatchEvent(i)}var aO=El,lO=hC,_t=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},cO="Portal",Nl=f.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=f.useState(!1);_t(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?V5.createPortal(o.jsx(ge.div,{...r,ref:e}),a):null});Nl.displayName=cO;function uO(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var In=t=>{const{present:e,children:n}=t,r=dO(e),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=je(r.ref,hO(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:i}):null};In.displayName="Presence";function dO(t){const[e,n]=f.useState(),r=f.useRef({}),s=f.useRef(t),i=f.useRef("none"),a=t?"mounted":"unmounted",[l,c]=uO(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Ud(r.current);i.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Ud(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,m=g=>{const v=Ud(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=g=>{g.target===e&&(i.current=Ud(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Ud(t){return(t==null?void 0:t.animationName)||"none"}function hO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ps({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=fO({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=pt(n),c=f.useCallback(u=>{if(i){const m=typeof u=="function"?u(t):u;m!==t&&l(m)}else s(u)},[i,t,s,l]);return[a,c]}function fO({defaultProp:t,onChange:e}){const n=f.useState(t),[r]=n,s=f.useRef(r),i=pt(e);return f.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var mO="VisuallyHidden",Iu=f.forwardRef((t,e)=>o.jsx(ge.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Iu.displayName=mO;var pO=Iu,Rx="ToastProvider",[Px,gO,yO]=Ax("Toast"),[mC,$G]=qn("Toast",[yO]),[vO,pm]=mC(Rx),pC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=f.useState(null),[u,h]=f.useState(0),m=f.useRef(!1),p=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Rx}\`. Expected non-empty \`string\`.`),o.jsx(Px.Provider,{scope:e,children:o.jsx(vO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>h(g=>g+1),[]),onToastRemove:f.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:a})})};pC.displayName=Rx;var gC="ToastViewport",xO=["F8"],Oy="toast.viewportPause",Ly="toast.viewportResume",yC=f.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=xO,label:s="Notifications ({hotkey})",...i}=t,a=pm(gC,n),l=gO(n),c=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=f.useRef(null),p=je(e,m,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;f.useEffect(()=>{const _=b=>{var S;r.length!==0&&r.every(j=>b[j]||b.code===j)&&((S=m.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),f.useEffect(()=>{const _=c.current,b=m.current;if(w&&_&&b){const x=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Oy);b.dispatchEvent(M),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Ly);b.dispatchEvent(M),a.isClosePausedRef.current=!1}},j=M=>{!_.contains(M.relatedTarget)&&S()},D=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",x),_.addEventListener("focusout",j),_.addEventListener("pointermove",x),_.addEventListener("pointerleave",D),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",x),_.removeEventListener("focusout",j),_.removeEventListener("pointermove",x),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[w,a.isClosePausedRef]);const v=f.useCallback(({tabbingDirection:_})=>{const x=l().map(S=>{const j=S.ref.current,D=[j,...RO(j)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?x.reverse():x).flat()},[l]);return f.useEffect(()=>{const _=m.current;if(_){const b=x=>{var D,M,E;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const C=document.activeElement,T=x.shiftKey;if(x.target===_&&T){(D=u.current)==null||D.focus();return}const P=v({tabbingDirection:T?"backwards":"forwards"}),R=P.findIndex(O=>O===C);hg(P.slice(R+1))?x.preventDefault():T?(M=u.current)==null||M.focus():(E=h.current)==null||E.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[l,v]),o.jsxs(lO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&o.jsx(Vy,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});hg(_)}}),o.jsx(Px.Slot,{scope:n,children:o.jsx(ge.ol,{tabIndex:-1,...i,ref:p})}),w&&o.jsx(Vy,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});hg(_)}})]})});yC.displayName=gC;var vC="ToastFocusProxy",Vy=f.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=pm(vC,n);return o.jsx(Iu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Vy.displayName=vC;var gm="Toast",wO="toast.swipeStart",bO="toast.swipeMove",_O="toast.swipeCancel",SO="toast.swipeEnd",xC=f.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Ps({prop:r,defaultProp:s,onChange:i});return o.jsx(In,{present:n||l,children:o.jsx(TO,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:pt(t.onPause),onResume:pt(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});xC.displayName=gm;var[EO,NO]=mC(gm,{onClose(){}}),TO=f.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:g,...w}=t,v=pm(gm,n),[_,b]=f.useState(null),x=je(e,O=>b(O)),S=f.useRef(null),j=f.useRef(null),D=s||v.duration,M=f.useRef(0),E=f.useRef(D),C=f.useRef(0),{onToastAdd:T,onToastRemove:k}=v,I=pt(()=>{var ie;(_==null?void 0:_.contains(document.activeElement))&&((ie=v.viewport)==null||ie.focus()),a()}),P=f.useCallback(O=>{!O||O===1/0||(window.clearTimeout(C.current),M.current=new Date().getTime(),C.current=window.setTimeout(I,O))},[I]);f.useEffect(()=>{const O=v.viewport;if(O){const ie=()=>{P(E.current),u==null||u()},te=()=>{const J=new Date().getTime()-M.current;E.current=E.current-J,window.clearTimeout(C.current),c==null||c()};return O.addEventListener(Oy,te),O.addEventListener(Ly,ie),()=>{O.removeEventListener(Oy,te),O.removeEventListener(Ly,ie)}}},[v.viewport,D,c,u,P]),f.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(D)},[i,D,v.isClosePausedRef,P]),f.useEffect(()=>(T(),()=>k()),[T,k]);const R=f.useMemo(()=>_?TC(_):null,[_]);return v.viewport?o.jsxs(o.Fragment,{children:[R&&o.jsx(CO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),o.jsx(EO,{scope:n,onClose:I,children:nr.createPortal(o.jsx(Px.ItemSlot,{scope:n,children:o.jsx(aO,{asChild:!0,onEscapeKeyDown:me(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:me(t.onPointerDown,O=>{O.button===0&&(S.current={x:O.clientX,y:O.clientY})}),onPointerMove:me(t.onPointerMove,O=>{if(!S.current)return;const ie=O.clientX-S.current.x,te=O.clientY-S.current.y,J=!!j.current,L=["left","right"].includes(v.swipeDirection),q=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=L?q(0,ie):0,B=L?0:q(0,te),Q=O.pointerType==="touch"?10:2,re={x:z,y:B},de={originalEvent:O,delta:re};J?(j.current=re,$d(bO,m,de,{discrete:!1})):B1(re,v.swipeDirection,Q)?(j.current=re,$d(wO,h,de,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(ie)>Q||Math.abs(te)>Q)&&(S.current=null)}),onPointerUp:me(t.onPointerUp,O=>{const ie=j.current,te=O.target;if(te.hasPointerCapture(O.pointerId)&&te.releasePointerCapture(O.pointerId),j.current=null,S.current=null,ie){const J=O.currentTarget,L={originalEvent:O,delta:ie};B1(ie,v.swipeDirection,v.swipeThreshold)?$d(SO,g,L,{discrete:!0}):$d(_O,p,L,{discrete:!0}),J.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),CO=t=>{const{__scopeToast:e,children:n,...r}=t,s=pm(gm,e),[i,a]=f.useState(!1),[l,c]=f.useState(!1);return IO(()=>a(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Nl,{asChild:!0,children:o.jsx(Iu,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},kO="ToastTitle",wC=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(ge.div,{...r,ref:e})});wC.displayName=kO;var jO="ToastDescription",bC=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(ge.div,{...r,ref:e})});bC.displayName=jO;var _C="ToastAction",SC=f.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(NC,{altText:n,asChild:!0,children:o.jsx(Dx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${_C}\`. Expected non-empty \`string\`.`),null)});SC.displayName=_C;var EC="ToastClose",Dx=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=NO(EC,n);return o.jsx(NC,{asChild:!0,children:o.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});Dx.displayName=EC;var NC=f.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function TC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),AO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...TC(r))}}),e}function $d(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uC(s,i):s.dispatchEvent(i)}var B1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function IO(t=()=>{}){const e=pt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function AO(t){return t.nodeType===t.ELEMENT_NODE}function RO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var PO=pC,CC=yC,kC=xC,jC=wC,IC=bC,AC=SC,RC=Dx;function PC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=PC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=PC(t))&&(r&&(r+=" "),r+=e);return r}const H1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,W1=DC,Au=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return W1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],m=i==null?void 0:i[u];if(h===null)return null;const p=H1(h)||H1(m);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[m,p]=h;return p===void 0||(u[m]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:m,className:p,...g}=h;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...l}[v]):{...i,...l}[v]===_})?[...u,m,p]:u},[]);return W1(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>f.createElement("svg",{ref:c,...MO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:MC("lucide",s),...l},[...a.map(([u,h])=>f.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const n=f.forwardRef(({className:r,...s},i)=>f.createElement(OO,{ref:i,iconNode:e,className:MC(`lucide-${DO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=le("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=le("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=le("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=le("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=le("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=le("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=le("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=le("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=le("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=le("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=le("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=le("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=le("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=le("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=le("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=le("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=le("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=le("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=le("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=le("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=le("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=le("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=le("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=le("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=le("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),$x="-",m3=t=>{const e=g3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split($x);return l[0]===""&&l.length!==1&&l.shift(),GC(l,e)||p3(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},GC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?GC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join($x);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},X1=/^\[(.+)\]$/,p3=t=>{if(X1.test(t)){const e=X1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},g3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return v3(Object.entries(t.classGroups),n).forEach(([i,a])=>{By(a,r,i,e)}),r},By=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Y1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(y3(s)){By(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{By(a,Y1(e,i),n,r)})})},Y1=(t,e)=>{let n=t;return e.split($x).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},y3=t=>t.isThemeGetter,v3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,x3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},KC="!",w3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,h=0,m;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(b==="/"){m=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(KC),w=g?p.substring(1):p,v=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},b3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},_3=t=>({cache:x3(t.cacheSize),parseClassName:w3(t),...m3(t)}),S3=/\s+/,E3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(S3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let w=!!g,v=r(w?p.substring(0,g):p);if(!v){if(!w){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}w=!1}const _=b3(h).join(":"),b=m?_+KC:_,x=b+v;if(i.includes(x))continue;i.push(x);const S=s(v,w);for(let j=0;j<S.length;++j){const D=S[j];i.push(b+D)}l=u+(l.length>0?" "+l:l)}return l};function N3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=QC(e))&&(r&&(r+=" "),r+=n);return r}const QC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=QC(t[r]))&&(n&&(n+=" "),n+=e);return n};function T3(t,...e){let n,r,s,i=a;function a(c){const u=e.reduce((h,m)=>m(h),t());return n=_3(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=E3(c,n);return s(c,h),h}return function(){return i(N3.apply(null,arguments))}}const rt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},XC=/^\[(?:([a-z-]+):)?(.+)\]$/i,C3=/^\d+\/\d+$/,k3=new Set(["px","full","screen"]),j3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,I3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,P3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=t=>Ra(t)||k3.has(t)||C3.test(t),Zs=t=>Tl(t,"length",U3),Ra=t=>!!t&&!Number.isNaN(Number(t)),fg=t=>Tl(t,"number",Ra),uc=t=>!!t&&Number.isInteger(Number(t)),D3=t=>t.endsWith("%")&&Ra(t.slice(0,-1)),Se=t=>XC.test(t),ei=t=>j3.test(t),M3=new Set(["length","size","percentage"]),O3=t=>Tl(t,M3,YC),L3=t=>Tl(t,"position",YC),V3=new Set(["image","url"]),F3=t=>Tl(t,V3,B3),z3=t=>Tl(t,"",$3),dc=()=>!0,Tl=(t,e,n)=>{const r=XC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},U3=t=>I3.test(t)&&!A3.test(t),YC=()=>!1,$3=t=>R3.test(t),B3=t=>P3.test(t),H3=()=>{const t=rt("colors"),e=rt("spacing"),n=rt("blur"),r=rt("brightness"),s=rt("borderColor"),i=rt("borderRadius"),a=rt("borderSpacing"),l=rt("borderWidth"),c=rt("contrast"),u=rt("grayscale"),h=rt("hueRotate"),m=rt("invert"),p=rt("gap"),g=rt("gradientColorStops"),w=rt("gradientColorStopPositions"),v=rt("inset"),_=rt("margin"),b=rt("opacity"),x=rt("padding"),S=rt("saturate"),j=rt("scale"),D=rt("sepia"),M=rt("skew"),E=rt("space"),C=rt("translate"),T=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Se,e],P=()=>[Se,e],R=()=>["",gs,Zs],O=()=>["auto",Ra,Se],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Se],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Ra,Se];return{cacheSize:500,separator:":",theme:{colors:[dc],spacing:[gs,Zs],blur:["none","",ei,Se],brightness:B(),borderColor:[t],borderRadius:["none","","full",ei,Se],borderSpacing:P(),borderWidth:R(),contrast:B(),grayscale:q(),hueRotate:B(),invert:q(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[D3,Zs],inset:I(),margin:I(),opacity:B(),padding:P(),saturate:B(),scale:B(),sepia:q(),skew:B(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[ei]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),Se]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uc,Se]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",uc,Se]}],"grid-cols":[{"grid-cols":[dc]}],"col-start-end":[{col:["auto",{span:["full",uc,Se]},Se]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[dc]}],"row-start-end":[{row:["auto",{span:[uc,Se]},Se]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[ei]},ei]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ei,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fg]}],"font-family":[{font:[dc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",Ra,fg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,Zs]}],"underline-offset":[{"underline-offset":["auto",gs,Se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),L3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",O3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},F3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:te()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[gs,Se]}],"outline-w":[{outline:[gs,Zs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[gs,Zs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ei,z3]}],"shadow-color":[{shadow:[dc]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ei,Se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[uc,Se]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gs,Zs,fg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},W3=T3(H3);function $(...t){return W3(DC(t))}const q3=PO,JC=f.forwardRef(({className:t,...e},n)=>o.jsx(CC,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));JC.displayName=CC.displayName;const G3=Au("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZC=f.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(kC,{ref:r,className:$(G3({variant:e}),t),...n}));ZC.displayName=kC.displayName;const K3=f.forwardRef(({className:t,...e},n)=>o.jsx(AC,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));K3.displayName=AC.displayName;const ek=f.forwardRef(({className:t,...e},n)=>o.jsx(RC,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Ds,{className:"h-4 w-4"})}));ek.displayName=RC.displayName;const tk=f.forwardRef(({className:t,...e},n)=>o.jsx(jC,{ref:n,className:$("text-sm font-semibold",t),...e}));tk.displayName=jC.displayName;const nk=f.forwardRef(({className:t,...e},n)=>o.jsx(IC,{ref:n,className:$("text-sm opacity-90",t),...e}));nk.displayName=IC.displayName;function Q3(){const{toasts:t}=Yi();return o.jsxs(q3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(ZC,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(tk,{children:n}),r&&o.jsx(nk,{children:r})]}),s,o.jsx(ek,{})]},e)}),o.jsx(JC,{})]})}var X3=VE[" useId ".trim().toString()]||(()=>{}),Y3=0;function ts(t){const[e,n]=f.useState(X3());return _t(()=>{n(r=>r??String(Y3++))},[t]),e?`radix-${e}`:""}const J3=["top","right","bottom","left"],Vi=Math.min,On=Math.max,df=Math.round,Bd=Math.floor,ns=t=>({x:t,y:t}),Z3={left:"right",right:"left",bottom:"top",top:"bottom"},eL={start:"end",end:"start"};function Hy(t,e,n){return On(t,Vi(e,n))}function Ms(t,e){return typeof t=="function"?t(e):t}function Os(t){return t.split("-")[0]}function Cl(t){return t.split("-")[1]}function Bx(t){return t==="x"?"y":"x"}function Hx(t){return t==="y"?"height":"width"}function Fi(t){return["top","bottom"].includes(Os(t))?"y":"x"}function Wx(t){return Bx(Fi(t))}function tL(t,e,n){n===void 0&&(n=!1);const r=Cl(t),s=Wx(t),i=Hx(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=hf(a)),[a,hf(a)]}function nL(t){const e=hf(t);return[Wy(t),e,Wy(e)]}function Wy(t){return t.replace(/start|end/g,e=>eL[e])}function rL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function sL(t,e,n,r){const s=Cl(t);let i=rL(Os(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Wy)))),i}function hf(t){return t.replace(/left|right|bottom|top/g,e=>Z3[e])}function iL(t){return{top:0,right:0,bottom:0,left:0,...t}}function rk(t){return typeof t!="number"?iL(t):{top:t,right:t,bottom:t,left:t}}function ff(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function J1(t,e,n){let{reference:r,floating:s}=t;const i=Fi(e),a=Wx(e),l=Hx(a),c=Os(e),u=i==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-s.width,y:m};break;default:g={x:r.x,y:r.y}}switch(Cl(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}const oL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:m}=J1(u,r,c),p=r,g={},w=0;for(let v=0;v<l.length;v++){const{name:_,fn:b}=l[v],{x,y:S,data:j,reset:D}=await b({x:h,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});h=x??h,m=S??m,g={...g,[_]:{...g[_],...j}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(u=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:m}=J1(u,p,c)),v=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:g}};async function cu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:g=0}=Ms(e,t),w=rk(g),_=l[p?m==="floating"?"reference":"floating":m],b=ff(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=ff(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(b.top-D.top+w.top)/j.y,bottom:(D.bottom-b.bottom+w.bottom)/j.y,left:(b.left-D.left+w.left)/j.x,right:(D.right-b.right+w.right)/j.x}}const aL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Ms(t,e)||{};if(u==null)return{};const m=rk(h),p={x:n,y:r},g=Wx(s),w=Hx(g),v=await a.getDimensions(u),_=g==="y",b=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",j=i.reference[w]+i.reference[g]-p[g]-i.floating[w],D=p[g]-i.reference[g],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let E=M?M[S]:0;(!E||!await(a.isElement==null?void 0:a.isElement(M)))&&(E=l.floating[S]||i.floating[w]);const C=j/2-D/2,T=E/2-v[w]/2-1,k=Vi(m[b],T),I=Vi(m[x],T),P=k,R=E-v[w]-I,O=E/2-v[w]/2+C,ie=Hy(P,O,R),te=!c.arrow&&Cl(s)!=null&&O!==ie&&i.reference[w]/2-(O<P?k:I)-v[w]/2<0,J=te?O<P?O-P:O-R:0;return{[g]:p[g]+J,data:{[g]:ie,centerOffset:O-ie-J,...te&&{alignmentOffset:J}},reset:te}}}),lL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=Ms(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Os(s),x=Fi(l),S=Os(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),D=p||(S||!v?[hf(l)]:nL(l)),M=w!=="none";!p&&M&&D.push(...sL(l,v,w,j));const E=[l,...D],C=await cu(e,_),T=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(C[b]),m){const O=tL(s,a,j);T.push(C[O[0]],C[O[1]])}if(k=[...k,{placement:s,overflows:T}],!T.every(O=>O<=0)){var I,P;const O=(((I=i.flip)==null?void 0:I.index)||0)+1,ie=E[O];if(ie)return{data:{index:O,overflows:k},reset:{placement:ie}};let te=(P=k.filter(J=>J.overflows[0]<=0).sort((J,L)=>J.overflows[1]-L.overflows[1])[0])==null?void 0:P.placement;if(!te)switch(g){case"bestFit":{var R;const J=(R=k.filter(L=>{if(M){const q=Fi(L.placement);return q===x||q==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(q=>q>0).reduce((q,z)=>q+z,0)]).sort((L,q)=>L[1]-q[1])[0])==null?void 0:R[0];J&&(te=J);break}case"initialPlacement":te=l;break}if(s!==te)return{reset:{placement:te}}}return{}}}};function Z1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function e_(t){return J3.some(e=>t[e]>=0)}const cL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ms(t,e);switch(r){case"referenceHidden":{const i=await cu(e,{...s,elementContext:"reference"}),a=Z1(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:e_(a)}}}case"escaped":{const i=await cu(e,{...s,altBoundary:!0}),a=Z1(i,n.floating);return{data:{escapedOffsets:a,escaped:e_(a)}}}default:return{}}}}};async function uL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Os(n),l=Cl(n),c=Fi(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,m=Ms(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const dL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await uL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},hL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:_=>{let{x:b,y:x}=_;return{x:b,y:x}}},...c}=Ms(t,e),u={x:n,y:r},h=await cu(e,c),m=Fi(Os(s)),p=Bx(m);let g=u[p],w=u[m];if(i){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=g+h[_],S=g-h[b];g=Hy(x,g,S)}if(a){const _=m==="y"?"top":"left",b=m==="y"?"bottom":"right",x=w+h[_],S=w-h[b];w=Hy(x,w,S)}const v=l.fn({...e,[p]:g,[m]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[m]:a}}}}}},fL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ms(t,e),h={x:n,y:r},m=Fi(s),p=Bx(m);let g=h[p],w=h[m];const v=Ms(l,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=p==="y"?"height":"width",j=i.reference[p]-i.floating[S]+_.mainAxis,D=i.reference[p]+i.reference[S]-_.mainAxis;g<j?g=j:g>D&&(g=D)}if(u){var b,x;const S=p==="y"?"width":"height",j=["top","left"].includes(Os(s)),D=i.reference[m]-i.floating[S]+(j&&((b=a.offset)==null?void 0:b[m])||0)+(j?0:_.crossAxis),M=i.reference[m]+i.reference[S]+(j?0:((x=a.offset)==null?void 0:x[m])||0)-(j?_.crossAxis:0);w<D?w=D:w>M&&(w=M)}return{[p]:g,[m]:w}}}},mL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Ms(t,e),h=await cu(e,u),m=Os(s),p=Cl(s),g=Fi(s)==="y",{width:w,height:v}=i.floating;let _,b;m==="top"||m==="bottom"?(_=m,b=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,_=p==="end"?"top":"bottom");const x=v-h.top-h.bottom,S=w-h.left-h.right,j=Vi(v-h[_],x),D=Vi(w-h[b],S),M=!e.middlewareData.shift;let E=j,C=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=x),M&&!p){const k=On(h.left,0),I=On(h.right,0),P=On(h.top,0),R=On(h.bottom,0);g?C=w-2*(k!==0||I!==0?k+I:On(h.left,h.right)):E=v-2*(P!==0||R!==0?P+R:On(h.top,h.bottom))}await c({...e,availableWidth:C,availableHeight:E});const T=await a.getDimensions(l.floating);return w!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}};function wm(){return typeof window<"u"}function kl(t){return sk(t)?(t.nodeName||"").toLowerCase():"#document"}function Un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(sk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sk(t){return wm()?t instanceof Node||t instanceof Un(t).Node:!1}function Ar(t){return wm()?t instanceof Element||t instanceof Un(t).Element:!1}function as(t){return wm()?t instanceof HTMLElement||t instanceof Un(t).HTMLElement:!1}function t_(t){return!wm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Un(t).ShadowRoot}function Du(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function pL(t){return["table","td","th"].includes(kl(t))}function bm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qx(t){const e=Gx(),n=Ar(t)?Rr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gL(t){let e=zi(t);for(;as(e)&&!al(e);){if(qx(e))return e;if(bm(e))return null;e=zi(e)}return null}function Gx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function al(t){return["html","body","#document"].includes(kl(t))}function Rr(t){return Un(t).getComputedStyle(t)}function _m(t){return Ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zi(t){if(kl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||t_(t)&&t.host||ds(t);return t_(e)?e.host:e}function ik(t){const e=zi(t);return al(e)?t.ownerDocument?t.ownerDocument.body:t.body:as(e)&&Du(e)?e:ik(e)}function uu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=ik(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Un(s);if(i){const l=qy(a);return e.concat(a,a.visualViewport||[],Du(s)?s:[],l&&n?uu(l):[])}return e.concat(s,uu(s,[],n))}function qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ok(t){const e=Rr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=as(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=df(n)!==i||df(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Kx(t){return Ar(t)?t:t.contextElement}function Pa(t){const e=Kx(t);if(!as(e))return ns(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=ok(e);let a=(i?df(n.width):n.width)/r,l=(i?df(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const yL=ns(0);function ak(t){const e=Un(t);return!Gx()||!e.visualViewport?yL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Un(t)?!1:e}function zo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Kx(t);let a=ns(1);e&&(r?Ar(r)&&(a=Pa(r)):a=Pa(t));const l=vL(i,n,r)?ak(i):ns(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,h=s.width/a.x,m=s.height/a.y;if(i){const p=Un(i),g=r&&Ar(r)?Un(r):r;let w=p,v=qy(w);for(;v&&r&&g!==w;){const _=Pa(v),b=v.getBoundingClientRect(),x=Rr(v),S=b.left+(v.clientLeft+parseFloat(x.paddingLeft))*_.x,j=b.top+(v.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,m*=_.y,c+=S,u+=j,w=Un(v),v=qy(w)}}return ff({width:h,height:m,x:c,y:u})}function Qx(t,e){const n=_m(t).scrollLeft;return e?e.left+n:zo(ds(t)).left+n}function lk(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Qx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function xL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=ds(r),l=e?bm(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=ns(1);const h=ns(0),m=as(r);if((m||!m&&!i)&&((kl(r)!=="body"||Du(a))&&(c=_m(r)),as(r))){const g=zo(r);u=Pa(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=a&&!m&&!i?lk(a,c,!0):ns(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function wL(t){return Array.from(t.getClientRects())}function bL(t){const e=ds(t),n=_m(t),r=t.ownerDocument.body,s=On(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=On(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Qx(t);const l=-n.scrollTop;return Rr(r).direction==="rtl"&&(a+=On(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function _L(t,e){const n=Un(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Gx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function SL(t,e){const n=zo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=as(t)?Pa(t):ns(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function n_(t,e,n){let r;if(e==="viewport")r=_L(t,n);else if(e==="document")r=bL(ds(t));else if(Ar(e))r=SL(e,n);else{const s=ak(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ff(r)}function ck(t,e){const n=zi(t);return n===e||!Ar(n)||al(n)?!1:Rr(n).position==="fixed"||ck(n,e)}function EL(t,e){const n=e.get(t);if(n)return n;let r=uu(t,[],!1).filter(l=>Ar(l)&&kl(l)!=="body"),s=null;const i=Rr(t).position==="fixed";let a=i?zi(t):t;for(;Ar(a)&&!al(a);){const l=Rr(a),c=qx(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Du(a)&&!c&&ck(t,a))?r=r.filter(h=>h!==a):s=l,a=zi(a)}return e.set(t,r),r}function NL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?bm(e)?[]:EL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,h)=>{const m=n_(e,h,s);return u.top=On(m.top,u.top),u.right=Vi(m.right,u.right),u.bottom=Vi(m.bottom,u.bottom),u.left=On(m.left,u.left),u},n_(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function TL(t){const{width:e,height:n}=ok(t);return{width:e,height:n}}function CL(t,e,n){const r=as(e),s=ds(e),i=n==="fixed",a=zo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=ns(0);if(r||!r&&!i)if((kl(e)!=="body"||Du(s))&&(l=_m(e)),r){const p=zo(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Qx(s));const u=s&&!r&&!i?lk(s,l):ns(0),h=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:a.width,height:a.height}}function mg(t){return Rr(t).position==="static"}function r_(t,e){if(!as(t)||Rr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function uk(t,e){const n=Un(t);if(bm(t))return n;if(!as(t)){let s=zi(t);for(;s&&!al(s);){if(Ar(s)&&!mg(s))return s;s=zi(s)}return n}let r=r_(t,e);for(;r&&pL(r)&&mg(r);)r=r_(r,e);return r&&al(r)&&mg(r)&&!qx(r)?n:r||gL(t)||n}const kL=async function(t){const e=this.getOffsetParent||uk,n=this.getDimensions,r=await n(t.floating);return{reference:CL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jL(t){return Rr(t).direction==="rtl"}const IL={convertOffsetParentRelativeRectToViewportRelativeRect:xL,getDocumentElement:ds,getClippingRect:NL,getOffsetParent:uk,getElementRects:kL,getClientRects:wL,getDimensions:TL,getScale:Pa,isElement:Ar,isRTL:jL};function dk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function AL(t,e){let n=null,r;const s=ds(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:m,width:p,height:g}=u;if(l||e(),!p||!g)return;const w=Bd(m),v=Bd(s.clientWidth-(h+p)),_=Bd(s.clientHeight-(m+g)),b=Bd(h),S={rootMargin:-w+"px "+-v+"px "+-_+"px "+-b+"px",threshold:On(0,Vi(1,c))||1};let j=!0;function D(M){const E=M[0].intersectionRatio;if(E!==c){if(!j)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!dk(u,t.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return a(!0),i}function RL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Kx(t),h=s||i?[...u?uu(u):[],...uu(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const m=u&&l?AL(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let w,v=c?zo(t):null;c&&_();function _(){const b=zo(t);v&&!dk(v,b)&&n(),v=b,w=requestAnimationFrame(_)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),m==null||m(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const PL=dL,DL=hL,ML=lL,OL=mL,LL=cL,s_=aL,VL=fL,FL=(t,e,n)=>{const r=new Map,s={platform:IL,...n},i={...s.platform,_c:r};return oL(t,e,{...s,platform:i})};var wh=typeof document<"u"?f.useLayoutEffect:f.useEffect;function mf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!mf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function hk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function i_(t,e){const n=hk(t);return Math.round(e*n)/n}function pg(t){const e=f.useRef(t);return wh(()=>{e.current=t}),e}function zL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,m]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=f.useState(r);mf(p,r)||g(r);const[w,v]=f.useState(null),[_,b]=f.useState(null),x=f.useCallback(L=>{L!==M.current&&(M.current=L,v(L))},[]),S=f.useCallback(L=>{L!==E.current&&(E.current=L,b(L))},[]),j=i||w,D=a||_,M=f.useRef(null),E=f.useRef(null),C=f.useRef(h),T=c!=null,k=pg(c),I=pg(s),P=pg(u),R=f.useCallback(()=>{if(!M.current||!E.current)return;const L={placement:e,strategy:n,middleware:p};I.current&&(L.platform=I.current),FL(M.current,E.current,L).then(q=>{const z={...q,isPositioned:P.current!==!1};O.current&&!mf(C.current,z)&&(C.current=z,nr.flushSync(()=>{m(z)}))})},[p,e,n,I,P]);wh(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[u]);const O=f.useRef(!1);wh(()=>(O.current=!0,()=>{O.current=!1}),[]),wh(()=>{if(j&&(M.current=j),D&&(E.current=D),j&&D){if(k.current)return k.current(j,D,R);R()}},[j,D,R,k,T]);const ie=f.useMemo(()=>({reference:M,floating:E,setReference:x,setFloating:S}),[x,S]),te=f.useMemo(()=>({reference:j,floating:D}),[j,D]),J=f.useMemo(()=>{const L={position:n,left:0,top:0};if(!te.floating)return L;const q=i_(te.floating,h.x),z=i_(te.floating,h.y);return l?{...L,transform:"translate("+q+"px, "+z+"px)",...hk(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:z}},[n,l,te.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:R,refs:ie,elements:te,floatingStyles:J}),[h,R,ie,te,J])}const UL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?s_({element:r.current,padding:s}).fn(n):{}:r?s_({element:r,padding:s}).fn(n):{}}}},$L=(t,e)=>({...PL(t),options:[t,e]}),BL=(t,e)=>({...DL(t),options:[t,e]}),HL=(t,e)=>({...VL(t),options:[t,e]}),WL=(t,e)=>({...ML(t),options:[t,e]}),qL=(t,e)=>({...OL(t),options:[t,e]}),GL=(t,e)=>({...LL(t),options:[t,e]}),KL=(t,e)=>({...UL(t),options:[t,e]});var QL="Arrow",fk=f.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(ge.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});fk.displayName=QL;var XL=fk;function mk(t){const[e,n]=f.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Xx="Popper",[pk,jl]=qn(Xx),[YL,gk]=pk(Xx),yk=t=>{const{__scopePopper:e,children:n}=t,[r,s]=f.useState(null);return o.jsx(YL,{scope:e,anchor:r,onAnchorChange:s,children:n})};yk.displayName=Xx;var vk="PopperAnchor",xk=f.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=gk(vk,n),a=f.useRef(null),l=je(e,a);return f.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(ge.div,{...s,ref:l})});xk.displayName=vk;var Yx="PopperContent",[JL,ZL]=pk(Yx),wk=f.forwardRef((t,e)=>{var V,U,Z,W,G,ee;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=t,_=gk(Yx,n),[b,x]=f.useState(null),S=je(e,ye=>x(ye)),[j,D]=f.useState(null),M=mk(j),E=(M==null?void 0:M.width)??0,C=(M==null?void 0:M.height)??0,T=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],P=I.length>0,R={padding:k,boundary:I.filter(t6),altBoundary:P},{refs:O,floatingStyles:ie,placement:te,isPositioned:J,middlewareData:L}=zL({strategy:"fixed",placement:T,whileElementsMounted:(...ye)=>RL(...ye,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[$L({mainAxis:s+C,alignmentAxis:a}),c&&BL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?HL():void 0,...R}),c&&WL({...R}),qL({...R,apply:({elements:ye,rects:Ee,availableWidth:tt,availableHeight:Be})=>{const{width:qe,height:Ft}=Ee.reference,ze=ye.floating.style;ze.setProperty("--radix-popper-available-width",`${tt}px`),ze.setProperty("--radix-popper-available-height",`${Be}px`),ze.setProperty("--radix-popper-anchor-width",`${qe}px`),ze.setProperty("--radix-popper-anchor-height",`${Ft}px`)}}),j&&KL({element:j,padding:l}),n6({arrowWidth:E,arrowHeight:C}),p&&GL({strategy:"referenceHidden",...R})]}),[q,z]=Sk(te),B=pt(w);_t(()=>{J&&(B==null||B())},[J,B]);const Q=(V=L.arrow)==null?void 0:V.x,re=(U=L.arrow)==null?void 0:U.y,de=((Z=L.arrow)==null?void 0:Z.centerOffset)!==0,[se,ae]=f.useState();return _t(()=>{b&&ae(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:J?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(W=L.transformOrigin)==null?void 0:W.x,(G=L.transformOrigin)==null?void 0:G.y].join(" "),...((ee=L.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(JL,{scope:n,placedSide:q,onArrowChange:D,arrowX:Q,arrowY:re,shouldHideArrow:de,children:o.jsx(ge.div,{"data-side":q,"data-align":z,...v,ref:S,style:{...v.style,animation:J?void 0:"none"}})})})});wk.displayName=Yx;var bk="PopperArrow",e6={top:"bottom",right:"left",bottom:"top",left:"right"},_k=f.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=ZL(bk,r),a=e6[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(XL,{...s,ref:n,style:{...s.style,display:"block"}})})});_k.displayName=bk;function t6(t){return t!==null}var n6=t=>({name:"transformOrigin",options:t,fn(e){var _,b,x;const{placement:n,rects:r,middlewareData:s}=e,a=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=Sk(n),m={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=a?m:`${p}px`,v=`${-c}px`):u==="top"?(w=a?m:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=a?m:`${g}px`):u==="left"&&(w=`${r.floating.width+c}px`,v=a?m:`${g}px`),{data:{x:w,y:v}}}});function Sk(t){const[e,n="center"]=t.split("-");return[e,n]}var Jx=yk,Sm=xk,Zx=wk,e0=_k,[Em,BG]=qn("Tooltip",[jl]),Nm=jl(),Ek="TooltipProvider",r6=700,Gy="tooltip.open",[s6,t0]=Em(Ek),Nk=t=>{const{__scopeTooltip:e,delayDuration:n=r6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(s6,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Nk.displayName=Ek;var Tm="Tooltip",[i6,Mu]=Em(Tm),Tk=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=t,c=t0(Tm,t.__scopeTooltip),u=Nm(e),[h,m]=f.useState(null),p=ts(),g=f.useRef(0),w=a??c.disableHoverableContent,v=l??c.delayDuration,_=f.useRef(!1),[b=!1,x]=Ps({prop:r,defaultProp:s,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(Gy))):c.onClose(),i==null||i(E)}}),S=f.useMemo(()=>b?_.current?"delayed-open":"instant-open":"closed",[b]),j=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,x(!0)},[x]),D=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x(!1)},[x]),M=f.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,x(!0),g.current=0},v)},[v,x]);return f.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(Jx,{...u,children:o.jsx(i6,{scope:e,contentId:p,open:b,stateAttribute:S,trigger:h,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?M():j()},[c.isOpenDelayedRef,M,j]),onTriggerLeave:f.useCallback(()=>{w?D():(window.clearTimeout(g.current),g.current=0)},[D,w]),onOpen:j,onClose:D,disableHoverableContent:w,children:n})})};Tk.displayName=Tm;var Ky="TooltipTrigger",Ck=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Mu(Ky,n),i=t0(Ky,n),a=Nm(n),l=f.useRef(null),c=je(e,l,s.onTriggerChange),u=f.useRef(!1),h=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Sm,{asChild:!0,...a,children:o.jsx(ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});Ck.displayName=Ky;var n0="TooltipPortal",[o6,a6]=Em(n0,{forceMount:void 0}),kk=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Mu(n0,e);return o.jsx(o6,{scope:e,forceMount:n,children:o.jsx(In,{present:n||i.open,children:o.jsx(Nl,{asChild:!0,container:s,children:r})})})};kk.displayName=n0;var ll="TooltipContent",jk=f.forwardRef((t,e)=>{const n=a6(ll,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Mu(ll,t.__scopeTooltip);return o.jsx(In,{present:r||a.open,children:a.disableHoverableContent?o.jsx(Ik,{side:s,...i,ref:e}):o.jsx(l6,{side:s,...i,ref:e})})}),l6=f.forwardRef((t,e)=>{const n=Mu(ll,t.__scopeTooltip),r=t0(ll,t.__scopeTooltip),s=f.useRef(null),i=je(e,s),[a,l]=f.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),g=f.useCallback((w,v)=>{const _=w.currentTarget,b={x:w.clientX,y:w.clientY},x=f6(b,_.getBoundingClientRect()),S=m6(b,x),j=p6(v.getBoundingClientRect()),D=y6([...S,...j]);l(D),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&h){const w=_=>g(_,h),v=_=>g(_,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",v)}}},[c,h,g,p]),f.useEffect(()=>{if(a){const w=v=>{const _=v.target,b={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!g6(b,a);x?p():S&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,a,u,p]),o.jsx(Ik,{...t,ref:i})}),[c6,u6]=Em(Tm,{isInside:!1}),d6=cC("TooltipContent"),Ik=f.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Mu(ll,n),u=Nm(n),{onClose:h}=c;return f.useEffect(()=>(document.addEventListener(Gy,h),()=>document.removeEventListener(Gy,h)),[h]),f.useEffect(()=>{if(c.trigger){const m=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),o.jsx(El,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:o.jsxs(Zx,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(d6,{children:r}),o.jsx(c6,{scope:n,isInside:!0,children:o.jsx(pO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});jk.displayName=ll;var Ak="TooltipArrow",h6=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Nm(n);return u6(Ak,n).isInside?null:o.jsx(e0,{...s,...r,ref:e})});h6.displayName=Ak;function f6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function m6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function p6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function g6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function y6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),v6(e)}function v6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var x6=Nk,w6=Tk,b6=Ck,Rk=kk,Pk=jk;const Cm=x6,km=w6,jm=b6,Ou=f.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(Pk,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Ou.displayName=Pk.displayName;const _6="modulepreload",S6=function(t){return"/"+t},o_={},Sa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=S6(c),c in o_)return;o_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":_6,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},E6=()=>{};var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},N6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Mk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),r.push(n[h],n[m],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||m==null)throw new T6;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),m!==64){const w=u<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class T6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C6=function(t){const e=Dk(t);return Mk.encodeByteArray(e,!0)},pf=function(t){return C6(t).replace(/\./g,"")},Ok=function(t){try{return Mk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=()=>k6().__FIREBASE_DEFAULTS__,I6=()=>{if(typeof process>"u"||typeof a_>"u")return;const t=a_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ok(t[1]);return e&&JSON.parse(e)},Im=()=>{try{return E6()||j6()||I6()||A6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lk=t=>{var e,n;return(n=(e=Im())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},R6=t=>{const e=Lk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vk=()=>{var t;return(t=Im())==null?void 0:t.config},Fk=t=>{var e;return(e=Im())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zk(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pf(JSON.stringify(n)),pf(JSON.stringify(a)),""].join(".")}const Rc={};function M6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?t.emulator.push(e):t.prod.push(e);return t}function O6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let l_=!1;function Uk(t,e){if(typeof window>"u"||typeof document>"u"||!Il(window.location.host)||Rc[t]===e||Rc[t]||l_)return;Rc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=M6().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{l_=!0,a()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=O6(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,v);const j=u();c(x,b),S.append(x,w,_,j),document.body.appendChild(S)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function V6(){var e;const t=(e=Im())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function U6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $6(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B6(){return!V6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H6(){try{return typeof indexedDB=="object"}catch{return!1}}function W6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="FirebaseError";class Bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q6,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?G6(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Bs(s,l,r)}}function G6(t,e){return t.replace(K6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K6=/\{\$([^}]+)}/g;function Q6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ls(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(c_(i)&&c_(a)){if(!Ls(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function c_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function X6(t,e){const n=new Y6(t,e);return n.subscribe.bind(n)}class Y6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gg),s.error===void 0&&(s.error=gg),s.complete===void 0&&(s.complete=gg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Uo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new P6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tV(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eV(t){return t===yo?void 0:t}function tV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Z6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const rV={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},sV=Ae.INFO,iV={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},oV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=sV,this._logHandler=oV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const aV=(t,e)=>e.some(n=>t instanceof n);let u_,d_;function lV(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cV(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $k=new WeakMap,Qy=new WeakMap,Bk=new WeakMap,yg=new WeakMap,s0=new WeakMap;function uV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ji(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&$k.set(n,t)}).catch(()=>{}),s0.set(e,t),e}function dV(t){if(Qy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Qy.set(t,e)}let Xy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hV(t){Xy=t(Xy)}function fV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vg(this),e,...n);return Bk.set(r,e.sort?e.sort():[e]),ji(r)}:cV().includes(t)?function(...e){return t.apply(vg(this),e),ji($k.get(this))}:function(...e){return ji(t.apply(vg(this),e))}}function mV(t){return typeof t=="function"?fV(t):(t instanceof IDBTransaction&&dV(t),aV(t,lV())?new Proxy(t,Xy):t)}function ji(t){if(t instanceof IDBRequest)return uV(t);if(yg.has(t))return yg.get(t);const e=mV(t);return e!==t&&(yg.set(t,e),s0.set(e,t)),e}const vg=t=>s0.get(t);function pV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=ji(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ji(a.result),c.oldVersion,c.newVersion,ji(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const gV=["get","getKey","getAll","getAllKeys","count"],yV=["put","add","delete","clear"],xg=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gV.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return xg.set(e,i),i}hV(t=>({...t,get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yy="@firebase/app",f_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new r0("@firebase/app"),wV="@firebase/app-compat",bV="@firebase/analytics-compat",_V="@firebase/analytics",SV="@firebase/app-check-compat",EV="@firebase/app-check",NV="@firebase/auth",TV="@firebase/auth-compat",CV="@firebase/database",kV="@firebase/data-connect",jV="@firebase/database-compat",IV="@firebase/functions",AV="@firebase/functions-compat",RV="@firebase/installations",PV="@firebase/installations-compat",DV="@firebase/messaging",MV="@firebase/messaging-compat",OV="@firebase/performance",LV="@firebase/performance-compat",VV="@firebase/remote-config",FV="@firebase/remote-config-compat",zV="@firebase/storage",UV="@firebase/storage-compat",$V="@firebase/firestore",BV="@firebase/ai",HV="@firebase/firestore-compat",WV="firebase",qV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",GV={[Yy]:"fire-core",[wV]:"fire-core-compat",[_V]:"fire-analytics",[bV]:"fire-analytics-compat",[EV]:"fire-app-check",[SV]:"fire-app-check-compat",[NV]:"fire-auth",[TV]:"fire-auth-compat",[CV]:"fire-rtdb",[kV]:"fire-data-connect",[jV]:"fire-rtdb-compat",[IV]:"fire-fn",[AV]:"fire-fn-compat",[RV]:"fire-iid",[PV]:"fire-iid-compat",[DV]:"fire-fcm",[MV]:"fire-fcm-compat",[OV]:"fire-perf",[LV]:"fire-perf-compat",[VV]:"fire-rc",[FV]:"fire-rc-compat",[zV]:"fire-gcs",[UV]:"fire-gcs-compat",[$V]:"fire-fst",[HV]:"fire-fst-compat",[BV]:"fire-vertex","fire-js":"fire-js",[WV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,KV=new Map,Zy=new Map;function m_(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Zy.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of gf.values())m_(n,t);for(const n of KV.values())m_(n,t);return!0}function i0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Lu("app","Firebase",QV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=qV;function Hk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ii.create("bad-app-name",{appName:String(s)});if(n||(n=Vk()),!n)throw Ii.create("no-options");const i=gf.get(s);if(i){if(Ls(n,i.options)&&Ls(r,i.config))return i;throw Ii.create("duplicate-app",{appName:s})}const a=new nV(s);for(const c of Zy.values())a.addComponent(c);const l=new XV(n,r,a);return gf.set(s,l),l}function Wk(t=Jy){const e=gf.get(t);if(!e&&t===Jy&&Vk())return Hk();if(!e)throw Ii.create("no-app",{appName:t});return e}function Ai(t,e,n){let r=GV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(a.join(" "));return}cl(new Uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="firebase-heartbeat-database",JV=1,du="firebase-heartbeat-store";let wg=null;function qk(){return wg||(wg=pV(YV,JV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(du)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),wg}async function ZV(t){try{const n=(await qk()).transaction(du),r=await n.objectStore(du).get(Gk(t));return await n.done,r}catch(e){if(e instanceof Bs)Vs.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(n.message)}}}async function p_(t,e){try{const r=(await qk()).transaction(du,"readwrite");await r.objectStore(du).put(e,Gk(t)),await r.done}catch(n){if(n instanceof Bs)Vs.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vs.warn(r.message)}}}function Gk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=1024,tF=30;class nF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=g_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>tF){const a=iF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g_(),{heartbeatsToSend:r,unsentEntries:s}=rF(this._heartbeatsCache.heartbeats),i=pf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vs.warn(n),""}}}function g_(){return new Date().toISOString().substring(0,10)}function rF(t,e=eF){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),y_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H6()?W6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function y_(t){return pf(JSON.stringify({version:2,heartbeats:t})).length}function iF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t){cl(new Uo("platform-logger",e=>new vV(e),"PRIVATE")),cl(new Uo("heartbeat",e=>new nF(e),"PRIVATE")),Ai(Yy,f_,t),Ai(Yy,f_,"esm2020"),Ai("fire-js","")}oF("");function Kk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aF=Kk,Qk=new Lu("auth","Firebase",Kk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new r0("@firebase/auth");function lF(t,...e){yf.logLevel<=Ae.WARN&&yf.warn(`Auth (${Al}): ${t}`,...e)}function bh(t,...e){yf.logLevel<=Ae.ERROR&&yf.error(`Auth (${Al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,...e){throw a0(t,...e)}function Cr(t,...e){return a0(t,...e)}function o0(t,e,n){const r={...aF(),[e]:n};return new Lu("auth","Firebase",r).create(e,{appName:t.name})}function Ro(t){return o0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ls(t,"argument-error"),o0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function a0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qk.create(t,...e)}function xe(t,e,...n){if(!t)throw a0(e,...n)}function Ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function Fs(t,e){t||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uF(){return v_()==="http:"||v_()==="https:"}function v_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uF()||z6()||"connection"in navigator)?navigator.onLine:!0}function hF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fs(n>e,"Short delay should be less than long delay!"),this.isMobile=L6()||U6()}get(){return dF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){Fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pF=new Fu(3e4,6e4);function c0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rl(t,e,n,r,s={}){return Yk(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Vu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return F6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Il(t.emulatorConfig.host)&&(u.credentials="include"),Xk.fetch()(await Jk(t,t.config.apiHost,n,l),u)})}async function Yk(t,e,n){t._canInitEmulator=!1;const r={...fF,...e};try{const s=new yF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Hd(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hd(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Hd(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Hd(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw o0(t,h,u);ls(t,h)}}catch(s){if(s instanceof Bs)throw s;ls(t,"network-request-failed",{message:String(s)})}}async function gF(t,e,n,r,s={}){const i=await Rl(t,e,n,r,s);return"mfaPendingCredential"in i&&ls(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Jk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?l0(t.config,s):`${t.config.apiScheme}://${s}`;return mF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class yF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),pF.get())})}}function Hd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(t,e){return Rl(t,"POST","/v1/accounts:delete",e)}async function vf(t,e){return Rl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xF(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=u0(r);xe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pc(bg(s.auth_time)),issuedAtTime:Pc(bg(s.iat)),expirationTime:Pc(bg(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bg(t){return Number(t)*1e3}function u0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ok(n);return s?JSON.parse(s):(bh("Failed to decode base64 JWT payload"),null)}catch(s){return bh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function x_(t){const e=u0(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bs&&wF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(t){var m;const e=t.auth,n=await t.getIdToken(),r=await hu(t,vf(e,{idToken:n}));xe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?Zk(s.providerUserInfo):[],a=SF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function _F(t){const e=Lt(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Zk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e){const n=await Yk(t,{},async()=>{const r=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await Jk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Il(t.emulatorConfig.host)&&(c.credentials="include"),Xk.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NF(t,e){return Rl(t,"POST","/v2/accounts:revokeToken",c0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=x_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await EF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Da;return r&&(xe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(xe(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new bF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xF(this,e)}reload(){return _F(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await hu(this,vF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:v}=n;xe(m&&v,e,"internal-error");const _=Da.fromJSON(this.name,v);xe(typeof m=="string",e,"internal-error"),ti(r,e.name),ti(s,e.name),xe(typeof p=="boolean",e,"internal-error"),xe(typeof g=="boolean",e,"internal-error"),ti(i,e.name),ti(a,e.name),ti(l,e.name),ti(c,e.name),ti(u,e.name),ti(h,e.name);const b=new Sr({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Da;s.updateFromServerResponse(n);const i=new Sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];xe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Zk(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Da;l.updateFromIdToken(r);const c=new Sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;function Es(t){Fs(t instanceof Function,"Expected a class definition");let e=w_.get(t);return e?(Fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}e2.type="NONE";const b_=e2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t,e,n){return`firebase:${t}:${e}:${n}`}class Ma{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_h(this.userKey,s.apiKey,i),this.fullPersistenceKey=_h("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vf(this.auth,{idToken:e}).catch(()=>{});return n?Sr._fromGetAccountInfoResponse(this.auth,n,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ma(Es(b_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Es(b_);const a=_h(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let m;if(typeof h=="string"){const p=await vf(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Sr._fromGetAccountInfoResponse(e,p,h)}else m=Sr._fromJSON(e,h);u!==i&&(l=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ma(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Ma(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o2(e))return"Blackberry";if(a2(e))return"Webos";if(n2(e))return"Safari";if((e.includes("chrome/")||r2(e))&&!e.includes("edge/"))return"Chrome";if(i2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function t2(t=sn()){return/firefox\//i.test(t)}function n2(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r2(t=sn()){return/crios\//i.test(t)}function s2(t=sn()){return/iemobile/i.test(t)}function i2(t=sn()){return/android/i.test(t)}function o2(t=sn()){return/blackberry/i.test(t)}function a2(t=sn()){return/webos/i.test(t)}function d0(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TF(t=sn()){var e;return d0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function CF(){return $6()&&document.documentMode===10}function l2(t=sn()){return d0(t)||i2(t)||a2(t)||o2(t)||/windows phone/i.test(t)||s2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e=[]){let n;switch(t){case"Browser":n=__(sn());break;case"Worker":n=`${__(sn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e={}){return Rl(t,"GET","/v2/passwordPolicy",c0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=6;class AF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S_(this),this.idTokenSubscription=new S_(this),this.beforeStateQueue=new kF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Es(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vf(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(xr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(Ro(this));const n=e?Lt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jF(this),n=new AF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Es(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[Es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&lF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Am(t){return Lt(t)}class S_{constructor(e){this.auth=e,this.observer=null,this.addObserver=X6(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PF(t){h0=t}function DF(t){return h0.loadJS(t)}function MF(){return h0.gapiScript}function OF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t,e){const n=i0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ls(i,e??{}))return s;ls(s,"already-initialized")}return n.initialize({options:e})}function VF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FF(t,e,n){const r=Am(t);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=u2(e),{host:a,port:l}=zF(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Ls(u,r.config.emulator)&&Ls(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Il(a)?(zk(`${i}//${a}${c}`),Uk("Auth",!0)):UF()}function u2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zF(t){const e=u2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:E_(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:E_(a)}}}function E_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,n){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t,e){return gF(t,"POST","/v1/accounts:signInWithIdp",c0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="http://localhost";class $o extends d2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new $o(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Oa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oa(e,n)}buildRequest(){const e={requestUri:$F,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends f0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends zu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:Zt.PROVIDER_ID,signInMethod:Zt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zt.credentialFromTaggedObject(e)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zt.credential(n,r)}catch{return null}}}Zt.GOOGLE_SIGN_IN_METHOD="google.com";Zt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends zu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends zu{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hi.credential(n,r)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Sr._fromIdTokenResponse(e,r,s),a=N_(r);return new ul({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N_(r);return new ul({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends Bs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new wf(e,n,r,s)}}function h2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(t,i,e,r):i})}async function BF(t,e,n=!1){const r=await hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e,n=!1){const{auth:r}=t;if(xr(r.app))return Promise.reject(Ro(r));const s="reauthenticate";try{const i=await hu(t,h2(r,s,e,t),n);xe(i.idToken,r,"internal-error");const a=u0(i.idToken);xe(a,r,"internal-error");const{sub:l}=a;return xe(t.uid===l,r,"user-mismatch"),ul._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ls(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(t,e,n=!1){if(xr(t.app))return Promise.reject(Ro(t));const r="signIn",s=await h2(t,r,e),i=await ul._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function qF(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function GF(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function KF(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function QF(t){return Lt(t).signOut()}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=1e3,YF=10;class m2 extends f2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);CF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}m2.type="LOCAL";const JF=m2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends f2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p2.type="SESSION";const g2=p2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Rm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await ZF(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=m0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function t9(t){rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function n9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function s9(){return y2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firebaseLocalStorageDb",i9=1,_f="firebaseLocalStorage",x2="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(t,e){return t.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function o9(){const t=indexedDB.deleteDatabase(v2);return new Uu(t).toPromise()}function nv(){const t=indexedDB.open(v2,i9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_f,{keyPath:x2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await o9(),e(await nv()))})})}async function T_(t,e,n){const r=Pm(t,!0).put({[x2]:e,value:n});return new Uu(r).toPromise()}async function a9(t,e){const n=Pm(t,!1).get(e),r=await new Uu(n).toPromise();return r===void 0?null:r.value}function C_(t,e){const n=Pm(t,!0).delete(e);return new Uu(n).toPromise()}const l9=800,c9=3;class w2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>c9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(s9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await n9(),!this.activeServiceWorker)return;this.sender=new e9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await T_(e,bf,"1"),await C_(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>T_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>a9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pm(s,!1).getAll();return new Uu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w2.type="LOCAL";const u9=w2;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e){return e?Es(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends d2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function d9(t){return WF(t.auth,new p0(t),t.bypassAuthState)}function h9(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),HF(n,new p0(t),t.bypassAuthState)}async function f9(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),BF(n,new p0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d9;case"linkViaPopup":case"linkViaRedirect":return f9;case"reauthViaPopup":case"reauthViaRedirect":return h9;default:ls(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new Fu(2e3,1e4);async function Wd(t,e,n){if(xr(t.app))return Promise.reject(Cr(t,"operation-not-supported-in-this-environment"));const r=Am(t);cF(t,e,f0);const s=b2(r,n);return new _o(r,"signInViaPopup",e,s).executeNotNull()}class _o extends _2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Fs(this.filter.length===1,"Popup operations only handle one event");const e=m0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m9.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="pendingRedirect",Sh=new Map;class g9 extends _2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const r=await y9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y9(t,e){const n=w9(e),r=x9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function v9(t,e){Sh.set(t._key(),e)}function x9(t){return Es(t._redirectPersistence)}function w9(t){return _h(p9,t.config.apiKey,t.name)}async function b9(t,e,n=!1){if(xr(t.app))return Promise.reject(Ro(t));const r=Am(t),s=b2(r,e),a=await new g9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=10*60*1e3;class S9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!S2(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_9&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function S2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(t,e={}){return Rl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C9=/^https?/;async function k9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N9(t);for(const n of e)try{if(j9(n))return}catch{}ls(t,"unauthorized-domain")}function j9(t){const e=ev(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!C9.test(n))return!1;if(T9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=new Fu(3e4,6e4);function j_(){const t=rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function A9(t){return new Promise((e,n)=>{var s,i,a;function r(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(Cr(t,"network-request-failed"))},timeout:I9.get()})}if((i=(s=rs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=rs().gapi)!=null&&a.load)r();else{const l=OF("iframefcb");return rs()[l]=()=>{gapi.load?r():n(Cr(t,"network-request-failed"))},DF(`${MF()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function R9(t){return Eh=Eh||A9(t),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new Fu(5e3,15e3),D9="__/auth/iframe",M9="emulator/auth/iframe",O9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V9(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,M9):`https://${t.config.authDomain}/${D9}`,r={apiKey:e.apiKey,appName:t.name,v:Al},s=L9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Vu(r).slice(1)}`}async function F9(t){const e=await R9(t),n=rs().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:V9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Cr(t,"network-request-failed"),l=rs().setTimeout(()=>{i(a)},P9.get());function c(){rs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U9=500,$9=600,B9="_blank",H9="http://localhost";class I_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W9(t,e,n,r=U9,s=$9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...z9,width:r.toString(),height:s.toString(),top:i,left:a},u=sn().toLowerCase();n&&(l=r2(u)?B9:n),t2(u)&&(e=e||H9,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(TF(u)&&l!=="_self")return q9(e||"",l),new I_(null);const m=window.open(e||"",l,h);xe(m,t,"popup-blocked");try{m.focus()}catch{}return new I_(m)}function q9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="__/auth/handler",K9="emulator/auth/handler",Q9=encodeURIComponent("fac");async function A_(t,e,n,r,s,i){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Al,eventId:s};if(e instanceof f0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Q6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof zu){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${Q9}=${encodeURIComponent(c)}`:"";return`${X9(t)}?${Vu(l).slice(1)}${u}`}function X9({config:t}){return t.emulator?l0(t,K9):`https://${t.authDomain}/${G9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class Y9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g2,this._completeRedirectFn=b9,this._overrideRedirectResult=v9}async _openPopup(e,n,r,s){var a;Fs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await A_(e,n,r,ev(),s);return W9(e,i,m0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await A_(e,n,r,ev(),s);return t9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await F9(e),r=new S9(e);return n.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_g,{type:_g},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[_g];i!==void 0&&n(!!i),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return l2()||n2()||d0()}}const J9=Y9;var R_="@firebase/auth",P_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tz(t){cl(new Uo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;xe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c2(t)},u=new RF(r,s,i,c);return VF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cl(new Uo("auth-internal",e=>{const n=Am(e.getProvider("auth").getImmediate());return(r=>new Z9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(R_,P_,ez(t)),Ai(R_,P_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=5*60,rz=Fk("authIdTokenMaxAge")||nz;let D_=null;const sz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rz)return;const s=n==null?void 0:n.token;D_!==s&&(D_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iz(t=Wk()){const e=i0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LF(t,{popupRedirectResolver:J9,persistence:[u9,JF,g2]}),r=Fk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=sz(i.toString());GF(n,a,()=>a(n.currentUser)),qF(n,l=>a(l))}}const s=Lk("auth");return s&&FF(n,`http://${s}`),n}function oz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",oz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tz("Browser");var az="firebase",lz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(az,lz,"app");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,E2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function T(){}T.prototype=C.prototype,E.F=C.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(k,I,P){for(var R=Array(arguments.length-2),O=2;O<arguments.length;O++)R[O-2]=arguments[O];return C.prototype[I].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,C,T){T||(T=0);const k=Array(16);if(typeof C=="string")for(var I=0;I<16;++I)k[I]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(I=0;I<16;++I)k[I]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=E.g[0],T=E.g[1],I=E.g[2];let P=E.g[3],R;R=C+(P^T&(I^P))+k[0]+3614090360&4294967295,C=T+(R<<7&4294967295|R>>>25),R=P+(I^C&(T^I))+k[1]+3905402710&4294967295,P=C+(R<<12&4294967295|R>>>20),R=I+(T^P&(C^T))+k[2]+606105819&4294967295,I=P+(R<<17&4294967295|R>>>15),R=T+(C^I&(P^C))+k[3]+3250441966&4294967295,T=I+(R<<22&4294967295|R>>>10),R=C+(P^T&(I^P))+k[4]+4118548399&4294967295,C=T+(R<<7&4294967295|R>>>25),R=P+(I^C&(T^I))+k[5]+1200080426&4294967295,P=C+(R<<12&4294967295|R>>>20),R=I+(T^P&(C^T))+k[6]+2821735955&4294967295,I=P+(R<<17&4294967295|R>>>15),R=T+(C^I&(P^C))+k[7]+4249261313&4294967295,T=I+(R<<22&4294967295|R>>>10),R=C+(P^T&(I^P))+k[8]+1770035416&4294967295,C=T+(R<<7&4294967295|R>>>25),R=P+(I^C&(T^I))+k[9]+2336552879&4294967295,P=C+(R<<12&4294967295|R>>>20),R=I+(T^P&(C^T))+k[10]+4294925233&4294967295,I=P+(R<<17&4294967295|R>>>15),R=T+(C^I&(P^C))+k[11]+2304563134&4294967295,T=I+(R<<22&4294967295|R>>>10),R=C+(P^T&(I^P))+k[12]+1804603682&4294967295,C=T+(R<<7&4294967295|R>>>25),R=P+(I^C&(T^I))+k[13]+4254626195&4294967295,P=C+(R<<12&4294967295|R>>>20),R=I+(T^P&(C^T))+k[14]+2792965006&4294967295,I=P+(R<<17&4294967295|R>>>15),R=T+(C^I&(P^C))+k[15]+1236535329&4294967295,T=I+(R<<22&4294967295|R>>>10),R=C+(I^P&(T^I))+k[1]+4129170786&4294967295,C=T+(R<<5&4294967295|R>>>27),R=P+(T^I&(C^T))+k[6]+3225465664&4294967295,P=C+(R<<9&4294967295|R>>>23),R=I+(C^T&(P^C))+k[11]+643717713&4294967295,I=P+(R<<14&4294967295|R>>>18),R=T+(P^C&(I^P))+k[0]+3921069994&4294967295,T=I+(R<<20&4294967295|R>>>12),R=C+(I^P&(T^I))+k[5]+3593408605&4294967295,C=T+(R<<5&4294967295|R>>>27),R=P+(T^I&(C^T))+k[10]+38016083&4294967295,P=C+(R<<9&4294967295|R>>>23),R=I+(C^T&(P^C))+k[15]+3634488961&4294967295,I=P+(R<<14&4294967295|R>>>18),R=T+(P^C&(I^P))+k[4]+3889429448&4294967295,T=I+(R<<20&4294967295|R>>>12),R=C+(I^P&(T^I))+k[9]+568446438&4294967295,C=T+(R<<5&4294967295|R>>>27),R=P+(T^I&(C^T))+k[14]+3275163606&4294967295,P=C+(R<<9&4294967295|R>>>23),R=I+(C^T&(P^C))+k[3]+4107603335&4294967295,I=P+(R<<14&4294967295|R>>>18),R=T+(P^C&(I^P))+k[8]+1163531501&4294967295,T=I+(R<<20&4294967295|R>>>12),R=C+(I^P&(T^I))+k[13]+2850285829&4294967295,C=T+(R<<5&4294967295|R>>>27),R=P+(T^I&(C^T))+k[2]+4243563512&4294967295,P=C+(R<<9&4294967295|R>>>23),R=I+(C^T&(P^C))+k[7]+1735328473&4294967295,I=P+(R<<14&4294967295|R>>>18),R=T+(P^C&(I^P))+k[12]+2368359562&4294967295,T=I+(R<<20&4294967295|R>>>12),R=C+(T^I^P)+k[5]+4294588738&4294967295,C=T+(R<<4&4294967295|R>>>28),R=P+(C^T^I)+k[8]+2272392833&4294967295,P=C+(R<<11&4294967295|R>>>21),R=I+(P^C^T)+k[11]+1839030562&4294967295,I=P+(R<<16&4294967295|R>>>16),R=T+(I^P^C)+k[14]+4259657740&4294967295,T=I+(R<<23&4294967295|R>>>9),R=C+(T^I^P)+k[1]+2763975236&4294967295,C=T+(R<<4&4294967295|R>>>28),R=P+(C^T^I)+k[4]+1272893353&4294967295,P=C+(R<<11&4294967295|R>>>21),R=I+(P^C^T)+k[7]+4139469664&4294967295,I=P+(R<<16&4294967295|R>>>16),R=T+(I^P^C)+k[10]+3200236656&4294967295,T=I+(R<<23&4294967295|R>>>9),R=C+(T^I^P)+k[13]+681279174&4294967295,C=T+(R<<4&4294967295|R>>>28),R=P+(C^T^I)+k[0]+3936430074&4294967295,P=C+(R<<11&4294967295|R>>>21),R=I+(P^C^T)+k[3]+3572445317&4294967295,I=P+(R<<16&4294967295|R>>>16),R=T+(I^P^C)+k[6]+76029189&4294967295,T=I+(R<<23&4294967295|R>>>9),R=C+(T^I^P)+k[9]+3654602809&4294967295,C=T+(R<<4&4294967295|R>>>28),R=P+(C^T^I)+k[12]+3873151461&4294967295,P=C+(R<<11&4294967295|R>>>21),R=I+(P^C^T)+k[15]+530742520&4294967295,I=P+(R<<16&4294967295|R>>>16),R=T+(I^P^C)+k[2]+3299628645&4294967295,T=I+(R<<23&4294967295|R>>>9),R=C+(I^(T|~P))+k[0]+4096336452&4294967295,C=T+(R<<6&4294967295|R>>>26),R=P+(T^(C|~I))+k[7]+1126891415&4294967295,P=C+(R<<10&4294967295|R>>>22),R=I+(C^(P|~T))+k[14]+2878612391&4294967295,I=P+(R<<15&4294967295|R>>>17),R=T+(P^(I|~C))+k[5]+4237533241&4294967295,T=I+(R<<21&4294967295|R>>>11),R=C+(I^(T|~P))+k[12]+1700485571&4294967295,C=T+(R<<6&4294967295|R>>>26),R=P+(T^(C|~I))+k[3]+2399980690&4294967295,P=C+(R<<10&4294967295|R>>>22),R=I+(C^(P|~T))+k[10]+4293915773&4294967295,I=P+(R<<15&4294967295|R>>>17),R=T+(P^(I|~C))+k[1]+2240044497&4294967295,T=I+(R<<21&4294967295|R>>>11),R=C+(I^(T|~P))+k[8]+1873313359&4294967295,C=T+(R<<6&4294967295|R>>>26),R=P+(T^(C|~I))+k[15]+4264355552&4294967295,P=C+(R<<10&4294967295|R>>>22),R=I+(C^(P|~T))+k[6]+2734768916&4294967295,I=P+(R<<15&4294967295|R>>>17),R=T+(P^(I|~C))+k[13]+1309151649&4294967295,T=I+(R<<21&4294967295|R>>>11),R=C+(I^(T|~P))+k[4]+4149444226&4294967295,C=T+(R<<6&4294967295|R>>>26),R=P+(T^(C|~I))+k[11]+3174756917&4294967295,P=C+(R<<10&4294967295|R>>>22),R=I+(C^(P|~T))+k[2]+718787259&4294967295,I=P+(R<<15&4294967295|R>>>17),R=T+(P^(I|~C))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,C){C===void 0&&(C=E.length);const T=C-this.blockSize,k=this.C;let I=this.h,P=0;for(;P<C;){if(I==0)for(;P<=T;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<C;)if(k[I++]=E.charCodeAt(P++),I==this.blockSize){s(this,k),I=0;break}}else for(;P<C;)if(k[I++]=E[P++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=C},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;C=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=C&255,C/=256;for(this.v(E),E=Array(16),C=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)E[C++]=this.g[T]>>>k&255;return E};function i(E,C){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=C(E)}function a(E,C){this.h=C;const T=[];let k=!0;for(let I=E.length-1;I>=0;I--){const P=E[I]|0;k&&P==C||(T[I]=P,k=!1)}this.g=T}var l={};function c(E){return-128<=E&&E<128?i(E,function(C){return new a([C|0],C<0?-1:0)}):new a([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return _(u(-E));const C=[];let T=1;for(let k=0;E>=T;k++)C[k]=E/T|0,T*=4294967296;return new a(C,0)}function h(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return _(h(E.substring(1),C));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(C,8));let k=m;for(let P=0;P<E.length;P+=8){var I=Math.min(8,E.length-P);const R=parseInt(E.substring(P,P+I),C);I<8?(I=u(Math.pow(C,I)),k=k.j(I).add(u(R))):(k=k.j(T),k=k.add(u(R)))}return k}var m=c(0),p=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-_(this).m();let E=0,C=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);E+=(k>=0?k:4294967296+k)*C,C*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(v(this))return"-"+_(this).toString(E);const C=u(Math.pow(E,6));var T=this;let k="";for(;;){const I=j(T,C).g;T=b(T,I.j(C));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=I,w(T))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=b(this,E),v(E)?-1:w(E)?0:1};function _(E){const C=E.g.length,T=[];for(let k=0;k<C;k++)T[k]=~E.g[k];return new a(T,~E.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(E){const C=Math.max(this.g.length,E.g.length),T=[];let k=0;for(let I=0;I<=C;I++){let P=k+(this.i(I)&65535)+(E.i(I)&65535),R=(P>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);k=R>>>16,P&=65535,R&=65535,T[I]=R<<16|P}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(E,C){return E.add(_(C))}t.j=function(E){if(w(this)||w(E))return m;if(v(this))return v(E)?_(this).j(_(E)):_(_(this).j(E));if(v(E))return _(this.j(_(E)));if(this.l(g)<0&&E.l(g)<0)return u(this.m()*E.m());const C=this.g.length+E.g.length,T=[];for(var k=0;k<2*C;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<E.g.length;I++){const P=this.i(k)>>>16,R=this.i(k)&65535,O=E.i(I)>>>16,ie=E.i(I)&65535;T[2*k+2*I]+=R*ie,x(T,2*k+2*I),T[2*k+2*I+1]+=P*ie,x(T,2*k+2*I+1),T[2*k+2*I+1]+=R*O,x(T,2*k+2*I+1),T[2*k+2*I+2]+=P*O,x(T,2*k+2*I+2)}for(E=0;E<C;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=C;E<2*C;E++)T[E]=0;return new a(T,0)};function x(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function S(E,C){this.g=E,this.h=C}function j(E,C){if(w(C))throw Error("division by zero");if(w(E))return new S(m,m);if(v(E))return C=j(_(E),C),new S(_(C.g),_(C.h));if(v(C))return C=j(E,_(C)),new S(_(C.g),C.h);if(E.g.length>30){if(v(E)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var T=p,k=C;k.l(E)<=0;)T=D(T),k=D(k);var I=M(T,1),P=M(k,1);for(k=M(k,2),T=M(T,2);!w(k);){var R=P.add(k);R.l(E)<=0&&(I=I.add(T),P=R),k=M(k,1),T=M(T,1)}return C=b(E,I.j(C)),new S(I,C)}for(I=m;E.l(C)>=0;){for(T=Math.max(1,Math.floor(E.m()/C.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=u(T),R=P.j(C);v(R)||R.l(E)>0;)T-=k,P=u(T),R=P.j(C);w(P)&&(P=p),I=I.add(P),E=b(E,R)}return new S(I,E)}t.B=function(E){return j(this,E).h},t.and=function(E){const C=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)&E.i(k);return new a(T,this.h&E.h)},t.or=function(E){const C=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)|E.i(k);return new a(T,this.h|E.h)},t.xor=function(E){const C=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)^E.i(k);return new a(T,this.h^E.h)};function D(E){const C=E.g.length+1,T=[];for(let k=0;k<C;k++)T[k]=E.i(k)<<1|E.i(k-1)>>>31;return new a(T,E.h)}function M(E,C){const T=C>>5;C%=32;const k=E.g.length-T,I=[];for(let P=0;P<k;P++)I[P]=C>0?E.i(P+T)>>>C|E.i(P+T+1)<<32-C:E.i(P+T);return new a(I,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,E2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Ri=a}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N2,gc,T2,Nh,rv,C2,k2,j2;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var y=0;y<d.length;++y){var N=d[y];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var N=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var F=d[A];if(!(F in N))break e;N=N[F]}d=d[d.length-1],A=N[d],y=y(A),y!=A&&y!=null&&e(N,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var N=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&N.push([A,y[A]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,N){return d.call.apply(d.bind,arguments)}function u(d,y,N){return u=c,u.apply(null,arguments)}function h(d,y){var N=Array.prototype.slice.call(arguments,1);return function(){var A=N.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function m(d,y){function N(){}N.prototype=y.prototype,d.Z=y.prototype,d.prototype=new N,d.prototype.constructor=d,d.Ob=function(A,F,H){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return y.prototype[F].apply(A,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const y=d.length;if(y>0){const N=Array(y);for(let A=0;A<y;A++)N[A]=d[A];return N}return[]}function w(d,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var N=typeof F;if(N=N!="object"?N:F?Array.isArray(F)?"array":N:"null",N=="array"||N=="object"&&typeof F.length=="number"){N=d.length||0;const H=F.length||0;d.length=N+H;for(let oe=0;oe<H;oe++)d[N+oe]=F[oe]}else d.push(F)}}class v{constructor(y,N){this.i=y,this.j=N,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function _(d){a.setTimeout(()=>{throw d},0)}function b(){var d=E;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class x{constructor(){this.h=this.g=null}add(y,N){const A=S.get();A.set(y,N),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new v(()=>new j,d=>d.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,N){this.h=y,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,E=new x,C=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(T)}};function T(){for(var d;d=b();){try{d.h.call(d.g)}catch(N){_(N)}var y=S;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const N=()=>{};a.addEventListener("test",N,y),a.removeEventListener("test",N,y)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function O(d,y){I.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}m(O,I),O.prototype.init=function(d,y){const N=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(N=="mouseover"?y=d.fromElement:N=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),te=0;function J(d,y,N,A,F){this.listener=d,this.proxy=null,this.src=y,this.type=N,this.capture=!!A,this.ha=F,this.key=++te,this.da=this.fa=!1}function L(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function q(d,y,N){for(const A in d)y.call(N,d[A],A,d)}function z(d,y){for(const N in d)y.call(void 0,d[N],N,d)}function B(d){const y={};for(const N in d)y[N]=d[N];return y}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(d,y){let N,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(N in A)d[N]=A[N];for(let H=0;H<Q.length;H++)N=Q[H],Object.prototype.hasOwnProperty.call(A,N)&&(d[N]=A[N])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,y,N,A,F){const H=d.toString();d=this.g[H],d||(d=this.g[H]=[],this.h++);const oe=ae(d,y,A,F);return oe>-1?(y=d[oe],N||(y.fa=!1)):(y=new J(y,this.src,H,!!A,F),y.fa=N,d.push(y)),y};function se(d,y){const N=y.type;if(N in d.g){var A=d.g[N],F=Array.prototype.indexOf.call(A,y,void 0),H;(H=F>=0)&&Array.prototype.splice.call(A,F,1),H&&(L(y),d.g[N].length==0&&(delete d.g[N],d.h--))}}function ae(d,y,N,A){for(let F=0;F<d.length;++F){const H=d[F];if(!H.da&&H.listener==y&&H.capture==!!N&&H.ha==A)return F}return-1}var V="closure_lm_"+(Math.random()*1e6|0),U={};function Z(d,y,N,A,F){if(Array.isArray(y)){for(let H=0;H<y.length;H++)Z(d,y[H],N,A,F);return null}return N=Ft(N),d&&d[ie]?d.J(y,N,l(A)?!!A.capture:!!A,F):W(d,y,N,!1,A,F)}function W(d,y,N,A,F,H){if(!y)throw Error("Invalid event type");const oe=l(F)?!!F.capture:!!F;let Ne=Be(d);if(Ne||(d[V]=Ne=new de(d)),N=Ne.add(y,N,A,oe,H),N.proxy)return N;if(A=G(),N.proxy=A,A.src=d,A.listener=N,d.addEventListener)P||(F=oe),F===void 0&&(F=!1),d.addEventListener(y.toString(),A,F);else if(d.attachEvent)d.attachEvent(Ee(y.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return N}function G(){function d(N){return y.call(d.src,d.listener,N)}const y=tt;return d}function ee(d,y,N,A,F){if(Array.isArray(y))for(var H=0;H<y.length;H++)ee(d,y[H],N,A,F);else A=l(A)?!!A.capture:!!A,N=Ft(N),d&&d[ie]?(d=d.i,H=String(y).toString(),H in d.g&&(y=d.g[H],N=ae(y,N,A,F),N>-1&&(L(y[N]),Array.prototype.splice.call(y,N,1),y.length==0&&(delete d.g[H],d.h--)))):d&&(d=Be(d))&&(y=d.g[y.toString()],d=-1,y&&(d=ae(y,N,A,F)),(N=d>-1?y[d]:null)&&ye(N))}function ye(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ie])se(y.i,d);else{var N=d.type,A=d.proxy;y.removeEventListener?y.removeEventListener(N,A,d.capture):y.detachEvent?y.detachEvent(Ee(N),A):y.addListener&&y.removeListener&&y.removeListener(A),(N=Be(y))?(se(N,d),N.h==0&&(N.src=null,y[V]=null)):L(d)}}}function Ee(d){return d in U?U[d]:U[d]="on"+d}function tt(d,y){if(d.da)d=!0;else{y=new O(y,this);const N=d.listener,A=d.ha||d.src;d.fa&&ye(d),d=N.call(A,y)}return d}function Be(d){return d=d[V],d instanceof de?d:null}var qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ft(d){return typeof d=="function"?d:(d[qe]||(d[qe]=function(y){return d.handleEvent(y)}),d[qe])}function ze(){k.call(this),this.i=new de(this),this.M=this,this.G=null}m(ze,k),ze.prototype[ie]=!0,ze.prototype.removeEventListener=function(d,y,N,A){ee(this,d,y,N,A)};function Oe(d,y){var N,A=d.G;if(A)for(N=[];A;A=A.G)N.push(A);if(d=d.M,A=y.type||y,typeof y=="string")y=new I(y,d);else if(y instanceof I)y.target=y.target||d;else{var F=y;y=new I(A,d),re(y,F)}F=!0;let H,oe;if(N)for(oe=N.length-1;oe>=0;oe--)H=y.g=N[oe],F=cr(H,A,!0,y)&&F;if(H=y.g=d,F=cr(H,A,!0,y)&&F,F=cr(H,A,!1,y)&&F,N)for(oe=0;oe<N.length;oe++)H=y.g=N[oe],F=cr(H,A,!1,y)&&F}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const N=d.g[y];for(let A=0;A<N.length;A++)L(N[A]);delete d.g[y],d.h--}}this.G=null},ze.prototype.J=function(d,y,N,A){return this.i.add(String(d),y,!1,N,A)},ze.prototype.K=function(d,y,N,A){return this.i.add(String(d),y,!0,N,A)};function cr(d,y,N,A){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let H=0;H<y.length;++H){const oe=y[H];if(oe&&!oe.da&&oe.capture==N){const Ne=oe.listener,Nt=oe.ha||oe.src;oe.fa&&se(d.i,oe),F=Ne.call(Nt,A)!==!1&&F}}return F&&!A.defaultPrevented}function Ws(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(d,y||0)}function Bl(d){d.g=Ws(()=>{d.g=null,d.i&&(d.i=!1,Bl(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ad extends k{constructor(y,N){super(),this.m=y,this.l=N,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Bl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(d){k.call(this),this.h=d,this.g={}}m(so,k);var ld=[];function ms(d){q(d.g,function(y,N){this.g.hasOwnProperty(N)&&ye(y)},d),d.g={}}so.prototype.N=function(){so.Z.N.call(this),ms(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fr=a.JSON.stringify,io=a.JSON.parse,cd=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function ur(){}function Hl(){}var oo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wl(){I.call(this,"d")}m(Wl,I);function ao(){I.call(this,"c")}m(ao,I);var zr={},ud=null;function lo(){return ud=ud||new ze}zr.Ia="serverreachability";function dd(d){I.call(this,zr.Ia,d)}m(dd,I);function co(d){const y=lo();Oe(y,new dd(y))}zr.STAT_EVENT="statevent";function hd(d,y){I.call(this,zr.STAT_EVENT,d),this.stat=y}m(hd,I);function Ve(d){const y=lo();Oe(y,new hd(y,d))}zr.Ja="timingevent";function qt(d,y){I.call(this,zr.Ja,d),this.size=y}m(qt,I);function St(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function gn(){this.g=!0}gn.prototype.ua=function(){this.g=!1};function yn(d,y,N,A,F,H){d.info(function(){if(d.g)if(H){var oe="",Ne=H.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var Nt=Ne[Qe].split("=");if(Nt.length>1){const At=Nt[0];Nt=Nt[1];const Br=At.split("_");oe=Br.length>=2&&Br[1]=="type"?oe+(At+"="+Nt+"&"):oe+(At+"=redacted&")}}}else oe=null;else oe=H;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+N+`
`+oe})}function on(d,y,N,A,F,H,oe){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+N+`
`+H+" "+oe})}function zt(d,y,N,A){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Et(d,N)+(A?" "+A:"")})}function qs(d,y){d.info(function(){return"TIMEOUT: "+y})}gn.prototype.info=function(){};function Et(d,y){if(!d.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(d=0;d<H.length;d++)if(Array.isArray(H[d])){var N=H[d];if(!(N.length<2)){var A=N[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<A.length;oe++)A[oe]=""}}}}return Fr(H)}catch{return y}}var An={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gn;function ps(){}m(ps,ur),ps.prototype.g=function(){return new XMLHttpRequest},Gn=new ps;function dr(d){return encodeURIComponent(String(d))}function Ur(d){var y=1;d=d.split(":");const N=[];for(;y>0&&d.length;)N.push(d.shift()),y--;return d.length&&N.push(d.join(":")),N}function vn(d,y,N,A){this.j=d,this.i=y,this.l=N,this.S=A||1,this.V=new so(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ea}function ea(){this.i=null,this.g="",this.h=!1}var Mw={},_p={};function Sp(d,y,N){d.M=1,d.A=md($r(y)),d.u=N,d.R=!0,Ow(d,null)}function Ow(d,y){d.F=Date.now(),fd(d),d.B=$r(d.A);var N=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Qw(N.i,"t",A),d.C=0,N=d.j.L,d.h=new ea,d.g=fb(d.j,N?y:null,!d.u),d.P>0&&(d.O=new ad(u(d.Y,d,d.g),d.P)),y=d.V,N=d.g,A=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(ld[0]=F.toString()),F=ld);for(let H=0;H<F.length;H++){const oe=Z(N,F[H],A||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=d.J?B(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),co(),yn(d.i,d.v,d.B,d.l,d.S,d.u)}vn.prototype.ba=function(d){d=d.target;const y=this.O;y&&Qs(d)==3?y.j():this.Y(d)},vn.prototype.Y=function(d){try{if(d==this.g)e:{const Ne=Qs(this.g),Nt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||nb(this.g)))){this.K||Ne!=4||Nt==7||(Nt==8||Qe<=0?co(3):co(2)),Ep(this);var y=this.g.ca();this.X=y;var N=QP(this);if(this.o=y==200,on(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var H=A;break t}}H=null}if(d=H)zt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Np(this,d);else{this.o=!1,this.m=3,Ve(12),uo(this),ql(this);break e}}if(this.R){d=!0;let At;for(;!this.K&&this.C<N.length;)if(At=XP(this,N),At==_p){Ne==4&&(this.m=4,Ve(14),d=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Mw){this.m=4,Ve(15),zt(this.i,this.l,N,"[Invalid Chunk]"),d=!1;break}else zt(this.i,this.l,At,null),Np(this,At);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||N.length!=0||this.h.h||(this.m=1,Ve(16),d=!1),this.o=this.o&&d,!d)zt(this.i,this.l,N,"[Invalid Chunked Response]"),uo(this),ql(this);else if(N.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Pp(oe),oe.P=!0,Ve(11))}}else zt(this.i,this.l,N,null),Np(this,N);Ne==4&&uo(this),this.o&&!this.K&&(Ne==4?cb(this.j,this):(this.o=!1,fd(this)))}else uD(this.g),y==400&&N.indexOf("Unknown SID")>0?(this.m=3,Ve(12)):(this.m=0,Ve(13)),uo(this),ql(this)}}}catch{}finally{}};function QP(d){if(!Lw(d))return d.g.la();const y=nb(d.g);if(y==="")return"";let N="";const A=y.length,F=Qs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return uo(d),ql(d),"";d.h.i=new a.TextDecoder}for(let H=0;H<A;H++)d.h.h=!0,N+=d.h.i.decode(y[H],{stream:!(F&&H==A-1)});return y.length=0,d.h.g+=N,d.C=0,d.h.g}function Lw(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function XP(d,y){var N=d.C,A=y.indexOf(`
`,N);return A==-1?_p:(N=Number(y.substring(N,A)),isNaN(N)?Mw:(A+=1,A+N>y.length?_p:(y=y.slice(A,A+N),d.C=A+N,y)))}vn.prototype.cancel=function(){this.K=!0,uo(this)};function fd(d){d.T=Date.now()+d.H,Vw(d,d.H)}function Vw(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=St(u(d.aa,d),y)}function Ep(d){d.D&&(a.clearTimeout(d.D),d.D=null)}vn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(qs(this.i,this.B),this.M!=2&&(co(),Ve(17)),uo(this),this.m=2,ql(this)):Vw(this,this.T-d)};function ql(d){d.j.I==0||d.K||cb(d.j,d)}function uo(d){Ep(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,ms(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Np(d,y){try{var N=d.j;if(N.I!=0&&(N.g==d||Tp(N.h,d))){if(!d.L&&Tp(N.h,d)&&N.I==3){try{var A=N.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<d.F)xd(N),yd(N);else break e;Rp(N),Ve(18)}}else N.xa=F[1],0<N.xa-N.K&&F[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=St(u(N.Va,N),6e3));Uw(N.h)<=1&&N.ta&&(N.ta=void 0)}else fo(N,11)}else if((d.L||N.g==d)&&xd(N),!R(y))for(F=N.Ba.g.parse(y),y=0;y<F.length;y++){let Qe=F[y];const At=Qe[0];if(!(At<=N.K))if(N.K=At,Qe=Qe[1],N.I==2)if(Qe[0]=="c"){N.M=Qe[1],N.ba=Qe[2];const Br=Qe[3];Br!=null&&(N.ka=Br,N.j.info("VER="+N.ka));const mo=Qe[4];mo!=null&&(N.za=mo,N.j.info("SVER="+N.za));const Xs=Qe[5];Xs!=null&&typeof Xs=="number"&&Xs>0&&(A=1.5*Xs,N.O=A,N.j.info("backChannelRequestTimeoutMs_="+A)),A=N;const Ys=d.g;if(Ys){const bd=Ys.g?Ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bd){var H=A.h;H.g||bd.indexOf("spdy")==-1&&bd.indexOf("quic")==-1&&bd.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Cp(H,H.h),H.h=null))}if(A.G){const Dp=Ys.g?Ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Dp&&(A.wa=Dp,nt(A.J,A.G,Dp))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-d.F,N.j.info("Handshake RTT: "+N.T+"ms")),A=N;var oe=d;if(A.na=hb(A,A.L?A.ba:null,A.W),oe.L){$w(A.h,oe);var Ne=oe,Nt=A.O;Nt&&(Ne.H=Nt),Ne.D&&(Ep(Ne),fd(Ne)),A.g=oe}else ab(A);N.i.length>0&&vd(N)}else Qe[0]!="stop"&&Qe[0]!="close"||fo(N,7);else N.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?fo(N,7):Ap(N):Qe[0]!="noop"&&N.l&&N.l.qa(Qe),N.A=0)}}co(4)}catch{}}var YP=class{constructor(d,y){this.g=d,this.map=y}};function Fw(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Uw(d){return d.h?1:d.g?d.g.size:0}function Tp(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Cp(d,y){d.g?d.g.add(y):d.h=y}function $w(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Fw.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const N of d.g.values())y=y.concat(N.G);return y}return g(d.i)}var Hw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JP(d,y){if(d){d=d.split("&");for(let N=0;N<d.length;N++){const A=d[N].indexOf("=");let F,H=null;A>=0?(F=d[N].substring(0,A),H=d[N].substring(A+1)):F=d[N],y(F,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Gs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Gs?(this.l=d.l,Gl(this,d.j),this.o=d.o,this.g=d.g,Kl(this,d.u),this.h=d.h,kp(this,Xw(d.i)),this.m=d.m):d&&(y=String(d).match(Hw))?(this.l=!1,Gl(this,y[1]||"",!0),this.o=Ql(y[2]||""),this.g=Ql(y[3]||"",!0),Kl(this,y[4]),this.h=Ql(y[5]||"",!0),kp(this,y[6]||"",!0),this.m=Ql(y[7]||"")):(this.l=!1,this.i=new Yl(null,this.l))}Gs.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Xl(y,Ww,!0),":");var N=this.g;return(N||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Xl(y,Ww,!0),"@"),d.push(dr(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&d.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&d.push("/"),d.push(Xl(N,N.charAt(0)=="/"?tD:eD,!0))),(N=this.i.toString())&&d.push("?",N),(N=this.m)&&d.push("#",Xl(N,rD)),d.join("")},Gs.prototype.resolve=function(d){const y=$r(this);let N=!!d.j;N?Gl(y,d.j):N=!!d.o,N?y.o=d.o:N=!!d.g,N?y.g=d.g:N=d.u!=null;var A=d.h;if(N)Kl(y,d.u);else if(N=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const H=[];for(let oe=0;oe<F.length;){const Ne=F[oe++];Ne=="."?A&&oe==F.length&&H.push(""):Ne==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),A&&oe==F.length&&H.push("")):(H.push(Ne),A=!0)}A=H.join("/")}else A=F}return N?y.h=A:N=d.i.toString()!=="",N?kp(y,Xw(d.i)):N=!!d.m,N&&(y.m=d.m),y};function $r(d){return new Gs(d)}function Gl(d,y,N){d.j=N?Ql(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Kl(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function kp(d,y,N){y instanceof Yl?(d.i=y,sD(d.i,d.l)):(N||(y=Xl(y,nD)),d.i=new Yl(y,d.l))}function nt(d,y,N){d.i.set(y,N)}function md(d){return nt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ql(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xl(d,y,N){return typeof d=="string"?(d=encodeURI(d).replace(y,ZP),N&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ZP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ww=/[#\/\?@]/g,eD=/[#\?:]/g,tD=/[#\?]/g,nD=/[#\?@]/g,rD=/#/g;function Yl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ho(d){d.g||(d.g=new Map,d.h=0,d.i&&JP(d.i,function(y,N){d.add(decodeURIComponent(y.replace(/\+/g," ")),N)}))}t=Yl.prototype,t.add=function(d,y){ho(this),this.i=null,d=ta(this,d);let N=this.g.get(d);return N||this.g.set(d,N=[]),N.push(y),this.h+=1,this};function qw(d,y){ho(d),y=ta(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Gw(d,y){return ho(d),y=ta(d,y),d.g.has(y)}t.forEach=function(d,y){ho(this),this.g.forEach(function(N,A){N.forEach(function(F){d.call(y,F,A,this)},this)},this)};function Kw(d,y){ho(d);let N=[];if(typeof y=="string")Gw(d,y)&&(N=N.concat(d.g.get(ta(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)N=N.concat(d[y]);return N}t.set=function(d,y){return ho(this),this.i=null,d=ta(this,d),Gw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=Kw(this,d),d.length>0?String(d[0]):y):y};function Qw(d,y,N){qw(d,y),N.length>0&&(d.i=null,d.g.set(ta(d,y),g(N)),d.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var N=y[A];const F=dr(N);N=Kw(this,N);for(let H=0;H<N.length;H++){let oe=F;N[H]!==""&&(oe+="="+dr(N[H])),d.push(oe)}}return this.i=d.join("&")};function Xw(d){const y=new Yl;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function ta(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function sD(d,y){y&&!d.j&&(ho(d),d.i=null,d.g.forEach(function(N,A){const F=A.toLowerCase();A!=F&&(qw(this,A),Qw(this,F,N))},d)),d.j=y}function iD(d,y){const N=new gn;if(a.Image){const A=new Image;A.onload=h(Ks,N,"TestLoadImage: loaded",!0,y,A),A.onerror=h(Ks,N,"TestLoadImage: error",!1,y,A),A.onabort=h(Ks,N,"TestLoadImage: abort",!1,y,A),A.ontimeout=h(Ks,N,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else y(!1)}function oD(d,y){const N=new gn,A=new AbortController,F=setTimeout(()=>{A.abort(),Ks(N,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:A.signal}).then(H=>{clearTimeout(F),H.ok?Ks(N,"TestPingServer: ok",!0,y):Ks(N,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Ks(N,"TestPingServer: error",!1,y)})}function Ks(d,y,N,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(N)}catch{}}function aD(){this.g=new cd}function jp(d){this.i=d.Sb||null,this.h=d.ab||!1}m(jp,ur),jp.prototype.g=function(){return new pd(this.i,this.h)};function pd(d,y){ze.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(pd,ze),t=pd.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Zl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Zl(this)),this.g&&(this.readyState=3,Zl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Jl(this):Zl(this),this.readyState==3&&Yw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Jl(this))},t.Na=function(d){this.g&&(this.response=d,Jl(this))},t.ga=function(){this.g&&Jl(this)};function Jl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Zl(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var N=y.next();!N.done;)N=N.value,d.push(N[0]+": "+N[1]),N=y.next();return d.join(`\r
`)};function Zl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Jw(d){let y="";return q(d,function(N,A){y+=A,y+=":",y+=N,y+=`\r
`}),y}function Ip(d,y,N){e:{for(A in N){var A=!1;break e}A=!0}A||(N=Jw(N),typeof d=="string"?N!=null&&dr(N):nt(d,y,N))}function ht(d){ze.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ht,ze);var lD=/^https?$/i,cD=["POST","PUT"];t=ht.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,N,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(H){Zw(this,H);return}if(d=N||"",N=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)N.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())N.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(N.keys()).find(H=>H.toLowerCase()=="content-type"),F=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(cD,y,void 0)>=0)||A||F||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of N)this.g.setRequestHeader(H,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(H){Zw(this,H)}};function Zw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,eb(d),gd(d)}function eb(d){d.A||(d.A=!0,Oe(d,"complete"),Oe(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Oe(this,"complete"),Oe(this,"abort"),gd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tb(this):this.Xa())},t.Xa=function(){tb(this)};function tb(d){if(d.h&&typeof i<"u"){if(d.v&&Qs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Oe(d,"readystatechange"),Qs(d)==4){d.h=!1;try{const H=d.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var N;if(!(N=y)){var A;if(A=H===0){let oe=String(d.D).match(Hw)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),A=!lD.test(oe?oe.toLowerCase():"")}N=A}if(N)Oe(d,"complete"),Oe(d,"success");else{d.o=6;try{var F=Qs(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",eb(d)}}finally{gd(d)}}}}function gd(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const N=d.g;d.g=null,y||Oe(d,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Qs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),io(y)}};function nb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function uD(d){const y={};d=(d.g&&Qs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(R(d[A]))continue;var N=Ur(d[A]);const F=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const H=y[F]||[];y[F]=H,H.push(N)}z(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(d,y,N){return N&&N.internalChannelParams&&N.internalChannelParams[d]||y}function rb(d){this.za=0,this.i=[],this.j=new gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ec("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ec("baseRetryDelayMs",5e3,d),this.Za=ec("retryDelaySeedMs",1e4,d),this.Ta=ec("forwardChannelMaxRetries",2,d),this.va=ec("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Fw(d&&d.concurrentRequestLimit),this.Ba=new aD,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rb.prototype,t.ka=8,t.I=1,t.connect=function(d,y,N,A){Ve(0),this.W=d,this.H=y||{},N&&A!==void 0&&(this.H.OSID=N,this.H.OAID=A),this.F=this.X,this.J=hb(this,null,this.W),vd(this)};function Ap(d){if(sb(d),d.I==3){var y=d.V++,N=$r(d.J);if(nt(N,"SID",d.M),nt(N,"RID",y),nt(N,"TYPE","terminate"),tc(d,N),y=new vn(d,d.j,y),y.M=2,y.A=md($r(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=y.A,N=!0),N||(y.g=fb(y.j,null),y.g.ea(y.A)),y.F=Date.now(),fd(y)}db(d)}function yd(d){d.g&&(Pp(d),d.g.cancel(),d.g=null)}function sb(d){yd(d),d.v&&(a.clearTimeout(d.v),d.v=null),xd(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function vd(d){if(!zw(d.h)&&!d.m){d.m=!0;var y=d.Ea;D||C(),M||(D(),M=!0),E.add(y,d),d.D=0}}function dD(d,y){return Uw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=St(u(d.Ea,d,y),ub(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new vn(this,this.j,d);let H=this.o;if(this.U&&(H?(H=B(H),re(H,this.U)):H=this.U),this.u!==null||this.R||(F.J=H,H=null),this.S)e:{for(var y=0,N=0;N<this.i.length;N++){t:{var A=this.i[N];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=N;break e}if(y===4096||N===this.i.length-1){y=N+1;break e}}y=1e3}else y=1e3;y=ob(this,F,y),N=$r(this.J),nt(N,"RID",d),nt(N,"CVER",22),this.G&&nt(N,"X-HTTP-Session-Id",this.G),tc(this,N),H&&(this.R?y="headers="+dr(Jw(H))+"&"+y:this.u&&Ip(N,this.u,H)),Cp(this.h,F),this.Ra&&nt(N,"TYPE","init"),this.S?(nt(N,"$req",y),nt(N,"SID","null"),F.U=!0,Sp(F,N,null)):Sp(F,N,y),this.I=2}}else this.I==3&&(d?ib(this,d):this.i.length==0||zw(this.h)||ib(this))};function ib(d,y){var N;y?N=y.l:N=d.V++;const A=$r(d.J);nt(A,"SID",d.M),nt(A,"RID",N),nt(A,"AID",d.K),tc(d,A),d.u&&d.o&&Ip(A,d.u,d.o),N=new vn(d,d.j,N,d.D+1),d.u===null&&(N.J=d.o),y&&(d.i=y.G.concat(d.i)),y=ob(d,N,1e3),N.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Cp(d.h,N),Sp(N,A,y)}function tc(d,y){d.H&&q(d.H,function(N,A){nt(y,A,N)}),d.l&&q({},function(N,A){nt(y,A,N)})}function ob(d,y,N){N=Math.min(d.i.length,N);const A=d.l?u(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ne=-1;for(;;){const Nt=["count="+N];Ne==-1?N>0?(Ne=F[0].g,Nt.push("ofs="+Ne)):Ne=0:Nt.push("ofs="+Ne);let Qe=!0;for(let At=0;At<N;At++){var H=F[At].g;const Br=F[At].map;if(H-=Ne,H<0)Ne=Math.max(0,F[At].g-100),Qe=!1;else try{H="req"+H+"_"||"";try{var oe=Br instanceof Map?Br:Object.entries(Br);for(const[mo,Xs]of oe){let Ys=Xs;l(Xs)&&(Ys=Fr(Xs)),Nt.push(H+mo+"="+encodeURIComponent(Ys))}}catch(mo){throw Nt.push(H+"type="+encodeURIComponent("_badmap")),mo}}catch{A&&A(Br)}}if(Qe){oe=Nt.join("&");break e}}oe=void 0}return d=d.i.splice(0,N),y.G=d,oe}function ab(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;D||C(),M||(D(),M=!0),E.add(y,d),d.A=0}}function Rp(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=St(u(d.Da,d),ub(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,lb(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=St(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ve(10),yd(this),lb(this))};function Pp(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function lb(d){d.g=new vn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=$r(d.na);nt(y,"RID","rpc"),nt(y,"SID",d.M),nt(y,"AID",d.K),nt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&nt(y,"TO",d.ia),nt(y,"TYPE","xmlhttp"),tc(d,y),d.u&&d.o&&Ip(y,d.u,d.o),d.O&&(d.g.H=d.O);var N=d.g;d=d.ba,N.M=1,N.A=md($r(y)),N.u=null,N.R=!0,Ow(N,d)}t.Va=function(){this.C!=null&&(this.C=null,yd(this),Rp(this),Ve(19))};function xd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function cb(d,y){var N=null;if(d.g==y){xd(d),Pp(d),d.g=null;var A=2}else if(Tp(d.h,y))N=y.G,$w(d.h,y),A=1;else return;if(d.I!=0){if(y.o)if(A==1){N=y.u?y.u.length:0,y=Date.now()-y.F;var F=d.D;A=lo(),Oe(A,new qt(A,N)),vd(d)}else ab(d);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&dD(d,y)||A==2&&Rp(d)))switch(N&&N.length>0&&(y=d.h,y.i=y.i.concat(N)),F){case 1:fo(d,5);break;case 4:fo(d,10);break;case 3:fo(d,6);break;default:fo(d,2)}}}function ub(d,y){let N=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(N*=2),N*y}function fo(d,y){if(d.j.info("Error code "+y),y==2){var N=u(d.bb,d),A=d.Ua;const F=!A;A=new Gs(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gl(A,"https"),md(A),F?iD(A.toString(),N):oD(A.toString(),N)}else Ve(2);d.I=0,d.l&&d.l.pa(y),db(d),sb(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function db(d){if(d.I=0,d.ja=[],d.l){const y=Bw(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ja,y),w(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function hb(d,y,N){var A=N instanceof Gs?$r(N):new Gs(N);if(A.g!="")y&&(A.g=y+"."+A.g),Kl(A,A.u);else{var F=a.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const H=new Gs(null);A&&Gl(H,A),y&&(H.g=y),F&&Kl(H,F),N&&(H.h=N),A=H}return N=d.G,y=d.wa,N&&y&&nt(A,N,y),nt(A,"VER",d.ka),tc(d,A),A}function fb(d,y,N){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new ht(new jp({ab:N})):new ht(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mb(){}t=mb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function wd(){}wd.prototype.g=function(d,y){return new Pn(d,y)};function Pn(d,y){ze.call(this),this.g=new rb(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!R(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new na(this)}m(Pn,ze),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){Ap(this.g)},Pn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var N={};N.__data__=d,d=N}else this.v&&(N={},N.__data__=Fr(d),d=N);y.i.push(new YP(y.Ya++,d)),y.I==3&&vd(y)},Pn.prototype.N=function(){this.g.l=null,delete this.j,Ap(this.g),delete this.g,Pn.Z.N.call(this)};function pb(d){Wl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const N in y){d=N;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}m(pb,Wl);function gb(){ao.call(this),this.status=1}m(gb,ao);function na(d){this.g=d}m(na,mb),na.prototype.ra=function(){Oe(this.g,"a")},na.prototype.qa=function(d){Oe(this.g,new pb(d))},na.prototype.pa=function(d){Oe(this.g,new gb)},na.prototype.oa=function(){Oe(this.g,"b")},wd.prototype.createWebChannel=wd.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,j2=function(){return new wd},k2=function(){return lo()},C2=zr,rv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},An.NO_ERROR=0,An.TIMEOUT=8,An.HTTP_ERROR=6,Nh=An,Rn.COMPLETE="complete",T2=Rn,Hl.EventType=oo,oo.OPEN="a",oo.CLOSE="b",oo.ERROR="c",oo.MESSAGE="d",ze.prototype.listen=ze.prototype.J,gc=Hl,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,N2=ht}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore",L_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new r0("@firebase/firestore");function aa(){return Bo.logLevel}function he(t,...e){if(Bo.logLevel<=Ae.DEBUG){const n=e.map(g0);Bo.debug(`Firestore (${Pl}): ${t}`,...n)}}function zs(t,...e){if(Bo.logLevel<=Ae.ERROR){const n=e.map(g0);Bo.error(`Firestore (${Pl}): ${t}`,...n)}}function Ho(t,...e){if(Bo.logLevel<=Ae.WARN){const n=e.map(g0);Bo.warn(`Firestore (${Pl}): ${t}`,...n)}}function g0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I2(t,r,n)}function I2(t,e,n){let r=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zs(r),new Error(r)}function We(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||I2(e,s,r)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class cz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uz{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new A2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class dz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=i=>{i.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,he("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new V_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=mz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function sv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Sg(s)===Sg(i)?Re(s,i):Sg(s)?1:-1}return Re(t.length,e.length)}const pz=55296,gz=57343;function Sg(t){const e=t.charCodeAt(0);return e>=pz&&e<=gz}function dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="__name__";class qr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=qr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Re(e.length,n.length)}static compareSegments(e,n){const r=qr.isNumericId(e),s=qr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?qr.extractNumericId(e).compare(qr.extractNumericId(n)):sv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class Ye extends qr{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const yz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends qr{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return yz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F_}static keyField(){return new Mt([F_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new ue(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ye.fromString(e))}static fromName(e){return new pe(Ye.fromString(e).popFirst(5))}static empty(){return new pe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t,e,n){if(!n)throw new ue(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function D2(t,e,n,r){if(e===!0&&r===!0)throw new ue(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z_(t){if(!pe.isDocumentKey(t))throw new ue(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U_(t){if(pe.isDocumentKey(t))throw new ue(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function M2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new ue(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vz(t,e){if(e<=0)throw new ue(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function $u(t,e){if(!M2(t))throw new ue(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ue(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-62135596800,B_=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*B_);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$_)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B_}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($u(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:bt("string",Je._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Je(0,0))}static max(){return new we(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;function xz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Ui(s,pe.empty(),e)}function wz(t){return new Ui(t.readTime,t.key,fu)}class Ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ui(we.min(),pe.empty(),fu)}static max(){return new Ui(we.max(),pe.empty(),fu)}}function bz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==_z)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(s=>s?X.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new X((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new X((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ez(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Om.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=-1;function Lm(t){return t==null}function Sf(t){return t===0&&1/t==-1/0}function Nz(t){return typeof t=="number"&&Number.isInteger(t)&&!Sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="";function Tz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=H_(e)),e=Cz(t.get(n),e);return H_(e)}function Cz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case O2:n+="";break;default:n+=i}}return n}function H_(t){return t+O2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function L2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gd(this.root,e,this.comparator,!0)}}class Gd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new It(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new V2("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const kz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=kz.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="server_timestamp",z2="__type__",U2="__previous_value__",$2="__local_write_time__";function v0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[z2])==null?void 0:r.stringValue)===F2}function Vm(t){const e=t.mapValue.fields[U2];return v0(e)?Vm(e):e}function mu(t){const e=$i(t.mapValue.fields[$2].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e,n,r,s,i,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ef="(default)";class hl{constructor(e,n){this.projectId=e,this.database=n||Ef}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="__type__",H2="__max__",Kd={mapValue:{fields:{__type__:{stringValue:H2}}}},W2="__vector__",Nf="value";function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v0(t)?4:Az(t)?9007199254740991:Iz(t)?10:11:ve(28295,{value:t})}function cs(t,e){if(t===e)return!0;const n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mu(t).isEqual(mu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=$i(s.timestampValue),l=$i(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bi(s.bytesValue).isEqual(Bi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=gt(s.doubleValue),l=gt(i.doubleValue);return a===l?Sf(a)===Sf(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(W_(a)!==W_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!cs(a[c],l[c])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function pu(t,e){return(t.values||[]).find(n=>cs(n,e))!==void 0}function fl(t,e){if(t===e)return 0;const n=Hi(t),r=Hi(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gt(i.integerValue||i.doubleValue),c=gt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return G_(t.timestampValue,e.timestampValue);case 4:return G_(mu(t),mu(e));case 5:return sv(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Bi(i),c=Bi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Re(l[u],c[u]);if(h!==0)return h}return Re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Re(gt(i.latitude),gt(a.latitude));return l!==0?l:Re(gt(i.longitude),gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,g,w,v;const l=i.fields||{},c=a.fields||{},u=(p=l[Nf])==null?void 0:p.arrayValue,h=(g=c[Nf])==null?void 0:g.arrayValue,m=Re(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return m!==0?m:K_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Kd.mapValue&&a===Kd.mapValue)return 0;if(i===Kd.mapValue)return 1;if(a===Kd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=sv(c[m],h[m]);if(p!==0)return p;const g=fl(l[c[m]],u[h[m]]);if(g!==0)return g}return Re(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function G_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=$i(t),r=$i(e),s=Re(n.seconds,r.seconds);return s!==0?s:Re(n.nanos,r.nanos)}function K_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fl(n[s],r[s]);if(i)return i}return Re(n.length,r.length)}function ml(t){return iv(t)}function iv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=iv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${iv(n.fields[a])}`;return s+"}"}(t.mapValue):ve(61005,{value:t})}function Th(t){switch(Hi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vm(t);return e?16+Th(e):16;case 5:return 2*t.stringValue.length;case 6:return Bi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Th(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zi(r.fields,(i,a)=>{s+=i.length+Th(a)}),s}(t.mapValue);default:throw ve(13486,{value:t})}}function Q_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ov(t){return!!t&&"integerValue"in t}function x0(t){return!!t&&"arrayValue"in t}function X_(t){return!!t&&"nullValue"in t}function Y_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ch(t){return!!t&&"mapValue"in t}function Iz(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[B2])==null?void 0:r.stringValue)===W2}function Dc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(t.arrayValue.values[n]);return e}return{...t}}function Az(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===H2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Dc(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(Dc(this.value))}}function q2(t){const e=[];return Zi(t.fields,(n,r)=>{const s=new Mt([n]);if(Ch(r)){const i=q2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new tn(e,0,we.min(),we.min(),we.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new tn(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new tn(e,2,n,we.min(),we.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,we.min(),we.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.position=e,this.inclusive=n}}function J_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(a.referenceValue),n.key):r=fl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Z_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{}class wt extends G2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Dz(e,n,r):n==="array-contains"?new Lz(e,r):n==="in"?new Vz(e,r):n==="not-in"?new Fz(e,r):n==="array-contains-any"?new zz(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mz(e,r):new Oz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fl(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(fl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends G2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pr(e,n)}matches(e){return K2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K2(t){return t.op==="and"}function Q2(t){return Pz(t)&&K2(t)}function Pz(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function av(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+ml(t.value);if(Q2(t))return t.filters.map(e=>av(e)).join(",");{const e=t.filters.map(n=>av(n)).join(",");return`${t.op}(${e})`}}function X2(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&cs(r.value,s.value)}(t,e):t instanceof Pr?function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&X2(a,s.filters[l]),!0):!1}(t,e):void ve(19439)}function Y2(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(Y2).join(" ,")+"}"}(t):"Filter"}class Dz extends wt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mz extends wt{constructor(e,n){super(e,"in",n),this.keys=J2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Oz extends wt{constructor(e,n){super(e,"not-in",n),this.keys=J2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function J2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class Lz extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return x0(n)&&pu(n.arrayValue,this.value)}}class Vz extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class Fz extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pu(this.value.arrayValue,n)}}class zz extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!x0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function eS(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Uz(t,e,n,r,s,i,a)}function w0(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ml(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ml(r)).join(",")),e.Te=n}return e.Te}function b0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Rz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!X2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Z_(t.startAt,e.startAt)&&Z_(t.endAt,e.endAt)}function lv(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $z(t,e,n,r,s,i,a,l){return new Ol(t,e,n,r,s,i,a,l)}function Fm(t){return new Ol(t)}function tS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Z2(t){return t.collectionGroup!==null}function Mc(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new It(Mt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new gu(i,r))}),n.has(Mt.keyField().canonicalString())||e.Ie.push(new gu(Mt.keyField(),r))}return e.Ie}function ss(t){const e=be(t);return e.Ee||(e.Ee=Bz(e,Mc(t))),e.Ee}function Bz(t,e){if(t.limitType==="F")return eS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new gu(s.field,i)});const n=t.endAt?new Tf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tf(t.startAt.position,t.startAt.inclusive):null;return eS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cv(t,e){const n=t.filters.concat([e]);return new Ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cf(t,e,n){return new Ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zm(t,e){return b0(ss(t),ss(e))&&t.limitType===e.limitType}function ej(t){return`${w0(ss(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Y2(s)).join(", ")}]`),Lm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ml(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ml(s)).join(",")),`Target(${r})`}(ss(t))}; limitType=${t.limitType})`}function Um(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=J_(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,Mc(r),s)||r.endAt&&!function(a,l,c){const u=J_(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,Mc(r),s))}(t,e)}function Hz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tj(t){return(e,n)=>{let r=!1;for(const s of Mc(t)){const i=Wz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Wz(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?fl(c,u):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return L2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=new dt(pe.comparator);function Us(){return qz}const nj=new dt(pe.comparator);function yc(...t){let e=nj;for(const n of t)e=e.insert(n.key,n);return e}function rj(t){let e=nj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function So(){return Oc()}function sj(){return Oc()}function Oc(){return new Xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Gz=new dt(pe.comparator),Kz=new It(pe.comparator);function Pe(...t){let e=Kz;for(const n of t)e=e.add(n);return e}const Qz=new It(Re);function Xz(){return Qz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function ij(t){return{integerValue:""+t}}function Yz(t,e){return Nz(e)?ij(e):_0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this._=void 0}}function Jz(t,e,n){return t instanceof yu?function(s,i){const a={fields:{[z2]:{stringValue:F2},[$2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&v0(i)&&(i=Vm(i)),i&&(a.fields[U2]=i),{mapValue:a}}(n,e):t instanceof pl?aj(t,e):t instanceof gl?lj(t,e):function(s,i){const a=oj(s,i),l=nS(a)+nS(s.Ae);return ov(a)&&ov(s.Ae)?ij(l):_0(s.serializer,l)}(t,e)}function Zz(t,e,n){return t instanceof pl?aj(t,e):t instanceof gl?lj(t,e):n}function oj(t,e){return t instanceof kf?function(r){return ov(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yu extends $m{}class pl extends $m{constructor(e){super(),this.elements=e}}function aj(t,e){const n=cj(e);for(const r of t.elements)n.some(s=>cs(s,r))||n.push(r);return{arrayValue:{values:n}}}class gl extends $m{constructor(e){super(),this.elements=e}}function lj(t,e){let n=cj(e);for(const r of t.elements)n=n.filter(s=>!cs(s,r));return{arrayValue:{values:n}}}class kf extends $m{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nS(t){return gt(t.integerValue||t.doubleValue)}function cj(t){return x0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.field=e,this.transform=n}}function e8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof pl&&s instanceof pl||r instanceof gl&&s instanceof gl?dl(r.elements,s.elements,cs):r instanceof kf&&s instanceof kf?cs(r.Ae,s.Ae):r instanceof yu&&s instanceof yu}(t.transform,e.transform)}class t8{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bm{}function uj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new E0(t.key,sr.none()):new Bu(t.key,t.data,sr.none());{const n=t.data,r=bn.empty();let s=new It(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new eo(t.key,r,new Fn(s.toArray()),sr.none())}}function n8(t,e,n){t instanceof Bu?function(s,i,a){const l=s.value.clone(),c=sS(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof eo?function(s,i,a){if(!kh(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=sS(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(dj(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Lc(t,e,n,r){return t instanceof Bu?function(i,a,l,c){if(!kh(i.precondition,a))return l;const u=i.value.clone(),h=iS(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof eo?function(i,a,l,c){if(!kh(i.precondition,a))return l;const u=iS(i.fieldTransforms,c,a),h=a.data;return h.setAll(dj(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return kh(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function r8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=oj(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function rS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(i,a)=>e8(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends Bm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eo extends Bm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sS(t,e,n){const r=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,Zz(a,l,n[s]))}return r}function iS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Jz(i,a,e))}return r}class E0 extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s8 extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&n8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sj();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=uj(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>rS(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>rS(n,r))}}class N0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){We(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Gz}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new N0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,De;function l8(t){switch(t){case K.OK:return ve(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function hj(t){if(t===void 0)return zs("GRPC error has no .code"),K.UNKNOWN;switch(t){case vt.OK:return K.OK;case vt.CANCELLED:return K.CANCELLED;case vt.UNKNOWN:return K.UNKNOWN;case vt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case vt.INTERNAL:return K.INTERNAL;case vt.UNAVAILABLE:return K.UNAVAILABLE;case vt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case vt.NOT_FOUND:return K.NOT_FOUND;case vt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case vt.ABORTED:return K.ABORTED;case vt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case vt.DATA_LOSS:return K.DATA_LOSS;default:return ve(39323,{code:t})}}(De=vt||(vt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=new Ri([4294967295,4294967295],0);function oS(t){const e=c8().encode(t),n=new E2;return n.update(e),new Uint8Array(n.digest())}function aS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([s,i],0)]}class T0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vc(`Invalid padding: ${n}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ri.fromNumber(r)));return s.compare(u8)===1&&(s=new Ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=oS(e),[r,s]=aS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new T0(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=oS(e),[r,s]=aS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hm(we.min(),s,new dt(Re),Us(),Pe())}}class Hu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class fj{constructor(e,n){this.targetId=e,this.Ce=n}}class mj{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lS{constructor(){this.ve=0,this.Fe=cS(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),r=Pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve(38017,{changeType:i})}}),new Hu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=cS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.Je=Qd(),this.He=Qd(),this.Ye=new dt(Re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(lv(i))if(r===0){const a=new pe(i.path);this.et(n,a,tn.newNoDocument(a,we.min()))}else We(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Bi(r).toUint8Array()}catch(c){if(c instanceof V2)return Ho("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new T0(a,s,i)}catch(c){return Ho(c instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&lv(l.target)){const c=new pe(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,tn.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Pe();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Hm(e,n,this.Ye,this.je,r);return this.je=Us(),this.Je=Qd(),this.He=Qd(),this.Ye=new dt(Re),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qd(){return new dt(pe.comparator)}function cS(){return new dt(pe.comparator)}const h8={asc:"ASCENDING",desc:"DESCENDING"},f8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m8={and:"AND",or:"OR"};class p8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uv(t,e){return t.useProto3Json||Lm(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g8(t,e){return jf(t,e.toTimestamp())}function is(t){return We(!!t,49232),we.fromTimestamp(function(n){const r=$i(n);return new Je(r.seconds,r.nanos)}(t))}function C0(t,e){return dv(t,e).canonicalString()}function dv(t,e){const n=function(s){return new Ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gj(t){const e=Ye.fromString(t);return We(bj(e),10190,{key:e.toString()}),e}function hv(t,e){return C0(t.databaseId,e.path)}function Eg(t,e){const n=gj(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(vj(n))}function yj(t,e){return C0(t.databaseId,e)}function y8(t){const e=gj(t);return e.length===4?Ye.emptyPath():vj(e)}function fv(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vj(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uS(t,e,n){return{name:hv(t,e),fields:n.value.mapValue.fields}}function v8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(We(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(We(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?K.UNKNOWN:hj(u.code);return new ue(h,u.message||"")}(a);n=new mj(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Eg(t,r.document.name),i=is(r.document.updateTime),a=r.document.createTime?is(r.document.createTime):we.min(),l=new bn({mapValue:{fields:r.document.fields}}),c=tn.newFoundDocument(s,i,a,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new jh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Eg(t,r.document),i=r.readTime?is(r.readTime):we.min(),a=tn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new jh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Eg(t,r.document),i=r.removedTargetIds||[];n=new jh([],i,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new a8(s,i),l=r.targetId;n=new fj(l,a)}}return n}function x8(t,e){let n;if(e instanceof Bu)n={update:uS(t,e.key,e.value)};else if(e instanceof E0)n={delete:hv(t,e.key)};else if(e instanceof eo)n={update:uS(t,e.key,e.data),updateMask:k8(e.fieldMask)};else{if(!(e instanceof s8))return ve(16599,{Vt:e.type});n={verify:hv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof yu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof kf)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ve(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:g8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve(27497)}(t,e.precondition)),n}function w8(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?is(s.updateTime):is(i);return a.isEqual(we.min())&&(a=is(i)),new t8(a,s.transformResults||[])}(n,e))):[]}function b8(t,e){return{documents:[yj(t,e.path)]}}function _8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yj(t,s);const i=function(u){if(u.length!==0)return wj(Pr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ca(p.field),direction:N8(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=uv(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function S8(t){let e=y8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){We(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=xj(m);return p instanceof Pr&&Q2(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(w){return new gu(ua(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Lm(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,g=m.values||[];return new Tf(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const p=!m.before,g=m.values||[];return new Tf(g,p)}(n.endAt)),$z(e,s,a,i,l,"F",c,u)}function E8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ua(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ua(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ua(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ua(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(ua(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>xj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function N8(t){return h8[t]}function T8(t){return f8[t]}function C8(t){return m8[t]}function ca(t){return{fieldPath:t.canonicalString()}}function ua(t){return Mt.fromServerFormat(t.fieldPath)}function wj(t){return t instanceof wt?function(n){if(n.op==="=="){if(Y_(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y_(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(n.field),op:T8(n.op),value:n.value}}}(t):t instanceof Pr?function(n){const r=n.getFilters().map(s=>wj(s));return r.length===1?r[0]:{compositeFilter:{op:C8(n.op),filters:r}}}(t):ve(54877,{filter:t})}function k8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r,s,i=we.min(),a=we.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.yt=e}}function I8(t){const e=S8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.Cn=new R8}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Ui.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class R8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_j=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(_j,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="LruGarbageCollector",P8=1048576;function fS([t,e],[n,r]){const s=Re(t,n);return s===0?Re(e,r):s}class D8{constructor(e){this.Ir=e,this.buffer=new It(fS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();fS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class M8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(hS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?he(hS,"Ignoring IndexedDB error during garbage collection: ",n):await Dl(n)}await this.Vr(3e5)})}}class O8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return X.resolve(Om.ce);const r=new D8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(dS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),aa()<=Ae.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function L8(t,e){return new O8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(){this.changes=new Xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Lc(r.mutation,s,Fn.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=So();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=yc();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=So();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Us();const a=Oc(),l=function(){return Oc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof eo)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Lc(h.mutation,u,h.mutation.getFieldMask(),Je.now())):a.set(u.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>l.set(u,new F8(h,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oc();let s=new dt((a,l)=>a-l),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Fn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const m=(s.get(l.batchId)||Pe()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,m=sj();h.forEach(p=>{if(!i.has(p)){const g=uj(n.get(p),r.get(p));g!==null&&m.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return X.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):X.resolve(So());let l=fu,c=i;return a.next(u=>X.forEach(u,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Pe())).next(h=>({batchId:l,changes:rj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=yc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=yc();return this.indexManager.getCollectionParents(e,i).next(l=>X.forEach(l,c=>{const u=function(m,p){return new Ol(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,tn.newInvalidDocument(h)))});let l=yc();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Lc(h.mutation,u,Fn.empty(),Je.now()),Um(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:is(s.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:I8(s.bundledQuery),readTime:is(s.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(){this.overlays=new dt(pe.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=So();return X.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const s=So(),i=n.length+1,a=new pe(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return X.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new dt((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=So(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=So(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return X.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new o8(n,r));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Qr=new It(Rt.$r),this.Ur=new It(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new pe(new Ye([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Ye([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Pe();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Re(e.Yr,n.Yr)}static Kr(e,n){return Re(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Rt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new i8(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Rt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?y0:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Re);return n.forEach(s=>{const i=new Rt(s,0),a=new Rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const a=new Rt(new pe(i),0);let l=new It(Re);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),X.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Rt(n,0),s=this.Zr.firstAfterOrEqual(r);return X.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.ri=e,this.docs=function(){return new dt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=Us();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tn.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Us();const a=n.path,l=new pe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||bz(wz(h),r)<=0||(s.has(h.key)||Um(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve(9500)}ii(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new q8(this)}getSize(e){return X.resolve(this.size)}}class q8 extends V8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.persistence=e,this.si=new Xo(n=>w0(n),b0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new k0,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),X.waitFor(i).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this.ui={},this.overlays={},this.ci=new Om(0),this.li=!1,this.li=!0,this.hi=new B8,this.referenceDelegate=e(this),this.Pi=new G8(this),this.indexManager=new A8,this.remoteDocumentCache=function(s){return new W8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new j8(n),this.Ii=new U8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new H8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const s=new K8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return X.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class K8 extends Sz{constructor(e){super(),this.currentSequenceNumber=e}}class j0{constructor(e){this.persistence=e,this.Ri=new k0,this.Vi=null}static mi(e){return new j0(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,r=>{const s=pe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class If{constructor(e,n){this.persistence=e,this.pi=new Xo(r=>Tz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=L8(this,n)}static mi(e,n){return new If(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return X.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?X.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,r){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Pe(),s=Pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new I0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return B6()?8:Ez(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Q8;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(aa()<=Ae.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(aa()<=Ae.DEBUG&&he("QueryEngine","Query:",la(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(aa()<=Ae.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):X.resolve())}ys(e,n){if(tS(n))return X.resolve(null);let r=ss(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cf(n,null,"F"),r=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Pe(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,Cf(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return tS(n)||s.isEqual(we.min())?X.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?X.resolve(null):(aa()<=Ae.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),la(n)),this.vs(e,a,n,xz(s,fu)).next(l=>l))})}Ds(e,n){let r=new It(tj(e));return n.forEach((s,i)=>{Um(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return aa()<=Ae.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",la(n)),this.ps.getDocumentsMatchingQuery(e,n,Ui.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="LocalStore",Y8=3e8;class J8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new dt(Re),this.xs=new Xo(i=>w0(i),b0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Z8(t,e,n,r){return new J8(t,e,n,r)}async function Ej(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Pe();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function eU(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const m=u.batch,p=m.keys();let g=X.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(c,w)).next(v=>{const _=u.docVersions.get(w);We(_!==null,48541),v.version.compareTo(_)<0&&(m.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Pe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Nj(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function tU(t,e){const n=be(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,m)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(Vt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(m,g),function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Y8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=Us(),u=Pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(nU(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return X.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function nU(t,e,n){let r=Pe(),s=Pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Us();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):he(A0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function rU(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=y0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sU(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,X.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new wi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function mv(t,e,n){const r=be(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ml(a))throw a;he(A0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function mS(t,e,n){const r=be(t);let s=we.min(),i=Pe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const m=be(c),p=m.xs.get(h);return p!==void 0?X.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,h)}(r,a,ss(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:we.min(),n?i:Pe())).next(l=>(iU(r,Hz(e),l),{documents:l,Qs:i})))}function iU(t,e,n){let r=t.Os.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class pS{constructor(){this.activeTargetIds=Xz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oU{constructor(){this.Mo=new pS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="ConnectivityMonitor";class yS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(gS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(gS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd=null;function pv(){return Xd===null?Xd=function(){return 268435456+Math.round(2147483648*Math.random())}():Xd++,"0x"+Xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="RestConnection",lU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ef?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=pv(),l=this.zo(e,n.toUriEncodedString());he(Ng,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=Il(u);return this.Jo(e,l,c,r,h).then(m=>(he(Ng,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ho(Ng,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=lU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class dU extends cU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=pv();return new Promise((l,c)=>{const u=new N2;u.setWithCredentials(!0),u.listenOnce(T2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nh.NO_ERROR:const m=u.getResponseJson();he(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Nh.TIMEOUT:he(Xt,`RPC '${e}' ${a} timed out`),c(new ue(K.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const p=u.getStatus();if(he(Xt,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const v=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(w.status);c(new ue(v,w.message))}else c(new ue(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(K.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{he(Xt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);he(Xt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=pv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=j2(),l=k2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");he(Xt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const m=a.createWebChannel(h,c);this.I_(m);let p=!1,g=!1;const w=new uU({Yo:_=>{g?he(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(he(Xt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),he(Xt,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},Zo:()=>m.close()}),v=(_,b,x)=>{_.listen(b,S=>{try{x(S)}catch(j){setTimeout(()=>{throw j},0)}})};return v(m,gc.EventType.OPEN,()=>{g||(he(Xt,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),v(m,gc.EventType.CLOSE,()=>{g||(g=!0,he(Xt,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(m))}),v(m,gc.EventType.ERROR,_=>{g||(g=!0,Ho(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.a_(new ue(K.UNAVAILABLE,"The operation could not be completed")))}),v(m,gc.EventType.MESSAGE,_=>{var b;if(!g){const x=_.data[0];We(!!x,16349);const S=x,j=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(j){he(Xt,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let M=function(T){const k=vt[T];if(k!==void 0)return hj(k)}(D),E=j.message;M===void 0&&(M=K.INTERNAL,E="Unknown error status: "+D+" with message "+j.message),g=!0,w.a_(new ue(M,E)),m.close()}else he(Xt,`RPC '${e}' stream ${s} received:`,x),w.u_(x)}}),v(l,C2.STAT_EVENT,_=>{_.stat===rv.PROXY?he(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===rv.NOPROXY&&he(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t){return new p8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="PersistentStream";class Cj{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ue(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return he(vS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(he(vS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hU extends Cj{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=v8(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?is(a.readTime):we.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fv(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=lv(c)?{documents:b8(i,c)}:{query:_8(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=pj(i,a.resumeToken);const u=uv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(we.min())>0){l.readTime=jf(i,a.snapshotVersion.toTimestamp());const u=uv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=E8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fv(this.serializer),n.removeTarget=e,this.q_(n)}}class fU extends Cj{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w8(e.writeResults,e.commitTime),r=is(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>x8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{}class pU extends mU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,dv(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(K.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,dv(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(K.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zs(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RemoteStore";class yU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Yo(this)&&(he(Wo,"Restarting streams for network reachability change."),await async function(c){const u=be(c);u.Ea.add(4),await Wu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await qm(u)}(this))})}),this.Ra=new gU(r,s)}}async function qm(t){if(Yo(t))for(const e of t.da)await e(!0)}async function Wu(t){for(const e of t.da)await e(!1)}function kj(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),M0(n)?D0(n):Ll(n).O_()&&P0(n,e))}function R0(t,e){const n=be(t),r=Ll(n);n.Ia.delete(e),r.O_()&&jj(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yo(n)&&n.Ra.set("Unknown"))}function P0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).Y_(e)}function jj(t,e){t.Va.Ue(e),Ll(t).Z_(e)}function D0(t){t.Va=new d8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.Ra.ua()}function M0(t){return Yo(t)&&!Ll(t).x_()&&t.Ia.size>0}function Yo(t){return be(t).Ea.size===0}function Ij(t){t.Va=void 0}async function vU(t){t.Ra.set("Online")}async function xU(t){t.Ia.forEach((e,n)=>{P0(t,e)})}async function wU(t,e){Ij(t),M0(t)?(t.Ra.ha(e),D0(t)):t.Ra.set("Unknown")}async function bU(t,e,n){if(t.Ra.set("Online"),e instanceof mj&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){he(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Af(t,r)}else if(e instanceof jh?t.Va.Ze(e):e instanceof fj?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const r=await Nj(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),jj(i,c);const m=new wi(h.target,c,u,h.sequenceNumber);P0(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){he(Wo,"Failed to raise snapshot:",r),await Af(t,r)}}async function Af(t,e,n){if(!Ml(e))throw e;t.Ea.add(1),await Wu(t),t.Ra.set("Offline"),n||(n=()=>Nj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(Wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qm(t)})}function Aj(t,e){return e().catch(n=>Af(t,n,e))}async function Gm(t){const e=be(t),n=Wi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:y0;for(;_U(e);)try{const s=await rU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,SU(e,s)}catch(s){await Af(e,s)}Rj(e)&&Pj(e)}function _U(t){return Yo(t)&&t.Ta.length<10}function SU(t,e){t.Ta.push(e);const n=Wi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Rj(t){return Yo(t)&&!Wi(t).x_()&&t.Ta.length>0}function Pj(t){Wi(t).start()}async function EU(t){Wi(t).ra()}async function NU(t){const e=Wi(t);for(const n of t.Ta)e.ea(n.mutations)}async function TU(t,e,n){const r=t.Ta.shift(),s=N0.from(r,e,n);await Aj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gm(t)}async function CU(t,e){e&&Wi(t).X_&&await async function(r,s){if(function(a){return l8(a)&&a!==K.ABORTED}(s.code)){const i=r.Ta.shift();Wi(r).B_(),await Aj(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Gm(r)}}(t,e),Rj(t)&&Pj(t)}async function xS(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),he(Wo,"RemoteStore received new credentials");const r=Yo(n);n.Ea.add(3),await Wu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qm(n)}async function kU(t,e){const n=be(t);e?(n.Ea.delete(2),await qm(n)):e||(n.Ea.add(2),await Wu(n),n.Ra.set("Unknown"))}function Ll(t){return t.ma||(t.ma=function(n,r,s){const i=be(n);return i.sa(),new hU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:vU.bind(null,t),t_:xU.bind(null,t),r_:wU.bind(null,t),H_:bU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),M0(t)?D0(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ij(t))})),t.ma}function Wi(t){return t.fa||(t.fa=function(n,r,s){const i=be(n);return i.sa(),new fU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EU.bind(null,t),r_:CU.bind(null,t),ta:NU.bind(null,t),na:TU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gm(t)):(await t.fa.stop(),t.Ta.length>0&&(he(Wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new O0(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L0(t,e){if(zs("AsyncQueue",`${e}: ${t}`),Ml(t))return new ue(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(e){return new La(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=yc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new La;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.ga=new dt(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vl{constructor(e,n,r,s,i,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new vl(e,n,La.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class IU{constructor(){this.queries=bS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=be(n),i=s.queries;s.queries=bS(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ue(K.ABORTED,"Firestore shutting down"))}}function bS(){return new Xo(t=>ej(t),zm)}async function V0(t,e){const n=be(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new jU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=L0(a,`Initialization of query '${la(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&z0(n)}async function F0(t,e){const n=be(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AU(t,e){const n=be(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&z0(n)}function RU(t,e,n){const r=be(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function z0(t){t.Ca.forEach(e=>{e.next()})}var gv,_S;(_S=gv||(gv={})).Ma="default",_S.Cache="cache";class U0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.key=e}}class Mj{constructor(e){this.key=e}}class PU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=tj(e),this.tu=new La(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new wS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),g=Um(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?w!==v&&(r.track({type:3,doc:g}),_=!0):this.su(p,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(a=a.add(g),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(g,w){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:_})}};return v(g)-v(w)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new vl(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Mj(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Dj(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $0="SyncEngine";class DU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MU{constructor(e){this.key=e,this.hu=!1}}class OU{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xo(l=>ej(l),zm),this.Iu=new Map,this.Eu=new Set,this.du=new dt(pe.comparator),this.Au=new Map,this.Ru=new k0,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LU(t,e,n=!0){const r=Uj(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Oj(r,e,n,!0),s}async function VU(t,e){const n=Uj(t);await Oj(n,e,!0,!1)}async function Oj(t,e,n,r){const s=await sU(t.localStore,ss(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await FU(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&kj(t.remoteStore,s),l}async function FU(t,e,n,r,s){t.pu=(m,p,g)=>async function(v,_,b,x){let S=_.view.ru(b);S.Cs&&(S=await mS(v.localStore,_.query,!1).then(({documents:E})=>_.view.ru(E,S)));const j=x&&x.targetChanges.get(_.targetId),D=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,v.isPrimaryClient,j,D);return ES(v,_.targetId,M.au),M.snapshot}(t,m,p,g);const i=await mS(t.localStore,e,!0),a=new PU(e,i.Qs),l=a.ru(i.documents),c=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);ES(t,n,u.au);const h=new DU(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function zU(t,e,n){const r=be(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!zm(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&R0(r.remoteStore,s.targetId),yv(r,s.targetId)}).catch(Dl)):(yv(r,s.targetId),await mv(r.localStore,s.targetId,!0))}async function UU(t,e){const n=be(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),R0(n.remoteStore,r.targetId))}async function $U(t,e,n){const r=QU(t);try{const s=await function(a,l){const c=be(a),u=Je.now(),h=l.reduce((g,w)=>g.add(w.key),Pe());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Us(),v=Pe();return c.Ns.getEntries(g,h).next(_=>{w=_,w.forEach((b,x)=>{x.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(_=>{m=_;const b=[];for(const x of l){const S=r8(x,m.get(x.key).overlayedDocument);S!=null&&b.push(new eo(x.key,S,q2(S.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(_=>{p=_;const b=_.applyToLocalDocumentSet(m,v);return c.documentOverlayCache.saveOverlays(g,_.batchId,b)})}).then(()=>({batchId:p.batchId,changes:rj(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new dt(Re)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await qu(r,s.changes),await Gm(r.remoteStore)}catch(s){const i=L0(s,"Failed to persist write");n.reject(i)}}async function Lj(t,e){const n=be(t);try{const r=await tU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?We(a.hu,14607):s.removedDocuments.size>0&&(We(a.hu,42227),a.hu=!1))}),await qu(n,r,e)}catch(r){await Dl(r)}}function SS(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=be(a);c.onlineState=l;let u=!1;c.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(u=!0)}),u&&z0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BU(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new dt(pe.comparator);a=a.insert(i,tn.newNoDocument(i,we.min()));const l=Pe().add(i),c=new Hm(we.min(),new Map,new dt(Re),a,l);await Lj(r,c),r.du=r.du.remove(i),r.Au.delete(e),B0(r)}else await mv(r.localStore,e,!1).then(()=>yv(r,e,n)).catch(Dl)}async function HU(t,e){const n=be(t),r=e.batch.batchId;try{const s=await eU(n.localStore,e);Fj(n,r,null),Vj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qu(n,s)}catch(s){await Dl(s)}}async function WU(t,e,n){const r=be(t);try{const s=await function(a,l){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(We(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);Fj(r,e,n),Vj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qu(r,s)}catch(s){await Dl(s)}}function Vj(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Fj(t,e,n){const r=be(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function yv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||zj(t,r)})}function zj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(R0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),B0(t))}function ES(t,e,n){for(const r of n)r instanceof Dj?(t.Ru.addReference(r.key,e),qU(t,r)):r instanceof Mj?(he($0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||zj(t,r.key)):ve(19791,{wu:r})}function qU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(he($0,"New document in limbo: "+n),t.Eu.add(r),B0(t))}function B0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Ye.fromString(e)),r=t.fu.next();t.Au.set(r,new MU(n)),t.du=t.du.insert(n,r),kj(t.remoteStore,new wi(ss(Fm(n.path)),r,"TargetPurposeLimboResolution",Om.ce))}}async function qu(t,e,n){const r=be(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=I0.As(c.targetId,u);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>X.forEach(u,p=>X.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>X.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!Ml(m))throw m;he(A0,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,v)}}}(r.localStore,i))}async function GU(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){he($0,"User change. New user:",e.toKey());const r=await Ej(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ue(K.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qu(n,r.Ls)}}function KU(t,e){const n=be(t),r=n.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let s=Pe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Uj(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BU.bind(null,e),e.Pu.H_=AU.bind(null,e.eventManager),e.Pu.yu=RU.bind(null,e.eventManager),e}function QU(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WU.bind(null,e),e}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Z8(this.persistence,new X8,e.initialUser,this.serializer)}Cu(e){return new Sj(j0.mi,this.serializer)}Du(e){return new oU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class XU extends Rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof If,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new M8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new Sj(r=>If.mi(r,n),this.serializer)}}class vv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GU.bind(null,this.syncEngine),await kU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IU}()}createDatastore(e){const n=Wm(e.databaseInfo.databaseId),r=function(i){return new dU(i)}(e.databaseInfo);return function(i,a,l,c){return new pU(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new yU(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>SS(this.syncEngine,n,0),function(){return yS.v()?new yS:new aU}())}createSyncEngine(e,n){return function(s,i,a,l,c,u,h){const m=new OU(s,i,a,l,c,u);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=be(s);he(Wo,"RemoteStore shutting down."),i.Ea.add(5),await Wu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vv.provider={build:()=>new vv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="FirestoreClient";class YU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{he(qi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(he(qi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=L0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),he(qi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ej(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JU(t);he(qi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>xS(e.remoteStore,s)),t._onlineComponents=e}async function JU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(qi,"Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new Rf)}}else he(qi,"Using default OfflineComponentProvider"),await Cg(t,new XU(void 0));return t._offlineComponents}async function $j(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(qi,"Using user provided OnlineComponentProvider"),await NS(t,t._uninitializedComponentsProvider._online)):(he(qi,"Using default OnlineComponentProvider"),await NS(t,new vv))),t._onlineComponents}function ZU(t){return $j(t).then(e=>e.syncEngine)}async function Pf(t){const e=await $j(t),n=e.eventManager;return n.onListen=LU.bind(null,e.syncEngine),n.onUnlisten=zU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UU.bind(null,e.syncEngine),n}function e7(t,e,n={}){const r=new Cs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new H0({next:p=>{h.Nu(),a.enqueueAndForget(()=>F0(i,m));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new ue(K.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new ue(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new U0(Fm(l.path),h,{includeMetadataChanges:!0,qa:!0});return V0(i,m)}(await Pf(t),t.asyncQueue,e,n,r)),r.promise}function t7(t,e,n={}){const r=new Cs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new H0({next:p=>{h.Nu(),a.enqueueAndForget(()=>F0(i,m)),p.fromCache&&c.source==="server"?u.reject(new ue(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new U0(l,h,{includeMetadataChanges:!0,qa:!0});return V0(i,m)}(await Pf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="firestore.googleapis.com",CS=!0;class kS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hj,this.ssl=CS}else this.host=e.host,this.ssl=e.ssl??CS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_j;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P8)throw new ue(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bj(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Km{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R2;switch(r.type){case"firstParty":return new hz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=TS.get(n);r&&(he("ComponentProvider","Removing Datastore"),TS.delete(n),r.terminate())}(this),Promise.resolve()}}function Wj(t,e,n,r={}){var u;t=hn(t,Km);const s=Il(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(zk(`https://${l}`),Uk("Firestore",!0)),i.host!==Hj&&i.host!==l&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ls(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Jt.MOCK_USER;else{h=D6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ue(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Jt(p)}t._authCredentials=new cz(new A2(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($u(n,lt._jsonSchema))return new lt(e,r||null,new pe(Ye.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:bt("string",lt._jsonSchemaVersion),referencePath:bt("string")};class ks extends hs{constructor(e,n,r){super(e,n,Fm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new pe(e))}withConverter(e){return new ks(this.firestore,e,this._path)}}function os(t,e,...n){if(t=Lt(t),P2("collection","path",e),t instanceof Km){const r=Ye.fromString(e,...n);return U_(r),new ks(t,null,r)}{if(!(t instanceof lt||t instanceof ks))throw new ue(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return U_(r),new ks(t.firestore,null,r)}}function Me(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=Dm.newId()),P2("doc","path",e),t instanceof Km){const r=Ye.fromString(e,...n);return z_(r),new lt(t,null,new pe(r))}{if(!(t instanceof lt||t instanceof ks))throw new ue(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return z_(r),new lt(t.firestore,t instanceof ks?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="AsyncQueue";class IS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tj(this,"async_queue_retry"),this._c=()=>{const r=Tg();r&&he(jS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Cs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;he(jS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,zs("INTERNAL UNHANDLED ERROR: ",AS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=O0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:AS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class us extends Km{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new IS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IS(e),this._firestoreClient=void 0,await e}}}function qj(t,e){const n=typeof t=="object"?t:Wk(),r=typeof t=="string"?t:Ef,s=i0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=R6("firestore");i&&Wj(s,...i)}return s}function Gu(t){if(t._terminated)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n7(t),t._firestoreClient}function n7(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new jz(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Bj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Vt.fromBase64String(e))}catch(n){throw new ue(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($u(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:bt("string",Ln._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if($u(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:bt("string",kr._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($u(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jr(e.vectorValues);throw new ue(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:bt("string",jr._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=/^__.*__$/;class s7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}class Gj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:t})}}class Qm{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Df(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kj(this.Ac)&&r7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wm(e)}Cc(e,n,r,s=!1){return new Qm({Ac:e,methodName:n,Dc:r,path:Mt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xm(t){const e=t._freezeSettings(),n=Wm(t._databaseId);return new i7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qj(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);K0("Data must be an object, but it was:",a,r);const l=Yj(r,a);let c,u;if(i.merge)c=new Fn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=xv(e,m,n);if(!a.contains(p))throw new ue(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Zj(h,p)||h.push(p)}c=new Fn(h),u=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=a.fieldTransforms;return new s7(new bn(l),c,u)}class Ym extends Jo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ym}}function Xj(t,e,n){return new Qm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W0 extends Jo{_toFieldTransform(e){return new S0(e.path,new yu)}isEqual(e){return e instanceof W0}}class q0 extends Jo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Xj(this,e,!0),r=this.vc.map(i=>Zo(i,n)),s=new pl(r);return new S0(e.path,s)}isEqual(e){return e instanceof q0&&Ls(this.vc,e.vc)}}class G0 extends Jo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Xj(this,e,!0),r=this.vc.map(i=>Zo(i,n)),s=new gl(r);return new S0(e.path,s)}isEqual(e){return e instanceof G0&&Ls(this.vc,e.vc)}}function o7(t,e,n,r){const s=t.Cc(1,e,n);K0("Data must be an object, but it was:",s,r);const i=[],a=bn.empty();Zi(r,(c,u)=>{const h=Q0(e,c,n);u=Lt(u);const m=s.yc(h);if(u instanceof Ym)i.push(h);else{const p=Zo(u,m);p!=null&&(i.push(h),a.set(h,p))}});const l=new Fn(i);return new Gj(a,l,s.fieldTransforms)}function a7(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[xv(e,r,n)],c=[s];if(i.length%2!=0)throw new ue(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(xv(e,i[p])),c.push(i[p+1]);const u=[],h=bn.empty();for(let p=l.length-1;p>=0;--p)if(!Zj(u,l[p])){const g=l[p];let w=c[p];w=Lt(w);const v=a.yc(g);if(w instanceof Ym)u.push(g);else{const _=Zo(w,v);_!=null&&(u.push(g),h.set(g,_))}}const m=new Fn(u);return new Gj(h,m,a.fieldTransforms)}function l7(t,e,n,r=!1){return Zo(n,t.Cc(r?4:3,e))}function Zo(t,e){if(Jj(t=Lt(t)))return K0("Unsupported field value:",e,t),Yj(t,e);if(t instanceof Jo)return function(r,s){if(!Kj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Zo(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:jf(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(s.serializer,i)}}if(r instanceof kr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:pj(s.serializer,r._byteString)};if(r instanceof lt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:C0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jr)return function(a,l){return{mapValue:{fields:{[B2]:{stringValue:W2},[Nf]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return _0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Mm(r)}`)}(t,e)}function Yj(t,e){const n={};return L2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,s)=>{const i=Zo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Jj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof kr||t instanceof Ln||t instanceof lt||t instanceof Jo||t instanceof jr)}function K0(t,e,n){if(!Jj(n)||!M2(n)){const r=Mm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xv(t,e,n){if((e=Lt(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return Q0(t,e);throw Df("Field path arguments must be of type string or ",t,!1,void 0,n)}const c7=new RegExp("[~\\*/\\[\\]]");function Q0(t,e,n){if(e.search(c7)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ku(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Df(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new ue(K.INVALID_ARGUMENT,l+t+c)}function Zj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u7 extends eI{data(){return super.data()}}function Jm(t,e){return typeof e=="string"?Q0(t,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class Zm extends X0{}function Pi(t,e,...n){let r=[];e instanceof X0&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof ep).length,l=i.filter(c=>c instanceof Qu).length;if(a>1||a>0&&l>0)throw new ue(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qu extends Zm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return nI(e._query,n),new hs(e.firestore,e.converter,cv(e._query,n))}_parse(e){const n=Xm(e.firestore);return function(i,a,l,c,u,h,m){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ue(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){DS(m,h);const w=[];for(const v of m)w.push(PS(c,i,v));p={arrayValue:{values:w}}}else p=PS(c,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||DS(m,h),p=l7(l,a,m,h==="in"||h==="not-in");return wt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Y0(t,e,n){const r=e,s=Jm("where",t);return Qu._create(s,r,n)}class ep extends X0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ep(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)nI(a,c),a=cv(a,c)}(e._query,n),new hs(e.firestore,e.converter,cv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tp extends Zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new ue(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gu(i,a)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ol(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Po(t,e="asc"){const n=e,r=Jm("orderBy",t);return tp._create(r,n)}class np extends Zm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new np(e,n,r)}_apply(e){return new hs(e.firestore,e.converter,Cf(e._query,this._limit,this._limitType))}}function Va(t){return vz("limit",t),np._create("limit",t,"F")}function PS(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new ue(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z2(e)&&n.indexOf("/")!==-1)throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!pe.isDocumentKey(r))throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Q_(t,new pe(r))}if(n instanceof lt)return Q_(t,n._key);throw new ue(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mm(n)}.`)}function DS(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nI(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rI{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Nf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>gt(a.doubleValue));return new jr(n)}convertGeoPoint(e){return new kr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const n=$i(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);We(bj(r),9688,{name:e});const s=new hl(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||zs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends eI{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:bt("string",Di._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Vc extends Di{data(e={}){return super.data(e)}}class Mi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vc(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:d7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){t=hn(t,lt);const e=hn(t.firestore,us);return e7(Gu(e),t._key).then(n=>iI(e,t,n))}Mi._jsonSchemaVersion="firestore/querySnapshot/1.0",Mi._jsonSchema={type:bt("string",Mi._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class J0 extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function wv(t){t=hn(t,hs);const e=hn(t.firestore,us),n=Gu(e),r=new J0(e);return tI(t._query),t7(n,t._query).then(s=>new Mi(e,r,t,s))}function nn(t,e,n){t=hn(t,lt);const r=hn(t.firestore,us),s=sI(t.converter,e,n);return Xu(r,[Qj(Xm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sr.none())])}function Na(t,e,n,...r){t=hn(t,lt);const s=hn(t.firestore,us),i=Xm(s);let a;return a=typeof(e=Lt(e))=="string"||e instanceof Ku?a7(i,"updateDoc",t._key,e,n,r):o7(i,"updateDoc",t._key,e),Xu(s,[a.toMutation(t._key,sr.exists(!0))])}function Z0(t){return Xu(hn(t.firestore,us),[new E0(t._key,sr.none())])}function rp(t,e){const n=hn(t.firestore,us),r=Me(t),s=sI(t.converter,e);return Xu(n,[Qj(Xm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function ir(t,...e){var c,u,h;t=Lt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||RS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(RS(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(u=m.error)==null?void 0:u.bind(m),e[r+2]=(h=m.complete)==null?void 0:h.bind(m)}let i,a,l;if(t instanceof lt)a=hn(t.firestore,us),l=Fm(t._key.path),i={next:m=>{e[r]&&e[r](iI(a,t,m))},error:e[r+1],complete:e[r+2]};else{const m=hn(t,hs);a=hn(m.firestore,us),l=m._query;const p=new J0(a);i={next:g=>{e[r]&&e[r](new Mi(a,p,m,g))},error:e[r+1],complete:e[r+2]},tI(t._query)}return function(p,g,w,v){const _=new H0(v),b=new U0(g,_,w);return p.asyncQueue.enqueueAndForget(async()=>V0(await Pf(p),b)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>F0(await Pf(p),b))}}(Gu(a),l,s,i)}function Xu(t,e){return function(r,s){const i=new Cs;return r.asyncQueue.enqueueAndForget(async()=>$U(await ZU(r),s,i)),i.promise}(Gu(t),e)}function iI(t,e,n){const r=n.docs.get(e._key),s=new J0(t);return new Di(t,s,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}function sp(){return new W0("serverTimestamp")}function ew(...t){return new q0("arrayUnion",t)}function oI(...t){return new G0("arrayRemove",t)}(function(e,n=!0){(function(s){Pl=s})(Al),cl(new Uo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new us(new uz(r.getProvider("auth-internal")),new fz(a,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(u.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ai(O_,L_,e),Ai(O_,L_,"esm2020")})();const MS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:rI,Bytes:Ln,CollectionReference:ks,DocumentReference:lt,DocumentSnapshot:Di,FieldPath:Ku,FieldValue:Jo,Firestore:us,FirestoreError:ue,GeoPoint:kr,Query:hs,QueryCompositeFilterConstraint:ep,QueryConstraint:Zm,QueryDocumentSnapshot:Vc,QueryFieldFilterConstraint:Qu,QueryLimitConstraint:np,QueryOrderByConstraint:tp,QuerySnapshot:Mi,SnapshotMetadata:Ea,Timestamp:Je,VectorValue:jr,_AutoId:Dm,_ByteString:Vt,_DatabaseId:hl,_DocumentKey:pe,_EmptyAuthCredentialsProvider:R2,_FieldPath:Mt,_cast:hn,_logWarn:Ho,_validateIsNotUsedTogether:D2,addDoc:rp,arrayRemove:oI,arrayUnion:ew,collection:os,connectFirestoreEmulator:Wj,deleteDoc:Z0,doc:Me,ensureFirestoreConfigured:Gu,executeWrite:Xu,getDoc:Dr,getDocs:wv,getFirestore:qj,limit:Va,onSnapshot:ir,orderBy:Po,query:Pi,serverTimestamp:sp,setDoc:nn,updateDoc:Na,where:Y0},Symbol.toStringTag,{value:"Module"})),h7={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},tw=Hk(h7),vo=iz(tw),_e=qj(tw),Mr=new Zt;Mr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Mr.addScope("https://www.googleapis.com/auth/calendar");Mr.addScope("https://www.googleapis.com/auth/gmail.send");Mr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const OS=Object.freeze(Object.defineProperty({__proto__:null,app:tw,auth:vo,db:_e,googleProvider:Mr},Symbol.toStringTag,{value:"Module"})),aI=f.createContext(void 0);function f7({children:t}){const[e,n]=f.useState(null),[r,s]=f.useState(!0),[i,a]=f.useState(()=>localStorage.getItem("google_access_token")),[l,c]=f.useState(null),[u,h]=f.useState(()=>localStorage.getItem("user_role"));f.useEffect(()=>KF(vo,x=>{n(x),x||(h(null),s(!1),a(null),localStorage.removeItem("google_access_token"))}),[]),f.useEffect(()=>{async function b(){if(!e||!i){if(e&&!i){const x=localStorage.getItem("google_access_token");if(x){a(x);return}}e||s(!1);return}try{s(!0);const x=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let S=!1;if(x.ok){const M=await x.json();M.courses&&M.courses.length>0&&(S=!0)}if(S){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const j=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let D=!1;if(j.ok){const M=await j.json();M.courses&&M.courses.length>0&&(D=!0)}D?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(x){console.error("Role detection failed:",x),h("no_access")}finally{s(!1)}}b()},[e,i]);const m=async()=>{try{c(null),Mr.setCustomParameters({prompt:"consent",access_type:"offline"});const b=await Wd(vo,Mr),x=Zt.credentialFromResult(b);x!=null&&x.accessToken&&(a(x.accessToken),localStorage.setItem("google_access_token",x.accessToken))}catch(b){const x=b instanceof Error?b.message:"Failed to sign in";c(x),console.error("Sign in error:",b)}},p=async()=>{try{c(null);const b=new Zt;b.addScope("https://www.googleapis.com/auth/gmail.send"),b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Wd(vo,b),S=Zt.credentialFromResult(x),j=x._tokenResponse;if(S!=null&&S.accessToken&&(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),j!=null&&j.oauthRefreshToken){const{doc:D,setDoc:M,serverTimestamp:E}=await Sa(async()=>{const{doc:T,setDoc:k,serverTimestamp:I}=await Promise.resolve().then(()=>MS);return{doc:T,setDoc:k,serverTimestamp:I}},void 0),{db:C}=await Sa(async()=>{const{db:T}=await Promise.resolve().then(()=>OS);return{db:T}},void 0);if(e&&j.oauthRefreshToken)return await M(D(C,"users",e.uid,"private_tokens","google"),{refreshToken:j.oauthRefreshToken,updatedAt:E()}),!0}return!!(S!=null&&S.accessToken)}catch(b){const x=b instanceof Error?b.message:"Failed to get Gmail permissions";return c(x),console.error("Permission error:",b),!1}},g=async()=>{try{c(null);const b=new Zt;b.addScope("https://www.googleapis.com/auth/calendar.events"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Wd(vo,b),S=Zt.credentialFromResult(x),j=x._tokenResponse;if(S!=null&&S.accessToken&&(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),e&&(j!=null&&j.oauthRefreshToken)){const{doc:D,setDoc:M,serverTimestamp:E}=await Sa(async()=>{const{doc:T,setDoc:k,serverTimestamp:I}=await Promise.resolve().then(()=>MS);return{doc:T,setDoc:k,serverTimestamp:I}},void 0),{db:C}=await Sa(async()=>{const{db:T}=await Promise.resolve().then(()=>OS);return{db:T}},void 0);return await M(D(C,"users",e.uid,"private_tokens","calendar"),{refreshToken:j.oauthRefreshToken,updatedAt:E(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(b){const x=b instanceof Error?b.message:"Failed to get Calendar permissions";return c(x),console.error("Permission error:",b),!1}},w=async()=>{if(!e)return!1;try{const b=new Zt;b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),b.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),b.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const x=await Wd(vo,b),S=Zt.credentialFromResult(x);return S!=null&&S.accessToken?(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(b){return console.error("Failed to refresh access token:",b),!1}},v=async()=>w(),_=async()=>{try{await QF(vo),a(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(b){const x=b instanceof Error?b.message:"Failed to sign out";c(x)}};return o.jsx(aI.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:m,requestGmailPermissions:p,requestCalendarPermissions:g,refreshAccessToken:v,signOut:_,error:l},children:t})}function et(){const t=f.useContext(aI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const lI=f.createContext(void 0);function m7({children:t}){const[e,n]=f.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});f.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return o.jsx(lI.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function nw(){const t=f.useContext(lI);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class p7{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const a=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-a)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,a){var l;try{const{totalXP:c,processedIds:u}=this.calculateXP(i),h=n.includes("@")?n.split("@")[1]:"",m=a.map(b=>b.id),p=Me(_e,"leaderboards","all-courses","students",e),g=await Dr(p),w=g.exists()?g.data().badges||[]:[],v=this.calculateBadges(u.length,w);await nn(p,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:h,enrolledCourseIds:m,totalXP:c,processedAssignmentIds:u,lastSyncedAt:sp(),badges:v},{merge:!0});const _=v.filter(b=>!w.includes(b));if(_.length>0){const{BADGES:b}=await Sa(async()=>{const{BADGES:x}=await Promise.resolve().then(()=>UR);return{BADGES:x}},void 0);for(const x of _)await rp(os(_e,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((l=b[x])==null?void 0:l.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}}catch(c){throw console.error(" Failed to sync leaderboard:",c),c}}static async resetLeaderboardForSemester(e){try{const n=Me(_e,"leaderboards","all-courses","students",e);await Z0(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=Me(_e,"leaderboards","all-courses","students",e),s=await Dr(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],a=new Set(n),l=new Set(i);if(a.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!a.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,a){try{const l=a.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,a)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}const Zn={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},LS={async fetchCourses(t,e){const n=Zn.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const a=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:g7(l.id)}));return Zn.set(`courses_${e}`,a,60*60*24),a},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,a=Zn.get(i);if(a)return a;const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,turnInTime,updateTime,late)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{courseWork:[]}),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{studentSubmissions:[]})]),m=u.courseWork||[],p=h.studentSubmissions||[],g=m.filter(w=>!w.workType||w.workType==="ASSIGNMENT"||w.workType==="MULTIPLE_CHOICE_QUESTION").map(w=>{const v=p.find(_=>_.courseWorkId===w.id);return y7(w,s,v)});return Zn.set(i,g,3600),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},VS=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function g7(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%VS.length;return VS[n]}function y7(t,e,n){var m,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((m=t.dueTime)==null?void 0:m.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let a="backlog",l="backlog",c=null,u=null,h=null;return n&&(n.state==="TURNED_IN"?(a="submitted",l="submitted",u=n.turnInTime||n.updateTime):n.state==="RETURNED"&&(a="graded",l="graded",c=n.assignedGrade)),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",a="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:a,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function v7(t,e,n,r){const s=Me(_e,"users",n,"settings","calendar"),i=await Dr(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],m={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),m.end.date=p.toISOString().split("T")[0];const g=Me(_e,"users",n,"calendarEvents",c.id),w=await Dr(g),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(w.exists()){const{calendarEventId:b}=w.data();_=await fetch(`${v}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)})}else if(_=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)}),_.ok){const b=await _.json();await nn(g,{calendarEventId:b.id,assignmentId:c.id,updatedAt:sp()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const cI=f.createContext(void 0);function x7(){return Math.random().toString(36).substring(2,15)}async function FS(t,e,n,r){var a;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const w=await u.json();g=w,p=((a=w.error)==null?void 0:a.message)||w.message||p,console.error("API Error Response:",w)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),m=n(h);s.push(...m),i=r(h)}while(i);return s}async function w7(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,a=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([FS(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),FS(t,a,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,w;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(w=p.message)!=null&&w.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),m=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",w=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:w,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...m]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function b7({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=et(),{toast:i}=Yi(),[a,l]=f.useState(()=>{if(!e)return[];const z=Zn.get(`courses_${e.uid}`);if(z)return z;const B=localStorage.getItem("classroom_courses");return B?JSON.parse(B):[]}),[c,u]=f.useState(()=>{if(!e)return[];const z=localStorage.getItem("classroom_assignments");return z?JSON.parse(z):[]}),[h,m]=f.useState(()=>{const z=localStorage.getItem("classroom_materials");return z?JSON.parse(z):[]}),[p,g]=f.useState(()=>{const z=localStorage.getItem("classroom_notes");return z?new Map(JSON.parse(z)):new Map}),[w,v]=f.useState(()=>e&&Zn.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,b]=f.useState(!1),[x,S]=f.useState(()=>{const z=localStorage.getItem("classroom_lastSyncedAt");return z?new Date(z):null}),[j,D]=f.useState(null),[M,E]=f.useState(!1),[C,T]=f.useState(!1);f.useEffect(()=>{!s&&!e&&(l([]),u([]),m([]),g(new Map),S(null),E(!1),Zn.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const k=f.useCallback(async(z=!1)=>{if(!e)return;let B=n;if(!B)try{await r()&&(B=localStorage.getItem("google_access_token"))}catch(Q){console.error(Q)}if(!B){D("Session expired. Please sign in again.");return}b(!0),D(null);try{const Q=await LS.fetchCourses(B,e.uid);l(de=>JSON.stringify(de)!==JSON.stringify(Q)?Q:de);const re=await LS.fetchAssignmentsParallel(B,Q);u(re),S(new Date),Promise.all(Q.map(de=>w7(B,de.classroomId,de.name,e.uid,()=>T(!0)))).then(de=>{const se=de.flat();m(se)}),v7(re,B,e.uid,i).catch(de=>console.warn(de)),p7.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",re,Q).catch(console.warn)}catch(Q){console.error("Sync Error",Q),D(Q.message||"Failed to sync"),z||i({variant:"destructive",title:"Sync Failed",description:Q.message})}finally{b(!1),v(!1)}},[e,n,r,i]);f.useEffect(()=>{!e||!n||!M&&!_&&(E(!0),k(!0))},[e,n,M,_,k]),f.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(a))},[a]),f.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(h))},[h]),f.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(p.entries())))},[p]),f.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(c))},[c]),f.useEffect(()=>{x&&localStorage.setItem("classroom_lastSyncedAt",x.toISOString())},[x]);const I=f.useCallback((z,B)=>{u(Q=>Q.map(re=>re.id===z?{...re,userStatus:B}:re))},[]),P=f.useCallback((z,B,Q=!1)=>{const re={id:x7(),userId:(e==null?void 0:e.uid)||"",assignmentId:z,content:B,isImportant:Q,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(de=>{const se=new Map(de),ae=se.get(z)||[];return se.set(z,[...ae,re]),se})},[e]),R=f.useCallback((z,B,Q)=>{g(re=>{const de=new Map(re);for(const[se,ae]of Array.from(de.entries())){const V=ae.findIndex(U=>U.id===z);if(V!==-1){const U=[...ae];U[V]={...U[V],content:B,isImportant:Q??U[V].isImportant,updatedAt:new Date().toISOString()},de.set(se,U);break}}return de})},[]),O=f.useCallback((z,B)=>{g(Q=>{const re=new Map(Q),de=re.get(B)||[];return re.set(B,de.filter(se=>se.id!==z)),re})},[]),ie=f.useCallback(()=>{const z=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return c.forEach(B=>{let Q=B.systemStatus;B.userStatus==="in_progress"&&Q!=="submitted"&&Q!=="graded"&&(Q="in_progress");const re=z.find(de=>de.id===Q);re&&re.assignments.push(B)}),z.forEach(B=>{B.assignments.sort((Q,re)=>Q.dueDate?re.dueDate?new Date(Q.dueDate).getTime()-new Date(re.dueDate).getTime():-1:1)}),z},[c]),te=f.useCallback(()=>{const z=new Date,B=new Date(z);B.setDate(B.getDate()+3);const Q=new Date(z);Q.setDate(Q.getDate()+7);const re=c.filter(G=>G.systemStatus!=="graded"&&G.systemStatus!=="submitted"),de=c.filter(G=>{if(!G.dueDate||G.systemStatus==="graded"||G.systemStatus==="submitted")return!1;const ee=new Date(G.dueDate);return ee>=z&&ee<=B}),se=c.filter(G=>{if(!G.dueDate||G.systemStatus==="graded"||G.systemStatus==="submitted")return!1;const ee=new Date(G.dueDate);return ee>=z&&ee<=Q}),ae=c.filter(G=>G.systemStatus==="overdue"),V=[],U=new Date,Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let G=0;G<7;G++){const ee=new Date(U);ee.setDate(ee.getDate()+G);const ye=ee.toISOString().split("T")[0],Ee=c.filter(tt=>tt.dueDate&&tt.dueDate.startsWith(ye)).length;V.push({day:Z[ee.getDay()],count:Ee,isToday:G===0})}const W=[...re].filter(G=>G.dueDate).sort((G,ee)=>new Date(G.dueDate).getTime()-new Date(ee.dueDate).getTime()).slice(0,5);return{totalActive:re.length,upcoming3Days:de.length,upcoming7Days:se.length,overdue:ae.length,weeklyWorkload:V,nextActions:W}},[c]),J=f.useCallback(z=>{let B=[...c];z!=null&&z.courseId&&(B=B.filter(se=>se.courseId===z.courseId)),z!=null&&z.status&&(B=B.filter(se=>se.systemStatus===z.status)),B.sort((se,ae)=>se.dueDate?ae.dueDate?new Date(se.dueDate).getTime()-new Date(ae.dueDate).getTime():-1:1);const Q=new Map,re=new Date,de=new Date(re);return de.setDate(de.getDate()+1),B.forEach(se=>{if(!se.dueDate)return;const ae=se.dueDate.split("T")[0],V=new Date(se.dueDate);let U=ae===re.toISOString().split("T")[0]?"Today":ae===de.toISOString().split("T")[0]?"Tomorrow":V.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});Q.has(ae)||Q.set(ae,{date:ae,dateLabel:U,assignments:[]}),Q.get(ae).assignments.push(se)}),Array.from(Q.values())},[c]),L=f.useCallback(z=>c.find(B=>B.id===z),[c]),q=f.useCallback(z=>p.get(z)||[],[p]);return o.jsx(cI.Provider,{value:{courses:a,assignments:c,notes:p,isLoading:w,isSyncing:_,lastSyncedAt:x,error:j,syncClassroom:k,updateAssignmentStatus:I,addNote:P,updateNote:R,deleteNote:O,getPipelineColumns:ie,getDashboardMetrics:te,getTimelineGroups:J,getAssignmentById:L,getNotesForAssignment:q,materials:h,reauthRequired:C},children:t})}function _n(){const t=f.useContext(cI);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const kg=768;function ip(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${kg-1}px)`),r=()=>{e(window.innerWidth<kg)};return n.addEventListener("change",r),e(window.innerWidth<kg),()=>n.removeEventListener("change",r)},[]),!!t}var rw="Avatar",[_7,qG]=qn(rw),[S7,uI]=_7(rw),dI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=f.useState("idle");return o.jsx(S7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(ge.span,{...r,ref:e})})});dI.displayName=rw;var hI="AvatarImage",fI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=uI(hI,n),l=E7(r,i),c=pt(u=>{s(u),a.onImageLoadingStatusChange(u)});return _t(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(ge.img,{...i,ref:e,src:r}):null});fI.displayName=hI;var mI="AvatarFallback",pI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=uI(mI,n),[a,l]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(ge.span,{...s,ref:e}):null});pI.displayName=mI;function zS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function E7(t,{referrerPolicy:e,crossOrigin:n}){const r=T7(),s=f.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=f.useState(()=>zS(i,t));return _t(()=>{l(zS(i,t))},[i,t]),_t(()=>{const c=m=>()=>{l(m)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}function N7(){return()=>{}}function T7(){return f.useSyncExternalStore(N7,()=>!0,()=>!1)}var gI=dI,yI=fI,vI=pI;const wr=f.forwardRef(({className:t,...e},n)=>o.jsx(gI,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));wr.displayName=gI.displayName;const br=f.forwardRef(({className:t,...e},n)=>o.jsx(yI,{ref:n,className:$("aspect-square h-full w-full",t),...e}));br.displayName=yI.displayName;const _r=f.forwardRef(({className:t,...e},n)=>o.jsx(vI,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));_r.displayName=vI.displayName;const C7=[{path:"/dashboard",label:"Dashboard",icon:LC},{path:"/pipeline",label:"Pipeline",icon:zC},{path:"/leaderboard",label:"Leaderboard",icon:Pu},{path:"/clans",label:"Clans",icon:Ac},{path:"/timeline",label:"Timeline",icon:Ji},{path:"/attendance",label:"Attendance",icon:WC},{path:"/notes",label:"Notes",icon:Io}];function k7({mobileOpen:t,onMobileClose:e}){var h,m;const[n]=hm(),r=ip(),{user:s,signOut:i}=et(),{theme:a,toggleTheme:l}=nw(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((m=s==null?void 0:s.email)==null?void 0:m[0].toUpperCase())||"U",u=()=>o.jsxs("div",{className:"flex flex-col h-full bg-background",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&o.jsx("button",{className:"ml-auto",onClick:e,children:o.jsx(Ds,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(wr,{className:"h-8 w-8",children:[o.jsx(br,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{className:"text-xs",children:c})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),C7.map(p=>{const g=n===p.path,w=p.icon;return o.jsxs(Cn,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(w,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),o.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(zx,{className:"w-4 h-4 mr-3"}):o.jsx(xm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(Cn,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[o.jsx(Fx,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:o.jsx(u,{})}),r&&t&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const ws=f.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ws.displayName="Input";const sw=Au("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ce=f.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?KM:"button";return o.jsx(a,{className:$(sw({variant:e,size:n,className:t})),ref:i,...s})});ce.displayName="Button";var jg=0;function iw(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??US()),document.body.insertAdjacentElement("beforeend",t[1]??US()),jg++,()=>{jg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jg--}},[])}function US(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ig="focusScope.autoFocusOnMount",Ag="focusScope.autoFocusOnUnmount",$S={bubbles:!1,cancelable:!0},j7="FocusScope",op=f.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=f.useState(null),u=pt(s),h=pt(i),m=f.useRef(null),p=je(e,v=>c(v)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let v=function(S){if(g.paused||!l)return;const j=S.target;l.contains(j)?m.current=j:si(m.current,{select:!0})},_=function(S){if(g.paused||!l)return;const j=S.relatedTarget;j!==null&&(l.contains(j)||si(m.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&si(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,g.paused]),f.useEffect(()=>{if(l){HS.add(g);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Ig,$S);l.addEventListener(Ig,u),l.dispatchEvent(b),b.defaultPrevented||(I7(M7(xI(l)),{select:!0}),document.activeElement===v&&si(l))}return()=>{l.removeEventListener(Ig,u),setTimeout(()=>{const b=new CustomEvent(Ag,$S);l.addEventListener(Ag,h),l.dispatchEvent(b),b.defaultPrevented||si(v??document.body,{select:!0}),l.removeEventListener(Ag,h),HS.remove(g)},0)}}},[l,u,h,g]);const w=f.useCallback(v=>{if(!n&&!r||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(_&&b){const x=v.currentTarget,[S,j]=A7(x);S&&j?!v.shiftKey&&b===j?(v.preventDefault(),n&&si(S,{select:!0})):v.shiftKey&&b===S&&(v.preventDefault(),n&&si(j,{select:!0})):b===x&&v.preventDefault()}},[n,r,g.paused]);return o.jsx(ge.div,{tabIndex:-1,...a,ref:p,onKeyDown:w})});op.displayName=j7;function I7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(si(r,{select:e}),document.activeElement!==n)return}function A7(t){const e=xI(t),n=BS(e,t),r=BS(e.reverse(),t);return[n,r]}function xI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function BS(t,e){for(const n of t)if(!R7(n,{upTo:e}))return n}function R7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function P7(t){return t instanceof HTMLInputElement&&"select"in t}function si(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&P7(t)&&e&&t.select()}}var HS=D7();function D7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=WS(t,e),t.unshift(e)},remove(e){var n;t=WS(t,e),(n=t[0])==null||n.resume()}}}function WS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function M7(t){return t.filter(e=>e.tagName!=="A")}var O7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},sa=new WeakMap,Yd=new WeakMap,Jd={},Rg=0,wI=function(t){return t&&(t.host||wI(t.parentNode))},L7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=wI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},V7=function(t,e,n,r){var s=L7(e,Array.isArray(t)?t:[t]);Jd[n]||(Jd[n]=new WeakMap);var i=Jd[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),w=g!==null&&g!=="false",v=(sa.get(p)||0)+1,_=(i.get(p)||0)+1;sa.set(p,v),i.set(p,_),a.push(p),v===1&&w&&Yd.set(p,!0),_===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),Rg++,function(){a.forEach(function(m){var p=sa.get(m)-1,g=i.get(m)-1;sa.set(m,p),i.set(m,g),p||(Yd.has(m)||m.removeAttribute(r),Yd.delete(m)),g||m.removeAttribute(n)}),Rg--,Rg||(sa=new WeakMap,sa=new WeakMap,Yd=new WeakMap,Jd={})}},ow=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=O7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),V7(r,s,n,"aria-hidden")):function(){return null}},Yr=function(){return Yr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yr.apply(this,arguments)};function bI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function F7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ih="right-scroll-bar-position",Ah="width-before-scroll-bar",z7="with-scroll-bars-hidden",U7="--removed-body-scroll-bar-size";function Pg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function $7(t,e){var n=f.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var B7=typeof window<"u"?f.useLayoutEffect:f.useEffect,qS=new WeakMap;function H7(t,e){var n=$7(null,function(r){return t.forEach(function(s){return Pg(s,r)})});return B7(function(){var r=qS.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Pg(l,null)}),i.forEach(function(l){s.has(l)||Pg(l,a)})}qS.set(n,t)},[t]),n}function W7(t){return t}function q7(t,e){e===void 0&&(e=W7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return s}function G7(t){t===void 0&&(t={});var e=q7(null);return e.options=Yr({async:!0,ssr:!1},t),e}var _I=function(t){var e=t.sideCar,n=bI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Yr({},n))};_I.isSideCarExport=!0;function K7(t,e){return t.useMedium(e),_I}var SI=G7(),Dg=function(){},ap=f.forwardRef(function(t,e){var n=f.useRef(null),r=f.useState({onScrollCapture:Dg,onWheelCapture:Dg,onTouchMoveCapture:Dg}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,m=t.shards,p=t.sideCar,g=t.noIsolation,w=t.inert,v=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,x=t.gapMode,S=bI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,D=H7([n,e]),M=Yr(Yr({},S),s);return f.createElement(f.Fragment,null,h&&f.createElement(j,{sideCar:SI,removeScrollBar:u,shards:m,noIsolation:g,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),a?f.cloneElement(f.Children.only(l),Yr(Yr({},M),{ref:D})):f.createElement(b,Yr({},M,{className:c,ref:D}),l))});ap.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ap.classNames={fullWidth:Ah,zeroRight:Ih};var Q7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Q7();return e&&t.setAttribute("nonce",e),t}function Y7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function J7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Z7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=X7())&&(Y7(e,n),J7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},e$=function(){var t=Z7();return function(e,n){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EI=function(){var t=e$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},t$={left:0,top:0,right:0,gap:0},Mg=function(t){return parseInt(t||"",10)||0},n$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Mg(n),Mg(r),Mg(s)]},r$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return t$;var e=n$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},s$=EI(),Fa="data-scroll-locked",i$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(z7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Fa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ih,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ah,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ih," .").concat(Ih,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ah," .").concat(Ah,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fa,`] {
    `).concat(U7,": ").concat(l,`px;
  }
`)},GS=function(){var t=parseInt(document.body.getAttribute(Fa)||"0",10);return isFinite(t)?t:0},o$=function(){f.useEffect(function(){return document.body.setAttribute(Fa,(GS()+1).toString()),function(){var t=GS()-1;t<=0?document.body.removeAttribute(Fa):document.body.setAttribute(Fa,t.toString())}},[])},a$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;o$();var i=f.useMemo(function(){return r$(s)},[s]);return f.createElement(s$,{styles:i$(i,!e,s,n?"":"!important")})},bv=!1;if(typeof window<"u")try{var Zd=Object.defineProperty({},"passive",{get:function(){return bv=!0,!0}});window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{bv=!1}var ia=bv?{passive:!1}:!1,l$=function(t){return t.tagName==="TEXTAREA"},NI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!l$(t)&&n[e]==="visible")},c$=function(t){return NI(t,"overflowY")},u$=function(t){return NI(t,"overflowX")},KS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=TI(t,r);if(s){var i=CI(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},d$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},h$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},TI=function(t,e){return t==="v"?c$(e):u$(e)},CI=function(t,e){return t==="v"?d$(e):h$(e)},f$=function(t,e){return t==="h"&&e==="rtl"?-1:1},m$=function(t,e,n,r,s){var i=f$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),u=!1,h=a>0,m=0,p=0;do{var g=CI(t,l),w=g[0],v=g[1],_=g[2],b=v-_-i*w;(w||b)&&TI(t,l)&&(m+=b,p+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(m)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},eh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},QS=function(t){return[t.deltaX,t.deltaY]},XS=function(t){return t&&"current"in t?t.current:t},p$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},g$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},y$=0,oa=[];function v$(t){var e=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(y$++)[0],i=f.useState(EI)[0],a=f.useRef(t);f.useEffect(function(){a.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=F7([t.lockRef.current],(t.shards||[]).map(XS),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var b=eh(v),x=n.current,S="deltaX"in v?v.deltaX:x[0]-b[0],j="deltaY"in v?v.deltaY:x[1]-b[1],D,M=v.target,E=Math.abs(S)>Math.abs(j)?"h":"v";if("touches"in v&&E==="h"&&M.type==="range")return!1;var C=KS(E,M);if(!C)return!0;if(C?D=E:(D=E==="v"?"h":"v",C=KS(E,M)),!C)return!1;if(!r.current&&"changedTouches"in v&&(S||j)&&(r.current=D),!D)return!0;var T=r.current||D;return m$(T,_,v,T==="h"?S:j,!0)},[]),c=f.useCallback(function(v){var _=v;if(!(!oa.length||oa[oa.length-1]!==i)){var b="deltaY"in _?QS(_):eh(_),x=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&p$(D.delta,b)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var S=(a.current.shards||[]).map(XS).filter(Boolean).filter(function(D){return D.contains(_.target)}),j=S.length>0?l(_,S[0]):!a.current.noIsolation;j&&_.cancelable&&_.preventDefault()}}},[]),u=f.useCallback(function(v,_,b,x){var S={name:v,delta:_,target:b,should:x,shadowParent:x$(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(j){return j!==S})},1)},[]),h=f.useCallback(function(v){n.current=eh(v),r.current=void 0},[]),m=f.useCallback(function(v){u(v.type,QS(v),v.target,l(v,t.lockRef.current))},[]),p=f.useCallback(function(v){u(v.type,eh(v),v.target,l(v,t.lockRef.current))},[]);f.useEffect(function(){return oa.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ia),document.addEventListener("touchmove",c,ia),document.addEventListener("touchstart",h,ia),function(){oa=oa.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,ia),document.removeEventListener("touchmove",c,ia),document.removeEventListener("touchstart",h,ia)}},[]);var g=t.removeScrollBar,w=t.inert;return f.createElement(f.Fragment,null,w?f.createElement(i,{styles:g$(s)}):null,g?f.createElement(a$,{gapMode:t.gapMode}):null)}function x$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const w$=K7(SI,v$);var lp=f.forwardRef(function(t,e){return f.createElement(ap,Yr({},t,{ref:e,sideCar:w$}))});lp.classNames=ap.classNames;var aw="Popover",[kI,GG]=qn(aw,[jl]),Yu=jl(),[b$,to]=kI(aw),jI=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=Yu(e),c=f.useRef(null),[u,h]=f.useState(!1),[m=!1,p]=Ps({prop:r,defaultProp:s,onChange:i});return o.jsx(Jx,{...l,children:o.jsx(b$,{scope:e,contentId:ts(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>h(!0),[]),onCustomAnchorRemove:f.useCallback(()=>h(!1),[]),modal:a,children:n})})};jI.displayName=aw;var II="PopoverAnchor",_$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=to(II,n),i=Yu(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Sm,{...i,...r,ref:e})});_$.displayName=II;var AI="PopoverTrigger",RI=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=to(AI,n),i=Yu(n),a=je(e,s.triggerRef),l=o.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":LI(s.open),...r,ref:a,onClick:me(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Sm,{asChild:!0,...i,children:l})});RI.displayName=AI;var lw="PopoverPortal",[S$,E$]=kI(lw,{forceMount:void 0}),PI=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=to(lw,e);return o.jsx(S$,{scope:e,forceMount:n,children:o.jsx(In,{present:n||i.open,children:o.jsx(Nl,{asChild:!0,container:s,children:r})})})};PI.displayName=lw;var xl="PopoverContent",DI=f.forwardRef((t,e)=>{const n=E$(xl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=to(xl,t.__scopePopover);return o.jsx(In,{present:r||i.open,children:i.modal?o.jsx(T$,{...s,ref:e}):o.jsx(C$,{...s,ref:e})})});DI.displayName=xl;var N$=Fo("PopoverContent.RemoveScroll"),T$=f.forwardRef((t,e)=>{const n=to(xl,t.__scopePopover),r=f.useRef(null),s=je(e,r),i=f.useRef(!1);return f.useEffect(()=>{const a=r.current;if(a)return ow(a)},[]),o.jsx(lp,{as:N$,allowPinchZoom:!0,children:o.jsx(MI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:me(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),C$=f.forwardRef((t,e)=>{const n=to(xl,t.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(MI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MI=f.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...m}=t,p=to(xl,n),g=Yu(n);return iw(),o.jsx(op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(El,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(Zx,{"data-state":LI(p.open),role:"dialog",id:p.contentId,...g,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),OI="PopoverClose",k$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=to(OI,n);return o.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});k$.displayName=OI;var j$="PopoverArrow",I$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yu(n);return o.jsx(e0,{...s,...r,ref:e})});I$.displayName=j$;function LI(t){return t?"open":"closed"}var A$=jI,R$=RI,P$=PI,VI=DI;const D$=A$,M$=R$,FI=f.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>o.jsx(P$,{children:o.jsx(VI,{ref:s,align:e,sideOffset:n,className:$("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));FI.displayName=VI.displayName;var O$=f.createContext(void 0);function cp(t){const e=f.useContext(O$);return t||e||"ltr"}function _v(t,[e,n]){return Math.min(n,Math.max(e,t))}function L$(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var cw="ScrollArea",[zI,KG]=qn(cw),[V$,lr]=zI(cw),UI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[l,c]=f.useState(null),[u,h]=f.useState(null),[m,p]=f.useState(null),[g,w]=f.useState(null),[v,_]=f.useState(null),[b,x]=f.useState(0),[S,j]=f.useState(0),[D,M]=f.useState(!1),[E,C]=f.useState(!1),T=je(e,I=>c(I)),k=cp(s);return o.jsx(V$,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:m,onContentChange:p,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:D,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:E,onScrollbarYEnabledChange:C,onCornerWidthChange:x,onCornerHeightChange:j,children:o.jsx(ge.div,{dir:k,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});UI.displayName=cw;var $I="ScrollAreaViewport",BI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=lr($I,n),l=f.useRef(null),c=je(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BI.displayName=$I;var fs="ScrollAreaScrollbar",uw=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(F$,{...r,ref:e,forceMount:n}):s.type==="scroll"?o.jsx(z$,{...r,ref:e,forceMount:n}):s.type==="auto"?o.jsx(HI,{...r,ref:e,forceMount:n}):s.type==="always"?o.jsx(dw,{...r,ref:e}):null});uw.displayName=fs;var F$=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),[i,a]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(In,{present:n||i,children:o.jsx(HI,{"data-state":i?"visible":"hidden",...r,ref:e})})}),z$=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),i=t.orientation==="horizontal",a=dp(()=>c("SCROLL_END"),100),[l,c]=L$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let m=u[h];const p=()=>{const g=u[h];m!==g&&(c("SCROLL"),a()),m=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),o.jsx(In,{present:n||l!=="hidden",children:o.jsx(dw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),HI=f.forwardRef((t,e)=>{const n=lr(fs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=f.useState(!1),l=t.orientation==="horizontal",c=dp(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:h)}},10);return wl(n.viewport,c),wl(n.content,c),o.jsx(In,{present:r||i,children:o.jsx(dw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),dw=f.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=lr(fs,t.__scopeScrollArea),i=f.useRef(null),a=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=QI(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function m(p,g){return q$(p,a.current,l,g)}return n==="horizontal"?o.jsx(U$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=YS(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx($$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=YS(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),U$=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=lr(fs,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=je(e,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(qI,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":up(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),YI(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Of(a.paddingLeft),paddingEnd:Of(a.paddingRight)}})}})}),$$=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=lr(fs,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=je(e,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(qI,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":up(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),YI(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Of(a.paddingTop),paddingEnd:Of(a.paddingBottom)}})}})}),[B$,WI]=zI(fs),qI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:m,...p}=t,g=lr(fs,n),[w,v]=f.useState(null),_=je(e,T=>v(T)),b=f.useRef(null),x=f.useRef(""),S=g.viewport,j=r.content-r.viewport,D=pt(h),M=pt(c),E=dp(m,10);function C(T){if(b.current){const k=T.clientX-b.current.left,I=T.clientY-b.current.top;u({x:k,y:I})}}return f.useEffect(()=>{const T=k=>{const I=k.target;(w==null?void 0:w.contains(I))&&D(k,j)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[S,w,j,D]),f.useEffect(M,[r,M]),wl(w,E),wl(g.content,E),o.jsx(B$,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:pt(i),onThumbPointerUp:pt(a),onThumbPositionChange:M,onThumbPointerDown:pt(l),children:o.jsx(ge.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:me(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),b.current=w.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:me(t.onPointerMove,C),onPointerUp:me(t.onPointerUp,T=>{const k=T.target;k.hasPointerCapture(T.pointerId)&&k.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),Mf="ScrollAreaThumb",GI=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=WI(Mf,t.__scopeScrollArea);return o.jsx(In,{present:n||s.hasThumb,children:o.jsx(H$,{ref:e,...r})})}),H$=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=lr(Mf,n),a=WI(Mf,n),{onThumbPositionChange:l}=a,c=je(e,m=>a.onThumbChange(m)),u=f.useRef(void 0),h=dp(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=i.viewport;if(m){const p=()=>{if(h(),!u.current){const g=G$(m,l);u.current=g,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[i.viewport,h,l]),o.jsx(ge.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(t.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),w=m.clientX-g.left,v=m.clientY-g.top;a.onThumbPointerDown({x:w,y:v})}),onPointerUp:me(t.onPointerUp,a.onThumbPointerUp)})});GI.displayName=Mf;var hw="ScrollAreaCorner",KI=f.forwardRef((t,e)=>{const n=lr(hw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(W$,{...t,ref:e}):null});KI.displayName=hw;var W$=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=lr(hw,n),[i,a]=f.useState(0),[l,c]=f.useState(0),u=!!(i&&l);return wl(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),wl(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?o.jsx(ge.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Of(t){return t?parseInt(t,10):0}function QI(t,e){const n=t/e;return isNaN(n)?0:n}function up(t){const e=QI(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function q$(t,e,n,r="ltr"){const s=up(n),i=s/2,a=e||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return XI([c,u],m)(t)}function YS(t,e,n="ltr"){const r=up(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=_v(t,c);return XI([0,a],[0,l])(u)}function XI(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function YI(t,e){return t>0&&t<e}var G$=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function dp(t,e){const n=pt(t),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function wl(t,e){const n=pt(e);_t(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var JI=UI,K$=BI,Q$=KI;const ZI=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(JI,{ref:r,className:$("relative overflow-hidden",t),...n,children:[o.jsx(K$,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(eA,{}),o.jsx(Q$,{})]}));ZI.displayName=JI.displayName;const eA=f.forwardRef(({className:t,orientation:e="vertical",...n},r)=>o.jsx(uw,{ref:r,orientation:e,className:$("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:o.jsx(GI,{className:"relative flex-1 rounded-full bg-border"})}));eA.displayName=uw.displayName;const X$=Au("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function jn({className:t,variant:e,...n}){return o.jsx("div",{className:$(X$({variant:e}),t),...n})}function Y$(){const{user:t}=et(),[e,n]=f.useState([]),[r,s]=f.useState(0),[i,a]=f.useState(!1),[l,c]=f.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));f.useEffect(()=>{if(!t)return;const g=Pi(os(_e,"activities"),Po("createdAt","desc"),Va(20)),w=ir(g,v=>{const b=v.docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.userId!==t.uid);n(b);const x=b.filter(S=>new Date(S.createdAt).getTime()>l).length;s(x)});return()=>w()},[t,l]);const u=g=>{if(a(g),g){const w=Date.now();c(w),localStorage.setItem("lastNotificationRead",w.toString()),s(0)}},h=g=>{const w=new Date(g),_=(new Date().getTime()-w.getTime())/1e3;return _<60?"Just now":_<3600?`${Math.floor(_/60)}m`:_<86400?`${Math.floor(_/3600)}h`:_<604800?`${Math.floor(_/86400)}d`:`${Math.floor(_/604800)}w`},m=g=>{switch(g){case"badge_earned":return o.jsx(Pu,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return o.jsx(Ru,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return o.jsx(Mx,{className:"h-3 w-3 text-white"});default:return o.jsx(xh,{className:"h-3 w-3 text-white"})}},p=g=>{switch(g){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return o.jsxs(D$,{open:i,onOpenChange:u,children:[o.jsx(M$,{asChild:!0,children:o.jsxs(ce,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[o.jsx(xh,{className:"h-5 w-5"}),r>0&&o.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),o.jsxs(FI,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),r>0&&o.jsxs(jn,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[r," new"]})]}),o.jsx(ZI,{className:"h-[300px]",children:e.length>0?o.jsx("div",{className:"flex flex-col",children:e.map(g=>{var w;return o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(wr,{className:"h-10 w-10 border border-border",children:[o.jsx(br,{src:g.userAvatar||void 0}),o.jsx(_r,{children:((w=g.userName)==null?void 0:w[0])||"?"})]}),o.jsx("div",{className:$("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",p(g.type)),children:m(g.type)})]}),o.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:g.userName})," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:g.content.replace(g.userName,"").trim()})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:h(g.createdAt)})]}),new Date(g.createdAt).getTime()>l&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},g.id)})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[o.jsx("div",{className:"p-3 bg-muted rounded-full",children:o.jsx(xh,{className:"h-6 w-6 opacity-20"})}),o.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function J$({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=_n(),[r]=hm(),[s,i]=f.useState(""),a=ip(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return o.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center flex-1",children:[a&&o.jsx(ce,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:o.jsx(BC,{className:"h-5 w-5"})}),o.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),o.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(o3,{className:"h-4 w-4 text-muted-foreground"})}),o.jsx(ws,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),o.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[o.jsx(Y$,{}),o.jsx(ce,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:$(n&&"animate-spin"),title:"Sync with Classroom",children:o.jsx(ol,{className:"w-5 h-5"})})]})]})}var tA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},JS=Ce.createContext&&Ce.createContext(tA),Z$=["attr","size","title"];function eB(t,e){if(t==null)return{};var n=tB(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(this,arguments)}function ZS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZS(Object(n),!0).forEach(function(r){nB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nB(t,e,n){return e=rB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rB(t){var e=sB(t,"string");return typeof e=="symbol"?e:e+""}function sB(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nA(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,Vf({key:n},e.attr),nA(e.child)))}function fw(t){return e=>Ce.createElement(iB,Lf({attr:Vf({},t.attr)},e),nA(t.child))}function iB(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=eB(t,Z$),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",Lf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:Vf(Vf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ce.createElement("title",null,i),t.children)};return JS!==void 0?Ce.createElement(JS.Consumer,null,n=>e(n)):e(tA)}function rA(t){return fw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function oB(t){return fw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const aB=[{icon:oB,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:t3,title:"Kanban Board",description:"Visual assignment tracking."},{icon:FO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:zO,title:"Performance Metrics",description:"Grade & workload analytics."}];function lB(){const{signInWithGoogle:t,loading:e,error:n}=et();return o.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),o.jsx("header",{className:"px-10 py-8 z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",o.jsx("br",{}),o.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),o.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),o.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:aB.map(r=>o.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[o.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),o.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),o.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),o.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),o.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[o.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),o.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[o.jsx(Bn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",o.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),o.jsxs(ce,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[o.jsx(rA,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[o.jsx(Bn,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:n})]})]}),o.jsx("div",{className:"pt-8 border-t border-zinc-100",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(a3,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),o.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),o.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[o.jsx("span",{children:" 2024 Trace Inc."}),o.jsxs("div",{className:"flex gap-6",children:[o.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function cB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const hp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function mw(t){return"nodeType"in t}function pn(t){var e,n;return t?Vl(t)?t:mw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function pw(t){const{Document:e}=pn(t);return t instanceof e}function Ju(t){return Vl(t)?!1:t instanceof pn(t).HTMLElement}function sA(t){return t instanceof pn(t).SVGElement}function Fl(t){return t?Vl(t)?t.document:mw(t)?pw(t)?t:Ju(t)||sA(t)?t.ownerDocument:document:document:document}const Or=hp?f.useLayoutEffect:f.useEffect;function fp(t){const e=f.useRef(t);return Or(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function uB(){const t=f.useRef(null),e=f.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function vu(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return Or(()=>{n.current!==t&&(n.current=t)},e),n}function Zu(t,e){const n=f.useRef();return f.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Ff(t){const e=fp(t),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function zf(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let Og={};function ed(t,e){return f.useMemo(()=>{if(e)return e;const n=Og[t]==null?0:Og[t]+1;return Og[t]=n,t+"-"+n},[t,e])}function iA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const za=iA(1),Uf=iA(-1);function dB(t){return"clientX"in t&&"clientY"in t}function mp(t){if(!t)return!1;const{KeyboardEvent:e}=pn(t.target);return e&&t instanceof e}function hB(t){if(!t)return!1;const{TouchEvent:e}=pn(t.target);return e&&t instanceof e}function $f(t){if(hB(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return dB(t)?{x:t.clientX,y:t.clientY}:null}const Gi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Gi.Translate.toString(t),Gi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),eE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function fB(t){return t.matches(eE)?t:t.querySelector(eE)}const mB={display:"none"};function pB(t){let{id:e,value:n}=t;return Ce.createElement("div",{id:e,style:mB},n)}function gB(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function yB(){const[t,e]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const oA=f.createContext(null);function vB(t){const e=f.useContext(oA);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function xB(){const[t]=f.useState(()=>new Set),e=f.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[f.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const wB={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bB={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function _B(t){let{announcements:e=bB,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=wB}=t;const{announce:i,announcement:a}=yB(),l=ed("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),vB(f.useMemo(()=>({onDragStart(m){let{active:p}=m;i(e.onDragStart({active:p}))},onDragMove(m){let{active:p,over:g}=m;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(m){let{active:p,over:g}=m;i(e.onDragOver({active:p,over:g}))},onDragEnd(m){let{active:p,over:g}=m;i(e.onDragEnd({active:p,over:g}))},onDragCancel(m){let{active:p,over:g}=m;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Ce.createElement(Ce.Fragment,null,Ce.createElement(pB,{id:r,value:s.draggable}),Ce.createElement(gB,{id:l,announcement:a}));return n?nr.createPortal(h,n):h}var kt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(kt||(kt={}));function Bf(){}function tE(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function SB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Lr=Object.freeze({x:0,y:0});function EB(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function NB(t,e){const n=$f(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function TB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function CB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function kB(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function nE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const jB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=nE(e,e.left,e.top),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=EB(nE(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(TB)};function IB(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=a*l,m=h/(c+u-h);return Number(m.toFixed(4))}return 0}const AB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=IB(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(CB)};function RB(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function aA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Lr}function PB(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const DB=PB(1);function lA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function MB(t,e,n){const r=lA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:l}=r,c=t.left-a-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:h,height:m,top:u,right:c+h,bottom:u+m,left:c}}const OB={ignoreTransform:!1};function zl(t,e){e===void 0&&(e=OB);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=pn(t).getComputedStyle(t);u&&(n=MB(n,u,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:c}}function rE(t){return zl(t,{ignoreTransform:!0})}function LB(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function VB(t,e){return e===void 0&&(e=pn(t).getComputedStyle(t)),e.position==="fixed"}function FB(t,e){e===void 0&&(e=pn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function gw(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(pw(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Ju(s)||sA(s)||n.includes(s))return n;const i=pn(t).getComputedStyle(s);return s!==t&&FB(s,i)&&n.push(s),VB(s,i)?n:r(s.parentNode)}return t?r(t):n}function cA(t){const[e]=gw(t,1);return e??null}function Lg(t){return!hp||!t?null:Vl(t)?t:mw(t)?pw(t)||t===Fl(t).scrollingElement?window:Ju(t)?t:null:null}function uA(t){return Vl(t)?t.scrollX:t.scrollLeft}function dA(t){return Vl(t)?t.scrollY:t.scrollTop}function Sv(t){return{x:uA(t),y:dA(t)}}var Dt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Dt||(Dt={}));function hA(t){return!hp||!t?!1:t===document.scrollingElement}function fA(t){const e={x:0,y:0},n=hA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const zB={x:.2,y:.2};function UB(t,e,n,r,s){let{top:i,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=zB);const{isTop:u,isBottom:h,isLeft:m,isRight:p}=fA(t),g={x:0,y:0},w={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(g.y=Dt.Backward,w.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&c>=e.bottom-v.height&&(g.y=Dt.Forward,w.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!p&&l>=e.right-v.width?(g.x=Dt.Forward,w.x=r*Math.abs((e.right-v.width-l)/v.width)):!m&&a<=e.left+v.width&&(g.x=Dt.Backward,w.x=r*Math.abs((e.left+v.width-a)/v.width)),{direction:g,speed:w}}function $B(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function mA(t){return t.reduce((e,n)=>za(e,Sv(n)),Lr)}function BB(t){return t.reduce((e,n)=>e+uA(n),0)}function HB(t){return t.reduce((e,n)=>e+dA(n),0)}function pA(t,e){if(e===void 0&&(e=zl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);cA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const WB=[["x",["left","right"],BB],["y",["top","bottom"],HB]];class yw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=gw(n),s=mA(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of WB)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function qB(t){const{EventTarget:e}=pn(t);return t instanceof e?t:Fl(t)}function Vg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Xn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Xn||(Xn={}));function sE(t){t.preventDefault()}function GB(t){t.stopPropagation()}var Ue;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ue||(Ue={}));const gA={start:[Ue.Space,Ue.Enter],cancel:[Ue.Esc],end:[Ue.Space,Ue.Enter,Ue.Tab]},KB=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ue.Right:return{...n,x:n.x+25};case Ue.Left:return{...n,x:n.x-25};case Ue.Down:return{...n,y:n.y+25};case Ue.Up:return{...n,y:n.y-25}}};class vw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Fc(Fl(n)),this.windowListeners=new Fc(pn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xn.Resize,this.handleCancel),this.windowListeners.add(Xn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&pA(r),n(Lr)}handleKeyDown(e){if(mp(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=gA,coordinateGetter:a=KB,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Lr;this.referenceCoordinates||(this.referenceCoordinates=h);const m=a(e,{active:n,context:r.current,currentCoordinates:h});if(m){const p=Uf(m,h),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=e.code,{isTop:b,isRight:x,isLeft:S,isBottom:j,maxScroll:D,minScroll:M}=fA(v),E=$B(v),C={x:Math.min(_===Ue.Right?E.right-E.width/2:E.right,Math.max(_===Ue.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(_===Ue.Down?E.bottom-E.height/2:E.bottom,Math.max(_===Ue.Down?E.top:E.top+E.height/2,m.y))},T=_===Ue.Right&&!x||_===Ue.Left&&!S,k=_===Ue.Down&&!j||_===Ue.Up&&!b;if(T&&C.x!==m.x){const I=v.scrollLeft+p.x,P=_===Ue.Right&&I<=D.x||_===Ue.Left&&I>=M.x;if(P&&!p.y){v.scrollTo({left:I,behavior:l});return}P?g.x=v.scrollLeft-I:g.x=_===Ue.Right?v.scrollLeft-D.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:l});break}else if(k&&C.y!==m.y){const I=v.scrollTop+p.y,P=_===Ue.Down&&I<=D.y||_===Ue.Up&&I>=M.y;if(P&&!p.x){v.scrollTo({top:I,behavior:l});return}P?g.y=v.scrollTop-I:g.y=_===Ue.Down?v.scrollTop-D.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,za(Uf(m,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=gA,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function iE(t){return!!(t&&"distance"in t)}function oE(t){return!!(t&&"delay"in t)}class xw{constructor(e,n,r){var s;r===void 0&&(r=qB(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=Fl(a),this.documentListeners=new Fc(this.document),this.listeners=new Fc(r),this.windowListeners=new Fc(pn(a)),this.initialCoordinates=(s=$f(i))!=null?s:Lr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Xn.Resize,this.handleCancel),this.windowListeners.add(Xn.DragStart,sE),this.windowListeners.add(Xn.VisibilityChange,this.handleCancel),this.windowListeners.add(Xn.ContextMenu,sE),this.documentListeners.add(Xn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(oE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(iE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Xn.Click,GB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=$f(e))!=null?n:Lr,u=Uf(s,c);if(!r&&l){if(iE(l)){if(l.tolerance!=null&&Vg(u,l.tolerance))return this.handleCancel();if(Vg(u,l.distance))return this.handleStart()}if(oE(l)&&Vg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ue.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const QB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ww extends xw{constructor(e){const{event:n}=e,r=Fl(n.target);super(e,QB,r)}}ww.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const XB={move:{name:"mousemove"},end:{name:"mouseup"}};var Ev;(function(t){t[t.RightClick=2]="RightClick"})(Ev||(Ev={}));class YB extends xw{constructor(e){super(e,XB,Fl(e.event.target))}}YB.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Ev.RightClick?!1:(r==null||r({event:n}),!0)}}];const Fg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class JB extends xw{constructor(e){super(e,Fg)}static setup(){return window.addEventListener(Fg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Fg.move.name,e)};function e(){}}}JB.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var zc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(zc||(zc={}));var Hf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Hf||(Hf={}));function ZB(t){let{acceleration:e,activator:n=zc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=Hf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:m,threshold:p}=t;const g=tH({delta:m,disabled:!i}),[w,v]=uB(),_=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),x=f.useMemo(()=>{switch(n){case zc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case zc.DraggableRect:return s}},[n,s,c]),S=f.useRef(null),j=f.useCallback(()=>{const M=S.current;if(!M)return;const E=_.current.x*b.current.x,C=_.current.y*b.current.y;M.scrollBy(E,C)},[]),D=f.useMemo(()=>l===Hf.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!i||!u.length||!x){v();return}for(const M of D){if((r==null?void 0:r(M))===!1)continue;const E=u.indexOf(M),C=h[E];if(!C)continue;const{direction:T,speed:k}=UB(M,C,x,e,p);for(const I of["x","y"])g[I][T[I]]||(k[I]=0,T[I]=0);if(k.x>0||k.y>0){v(),S.current=M,w(j,a),_.current=k,b.current=T;return}}_.current={x:0,y:0},b.current={x:0,y:0},v()},[e,j,r,v,i,a,JSON.stringify(x),JSON.stringify(g),w,u,D,h,JSON.stringify(p)])}const eH={x:{[Dt.Backward]:!1,[Dt.Forward]:!1},y:{[Dt.Backward]:!1,[Dt.Forward]:!1}};function tH(t){let{delta:e,disabled:n}=t;const r=zf(e);return Zu(s=>{if(n||!r||!s)return eH;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Dt.Backward]:s.x[Dt.Backward]||i.x===-1,[Dt.Forward]:s.x[Dt.Forward]||i.x===1},y:{[Dt.Backward]:s.y[Dt.Backward]||i.y===-1,[Dt.Forward]:s.y[Dt.Forward]||i.y===1}}},[n,e,r])}function nH(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Zu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function rH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var xu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(xu||(xu={}));var Nv;(function(t){t.Optimized="optimized"})(Nv||(Nv={}));const aE=new Map;function sH(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,h=f.useRef(t),m=_(),p=vu(m),g=f.useCallback(function(b){b===void 0&&(b=[]),!p.current&&a(x=>x===null?b:x.concat(b.filter(S=>!x.includes(S))))},[p]),w=f.useRef(null),v=Zu(b=>{if(m&&!n)return aE;if(!b||b===aE||h.current!==t||i!=null){const x=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const j=S.node.current,D=j?new yw(c(j),j):null;S.rect.current=D,D&&x.set(S.id,D)}return x}return b},[t,i,n,m,c]);return f.useEffect(()=>{h.current=t},[t]),f.useEffect(()=>{m||g()},[n,m]),f.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),f.useEffect(()=>{m||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},l))},[l,m,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case xu.Always:return!1;case xu.BeforeDragging:return n;default:return!n}}}function bw(t,e){return Zu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function iH(t,e){return bw(t,e)}function oH(t){let{callback:e,disabled:n}=t;const r=fp(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function pp(t){let{callback:e,disabled:n}=t;const r=fp(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function aH(t){return new yw(zl(t),t)}function lE(t,e,n){e===void 0&&(e=aH);const[r,s]=f.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=oH({callback(c){if(t)for(const u of c){const{type:h,target:m}=u;if(h==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=pp({callback:i});return Or(()=>{i(),t?(l==null||l.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[t]),r}function lH(t){const e=bw(t);return aA(t,e)}const cE=[];function cH(t){const e=f.useRef(t),n=Zu(r=>t?r&&r!==cE&&t&&e.current&&t.parentNode===e.current.parentNode?r:gw(t):cE,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function uH(t){const[e,n]=f.useState(null),r=f.useRef(t),s=f.useCallback(i=>{const a=Lg(i.target);a&&n(l=>l?(l.set(a,Sv(a)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=r.current;if(t!==i){a(i);const l=t.map(c=>{const u=Lg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Sv(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const u=Lg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>za(i,a),Lr):mA(t):Lr,[t,e])}function uE(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const r=t!==Lr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Uf(t,n.current):Lr}function dH(t){f.useEffect(()=>{if(!hp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function hH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function yA(t){return f.useMemo(()=>t?LB(t):null,[t])}const dE=[];function fH(t,e){e===void 0&&(e=zl);const[n]=t,r=yA(n?pn(n):null),[s,i]=f.useState(dE);function a(){i(()=>t.length?t.map(c=>hA(c)?r:new yw(e(c),c)):dE)}const l=pp({callback:a});return Or(()=>{l==null||l.disconnect(),a(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function vA(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ju(e)?e:t}function mH(t){let{measure:e}=t;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:h}of u)if(Ju(h)){r(m=>{const p=e(h);return m?{...m,width:p.width,height:p.height}:p});break}},[e]),i=pp({callback:s}),a=f.useCallback(u=>{const h=vA(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Ff(a);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const pH=[{sensor:ww,options:{}},{sensor:vw,options:{}}],gH={current:{}},Rh={draggable:{measure:rE},droppable:{measure:rE,strategy:xu.WhileDragging,frequency:Nv.Optimized},dragOverlay:{measure:zl}};class Uc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const yH={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Uc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Rh,measureDroppableContainers:Bf,windowRect:null,measuringScheduled:!1},xA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bf,draggableNodes:new Map,over:null,measureDroppableContainers:Bf},td=f.createContext(xA),wA=f.createContext(yH);function vH(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Uc}}}function xH(t,e){switch(e.type){case kt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case kt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case kt.DragEnd:case kt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case kt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Uc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case kt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Uc(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case kt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Uc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function wH(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(td),i=zf(r),a=zf(n==null?void 0:n.id);return f.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!mp(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const m=fB(h);if(m){m.focus();break}}})}},[r,e,s,a,i]),null}function bA(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function bH(t){return f.useMemo(()=>({draggable:{...Rh.draggable,...t==null?void 0:t.draggable},droppable:{...Rh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Rh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function _H(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=f.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Or(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),m=aA(h,r);if(a||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=cA(u);p&&p.scrollBy({top:m.y,left:m.x})}},[e,a,l,r,n])}const gp=f.createContext({...Lr,scaleX:1,scaleY:1});var ai;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ai||(ai={}));const SH=f.memo(function(e){var n,r,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:h=pH,collisionDetection:m=AB,measuring:p,modifiers:g,...w}=e;const v=f.useReducer(xH,void 0,vH),[_,b]=v,[x,S]=xB(),[j,D]=f.useState(ai.Uninitialized),M=j===ai.Initialized,{draggable:{active:E,nodes:C,translate:T},droppable:{containers:k}}=_,I=E!=null?C.get(E):null,P=f.useRef({initial:null,translated:null}),R=f.useMemo(()=>{var Ve;return E!=null?{id:E,data:(Ve=I==null?void 0:I.data)!=null?Ve:gH,rect:P}:null},[E,I]),O=f.useRef(null),[ie,te]=f.useState(null),[J,L]=f.useState(null),q=vu(w,Object.values(w)),z=ed("DndDescribedBy",a),B=f.useMemo(()=>k.getEnabled(),[k]),Q=bH(p),{droppableRects:re,measureDroppableContainers:de,measuringScheduled:se}=sH(B,{dragging:M,dependencies:[T.x,T.y],config:Q.droppable}),ae=nH(C,E),V=f.useMemo(()=>J?$f(J):null,[J]),U=hd(),Z=iH(ae,Q.draggable.measure);_H({activeNode:E!=null?C.get(E):null,config:U.layoutShiftCompensation,initialRect:Z,measure:Q.draggable.measure});const W=lE(ae,Q.draggable.measure,Z),G=lE(ae?ae.parentElement:null),ee=f.useRef({activatorEvent:null,active:null,activeNode:ae,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=k.getNodeFor((n=ee.current.over)==null?void 0:n.id),Ee=mH({measure:Q.dragOverlay.measure}),tt=(r=Ee.nodeRef.current)!=null?r:ae,Be=M?(s=Ee.rect)!=null?s:W:null,qe=!!(Ee.nodeRef.current&&Ee.rect),Ft=lH(qe?null:W),ze=yA(tt?pn(tt):null),Oe=cH(M?ye??ae:null),cr=fH(Oe),Ws=bA(g,{transform:{x:T.x-Ft.x,y:T.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:J,active:R,activeNodeRect:W,containerNodeRect:G,draggingNodeRect:Be,over:ee.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Oe,scrollableAncestorRects:cr,windowRect:ze}),Bl=V?za(V,T):null,ad=uH(Oe),so=uE(ad),ld=uE(ad,[W]),ms=za(Ws,so),Fr=Be?DB(Be,Ws):null,io=R&&Fr?m({active:R,collisionRect:Fr,droppableRects:re,droppableContainers:B,pointerCoordinates:Bl}):null,cd=kB(io,"id"),[ur,Hl]=f.useState(null),oo=qe?Ws:za(Ws,ld),Wl=RB(oo,(i=ur==null?void 0:ur.rect)!=null?i:null,W),ao=f.useRef(null),zr=f.useCallback((Ve,qt)=>{let{sensor:St,options:gn}=qt;if(O.current==null)return;const yn=C.get(O.current);if(!yn)return;const on=Ve.nativeEvent,zt=new St({active:O.current,activeNode:yn,event:on,options:gn,context:ee,onAbort(Et){if(!C.get(Et))return;const{onDragAbort:Rn}=q.current,Gn={id:Et};Rn==null||Rn(Gn),x({type:"onDragAbort",event:Gn})},onPending(Et,An,Rn,Gn){if(!C.get(Et))return;const{onDragPending:dr}=q.current,Ur={id:Et,constraint:An,initialCoordinates:Rn,offset:Gn};dr==null||dr(Ur),x({type:"onDragPending",event:Ur})},onStart(Et){const An=O.current;if(An==null)return;const Rn=C.get(An);if(!Rn)return;const{onDragStart:Gn}=q.current,ps={activatorEvent:on,active:{id:An,data:Rn.data,rect:P}};nr.unstable_batchedUpdates(()=>{Gn==null||Gn(ps),D(ai.Initializing),b({type:kt.DragStart,initialCoordinates:Et,active:An}),x({type:"onDragStart",event:ps}),te(ao.current),L(on)})},onMove(Et){b({type:kt.DragMove,coordinates:Et})},onEnd:qs(kt.DragEnd),onCancel:qs(kt.DragCancel)});ao.current=zt;function qs(Et){return async function(){const{active:Rn,collisions:Gn,over:ps,scrollAdjustedTranslate:dr}=ee.current;let Ur=null;if(Rn&&dr){const{cancelDrop:vn}=q.current;Ur={activatorEvent:on,active:Rn,collisions:Gn,delta:dr,over:ps},Et===kt.DragEnd&&typeof vn=="function"&&await Promise.resolve(vn(Ur))&&(Et=kt.DragCancel)}O.current=null,nr.unstable_batchedUpdates(()=>{b({type:Et}),D(ai.Uninitialized),Hl(null),te(null),L(null),ao.current=null;const vn=Et===kt.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const ea=q.current[vn];ea==null||ea(Ur),x({type:vn,event:Ur})}})}}},[C]),ud=f.useCallback((Ve,qt)=>(St,gn)=>{const yn=St.nativeEvent,on=C.get(gn);if(O.current!==null||!on||yn.dndKit||yn.defaultPrevented)return;const zt={active:on};Ve(St,qt.options,zt)===!0&&(yn.dndKit={capturedBy:qt.sensor},O.current=gn,zr(St,qt))},[C,zr]),lo=rH(h,ud);dH(h),Or(()=>{W&&j===ai.Initializing&&D(ai.Initialized)},[W,j]),f.useEffect(()=>{const{onDragMove:Ve}=q.current,{active:qt,activatorEvent:St,collisions:gn,over:yn}=ee.current;if(!qt||!St)return;const on={active:qt,activatorEvent:St,collisions:gn,delta:{x:ms.x,y:ms.y},over:yn};nr.unstable_batchedUpdates(()=>{Ve==null||Ve(on),x({type:"onDragMove",event:on})})},[ms.x,ms.y]),f.useEffect(()=>{const{active:Ve,activatorEvent:qt,collisions:St,droppableContainers:gn,scrollAdjustedTranslate:yn}=ee.current;if(!Ve||O.current==null||!qt||!yn)return;const{onDragOver:on}=q.current,zt=gn.get(cd),qs=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Et={active:Ve,activatorEvent:qt,collisions:St,delta:{x:yn.x,y:yn.y},over:qs};nr.unstable_batchedUpdates(()=>{Hl(qs),on==null||on(Et),x({type:"onDragOver",event:Et})})},[cd]),Or(()=>{ee.current={activatorEvent:J,active:R,activeNode:ae,collisionRect:Fr,collisions:io,droppableRects:re,draggableNodes:C,draggingNode:tt,draggingNodeRect:Be,droppableContainers:k,over:ur,scrollableAncestors:Oe,scrollAdjustedTranslate:ms},P.current={initial:Be,translated:Fr}},[R,ae,io,Fr,C,tt,Be,re,k,ur,Oe,ms]),ZB({...U,delta:T,draggingRect:Fr,pointerCoordinates:Bl,scrollableAncestors:Oe,scrollableAncestorRects:cr});const dd=f.useMemo(()=>({active:R,activeNode:ae,activeNodeRect:W,activatorEvent:J,collisions:io,containerNodeRect:G,dragOverlay:Ee,draggableNodes:C,droppableContainers:k,droppableRects:re,over:ur,measureDroppableContainers:de,scrollableAncestors:Oe,scrollableAncestorRects:cr,measuringConfiguration:Q,measuringScheduled:se,windowRect:ze}),[R,ae,W,J,io,G,Ee,C,k,re,ur,de,Oe,cr,Q,se,ze]),co=f.useMemo(()=>({activatorEvent:J,activators:lo,active:R,activeNodeRect:W,ariaDescribedById:{draggable:z},dispatch:b,draggableNodes:C,over:ur,measureDroppableContainers:de}),[J,lo,R,W,b,z,C,ur,de]);return Ce.createElement(oA.Provider,{value:S},Ce.createElement(td.Provider,{value:co},Ce.createElement(wA.Provider,{value:dd},Ce.createElement(gp.Provider,{value:Wl},u)),Ce.createElement(wH,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ce.createElement(_B,{...l,hiddenTextDescribedById:z}));function hd(){const Ve=(ie==null?void 0:ie.autoScrollEnabled)===!1,qt=typeof c=="object"?c.enabled===!1:c===!1,St=M&&!Ve&&!qt;return typeof c=="object"?{...c,enabled:St}:{enabled:St}}}),EH=f.createContext(null),hE="button",NH="Draggable";function TH(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ed(NH),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:m,over:p}=f.useContext(td),{role:g=hE,roleDescription:w="draggable",tabIndex:v=0}=s??{},_=(c==null?void 0:c.id)===e,b=f.useContext(_?gp:EH),[x,S]=Ff(),[j,D]=Ff(),M=hH(a,e),E=vu(n);Or(()=>(m.set(e,{id:e,key:i,node:x,activatorNode:j,data:E}),()=>{const T=m.get(e);T&&T.key===i&&m.delete(e)}),[m,e]);const C=f.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&g===hE?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,g,v,_,w,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:_,listeners:r?void 0:M,node:x,over:p,setNodeRef:S,setActivatorNodeRef:D,transform:b}}function _A(){return f.useContext(wA)}const CH="Droppable",kH={timeout:25};function SA(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ed(CH),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(td),h=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),g=f.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...kH,...s},b=vu(v??r),x=f.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},_)},[_]),S=pp({callback:x,disabled:w||!a}),j=f.useCallback((C,T)=>{S&&(T&&(S.unobserve(T),m.current=!1),C&&S.observe(C))},[S]),[D,M]=Ff(j),E=vu(e);return f.useEffect(()=>{!S||!D.current||(S.disconnect(),m.current=!1,S.observe(D.current))},[D,S]),f.useEffect(()=>(l({type:kt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:p,data:E}}),()=>l({type:kt.UnregisterDroppable,key:i,id:r})),[r]),f.useEffect(()=>{n!==h.current.disabled&&(l({type:kt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:p,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:M}}function jH(t){let{animation:e,children:n}=t;const[r,s]=f.useState(null),[i,a]=f.useState(null),l=zf(n);return!n&&!r&&l&&s(l),Or(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ce.createElement(Ce.Fragment,null,n,r?f.cloneElement(r,{ref:a}):null)}const IH={x:0,y:0,scaleX:1,scaleY:1};function AH(t){let{children:e}=t;return Ce.createElement(td.Provider,{value:xA},Ce.createElement(gp.Provider,{value:IH},e))}const RH={position:"fixed",touchAction:"none"},PH=t=>mp(t)?"transform 250ms ease":void 0,DH=f.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:l,style:c,transform:u,transition:h=PH}=t;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...RH,width:l.width,height:l.height,top:l.top,left:l.left,transform:Gi.Transform.toString(m),transformOrigin:s&&r?NB(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ce.createElement(n,{className:a,style:p,ref:e},i)}),MH=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:a}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},OH=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Gi.Transform.toString(e)},{transform:Gi.Transform.toString(n)}]},LH={duration:250,easing:"ease",keyframes:OH,sideEffects:MH({styles:{active:{opacity:"0"}}})};function VH(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return fp((i,a)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=vA(a);if(!u)return;const{transform:h}=pn(a).getComputedStyle(a),m=lA(h);if(!m)return;const p=typeof e=="function"?e:FH(e);return pA(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function FH(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...LH,...t};return i=>{let{active:a,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},m={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...m},g=s({...u,active:a,dragOverlay:l,transform:{initial:c,final:p}}),[w]=g,v=g[g.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const _=r==null?void 0:r({active:a,dragOverlay:l,...u}),b=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{_==null||_(),x()}})}}let fE=0;function zH(t){return f.useMemo(()=>{if(t!=null)return fE++,fE},[t])}const UH=Ce.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggableNodes:w,droppableContainers:v,dragOverlay:_,over:b,measuringConfiguration:x,scrollableAncestors:S,scrollableAncestorRects:j,windowRect:D}=_A(),M=f.useContext(gp),E=zH(m==null?void 0:m.id),C=bA(a,{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:_.rect,over:b,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:j,transform:M,windowRect:D}),T=bw(p),k=VH({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:x}),I=T?_.setRef:void 0;return Ce.createElement(AH,null,Ce.createElement(jH,{animation:k},m&&E?Ce.createElement(DH,{key:E,id:m.id,ref:I,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:T,style:{zIndex:u,...s},transform:C},n):null))});function EA(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function $H(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function th(t){return t!==null&&t>=0}function BH(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function HH(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const NA=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=EA(e,r,n),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},nh={scaleX:1,scaleY:1},WH=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...nh}:null}const c=qH(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-c,...nh}:s<n&&s>=a?{x:0,y:l.height+c,...nh}:{x:0,y:0,...nh}};function qH(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const TA="Sortable",CA=Ce.createContext({activeIndex:-1,containerId:TA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:NA,disabled:{draggable:!1,droppable:!1}});function GH(t){let{children:e,id:n,items:r,strategy:s=NA,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=_A(),m=ed(TA,n),p=l.rect!==null,g=f.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),w=a!=null,v=a?g.indexOf(a.id):-1,_=u?g.indexOf(u.id):-1,b=f.useRef(g),x=!BH(g,b.current),S=_!==-1&&v===-1||x,j=HH(i);Or(()=>{x&&w&&h(g)},[x,g,w,h]),f.useEffect(()=>{b.current=g},[g]);const D=f.useMemo(()=>({activeIndex:v,containerId:m,disabled:j,disableTransforms:S,items:g,overIndex:_,useDragOverlay:p,sortedRects:$H(g,c),strategy:s}),[v,m,j.draggable,j.droppable,S,g,_,c,p,s]);return Ce.createElement(CA.Provider,{value:D},e)}const KH=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return EA(n,r,s).indexOf(e)},QH=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===a?!1:n?!0:a!==s&&e===c},XH={duration:200,easing:"ease"},kA="transform",YH=Gi.Transition.toString({property:kA,duration:0,easing:"linear"}),JH={roleDescription:"sortable"};function ZH(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=f.useState(null),l=f.useRef(n);return Or(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=zl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),f.useEffect(()=>{i&&a(null)},[i]),i}function eW(t){let{animateLayoutChanges:e=QH,attributes:n,disabled:r,data:s,getNewIndex:i=KH,id:a,strategy:l,resizeObserverConfig:c,transition:u=XH}=t;const{items:h,containerId:m,activeIndex:p,disabled:g,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:b,strategy:x}=f.useContext(CA),S=tW(r,g),j=h.indexOf(a),D=f.useMemo(()=>({sortable:{containerId:m,index:j,items:h},...s}),[m,s,j,h]),M=f.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:E,node:C,isOver:T,setNodeRef:k}=SA({id:a,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:I,activatorEvent:P,activeNodeRect:R,attributes:O,setNodeRef:ie,listeners:te,isDragging:J,over:L,setActivatorNodeRef:q,transform:z}=TH({id:a,data:D,attributes:{...JH,...n},disabled:S.draggable}),B=cB(k,ie),Q=!!I,re=Q&&!w&&th(p)&&th(_),de=!b&&J,se=de&&re?z:null,V=re?se??(l??x)({rects:v,activeNodeRect:R,activeIndex:p,overIndex:_,index:j}):null,U=th(p)&&th(_)?i({id:a,items:h,activeIndex:p,overIndex:_}):j,Z=I==null?void 0:I.id,W=f.useRef({activeId:Z,items:h,newIndex:U,containerId:m}),G=h!==W.current.items,ee=e({active:I,containerId:m,isDragging:J,isSorting:Q,id:a,index:j,items:h,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:u,wasDragging:W.current.activeId!=null}),ye=ZH({disabled:!ee,index:j,node:C,rect:E});return f.useEffect(()=>{Q&&W.current.newIndex!==U&&(W.current.newIndex=U),m!==W.current.containerId&&(W.current.containerId=m),h!==W.current.items&&(W.current.items=h)},[Q,U,m,h]),f.useEffect(()=>{if(Z===W.current.activeId)return;if(Z!=null&&W.current.activeId==null){W.current.activeId=Z;return}const tt=setTimeout(()=>{W.current.activeId=Z},50);return()=>clearTimeout(tt)},[Z]),{active:I,activeIndex:p,attributes:O,data:D,rect:E,index:j,newIndex:U,items:h,isOver:T,isSorting:Q,isDragging:J,listeners:te,node:C,overIndex:_,over:L,setNodeRef:B,setActivatorNodeRef:q,setDroppableNodeRef:k,setDraggableNodeRef:ie,transform:ye??V,transition:Ee()};function Ee(){if(ye||G&&W.current.newIndex===j)return YH;if(!(de&&!mp(P)||!u)&&(Q||ee))return Gi.Transition.toString({...u,property:kA})}}function tW(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Ue.Down,Ue.Right,Ue.Up,Ue.Left;function $e({className:t,...e}){return o.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const ke=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));ke.displayName="Card";const Ge=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));Ge.displayName="CardHeader";const Xe=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));Xe.displayName="CardTitle";const cn=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));cn.displayName="CardDescription";const Fe=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));Fe.displayName="CardContent";const _w=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));_w.displayName="CardFooter";function jA(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],a=r.toISOString().split("T")[0];return s===i?"Today":s===a?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function IA(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function AA({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:a,transform:l,transition:c,isDragging:u}=eW({id:t.id}),h={transform:Gi.Transform.toString(l),transition:c},m=IA(t.dueDate),p=m!==null&&m<=1&&m>=0,g=t.systemStatus==="overdue"||m!==null&&m<0;return o.jsx(ke,{ref:a,style:h,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",g&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(jn,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),o.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:w=>w.stopPropagation(),children:o.jsx(YO,{className:"h-4 w-4 text-muted-foreground"})})]}),o.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Ji,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:$(g&&"text-destructive",p&&!g&&"text-foreground font-medium"),children:jA(t.dueDate)}),g&&o.jsx(Bn,{className:"h-3.5 w-3.5 text-destructive"}),p&&!g&&o.jsx(FC,{className:"h-3.5 w-3.5 text-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(il,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(il,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Submitted"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:n&&o.jsx(Io,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function nW({assignment:t,onClick:e}){const n=IA(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[o.jsx("span",{className:$("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:jA(t.dueDate)}),r&&o.jsx(Bn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const Sw=f.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Sw.displayName="Textarea";var rW="Separator",mE="horizontal",sW=["horizontal","vertical"],RA=f.forwardRef((t,e)=>{const{decorative:n,orientation:r=mE,...s}=t,i=iW(r)?r:mE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(ge.div,{"data-orientation":i,...l,...s,ref:e})});RA.displayName=rW;function iW(t){return sW.includes(t)}var PA=RA;const Er=f.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>o.jsx(PA,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Er.displayName=PA.displayName;var Ew="Dialog",[DA,MA]=qn(Ew),[oW,Vr]=DA(Ew),OA=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=f.useRef(null),c=f.useRef(null),[u=!1,h]=Ps({prop:r,defaultProp:s,onChange:i});return o.jsx(oW,{scope:e,triggerRef:l,contentRef:c,contentId:ts(),titleId:ts(),descriptionId:ts(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:a,children:n})};OA.displayName=Ew;var LA="DialogTrigger",VA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vr(LA,n),i=je(e,s.triggerRef);return o.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Cw(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});VA.displayName=LA;var Nw="DialogPortal",[aW,FA]=DA(Nw,{forceMount:void 0}),zA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Vr(Nw,e);return o.jsx(aW,{scope:e,forceMount:n,children:f.Children.map(r,a=>o.jsx(In,{present:n||i.open,children:o.jsx(Nl,{asChild:!0,container:s,children:a})}))})};zA.displayName=Nw;var Wf="DialogOverlay",UA=f.forwardRef((t,e)=>{const n=FA(Wf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Vr(Wf,t.__scopeDialog);return i.modal?o.jsx(In,{present:r||i.open,children:o.jsx(cW,{...s,ref:e})}):null});UA.displayName=Wf;var lW=Fo("DialogOverlay.RemoveScroll"),cW=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vr(Wf,n);return o.jsx(lp,{as:lW,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(ge.div,{"data-state":Cw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),qo="DialogContent",$A=f.forwardRef((t,e)=>{const n=FA(qo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Vr(qo,t.__scopeDialog);return o.jsx(In,{present:r||i.open,children:i.modal?o.jsx(uW,{...s,ref:e}):o.jsx(dW,{...s,ref:e})})});$A.displayName=qo;var uW=f.forwardRef((t,e)=>{const n=Vr(qo,t.__scopeDialog),r=f.useRef(null),s=je(e,n.contentRef,r);return f.useEffect(()=>{const i=r.current;if(i)return ow(i)},[]),o.jsx(BA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),dW=f.forwardRef((t,e)=>{const n=Vr(qo,t.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(BA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),BA=f.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=Vr(qo,n),c=f.useRef(null),u=je(e,c);return iw(),o.jsxs(o.Fragment,{children:[o.jsx(op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(El,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Cw(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(fW,{titleId:l.titleId}),o.jsx(pW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Tw="DialogTitle",HA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vr(Tw,n);return o.jsx(ge.h2,{id:s.titleId,...r,ref:e})});HA.displayName=Tw;var WA="DialogDescription",qA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vr(WA,n);return o.jsx(ge.p,{id:s.descriptionId,...r,ref:e})});qA.displayName=WA;var GA="DialogClose",KA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vr(GA,n);return o.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});KA.displayName=GA;function Cw(t){return t?"open":"closed"}var QA="DialogTitleWarning",[hW,XA]=qM(QA,{contentName:qo,titleName:Tw,docsSlug:"dialog"}),fW=({titleId:t})=>{const e=XA(QA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},mW="DialogDescriptionWarning",pW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XA(mW).contentName}}.`;return f.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},kw=OA,YA=VA,jw=zA,nd=UA,rd=$A,sd=HA,id=qA,yp=KA;const gW=kw,yW=jw,JA=f.forwardRef(({className:t,...e},n)=>o.jsx(nd,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));JA.displayName=nd.displayName;const vW=Au("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ZA=f.forwardRef(({side:t="right",className:e,children:n,...r},s)=>o.jsxs(yW,{children:[o.jsx(JA,{}),o.jsxs(rd,{ref:s,className:$(vW({side:t}),e),...r,children:[n,o.jsxs(yp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Ds,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ZA.displayName=rd.displayName;const eR=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});eR.displayName="SheetHeader";const tR=f.forwardRef(({className:t,...e},n)=>o.jsx(sd,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));tR.displayName=sd.displayName;const xW=f.forwardRef(({className:t,...e},n)=>o.jsx(id,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));xW.displayName=id.displayName;function wW(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function bW(t){return t?` at ${t}`:""}function _W({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),o.jsx("div",{className:"space-y-4",children:r.map((s,i)=>o.jsxs("div",{className:"flex items-start gap-3 relative",children:[o.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&o.jsx(il,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function SW({note:t,onUpdate:e,onDelete:n}){const[r,s]=f.useState(!1),[i,a]=f.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return o.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&o.jsx(uf,{className:"h-3.5 w-3.5 fill-current text-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:o.jsx(uf,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:o.jsx(r3,{className:"h-3.5 w-3.5"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:o.jsx(u3,{className:"h-3.5 w-3.5"})})]})]}),r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Sw,{value:i,onChange:c=>a(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[o.jsx(Vx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function Iw({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:a}=_n(),[l,c]=f.useState(""),[u,h]=f.useState(!1);if(!t)return null;const m=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return o.jsx(gW,{open:e,onOpenChange:n,children:o.jsxs(ZA,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[o.jsx(eR,{className:"space-y-4",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx(jn,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),o.jsx(tR,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:$(p&&"text-destructive"),children:[wW(t.dueDate),bW(t.dueTime)]}),p&&o.jsx(Bn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?o.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):o.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),o.jsx(Er,{}),t.description&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),o.jsx(Er,{})]}),o.jsx(_W,{assignment:t}),o.jsx(Er,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[o.jsx(s3,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Sw,{value:l,onChange:w=>c(w.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[o.jsx(Vx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),m.length>0?o.jsx("div",{className:"space-y-2",children:m.map(w=>o.jsx(SW,{note:w,onUpdate:(v,_)=>i(w.id,v,_),onDelete:()=>a(w.id,t.id)},w.id))}):!u&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&o.jsxs(o.Fragment,{children:[o.jsx(Er,{}),o.jsxs(ce,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[o.jsx(Fy,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function Ul(){const{refreshAccessToken:t,signOut:e}=et(),[n,r]=f.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),o.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:o.jsx(ol,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),o.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),o.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[o.jsx(ce,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?o.jsxs(o.Fragment,{children:[o.jsx(ol,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:"Signing In..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(rA,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),o.jsx(ce,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),o.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[o.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function EW({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:a}=SA({id:t});return o.jsxs("div",{ref:a,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[o.jsx("h3",{className:"text-sm font-medium",children:e}),o.jsx(jn,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),o.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:o.jsx(GH,{items:n.map(l=>l.id),strategy:WH,children:n.length>0?n.map(l=>{var c;return o.jsx(AA,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):o.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function NW(){return o.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx($e,{className:"h-5 w-24"}),o.jsx($e,{className:"h-5 w-8"})]}),o.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>o.jsx($e,{className:"h-32 w-full"},e))})]},t))})}function TW(){var C;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:a,error:l}=_n();et();const[c,u]=f.useState(null),[h,m]=f.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return o.jsx(Ul,{});if(n)return o.jsx(NW,{});const p=f.useRef(null),[g,w]=f.useState(!1),v=f.useRef({x:0,left:0}),_=SB(tE(ww,{activationConstraint:{distance:8}}),tE(vw)),b=t(),x=h?i.find(T=>T.id===h):null,S=T=>{m(T.active.id)},j=T=>{const{active:k,over:I}=T;if(m(null),!I)return;const P=k.id,R=I.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const O=i.find(ie=>ie.id===P);O&&O.systemStatus!==R&&(R==="in_progress"?e(P,"in_progress"):e(P,"backlog"))}},D=T=>{T.button===2&&p.current&&(T.preventDefault(),w(!0),v.current={x:T.pageX,left:p.current.scrollLeft})},M=f.useCallback(T=>{if(!g||!p.current)return;T.preventDefault();const I=(T.pageX-v.current.x)*1.5;p.current.scrollLeft=v.current.left-I},[g]),E=f.useCallback(()=>{w(!1)},[]);return f.useEffect(()=>(g?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",E)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",E)}),[g,M,E]),o.jsxs(o.Fragment,{children:[l&&l.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:T=>{T.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs(SH,{sensors:_,collisionDetection:jB,onDragStart:S,onDragEnd:j,children:[o.jsxs("div",{className:"relative h-full flex flex-col",children:[o.jsx("div",{ref:p,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",g?"cursor-grabbing":"cursor-grab"),onMouseDown:D,onContextMenu:T=>T.preventDefault(),children:b.map(T=>o.jsx(EW,{id:T.id,title:T.title,assignments:T.assignments,onCardClick:u,notes:s},T.id))}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx($y,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),o.jsx(UH,{children:x&&o.jsx(AA,{assignment:x,isDragging:!0,hasNotes:(((C=s.get(x.id))==null?void 0:C.length)||0)>0})})]}),o.jsx(Iw,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function nR(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CW=[" ","Enter","ArrowUp","ArrowDown"],kW=[" ","Enter"],od="Select",[vp,xp,jW]=Ax(od),[$l,QG]=qn(od,[jW,jl]),wp=jl(),[IW,no]=$l(od),[AW,RW]=$l(od),rR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:m,disabled:p,required:g,form:w}=t,v=wp(e),[_,b]=f.useState(null),[x,S]=f.useState(null),[j,D]=f.useState(!1),M=cp(u),[E=!1,C]=Ps({prop:r,defaultProp:s,onChange:i}),[T,k]=Ps({prop:a,defaultProp:l,onChange:c}),I=f.useRef(null),P=_?w||!!_.closest("form"):!0,[R,O]=f.useState(new Set),ie=Array.from(R).map(te=>te.props.value).join(";");return o.jsx(Jx,{...v,children:o.jsxs(IW,{required:g,scope:e,trigger:_,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:j,onValueNodeHasChildrenChange:D,contentId:ts(),value:T,onValueChange:k,open:E,onOpenChange:C,dir:M,triggerPointerDownPosRef:I,disabled:p,children:[o.jsx(vp.Provider,{scope:e,children:o.jsx(AW,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(te=>{O(J=>new Set(J).add(te))},[]),onNativeOptionRemove:f.useCallback(te=>{O(J=>{const L=new Set(J);return L.delete(te),L})},[]),children:n})}),P?o.jsxs(kR,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:m,value:T,onChange:te=>k(te.target.value),disabled:p,form:w,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(R)]},ie):null]})})};rR.displayName=od;var sR="SelectTrigger",iR=f.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=wp(n),a=no(sR,n),l=a.disabled||r,c=je(e,a.onTriggerChange),u=xp(n),h=f.useRef("touch"),[m,p,g]=jR(v=>{const _=u().filter(S=>!S.disabled),b=_.find(S=>S.value===a.value),x=IR(_,v,b);x!==void 0&&a.onValueChange(x.value)}),w=v=>{l||(a.onOpenChange(!0),g()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(Sm,{asChild:!0,...i,children:o.jsx(ge.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":CR(a.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&w(v)}),onPointerDown:me(s.onPointerDown,v=>{h.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:me(s.onKeyDown,v=>{const _=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(_&&v.key===" ")&&CW.includes(v.key)&&(w(),v.preventDefault())})})})});iR.displayName=sR;var oR="SelectValue",aR=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=no(oR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,m=je(e,c.onValueNodeChange);return _t(()=>{u(h)},[u,h]),o.jsx(ge.span,{...l,ref:m,style:{pointerEvents:"none"},children:CR(c.value)?o.jsx(o.Fragment,{children:a}):i})});aR.displayName=oR;var PW="SelectIcon",lR=f.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});lR.displayName=PW;var DW="SelectPortal",cR=t=>o.jsx(Nl,{asChild:!0,...t});cR.displayName=DW;var Go="SelectContent",uR=f.forwardRef((t,e)=>{const n=no(Go,t.__scopeSelect),[r,s]=f.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?nr.createPortal(o.jsx(dR,{scope:t.__scopeSelect,children:o.jsx(vp.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(hR,{...t,ref:e})});uR.displayName=Go;var fr=10,[dR,ro]=$l(Go),MW="SelectContentImpl",OW=Fo("SelectContent.RemoveScroll"),hR=f.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...b}=t,x=no(Go,n),[S,j]=f.useState(null),[D,M]=f.useState(null),E=je(e,V=>j(V)),[C,T]=f.useState(null),[k,I]=f.useState(null),P=xp(n),[R,O]=f.useState(!1),ie=f.useRef(!1);f.useEffect(()=>{if(S)return ow(S)},[S]),iw();const te=f.useCallback(V=>{const[U,...Z]=P().map(ee=>ee.ref.current),[W]=Z.slice(-1),G=document.activeElement;for(const ee of V)if(ee===G||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===U&&D&&(D.scrollTop=0),ee===W&&D&&(D.scrollTop=D.scrollHeight),ee==null||ee.focus(),document.activeElement!==G))return},[P,D]),J=f.useCallback(()=>te([C,S]),[te,C,S]);f.useEffect(()=>{R&&J()},[R,J]);const{onOpenChange:L,triggerPointerDownPosRef:q}=x;f.useEffect(()=>{if(S){let V={x:0,y:0};const U=W=>{var G,ee;V={x:Math.abs(Math.round(W.pageX)-(((G=q.current)==null?void 0:G.x)??0)),y:Math.abs(Math.round(W.pageY)-(((ee=q.current)==null?void 0:ee.y)??0))}},Z=W=>{V.x<=10&&V.y<=10?W.preventDefault():S.contains(W.target)||L(!1),document.removeEventListener("pointermove",U),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",Z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",Z,{capture:!0})}}},[S,L,q]),f.useEffect(()=>{const V=()=>L(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[L]);const[z,B]=jR(V=>{const U=P().filter(G=>!G.disabled),Z=U.find(G=>G.ref.current===document.activeElement),W=IR(U,V,Z);W&&setTimeout(()=>W.ref.current.focus())}),Q=f.useCallback((V,U,Z)=>{const W=!ie.current&&!Z;(x.value!==void 0&&x.value===U||W)&&(T(V),W&&(ie.current=!0))},[x.value]),re=f.useCallback(()=>S==null?void 0:S.focus(),[S]),de=f.useCallback((V,U,Z)=>{const W=!ie.current&&!Z;(x.value!==void 0&&x.value===U||W)&&I(V)},[x.value]),se=r==="popper"?Tv:fR,ae=se===Tv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return o.jsx(dR,{scope:n,content:S,viewport:D,onViewportChange:M,itemRefCallback:Q,selectedItem:C,onItemLeave:re,itemTextRefCallback:de,focusSelectedItem:J,selectedItemText:k,position:r,isPositioned:R,searchRef:z,children:o.jsx(lp,{as:OW,allowPinchZoom:!0,children:o.jsx(op,{asChild:!0,trapped:x.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:me(s,V=>{var U;(U=x.trigger)==null||U.focus({preventScroll:!0}),V.preventDefault()}),children:o.jsx(El,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(se,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:V=>V.preventDefault(),...b,...ae,onPlaced:()=>O(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:me(b.onKeyDown,V=>{const U=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!U&&V.key.length===1&&B(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let W=P().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(V.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const G=V.target,ee=W.indexOf(G);W=W.slice(ee+1)}setTimeout(()=>te(W)),V.preventDefault()}})})})})})})});hR.displayName=MW;var LW="SelectItemAlignedPosition",fR=f.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=no(Go,n),a=ro(Go,n),[l,c]=f.useState(null),[u,h]=f.useState(null),m=je(e,E=>h(E)),p=xp(n),g=f.useRef(!1),w=f.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:b,focusSelectedItem:x}=a,S=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&_&&b){const E=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(i.dir!=="rtl"){const G=k.left-C.left,ee=T.left-G,ye=E.left-ee,Ee=E.width+ye,tt=Math.max(Ee,C.width),Be=window.innerWidth-fr,qe=_v(ee,[fr,Math.max(fr,Be-tt)]);l.style.minWidth=Ee+"px",l.style.left=qe+"px"}else{const G=C.right-k.right,ee=window.innerWidth-T.right-G,ye=window.innerWidth-E.right-ee,Ee=E.width+ye,tt=Math.max(Ee,C.width),Be=window.innerWidth-fr,qe=_v(ee,[fr,Math.max(fr,Be-tt)]);l.style.minWidth=Ee+"px",l.style.right=qe+"px"}const I=p(),P=window.innerHeight-fr*2,R=v.scrollHeight,O=window.getComputedStyle(u),ie=parseInt(O.borderTopWidth,10),te=parseInt(O.paddingTop,10),J=parseInt(O.borderBottomWidth,10),L=parseInt(O.paddingBottom,10),q=ie+te+R+L+J,z=Math.min(_.offsetHeight*5,q),B=window.getComputedStyle(v),Q=parseInt(B.paddingTop,10),re=parseInt(B.paddingBottom,10),de=E.top+E.height/2-fr,se=P-de,ae=_.offsetHeight/2,V=_.offsetTop+ae,U=ie+te+V,Z=q-U;if(U<=de){const G=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const ee=u.clientHeight-v.offsetTop-v.offsetHeight,ye=Math.max(se,ae+(G?re:0)+ee+J),Ee=U+ye;l.style.height=Ee+"px"}else{const G=I.length>0&&_===I[0].ref.current;l.style.top="0px";const ye=Math.max(de,ie+v.offsetTop+(G?Q:0)+ae)+Z;l.style.height=ye+"px",v.scrollTop=U-de+v.offsetTop}l.style.margin=`${fr}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,_,b,i.dir,r]);_t(()=>S(),[S]);const[j,D]=f.useState();_t(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const M=f.useCallback(E=>{E&&w.current===!0&&(S(),x==null||x(),w.current=!1)},[S,x]);return o.jsx(FW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(ge.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});fR.displayName=LW;var VW="SelectPopperPosition",Tv=f.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=fr,...i}=t,a=wp(n);return o.jsx(Zx,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tv.displayName=VW;var[FW,Aw]=$l(Go,{}),Cv="SelectViewport",mR=f.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ro(Cv,n),a=Aw(Cv,n),l=je(e,i.onViewportChange),c=f.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(vp.Slot,{scope:n,children:o.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&m){const g=Math.abs(c.current-h.scrollTop);if(g>0){const w=window.innerHeight-fr*2,v=parseFloat(m.style.minHeight),_=parseFloat(m.style.height),b=Math.max(v,_);if(b<w){const x=b+g,S=Math.min(w,x),j=x-S;m.style.height=S+"px",m.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});mR.displayName=Cv;var pR="SelectGroup",[zW,UW]=$l(pR),$W=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ts();return o.jsx(zW,{scope:n,id:s,children:o.jsx(ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});$W.displayName=pR;var gR="SelectLabel",yR=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=UW(gR,n);return o.jsx(ge.div,{id:s.id,...r,ref:e})});yR.displayName=gR;var qf="SelectItem",[BW,vR]=$l(qf),xR=f.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=no(qf,n),c=ro(qf,n),u=l.value===r,[h,m]=f.useState(i??""),[p,g]=f.useState(!1),w=je(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),v=ts(),_=f.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(BW,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:f.useCallback(x=>{m(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(vp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(ge.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:me(a.onFocus,()=>g(!0)),onBlur:me(a.onBlur,()=>g(!1)),onClick:me(a.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:me(a.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:me(a.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:me(a.onPointerMove,x=>{var S;_.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(a.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:me(a.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(kW.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});xR.displayName=qf;var xc="SelectItemText",wR=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=no(xc,n),l=ro(xc,n),c=vR(xc,n),u=RW(xc,n),[h,m]=f.useState(null),p=je(e,b=>m(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),g=h==null?void 0:h.textContent,w=f.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=u;return _t(()=>(v(w),()=>_(w)),[v,_,w]),o.jsxs(o.Fragment,{children:[o.jsx(ge.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?nr.createPortal(i.children,a.valueNode):null]})});wR.displayName=xc;var bR="SelectItemIndicator",_R=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return vR(bR,n).isSelected?o.jsx(ge.span,{"aria-hidden":!0,...r,ref:e}):null});_R.displayName=bR;var kv="SelectScrollUpButton",SR=f.forwardRef((t,e)=>{const n=ro(kv,t.__scopeSelect),r=Aw(kv,t.__scopeSelect),[s,i]=f.useState(!1),a=je(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(NR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});SR.displayName=kv;var jv="SelectScrollDownButton",ER=f.forwardRef((t,e)=>{const n=ro(jv,t.__scopeSelect),r=Aw(jv,t.__scopeSelect),[s,i]=f.useState(!1),a=je(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(NR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});ER.displayName=jv;var NR=f.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ro("SelectScrollButton",n),a=f.useRef(null),l=xp(n),c=f.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),_t(()=>{var h;const u=l().find(m=>m.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),HW="SelectSeparator",TR=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(ge.div,{"aria-hidden":!0,...r,ref:e})});TR.displayName=HW;var Iv="SelectArrow",WW=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=wp(n),i=no(Iv,n),a=ro(Iv,n);return i.open&&a.position==="popper"?o.jsx(e0,{...s,...r,ref:e}):null});WW.displayName=Iv;function CR(t){return t===""||t===void 0}var kR=f.forwardRef((t,e)=>{const{value:n,...r}=t,s=f.useRef(null),i=je(e,s),a=nR(n);return f.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const m=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(Iu,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});kR.displayName="BubbleSelect";function jR(t){const e=pt(t),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function IR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=qW(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function qW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var GW=rR,AR=iR,KW=aR,QW=lR,XW=cR,RR=uR,YW=mR,PR=yR,DR=xR,JW=wR,ZW=_R,MR=SR,OR=ER,LR=TR;const Gf=GW,Kf=KW,wu=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(AR,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(QW,{asChild:!0,children:o.jsx(VC,{className:"h-4 w-4 opacity-50"})})]}));wu.displayName=AR.displayName;const VR=f.forwardRef(({className:t,...e},n)=>o.jsx(MR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(HO,{className:"h-4 w-4"})}));VR.displayName=MR.displayName;const FR=f.forwardRef(({className:t,...e},n)=>o.jsx(OR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(VC,{className:"h-4 w-4"})}));FR.displayName=OR.displayName;const bu=f.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(XW,{children:o.jsxs(RR,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(VR,{}),o.jsx(YW,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(FR,{})]})}));bu.displayName=RR.displayName;const eq=f.forwardRef(({className:t,...e},n)=>o.jsx(PR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));eq.displayName=PR.displayName;const Ct=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(DR,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ZW,{children:o.jsx(af,{className:"h-4 w-4"})})}),o.jsx(JW,{children:e})]}));Ct.displayName=DR.displayName;const tq=f.forwardRef(({className:t,...e},n)=>o.jsx(LR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));tq.displayName=LR.displayName;function nq(t){return fw({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function rq(){return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx($e,{className:"h-10 w-40"}),o.jsx($e,{className:"h-10 w-40"})]}),[1,2,3].map(t=>o.jsxs("div",{className:"space-y-3",children:[o.jsx($e,{className:"h-6 w-32"}),o.jsx("div",{className:"space-y-2",children:[1,2].map(e=>o.jsx($e,{className:"h-16 w-full"},e))})]},t))]})}const rh={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},sq=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},iq=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},zg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,pE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function oq(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=_n();et();const[a,l]=f.useState(null),[c,u]=f.useState(null),[h,m]=f.useState(null),[p,g]=f.useState("timeline"),[w,v]=f.useState(1),[_,b]=f.useState(!1),[x]=f.useState([]);if(n)return o.jsx(rq,{});const S=f.useMemo(()=>{let T=[...s,...x];return a&&(T=T.filter(k=>k.courseId===a)),c&&(T=T.filter(k=>k.systemStatus===c)),T},[s,x,a,c]),j=()=>{l(null),u(null)},D=a||c,M=()=>{const T=f.useRef(null),[k,I]=f.useState(!1),P=f.useRef({x:0,left:0}),O=60*w,{earliestDate:ie,latestDate:te,initialScrollPosition:J}=f.useMemo(()=>{const V=new Date;V.setHours(0,0,0,0);let U=new Date,Z=new Date;if(S.length>0){const Be=S.flatMap(qe=>{const Ft=[];return qe.dueDate&&Ft.push(new Date(qe.dueDate)),qe.createdAt&&Ft.push(new Date(qe.createdAt)),Ft});Be.length>0&&(U=new Date(Math.min(...Be.map(qe=>qe.getTime()))),Z=new Date(Math.max(...Be.map(qe=>qe.getTime()))))}const W=new Date(U);W.setDate(W.getDate()-30);const G=new Date(Z);G.setDate(G.getDate()+30);let ee=V;const ye=S.filter(Be=>Be.dueDate&&new Date(Be.dueDate)>=V).sort((Be,qe)=>new Date(Be.dueDate).getTime()-new Date(qe.dueDate).getTime());ye.length>0&&(ee=new Date(ye[0].dueDate));const tt=Math.ceil((ee.getTime()-W.getTime())/(1e3*3600*24))*O+O/2-window.innerWidth/2;return{earliestDate:W,latestDate:G,initialScrollPosition:Math.max(0,tt)}},[S,O]),L=f.useMemo(()=>sq(ie,te),[ie,te]);f.useEffect(()=>{T.current&&(T.current.scrollLeft=J)},[J]);const q=V=>{V.button===2&&T.current&&(V.preventDefault(),I(!0),P.current={x:V.pageX,left:T.current.scrollLeft})},z=f.useCallback(V=>{if(!k||!T.current)return;V.preventDefault();const Z=(V.pageX-P.current.x)*1.5;T.current.scrollLeft=P.current.left-Z},[k]),B=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",z),window.addEventListener("mouseup",B)):(window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",B)),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",B)}),[k,z,B]);const[Q,re]=f.useState(!1),[de,se]=f.useState(!1),ae=f.useRef(null);return f.useEffect(()=>{const V=()=>{if(ae.current){const{scrollHeight:Z,clientHeight:W,scrollTop:G}=ae.current;re(Z>W),se(G+W>=Z-10)}};V();const U=ae.current;return U==null||U.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{U==null||U.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[S,_]),o.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[o.jsx("div",{ref:V=>{T.current=V,ae.current=V},className:$("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:q,onContextMenu:V=>V.preventDefault(),children:o.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${L.length*O}px`},children:[o.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:L.map((V,U)=>{const Z=pE(V);return o.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:O},children:[o.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",Z?"text-foreground":"text-muted-foreground"),children:V.toLocaleDateString("en-US",{weekday:"narrow"})}),o.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",Z?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:V.getDate()}),o.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},U)})}),o.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(V=>V.dueDate).length*40)}px`:`${Math.max(400,S.filter(V=>V.dueDate).length*60)}px`},children:[o.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:L.map((V,U)=>{const Z=pE(V);return o.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",Z?"bg-accent/50":""),style:{width:O},children:Z&&o.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},U)})}),o.jsx("div",{className:$("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(V=>V.dueDate).map(V=>{const U=e.find(Ws=>Ws.id===V.courseId),Z=U==null?void 0:U.color,W=V.systemStatus==="submitted"||V.systemStatus==="graded",G=V.createdAt?new Date(V.createdAt):new Date,ee=new Date(V.dueDate),ye=(G.getTime()-ie.getTime())/(1e3*3600*24),Ee=(ee.getTime()-G.getTime())/(1e3*3600*24),tt=Math.max(0,ye*O),Be=Math.max(O,Ee*O),qe={left:`${tt}px`,width:`${Be}px`,minWidth:_?"100px":"140px",backgroundColor:W?void 0:Z,borderColor:W?void 0:Z?"rgba(0,0,0,0.1)":void 0};rh[V.systemStatus]||rh.backlog;const Ft="bg-green-100/80 border-green-300 text-green-800",ze="bg-card border shadow-sm "+(Z?"text-slate-900":"text-foreground"),Oe=_?"h-8":"h-12",cr=_?"h-9":"h-14";return o.jsx("div",{className:$("relative group",cr),children:o.jsxs("div",{onClick:()=>m(V),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Oe,_?"px-2":"px-3",W?Ft:ze),style:qe,children:[o.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:o.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[V.courseId==="system"&&o.jsx(Ox,{className:$("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),W&&o.jsx(af,{className:$("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),V.title]})}),!_&&o.jsx("div",{className:"flex items-center justify-between opacity-80",children:o.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:V.courseName})})]})},V.id)})})]})]})}),Q&&!de&&S.length>0&&o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[o.jsx(q1,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),o.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),o.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=T.current,U=(V==null?void 0:V.scrollLeft)||0,Z=(V==null?void 0:V.scrollTop)||0,W=Math.min(2,w+.25);v(W),W>.75&&b(!1),setTimeout(()=>{V&&(V.scrollLeft=U*(W/w),V.scrollTop=Z)},0)},disabled:w>=2,title:"Zoom In (Normal View)",children:o.jsx(h3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=T.current,U=(V==null?void 0:V.scrollLeft)||0,Z=(V==null?void 0:V.scrollTop)||0,W=Math.max(.5,w-.25);v(W),W<=.75&&b(!0),setTimeout(()=>{V&&(V.scrollLeft=U*(W/w),V.scrollTop=Z)},0)},disabled:w<=.5,title:"Zoom Out (Compact View)",children:o.jsx(f3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[o.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(w*100),"%"]}),_&&o.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx($y,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},E=()=>{const T=f.useRef(null),[k,I]=f.useState(!1),P=f.useRef({y:0,top:0}),R=f.useRef({}),[O,ie]=f.useState(!1),{startMonth:te,endMonth:J}=f.useMemo(()=>{let se=new Date,ae=new Date;if(S.length>0){const Z=S.filter(W=>W.dueDate).map(W=>new Date(W.dueDate));Z.length>0&&(se=new Date(Math.min(...Z.map(W=>W.getTime()))),ae=new Date(Math.max(...Z.map(W=>W.getTime()))))}const V=new Date(se);V.setMonth(V.getMonth()-2),V.setDate(1);const U=new Date(ae);return U.setMonth(U.getMonth()+4),U.setDate(1),{startMonth:V,endMonth:U}},[S]),L=f.useMemo(()=>iq(te,J),[te,J]),q=f.useCallback(()=>{var Z;const se=zg(new Date),ae=R.current[se];if(!ae){ie(!0);return}const V=ae.getBoundingClientRect(),U=(Z=T.current)==null?void 0:Z.getBoundingClientRect();U&&ie(V.bottom<U.top||V.top>U.bottom)},[L]);f.useEffect(()=>{const se=T.current;return se&&(se.addEventListener("scroll",q),q()),()=>se==null?void 0:se.removeEventListener("scroll",q)},[q]),f.useEffect(()=>{setTimeout(()=>z(),100)},[]);const z=()=>{const se=zg(new Date),ae=R.current[se];ae&&ae.scrollIntoView({behavior:"smooth",block:"center"})},B=se=>{se.button===2&&T.current&&(se.preventDefault(),I(!0),P.current={y:se.pageY,top:T.current.scrollTop})},Q=f.useCallback(se=>{if(!k||!T.current)return;se.preventDefault();const V=(se.pageY-P.current.y)*1.5;T.current.scrollTop=P.current.top-V},[k]),re=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",re)):(window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",re)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",re)}),[k,Q,re]);const de=se=>{const ae=se.getFullYear(),V=se.getMonth(),U=new Date(ae,V,1),Z=new Date(ae,V+1,0),W=[];for(let G=0;G<U.getDay();G++)W.push({date:new Date(ae,V,-U.getDay()+1+G),isCurrentMonth:!1});for(let G=1;G<=Z.getDate();G++)W.push({date:new Date(ae,V,G),isCurrentMonth:!0});for(;W.length%7!==0;){const G=W.length-(U.getDay()+Z.getDate())+1,ee=new Date(ae,V+1,G);W.push({date:ee,isCurrentMonth:!1})}return W};return o.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[O&&o.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:o.jsxs("button",{onClick:z,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[o.jsx(q1,{size:14})," Jump to Today"]})}),o.jsx("div",{ref:T,className:$("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:se=>se.preventDefault(),children:o.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:L.map(se=>{const ae=de(se),V=zg(se);return o.jsxs("div",{ref:U=>R.current[V]=U,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[o.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:o.jsx("h3",{className:"text-lg font-bold",children:se.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),o.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(U=>o.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:U},U))}),o.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:ae.map((U,Z)=>{const W=S.filter(ee=>{if(!ee.dueDate)return!1;const ye=new Date(ee.dueDate);ye.setHours(0,0,0,0);const Ee=new Date(U.date);return Ee.setHours(0,0,0,0),Ee.toDateString()===ye.toDateString()}),G=U.date.toDateString()===new Date().toDateString();return o.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",U.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[o.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",G&&U.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:U.date.getDate()}),o.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:W.map(ee=>{const ye=rh[ee.systemStatus]||rh.backlog;return o.jsx("div",{onClick:Ee=>{Ee.stopPropagation(),m(ee)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",ye.color,ye.border),title:ee.title,children:ee.title},ee.id)})})]},Z)})})]},V)})})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[o.jsx($y,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(_n().error&&_n().error.toLowerCase().includes("session")){const{assignments:T,courses:k}=_n();if(!T.length&&!k.length)return o.jsx(Ul,{})}const{error:C}=_n();return o.jsxs(o.Fragment,{children:[C&&C.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx(Cn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>g("timeline"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(UO,{className:"h-3.5 w-3.5"}),"Timeline"]}),o.jsxs("button",{onClick:()=>g("calendar"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(au,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),o.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[o.jsx(KO,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),o.jsxs(Gf,{value:a||"all",onValueChange:T=>l(T==="all"?null:T),children:[o.jsx(wu,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:o.jsx(Kf,{placeholder:"All Courses"})}),o.jsxs(bu,{children:[o.jsx(Ct,{value:"all",children:"All Courses"}),e.map(T=>o.jsx(Ct,{value:T.id,children:T.name},T.id))]})]}),o.jsxs(Gf,{value:c||"all",onValueChange:T=>u(T==="all"?null:T),children:[o.jsx(wu,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:o.jsx(Kf,{placeholder:"All Status"})}),o.jsxs(bu,{children:[o.jsx(Ct,{value:"all",children:"All Status"}),o.jsx(Ct,{value:"backlog",children:"Backlog"}),o.jsx(Ct,{value:"in_progress",children:"In Progress"}),o.jsx(Ct,{value:"submitted",children:"Submitted"}),o.jsx(Ct,{value:"graded",children:"Graded"}),o.jsx(Ct,{value:"overdue",children:"Overdue"})]})]}),D&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:j,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[o.jsx(Ds,{className:"h-3.5 w-3.5 md:mr-1"}),o.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),o.jsx("div",{className:"ml-auto pl-2",children:o.jsx(Cm,{children:o.jsxs(km,{children:[o.jsx(jm,{asChild:!0,children:o.jsx(Cn,{href:"/settings/integrations",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[o.jsx(nq,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),o.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),o.jsxs(Ou,{side:"left",className:"max-w-xs",children:[o.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?o.jsx(M,{}):o.jsx(E,{})})]}),o.jsx(Iw,{assignment:h,isOpen:!!h,onClose:()=>m(null)})]})}const gE="attendance_configs",er={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await nn(Me(_e,gE,t),n),Zn.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=Zn.get(e);if(n)return n;const r=Me(_e,gE,t),s=await Dr(r);if(s.exists()){const i=s.data();return Zn.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var S;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=Zn.get(s);if(i)return i;const a=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const m=(await u.json()).values;if(!m||m.length<2)throw new Error("Sheet is empty or invalid format.");const p=m[0],g=m.find(j=>{var M;return((M=j[a])==null?void 0:M.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let w=0,v=0;const _=[];for(let j=1;j<p.length;j++){const D=p[j],M=(S=g[j])==null?void 0:S.toUpperCase().trim();if(!D)continue;let E="Unknown";M==="P"||M==="PRESENT"||M==="1"?(E="Present",v++,w++):(M==="A"||M==="ABSENT"||M==="0")&&(E="Absent",w++),E!=="Unknown"&&_.push({date:D,status:E})}const b=w===0?0:Math.round(v/w*100),x={courseId:t,stats:{totalClasses:w,attendedClasses:v,percentage:b},history:_.reverse()};return Zn.set(s,x,60*30),x}},Ns={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:Ru,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:qC,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:Pu,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:Ux,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:Lx,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:uf,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:au,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:Mx,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},zR=Object.keys(Ns),UR=Object.freeze(Object.defineProperty({__proto__:null,BADGES:Ns,BADGE_IDS:zR},Symbol.toStringTag,{value:"Module"}));function aq({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=Ns[t],[i,a]=f.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return o.jsx(Cm,{delayDuration:0,children:o.jsxs(km,{open:i,onOpenChange:a,children:[o.jsx(jm,{asChild:!0,children:o.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),a(!i)},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&o.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),o.jsx(Rk,{children:o.jsxs(Ou,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>a(!1),children:[o.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function wc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],a=i.length;return o.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>o.jsx(aq,{badgeId:l,size:n},l)),a>0&&o.jsx(Cm,{delayDuration:0,children:o.jsxs(km,{children:[o.jsx(jm,{asChild:!0,children:o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",a]})}),o.jsx(Rk,{children:o.jsx(Ou,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-xs font-medium",children:((c=Ns[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function lq(){const{user:t}=et(),[e,n]=f.useState([]),[r,s]=f.useState(0),[i,a]=f.useState(0),[l,c]=f.useState(!0);f.useEffect(()=>{if(!t)return;const m=ir(Me(_e,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const w=p.data();n(w.badges||[]),s(w.loginStreak||0),a(((g=w.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>m()},[t]);const u=()=>{const m=[];return m.push({badge:Ns["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),m.push({badge:Ns["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),m.push({badge:Ns["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),m.push({badge:Ns["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),m.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return o.jsxs(ke,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(Xe,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),o.jsx($C,{className:"h-5 w-5 text-purple-500"})]}),o.jsx(Fe,{className:"flex-1 flex flex-col",children:l?o.jsxs("div",{className:"space-y-2",children:[o.jsx($e,{className:"h-8 w-8 rounded-full"}),o.jsx($e,{className:"h-3 w-20"})]}):e.length>0?o.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,o.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),o.jsx(wc,{badges:e,limit:3,size:"md",className:"mt-2"})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):h?o.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?o.jsx(Ru,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?o.jsx(Ux,{className:"h-5 w-5 text-blue-500"}):o.jsx(au,{className:"h-5 w-5 text-emerald-500"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]})})]})}function cq(){const{user:t}=et(),[e,n]=f.useState(null),[r,s]=f.useState(!0);return f.useEffect(()=>{if(!t)return;const i=ir(Me(_e,"leaderboards","all-courses","students",t.uid),a=>{if(a.exists()){const l=a.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),o.jsxs(ke,{className:"flex flex-col h-full","data-testid":"card-streak",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(Xe,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),o.jsx(Ru,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),o.jsx(Fe,{className:"flex-1 flex flex-col justify-between",children:r?o.jsxs("div",{className:"space-y-2",children:[o.jsx($e,{className:"h-8 w-16"}),o.jsx($e,{className:"h-3 w-24"})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function uq(){return o.jsxs(ke,{className:"overflow-hidden",children:[o.jsx(Ge,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx($e,{className:"h-4 w-24"}),o.jsx($e,{className:"h-8 w-8 rounded-lg"})]})}),o.jsx(Fe,{className:"pt-2",children:o.jsx($e,{className:"h-9 w-16"})})]})}function dq(){return o.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[o.jsx($e,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[o.jsx($e,{className:"h-4 w-[200px]"}),o.jsx($e,{className:"h-4 w-[150px]"})]})]})}function hq({courses:t}){const{user:e,accessToken:n}=et(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){a(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async m=>{try{const p=await er.getCourseConfig(m.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=er.extractSheetId(p.sheetUrl);if(!g)return;const w=await er.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");w&&(c+=w.stats.attendedClasses,u+=w.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const m=Math.round(c/u*100);let p="safe";m<70?p="danger":m<75&&(p="warning"),s({percentage:m,status:p,present:c,total:u})}a(!1)}l()},[t,e,n]),o.jsxs(ke,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(Xe,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),o.jsx(WC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),o.jsx(Fe,{children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx($e,{className:"h-8 w-16"}),o.jsx($e,{className:"h-3 w-24"})]}):r?o.jsxs("div",{children:[o.jsxs("div",{className:$("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),o.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),o.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),o.jsx(Cn,{href:"/attendance",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function fq(){return o.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>o.jsx(uq,{},t))}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsx($e,{className:"h-[300px] w-full rounded-xl"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx($e,{className:"h-8 w-40"}),[1,2,3].map(t=>o.jsx(dq,{},t))]})]}),o.jsx("div",{className:"space-y-6",children:o.jsx($e,{className:"h-[400px] w-full rounded-xl"})})]})]})}function sh({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return o.jsxs(ke,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[o.jsx(Ge,{className:$("pb-3",i.bg),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Xe,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),o.jsx("div",{className:$("p-2 rounded-lg",i.iconBg),children:o.jsx(n,{className:$("h-4 w-4",i.iconColor)})})]})}),o.jsx(Fe,{className:"pt-2",children:o.jsx("div",{className:$("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function mq({data:t}){const e=Math.max(...t.map(n=>n.count),1);return o.jsxs(ke,{className:"overflow-hidden",children:[o.jsx(Ge,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Xe,{className:"text-sm font-semibold flex items-center gap-2",children:[o.jsx(Ji,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),o.jsxs(jn,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),o.jsx(Fe,{className:"pt-4",children:o.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>o.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[o.jsx("span",{className:$("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),o.jsx("div",{className:"relative w-full",children:o.jsx("div",{className:$("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),o.jsx("span",{className:$("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function pq({courses:t,assignments:e}){const{user:n}=et(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(m=>m.id)])),c=[],u=new Map,h=()=>{const m=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(x=>x.id),w=new Set(e.map(x=>x.id)),v=m.filter(x=>{const S=x.email||"",j=x.emailDomain||(S.includes("@")?S.split("@")[1]:""),D=x.enrolledCourseIds||[],M=x.processedAssignmentIds||[],E=p&&j&&p===j,C=g.some(I=>D.includes(I)),k=!j&&M.some(I=>w.has(I));return x.id===n.uid?!0:E&&C||k});v.sort((x,S)=>S.totalXP-x.totalXP);const _=v.length;if(_===0){s(null),a(!1);return}const b=v.findIndex(x=>x.id===n.uid);if(b!==-1){const x=b+1,S=Math.round((_-x+1)/_*100),j=v[b];s({rank:x,total:_,percentile:S,xp:j.totalXP||0,badges:j.badges||[]})}else s(null);a(!1)};return l.forEach(m=>{const p=Pi(os(_e,"leaderboards",m,"students"),Po("totalXP","desc")),g=ir(p,w=>{w.docs.forEach(v=>{const _=v.data(),b={id:v.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},x=u.get(v.id);(!x||b.totalXP>=x.totalXP)&&u.set(v.id,b)}),h()},w=>{console.error(`Error fetching leaderboard source ${m}:`,w),h()});c.push(g)}),()=>{c.forEach(m=>m())}},[n,t,e]),o.jsxs(ke,{"data-testid":"card-class-rank",className:"flex flex-col h-full",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(Xe,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),o.jsx(Pu,{className:"h-5 w-5 text-amber-500"})]}),o.jsx(Fe,{className:"flex-1 flex flex-col justify-between",children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx($e,{className:"h-8 w-16"}),o.jsx($e,{className:"h-3 w-24"})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,o.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),o.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}),o.jsx("div",{className:"pt-4 mt-auto",children:o.jsx(Cn,{href:"/leaderboard",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View Leaderboard"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1",children:[o.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),o.jsx(Cn,{href:"/leaderboard",className:"mt-auto",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function gq(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:a}=_n();et();const[l,c]=f.useState(null);if(e)return o.jsx(fq,{});const u=t();return a&&a.toLowerCase().includes("session")&&!(r.length>0||i.length>0||u.upcoming7Days>0)?o.jsx(Ul,{}):o.jsxs(o.Fragment,{children:[a&&a.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),o.jsx(Cn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),o.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:o.jsx(UC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",o.jsxs(jn,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",o.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),o.jsx(Cn,{href:"/timeline",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",o.jsx(LO,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(sh,{title:"Due in 3 Days",value:u.upcoming3Days,icon:FC,variant:u.upcoming3Days>3?"warning":"default"}),o.jsx(sh,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Ji}),o.jsx(sh,{title:"Overdue",value:u.overdue,icon:Bn,variant:u.overdue>0?"danger":"default"}),o.jsx(sh,{title:"Total Active",value:u.totalActive,icon:il}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(pq,{courses:i,assignments:r})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(hq,{courses:i})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(lq,{})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(cq,{})})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsx(mq,{data:u.weeklyWorkload}),o.jsxs(ke,{children:[o.jsx(Ge,{className:"pb-2",children:o.jsx(Xe,{className:"text-sm font-medium",children:"Next Actions"})}),o.jsx(Fe,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>o.jsx(nW,{assignment:h,onClick:()=>c(h)},h.id)):o.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[o.jsx(il,{className:"h-8 w-8 mb-2"}),o.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),o.jsx(Iw,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function yq(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=_n();et();const[a,l]=f.useState(null),[c,u]=f.useState("grid"),h=ip(),m=t.find(w=>w.id===a),g=e.filter(w=>w.courseId===a).flatMap(w=>w.materials?w.materials.flatMap(v=>{let _=[];if(v.driveFile){const b=v.driveFile.driveFile;let x=b.thumbnailUrl||b.iconUrl||null;!x&&b.id&&(x=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),_.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:x,type:"driveFile"})}return _}):[]).filter(w=>!!w.title);return n&&t.length===0?o.jsx(vq,{}):i&&t.length===0?o.jsx("div",{className:"h-full flex items-center justify-center p-4",children:o.jsx(Ul,{})}):o.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:w=>{w.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&a?"hidden":"flex"),children:[o.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:o.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(w=>o.jsxs("button",{onClick:()=>l(w.id),className:$("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",a===w.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",a===w.id?"bg-primary-foreground/20":"bg-muted"),children:o.jsx(K1,{className:$("h-4 w-4",a===w.id?"text-primary-foreground":"text-muted-foreground")})}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:w.name}),o.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium",a===w.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:w.section||"No Section"})]}),o.jsx(BO,{className:$("h-4 w-4 transition-transform",a===w.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},w.id))})]}),o.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!a?"hidden":"flex flex-col"),children:[h&&a&&o.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[o.jsx(ym,{className:"h-4 w-4"}),"Back to Courses"]})}),a?o.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[o.jsxs("div",{className:"space-y-1 max-w-full",children:[o.jsx(jn,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),o.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:m==null?void 0:m.name}),o.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(m==null?void 0:m.descriptionHeading)||"Curated academic materials and notes."})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),o.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),o.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:o.jsx(zC,{className:"h-4 w-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:o.jsx(n3,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",j="FILE";return b?(S="bg-red-100 text-red-600",j="PDF DOCUMENT"):x?(S="bg-orange-100 text-orange-600",j="PRESENTATION"):(S="bg-blue-100 text-blue-600",j="DOCUMENT"),o.jsxs(ke,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[o.jsx(Ge,{className:"p-3 border-b border-border space-y-0 pb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:o.jsx(Io,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:w.title}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:j})]})]})}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[w.thumbnail&&o.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s800"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var C;console.log("Thumbnail failed to load:",w.thumbnail),M.currentTarget.style.display="none";const E=(C=M.currentTarget.parentElement)==null?void 0:C.querySelector(".fallback-viewer");E&&(E.classList.remove("hidden"),E.classList.add("block"))}}),o.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",w.thumbnail?"hidden":"block"),children:o.jsx(xq,{type:b?"pdf":x?"ppt":"doc"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:o.jsx(ce,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:o.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(Fy,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${w.id}-${v}`)})}):o.jsx("div",{className:"space-y-2 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",j="File";return b?(S="bg-red-100 text-red-600",j="PDF Document"):x?(S="bg-orange-100 text-orange-600",j="Presentation"):(S="bg-blue-100 text-blue-600",j="Document"),o.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[w.thumbnail?o.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s400"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const E=M.currentTarget.nextElementSibling;E&&E.classList.remove("hidden")}}):null,o.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",w.thumbnail?"hidden":"flex",S),children:o.jsx(Io,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:w.title}),o.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[j,"  Read Only"]})]}),o.jsx(ce,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:o.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[o.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),o.jsx(Fy,{className:"h-4 w-4"})]})})]},`${w.id}-${v}`)})}):o.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[o.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:o.jsx(K1,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:o.jsx(Io,{className:"h-10 w-10 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function vq(){return o.jsxs("div",{className:"flex h-full overflow-hidden",children:[o.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[o.jsx($e,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>o.jsx($e,{className:"h-16 w-full rounded-xl"},t))]}),o.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[o.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx($e,{className:"h-4 w-20"}),o.jsx($e,{className:"h-10 w-80"}),o.jsx($e,{className:"h-4 w-64"})]}),o.jsx($e,{className:"h-10 w-32 rounded-lg"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>o.jsx($e,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function xq({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return o.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[o.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:o.jsx(Io,{className:"h-6 w-6"})}),o.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[o.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),o.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&o.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),o.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:o.jsx(Io,{className:"h-40 w-40"})})]})}function wq({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),o.jsx("div",{className:"space-y-8",children:s.map(a=>{const l=zR.map(c=>Ns[c]).filter(c=>c.category===a.id);return l.length===0?null:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:a.label}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return o.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[o.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:o.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&o.jsx(Uy,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&a.id==="consistency"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const m=Number(e)||1,p=Math.min(m/h*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[m," / ",h," Days"]})]})]})}return null})()}),!u&&a.id==="productivity"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const m=Number(n)||0,p=Math.min(m/h*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[m," / ",h," Submissions"]})]})]})}return null})()}),!u&&a.id==="reliability"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:m}=r||{total:0,attended:0};let p=0,g=0;if(c.id==="perfect-week"?(p=7,g=100):c.id==="attendance-champion"&&(p=30,g=90),p>0){const w=h>0?m/h*100:0,v=Math.min(h/p*100,100),_=Math.min(w/g*100,100),b=Math.min((v+_)/2,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(b),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(w),"% attended"]})]})]})}return null})()})]}),u&&o.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},a.id)})})}var Rw="Switch",[bq,XG]=qn(Rw),[_q,Sq]=bq(Rw),$R=f.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:h,...m}=t,[p,g]=f.useState(null),w=je(e,S=>g(S)),v=f.useRef(!1),_=p?h||!!p.closest("form"):!0,[b=!1,x]=Ps({prop:s,defaultProp:i,onChange:u});return o.jsxs(_q,{scope:n,checked:b,disabled:l,children:[o.jsx(ge.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":WR(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:w,onClick:me(t.onClick,S=>{x(j=>!j),_&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),_&&o.jsx(Eq,{control:p,bubbles:!v.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});$R.displayName=Rw;var BR="SwitchThumb",HR=f.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Sq(BR,n);return o.jsx(ge.span,{"data-state":WR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});HR.displayName=BR;var Eq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=f.useRef(null),a=nR(n),l=mk(e);return f.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function WR(t){return t?"checked":"unchecked"}var qR=$R,Nq=HR;const kn=f.forwardRef(({className:t,...e},n)=>o.jsx(qR,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(Nq,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kn.displayName=qR.displayName;var Tq="Label",GR=f.forwardRef((t,e)=>o.jsx(ge.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));GR.displayName=Tq;var KR=GR;const Cq=Au("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Bt=f.forwardRef(({className:t,...e},n)=>o.jsx(KR,{ref:n,className:$(Cq(),t),...e}));Bt.displayName=KR.displayName;var QR="AlertDialog",[kq,YG]=qn(QR,[MA]),Hs=MA(),XR=t=>{const{__scopeAlertDialog:e,...n}=t,r=Hs(e);return o.jsx(kw,{...r,...n,modal:!0})};XR.displayName=QR;var jq="AlertDialogTrigger",YR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Hs(n);return o.jsx(YA,{...s,...r,ref:e})});YR.displayName=jq;var Iq="AlertDialogPortal",JR=t=>{const{__scopeAlertDialog:e,...n}=t,r=Hs(e);return o.jsx(jw,{...r,...n})};JR.displayName=Iq;var Aq="AlertDialogOverlay",ZR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Hs(n);return o.jsx(nd,{...s,...r,ref:e})});ZR.displayName=Aq;var Ua="AlertDialogContent",[Rq,Pq]=kq(Ua),Dq=cC("AlertDialogContent"),eP=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Hs(n),a=f.useRef(null),l=je(e,a),c=f.useRef(null);return o.jsx(hW,{contentName:Ua,titleName:tP,docsSlug:"alert-dialog",children:o.jsx(Rq,{scope:n,cancelRef:c,children:o.jsxs(rd,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(Dq,{children:r}),o.jsx(Oq,{contentRef:a})]})})})});eP.displayName=Ua;var tP="AlertDialogTitle",nP=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Hs(n);return o.jsx(sd,{...s,...r,ref:e})});nP.displayName=tP;var rP="AlertDialogDescription",sP=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Hs(n);return o.jsx(id,{...s,...r,ref:e})});sP.displayName=rP;var Mq="AlertDialogAction",iP=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Hs(n);return o.jsx(yp,{...s,...r,ref:e})});iP.displayName=Mq;var oP="AlertDialogCancel",aP=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Pq(oP,n),i=Hs(n),a=je(e,s);return o.jsx(yp,{...i,...r,ref:a})});aP.displayName=oP;var Oq=({contentRef:t})=>{const e=`\`${Ua}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ua}\` by passing a \`${rP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ua}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Lq=XR,Vq=YR,Fq=JR,lP=ZR,cP=eP,uP=iP,dP=aP,hP=nP,fP=sP;const zq=Lq,Uq=Vq,$q=Fq,mP=f.forwardRef(({className:t,...e},n)=>o.jsx(lP,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));mP.displayName=lP.displayName;const pP=f.forwardRef(({className:t,...e},n)=>o.jsxs($q,{children:[o.jsx(mP,{}),o.jsx(cP,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));pP.displayName=cP.displayName;const gP=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});gP.displayName="AlertDialogHeader";const yP=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});yP.displayName="AlertDialogFooter";const vP=f.forwardRef(({className:t,...e},n)=>o.jsx(hP,{ref:n,className:$("text-lg font-semibold",t),...e}));vP.displayName=hP.displayName;const xP=f.forwardRef(({className:t,...e},n)=>o.jsx(fP,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));xP.displayName=fP.displayName;const wP=f.forwardRef(({className:t,...e},n)=>o.jsx(uP,{ref:n,className:$(sw(),t),...e}));wP.displayName=uP.displayName;const bP=f.forwardRef(({className:t,...e},n)=>o.jsx(dP,{ref:n,className:$(sw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));bP.displayName=dP.displayName;var Ug="rovingFocusGroup.onEntryFocus",Bq={bubbles:!1,cancelable:!0},bp="RovingFocusGroup",[Av,_P,Hq]=Ax(bp),[Wq,SP]=qn(bp,[Hq]),[qq,Gq]=Wq(bp),EP=f.forwardRef((t,e)=>o.jsx(Av.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Av.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Kq,{...t,ref:e})})}));EP.displayName=bp;var Kq=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=t,p=f.useRef(null),g=je(e,p),w=cp(i),[v=null,_]=Ps({prop:a,defaultProp:l,onChange:c}),[b,x]=f.useState(!1),S=pt(u),j=_P(n),D=f.useRef(!1),[M,E]=f.useState(0);return f.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Ug,S),()=>C.removeEventListener(Ug,S)},[S]),o.jsx(qq,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:f.useCallback(C=>_(C),[_]),onItemShiftTab:f.useCallback(()=>x(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:f.useCallback(()=>E(C=>C-1),[]),children:o.jsx(ge.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...m,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{D.current=!0}),onFocus:me(t.onFocus,C=>{const T=!D.current;if(C.target===C.currentTarget&&T&&!b){const k=new CustomEvent(Ug,Bq);if(C.currentTarget.dispatchEvent(k),!k.defaultPrevented){const I=j().filter(te=>te.focusable),P=I.find(te=>te.active),R=I.find(te=>te.id===v),ie=[P,R,...I].filter(Boolean).map(te=>te.ref.current);CP(ie,h)}}D.current=!1}),onBlur:me(t.onBlur,()=>x(!1))})})}),NP="RovingFocusGroupItem",TP=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=ts(),c=i||l,u=Gq(NP,n),h=u.currentTabStopId===c,m=_P(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),o.jsx(Av.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(ge.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:me(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=Yq(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const x=b.indexOf(w.currentTarget);b=u.loop?Jq(b,x+1):b.slice(x+1)}setTimeout(()=>CP(b))}})})})});TP.displayName=NP;var Qq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Yq(t,e,n){const r=Xq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Qq[r]}function CP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Jq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Zq=EP,eG=TP,Pw="Tabs",[tG,JG]=qn(Pw,[SP]),kP=SP(),[nG,Dw]=tG(Pw),jP=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=cp(l),[m,p]=Ps({prop:r,onChange:s,defaultProp:i});return o.jsx(nG,{scope:n,baseId:ts(),value:m,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(ge.div,{dir:h,"data-orientation":a,...u,ref:e})})});jP.displayName=Pw;var IP="TabsList",AP=f.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Dw(IP,n),a=kP(n);return o.jsx(Zq,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(ge.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});AP.displayName=IP;var RP="TabsTrigger",PP=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Dw(RP,n),l=kP(n),c=OP(a.baseId,r),u=LP(a.baseId,r),h=r===a.value;return o.jsx(eG,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(ge.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:me(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const m=a.activationMode!=="manual";!h&&!s&&m&&a.onValueChange(r)})})})});PP.displayName=RP;var DP="TabsContent",MP=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Dw(DP,n),c=OP(l.baseId,r),u=LP(l.baseId,r),h=r===l.value,m=f.useRef(h);return f.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(In,{present:s||h,children:({present:p})=>o.jsx(ge.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&i})})});MP.displayName=DP;function OP(t,e){return`${t}-trigger-${e}`}function LP(t,e){return`${t}-content-${e}`}var rG=jP,VP=AP,FP=PP,zP=MP;const sG=rG,UP=f.forwardRef(({className:t,...e},n)=>o.jsx(VP,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));UP.displayName=VP.displayName;const Ph=f.forwardRef(({className:t,...e},n)=>o.jsx(FP,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ph.displayName=FP.displayName;const Dh=f.forwardRef(({className:t,...e},n)=>o.jsx(zP,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Dh.displayName=zP.displayName;function iG(){const[t,e]=f.useState(null),[n,r]=f.useState(!1),[s,i]=f.useState(!1);return f.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function oG(){const{user:t,requestCalendarPermissions:e}=et(),[n,r]=f.useState(!1),[s,i]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!t)return;const u=ir(Me(_e,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const a=async()=>{r(!0);try{await e()&&await nn(Me(_e,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await nn(Me(_e,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(m=>({...m,[u]:h}));try{await nn(Me(_e,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(m){console.error(m)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ke,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(Ji,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&o.jsx(jn,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),o.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?o.jsx(ce,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):o.jsx(ce,{onClick:a,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?o.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&o.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"h-px w-full bg-border mb-6"}),o.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",o.jsxs("div",{className:"grid gap-3 max-w-xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),o.jsx(kn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),o.jsx(kn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(ol,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(ke,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(Ox,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),o.jsx("div",{className:"shrink-0",children:o.jsx(Cn,{href:"/settings/notifications",children:o.jsx(ce,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function aG(){var ie,te;const{user:t,signOut:e}=et(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:a}=_n(),{isInstallable:l,isInstalled:c,promptInstall:u}=iG(),{theme:h,setTheme:m}=nw(),[p,g]=f.useState(!0),[w,v]=f.useState("auto"),[_,b]=f.useState(!1),[x,S]=f.useState([]),[j,D]=f.useState(0),[M,E]=f.useState(0),[C,T]=f.useState(),[k,I]=f.useState("general");f.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("tab");L&&["general","badges","integrations"].includes(L)&&I(L)},[]),f.useEffect(()=>{if(!t)return;const J=ir(Me(_e,"leaderboards","all-courses","students",t.uid),L=>{var q;if(L.exists()){const z=L.data();S(z.badges||[]),D(z.loginStreak||0),E(((q=z.processedAssignmentIds)==null?void 0:q.length)||0)}else S([]),D(0),E(0)});return()=>J()},[t]),f.useEffect(()=>{if(!a||a.length===0)return;let J=0,L=0;a.forEach(q=>{if(q.attendanceData&&typeof q.attendanceData=="object"){const z=Object.values(q.attendanceData);J+=z.length,L+=z.filter(B=>typeof B=="string"?B.toLowerCase()==="present":B===!0||B===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:J,attendedClasses:L}),J>0&&T({total:J,attended:L})},[a]),f.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var se,ae;const L=Me(_e,"leaderboards","all-courses","students",t.uid),q=await Dr(L);if(!q.exists())return;const z=q.data(),B=new Set(z.badges||[]);let Q=!1;const re=z.loginStreak||0;re>=5&&!B.has("5-day-consistent")&&(B.add("5-day-consistent"),Q=!0),re>=10&&!B.has("10-day-consistent")&&(B.add("10-day-consistent"),Q=!0),re>=30&&!B.has("30-day-consistent")&&(B.add("30-day-consistent"),Q=!0);const de=((se=z.processedAssignmentIds)==null?void 0:se.length)||0;if(de>=10&&!B.has("10-submissions")&&(B.add("10-submissions"),Q=!0),de>=25&&!B.has("25-submissions")&&(B.add("25-submissions"),Q=!0),de>=50&&!B.has("50-submissions")&&(B.add("50-submissions"),Q=!0),Q){await nn(L,{badges:Array.from(B)},{merge:!0});const V=[],U=new Set(z.badges||[]);B.forEach(W=>{U.has(W)||V.push(W)});const{BADGES:Z}=await Sa(async()=>{const{BADGES:W}=await Promise.resolve().then(()=>UR);return{BADGES:W}},void 0);for(const W of V)await rp(os(_e,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((ae=Z[W])==null?void 0:ae.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,k]);const P=((ie=t==null?void 0:t.displayName)==null?void 0:ie.split(" ").map(J=>J[0]).join("").toUpperCase())||((te=t==null?void 0:t.email)==null?void 0:te[0].toUpperCase())||"U",R=()=>n?n.toLocaleString():"Never",O=async()=>{b(!0);try{await u()}catch(J){console.error("Install failed:",J)}finally{b(!1)}};return o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),o.jsxs(sG,{value:k,onValueChange:I,className:"w-full",children:[o.jsxs(UP,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[o.jsx(Ph,{value:"general",children:"General"}),o.jsx(Ph,{value:"badges",children:"Badges"}),o.jsx(Ph,{value:"integrations",children:"Integrations"})]}),o.jsxs(Dh,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{className:"text-base",children:"Connected Account"}),o.jsx(cn,{children:"Your Google account linked to this app"})]}),o.jsxs(Fe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(wr,{className:"h-12 w-12",children:[o.jsx(br,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{children:P})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(af,{className:"h-3.5 w-3.5"}),"Connected"]})]}),o.jsx(Er,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",R()]})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:J=>{J.preventDefault(),s().catch(L=>{console.error("Sync failed:",L)})},disabled:r,"data-testid":"button-sync-settings",children:[o.jsx(ol,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{className:"text-base",children:"Sync Settings"}),o.jsx(cn,{children:"Configure how your data syncs with Google Classroom"})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),o.jsx(kn,{id:"background-sync",checked:p,onCheckedChange:g,"data-testid":"switch-background-sync"})]})})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{className:"text-base",children:"Theme"}),o.jsx(cn,{children:"Choose your preferred color theme"})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>m("light"),className:"flex items-center gap-2",children:[o.jsx(zx,{className:"h-4 w-4"}),"Light"]}),o.jsxs(ce,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>m("dark"),className:"flex items-center gap-2",children:[o.jsx(xm,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),o.jsxs(ke,{className:"border-primary/20",children:[o.jsxs(Ge,{children:[o.jsxs(Xe,{className:"text-base flex items-center gap-2",children:[o.jsx(G1,{className:"h-4 w-4"}),"Install App"]}),o.jsx(cn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),o.jsx(Fe,{className:"space-y-4",children:c?o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[o.jsx(af,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),o.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[o.jsx(c3,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),o.jsxs(ce,{onClick:O,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[o.jsx(G1,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[o.jsx(Ao,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{className:"text-base",children:"Preferences"}),o.jsx(cn,{children:"Customize your experience"})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),o.jsxs(Gf,{value:w,onValueChange:v,children:[o.jsx(wu,{className:"w-[180px]","data-testid":"select-timezone",children:o.jsx(Kf,{})}),o.jsxs(bu,{children:[o.jsx(Ct,{value:"auto",children:"Auto-detect"}),o.jsx(Ct,{value:"America/New_York",children:"Eastern Time"}),o.jsx(Ct,{value:"America/Chicago",children:"Central Time"}),o.jsx(Ct,{value:"America/Denver",children:"Mountain Time"}),o.jsx(Ct,{value:"America/Los_Angeles",children:"Pacific Time"}),o.jsx(Ct,{value:"Europe/London",children:"London"}),o.jsx(Ct,{value:"Europe/Paris",children:"Paris"}),o.jsx(Ct,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsxs(Xe,{className:"text-base flex items-center gap-2",children:[o.jsx(lu,{className:"h-4 w-4"}),"Account Actions"]}),o.jsx(cn,{children:"Manage your session"})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),o.jsxs(zq,{children:[o.jsx(Uq,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm","data-testid":"button-signout",children:[o.jsx(lu,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),o.jsxs(pP,{children:[o.jsxs(gP,{children:[o.jsx(vP,{children:"Are you absolutely sure?"}),o.jsx(xP,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),o.jsxs(yP,{children:[o.jsx(bP,{children:"Cancel"}),o.jsx(wP,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),o.jsx(Dh,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsxs(Xe,{className:"text-base flex items-center gap-2",children:[o.jsx($C,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),o.jsx(cn,{children:"Track your progress and unlock rewards by staying consistent."})]}),o.jsx(Fe,{children:o.jsx(wq,{earnedBadges:x,currentStreak:j,submissionCount:M,attendanceStats:C})})]})}),o.jsx(Dh,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsx(oG,{})})]})]})}function lG(){const{user:t,requestGmailPermissions:e,accessToken:n}=et(),{toast:r}=Yi(),[s,i]=f.useState(!1),[a,l]=f.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{async function w(){if(t)try{const v=Me(_e,"users",t.uid,"settings","notifications"),_=await Dr(v);if(_.exists()){const b=_.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{m(!1)}}w()},[t]),f.useEffect(()=>{async function w(){if(!(!t||h))try{const _=Me(_e,"users",t.uid,"settings","notifications");await nn(_,{enabled:s,config:a,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const v=setTimeout(w,1e3);return()=>clearTimeout(v)},[s,a,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(w){console.error(w),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=w=>{l(v=>({...v,[w]:!v[w]}))};return o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Cn,{href:"/settings",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"rounded-full",children:o.jsx(ym,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),o.jsxs(ke,{className:"border-border shadow-sm",children:[o.jsxs(Ge,{className:"pb-4",children:[o.jsxs(Xe,{className:"flex items-center gap-2 text-lg",children:[o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:o.jsx(Ox,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),o.jsxs(cn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),o.jsx(Er,{}),o.jsxs(Fe,{className:"pt-6 space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{className:"text-base font-medium",children:"Assignment due reminder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),o.jsx(kn,{checked:a.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Er,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{className:"text-base font-medium",children:"Missed submission alert"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),o.jsx(kn,{checked:a.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Er,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Bt,{className:"text-base font-medium",children:"Heavy workload warning"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),o.jsx(kn,{checked:a.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),o.jsxs(_w,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[o.jsx(il,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:"Academic alerts are active."})]}),o.jsx(ce,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[o.jsx(Ao,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),o.jsxs(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&o.jsx(es,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function cG(){const[t,e]=hm(),{user:n,requestCalendarPermissions:r}=et(),{toast:s}=Yi(),[i,a]=f.useState(!0),[l,c]=f.useState(!1),[u,h]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!n)return;const w=ir(Me(_e,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),a(!1)});return()=>w()},[n]);const m=async()=>{c(!0);try{await r()?(await nn(Me(_e,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(w){console.error(w),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await nn(Me(_e,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(w){console.error(w)}},g=async(w,v)=>{h(_=>({..._,[w]:v}));try{await nn(Me(_e,"users",n.uid,"settings","calendar"),{[w]:v},{merge:!0})}catch(_){console.error(_)}};return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(es,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:o.jsx($O,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(ke,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(Ge,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:o.jsx(Ji,{className:"h-6 w-6"})}),o.jsx(Xe,{className:"text-xl",children:"Google Calendar"}),u.enabled&&o.jsx(jn,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),o.jsx(cn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:m,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?o.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&o.jsxs(Fe,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Er,{className:"mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),o.jsx(kn,{checked:u.syncAssignments,onCheckedChange:w=>g("syncAssignments",w)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),o.jsx(kn,{checked:u.syncExams,onCheckedChange:w=>g("syncExams",w)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),o.jsx(kn,{checked:u.syncPersonal,onCheckedChange:w=>g("syncPersonal",w)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[o.jsx(ol,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(uG,{})]})]})}function uG(){const{user:t,requestGmailPermissions:e}=et(),{toast:n}=Yi(),[r,s]=f.useState(!1),[i,a]=f.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});f.useEffect(()=>{if(!t)return;const h=ir(Me(_e,"users",t.uid,"settings","notifications"),m=>{m.exists()&&a(m.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await nn(Me(_e,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await nn(Me(_e,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,m)=>{a(p=>({...p,[h]:m}));try{await nn(Me(_e,"users",t.uid,"settings","notifications"),{[h]:m},{merge:!0})}catch(p){console.error(p)}};return o.jsxs(ke,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(Ge,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[o.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),o.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),o.jsx(Xe,{className:"text-xl",children:"Email Notifications"}),i.enabled&&o.jsx(jn,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),o.jsx(cn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?o.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&o.jsxs(Fe,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Er,{className:"mb-6"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),o.jsx(kn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),o.jsx(kn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function dG(){var C,T,k,I,P,R;const{user:t,signOut:e}=et(),{courses:n,assignments:r,isLoading:s,error:i}=_n();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return o.jsx(Ul,{});const[a,l]=f.useState("class"),[c,u]=f.useState([]),[h,m]=f.useState(!1),[p,g]=f.useState(!0),[w,v]=f.useState(!0);f.useEffect(()=>{if(!t)return;m(!0);const O=[],ie=new Map,te=()=>{const q=[],z=t!=null&&t.email?t.email.split("@")[1]:null,B=n.map(re=>re.id),Q=new Set(r.map(re=>re.id));ie.forEach(re=>{const de=re.email||"";let se=re.emailDomain||"";!se&&de.includes("@")&&(se=de.split("@")[1]);const ae=re.enrolledCourseIds||[],V=re.processedAssignmentIds||[],U=z&&se&&z===se,Z=B.some(ye=>ae.includes(ye)),G=!se&&V.some(ye=>Q.has(ye));let ee=!1;a==="college"?ee=!!U:ee=U&&Z||G,ee&&q.push(re)}),q.sort((re,de)=>de.totalXP-re.totalXP),u(q),m(!1)},J=q=>{q.forEach(z=>{const B=z.data(),Q={id:z.id,displayName:B.displayName||B.name||"Anonymous",photoUrl:B.photoUrl||B.avatar||"",totalXP:B.totalXP||B.xp||0,processedAssignmentIds:B.processedAssignmentIds||B.completedTasks||[],email:B.email||"",emailDomain:B.emailDomain||(B.email?B.email.split("@")[1]:""),enrolledCourseIds:B.enrolledCourseIds||B.subjects||[],badges:B.badges||[]},re=ie.get(z.id);(!re||Q.totalXP>=re.totalXP)&&ie.set(z.id,Q)}),te()},L=t.email?t.email.split("@")[1]:null;if(a==="college"&&L){const q=os(_e,"leaderboards","all-courses","students"),z=Pi(q,Y0("emailDomain","==",L),Po("totalXP","desc"),Va(50)),B=ir(z,J,Q=>{console.warn("College query failed (likely missing index). Falling back to global list.",Q);const re=Pi(q,Po("totalXP","desc"),Va(100));ir(re,J)});O.push(B)}else Array.from(new Set(["all-courses",...n.map(z=>z.id)])).forEach(z=>{const B=os(_e,"leaderboards",z,"students"),Q=Pi(B,Po("totalXP","desc"),Va(50)),re=ir(Q,J);O.push(re)});return()=>{O.forEach(q=>q())}},[a,t,n,r]);const _=a==="class"?"My Class":"My College",b=c.find(O=>O.id===(t==null?void 0:t.uid));b!=null&&b.totalXP;const x=!!b,S=c.filter(O=>O.totalXP>0),j=c.filter(O=>O.totalXP===0),D=c.length>0&&S.length===0,M=[...j].sort((O,ie)=>{const te=J=>J?typeof J.toMillis=="function"?J.toMillis():typeof J=="number"?J:J instanceof Date?J.getTime():typeof J=="string"?new Date(J).getTime():0:0;return te(O.lastSyncedAt)-te(ie.lastSyncedAt)}),E=[...S,...M];return o.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Ao,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:O=>{O.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[_," Leaderboard"]})]}),o.jsx("div",{className:"w-full sm:w-[200px]",children:o.jsxs(Gf,{value:a,onValueChange:O=>l(O),children:[o.jsx(wu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:o.jsx(Kf,{placeholder:"Select View"})}),o.jsxs(bu,{children:[o.jsx(Ct,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),o.jsx(Ct,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&a==="class"&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:o.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:o.jsx(JO,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),o.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[o.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Submit"," ",o.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),a==="college"&&w&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>v(!1),children:o.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:o.jsx(Ao,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),o.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[o.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",o.jsx(HC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",o.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[o.jsx(Ao,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!x&&!h?o.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(es,{className:"h-6 w-6 text-primary animate-spin"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(O=>o.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},O))}):c.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):D?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[o.jsx(UC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),o.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:E.map((O,ie)=>{var J,L;const te=O.id===(t==null?void 0:t.uid);return o.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",te?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(wr,{className:$("h-10 w-10 border flex-shrink-0",te?"border-primary/20":"border-border"),children:[o.jsx(br,{src:O.photoUrl}),o.jsx(_r,{className:"text-xs bg-muted text-muted-foreground",children:(L=(J=O.displayName)==null?void 0:J[0])==null?void 0:L.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("span",{className:$("text-sm font-medium truncate",te?"text-primary":"text-foreground"),children:[O.displayName,te&&o.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},O.id)})})]}):o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[E.length>0&&o.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[o.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:E[1]&&E[1].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(wr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[o.jsx(br,{src:E[1].photoUrl}),o.jsx(_r,{className:"text-lg bg-zinc-100 text-zinc-500",children:(T=(C=E[1].displayName)==null?void 0:C[0])==null?void 0:T.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:E[1].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[E[1].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(wc,{badges:E[1].badges||[],limit:2,size:"sm"})})]})]}):S.length===1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):o.jsx("div",{className:"w-full"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:o.jsx(lf,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),o.jsxs(wr,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[o.jsx(br,{src:E[0].photoUrl}),o.jsx(_r,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(I=(k=E[0].displayName)==null?void 0:k[0])==null?void 0:I.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),o.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:E[0].displayName}),o.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[E[0].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:o.jsx(wc,{badges:E[0].badges||[],limit:3,size:"sm"})})]})]}),o.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:E[2]&&E[2].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(wr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[o.jsx(br,{src:E[2].photoUrl}),o.jsx(_r,{className:"text-lg bg-amber-50 text-amber-700",children:(R=(P=E[2].displayName)==null?void 0:P[0])==null?void 0:R.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:E[2].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[E[2].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(wc,{badges:E[2].badges||[],limit:2,size:"sm"})})]})]}):S.length>=1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):o.jsx("div",{className:"w-full"})})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:E.slice(Math.min(3,S.length)).map((O,ie)=>{var L,q;const te=O.id===(t==null?void 0:t.uid),J=Math.min(3,S.length)+ie+1;return o.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",te?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[o.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:o.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:O.totalXP>0?`#${J}`:"-"})}),o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(wr,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",te?"border-primary/20":"border-border"),children:[o.jsx(br,{src:O.photoUrl}),o.jsx(_r,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(q=(L=O.displayName)==null?void 0:L[0])==null?void 0:q.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",te?"text-primary":"text-foreground"),children:[O.displayName," ",te&&o.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),o.jsx(wc,{badges:O.badges||[],limit:3,size:"md",className:"scale-100"})]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[O.processedAssignmentIds.length," ",o.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),o.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:O.totalXP.toLocaleString()}),o.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},O.id)})})]})]})})]})}function hG(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const yE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function fG(){return o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[o.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>o.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function mG(){const{courses:t,error:e,isLoading:n}=_n();if(n)return o.jsx(fG,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return o.jsx(Ul,{});const{accessToken:r,user:s}=et();Yi();const[i,a]=f.useState(""),[l,c]=f.useState({}),[u,h]=f.useState(!1),[m,p]=f.useState(null);f.useState("");const g=f.useMemo(()=>hG(),[]);f.useEffect(()=>{if(!t||!s)return;(async()=>{const C=await Promise.all(t.map(async k=>{var P;if(((P=l[k.id])==null?void 0:P.state)==="loaded")return l[k.id];const I=await er.getCourseConfig(k.id);return I?I.isVisible?(w(k.id,I.sheetUrl),{courseId:k.id,state:"loading"}):{courseId:k.id,state:"hidden"}:{courseId:k.id,state:"no-config"}})),T={};C.forEach(k=>{T[k.courseId]=k}),c(k=>({...k,...T}))})()},[t,s]),f.useEffect(()=>{t.length>0&&!i&&a(t[0].id)},[t,i]);const w=async(E,C)=>{if(!r||!(s!=null&&s.email))return;const T=er.extractSheetId(C);if(!T){c(P=>({...P,[E]:{courseId:E,state:"error",error:"Invalid configuration"}}));return}const k=await er.getCourseConfig(E),I=(k==null?void 0:k.emailColumn)||"A";try{const P=await er.fetchAttendanceFromSheet(T,r,s.email,I);c(R=>({...R,[E]:{courseId:E,state:"loaded",data:P}}))}catch(P){console.error(P),c(R=>({...R,[E]:{courseId:E,state:"error",error:P.message||"Failed to load"}}))}},v=async E=>{E==null||E.stopPropagation(),h(!0);const C=Object.values(l).filter(T=>T.state==="loaded"||T.state==="error"||T.state==="loading").map(async T=>{const k=await er.getCourseConfig(T.courseId);return k?w(T.courseId,k.sheetUrl):Promise.resolve()});await Promise.allSettled(C),h(!1)},_=Object.values(l).filter(E=>E.state==="loaded"&&E.data),b=_.reduce((E,C)=>{var T;return E+(((T=C.data)==null?void 0:T.stats.attendedClasses)||0)},0),x=_.reduce((E,C)=>{var T;return E+(((T=C.data)==null?void 0:T.stats.totalClasses)||0)},0),S=yE(b,x),j=l[i],D=t.find(E=>E.id===i),M=j==null?void 0:j.data;return f.useEffect(()=>{if(!s||x<5)return;const C=setTimeout(async()=>{const T=[],k=b,I=x,P=I>0?k/I:0;if(I>=10&&P===1&&T.push("perfect-week"),I>=30&&P>=.95&&T.push("attendance-champion"),T.length>0)try{const R=Me(_e,"leaderboards","all-courses","students",s.uid);await Na(R,{badges:ew(...T)})}catch(R){console.debug("Could not award attendance badges:",R)}},3e3);return()=>clearTimeout(C)},[s,x,b]),o.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[o.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:o.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[o.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),o.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),o.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",g]})]}),o.jsxs(ce,{variant:"ghost",size:"sm",onClick:v,className:$("text-muted-foreground h-8 shrink-0",u&&"opacity-70"),children:[o.jsx(cf,{className:$("h-3.5 w-3.5 sm:mr-2",u&&"animate-spin")}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),e&&e.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Ao,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:E=>{E.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[o.jsx("section",{children:_.length>0?o.jsx(ke,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:o.jsx(Fe,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[o.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),o.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),o.jsx(jn,{variant:S.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",S.color),children:S.status==="safe"?"Safe Status":"Attention Needed"})]}),o.jsxs("div",{className:"flex items-baseline gap-3",children:[o.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[S.percentage,"%"]}),o.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",_.length," active courses"]})]})]})})}):o.jsx(ke,{className:"border-border shadow-sm bg-card",children:o.jsxs(Fe,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[o.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:o.jsx(au,{className:"h-8 w-8 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2 max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),o.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",o.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[o.jsx(Bn,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[o.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(E=>{var P,R;const C=l[E.id],T=(C==null?void 0:C.state)||"loading",k=C!=null&&C.data?yE(C.data.stats.attendedClasses,C.data.stats.totalClasses):null,I=i===E.id;return o.jsx(ke,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",I&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>a(E.id),children:o.jsxs(Fe,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs(km,{children:[o.jsx(jm,{asChild:!0,children:o.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:E.name})}),o.jsx(Ou,{children:o.jsx("p",{children:E.name})})]}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:E.section||"No Section"})]}),T==="loaded"&&k&&o.jsxs("span",{className:$("text-lg font-bold tabular-nums",k.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[k.percentage,"%"]}),T==="hidden"&&o.jsx(zy,{className:"h-5 w-5 text-muted-foreground/50"}),T==="locked"&&o.jsx(Uy,{className:"h-5 w-5 text-amber-500/80"}),T==="error"&&o.jsx(Ao,{className:"h-5 w-5 text-destructive/80"})]}),o.jsxs("div",{className:"mt-auto",children:[T==="loaded"&&k&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[o.jsxs("span",{children:[(P=C.data)==null?void 0:P.stats.attendedClasses,"/",(R=C.data)==null?void 0:R.stats.totalClasses," classes"]}),o.jsx("span",{className:k.status==="safe"?"text-emerald-500":"text-red-500",children:k.status==="safe"?"On Track":"Low Attendance"})]}),o.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:o.jsx("div",{className:$("h-full rounded-full transition-all duration-500",k.progressColor),style:{width:`${k.percentage}%`}})})]}),T==="locked"&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),o.jsxs(ce,{size:"sm",variant:"secondary",className:"w-full",onClick:O=>{O.stopPropagation(),p(E.id)},children:[o.jsx(ZO,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),T==="hidden"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),T==="no-config"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),T==="error"&&o.jsx("p",{className:"text-xs text-destructive",children:C==null?void 0:C.error}),T==="loading"&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(cf,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},E.id)})}),o.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1",children:[o.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[o.jsx(au,{className:"h-4 w-4"})," History"]}),o.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(D==null?void 0:D.section)||(D==null?void 0:D.name.slice(0,3).toUpperCase())})]}),o.jsx(ke,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:M?o.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:o.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:M.history.map((E,C)=>{const T=E.status==="Present",k=C===0,I=C===5;return o.jsxs("div",{className:"group",children:[k&&o.jsx("div",{className:"ml-5 mb-3 mt-1",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),I&&o.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),o.jsxs("div",{className:"relative pl-5 select-none",children:[o.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",T?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),C!==M.history.length-1&&o.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),o.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[o.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",T?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:E.status}),o.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:E.date})]})})]})]},C)})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(j==null?void 0:j.state)==="locked"&&o.jsxs(o.Fragment,{children:[o.jsx(Uy,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(j==null?void 0:j.state)==="hidden"&&o.jsxs(o.Fragment,{children:[o.jsx(zy,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((j==null?void 0:j.state)==="error"||(j==null?void 0:j.state)==="no-config")&&o.jsxs(o.Fragment,{children:[o.jsx(Bn,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}const pG=kw,gG=YA,yG=jw,$P=f.forwardRef(({className:t,...e},n)=>o.jsx(nd,{ref:n,className:$("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));$P.displayName=nd.displayName;const BP=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(yG,{children:[o.jsx($P,{}),o.jsxs(rd,{ref:r,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(yp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Ds,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));BP.displayName=rd.displayName;const HP=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});HP.displayName="DialogHeader";const WP=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});WP.displayName="DialogFooter";const qP=f.forwardRef(({className:t,...e},n)=>o.jsx(sd,{ref:n,className:$("text-lg font-semibold leading-none tracking-tight",t),...e}));qP.displayName=sd.displayName;const vG=f.forwardRef(({className:t,...e},n)=>o.jsx(id,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));vG.displayName=id.displayName;const ni=[{id:"swords",icon:Ac,label:"Warrior",color:"text-red-500",gradient:"bg-gradient-to-r from-red-600 to-orange-600"},{id:"shield",icon:l3,label:"Guardian",color:"text-blue-500",gradient:"bg-gradient-to-r from-blue-600 to-cyan-600"},{id:"zap",icon:qC,label:"Speed",color:"text-yellow-500",gradient:"bg-gradient-to-r from-yellow-500 to-amber-600"},{id:"crown",icon:lf,label:"Royal",color:"text-purple-500",gradient:"bg-gradient-to-r from-purple-600 to-indigo-600"},{id:"flame",icon:Ru,label:"Power",color:"text-orange-500",gradient:"bg-gradient-to-r from-orange-600 to-red-600"},{id:"rocket",icon:Lx,label:"Launch",color:"text-cyan-500",gradient:"bg-gradient-to-r from-cyan-600 to-blue-600"},{id:"star",icon:uf,label:"Legend",color:"text-indigo-500",gradient:"bg-gradient-to-r from-indigo-600 to-purple-600"},{id:"target",icon:Ux,label:"Focus",color:"text-emerald-500",gradient:"bg-gradient-to-r from-emerald-600 to-green-600"},{id:"book",icon:vm,label:"Scholar",color:"text-pink-500",gradient:"bg-gradient-to-r from-pink-600 to-rose-600"},{id:"ghost",icon:QO,label:"Phantom",color:"text-slate-400",gradient:"bg-gradient-to-r from-slate-700 to-gray-800"}];function xG(){const{user:t}=et(),{toast:e}=Yi(),[n,r]=f.useState("leaderboard"),[s,i]=f.useState(null),[a,l]=f.useState([]),[c,u]=f.useState(!0),[h,m]=f.useState([]),[p,g]=f.useState(""),[w,v]=f.useState(""),[_,b]=f.useState(""),[x,S]=f.useState(!1),[j,D]=f.useState(!0),[M,E]=f.useState(""),[C,T]=f.useState(!1),[k,I]=f.useState(""),[P,R]=f.useState(""),[O,ie]=f.useState(""),[te,J]=f.useState(!1),[L,q]=f.useState(!1);f.useEffect(()=>{t&&(z(),Q())},[t]);const z=async()=>{try{u(!0);const U=os(_e,"study_squads"),Z=Pi(U,Y0("members","array-contains",t.uid)),W=await wv(Z);if(W.empty)i(null);else{const G=W.docs[0],ee={id:G.id,...G.data()};i(ee),I(ee.name),R(ee.tag),ie(ee.description),await B(ee.members,ee.leaderId,G.id)}}catch(U){console.error("Error fetching clan:",U)}finally{u(!1)}},B=async(U,Z,W)=>{const G=[];let ee=0;for(const Ee of U){const tt=Me(_e,"leaderboards","all-courses","students",Ee),Be=await Dr(tt);let qe=0,Ft="Unknown",ze="";if(Be.exists()){const Oe=Be.data();qe=Oe.totalXP||Oe.xp||0,Ft=Oe.displayName||Oe.name||"Unknown",ze=Oe.photoUrl||Oe.avatar||""}else Ee===(t==null?void 0:t.uid)&&(Ft=(t==null?void 0:t.displayName)||"Me",ze=(t==null?void 0:t.photoURL)||"");ee+=qe,G.push({uid:Ee,displayName:Ft,photoUrl:ze,currentXP:qe,role:Ee===Z?"leader":"member"})}G.sort((Ee,tt)=>tt.currentXP-Ee.currentXP),l(G);const ye=Me(_e,"study_squads",W);Na(ye,{totalXP:ee}).catch(console.error)},Q=async()=>{try{const U=os(_e,"study_squads"),Z=Pi(U,Po("totalXP","desc"),Va(20)),G=(await wv(Z)).docs.map(ee=>({id:ee.id,...ee.data()}));m(G)}catch(U){console.error("Error fetching top clans:",U)}},re=async()=>{var U;if(!(!p||!w)){S(!0);try{const Z={name:p,tag:w,description:_||"We study hard!",leaderId:t.uid,members:[t.uid],totalXP:0,averageAttendance:0,bannerColor:"bg-blue-600",isPublic:!0,createdAt:sp()},W=await rp(os(_e,"study_squads"),Z);e({title:"Clan Created!",description:`You are now the leader of ${p}`}),z(),r("my-clan")}catch(Z){if(console.error("Create clan error:",Z),Z.code==="permission-denied")e({title:"Permission Denied",description:"Security Rules Error: Update Firestore Rules to allow 'study_squads'.",variant:"destructive"});else{const W=((U=Z.message)==null?void 0:U.includes("BLOCKED"))||Z.code==="unavailable";e({title:W?"Connection Blocked":"Error",description:W?"Your browser or an extension is blocking the database. Please disable it for this site.":"Failed to create clan. Try again.",variant:"destructive"})}}finally{S(!1)}}},de=async U=>{const Z=M;if(Z){T(!0);try{const W=Me(_e,"study_squads",Z),G=await Dr(W);if(!G.exists()){e({title:"Error",description:"Clan not found",variant:"destructive"});return}const ee=G.data();if(ee.members.length>=5){e({title:"Clan Full",description:"This clan already has 5 members.",variant:"destructive"});return}if(ee.members.includes(t.uid)){e({title:"Already a Member",description:"You are already in this clan."});return}await Na(W,{members:ew(t.uid)}),e({title:"Welcome!",description:`You joined ${ee.name}`}),await z(),E(""),r("my-clan")}catch{e({title:"Error",description:"Failed to join clan.",variant:"destructive"})}finally{T(!1)}}},se=async()=>{if(s&&confirm("Are you sure you want to leave this clan? "+(s.members.length===1?"Since you are the last member, the clan will be deleted.":"")))try{const U=Me(_e,"study_squads",s.id);if(s.members.length<=1)await Z0(U),e({title:"Squad Disbanded",description:"The squad has been deleted."});else{const Z={members:oI(t.uid)};if(s.leaderId===t.uid){const W=s.members.filter(G=>G!==t.uid);W.length>0&&(Z.leaderId=W[0])}await Na(U,Z),e({title:"Left Squad",description:"You have left the squad."})}i(null),l([]),r("leaderboard"),Q()}catch(U){console.error(U),e({title:"Error",description:"Failed to leave squad.",variant:"destructive"})}},ae=async()=>{if(!(!s||!k||!P)){J(!0);try{const U=Me(_e,"study_squads",s.id);await Na(U,{name:k,tag:P,description:O}),i(Z=>Z?{...Z,name:k,tag:P,description:O}:null),e({title:"Clan Updated",description:"Your clan settings have been saved."}),q(!1)}catch(U){console.error(U),e({title:"Update Failed",description:"Could not update clan details.",variant:"destructive"})}finally{J(!1)}}},V=U=>{const W=(ni.find(G=>G.id===U)||ni[0]).icon;return o.jsx(W,{className:"h-4 w-4"})};return c&&!s?o.jsx("div",{className:"flex h-screen items-center justify-center",children:o.jsx(es,{className:"h-8 w-8 animate-spin text-primary"})}):o.jsxs("div",{className:"flex flex-col h-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Clans"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>r("leaderboard"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",n==="leaderboard"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(XO,{className:"h-3.5 w-3.5"}),"Leaderboard"]}),o.jsxs("button",{onClick:()=>r("my-clan"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",n==="my-clan"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(Ac,{className:"h-3.5 w-3.5"}),"My Squad",s&&o.jsx("span",{className:"ml-1 h-1.5 w-1.5 rounded-full bg-primary/50"})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-20",children:n==="leaderboard"?o.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[o.jsx(Pu,{className:"h-5 w-5 text-yellow-500"}),"Top Study Squads"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Competed based on Total XP."})]}),!s&&o.jsx("div",{className:"flex gap-2 items-start justify-end",children:o.jsxs("div",{className:"w-full max-w-sm flex gap-2",children:[o.jsx(ws,{placeholder:"Enter Clan ID...",value:M,onChange:U=>E(U.target.value),className:"bg-background"}),o.jsx(ce,{onClick:()=>de(),disabled:C,children:C?o.jsx(es,{className:"animate-spin h-4 w-4"}):"Join"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[h.map((U,Z)=>{const W=(s==null?void 0:s.id)===U.id;U.members.length>=5;const G=ni.find(ye=>ye.id===U.tag)||ni[0],ee=G.icon;return o.jsxs("div",{className:$("flex items-center justify-between p-4 border rounded-xl transition-all",W?"bg-primary/5 border-primary/20":"bg-card hover:border-primary/50"),children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:$("h-10 w-10 rounded-full flex items-center justify-center font-bold text-sm",Z<3?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-500":"bg-muted text-muted-foreground"),children:Z+1}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[o.jsx("div",{className:$("p-2 rounded-lg mr-2 md:mr-3 shadow-sm text-white",G.gradient||"bg-primary"),children:o.jsx(ee,{className:"h-4 w-4"})}),U.name,W&&o.jsx(jn,{variant:"secondary",className:"text-[10px]",children:"Your Clan"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:U.description})]})]}),o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"text-xs md:text-sm font-bold",children:[U.totalXP.toLocaleString()," XP"]})}),o.jsxs("div",{className:"flex items-center text-xs text-muted-foreground gap-1 w-12 justify-end",children:[o.jsx(Q1,{className:"h-3 w-3"}),U.members.length,"/5"]})]})]},U.id)}),h.length===0&&o.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:"No active clans found. Be the first to create one!"})]})]}):o.jsx(o.Fragment,{children:s?o.jsx("div",{className:"max-w-7xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:(()=>{const U=ni.find(G=>G.id===s.tag)||ni[0],Z=U.icon,W=U.gradient||"bg-gradient-to-r from-blue-600 to-indigo-700";return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`relative rounded-xl overflow-hidden ${W} p-4 md:p-8 text-white shadow-lg`,children:[o.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:o.jsx(Z,{className:"h-32 w-32"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-8 w-8 bg-white/20 rounded flex items-center justify-center backdrop-blur-sm",children:V(s.tag)}),s.leaderId===(t==null?void 0:t.uid)&&o.jsxs(pG,{open:L,onOpenChange:q,children:[o.jsx(gG,{asChild:!0,children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white/50 hover:text-white hover:bg-white/20",children:o.jsx(Fx,{className:"h-4 w-4"})})}),o.jsxs(BP,{children:[o.jsx(HP,{children:o.jsx(qP,{children:"Edit Clan Details"})}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{children:"Name"}),o.jsx(ws,{value:k,onChange:G=>I(G.target.value)})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Bt,{children:"Badge"}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:ni.map(G=>{const ee=G.icon,ye=P===G.id;return o.jsx("div",{onClick:()=>R(G.id),className:$("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",ye?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:o.jsx(ee,{className:$("h-5 w-5 mb-1",ye?G.color:"text-foreground")})},G.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{children:"Description (Max 20 chars)"}),o.jsx(ws,{value:O,onChange:G=>ie(G.target.value),maxLength:20})]})]}),o.jsxs(WP,{children:[o.jsx(ce,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),o.jsx(ce,{onClick:ae,disabled:te,children:"Save Changes"})]})]})]})]}),o.jsx("h2",{className:"text-xl md:text-3xl font-black tracking-tight",children:s.name}),o.jsx("p",{className:"text-blue-100 italic max-w-lg",children:s.description})]})}),o.jsxs("div",{className:"flex gap-3 mt-8",children:[o.jsxs(ce,{size:"sm",variant:"outline",className:"text-white border-white/40 hover:bg-white/10 hover:text-white",onClick:()=>{navigator.clipboard.writeText(s.id),e({title:"Copied!",description:"Clan ID copied to clipboard."})},children:[o.jsx(qO,{className:"h-4 w-4 mr-2"}),"Copy Clan ID"]}),s.leaderId===(t==null?void 0:t.uid)&&o.jsxs(jn,{variant:"outline",className:"text-white border-white/40 h-9 px-3",children:[o.jsx(lf,{className:"h-3 w-3 mr-1"}),"Leader"]})]}),o.jsxs("div",{className:"absolute bottom-0 right-0 text-right p-3 md:p-4 bg-white/10 rounded-lg backdrop-blur-sm border border-white/10 origin-bottom-right transform scale-75 md:scale-100",children:[o.jsx("div",{className:"text-3xl font-mono font-bold tracking-tighter",children:s.totalXP.toLocaleString()}),o.jsx("div",{className:"text-xs text-blue-200 font-medium tracking-widest uppercase",children:"Total XP"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs(ke,{className:"md:col-span-2 border shadow-sm",children:[o.jsx(Ge,{children:o.jsxs(Xe,{className:"flex items-center gap-2",children:[o.jsx(Q1,{className:"h-5 w-5"}),"Squad Members"]})}),o.jsx(Fe,{children:o.jsxs("div",{className:"space-y-4",children:[a.map((G,ee)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"font-mono text-muted-foreground w-6 text-center text-sm font-bold",children:ee+1}),o.jsxs(wr,{className:"h-9 w-9 border",children:[o.jsx(br,{src:G.photoUrl}),o.jsx(_r,{children:G.displayName[0]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-medium flex items-center gap-2 text-sm",children:[G.displayName,G.role==="leader"&&o.jsx(lf,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"})]}),o.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:G.role})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-bold text-sm font-mono",children:[G.currentXP.toLocaleString()," XP"]})})]},G.uid)),a.length<5&&o.jsxs("div",{className:"border-dashed border-2 rounded-lg p-4 flex flex-col items-center justify-center text-muted-foreground gap-2 hover:bg-muted/50 transition-colors cursor-pointer group",onClick:()=>{navigator.clipboard.writeText(s.id),e({title:"Copied!",description:"Share this ID with a friend."})},children:[o.jsx(d3,{className:"h-6 w-6 opacity-30 group-hover:opacity-100 transition-opacity"}),o.jsxs("span",{className:"text-sm font-medium",children:["Invite a Friend (",5-a.length," ","slots left)"]})]})]})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ke,{children:[o.jsx(Ge,{className:"pb-2",children:o.jsx(Xe,{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Weekly Stats"})}),o.jsx(Fe,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[o.jsx(VO,{className:"h-5 w-5 text-green-500"}),"-- %"]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Avg. Attendance"})]}),o.jsx("div",{className:"h-px bg-border"}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[o.jsx(i3,{className:"h-5 w-5 text-blue-500"}),"#",h.findIndex(G=>G.id===s.id)+1]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Class Rank"})]})]})})]}),o.jsxs(ce,{variant:"ghost",className:"w-full text-red-500 hover:text-red-700 hover:bg-red-50",onClick:se,children:[o.jsx(lu,{className:"h-4 w-4 mr-2"}),"Leave Squad"]})]})]})]})})()}):o.jsxs("div",{className:"max-w-4xl mx-auto w-full py-10 space-y-6 animate-in fade-in zoom-in-95 duration-500",children:[j&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-5 flex flex-col sm:flex-row gap-5 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>D(!1),children:o.jsx(Ds,{className:"h-4 w-4"})})}),o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center shrink-0",children:o.jsx(Ac,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:"Create Your Study Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed max-w-md",children:"Squad up with friends to track progress together, compete on the leaderboard, and keep each other accountable."})]})]}),o.jsxs(ke,{className:"border-2 border-primary/10 shadow-lg",children:[o.jsxs(Ge,{children:[o.jsx(Xe,{children:"Squad Details"}),o.jsx(cn,{children:"Start a new journey with up to 4 other friends."})]}),o.jsxs(Fe,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{children:"Squad Name"}),o.jsx(ws,{placeholder:"e.g. Night Owls",value:p,onChange:U=>g(U.target.value),maxLength:20})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Bt,{children:"Choose Squad Badge"}),o.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:ni.map(U=>{const Z=U.icon,W=w===U.id;return o.jsxs("div",{onClick:()=>v(U.id),className:$("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",W?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:[o.jsx(Z,{className:$("h-6 w-6 mb-1",W?U.color:"text-muted-foreground")}),o.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:U.label})]},U.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{children:"Motto (Max 20 chars)"}),o.jsx(ws,{placeholder:"We never sleep...",value:_,onChange:U=>b(U.target.value),maxLength:20}),o.jsxs("div",{className:"text-xs text-right text-muted-foreground",children:[_.length,"/20"]})]}),o.jsxs(ce,{className:"w-full",size:"lg",onClick:re,disabled:x||!p||!w,children:[x?o.jsx(es,{className:"animate-spin mr-2"}):o.jsx(Ac,{className:"mr-2 h-4 w-4"}),"Form Squad"]})]})]})]})})})]})}function wG(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(ke,{className:"w-full max-w-md mx-4",children:o.jsxs(Fe,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(Bn,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function GP(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const bG=864e5;function Rv(t){const e=GP(t);return e.setHours(0,0,0,0),e}function vE(t){const e=GP(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _G(t,e){const n=Rv(t),r=Rv(e),s=+n-vE(n),i=+r-vE(r);return Math.round((s-i)/bG)}function SG(){const{user:t}=et();return f.useEffect(()=>{if(!t)return;(async()=>{try{const n=Me(_e,"leaderboards","all-courses","students",t.uid),r=await Dr(n),s=Rv(new Date).getTime();let i=0,a=0,l=[];if(r.exists()){const m=r.data();i=m.loginStreak||0,a=m.lastLoginStreakDate?m.lastLoginStreakDate:0,l=m.badges||[]}if(a){const m=_G(s,a);if(m<=0)return;m===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await nn(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const EG=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function KP({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=f.useState(10),[i,a]=f.useState(0),l=n&&n.length>0?n:EG;return f.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const m=Math.random()*15;return Math.min(h+m,90)})},400),u=setInterval(()=>{a(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),o.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),o.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),o.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),o.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:o.jsx(es,{className:"h-7 w-7 text-primary animate-spin"})}),o.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:o.jsx(HC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(OC,{className:"h-3 w-3"})," Optimizing"]}),o.jsxs("span",{children:[Math.round(r),"%"]})]})]}),o.jsxs("div",{className:"relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),o.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:o.jsx(Lx,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1 pt-0.5",children:[o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const NG=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function TG({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=et(),{theme:a,toggleTheme:l}=nw(),c=ip(),u=[{id:"dashboard",label:"Dashboard",icon:e3},{id:"courses",label:"Courses",icon:vm},{id:"settings",label:"Settings",icon:Fx}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(w=>w[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",m=()=>o.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),o.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&o.jsx("button",{className:"ml-auto",onClick:r,children:o.jsx(Ds,{className:"w-5 h-5 text-muted-foreground"})})]}),o.jsx("div",{className:"p-4 border-b border-border shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(wr,{className:"h-8 w-8",children:[o.jsx(br,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{className:"text-xs",children:h})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(w=>o.jsxs("button",{onClick:()=>{e(w.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===w.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(w.icon,{className:"h-4 w-4"}),w.label]},w.id))}),o.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(zx,{className:"w-4 h-4 mr-3"}):o.jsx(xm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[o.jsx(lu,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:o.jsx(m,{})}),c&&n&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function CG({courses:t}){const[e,n]=f.useState(0),[r,s]=f.useState(0);return f.useEffect(()=>{(async()=>{let a=0,l=0;(await Promise.all(t.map(u=>er.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?a++:l++)}),n(a),s(l)})()},[t]),o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(ke,{className:"border-border shadow-sm",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Xe,{className:"text-sm font-medium",children:"Total Courses"}),o.jsx(vm,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Fe,{children:o.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),o.jsxs(ke,{className:"border-border shadow-sm",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Xe,{className:"text-sm font-medium",children:"Attendance Visible"}),o.jsx(GO,{className:"h-4 w-4 text-emerald-500"})]}),o.jsx(Fe,{children:o.jsx("div",{className:"text-2xl font-bold",children:e})})]}),o.jsxs(ke,{className:"border-border shadow-sm",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Xe,{className:"text-sm font-medium",children:"Attendance Hidden"}),o.jsx(zy,{className:"h-4 w-4 text-amber-500"})]}),o.jsx(Fe,{children:o.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function kG({courses:t,onRefresh:e,isLoading:n}){const[r,s]=f.useState(null);return o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[o.jsx(cf,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),o.jsxs("div",{className:"grid gap-6",children:[t.map(i=>o.jsxs(ke,{className:"overflow-hidden border-border shadow-sm",children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),o.jsx(ce,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&o.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:o.jsx(jG,{courseId:i.id})})]},i.id)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No active courses found where you are a teacher."}),o.jsx(ce,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function jG({courseId:t}){const{toast:e}=Yi(),[n,r]=f.useState(!1),[s,i]=f.useState(""),[a,l]=f.useState("A"),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{let g=!0;return(async()=>{m(!0);const v=await er.getCourseConfig(t);g&&v&&(r(v.isVisible),i(v.sheetUrl),l(v.emailColumn||"A")),g&&m(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!er.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await er.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:a.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?o.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[o.jsx(cf,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):o.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),o.jsx(kn,{checked:n,onCheckedChange:r})]})]}),o.jsxs("div",{className:"grid gap-4 max-w-xl",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),o.jsx(ws,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:`email-col-${t}`,children:"Email Column"}),o.jsx(ws,{id:`email-col-${t}`,value:a,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:o.jsx(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Mx,{className:"w-4 h-4 mr-2"}),"Saved"]}):o.jsxs(o.Fragment,{children:[o.jsx(Vx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function IG(){return o.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{children:"Notifications"}),o.jsx(cn,{children:"Configure how you receive alerts."})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xh,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Bt,{htmlFor:"email-notif",children:"Email Summaries"})]}),o.jsx(kn,{id:"email-notif",defaultChecked:!0})]})})]}),o.jsxs(ke,{children:[o.jsxs(Ge,{children:[o.jsx(Xe,{children:"Display"}),o.jsx(cn,{children:"Customize your dashboard appearance."})]}),o.jsx(Fe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xm,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Bt,{children:"Dark Mode"})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function AG(){const{accessToken:t}=et(),[e,n]=f.useState("dashboard"),[r,s]=f.useState([]),[i,a]=f.useState(!0),[l,c]=f.useState(!1);async function u(){if(t)try{a(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(m){console.error("Failed to fetch courses",m)}finally{setTimeout(()=>a(!1),1500)}}f.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?o.jsx(KP,{message:"Preparing Teacher Workspace...",tips:NG}):o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(TG,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[o.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:o.jsx(BC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),o.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&o.jsx(CG,{courses:r}),e==="courses"&&o.jsx(kG,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&o.jsx(IG,{})]})]})]})}function RG(){const{signOut:t,signInWithGoogle:e}=et();return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(ke,{className:"max-w-md w-full border-border shadow-lg",children:[o.jsxs(Ge,{className:"text-center space-y-2",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:o.jsx(WO,{className:"w-6 h-6 text-muted-foreground"})}),o.jsx(Xe,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),o.jsx(cn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),o.jsxs(Fe,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),o.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(LC,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(vm,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(OC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Ji,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:o.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),o.jsxs(_w,{className:"flex flex-col gap-2",children:[o.jsx(ce,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),o.jsxs(ce,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[o.jsx(lu,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function PG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(ym,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),o.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),o.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Courses:"})," To display your active classes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),o.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),o.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),o.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),o.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function DG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(ym,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),o.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Track attendance"})," and academic performance"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),o.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),o.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),o.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),o.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),o.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),o.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),o.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),o.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),o.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),o.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),o.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),o.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),o.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),o.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),o.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"The Service will be uninterrupted or error-free"}),o.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),o.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),o.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Violates these Terms of Service"}),o.jsx("li",{children:"Is harmful to other users or the Service"}),o.jsx("li",{children:"Exposes us to legal liability"})]}),o.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),o.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),o.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),o.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const MG=()=>"/";function OG(){const[t,e]=f.useState(!1),n=MG();return o.jsx(JT,{base:n,children:o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(k7,{mobileOpen:t,onMobileClose:()=>e(!1)}),o.jsx(SG,{}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[o.jsx(J$,{onMobileMenuClick:()=>e(!0)}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:o.jsxs(fM,{children:[o.jsx(Kn,{path:"/pipeline",component:TW}),o.jsx(Kn,{path:"/",children:()=>{const[,r]=hm();return f.useEffect(()=>{r("/dashboard")},[r]),null}}),o.jsx(Kn,{path:"/leaderboard",component:dG}),o.jsx(Kn,{path:"/clans",component:xG}),o.jsx(Kn,{path:"/timeline",component:oq}),o.jsx(Kn,{path:"/dashboard",component:gq}),o.jsx(Kn,{path:"/notes",component:yq}),o.jsx(Kn,{path:"/attendance",component:mG}),o.jsx(Kn,{path:"/settings",component:aG}),o.jsx(Kn,{path:"/settings/notifications",component:lG}),o.jsx(Kn,{path:"/settings/integrations",component:cG}),o.jsx(Kn,{component:wG})]})})]})]})})}function LG(){const{user:t,loading:e,role:n}=et();return _n(),window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy")?o.jsx(PG,{}):window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service")?o.jsx(DG,{}):e?o.jsx(KP,{message:"Authenticating..."}):t?n==="teacher"?o.jsx(AG,{}):n==="no_access"?o.jsx(RG,{}):o.jsx(OG,{}):o.jsx(lB,{})}function VG(){return o.jsx(LM,{client:zM,children:o.jsx(m7,{children:o.jsx(f7,{children:o.jsx(b7,{children:o.jsxs(Cm,{children:[o.jsx(Q3,{}),o.jsx(LG,{})]})})})})})}UT(document.getElementById("root")).render(o.jsx(VG,{}));
