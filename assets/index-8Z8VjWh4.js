var jw=t=>{throw TypeError(t)};var Jm=(t,e,n)=>e.has(t)||jw("Cannot "+n);var K=(t,e,n)=>(Jm(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?jw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Se=(t,e,n,r)=>(Jm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Wt=(t,e,n)=>(Jm(t,e,"access private method"),n);var Yu=(t,e,n,r)=>({set _(s){Se(t,e,s,n)},get _(){return K(t,e,r)}});function tP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var US={exports:{}},wf={},$S={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),nP=Symbol.for("react.portal"),rP=Symbol.for("react.fragment"),sP=Symbol.for("react.strict_mode"),iP=Symbol.for("react.profiler"),oP=Symbol.for("react.provider"),aP=Symbol.for("react.context"),lP=Symbol.for("react.forward_ref"),cP=Symbol.for("react.suspense"),uP=Symbol.for("react.memo"),dP=Symbol.for("react.lazy"),Rw=Symbol.iterator;function hP(t){return t===null||typeof t!="object"?null:(t=Rw&&t[Rw]||t["@@iterator"],typeof t=="function"?t:null)}var BS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WS=Object.assign,HS={};function il(t,e,n){this.props=t,this.context=e,this.refs=HS,this.updater=n||BS}il.prototype.isReactComponent={};il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qS(){}qS.prototype=il.prototype;function Xy(t,e,n){this.props=t,this.context=e,this.refs=HS,this.updater=n||BS}var Yy=Xy.prototype=new qS;Yy.constructor=Xy;WS(Yy,il.prototype);Yy.isPureReactComponent=!0;var Pw=Array.isArray,GS=Object.prototype.hasOwnProperty,Jy={current:null},KS={key:!0,ref:!0,__self:!0,__source:!0};function QS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)GS.call(e,r)&&!KS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:au,type:t,key:i,ref:o,props:s,_owner:Jy.current}}function fP(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zy(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function mP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dw=/\/+/g;function Zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mP(""+t.key):e.toString(36)}function Md(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case au:case nP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Zm(o,0):r,Pw(s)?(n="",t!=null&&(n=t.replace(Dw,"$&/")+"/"),Md(s,e,n,"",function(u){return u})):s!=null&&(Zy(s)&&(s=fP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Pw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Zm(i,l);o+=Md(i,e,n,c,s)}else if(c=hP(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Zm(i,l++),o+=Md(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ju(t,e,n){if(t==null)return t;var r=[],s=0;return Md(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},Od={transition:null},gP={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Od,ReactCurrentOwner:Jy};function XS(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!Zy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=il;Ne.Fragment=rP;Ne.Profiler=iP;Ne.PureComponent=Xy;Ne.StrictMode=sP;Ne.Suspense=cP;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP;Ne.act=XS;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=WS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)GS.call(e,c)&&!KS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:au,type:t.type,key:s,ref:i,props:r,_owner:o}};Ne.createContext=function(t){return t={$$typeof:aP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oP,_context:t},t.Consumer=t};Ne.createElement=QS;Ne.createFactory=function(t){var e=QS.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:lP,render:t}};Ne.isValidElement=Zy;Ne.lazy=function(t){return{$$typeof:dP,_payload:{_status:-1,_result:t},_init:pP}};Ne.memo=function(t,e){return{$$typeof:uP,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=Od.transition;Od.transition={};try{t()}finally{Od.transition=e}};Ne.unstable_act=XS;Ne.useCallback=function(t,e){return cn.current.useCallback(t,e)};Ne.useContext=function(t){return cn.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return cn.current.useEffect(t,e)};Ne.useId=function(){return cn.current.useId()};Ne.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return cn.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Ne.useRef=function(t){return cn.current.useRef(t)};Ne.useState=function(t){return cn.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return cn.current.useTransition()};Ne.version="18.3.1";$S.exports=Ne;var m=$S.exports;const Ee=zS(m),YS=tP({__proto__:null,default:Ee},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yP=m,vP=Symbol.for("react.element"),xP=Symbol.for("react.fragment"),wP=Object.prototype.hasOwnProperty,bP=yP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_P={key:!0,ref:!0,__self:!0,__source:!0};function JS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wP.call(e,r)&&!_P.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vP,type:t,key:i,ref:o,props:s,_owner:bP.current}}wf.Fragment=xP;wf.jsx=JS;wf.jsxs=JS;US.exports=wf;var a=US.exports,ZS={exports:{}},Fn={},eE={exports:{}},tE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var U=O.length;O.push(B);e:for(;0<U;){var W=U-1>>>1,q=O[W];if(0<s(q,B))O[W]=B,O[U]=q,U=W;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],U=O.pop();if(U!==B){O[0]=U;e:for(var W=0,q=O.length,ie=q>>>1;W<ie;){var ee=2*(W+1)-1,ne=O[ee],oe=ee+1,V=O[oe];if(0>s(ne,U))oe<q&&0>s(V,ne)?(O[W]=V,O[oe]=U,W=oe):(O[W]=ne,O[ee]=U,W=ee);else if(oe<q&&0>s(V,U))O[W]=V,O[oe]=U,W=oe;else break e}}return B}function s(O,B){var U=O.sortIndex-B.sortIndex;return U!==0?U:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,y=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function I(O){if(v=!1,S(O),!w)if(n(c)!==null)w=!0,J(D);else{var B=n(u);B!==null&&X(I,B.startTime-O)}}function D(O,B){w=!1,v&&(v=!1,b(N),N=-1),y=!0;var U=p;try{for(S(B),f=n(c);f!==null&&(!(f.expirationTime>B)||O&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var q=W(f.expirationTime<=B);B=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(c)&&r(c),S(B)}else r(c);f=n(c)}if(f!==null)var ie=!0;else{var ee=n(u);ee!==null&&X(I,ee.startTime-B),ie=!1}return ie}finally{f=null,p=U,y=!1}}var M=!1,T=null,N=-1,C=5,k=-1;function A(){return!(t.unstable_now()-k<C)}function P(){if(T!==null){var O=t.unstable_now();k=O;var B=!0;try{B=T(!0,O)}finally{B?R():(M=!1,T=null)}}else M=!1}var R;if(typeof x=="function")R=function(){x(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,se=F.port2;F.port1.onmessage=P,R=function(){se.postMessage(null)}}else R=function(){_(P,0)};function J(O){T=O,M||(M=!0,R())}function X(O,B){N=_(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,J(D))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var U=p;p=B;try{return O()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=p;p=O;try{return B()}finally{p=U}},t.unstable_scheduleCallback=function(O,B,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,O){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,O={id:h++,callback:B,priorityLevel:O,startTime:U,expirationTime:q,sortIndex:-1},U>W?(O.sortIndex=U,e(u,O),n(c)===null&&O===n(u)&&(v?(b(N),N=-1):v=!0,X(I,U-W))):(O.sortIndex=q,e(c,O),w||y||(w=!0,J(D))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var B=p;return function(){var U=p;p=B;try{return O.apply(this,arguments)}finally{p=U}}}})(tE);eE.exports=tE;var SP=eE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=m,Ln=SP;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nE=new Set,Ec={};function Vo(t,e){La(t,e),La(t+"Capture",e)}function La(t,e){for(Ec[t]=e,t=0;t<e.length;t++)nE.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ig=Object.prototype.hasOwnProperty,TP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mw={},Ow={};function NP(t){return ig.call(Ow,t)?!0:ig.call(Mw,t)?!1:TP.test(t)?Ow[t]=!0:(Mw[t]=!0,!1)}function CP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kP(t,e,n,r){if(e===null||typeof e>"u"||CP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kP(e,n,s,r)&&(n=null),r||s===null?NP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=EP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),rE=Symbol.for("react.provider"),sE=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),ag=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),iE=Symbol.for("react.offscreen"),Lw=Symbol.iterator;function Fl(t){return t===null||typeof t!="object"?null:(t=Lw&&t[Lw]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,ep;function Ql(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ql(t):""}function IP(t){switch(t.tag){case 5:return Ql(t.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function cg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case og:return"Profiler";case rv:return"StrictMode";case ag:return"Suspense";case lg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sE:return(t.displayName||"Context")+".Consumer";case rE:return(t._context.displayName||"Context")+".Provider";case sv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iv:return e=t.displayName||null,e!==null?e:cg(t.type)||"Memo";case qs:e=t._payload,t=t._init;try{return cg(t(e))}catch{}}return null}function AP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jP(t){var e=oE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=jP(t))}function aE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ug(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lE(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function dg(t,e){lE(t,e);var n=Si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&hg(t,e.type,Si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hg(t,e,n){(e!=="number"||uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xl=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Xl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Si(n)}}function cE(t,e){var n=Si(e.value),r=Si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Uw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,dE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RP=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(t){RP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sc[e]=sc[t]})});function hE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sc.hasOwnProperty(t)&&sc[t]?(""+e).trim():e+"px"}function fE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PP=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(t,e){if(e){if(PP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function gg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vg=null,ma=null,pa=null;function $w(t){if(t=uu(t)){if(typeof vg!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Tf(e),vg(t.stateNode,t.type,e))}}function mE(t){ma?pa?pa.push(t):pa=[t]:ma=t}function pE(){if(ma){var t=ma,e=pa;if(pa=ma=null,$w(t),e)for(t=0;t<e.length;t++)$w(e[t])}}function gE(t,e){return t(e)}function yE(){}var rp=!1;function vE(t,e,n){if(rp)return t(e,n);rp=!0;try{return gE(t,e,n)}finally{rp=!1,(ma!==null||pa!==null)&&(yE(),pE())}}function Nc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var xg=!1;if(ys)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){xg=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{xg=!1}function DP(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ic=!1,dh=null,hh=!1,wg=null,MP={onError:function(t){ic=!0,dh=t}};function OP(t,e,n,r,s,i,o,l,c){ic=!1,dh=null,DP.apply(MP,arguments)}function LP(t,e,n,r,s,i,o,l,c){if(OP.apply(this,arguments),ic){if(ic){var u=dh;ic=!1,dh=null}else throw Error(Z(198));hh||(hh=!0,wg=u)}}function Fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bw(t){if(Fo(t)!==t)throw Error(Z(188))}function VP(t){var e=t.alternate;if(!e){if(e=Fo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bw(s),t;if(i===r)return Bw(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function wE(t){return t=VP(t),t!==null?bE(t):null}function bE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bE(t);if(e!==null)return e;t=t.sibling}return null}var _E=Ln.unstable_scheduleCallback,Ww=Ln.unstable_cancelCallback,FP=Ln.unstable_shouldYield,zP=Ln.unstable_requestPaint,gt=Ln.unstable_now,UP=Ln.unstable_getCurrentPriorityLevel,av=Ln.unstable_ImmediatePriority,SE=Ln.unstable_UserBlockingPriority,fh=Ln.unstable_NormalPriority,$P=Ln.unstable_LowPriority,EE=Ln.unstable_IdlePriority,bf=null,Wr=null;function BP(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:qP,WP=Math.log,HP=Math.LN2;function qP(t){return t>>>=0,t===0?32:31-(WP(t)/HP|0)|0}var nd=64,rd=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yl(l):(i&=o,i!==0&&(r=Yl(i)))}else o=n&~s,o!==0?r=Yl(o):i!==0&&(r=Yl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mr(e),s=1<<n,r|=t[n],e&=~s;return r}function GP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=GP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function bg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TE(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function sp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mr(e),t[e]=n}function QP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ue=0;function NE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CE,cv,kE,IE,AE,_g=!1,sd=[],ci=null,ui=null,di=null,Cc=new Map,kc=new Map,Qs=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hw(t,e){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Ul(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=uu(e),e!==null&&cv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YP(t,e,n,r,s){switch(e){case"focusin":return ci=Ul(ci,t,e,n,r,s),!0;case"dragenter":return ui=Ul(ui,t,e,n,r,s),!0;case"mouseover":return di=Ul(di,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Cc.set(i,Ul(Cc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,kc.set(i,Ul(kc.get(i)||null,t,e,n,r,s)),!0}return!1}function jE(t){var e=ao(t.target);if(e!==null){var n=Fo(e);if(n!==null){if(e=n.tag,e===13){if(e=xE(n),e!==null){t.blockedOn=e,AE(t.priority,function(){kE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return e=uu(n),e!==null&&cv(e),t.blockedOn=n,!1;e.shift()}return!0}function qw(t,e,n){Ld(t)&&n.delete(e)}function JP(){_g=!1,ci!==null&&Ld(ci)&&(ci=null),ui!==null&&Ld(ui)&&(ui=null),di!==null&&Ld(di)&&(di=null),Cc.forEach(qw),kc.forEach(qw)}function $l(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,JP)))}function Ic(t){function e(s){return $l(s,t)}if(0<sd.length){$l(sd[0],t);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ci!==null&&$l(ci,t),ui!==null&&$l(ui,t),di!==null&&$l(di,t),Cc.forEach(e),kc.forEach(e),n=0;n<Qs.length;n++)r=Qs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qs.length&&(n=Qs[0],n.blockedOn===null);)jE(n),n.blockedOn===null&&Qs.shift()}var ga=ks.ReactCurrentBatchConfig,ph=!0;function ZP(t,e,n,r){var s=Ue,i=ga.transition;ga.transition=null;try{Ue=1,uv(t,e,n,r)}finally{Ue=s,ga.transition=i}}function eD(t,e,n,r){var s=Ue,i=ga.transition;ga.transition=null;try{Ue=4,uv(t,e,n,r)}finally{Ue=s,ga.transition=i}}function uv(t,e,n,r){if(ph){var s=Sg(t,e,n,r);if(s===null)mp(t,e,r,gh,n),Hw(t,r);else if(YP(s,t,e,n,r))r.stopPropagation();else if(Hw(t,r),e&4&&-1<XP.indexOf(t)){for(;s!==null;){var i=uu(s);if(i!==null&&CE(i),i=Sg(t,e,n,r),i===null&&mp(t,e,r,gh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mp(t,e,r,null,n)}}var gh=null;function Sg(t,e,n,r){if(gh=null,t=ov(r),t=ao(t),t!==null)if(e=Fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function RE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UP()){case av:return 1;case SE:return 4;case fh:case $P:return 16;case EE:return 536870912;default:return 16}default:return 16}}var ii=null,dv=null,Vd=null;function PE(){if(Vd)return Vd;var t,e=dv,n=e.length,r,s="value"in ii?ii.value:ii.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Vd=s.slice(t,1<r?1-r:void 0)}function Fd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function id(){return!0}function Gw(){return!1}function zn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?id:Gw,this.isPropagationStopped=Gw,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),e}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hv=zn(ol),cu=ct({},ol,{view:0,detail:0}),tD=zn(cu),ip,op,Bl,_f=ct({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(ip=t.screenX-Bl.screenX,op=t.screenY-Bl.screenY):op=ip=0,Bl=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:op}}),Kw=zn(_f),nD=ct({},_f,{dataTransfer:0}),rD=zn(nD),sD=ct({},cu,{relatedTarget:0}),ap=zn(sD),iD=ct({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),oD=zn(iD),aD=ct({},ol,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lD=zn(aD),cD=ct({},ol,{data:0}),Qw=zn(cD),uD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hD[t])?!!e[t]:!1}function fv(){return fD}var mD=ct({},cu,{key:function(t){if(t.key){var e=uD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fv,charCode:function(t){return t.type==="keypress"?Fd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pD=zn(mD),gD=ct({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xw=zn(gD),yD=ct({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fv}),vD=zn(yD),xD=ct({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),wD=zn(xD),bD=ct({},_f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_D=zn(bD),SD=[9,13,27,32],mv=ys&&"CompositionEvent"in window,oc=null;ys&&"documentMode"in document&&(oc=document.documentMode);var ED=ys&&"TextEvent"in window&&!oc,DE=ys&&(!mv||oc&&8<oc&&11>=oc),Yw=" ",Jw=!1;function ME(t,e){switch(t){case"keyup":return SD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function TD(t,e){switch(t){case"compositionend":return OE(e);case"keypress":return e.which!==32?null:(Jw=!0,Yw);case"textInput":return t=e.data,t===Yw&&Jw?null:t;default:return null}}function ND(t,e){if(na)return t==="compositionend"||!mv&&ME(t,e)?(t=PE(),Vd=dv=ii=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DE&&e.locale!=="ko"?null:e.data;default:return null}}var CD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CD[t.type]:e==="textarea"}function LE(t,e,n,r){mE(r),e=yh(e,"onChange"),0<e.length&&(n=new hv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ac=null,Ac=null;function kD(t){KE(t,0)}function Sf(t){var e=ia(t);if(aE(e))return t}function ID(t,e){if(t==="change")return e}var VE=!1;if(ys){var lp;if(ys){var cp="oninput"in document;if(!cp){var e1=document.createElement("div");e1.setAttribute("oninput","return;"),cp=typeof e1.oninput=="function"}lp=cp}else lp=!1;VE=lp&&(!document.documentMode||9<document.documentMode)}function t1(){ac&&(ac.detachEvent("onpropertychange",FE),Ac=ac=null)}function FE(t){if(t.propertyName==="value"&&Sf(Ac)){var e=[];LE(e,Ac,t,ov(t)),vE(kD,e)}}function AD(t,e,n){t==="focusin"?(t1(),ac=e,Ac=n,ac.attachEvent("onpropertychange",FE)):t==="focusout"&&t1()}function jD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sf(Ac)}function RD(t,e){if(t==="click")return Sf(e)}function PD(t,e){if(t==="input"||t==="change")return Sf(e)}function DD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:DD;function jc(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ig.call(e,s)||!br(t[s],e[s]))return!1}return!0}function n1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r1(t,e){var n=n1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n1(n)}}function zE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UE(){for(var t=window,e=uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uh(t.document)}return e}function pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MD(t){var e=UE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zE(n.ownerDocument.documentElement,n)){if(r!==null&&pv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=r1(n,i);var o=r1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OD=ys&&"documentMode"in document&&11>=document.documentMode,ra=null,Eg=null,lc=null,Tg=!1;function s1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||ra==null||ra!==uh(r)||(r=ra,"selectionStart"in r&&pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lc&&jc(lc,r)||(lc=r,r=yh(Eg,"onSelect"),0<r.length&&(e=new hv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ra)))}function od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},up={},$E={};ys&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function Ef(t){if(up[t])return up[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $E)return up[t]=e[n];return t}var BE=Ef("animationend"),WE=Ef("animationiteration"),HE=Ef("animationstart"),qE=Ef("transitionend"),GE=new Map,i1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(t,e){GE.set(t,e),Vo(e,[t])}for(var dp=0;dp<i1.length;dp++){var hp=i1[dp],LD=hp.toLowerCase(),VD=hp[0].toUpperCase()+hp.slice(1);Vi(LD,"on"+VD)}Vi(BE,"onAnimationEnd");Vi(WE,"onAnimationIteration");Vi(HE,"onAnimationStart");Vi("dblclick","onDoubleClick");Vi("focusin","onFocus");Vi("focusout","onBlur");Vi(qE,"onTransitionEnd");La("onMouseEnter",["mouseout","mouseover"]);La("onMouseLeave",["mouseout","mouseover"]);La("onPointerEnter",["pointerout","pointerover"]);La("onPointerLeave",["pointerout","pointerover"]);Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function o1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LP(r,e,void 0,t),t.currentTarget=null}function KE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;o1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;o1(s,l,u),i=c}}}if(hh)throw t=wg,hh=!1,wg=null,t}function tt(t,e){var n=e[Ag];n===void 0&&(n=e[Ag]=new Set);var r=t+"__bubble";n.has(r)||(QE(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),QE(n,t,r,e)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Rc(t){if(!t[ad]){t[ad]=!0,nE.forEach(function(n){n!=="selectionchange"&&(FD.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ad]||(e[ad]=!0,fp("selectionchange",!1,e))}}function QE(t,e,n,r){switch(RE(e)){case 1:var s=ZP;break;case 4:s=eD;break;default:s=uv}n=s.bind(null,e,n,t),s=void 0,!xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ao(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}vE(function(){var u=i,h=ov(n),f=[];e:{var p=GE.get(t);if(p!==void 0){var y=hv,w=t;switch(t){case"keypress":if(Fd(n)===0)break e;case"keydown":case"keyup":y=pD;break;case"focusin":w="focus",y=ap;break;case"focusout":w="blur",y=ap;break;case"beforeblur":case"afterblur":y=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Kw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=rD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=vD;break;case BE:case WE:case HE:y=oD;break;case qE:y=wD;break;case"scroll":y=tD;break;case"wheel":y=_D;break;case"copy":case"cut":case"paste":y=lD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xw}var v=(e&4)!==0,_=!v&&t==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,S;x!==null;){S=x;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,b!==null&&(I=Nc(x,b),I!=null&&v.push(Pc(x,I,S)))),_)break;x=x.return}0<v.length&&(p=new y(p,w,null,n,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==yg&&(w=n.relatedTarget||n.fromElement)&&(ao(w)||w[vs]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?ao(w):null,w!==null&&(_=Fo(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(v=Kw,I="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Xw,I="onPointerLeave",b="onPointerEnter",x="pointer"),_=y==null?p:ia(y),S=w==null?p:ia(w),p=new v(I,x+"leave",y,n,h),p.target=_,p.relatedTarget=S,I=null,ao(h)===u&&(v=new v(b,x+"enter",w,n,h),v.target=S,v.relatedTarget=_,I=v),_=I,y&&w)t:{for(v=y,b=w,x=0,S=v;S;S=qo(S))x++;for(S=0,I=b;I;I=qo(I))S++;for(;0<x-S;)v=qo(v),x--;for(;0<S-x;)b=qo(b),S--;for(;x--;){if(v===b||b!==null&&v===b.alternate)break t;v=qo(v),b=qo(b)}v=null}else v=null;y!==null&&a1(f,p,y,v,!1),w!==null&&_!==null&&a1(f,_,w,v,!0)}}e:{if(p=u?ia(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var D=ID;else if(Zw(p))if(VE)D=PD;else{D=jD;var M=AD}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=RD);if(D&&(D=D(t,u))){LE(f,D,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&hg(p,"number",p.value)}switch(M=u?ia(u):window,t){case"focusin":(Zw(M)||M.contentEditable==="true")&&(ra=M,Eg=u,lc=null);break;case"focusout":lc=Eg=ra=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,s1(f,n,h);break;case"selectionchange":if(OD)break;case"keydown":case"keyup":s1(f,n,h)}var T;if(mv)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else na?ME(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(DE&&n.locale!=="ko"&&(na||N!=="onCompositionStart"?N==="onCompositionEnd"&&na&&(T=PE()):(ii=h,dv="value"in ii?ii.value:ii.textContent,na=!0)),M=yh(u,N),0<M.length&&(N=new Qw(N,t,null,n,h),f.push({event:N,listeners:M}),T?N.data=T:(T=OE(n),T!==null&&(N.data=T)))),(T=ED?TD(t,n):ND(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(h=new Qw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}KE(f,e)})}function Pc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Nc(t,n),i!=null&&r.unshift(Pc(t,i,s)),i=Nc(t,e),i!=null&&r.push(Pc(t,i,s))),t=t.return}return r}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Nc(n,i),c!=null&&o.unshift(Pc(n,c,l))):s||(c=Nc(n,i),c!=null&&o.push(Pc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zD=/\r\n?/g,UD=/\u0000|\uFFFD/g;function l1(t){return(typeof t=="string"?t:""+t).replace(zD,`
`).replace(UD,"")}function ld(t,e,n){if(e=l1(e),l1(t)!==e&&n)throw Error(Z(425))}function vh(){}var Ng=null,Cg=null;function kg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,$D=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,BD=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(t){return c1.resolve(null).then(t).catch(WD)}:Ig;function WD(t){setTimeout(function(){throw t})}function pp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ic(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ic(e)}function hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function u1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var al=Math.random().toString(36).slice(2),$r="__reactFiber$"+al,Dc="__reactProps$"+al,vs="__reactContainer$"+al,Ag="__reactEvents$"+al,HD="__reactListeners$"+al,qD="__reactHandles$"+al;function ao(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vs]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=u1(t);t!==null;){if(n=t[$r])return n;t=u1(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[$r]||t[vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Tf(t){return t[Dc]||null}var jg=[],oa=-1;function Fi(t){return{current:t}}function nt(t){0>oa||(t.current=jg[oa],jg[oa]=null,oa--)}function Ye(t,e){oa++,jg[oa]=t.current,t.current=e}var Ei={},en=Fi(Ei),bn=Fi(!1),So=Ei;function Va(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _n(t){return t=t.childContextTypes,t!=null}function xh(){nt(bn),nt(en)}function d1(t,e,n){if(en.current!==Ei)throw Error(Z(168));Ye(en,e),Ye(bn,n)}function XE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,AP(t)||"Unknown",s));return ct({},n,r)}function wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,So=en.current,Ye(en,t),Ye(bn,bn.current),!0}function h1(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=XE(t,e,So),r.__reactInternalMemoizedMergedChildContext=t,nt(bn),nt(en),Ye(en,t)):nt(bn),Ye(bn,n)}var os=null,Nf=!1,gp=!1;function YE(t){os===null?os=[t]:os.push(t)}function GD(t){Nf=!0,YE(t)}function zi(){if(!gp&&os!==null){gp=!0;var t=0,e=Ue;try{var n=os;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}os=null,Nf=!1}catch(s){throw os!==null&&(os=os.slice(t+1)),_E(av,zi),s}finally{Ue=e,gp=!1}}return null}var aa=[],la=0,bh=null,_h=0,Wn=[],Hn=0,Eo=null,us=1,ds="";function ro(t,e){aa[la++]=_h,aa[la++]=bh,bh=t,_h=e}function JE(t,e,n){Wn[Hn++]=us,Wn[Hn++]=ds,Wn[Hn++]=Eo,Eo=t;var r=us;t=ds;var s=32-mr(r)-1;r&=~(1<<s),n+=1;var i=32-mr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,us=1<<32-mr(e)+s|n<<s|r,ds=i+t}else us=1<<i|n<<s|r,ds=t}function gv(t){t.return!==null&&(ro(t,1),JE(t,1,0))}function yv(t){for(;t===bh;)bh=aa[--la],aa[la]=null,_h=aa[--la],aa[la]=null;for(;t===Eo;)Eo=Wn[--Hn],Wn[Hn]=null,ds=Wn[--Hn],Wn[Hn]=null,us=Wn[--Hn],Wn[Hn]=null}var Mn=null,Pn=null,st=!1,ur=null;function ZE(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mn=t,Pn=hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eo!==null?{id:us,overflow:ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mn=t,Pn=null,!0):!1;default:return!1}}function Rg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(st){var e=Pn;if(e){var n=e;if(!f1(t,e)){if(Rg(t))throw Error(Z(418));e=hi(n.nextSibling);var r=Mn;e&&f1(t,e)?ZE(r,n):(t.flags=t.flags&-4097|2,st=!1,Mn=t)}}else{if(Rg(t))throw Error(Z(418));t.flags=t.flags&-4097|2,st=!1,Mn=t}}}function m1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mn=t}function cd(t){if(t!==Mn)return!1;if(!st)return m1(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kg(t.type,t.memoizedProps)),e&&(e=Pn)){if(Rg(t))throw eT(),Error(Z(418));for(;e;)ZE(t,e),e=hi(e.nextSibling)}if(m1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Mn?hi(t.stateNode.nextSibling):null;return!0}function eT(){for(var t=Pn;t;)t=hi(t.nextSibling)}function Fa(){Pn=Mn=null,st=!1}function vv(t){ur===null?ur=[t]:ur.push(t)}var KD=ks.ReactCurrentBatchConfig;function Wl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ud(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function p1(t){var e=t._init;return e(t._payload)}function tT(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=gi(b,x),b.index=0,b.sibling=null,b}function i(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,I){return x===null||x.tag!==6?(x=Sp(S,b.mode,I),x.return=b,x):(x=s(x,S),x.return=b,x)}function c(b,x,S,I){var D=S.type;return D===ta?h(b,x,S.props.children,I,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===qs&&p1(D)===x.type)?(I=s(x,S.props),I.ref=Wl(b,x,S),I.return=b,I):(I=qd(S.type,S.key,S.props,null,b.mode,I),I.ref=Wl(b,x,S),I.return=b,I)}function u(b,x,S,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Ep(S,b.mode,I),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function h(b,x,S,I,D){return x===null||x.tag!==7?(x=vo(S,b.mode,I,D),x.return=b,x):(x=s(x,S),x.return=b,x)}function f(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sp(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zu:return S=qd(x.type,x.key,x.props,null,b.mode,S),S.ref=Wl(b,null,x),S.return=b,S;case ea:return x=Ep(x,b.mode,S),x.return=b,x;case qs:var I=x._init;return f(b,I(x._payload),S)}if(Xl(x)||Fl(x))return x=vo(x,b.mode,S,null),x.return=b,x;ud(b,x)}return null}function p(b,x,S,I){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(b,x,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zu:return S.key===D?c(b,x,S,I):null;case ea:return S.key===D?u(b,x,S,I):null;case qs:return D=S._init,p(b,x,D(S._payload),I)}if(Xl(S)||Fl(S))return D!==null?null:h(b,x,S,I,null);ud(b,S)}return null}function y(b,x,S,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return b=b.get(S)||null,l(x,b,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zu:return b=b.get(I.key===null?S:I.key)||null,c(x,b,I,D);case ea:return b=b.get(I.key===null?S:I.key)||null,u(x,b,I,D);case qs:var M=I._init;return y(b,x,S,M(I._payload),D)}if(Xl(I)||Fl(I))return b=b.get(S)||null,h(x,b,I,D,null);ud(x,I)}return null}function w(b,x,S,I){for(var D=null,M=null,T=x,N=x=0,C=null;T!==null&&N<S.length;N++){T.index>N?(C=T,T=null):C=T.sibling;var k=p(b,T,S[N],I);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(b,T),x=i(k,x,N),M===null?D=k:M.sibling=k,M=k,T=C}if(N===S.length)return n(b,T),st&&ro(b,N),D;if(T===null){for(;N<S.length;N++)T=f(b,S[N],I),T!==null&&(x=i(T,x,N),M===null?D=T:M.sibling=T,M=T);return st&&ro(b,N),D}for(T=r(b,T);N<S.length;N++)C=y(T,b,N,S[N],I),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?N:C.key),x=i(C,x,N),M===null?D=C:M.sibling=C,M=C);return t&&T.forEach(function(A){return e(b,A)}),st&&ro(b,N),D}function v(b,x,S,I){var D=Fl(S);if(typeof D!="function")throw Error(Z(150));if(S=D.call(S),S==null)throw Error(Z(151));for(var M=D=null,T=x,N=x=0,C=null,k=S.next();T!==null&&!k.done;N++,k=S.next()){T.index>N?(C=T,T=null):C=T.sibling;var A=p(b,T,k.value,I);if(A===null){T===null&&(T=C);break}t&&T&&A.alternate===null&&e(b,T),x=i(A,x,N),M===null?D=A:M.sibling=A,M=A,T=C}if(k.done)return n(b,T),st&&ro(b,N),D;if(T===null){for(;!k.done;N++,k=S.next())k=f(b,k.value,I),k!==null&&(x=i(k,x,N),M===null?D=k:M.sibling=k,M=k);return st&&ro(b,N),D}for(T=r(b,T);!k.done;N++,k=S.next())k=y(T,b,N,k.value,I),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?N:k.key),x=i(k,x,N),M===null?D=k:M.sibling=k,M=k);return t&&T.forEach(function(P){return e(b,P)}),st&&ro(b,N),D}function _(b,x,S,I){if(typeof S=="object"&&S!==null&&S.type===ta&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zu:e:{for(var D=S.key,M=x;M!==null;){if(M.key===D){if(D=S.type,D===ta){if(M.tag===7){n(b,M.sibling),x=s(M,S.props.children),x.return=b,b=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===qs&&p1(D)===M.type){n(b,M.sibling),x=s(M,S.props),x.ref=Wl(b,M,S),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}S.type===ta?(x=vo(S.props.children,b.mode,I,S.key),x.return=b,b=x):(I=qd(S.type,S.key,S.props,null,b.mode,I),I.ref=Wl(b,x,S),I.return=b,b=I)}return o(b);case ea:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Ep(S,b.mode,I),x.return=b,b=x}return o(b);case qs:return M=S._init,_(b,x,M(S._payload),I)}if(Xl(S))return w(b,x,S,I);if(Fl(S))return v(b,x,S,I);ud(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=Sp(S,b.mode,I),x.return=b,b=x),o(b)):n(b,x)}return _}var za=tT(!0),nT=tT(!1),Sh=Fi(null),Eh=null,ca=null,xv=null;function wv(){xv=ca=Eh=null}function bv(t){var e=Sh.current;nt(Sh),t._currentValue=e}function Dg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){Eh=t,xv=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(xv!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(Eh===null)throw Error(Z(308));ca=t,Eh.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var lo=null;function _v(t){lo===null?lo=[t]:lo.push(t)}function rT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_v(e)):(n.next=s.next,s.next=n),e.interleaved=n,xs(t,r)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gs=!1;function Sv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xs(t,n)}return s=r.interleaved,s===null?(e.next=e,_v(r)):(e.next=s.next,s.next=e),r.interleaved=e,xs(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}function g1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var s=t.updateQueue;Gs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,y=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,v=l;switch(p=e,y=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(y,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(y,f,p):w,p==null)break e;f=ct({},f,p);break e;case 2:Gs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);No|=o,t.lanes=o,t.memoizedState=f}}function y1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var du={},Hr=Fi(du),Mc=Fi(du),Oc=Fi(du);function co(t){if(t===du)throw Error(Z(174));return t}function Ev(t,e){switch(Ye(Oc,e),Ye(Mc,t),Ye(Hr,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mg(e,t)}nt(Hr),Ye(Hr,e)}function Ua(){nt(Hr),nt(Mc),nt(Oc)}function iT(t){co(Oc.current);var e=co(Hr.current),n=mg(e,t.type);e!==n&&(Ye(Mc,t),Ye(Hr,n))}function Tv(t){Mc.current===t&&(nt(Hr),nt(Mc))}var ot=Fi(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yp=[];function Nv(){for(var t=0;t<yp.length;t++)yp[t]._workInProgressVersionPrimary=null;yp.length=0}var Ud=ks.ReactCurrentDispatcher,vp=ks.ReactCurrentBatchConfig,To=0,lt=null,Et=null,Rt=null,Ch=!1,cc=!1,Lc=0,QD=0;function Ht(){throw Error(Z(321))}function Cv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function kv(t,e,n,r,s,i){if(To=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ud.current=t===null||t.memoizedState===null?ZD:e4,t=n(r,s),cc){i=0;do{if(cc=!1,Lc=0,25<=i)throw Error(Z(301));i+=1,Rt=Et=null,e.updateQueue=null,Ud.current=t4,t=n(r,s)}while(cc)}if(Ud.current=kh,e=Et!==null&&Et.next!==null,To=0,Rt=Et=lt=null,Ch=!1,e)throw Error(Z(300));return t}function Iv(){var t=Lc!==0;return Lc=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Zn(){if(Et===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Rt===null?lt.memoizedState:Rt.next;if(e!==null)Rt=e,Et=t;else{if(t===null)throw Error(Z(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Vc(t,e){return typeof e=="function"?e(t):e}function xp(t){var e=Zn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((To&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,lt.lanes|=h,No|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,br(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,lt.lanes|=i,No|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Zn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);br(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function oT(){}function aT(t,e){var n=lt,r=Zn(),s=e(),i=!br(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,Av(uT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Fc(9,cT.bind(null,n,r,s,e),void 0,null),Mt===null)throw Error(Z(349));To&30||lT(n,e,s)}return s}function lT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cT(t,e,n,r){e.value=n,e.getSnapshot=r,dT(e)&&hT(t)}function uT(t,e,n){return n(function(){dT(e)&&hT(t)})}function dT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!br(t,n)}catch{return!0}}function hT(t){var e=xs(t,1);e!==null&&pr(e,t,1,-1)}function v1(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:t},e.queue=t,t=t.dispatch=JD.bind(null,lt,t),[e.memoizedState,t]}function Fc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fT(){return Zn().memoizedState}function $d(t,e,n,r){var s=Lr();lt.flags|=t,s.memoizedState=Fc(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var s=Zn();r=r===void 0?null:r;var i=void 0;if(Et!==null){var o=Et.memoizedState;if(i=o.destroy,r!==null&&Cv(r,o.deps)){s.memoizedState=Fc(e,n,i,r);return}}lt.flags|=t,s.memoizedState=Fc(1|e,n,i,r)}function x1(t,e){return $d(8390656,8,t,e)}function Av(t,e){return Cf(2048,8,t,e)}function mT(t,e){return Cf(4,2,t,e)}function pT(t,e){return Cf(4,4,t,e)}function gT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yT(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,gT.bind(null,e,t),n)}function jv(){}function vT(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xT(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wT(t,e,n){return To&21?(br(n,e)||(n=TE(),lt.lanes|=n,No|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function XD(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=vp.transition;vp.transition={};try{t(!1),e()}finally{Ue=n,vp.transition=r}}function bT(){return Zn().memoizedState}function YD(t,e,n){var r=pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_T(t))ST(e,n);else if(n=rT(t,e,n,r),n!==null){var s=an();pr(n,t,r,s),ET(n,e,r)}}function JD(t,e,n){var r=pi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_T(t))ST(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,br(l,o)){var c=e.interleaved;c===null?(s.next=s,_v(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=rT(t,e,s,r),n!==null&&(s=an(),pr(n,t,r,s),ET(n,e,r))}}function _T(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function ST(t,e){cc=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ET(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}var kh={readContext:Jn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},ZD={readContext:Jn,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:x1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,gT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YD.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:v1,useDebugValue:jv,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=v1(!1),e=t[0];return t=XD.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=Lr();if(st){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Mt===null)throw Error(Z(349));To&30||lT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,x1(uT.bind(null,r,i,t),[t]),r.flags|=2048,Fc(9,cT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Mt.identifierPrefix;if(st){var n=ds,r=us;n=(r&~(1<<32-mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e4={readContext:Jn,useCallback:vT,useContext:Jn,useEffect:Av,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:xT,useReducer:xp,useRef:fT,useState:function(){return xp(Vc)},useDebugValue:jv,useDeferredValue:function(t){var e=Zn();return wT(e,Et.memoizedState,t)},useTransition:function(){var t=xp(Vc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:oT,useSyncExternalStore:aT,useId:bT,unstable_isNewReconciler:!1},t4={readContext:Jn,useCallback:vT,useContext:Jn,useEffect:Av,useImperativeHandle:yT,useInsertionEffect:mT,useLayoutEffect:pT,useMemo:xT,useReducer:wp,useRef:fT,useState:function(){return wp(Vc)},useDebugValue:jv,useDeferredValue:function(t){var e=Zn();return Et===null?e.memoizedState=t:wT(e,Et.memoizedState,t)},useTransition:function(){var t=wp(Vc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:oT,useSyncExternalStore:aT,useId:bT,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kf={isMounted:function(t){return(t=t._reactInternals)?Fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),s=pi(t),i=ms(r,s);i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,s),e!==null&&(pr(e,t,s,r),zd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),s=pi(t),i=ms(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,s),e!==null&&(pr(e,t,s,r),zd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=pi(t),s=ms(n,r);s.tag=2,e!=null&&(s.callback=e),e=fi(t,s,r),e!==null&&(pr(e,t,r,n),zd(e,t,r))}};function w1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!jc(n,r)||!jc(s,i):!0}function TT(t,e,n){var r=!1,s=Ei,i=e.contextType;return typeof i=="object"&&i!==null?i=Jn(i):(s=_n(e)?So:en.current,r=e.contextTypes,i=(r=r!=null)?Va(t,s):Ei),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function b1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kf.enqueueReplaceState(e,e.state,null)}function Og(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jn(i):(i=_n(e)?So:en.current,s.context=Va(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kf.enqueueReplaceState(s,s.state,null),Th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var n="",r=e;do n+=IP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var n4=typeof WeakMap=="function"?WeakMap:Map;function NT(t,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ah||(Ah=!0,Gg=r),Lg(t,e)},n}function CT(t,e,n){n=ms(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lg(t,e),typeof r!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new n4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=g4.bind(null,t,e,n),e.then(t,t))}function S1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var r4=ks.ReactCurrentOwner,wn=!1;function sn(t,e,n,r){e.child=t===null?nT(e,null,n,r):za(e,t.child,n,r)}function T1(t,e,n,r,s){n=n.render;var i=e.ref;return ya(e,s),r=kv(t,e,n,r,i,s),n=Iv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(st&&n&&gv(e),e.flags|=1,sn(t,e,r,s),e.child)}function N1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kT(t,e,i,r,s)):(t=qd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:jc,n(o,r)&&t.ref===e.ref)return ws(t,e,s)}return e.flags|=1,t=gi(i,r),t.ref=e.ref,t.return=e,e.child=t}function kT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(jc(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,ws(t,e,s)}return Vg(t,e,n,r,s)}function IT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(da,An),An|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(da,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(da,An),An|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(da,An),An|=r;return sn(t,e,s,n),e.child}function AT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vg(t,e,n,r,s){var i=_n(n)?So:en.current;return i=Va(e,i),ya(e,s),n=kv(t,e,n,r,i,s),r=Iv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(st&&r&&gv(e),e.flags|=1,sn(t,e,n,s),e.child)}function C1(t,e,n,r,s){if(_n(n)){var i=!0;wh(e)}else i=!1;if(ya(e,s),e.stateNode===null)Bd(t,e),TT(e,n,r),Og(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jn(u):(u=_n(n)?So:en.current,u=Va(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&b1(e,o,r,u),Gs=!1;var p=e.memoizedState;o.state=p,Th(e,r,o,s),c=e.memoizedState,l!==r||p!==c||bn.current||Gs?(typeof h=="function"&&(Mg(e,n,h,r),c=e.memoizedState),(l=Gs||w1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:or(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jn(c):(c=_n(n)?So:en.current,c=Va(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&b1(e,o,r,c),Gs=!1,p=e.memoizedState,o.state=p,Th(e,r,o,s);var w=e.memoizedState;l!==f||p!==w||bn.current||Gs?(typeof y=="function"&&(Mg(e,n,y,r),w=e.memoizedState),(u=Gs||w1(e,n,u,r,p,w,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Fg(t,e,n,r,i,s)}function Fg(t,e,n,r,s,i){AT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&h1(e,n,!1),ws(t,e,i);r=e.stateNode,r4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=za(e,t.child,null,i),e.child=za(e,null,l,i)):sn(t,e,l,i),e.memoizedState=r.state,s&&h1(e,n,!0),e.child}function jT(t){var e=t.stateNode;e.pendingContext?d1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d1(t,e.context,!1),Ev(t,e.containerInfo)}function k1(t,e,n,r,s){return Fa(),vv(s),e.flags|=256,sn(t,e,n,r),e.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function Ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function RT(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(ot,s&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jf(o,r,0,null),t=vo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ug(n),e.memoizedState=zg,t):Rv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return s4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gi(l,i):(i=vo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zg,r}return i=t.child,t=i.sibling,r=gi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rv(t,e){return e=jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,r){return r!==null&&vv(r),za(e,t.child,null,n),t=Rv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(Z(422))),dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jf({mode:"visible",children:r.children},s,0,null),i=vo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&za(e,t.child,null,o),e.child.memoizedState=Ug(o),e.memoizedState=zg,i);if(!(e.mode&1))return dd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=bp(i,r,void 0),dd(t,e,o,r)}if(l=(o&t.childLanes)!==0,wn||l){if(r=Mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xs(t,s),pr(r,t,s,-1))}return Vv(),r=bp(Error(Z(421))),dd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=y4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pn=hi(s.nextSibling),Mn=e,st=!0,ur=null,t!==null&&(Wn[Hn++]=us,Wn[Hn++]=ds,Wn[Hn++]=Eo,us=t.id,ds=t.overflow,Eo=e),e=Rv(e,r.children),e.flags|=4096,e)}function I1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dg(t.return,e,n)}function _p(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function PT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(sn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I1(t,n,e);else if(t.tag===19)I1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_p(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_p(e,!0,n,null,i);break;case"together":_p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),No|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i4(t,e,n){switch(e.tag){case 3:jT(e),Fa();break;case 5:iT(e);break;case 1:_n(e.type)&&wh(e);break;case 4:Ev(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(Sh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?RT(t,e,n):(Ye(ot,ot.current&1),t=ws(t,e,n),t!==null?t.sibling:null);Ye(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,IT(t,e,n)}return ws(t,e,n)}var DT,$g,MT,OT;DT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};MT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,co(Hr.current);var i=null;switch(n){case"input":s=ug(t,s),r=ug(t,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=fg(t,s),r=fg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vh)}pg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ec.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};OT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function o4(t,e,n){var r=e.pendingProps;switch(yv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return _n(e.type)&&xh(),qt(e),null;case 3:return r=e.stateNode,Ua(),nt(bn),nt(en),Nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(Xg(ur),ur=null))),$g(t,e),qt(e),null;case 5:Tv(e);var s=co(Oc.current);if(n=e.type,t!==null&&e.stateNode!=null)MT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return qt(e),null}if(t=co(Hr.current),cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[Dc]=i,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<Jl.length;s++)tt(Jl[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Vw(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":zw(r,i),tt("invalid",r)}pg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,l,t),s=["children",""+l]):Ec.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":ed(r),Fw(r,i,!0);break;case"textarea":ed(r),Uw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[Dc]=r,DT(t,e,!1,!1),e.stateNode=t;e:{switch(o=gg(n,r),n){case"dialog":tt("cancel",t),tt("close",t),s=r;break;case"iframe":case"object":case"embed":tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jl.length;s++)tt(Jl[s],t);s=r;break;case"source":tt("error",t),s=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),s=r;break;case"details":tt("toggle",t),s=r;break;case"input":Vw(t,r),s=ug(t,r),tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),tt("invalid",t);break;case"textarea":zw(t,r),s=fg(t,r),tt("invalid",t);break;default:s=r}pg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tc(t,c):typeof c=="number"&&Tc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ec.hasOwnProperty(i)?c!=null&&i==="onScroll"&&tt("scroll",t):c!=null&&nv(t,i,c,o))}switch(n){case"input":ed(t),Fw(t,r,!1);break;case"textarea":ed(t),Uw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Si(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fa(t,!!r.multiple,i,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)OT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=co(Oc.current),co(Hr.current),cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Mn,t!==null))switch(t.tag){case 3:ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return qt(e),null;case 13:if(nt(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Pn!==null&&e.mode&1&&!(e.flags&128))eT(),Fa(),e.flags|=98560,i=!1;else if(i=cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[$r]=e}else Fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),i=!1}else ur!==null&&(Xg(ur),ur=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Ct===0&&(Ct=3):Vv())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Ua(),$g(t,e),t===null&&Rc(e.stateNode.containerInfo),qt(e),null;case 10:return bv(e.type._context),qt(e),null;case 17:return _n(e.type)&&xh(),qt(e),null;case 19:if(nt(ot),i=e.memoizedState,i===null)return qt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hl(i,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,Hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&gt()>Ba&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!st)return qt(e),null}else 2*gt()-i.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=gt(),e.sibling=null,n=ot.current,Ye(ot,r?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return Lv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function a4(t,e){switch(yv(e),e.tag){case 1:return _n(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ua(),nt(bn),nt(en),Nv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tv(e),null;case 13:if(nt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ot),null;case 4:return Ua(),null;case 10:return bv(e.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var hd=!1,Yt=!1,l4=typeof WeakSet=="function"?WeakSet:Set,he=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function Bg(t,e,n){try{n()}catch(r){ft(t,e,r)}}var A1=!1;function c4(t,e){if(Ng=ph,t=UE(),pv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},ph=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:or(e.type,v),_);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(I){ft(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return w=A1,A1=!1,w}function uc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bg(e,n,i)}s=s.next}while(s!==r)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LT(t){var e=t.alternate;e!==null&&(t.alternate=null,LT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Dc],delete e[Ag],delete e[HD],delete e[qD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VT(t){return t.tag===5||t.tag===3||t.tag===4}function j1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vh));else if(r!==4&&(t=t.child,t!==null))for(Hg(t,e,n),t=t.sibling;t!==null;)Hg(t,e,n),t=t.sibling}function qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qg(t,e,n),t=t.sibling;t!==null;)qg(t,e,n),t=t.sibling}var Ft=null,cr=!1;function zs(t,e,n){for(n=n.child;n!==null;)FT(t,e,n),n=n.sibling}function FT(t,e,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Yt||ua(n,e);case 6:var r=Ft,s=cr;Ft=null,zs(t,e,n),Ft=r,cr=s,Ft!==null&&(cr?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(cr?(t=Ft,n=n.stateNode,t.nodeType===8?pp(t.parentNode,n):t.nodeType===1&&pp(t,n),Ic(t)):pp(Ft,n.stateNode));break;case 4:r=Ft,s=cr,Ft=n.stateNode.containerInfo,cr=!0,zs(t,e,n),Ft=r,cr=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bg(n,e,o),s=s.next}while(s!==r)}zs(t,e,n);break;case 1:if(!Yt&&(ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}zs(t,e,n);break;case 21:zs(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,zs(t,e,n),Yt=r):zs(t,e,n);break;default:zs(t,e,n)}}function R1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new l4),e.forEach(function(r){var s=v4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ft=l.stateNode,cr=!1;break e;case 3:Ft=l.stateNode.containerInfo,cr=!0;break e;case 4:Ft=l.stateNode.containerInfo,cr=!0;break e}l=l.return}if(Ft===null)throw Error(Z(160));FT(i,o,s),Ft=null,cr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zT(e,t),e=e.sibling}function zT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),Or(t),r&4){try{uc(3,t,t.return),If(3,t)}catch(v){ft(t,t.return,v)}try{uc(5,t,t.return)}catch(v){ft(t,t.return,v)}}break;case 1:rr(e,t),Or(t),r&512&&n!==null&&ua(n,n.return);break;case 5:if(rr(e,t),Or(t),r&512&&n!==null&&ua(n,n.return),t.flags&32){var s=t.stateNode;try{Tc(s,"")}catch(v){ft(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lE(s,i),gg(l,o);var u=gg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?fE(s,f):h==="dangerouslySetInnerHTML"?dE(s,f):h==="children"?Tc(s,f):nv(s,h,f,u)}switch(l){case"input":dg(s,i);break;case"textarea":cE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?fa(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?fa(s,!!i.multiple,i.defaultValue,!0):fa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dc]=i}catch(v){ft(t,t.return,v)}}break;case 6:if(rr(e,t),Or(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ft(t,t.return,v)}}break;case 3:if(rr(e,t),Or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ic(e.containerInfo)}catch(v){ft(t,t.return,v)}break;case 4:rr(e,t),Or(t);break;case 13:rr(e,t),Or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mv=gt())),r&4&&R1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(u=Yt)||h,rr(e,t),Yt=u):rr(e,t),Or(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(he=t,h=t.child;h!==null;){for(f=he=h;he!==null;){switch(p=he,y=p.child,p.tag){case 0:case 11:case 14:case 15:uc(4,p,p.return);break;case 1:ua(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){ft(r,n,v)}}break;case 5:ua(p,p.return);break;case 22:if(p.memoizedState!==null){D1(f);continue}}y!==null?(y.return=p,he=y):D1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hE("display",o))}catch(v){ft(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ft(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rr(e,t),Or(t),r&4&&R1(t);break;case 21:break;default:rr(e,t),Or(t)}}function Or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(VT(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tc(s,""),r.flags&=-33);var i=j1(t);qg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=j1(t);Hg(t,l,o);break;default:throw Error(Z(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u4(t,e,n){he=t,UT(t)}function UT(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var s=he,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Yt;l=hd;var u=Yt;if(hd=o,(Yt=c)&&!u)for(he=s;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?M1(s):c!==null?(c.return=o,he=c):M1(s);for(;i!==null;)he=i,UT(i),i=i.sibling;he=s,hd=l,Yt=u}P1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,he=i):P1(t)}}function P1(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||If(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ic(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Yt||e.flags&512&&Wg(e)}catch(p){ft(e,e.return,p)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function D1(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function M1(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{If(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ft(e,s,c)}}var i=e.return;try{Wg(e)}catch(c){ft(e,i,c)}break;case 5:var o=e.return;try{Wg(e)}catch(c){ft(e,o,c)}}}catch(c){ft(e,e.return,c)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var d4=Math.ceil,Ih=ks.ReactCurrentDispatcher,Pv=ks.ReactCurrentOwner,Xn=ks.ReactCurrentBatchConfig,Pe=0,Mt=null,vt=null,Ut=0,An=0,da=Fi(0),Ct=0,zc=null,No=0,Af=0,Dv=0,dc=null,yn=null,Mv=0,Ba=1/0,is=null,Ah=!1,Gg=null,mi=null,fd=!1,oi=null,jh=0,hc=0,Kg=null,Wd=-1,Hd=0;function an(){return Pe&6?gt():Wd!==-1?Wd:Wd=gt()}function pi(t){return t.mode&1?Pe&2&&Ut!==0?Ut&-Ut:KD.transition!==null?(Hd===0&&(Hd=TE()),Hd):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:RE(t.type)),t):1}function pr(t,e,n,r){if(50<hc)throw hc=0,Kg=null,Error(Z(185));lu(t,n,r),(!(Pe&2)||t!==Mt)&&(t===Mt&&(!(Pe&2)&&(Af|=n),Ct===4&&Xs(t,Ut)),Sn(t,r),n===1&&Pe===0&&!(e.mode&1)&&(Ba=gt()+500,Nf&&zi()))}function Sn(t,e){var n=t.callbackNode;KP(t,e);var r=mh(t,t===Mt?Ut:0);if(r===0)n!==null&&Ww(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ww(n),e===1)t.tag===0?GD(O1.bind(null,t)):YE(O1.bind(null,t)),BD(function(){!(Pe&6)&&zi()}),n=null;else{switch(NE(r)){case 1:n=av;break;case 4:n=SE;break;case 16:n=fh;break;case 536870912:n=EE;break;default:n=fh}n=QT(n,$T.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $T(t,e){if(Wd=-1,Hd=0,Pe&6)throw Error(Z(327));var n=t.callbackNode;if(va()&&t.callbackNode!==n)return null;var r=mh(t,t===Mt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rh(t,r);else{e=r;var s=Pe;Pe|=2;var i=WT();(Mt!==t||Ut!==e)&&(is=null,Ba=gt()+500,yo(t,e));do try{m4();break}catch(l){BT(t,l)}while(!0);wv(),Ih.current=i,Pe=s,vt!==null?e=0:(Mt=null,Ut=0,e=Ct)}if(e!==0){if(e===2&&(s=bg(t),s!==0&&(r=s,e=Qg(t,s))),e===1)throw n=zc,yo(t,0),Xs(t,r),Sn(t,gt()),n;if(e===6)Xs(t,r);else{if(s=t.current.alternate,!(r&30)&&!h4(s)&&(e=Rh(t,r),e===2&&(i=bg(t),i!==0&&(r=i,e=Qg(t,i))),e===1))throw n=zc,yo(t,0),Xs(t,r),Sn(t,gt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:so(t,yn,is);break;case 3:if(Xs(t,r),(r&130023424)===r&&(e=Mv+500-gt(),10<e)){if(mh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ig(so.bind(null,t,yn,is),e);break}so(t,yn,is);break;case 4:if(Xs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d4(r/1960))-r,10<r){t.timeoutHandle=Ig(so.bind(null,t,yn,is),r);break}so(t,yn,is);break;case 5:so(t,yn,is);break;default:throw Error(Z(329))}}}return Sn(t,gt()),t.callbackNode===n?$T.bind(null,t):null}function Qg(t,e){var n=dc;return t.current.memoizedState.isDehydrated&&(yo(t,e).flags|=256),t=Rh(t,e),t!==2&&(e=yn,yn=n,e!==null&&Xg(e)),t}function Xg(t){yn===null?yn=t:yn.push.apply(yn,t)}function h4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!br(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xs(t,e){for(e&=~Dv,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mr(e),r=1<<n;t[n]=-1,e&=~r}}function O1(t){if(Pe&6)throw Error(Z(327));va();var e=mh(t,0);if(!(e&1))return Sn(t,gt()),null;var n=Rh(t,e);if(t.tag!==0&&n===2){var r=bg(t);r!==0&&(e=r,n=Qg(t,r))}if(n===1)throw n=zc,yo(t,0),Xs(t,e),Sn(t,gt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,so(t,yn,is),Sn(t,gt()),null}function Ov(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(Ba=gt()+500,Nf&&zi())}}function Co(t){oi!==null&&oi.tag===0&&!(Pe&6)&&va();var e=Pe;Pe|=1;var n=Xn.transition,r=Ue;try{if(Xn.transition=null,Ue=1,t)return t()}finally{Ue=r,Xn.transition=n,Pe=e,!(Pe&6)&&zi()}}function Lv(){An=da.current,nt(da)}function yo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$D(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(yv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:Ua(),nt(bn),nt(en),Nv();break;case 5:Tv(r);break;case 4:Ua();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:bv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(Mt=t,vt=t=gi(t.current,null),Ut=An=e,Ct=0,zc=null,Dv=Af=No=0,yn=dc=null,lo!==null){for(e=0;e<lo.length;e++)if(n=lo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}lo=null}return t}function BT(t,e){do{var n=vt;try{if(wv(),Ud.current=kh,Ch){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ch=!1}if(To=0,Rt=Et=lt=null,cc=!1,Lc=0,Pv.current=null,n===null||n.return===null){Ct=1,zc=e,vt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=S1(o);if(y!==null){y.flags&=-257,E1(y,o,l,i,e),y.mode&1&&_1(i,u,e),e=y,c=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(c),e.updateQueue=v}else w.add(c);break e}else{if(!(e&1)){_1(i,u,e),Vv();break e}c=Error(Z(426))}}else if(st&&l.mode&1){var _=S1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),E1(_,o,l,i,e),vv($a(c,l));break e}}i=c=$a(c,l),Ct!==4&&(Ct=2),dc===null?dc=[i]:dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=NT(i,c,e);g1(i,b);break e;case 1:l=c;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mi===null||!mi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=CT(i,l,e);g1(i,I);break e}}i=i.return}while(i!==null)}qT(n)}catch(D){e=D,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function WT(){var t=Ih.current;return Ih.current=kh,t===null?kh:t}function Vv(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||!(No&268435455)&&!(Af&268435455)||Xs(Mt,Ut)}function Rh(t,e){var n=Pe;Pe|=2;var r=WT();(Mt!==t||Ut!==e)&&(is=null,yo(t,e));do try{f4();break}catch(s){BT(t,s)}while(!0);if(wv(),Pe=n,Ih.current=r,vt!==null)throw Error(Z(261));return Mt=null,Ut=0,Ct}function f4(){for(;vt!==null;)HT(vt)}function m4(){for(;vt!==null&&!FP();)HT(vt)}function HT(t){var e=KT(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?qT(t):vt=e,Pv.current=null}function qT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a4(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,vt=null;return}}else if(n=o4(n,e,An),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Ct===0&&(Ct=5)}function so(t,e,n){var r=Ue,s=Xn.transition;try{Xn.transition=null,Ue=1,p4(t,e,n,r)}finally{Xn.transition=s,Ue=r}return null}function p4(t,e,n,r){do va();while(oi!==null);if(Pe&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(QP(t,i),t===Mt&&(vt=Mt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,QT(fh,function(){return va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xn.transition,Xn.transition=null;var o=Ue;Ue=1;var l=Pe;Pe|=4,Pv.current=null,c4(t,n),zT(n,t),MD(Cg),ph=!!Ng,Cg=Ng=null,t.current=n,u4(n),zP(),Pe=l,Ue=o,Xn.transition=i}else t.current=n;if(fd&&(fd=!1,oi=t,jh=s),i=t.pendingLanes,i===0&&(mi=null),BP(n.stateNode),Sn(t,gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ah)throw Ah=!1,t=Gg,Gg=null,t;return jh&1&&t.tag!==0&&va(),i=t.pendingLanes,i&1?t===Kg?hc++:(hc=0,Kg=t):hc=0,zi(),null}function va(){if(oi!==null){var t=NE(jh),e=Xn.transition,n=Ue;try{if(Xn.transition=null,Ue=16>t?16:t,oi===null)var r=!1;else{if(t=oi,oi=null,jh=0,Pe&6)throw Error(Z(331));var s=Pe;for(Pe|=4,he=t.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:uc(8,h,i)}var f=h.child;if(f!==null)f.return=h,he=f;else for(;he!==null;){h=he;var p=h.sibling,y=h.return;if(LT(h),h===u){he=null;break}if(p!==null){p.return=y,he=p;break}he=y}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,he=b;break e}he=i.return}}var x=t.current;for(he=x;he!==null;){o=he;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,he=S;else e:for(o=x;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(D){ft(l,l.return,D)}if(l===o){he=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,he=I;break e}he=l.return}}if(Pe=s,zi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{Ue=n,Xn.transition=e}}return!1}function L1(t,e,n){e=$a(n,e),e=NT(t,e,1),t=fi(t,e,1),e=an(),t!==null&&(lu(t,1,e),Sn(t,e))}function ft(t,e,n){if(t.tag===3)L1(t,t,n);else for(;e!==null;){if(e.tag===3){L1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))){t=$a(n,t),t=CT(e,t,1),e=fi(e,t,1),t=an(),e!==null&&(lu(e,1,t),Sn(e,t));break}}e=e.return}}function g4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Ut&n)===n&&(Ct===4||Ct===3&&(Ut&130023424)===Ut&&500>gt()-Mv?yo(t,0):Dv|=n),Sn(t,e)}function GT(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=an();t=xs(t,e),t!==null&&(lu(t,e,n),Sn(t,n))}function y4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GT(t,n)}function v4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),GT(t,n)}var KT;KT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,i4(t,e,n);wn=!!(t.flags&131072)}else wn=!1,st&&e.flags&1048576&&JE(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var s=Va(e,en.current);ya(e,n),s=kv(null,e,r,t,s,n);var i=Iv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(i=!0,wh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sv(e),s.updater=kf,e.stateNode=s,s._reactInternals=e,Og(e,r,t,n),e=Fg(null,e,r,!0,i,n)):(e.tag=0,st&&i&&gv(e),sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=w4(r),t=or(r,t),s){case 0:e=Vg(null,e,r,t,n);break e;case 1:e=C1(null,e,r,t,n);break e;case 11:e=T1(null,e,r,t,n);break e;case 14:e=N1(null,e,r,or(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Vg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),C1(t,e,r,s,n);case 3:e:{if(jT(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,sT(t,e),Th(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$a(Error(Z(423)),e),e=k1(t,e,r,n,s);break e}else if(r!==s){s=$a(Error(Z(424)),e),e=k1(t,e,r,n,s);break e}else for(Pn=hi(e.stateNode.containerInfo.firstChild),Mn=e,st=!0,ur=null,n=nT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fa(),r===s){e=ws(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return iT(e),t===null&&Pg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kg(r,s)?o=null:i!==null&&kg(r,i)&&(e.flags|=32),AT(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&Pg(e),null;case 13:return RT(t,e,n);case 4:return Ev(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=za(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),T1(t,e,r,s,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ye(Sh,r._currentValue),r._currentValue=o,i!==null)if(br(i.value,o)){if(i.children===s.children&&!bn.current){e=ws(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ms(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Dg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ya(e,n),s=Jn(s),r=r(s),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,s=or(r,e.pendingProps),s=or(r.type,s),N1(t,e,r,s,n);case 15:return kT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Bd(t,e),e.tag=1,_n(r)?(t=!0,wh(e)):t=!1,ya(e,n),TT(e,r,s),Og(e,r,s,n),Fg(null,e,r,!0,t,n);case 19:return PT(t,e,n);case 22:return IT(t,e,n)}throw Error(Z(156,e.tag))};function QT(t,e){return _E(t,e)}function x4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new x4(t,e,n,r)}function Fv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w4(t){if(typeof t=="function")return Fv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sv)return 11;if(t===iv)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return vo(n.children,s,i,e);case rv:o=8,s|=8;break;case og:return t=Kn(12,n,e,s|2),t.elementType=og,t.lanes=i,t;case ag:return t=Kn(13,n,e,s),t.elementType=ag,t.lanes=i,t;case lg:return t=Kn(19,n,e,s),t.elementType=lg,t.lanes=i,t;case iE:return jf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rE:o=10;break e;case sE:o=9;break e;case sv:o=11;break e;case iv:o=14;break e;case qs:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vo(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function jf(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=iE,t.lanes=n,t.stateNode={isHidden:!1},t}function Sp(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function Ep(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sp(0),this.expirationTimes=sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zv(t,e,n,r,s,i,o,l,c){return t=new b4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sv(i),t}function _4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XT(t){if(!t)return Ei;t=t._reactInternals;e:{if(Fo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(_n(n))return XE(t,n,e)}return e}function YT(t,e,n,r,s,i,o,l,c){return t=zv(n,r,!0,t,s,i,o,l,c),t.context=XT(null),n=t.current,r=an(),s=pi(n),i=ms(r,s),i.callback=e??null,fi(n,i,s),t.current.lanes=s,lu(t,s,r),Sn(t,r),t}function Rf(t,e,n,r){var s=e.current,i=an(),o=pi(s);return n=XT(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fi(s,e,o),t!==null&&(pr(t,s,o,i),zd(t,s,o)),o}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uv(t,e){V1(t,e),(t=t.alternate)&&V1(t,e)}function S4(){return null}var JT=typeof reportError=="function"?reportError:function(t){console.error(t)};function $v(t){this._internalRoot=t}Pf.prototype.render=$v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Rf(t,e,null,null)};Pf.prototype.unmount=$v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Co(function(){Rf(null,t,null,null)}),e[vs]=null}};function Pf(t){this._internalRoot=t}Pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=IE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qs.length&&e!==0&&e<Qs[n].priority;n++);Qs.splice(n,0,t),n===0&&jE(t)}};function Bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F1(){}function E4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ph(o);i.call(u)}}var o=YT(e,r,t,0,null,!1,!1,"",F1);return t._reactRootContainer=o,t[vs]=o.current,Rc(t.nodeType===8?t.parentNode:t),Co(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ph(c);l.call(u)}}var c=zv(t,0,!1,null,null,!1,!1,"",F1);return t._reactRootContainer=c,t[vs]=c.current,Rc(t.nodeType===8?t.parentNode:t),Co(function(){Rf(e,c,n,r)}),c}function Mf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ph(o);l.call(c)}}Rf(e,o,t,s)}else o=E4(n,e,t,s,r);return Ph(o)}CE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yl(e.pendingLanes);n!==0&&(lv(e,n|1),Sn(e,gt()),!(Pe&6)&&(Ba=gt()+500,zi()))}break;case 13:Co(function(){var r=xs(t,1);if(r!==null){var s=an();pr(r,t,1,s)}}),Uv(t,1)}};cv=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=an();pr(e,t,134217728,n)}Uv(t,134217728)}};kE=function(t){if(t.tag===13){var e=pi(t),n=xs(t,e);if(n!==null){var r=an();pr(n,t,e,r)}Uv(t,e)}};IE=function(){return Ue};AE=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};vg=function(t,e,n){switch(e){case"input":if(dg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tf(r);if(!s)throw Error(Z(90));aE(r),dg(r,s)}}}break;case"textarea":cE(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};gE=Ov;yE=Co;var T4={usingClientEntryPoint:!1,Events:[uu,ia,Tf,mE,pE,Ov]},ql={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N4={bundleType:ql.bundleType,version:ql.version,rendererPackageName:ql.rendererPackageName,rendererConfig:ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wE(t),t===null?null:t.stateNode},findFiberByHostInstance:ql.findFiberByHostInstance||S4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{bf=md.inject(N4),Wr=md}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T4;Fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bv(e))throw Error(Z(200));return _4(t,e,null,n)};Fn.createRoot=function(t,e){if(!Bv(t))throw Error(Z(299));var n=!1,r="",s=JT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zv(t,1,!1,null,null,n,!1,r,s),t[vs]=e.current,Rc(t.nodeType===8?t.parentNode:t),new $v(e)};Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=wE(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t){return Co(t)};Fn.hydrate=function(t,e,n){if(!Df(e))throw Error(Z(200));return Mf(null,t,e,!0,n)};Fn.hydrateRoot=function(t,e,n){if(!Bv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=JT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=YT(e,null,t,1,n??null,s,!1,i,o),t[vs]=e.current,Rc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pf(e)};Fn.render=function(t,e,n){if(!Df(e))throw Error(Z(200));return Mf(null,t,e,!1,n)};Fn.unmountComponentAtNode=function(t){if(!Df(t))throw Error(Z(40));return t._reactRootContainer?(Co(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[vs]=null})}),!0):!1};Fn.unstable_batchedUpdates=Ov;Fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Df(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Mf(t,e,n,!1,r)};Fn.version="18.3.1-next-f1338f8080-20240426";function ZT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZT)}catch(t){console.error(t)}}ZT(),ZS.exports=Fn;var Qn=ZS.exports;const C4=zS(Qn);var eN,z1=Qn;eN=z1.createRoot,z1.hydrateRoot;function k4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var tN={exports:{}},nN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=m;function I4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var A4=typeof Object.is=="function"?Object.is:I4,j4=Wa.useState,R4=Wa.useEffect,P4=Wa.useLayoutEffect,D4=Wa.useDebugValue;function M4(t,e){var n=e(),r=j4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return P4(function(){s.value=n,s.getSnapshot=e,Tp(s)&&i({inst:s})},[t,n,e]),R4(function(){return Tp(s)&&i({inst:s}),t(function(){Tp(s)&&i({inst:s})})},[t]),D4(n),n}function Tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!A4(t,n)}catch{return!0}}function O4(t,e){return e()}var L4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?O4:M4;nN.useSyncExternalStore=Wa.useSyncExternalStore!==void 0?Wa.useSyncExternalStore:L4;tN.exports=nN;var V4=tN.exports;const F4=YS.useInsertionEffect,z4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U4=z4?m.useLayoutEffect:m.useEffect,$4=F4||U4,rN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return $4(()=>{e[0]=t}),e[1]},B4="popstate",Wv="pushState",Hv="replaceState",W4="hashchange",U1=[B4,Wv,Hv,W4],H4=t=>{for(const e of U1)addEventListener(e,t);return()=>{for(const e of U1)removeEventListener(e,t)}},sN=(t,e)=>V4.useSyncExternalStore(H4,t,e),q4=()=>location.search,G4=({ssrSearch:t=""}={})=>sN(q4,()=>t),$1=()=>location.pathname,K4=({ssrPath:t}={})=>sN($1,t?()=>t:$1),Q4=(t,{replace:e=!1,state:n=null}={})=>history[e?Hv:Wv](n,"",t),X4=(t={})=>[K4(t),Q4],B1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[B1]>"u"){for(const t of[Wv,Hv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,B1,{value:!0})}const Y4=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",iN=(t="")=>t==="/"?"":t,J4=(t,e)=>t[0]==="~"?t.slice(1):iN(e)+t,Z4=(t="",e)=>Y4(W1(iN(t)),W1(e)),W1=t=>{try{return decodeURI(t)}catch{return t}},oN={hook:X4,searchHook:G4,parser:k4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},aN=m.createContext(oN),hu=()=>m.useContext(aN),lN={},cN=m.createContext(lN),eM=()=>m.useContext(cN),Of=t=>{const[e,n]=t.hook(t);return[Z4(t.base,e),rN((r,s)=>n(J4(r,t.base),s))]},Lf=()=>Of(hu()),uN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},dN=({children:t,...e})=>{var h,f;const n=hu(),r=e.hook?oN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const y=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&y!==u[p]&&(l.current=u={...u}),u[p]=y,y!==r[p]&&(s=u)}return m.createElement(aN.Provider,{value:s,children:t})},H1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,tM=t=>{let e=m.useRef(lN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},sr=({path:t,nest:e,match:n,...r})=>{const s=hu(),[i]=Of(s),[o,l,c]=n??uN(s.parser,t,i,e),u=tM({...eM(),...l});if(!o)return null;const h=c?m.createElement(dN,{base:c},H1(r,u)):H1(r,u);return m.createElement(cN.Provider,{value:u,children:h})},Xr=m.forwardRef((t,e)=>{const n=hu(),[r,s]=Of(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...y}=t,w=rN(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:w,href:v}):m.createElement("a",{...y,onClick:w,href:v,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),hN=t=>Array.isArray(t)?t.flatMap(e=>hN(e&&e.type===m.Fragment?e.props.children:e)):[t],nM=({children:t,location:e})=>{const n=hu(),[r]=Of(n);for(const s of hN(t)){let i=0;if(m.isValidElement(s)&&(i=uN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Vf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ff=typeof window>"u"||"Deno"in globalThis;function ar(){}function rM(t,e){return typeof t=="function"?t(e):t}function sM(t){return typeof t=="number"&&t>=0&&t!==1/0}function iM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function q1(t,e){return typeof t=="function"?t(e):t}function oM(t,e){return typeof t=="function"?t(e):t}function G1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==qv(o,e.options))return!1}else if(!$c(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function K1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Uc(e.options.mutationKey)!==Uc(i))return!1}else if(!$c(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function qv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Uc)(t)}function Uc(t){return JSON.stringify(t,(e,n)=>Yg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $c(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!$c(t[n],e[n])):!1}function fN(t,e){if(t===e)return t;const n=Q1(t)&&Q1(e);if(n||Yg(t)&&Yg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=fN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function Q1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yg(t){if(!X1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!X1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function X1(t){return Object.prototype.toString.call(t)==="[object Object]"}function aM(t){return new Promise(e=>{setTimeout(e,t)})}function lM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?fN(t,e):e}function cM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gv=Symbol();function mN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var fo,ei,ka,RS,dM=(RS=class extends Vf{constructor(){super();Le(this,fo);Le(this,ei);Le(this,ka);Se(this,ka,e=>{if(!Ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,ei)||this.setEventListener(K(this,ka))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ei))==null||e.call(this),Se(this,ei,void 0))}setEventListener(e){var n;Se(this,ka,e),(n=K(this,ei))==null||n.call(this),Se(this,ei,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,fo)!==e&&(Se(this,fo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,fo)=="boolean"?K(this,fo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},fo=new WeakMap,ei=new WeakMap,ka=new WeakMap,RS),pN=new dM,Ia,ti,Aa,PS,hM=(PS=class extends Vf{constructor(){super();Le(this,Ia,!0);Le(this,ti);Le(this,Aa);Se(this,Aa,e=>{if(!Ff&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,ti)||this.setEventListener(K(this,Aa))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ti))==null||e.call(this),Se(this,ti,void 0))}setEventListener(e){var n;Se(this,Aa,e),(n=K(this,ti))==null||n.call(this),Se(this,ti,e(this.setOnline.bind(this)))}setOnline(e){K(this,Ia)!==e&&(Se(this,Ia,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Ia)}},Ia=new WeakMap,ti=new WeakMap,Aa=new WeakMap,PS),Dh=new hM;function fM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function mM(t){return Math.min(1e3*2**t,3e4)}function gN(t){return(t??"online")==="online"?Dh.isOnline():!0}var yN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Np(t){return t instanceof yN}function vN(t){let e=!1,n=0,r=!1,s;const i=fM(),o=v=>{var _;r||(p(new yN(v)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>pN.isFocused()&&(t.networkMode==="always"||Dh.isOnline())&&t.canRun(),h=()=>gN(t.networkMode)&&t.canRun(),f=v=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var _;s=b=>{(r||u())&&v(b)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),w=()=>{if(r)return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{var M;if(r)return;const x=t.retry??(Ff?0:3),S=t.retryDelay??mM,I=typeof S=="function"?S(n,b):S,D=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!D){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),aM(I).then(()=>u()?void 0:y()).then(()=>{e?p(b):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():y().then(w),i)}}function pM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var on=pM(),mo,DS,xN=(DS=class{constructor(){Le(this,mo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sM(this.gcTime)&&Se(this,mo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ff?1/0:5*60*1e3))}clearGcTimeout(){K(this,mo)&&(clearTimeout(K(this,mo)),Se(this,mo,void 0))}},mo=new WeakMap,DS),ja,Ra,$n,Kt,iu,po,lr,ss,MS,gM=(MS=class extends xN{constructor(n){super();Le(this,lr);Le(this,ja);Le(this,Ra);Le(this,$n);Le(this,Kt);Le(this,iu);Le(this,po);Se(this,po,!1),Se(this,iu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Se(this,$n,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Se(this,ja,vM(this.options)),this.state=n.state??K(this,ja),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Kt))==null?void 0:n.promise}setOptions(n){this.options={...K(this,iu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,$n).remove(this)}setData(n,r){const s=lM(this.state.data,n,this.options);return Wt(this,lr,ss).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Wt(this,lr,ss).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Kt))==null?void 0:s.promise;return(i=K(this,Kt))==null||i.cancel(n),r?r.then(ar).catch(ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,ja))}isActive(){return this.observers.some(n=>oM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!iM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Kt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Kt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,$n).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Kt)&&(K(this,po)?K(this,Kt).cancel({revert:!0}):K(this,Kt).cancelRetry()),this.scheduleGc()),K(this,$n).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wt(this,lr,ss).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Kt))return K(this,Kt).continueRetry(),K(this,Kt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(y=>y.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,po,!0),s.signal)})},o=()=>{const p=mN(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),Se(this,po,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,Ra,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Wt(this,lr,ss).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var y,w,v,_;Np(p)&&p.silent||Wt(this,lr,ss).call(this,{type:"error",error:p}),Np(p)||((w=(y=K(this,$n).config).onError)==null||w.call(y,p,this),(_=(v=K(this,$n).config).onSettled)==null||_.call(v,this.state.data,p,this)),this.scheduleGc()};return Se(this,Kt,vN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var y,w,v,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(w=(y=K(this,$n).config).onSuccess)==null||w.call(y,p,this),(_=(v=K(this,$n).config).onSettled)==null||_.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,y)=>{Wt(this,lr,ss).call(this,{type:"failed",failureCount:p,error:y})},onPause:()=>{Wt(this,lr,ss).call(this,{type:"pause"})},onContinue:()=>{Wt(this,lr,ss).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,Kt).start()}},ja=new WeakMap,Ra=new WeakMap,$n=new WeakMap,Kt=new WeakMap,iu=new WeakMap,po=new WeakMap,lr=new WeakSet,ss=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...yM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Np(i)&&i.revert&&K(this,Ra)?{...K(this,Ra),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),on.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,$n).notify({query:this,type:"updated",action:n})})},MS);function yM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,OS,xM=(OS=class extends Vf{constructor(e={}){super();Le(this,Fr);this.config=e,Se(this,Fr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??qv(s,n);let o=this.get(i);return o||(o=new gM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,Fr).has(e.queryHash)||(K(this,Fr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,Fr).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,Fr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,Fr).get(e)}getAll(){return[...K(this,Fr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>G1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>G1(e,r)):n}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){on.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fr=new WeakMap,OS),zr,rn,go,Ur,Ws,LS,wM=(LS=class extends xN{constructor(n){super();Le(this,Ur);Le(this,zr);Le(this,rn);Le(this,go);this.mutationId=n.mutationId,Se(this,rn,n.mutationCache),Se(this,zr,[]),this.state=n.state||bM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,zr).includes(n)||(K(this,zr).push(n),this.clearGcTimeout(),K(this,rn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Se(this,zr,K(this,zr).filter(r=>r!==n)),this.scheduleGc(),K(this,rn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,zr).length||(this.state.status==="pending"?this.scheduleGc():K(this,rn).remove(this))}continue(){var n;return((n=K(this,go))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,y,w,v,_,b,x,S,I,D,M,T,N;Se(this,go,vN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{Wt(this,Ur,Ws).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Wt(this,Ur,Ws).call(this,{type:"pause"})},onContinue:()=>{Wt(this,Ur,Ws).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,rn).canRun(this)}));const r=this.state.status==="pending",s=!K(this,go).canStart();try{if(!r){Wt(this,Ur,Ws).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=K(this,rn).config).onMutate)==null?void 0:o.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Wt(this,Ur,Ws).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const C=await K(this,go).start();return await((h=(u=K(this,rn).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,n,this.state.context)),await((w=(y=K(this,rn).config).onSettled)==null?void 0:w.call(y,C,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,C,null,n,this.state.context)),Wt(this,Ur,Ws).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(b=K(this,rn).config).onError)==null?void 0:x.call(b,C,n,this.state.context,this)),await((I=(S=this.options).onError)==null?void 0:I.call(S,C,n,this.state.context)),await((M=(D=K(this,rn).config).onSettled)==null?void 0:M.call(D,void 0,C,this.state.variables,this.state.context,this)),await((N=(T=this.options).onSettled)==null?void 0:N.call(T,void 0,C,n,this.state.context)),C}finally{Wt(this,Ur,Ws).call(this,{type:"error",error:C})}}finally{K(this,rn).runNext(this)}}},zr=new WeakMap,rn=new WeakMap,go=new WeakMap,Ur=new WeakSet,Ws=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),on.batch(()=>{K(this,zr).forEach(s=>{s.onMutationUpdate(n)}),K(this,rn).notify({mutation:this,type:"updated",action:n})})},LS);function bM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,ou,VS,_M=(VS=class extends Vf{constructor(e={}){super();Le(this,In);Le(this,ou);this.config=e,Se(this,In,new Map),Se(this,ou,Date.now())}build(e,n,r){const s=new wM({mutationCache:this,mutationId:++Yu(this,ou)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=pd(e),r=K(this,In).get(n)??[];r.push(e),K(this,In).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=pd(e);if(K(this,In).has(n)){const s=(r=K(this,In).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,In).delete(n):K(this,In).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,In).get(pd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,In).get(pd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,In).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K1(n,r))}findAll(e={}){return this.getAll().filter(n=>K1(e,n))}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return on.batch(()=>Promise.all(e.map(n=>n.continue().catch(ar))))}},In=new WeakMap,ou=new WeakMap,VS);function pd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Y1(t){return{onFetch:(e,n)=>{var h,f,p,y,w;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=mN(e.options,e.fetchOptions),x=async(S,I,D)=>{if(v)return Promise.reject();if(I==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:I,direction:D?"backward":"forward",meta:e.options.meta};_(M);const T=await b(M),{maxPages:N}=e.options,C=D?uM:cM;return{pages:C(S.pages,T,N),pageParams:C(S.pageParams,I,N)}};if(s&&i.length){const S=s==="backward",I=S?SM:J1,D={pages:i,pageParams:o},M=I(r,D);l=await x(D,M,S)}else{const S=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:J1(r,l);if(c>0&&I==null)break;l=await x(l,I),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function J1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function SM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ht,ni,ri,Pa,Da,si,Ma,Oa,FS,EM=(FS=class{constructor(t={}){Le(this,ht);Le(this,ni);Le(this,ri);Le(this,Pa);Le(this,Da);Le(this,si);Le(this,Ma);Le(this,Oa);Se(this,ht,t.queryCache||new xM),Se(this,ni,t.mutationCache||new _M),Se(this,ri,t.defaultOptions||{}),Se(this,Pa,new Map),Se(this,Da,new Map),Se(this,si,0)}mount(){Yu(this,si)._++,K(this,si)===1&&(Se(this,Ma,pN.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onFocus())})),Se(this,Oa,Dh.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onOnline())})))}unmount(){var t,e;Yu(this,si)._--,K(this,si)===0&&((t=K(this,Ma))==null||t.call(this),Se(this,Ma,void 0),(e=K(this,Oa))==null||e.call(this),Se(this,Oa,void 0))}isFetching(t){return K(this,ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,ni).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,ht).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(q1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,ht).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,ht).get(r.queryHash),i=s==null?void 0:s.state.data,o=rM(e,i);if(o!==void 0)return K(this,ht).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return on.batch(()=>K(this,ht).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,ht);on.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,ht),r={type:"active",...t};return on.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=on.batch(()=>K(this,ht).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ar).catch(ar)}invalidateQueries(t={},e={}){return on.batch(()=>{if(K(this,ht).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=on.batch(()=>K(this,ht).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ar)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,ht).build(this,e);return n.isStaleByTime(q1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ar).catch(ar)}fetchInfiniteQuery(t){return t.behavior=Y1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ar).catch(ar)}ensureInfiniteQueryData(t){return t.behavior=Y1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dh.isOnline()?K(this,ni).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,ht)}getMutationCache(){return K(this,ni)}getDefaultOptions(){return K(this,ri)}setDefaultOptions(t){Se(this,ri,t)}setQueryDefaults(t,e){K(this,Pa).set(Uc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Pa).values()];let n={};return e.forEach(r=>{$c(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Da).set(Uc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Da).values()];let n={};return e.forEach(r=>{$c(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,ri).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Gv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,ri).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,ht).clear(),K(this,ni).clear()}},ht=new WeakMap,ni=new WeakMap,ri=new WeakMap,Pa=new WeakMap,Da=new WeakMap,si=new WeakMap,Ma=new WeakMap,Oa=new WeakMap,FS),TM=m.createContext(void 0),NM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(TM.Provider,{value:t,children:e}));async function CM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const kM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await CM(n),await n.json())},IM=new EM({defaultOptions:{queries:{queryFn:kM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),AM=1,jM=1e6;let Cp=0;function RM(){return Cp=(Cp+1)%Number.MAX_SAFE_INTEGER,Cp.toString()}const kp=new Map,Z1=t=>{if(kp.has(t))return;const e=setTimeout(()=>{kp.delete(t),fc({type:"REMOVE_TOAST",toastId:t})},jM);kp.set(t,e)},PM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,AM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Z1(n):t.toasts.forEach(r=>{Z1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Gd=[];let Kd={toasts:[]};function fc(t){Kd=PM(Kd,t),Gd.forEach(e=>{e(Kd)})}function DM({...t}){const e=RM(),n=s=>fc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>fc({type:"DISMISS_TOAST",toastId:e});return fc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function zo(){const[t,e]=m.useState(Kd);return m.useEffect(()=>(Gd.push(e),()=>{const n=Gd.indexOf(e);n>-1&&Gd.splice(n,1)}),[t]),{...t,toast:DM,dismiss:n=>fc({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function eb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eb(t[s],null)}}}}function $e(...t){return m.useCallback(wN(...t),t)}function MM(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function kr(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var b;const{scope:p,children:y,...w}=f,v=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,_=m.useMemo(()=>w,Object.values(w));return a.jsx(v.Provider,{value:_,children:y})};u.displayName=i+"Provider";function h(f,p){var v;const y=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,w=m.useContext(y);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,OM(s,...e)]}function OM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ha(t){const e=VM(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(FM);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var LM=Ha("Slot");function VM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=UM(s),l=zM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?wN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bN=Symbol("radix.slottable");function _N(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=bN,e}function FM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bN}function zM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Kv(t){const e=t+"CollectionProvider",[n,r]=kr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:b}=v,x=Ee.useRef(null),S=Ee.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:S,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=Ha(l),u=Ee.forwardRef((v,_)=>{const{scope:b,children:x}=v,S=i(l,b),I=$e(_,S.collectionRef);return a.jsx(c,{ref:I,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ha(h),y=Ee.forwardRef((v,_)=>{const{scope:b,children:x,...S}=v,I=Ee.useRef(null),D=$e(_,I),M=i(h,b);return Ee.useEffect(()=>(M.itemMap.set(I,{ref:I,...S}),()=>void M.itemMap.delete(I))),a.jsx(p,{[f]:"",ref:D,children:x})});y.displayName=h;function w(v){const _=i(t+"CollectionConsumer",v);return Ee.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((M,T)=>S.indexOf(M.ref.current)-S.indexOf(T.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},w,r]}var $M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=$M.reduce((t,e)=>{const n=Ha(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function SN(t,e){t&&Qn.flushSync(()=>t.dispatchEvent(e))}function ln(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function BM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var WM="DismissableLayer",Jg="dismissableLayer.update",HM="dismissableLayer.pointerDownOutside",qM="dismissableLayer.focusOutside",tb,EN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(EN),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=m.useState({}),w=$e(e,T=>f(T)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(_),x=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,I=x>=b,D=KM(T=>{const N=T.target,C=[...u.branches].some(k=>k.contains(N));!I||C||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},p),M=QM(T=>{const N=T.target;[...u.branches].some(k=>k.contains(N))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},p);return BM(T=>{x===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),nb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),nb())},[h,u]),m.useEffect(()=>{const T=()=>y({});return document.addEventListener(Jg,T),()=>document.removeEventListener(Jg,T)},[]),a.jsx(xe.div,{...c,ref:w,style:{pointerEvents:S?I?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,M.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,D.onPointerDownCapture)})});fu.displayName=WM;var GM="DismissableLayerBranch",TN=m.forwardRef((t,e)=>{const n=m.useContext(EN),r=m.useRef(null),s=$e(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(xe.div,{...t,ref:s})});TN.displayName=GM;function KM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){NN(HM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function QM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&NN(qM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nb(){const t=new CustomEvent(Jg);document.dispatchEvent(t)}function NN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?SN(s,i):s.dispatchEvent(i)}var XM=fu,YM=TN,It=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},JM="Portal",mu=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);It(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?C4.createPortal(a.jsx(xe.div,{...r,ref:e}),o):null});mu.displayName=JM;function ZM(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Ui=t=>{const{present:e,children:n}=t,r=e5(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=$e(r.ref,t5(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Ui.displayName="Presence";function e5(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=ZM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=gd(r.current);i.current=l==="mounted"?u:"none"},[l]),It(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,y=gd(u);t?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),It(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=y=>{const v=gd(r.current).includes(y.animationName);if(y.target===e&&v&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=y=>{y.target===e&&(i.current=gd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function gd(t){return(t==null?void 0:t.animationName)||"none"}function t5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ti({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=n5({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=ln(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function n5({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=ln(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var r5="VisuallyHidden",pu=m.forwardRef((t,e)=>a.jsx(xe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));pu.displayName=r5;var s5=pu,Qv="ToastProvider",[Xv,i5,o5]=Kv("Toast"),[CN,QH]=kr("Toast",[o5]),[a5,zf]=CN(Qv),kN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qv}\`. Expected non-empty \`string\`.`),a.jsx(Xv.Provider,{scope:e,children:a.jsx(a5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(y=>y+1),[]),onToastRemove:m.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};kN.displayName=Qv;var IN="ToastViewport",l5=["F8"],Zg="toast.viewportPause",ey="toast.viewportResume",AN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=l5,label:s="Notifications ({hotkey})",...i}=t,o=zf(IN,n),l=i5(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=$e(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;m.useEffect(()=>{const _=b=>{var S;r.length!==0&&r.every(I=>b[I]||b.code===I)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),m.useEffect(()=>{const _=c.current,b=f.current;if(w&&_&&b){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(Zg);b.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(ey);b.dispatchEvent(M),o.isClosePausedRef.current=!1}},I=M=>{!_.contains(M.relatedTarget)&&S()},D=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",x),_.addEventListener("focusout",I),_.addEventListener("pointermove",x),_.addEventListener("pointerleave",D),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",x),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",x),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[w,o.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:_})=>{const x=l().map(S=>{const I=S.ref.current,D=[I,...b5(I)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?x.reverse():x).flat()},[l]);return m.useEffect(()=>{const _=f.current;if(_){const b=x=>{var D,M,T;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const N=document.activeElement,C=x.shiftKey;if(x.target===_&&C){(D=u.current)==null||D.focus();return}const P=v({tabbingDirection:C?"backwards":"forwards"}),R=P.findIndex(F=>F===N);Ip(P.slice(R+1))?x.preventDefault():C?(M=u.current)==null||M.focus():(T=h.current)==null||T.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[l,v]),a.jsxs(YM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(ty,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});Ip(_)}}),a.jsx(Xv.Slot,{scope:n,children:a.jsx(xe.ol,{tabIndex:-1,...i,ref:p})}),w&&a.jsx(ty,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});Ip(_)}})]})});AN.displayName=IN;var jN="ToastFocusProxy",ty=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=zf(jN,n);return a.jsx(pu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});ty.displayName=jN;var Uf="Toast",c5="toast.swipeStart",u5="toast.swipeMove",d5="toast.swipeCancel",h5="toast.swipeEnd",RN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Ti({prop:r,defaultProp:s,onChange:i});return a.jsx(Ui,{present:n||l,children:a.jsx(p5,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ln(t.onPause),onResume:ln(t.onResume),onSwipeStart:pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});RN.displayName=Uf;var[f5,m5]=CN(Uf,{onClose(){}}),p5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:y,...w}=t,v=zf(Uf,n),[_,b]=m.useState(null),x=$e(e,F=>b(F)),S=m.useRef(null),I=m.useRef(null),D=s||v.duration,M=m.useRef(0),T=m.useRef(D),N=m.useRef(0),{onToastAdd:C,onToastRemove:k}=v,A=ln(()=>{var se;(_==null?void 0:_.contains(document.activeElement))&&((se=v.viewport)==null||se.focus()),o()}),P=m.useCallback(F=>{!F||F===1/0||(window.clearTimeout(N.current),M.current=new Date().getTime(),N.current=window.setTimeout(A,F))},[A]);m.useEffect(()=>{const F=v.viewport;if(F){const se=()=>{P(T.current),u==null||u()},J=()=>{const X=new Date().getTime()-M.current;T.current=T.current-X,window.clearTimeout(N.current),c==null||c()};return F.addEventListener(Zg,J),F.addEventListener(ey,se),()=>{F.removeEventListener(Zg,J),F.removeEventListener(ey,se)}}},[v.viewport,D,c,u,P]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(D)},[i,D,v.isClosePausedRef,P]),m.useEffect(()=>(C(),()=>k()),[C,k]);const R=m.useMemo(()=>_?FN(_):null,[_]);return v.viewport?a.jsxs(a.Fragment,{children:[R&&a.jsx(g5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),a.jsx(f5,{scope:n,onClose:A,children:Qn.createPortal(a.jsx(Xv.ItemSlot,{scope:n,children:a.jsx(XM,{asChild:!0,onEscapeKeyDown:pe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:pe(t.onPointerDown,F=>{F.button===0&&(S.current={x:F.clientX,y:F.clientY})}),onPointerMove:pe(t.onPointerMove,F=>{if(!S.current)return;const se=F.clientX-S.current.x,J=F.clientY-S.current.y,X=!!I.current,O=["left","right"].includes(v.swipeDirection),B=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=O?B(0,se):0,W=O?0:B(0,J),q=F.pointerType==="touch"?10:2,ie={x:U,y:W},ee={originalEvent:F,delta:ie};X?(I.current=ie,yd(u5,f,ee,{discrete:!1})):rb(ie,v.swipeDirection,q)?(I.current=ie,yd(c5,h,ee,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(se)>q||Math.abs(J)>q)&&(S.current=null)}),onPointerUp:pe(t.onPointerUp,F=>{const se=I.current,J=F.target;if(J.hasPointerCapture(F.pointerId)&&J.releasePointerCapture(F.pointerId),I.current=null,S.current=null,se){const X=F.currentTarget,O={originalEvent:F,delta:se};rb(se,v.swipeDirection,v.swipeThreshold)?yd(h5,y,O,{discrete:!0}):yd(d5,p,O,{discrete:!0}),X.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),g5=t=>{const{__scopeToast:e,children:n,...r}=t,s=zf(Uf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return x5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(mu,{asChild:!0,children:a.jsx(pu,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},y5="ToastTitle",PN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});PN.displayName=y5;var v5="ToastDescription",DN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});DN.displayName=v5;var MN="ToastAction",ON=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(VN,{altText:n,asChild:!0,children:a.jsx(Yv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${MN}\`. Expected non-empty \`string\`.`),null)});ON.displayName=MN;var LN="ToastClose",Yv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=m5(LN,n);return a.jsx(VN,{asChild:!0,children:a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});Yv.displayName=LN;var VN=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function FN(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),w5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...FN(r))}}),e}function yd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?SN(s,i):s.dispatchEvent(i)}var rb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function x5(t=()=>{}){const e=ln(t);It(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function w5(t){return t.nodeType===t.ELEMENT_NODE}function b5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ip(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var _5=kN,zN=AN,UN=RN,$N=PN,BN=DN,WN=ON,HN=Yv;function qN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qN(t))&&(r&&(r+=" "),r+=e);return r}const sb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ib=GN,gu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ib(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=sb(h)||sb(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...y}=h;return Object.entries(y).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...l}[v]):{...i,...l}[v]===_})?[...u,f,p]:u},[]);return ib(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...E5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:KN("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(T5,{ref:i,iconNode:e,className:KN(`lucide-${S5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ce("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=ce("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=ce("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=ce("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ce("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ce("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ce("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=ce("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=ce("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ce("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ce("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ce("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ce("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ce("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ce("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),sx="-",Z5=t=>{const e=tO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(sx);return l[0]===""&&l.length!==1&&l.shift(),cC(l,e)||eO(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},cC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?cC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(sx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},cb=/^\[(.+)\]$/,eO=t=>{if(cb.test(t)){const e=cb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},tO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return rO(Object.entries(t.classGroups),n).forEach(([i,o])=>{ay(o,r,i,e)}),r},ay=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ub(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(nO(s)){ay(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ay(o,ub(e,i),n,r)})})},ub=(t,e)=>{let n=t;return e.split(sx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},nO=t=>t.isThemeGetter,rO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,sO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},uC="!",iO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(b==="/"){f=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),y=p.startsWith(uC),w=y?p.substring(1):p,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},oO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},aO=t=>({cache:sO(t.cacheSize),parseClassName:iO(t),...Z5(t)}),lO=/\s+/,cO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(lO);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:y}=n(u);let w=!!y,v=r(w?p.substring(0,y):p);if(!v){if(!w){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}w=!1}const _=oO(h).join(":"),b=f?_+uC:_,x=b+v;if(i.includes(x))continue;i.push(x);const S=s(v,w);for(let I=0;I<S.length;++I){const D=S[I];i.push(b+D)}l=u+(l.length>0?" "+l:l)}return l};function uO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=dC(e))&&(r&&(r+=" "),r+=n);return r}const dC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=dC(t[r]))&&(n&&(n+=" "),n+=e);return n};function dO(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=aO(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=cO(c,n);return s(c,h),h}return function(){return i(uO.apply(null,arguments))}}const et=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},hC=/^\[(?:([a-z-]+):)?(.+)\]$/i,hO=/^\d+\/\d+$/,fO=new Set(["px","full","screen"]),mO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rs=t=>xa(t)||fO.has(t)||hO.test(t),Us=t=>ll(t,"length",NO),xa=t=>!!t&&!Number.isNaN(Number(t)),Ap=t=>ll(t,"number",xa),Gl=t=>!!t&&Number.isInteger(Number(t)),xO=t=>t.endsWith("%")&&xa(t.slice(0,-1)),be=t=>hC.test(t),$s=t=>mO.test(t),wO=new Set(["length","size","percentage"]),bO=t=>ll(t,wO,fC),_O=t=>ll(t,"position",fC),SO=new Set(["image","url"]),EO=t=>ll(t,SO,kO),TO=t=>ll(t,"",CO),Kl=()=>!0,ll=(t,e,n)=>{const r=hC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},NO=t=>pO.test(t)&&!gO.test(t),fC=()=>!1,CO=t=>yO.test(t),kO=t=>vO.test(t),IO=()=>{const t=et("colors"),e=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),i=et("borderRadius"),o=et("borderSpacing"),l=et("borderWidth"),c=et("contrast"),u=et("grayscale"),h=et("hueRotate"),f=et("invert"),p=et("gap"),y=et("gradientColorStops"),w=et("gradientColorStopPositions"),v=et("inset"),_=et("margin"),b=et("opacity"),x=et("padding"),S=et("saturate"),I=et("scale"),D=et("sepia"),M=et("skew"),T=et("space"),N=et("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",be,e],P=()=>[be,e],R=()=>["",rs,Us],F=()=>["auto",xa,be],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",be],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[xa,be];return{cacheSize:500,separator:":",theme:{colors:[Kl],spacing:[rs,Us],blur:["none","",$s,be],brightness:W(),borderColor:[t],borderRadius:["none","","full",$s,be],borderSpacing:P(),borderWidth:R(),contrast:W(),grayscale:B(),hueRotate:W(),invert:B(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[xO,Us],inset:A(),margin:A(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:B(),skew:W(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[$s]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),be]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gl,be]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Gl,be]}],"grid-cols":[{"grid-cols":[Kl]}],"col-start-end":[{col:["auto",{span:["full",Gl,be]},be]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Kl]}],"row-start-end":[{row:["auto",{span:[Gl,be]},be]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[$s]},$s]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$s,Us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ap]}],"font-family":[{font:[Kl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",xa,Ap]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rs,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rs,Us]}],"underline-offset":[{"underline-offset":["auto",rs,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),_O]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[rs,be]}],"outline-w":[{outline:[rs,Us]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[rs,Us]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",$s,TO]}],"shadow-color":[{shadow:[Kl]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$s,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Gl,be]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rs,Us,Ap]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},AO=dO(IO);function $(...t){return AO(GN(t))}const jO=_5,mC=m.forwardRef(({className:t,...e},n)=>a.jsx(zN,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mC.displayName=zN.displayName;const RO=gu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(UN,{ref:r,className:$(RO({variant:e}),t),...n}));pC.displayName=UN.displayName;const PO=m.forwardRef(({className:t,...e},n)=>a.jsx(WN,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));PO.displayName=WN.displayName;const gC=m.forwardRef(({className:t,...e},n)=>a.jsx(HN,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Io,{className:"h-4 w-4"})}));gC.displayName=HN.displayName;const yC=m.forwardRef(({className:t,...e},n)=>a.jsx($N,{ref:n,className:$("text-sm font-semibold",t),...e}));yC.displayName=$N.displayName;const vC=m.forwardRef(({className:t,...e},n)=>a.jsx(BN,{ref:n,className:$("text-sm opacity-90",t),...e}));vC.displayName=BN.displayName;function DO(){const{toasts:t}=zo();return a.jsxs(jO,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(pC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(yC,{children:n}),r&&a.jsx(vC,{children:r})]}),s,a.jsx(gC,{})]},e)}),a.jsx(mC,{})]})}var MO=YS[" useId ".trim().toString()]||(()=>{}),OO=0;function ps(t){const[e,n]=m.useState(MO());return It(()=>{n(r=>r??String(OO++))},[t]),e?`radix-${e}`:""}const LO=["top","right","bottom","left"],Ni=Math.min,jn=Math.max,Lh=Math.round,vd=Math.floor,qr=t=>({x:t,y:t}),VO={left:"right",right:"left",bottom:"top",top:"bottom"},FO={start:"end",end:"start"};function ly(t,e,n){return jn(t,Ni(e,n))}function bs(t,e){return typeof t=="function"?t(e):t}function _s(t){return t.split("-")[0]}function cl(t){return t.split("-")[1]}function ix(t){return t==="x"?"y":"x"}function ox(t){return t==="y"?"height":"width"}function Ci(t){return["top","bottom"].includes(_s(t))?"y":"x"}function ax(t){return ix(Ci(t))}function zO(t,e,n){n===void 0&&(n=!1);const r=cl(t),s=ax(t),i=ox(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Vh(o)),[o,Vh(o)]}function UO(t){const e=Vh(t);return[cy(t),e,cy(e)]}function cy(t){return t.replace(/start|end/g,e=>FO[e])}function $O(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function BO(t,e,n,r){const s=cl(t);let i=$O(_s(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cy)))),i}function Vh(t){return t.replace(/left|right|bottom|top/g,e=>VO[e])}function WO(t){return{top:0,right:0,bottom:0,left:0,...t}}function xC(t){return typeof t!="number"?WO(t):{top:t,right:t,bottom:t,left:t}}function Fh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function db(t,e,n){let{reference:r,floating:s}=t;const i=Ci(e),o=ax(e),l=ox(o),c=_s(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(cl(e)){case"start":y[o]-=p*(n&&u?-1:1);break;case"end":y[o]+=p*(n&&u?-1:1);break}return y}const HO=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=db(u,r,c),p=r,y={},w=0;for(let v=0;v<l.length;v++){const{name:_,fn:b}=l[v],{x,y:S,data:I,reset:D}=await b({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});h=x??h,f=S??f,y={...y,[_]:{...y[_],...I}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(u=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=db(u,p,c)),v=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:y}};async function Hc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:y=0}=bs(e,t),w=xC(y),_=l[p?f==="floating"?"reference":"floating":f],b=Fh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=Fh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(b.top-D.top+w.top)/I.y,bottom:(D.bottom-b.bottom+w.bottom)/I.y,left:(b.left-D.left+w.left)/I.x,right:(D.right-b.right+w.right)/I.x}}const qO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=bs(t,e)||{};if(u==null)return{};const f=xC(h),p={x:n,y:r},y=ax(s),w=ox(y),v=await o.getDimensions(u),_=y==="y",b=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",I=i.reference[w]+i.reference[y]-p[y]-i.floating[w],D=p[y]-i.reference[y],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=M?M[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(M)))&&(T=l.floating[S]||i.floating[w]);const N=I/2-D/2,C=T/2-v[w]/2-1,k=Ni(f[b],C),A=Ni(f[x],C),P=k,R=T-v[w]-A,F=T/2-v[w]/2+N,se=ly(P,F,R),J=!c.arrow&&cl(s)!=null&&F!==se&&i.reference[w]/2-(F<P?k:A)-v[w]/2<0,X=J?F<P?F-P:F-R:0;return{[y]:p[y]+X,data:{[y]:se,centerOffset:F-se-X,...J&&{alignmentOffset:X}},reset:J}}}),GO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=bs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=_s(s),x=Ci(l),S=_s(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),D=p||(S||!v?[Vh(l)]:UO(l)),M=w!=="none";!p&&M&&D.push(...BO(l,v,w,I));const T=[l,...D],N=await Hc(e,_),C=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(N[b]),f){const F=zO(s,o,I);C.push(N[F[0]],N[F[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(F=>F<=0)){var A,P;const F=(((A=i.flip)==null?void 0:A.index)||0)+1,se=T[F];if(se)return{data:{index:F,overflows:k},reset:{placement:se}};let J=(P=k.filter(X=>X.overflows[0]<=0).sort((X,O)=>X.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!J)switch(y){case"bestFit":{var R;const X=(R=k.filter(O=>{if(M){const B=Ci(O.placement);return B===x||B==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:R[0];X&&(J=X);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function hb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fb(t){return LO.some(e=>t[e]>=0)}const KO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=bs(t,e);switch(r){case"referenceHidden":{const i=await Hc(e,{...s,elementContext:"reference"}),o=hb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fb(o)}}}case"escaped":{const i=await Hc(e,{...s,altBoundary:!0}),o=hb(i,n.floating);return{data:{escapedOffsets:o,escaped:fb(o)}}}default:return{}}}}};async function QO(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=_s(n),l=cl(n),c=Ci(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=bs(e,t);let{mainAxis:p,crossAxis:y,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(y=l==="end"?w*-1:w),c?{x:y*h,y:p*u}:{x:p*u,y:y*h}}const XO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await QO(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},YO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:b,y:x}=_;return{x:b,y:x}}},...c}=bs(t,e),u={x:n,y:r},h=await Hc(e,c),f=Ci(_s(s)),p=ix(f);let y=u[p],w=u[f];if(i){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=y+h[_],S=y-h[b];y=ly(x,y,S)}if(o){const _=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=w+h[_],S=w-h[b];w=ly(x,w,S)}const v=l.fn({...e,[p]:y,[f]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[f]:o}}}}}},JO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=bs(t,e),h={x:n,y:r},f=Ci(s),p=ix(f);let y=h[p],w=h[f];const v=bs(l,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=p==="y"?"height":"width",I=i.reference[p]-i.floating[S]+_.mainAxis,D=i.reference[p]+i.reference[S]-_.mainAxis;y<I?y=I:y>D&&(y=D)}if(u){var b,x;const S=p==="y"?"width":"height",I=["top","left"].includes(_s(s)),D=i.reference[f]-i.floating[S]+(I&&((b=o.offset)==null?void 0:b[f])||0)+(I?0:_.crossAxis),M=i.reference[f]+i.reference[S]+(I?0:((x=o.offset)==null?void 0:x[f])||0)-(I?_.crossAxis:0);w<D?w=D:w>M&&(w=M)}return{[p]:y,[f]:w}}}},ZO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=bs(t,e),h=await Hc(e,u),f=_s(s),p=cl(s),y=Ci(s)==="y",{width:w,height:v}=i.floating;let _,b;f==="top"||f==="bottom"?(_=f,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,_=p==="end"?"top":"bottom");const x=v-h.top-h.bottom,S=w-h.left-h.right,I=Ni(v-h[_],x),D=Ni(w-h[b],S),M=!e.middlewareData.shift;let T=I,N=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=x),M&&!p){const k=jn(h.left,0),A=jn(h.right,0),P=jn(h.top,0),R=jn(h.bottom,0);y?N=w-2*(k!==0||A!==0?k+A:jn(h.left,h.right)):T=v-2*(P!==0||R!==0?P+R:jn(h.top,h.bottom))}await c({...e,availableWidth:N,availableHeight:T});const C=await o.getDimensions(l.floating);return w!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Wf(){return typeof window<"u"}function ul(t){return wC(t)?(t.nodeName||"").toLowerCase():"#document"}function On(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function es(t){var e;return(e=(wC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wC(t){return Wf()?t instanceof Node||t instanceof On(t).Node:!1}function _r(t){return Wf()?t instanceof Element||t instanceof On(t).Element:!1}function Yr(t){return Wf()?t instanceof HTMLElement||t instanceof On(t).HTMLElement:!1}function mb(t){return!Wf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof On(t).ShadowRoot}function yu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Sr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function e3(t){return["table","td","th"].includes(ul(t))}function Hf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function lx(t){const e=cx(),n=_r(t)?Sr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function t3(t){let e=ki(t);for(;Yr(e)&&!Ka(e);){if(lx(e))return e;if(Hf(e))return null;e=ki(e)}return null}function cx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ka(t){return["html","body","#document"].includes(ul(t))}function Sr(t){return On(t).getComputedStyle(t)}function qf(t){return _r(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ki(t){if(ul(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mb(t)&&t.host||es(t);return mb(e)?e.host:e}function bC(t){const e=ki(t);return Ka(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&yu(e)?e:bC(e)}function qc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=bC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=On(s);if(i){const l=uy(o);return e.concat(o,o.visualViewport||[],yu(s)?s:[],l&&n?qc(l):[])}return e.concat(s,qc(s,[],n))}function uy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function _C(t){const e=Sr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Lh(n)!==i||Lh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function ux(t){return _r(t)?t:t.contextElement}function wa(t){const e=ux(t);if(!Yr(e))return qr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=_C(e);let o=(i?Lh(n.width):n.width)/r,l=(i?Lh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const n3=qr(0);function SC(t){const e=On(t);return!cx()||!e.visualViewport?n3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function r3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==On(t)?!1:e}function Ao(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ux(t);let o=qr(1);e&&(r?_r(r)&&(o=wa(r)):o=wa(t));const l=r3(i,n,r)?SC(i):qr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=On(i),y=r&&_r(r)?On(r):r;let w=p,v=uy(w);for(;v&&r&&y!==w;){const _=wa(v),b=v.getBoundingClientRect(),x=Sr(v),S=b.left+(v.clientLeft+parseFloat(x.paddingLeft))*_.x,I=b.top+(v.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,f*=_.y,c+=S,u+=I,w=On(v),v=uy(w)}}return Fh({width:h,height:f,x:c,y:u})}function dx(t,e){const n=qf(t).scrollLeft;return e?e.left+n:Ao(es(t)).left+n}function EC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:dx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function s3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=es(r),l=e?Hf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=qr(1);const h=qr(0),f=Yr(r);if((f||!f&&!i)&&((ul(r)!=="body"||yu(o))&&(c=qf(r)),Yr(r))){const y=Ao(r);u=wa(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const p=o&&!f&&!i?EC(o,c,!0):qr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function i3(t){return Array.from(t.getClientRects())}function o3(t){const e=es(t),n=qf(t),r=t.ownerDocument.body,s=jn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=jn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dx(t);const l=-n.scrollTop;return Sr(r).direction==="rtl"&&(o+=jn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function a3(t,e){const n=On(t),r=es(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=cx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function l3(t,e){const n=Ao(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yr(t)?wa(t):qr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function pb(t,e,n){let r;if(e==="viewport")r=a3(t,n);else if(e==="document")r=o3(es(t));else if(_r(e))r=l3(e,n);else{const s=SC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Fh(r)}function TC(t,e){const n=ki(t);return n===e||!_r(n)||Ka(n)?!1:Sr(n).position==="fixed"||TC(n,e)}function c3(t,e){const n=e.get(t);if(n)return n;let r=qc(t,[],!1).filter(l=>_r(l)&&ul(l)!=="body"),s=null;const i=Sr(t).position==="fixed";let o=i?ki(t):t;for(;_r(o)&&!Ka(o);){const l=Sr(o),c=lx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||yu(o)&&!c&&TC(t,o))?r=r.filter(h=>h!==o):s=l,o=ki(o)}return e.set(t,r),r}function u3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Hf(e)?[]:c3(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=pb(e,h,s);return u.top=jn(f.top,u.top),u.right=Ni(f.right,u.right),u.bottom=Ni(f.bottom,u.bottom),u.left=jn(f.left,u.left),u},pb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function d3(t){const{width:e,height:n}=_C(t);return{width:e,height:n}}function h3(t,e,n){const r=Yr(e),s=es(e),i=n==="fixed",o=Ao(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=qr(0);if(r||!r&&!i)if((ul(e)!=="body"||yu(s))&&(l=qf(e)),r){const p=Ao(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=dx(s));const u=s&&!r&&!i?EC(s,l):qr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function jp(t){return Sr(t).position==="static"}function gb(t,e){if(!Yr(t)||Sr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return es(t)===n&&(n=n.ownerDocument.body),n}function NC(t,e){const n=On(t);if(Hf(t))return n;if(!Yr(t)){let s=ki(t);for(;s&&!Ka(s);){if(_r(s)&&!jp(s))return s;s=ki(s)}return n}let r=gb(t,e);for(;r&&e3(r)&&jp(r);)r=gb(r,e);return r&&Ka(r)&&jp(r)&&!lx(r)?n:r||t3(t)||n}const f3=async function(t){const e=this.getOffsetParent||NC,n=this.getDimensions,r=await n(t.floating);return{reference:h3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function m3(t){return Sr(t).direction==="rtl"}const p3={convertOffsetParentRelativeRectToViewportRelativeRect:s3,getDocumentElement:es,getClippingRect:u3,getOffsetParent:NC,getElementRects:f3,getClientRects:i3,getDimensions:d3,getScale:wa,isElement:_r,isRTL:m3};function CC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function g3(t,e){let n=null,r;const s=es(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:y}=u;if(l||e(),!p||!y)return;const w=vd(f),v=vd(s.clientWidth-(h+p)),_=vd(s.clientHeight-(f+y)),b=vd(h),S={rootMargin:-w+"px "+-v+"px "+-_+"px "+-b+"px",threshold:jn(0,Ni(1,c))||1};let I=!0;function D(M){const T=M[0].intersectionRatio;if(T!==c){if(!I)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!CC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return o(!0),i}function y3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ux(t),h=s||i?[...u?qc(u):[],...qc(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=u&&l?g3(u,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),u&&!c&&y.observe(u),y.observe(e));let w,v=c?Ao(t):null;c&&_();function _(){const b=Ao(t);v&&!CC(v,b)&&n(),v=b,w=requestAnimationFrame(_)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(b=y)==null||b.disconnect(),y=null,c&&cancelAnimationFrame(w)}}const v3=XO,x3=YO,w3=GO,b3=ZO,_3=KO,yb=qO,S3=JO,E3=(t,e,n)=>{const r=new Map,s={platform:p3,...n},i={...s.platform,_c:r};return HO(t,e,{...s,platform:i})};var Qd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function zh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!zh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function kC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function vb(t,e){const n=kC(t);return Math.round(e*n)/n}function Rp(t){const e=m.useRef(t);return Qd(()=>{e.current=t}),e}function T3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,y]=m.useState(r);zh(p,r)||y(r);const[w,v]=m.useState(null),[_,b]=m.useState(null),x=m.useCallback(O=>{O!==M.current&&(M.current=O,v(O))},[]),S=m.useCallback(O=>{O!==T.current&&(T.current=O,b(O))},[]),I=i||w,D=o||_,M=m.useRef(null),T=m.useRef(null),N=m.useRef(h),C=c!=null,k=Rp(c),A=Rp(s),P=Rp(u),R=m.useCallback(()=>{if(!M.current||!T.current)return;const O={placement:e,strategy:n,middleware:p};A.current&&(O.platform=A.current),E3(M.current,T.current,O).then(B=>{const U={...B,isPositioned:P.current!==!1};F.current&&!zh(N.current,U)&&(N.current=U,Qn.flushSync(()=>{f(U)}))})},[p,e,n,A,P]);Qd(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=m.useRef(!1);Qd(()=>(F.current=!0,()=>{F.current=!1}),[]),Qd(()=>{if(I&&(M.current=I),D&&(T.current=D),I&&D){if(k.current)return k.current(I,D,R);R()}},[I,D,R,k,C]);const se=m.useMemo(()=>({reference:M,floating:T,setReference:x,setFloating:S}),[x,S]),J=m.useMemo(()=>({reference:I,floating:D}),[I,D]),X=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!J.floating)return O;const B=vb(J.floating,h.x),U=vb(J.floating,h.y);return l?{...O,transform:"translate("+B+"px, "+U+"px)",...kC(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:U}},[n,l,J.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:R,refs:se,elements:J,floatingStyles:X}),[h,R,se,J,X])}const N3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?yb({element:r.current,padding:s}).fn(n):{}:r?yb({element:r,padding:s}).fn(n):{}}}},C3=(t,e)=>({...v3(t),options:[t,e]}),k3=(t,e)=>({...x3(t),options:[t,e]}),I3=(t,e)=>({...S3(t),options:[t,e]}),A3=(t,e)=>({...w3(t),options:[t,e]}),j3=(t,e)=>({...b3(t),options:[t,e]}),R3=(t,e)=>({..._3(t),options:[t,e]}),P3=(t,e)=>({...N3(t),options:[t,e]});var D3="Arrow",IC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});IC.displayName=D3;var M3=IC;function AC(t){const[e,n]=m.useState(void 0);return It(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var hx="Popper",[jC,Gf]=kr(hx),[O3,RC]=jC(hx),PC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(O3,{scope:e,anchor:r,onAnchorChange:s,children:n})};PC.displayName=hx;var DC="PopperAnchor",MC=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=RC(DC,n),o=m.useRef(null),l=$e(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(xe.div,{...s,ref:l})});MC.displayName=DC;var fx="PopperContent",[L3,V3]=jC(fx),OC=m.forwardRef((t,e)=>{var V,Y,de,Q,te,ae;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:w,...v}=t,_=RC(fx,n),[b,x]=m.useState(null),S=$e(e,Te=>x(Te)),[I,D]=m.useState(null),M=AC(I),T=(M==null?void 0:M.width)??0,N=(M==null?void 0:M.height)??0,C=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],P=A.length>0,R={padding:k,boundary:A.filter(z3),altBoundary:P},{refs:F,floatingStyles:se,placement:J,isPositioned:X,middlewareData:O}=T3({strategy:"fixed",placement:C,whileElementsMounted:(...Te)=>y3(...Te,{animationFrame:y==="always"}),elements:{reference:_.anchor},middleware:[C3({mainAxis:s+N,alignmentAxis:o}),c&&k3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?I3():void 0,...R}),c&&A3({...R}),j3({...R,apply:({elements:Te,rects:Re,availableWidth:mt,availableHeight:We})=>{const{width:Je,height:Tn}=Re.reference,He=Te.floating.style;He.setProperty("--radix-popper-available-width",`${mt}px`),He.setProperty("--radix-popper-available-height",`${We}px`),He.setProperty("--radix-popper-anchor-width",`${Je}px`),He.setProperty("--radix-popper-anchor-height",`${Tn}px`)}}),I&&P3({element:I,padding:l}),U3({arrowWidth:T,arrowHeight:N}),p&&R3({strategy:"referenceHidden",...R})]}),[B,U]=FC(J),W=ln(w);It(()=>{X&&(W==null||W())},[X,W]);const q=(V=O.arrow)==null?void 0:V.x,ie=(Y=O.arrow)==null?void 0:Y.y,ee=((de=O.arrow)==null?void 0:de.centerOffset)!==0,[ne,oe]=m.useState();return It(()=>{b&&oe(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:X?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(Q=O.transformOrigin)==null?void 0:Q.x,(te=O.transformOrigin)==null?void 0:te.y].join(" "),...((ae=O.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(L3,{scope:n,placedSide:B,onArrowChange:D,arrowX:q,arrowY:ie,shouldHideArrow:ee,children:a.jsx(xe.div,{"data-side":B,"data-align":U,...v,ref:S,style:{...v.style,animation:X?void 0:"none"}})})})});OC.displayName=fx;var LC="PopperArrow",F3={top:"bottom",right:"left",bottom:"top",left:"right"},VC=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=V3(LC,r),o=F3[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(M3,{...s,ref:n,style:{...s.style,display:"block"}})})});VC.displayName=LC;function z3(t){return t!==null}var U3=t=>({name:"transformOrigin",options:t,fn(e){var _,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=FC(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,y=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=o?f:`${p}px`,v=`${-c}px`):u==="top"?(w=o?f:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=o?f:`${y}px`):u==="left"&&(w=`${r.floating.width+c}px`,v=o?f:`${y}px`),{data:{x:w,y:v}}}});function FC(t){const[e,n="center"]=t.split("-");return[e,n]}var zC=PC,UC=MC,$C=OC,BC=VC,[Kf,XH]=kr("Tooltip",[Gf]),Qf=Gf(),WC="TooltipProvider",$3=700,dy="tooltip.open",[B3,mx]=Kf(WC),HC=t=>{const{__scopeTooltip:e,delayDuration:n=$3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(B3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};HC.displayName=WC;var Xf="Tooltip",[W3,vu]=Kf(Xf),qC=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=mx(Xf,t.__scopeTooltip),u=Qf(e),[h,f]=m.useState(null),p=ps(),y=m.useRef(0),w=o??c.disableHoverableContent,v=l??c.delayDuration,_=m.useRef(!1),[b=!1,x]=Ti({prop:r,defaultProp:s,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(dy))):c.onClose(),i==null||i(T)}}),S=m.useMemo(()=>b?_.current?"delayed-open":"instant-open":"closed",[b]),I=m.useCallback(()=>{window.clearTimeout(y.current),y.current=0,_.current=!1,x(!0)},[x]),D=m.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x(!1)},[x]),M=m.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{_.current=!0,x(!0),y.current=0},v)},[v,x]);return m.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),a.jsx(zC,{...u,children:a.jsx(W3,{scope:e,contentId:p,open:b,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?M():I()},[c.isOpenDelayedRef,M,I]),onTriggerLeave:m.useCallback(()=>{w?D():(window.clearTimeout(y.current),y.current=0)},[D,w]),onOpen:I,onClose:D,disableHoverableContent:w,children:n})})};qC.displayName=Xf;var hy="TooltipTrigger",GC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vu(hy,n),i=mx(hy,n),o=Qf(n),l=m.useRef(null),c=$e(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(UC,{asChild:!0,...o,children:a.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});GC.displayName=hy;var px="TooltipPortal",[H3,q3]=Kf(px,{forceMount:void 0}),KC=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=vu(px,e);return a.jsx(H3,{scope:e,forceMount:n,children:a.jsx(Ui,{present:n||i.open,children:a.jsx(mu,{asChild:!0,container:s,children:r})})})};KC.displayName=px;var Qa="TooltipContent",QC=m.forwardRef((t,e)=>{const n=q3(Qa,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=vu(Qa,t.__scopeTooltip);return a.jsx(Ui,{present:r||o.open,children:o.disableHoverableContent?a.jsx(XC,{side:s,...i,ref:e}):a.jsx(G3,{side:s,...i,ref:e})})}),G3=m.forwardRef((t,e)=>{const n=vu(Qa,t.__scopeTooltip),r=mx(Qa,t.__scopeTooltip),s=m.useRef(null),i=$e(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),y=m.useCallback((w,v)=>{const _=w.currentTarget,b={x:w.clientX,y:w.clientY},x=J3(b,_.getBoundingClientRect()),S=Z3(b,x),I=eL(v.getBoundingClientRect()),D=nL([...S,...I]);l(D),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const w=_=>y(_,h),v=_=>y(_,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",v)}}},[c,h,y,p]),m.useEffect(()=>{if(o){const w=v=>{const _=v.target,b={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!tL(b,o);x?p():S&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,o,u,p]),a.jsx(XC,{...t,ref:i})}),[K3,Q3]=Kf(Xf,{isInside:!1}),X3=_N("TooltipContent"),XC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=vu(Qa,n),u=Qf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(dy,h),()=>document.removeEventListener(dy,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const y=p.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(fu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs($C,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(X3,{children:r}),a.jsx(K3,{scope:n,isInside:!0,children:a.jsx(s5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});QC.displayName=Qa;var YC="TooltipArrow",Y3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qf(n);return Q3(YC,n).isInside?null:a.jsx(BC,{...s,...r,ref:e})});Y3.displayName=YC;function J3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Z3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function eL(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function tL(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function nL(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rL(e)}function rL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var sL=HC,iL=qC,oL=GC,JC=KC,ZC=QC;const Yf=sL,Jf=iL,Zf=oL,xu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(ZC,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));xu.displayName=ZC.displayName;const aL="modulepreload",lL=function(t){return"/"+t},xb={},xd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=lL(c),c in xb)return;xb[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":aL,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},cL=()=>{};var wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ek(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new dL;const p=i<<2|l>>4;if(r.push(p),u!==64){const y=l<<4&240|u>>2;if(r.push(y),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hL=function(t){const e=ek(t);return tk.encodeByteArray(e,!0)},Uh=function(t){return hL(t).replace(/\./g,"")},nk=function(t){try{return tk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=()=>fL().__FIREBASE_DEFAULTS__,pL=()=>{if(typeof process>"u"||typeof wb>"u")return;const t=wb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nk(t[1]);return e&&JSON.parse(e)},em=()=>{try{return cL()||mL()||pL()||gL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rk=t=>{var e,n;return(n=(e=em())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},yL=t=>{const e=rk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sk=()=>{var t;return(t=em())==null?void 0:t.config},ik=t=>{var e;return(e=em())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ok(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}const mc={};function wL(){const t={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?t.emulator.push(e):t.prod.push(e);return t}function bL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bb=!1;function ak(t,e){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||mc[t]===e||mc[t]||bb)return;mc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=wL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{bb=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=bL(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,v);const I=u();c(x,b),S.append(x,w,_,I),document.body.appendChild(S)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function SL(){var e;const t=(e=em())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CL(){const t=tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kL(){return!SL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IL(){try{return typeof indexedDB=="object"}catch{return!1}}function AL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jL,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?RL(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Is(s,l,r)}}function RL(t,e){return t.replace(PL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PL=/\{\$([^}]+)}/g;function DL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ii(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_b(i)&&_b(o)){if(!Ii(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _b(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ML(t,e){const n=new OL(t,e);return n.subscribe.bind(n)}class OL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pp),s.error===void 0&&(s.error=Pp),s.complete===void 0&&(s.complete=Pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class jo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zL(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FL(t){return t===io?void 0:t}function zL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const $L={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},BL=Ce.INFO,WL={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},HL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gx{constructor(e){this.name=e,this._logLevel=BL,this._logHandler=HL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const qL=(t,e)=>e.some(n=>t instanceof n);let Sb,Eb;function GL(){return Sb||(Sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KL(){return Eb||(Eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lk=new WeakMap,fy=new WeakMap,ck=new WeakMap,Dp=new WeakMap,yx=new WeakMap;function QL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(yi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lk.set(n,t)}).catch(()=>{}),yx.set(e,t),e}function XL(t){if(fy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fy.set(t,e)}let my={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ck.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YL(t){my=t(my)}function JL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return ck.set(r,e.sort?e.sort():[e]),yi(r)}:KL().includes(t)?function(...e){return t.apply(Mp(this),e),yi(lk.get(this))}:function(...e){return yi(t.apply(Mp(this),e))}}function ZL(t){return typeof t=="function"?JL(t):(t instanceof IDBTransaction&&XL(t),qL(t,GL())?new Proxy(t,my):t)}function yi(t){if(t instanceof IDBRequest)return QL(t);if(Dp.has(t))return Dp.get(t);const e=ZL(t);return e!==t&&(Dp.set(t,e),yx.set(e,t)),e}const Mp=t=>yx.get(t);function e6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=yi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(yi(o.result),c.oldVersion,c.newVersion,yi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const t6=["get","getKey","getAll","getAllKeys","count"],n6=["put","add","delete","clear"],Op=new Map;function Tb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Op.get(e))return Op.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=n6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||t6.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Op.set(e,i),i}YL(t=>({...t,get:(e,n,r)=>Tb(e,n)||t.get(e,n,r),has:(e,n)=>!!Tb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function s6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const py="@firebase/app",Nb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new gx("@firebase/app"),i6="@firebase/app-compat",o6="@firebase/analytics-compat",a6="@firebase/analytics",l6="@firebase/app-check-compat",c6="@firebase/app-check",u6="@firebase/auth",d6="@firebase/auth-compat",h6="@firebase/database",f6="@firebase/data-connect",m6="@firebase/database-compat",p6="@firebase/functions",g6="@firebase/functions-compat",y6="@firebase/installations",v6="@firebase/installations-compat",x6="@firebase/messaging",w6="@firebase/messaging-compat",b6="@firebase/performance",_6="@firebase/performance-compat",S6="@firebase/remote-config",E6="@firebase/remote-config-compat",T6="@firebase/storage",N6="@firebase/storage-compat",C6="@firebase/firestore",k6="@firebase/ai",I6="@firebase/firestore-compat",A6="firebase",j6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="[DEFAULT]",R6={[py]:"fire-core",[i6]:"fire-core-compat",[a6]:"fire-analytics",[o6]:"fire-analytics-compat",[c6]:"fire-app-check",[l6]:"fire-app-check-compat",[u6]:"fire-auth",[d6]:"fire-auth-compat",[h6]:"fire-rtdb",[f6]:"fire-data-connect",[m6]:"fire-rtdb-compat",[p6]:"fire-fn",[g6]:"fire-fn-compat",[y6]:"fire-iid",[v6]:"fire-iid-compat",[x6]:"fire-fcm",[w6]:"fire-fcm-compat",[b6]:"fire-perf",[_6]:"fire-perf-compat",[S6]:"fire-rc",[E6]:"fire-rc-compat",[T6]:"fire-gcs",[N6]:"fire-gcs-compat",[C6]:"fire-fst",[I6]:"fire-fst-compat",[k6]:"fire-vertex","fire-js":"fire-js",[A6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,P6=new Map,yy=new Map;function Cb(t,e){try{t.container.addComponent(e)}catch(n){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(yy.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,t);for(const n of $h.values())Cb(n,t);for(const n of P6.values())Cb(n,t);return!0}function vx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new wu("app","Firebase",D6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=j6;function uk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:gy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw vi.create("bad-app-name",{appName:String(s)});if(n||(n=sk()),!n)throw vi.create("no-options");const i=$h.get(s);if(i){if(Ii(n,i.options)&&Ii(r,i.config))return i;throw vi.create("duplicate-app",{appName:s})}const o=new UL(s);for(const c of yy.values())o.addComponent(c);const l=new M6(n,r,o);return $h.set(s,l),l}function dk(t=gy){const e=$h.get(t);if(!e&&t===gy&&sk())return uk();if(!e)throw vi.create("no-app",{appName:t});return e}function xi(t,e,n){let r=R6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(o.join(" "));return}Xa(new jo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="firebase-heartbeat-database",L6=1,Gc="firebase-heartbeat-store";let Lp=null;function hk(){return Lp||(Lp=e6(O6,L6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw vi.create("idb-open",{originalErrorMessage:t.message})})),Lp}async function V6(t){try{const n=(await hk()).transaction(Gc),r=await n.objectStore(Gc).get(fk(t));return await n.done,r}catch(e){if(e instanceof Is)Ss.warn(e.message);else{const n=vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(n.message)}}}async function kb(t,e){try{const r=(await hk()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,fk(t)),await r.done}catch(n){if(n instanceof Is)Ss.warn(n.message);else{const r=vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(r.message)}}}function fk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=1024,z6=30;class U6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ib();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>z6){const o=W6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ib(),{heartbeatsToSend:r,unsentEntries:s}=$6(this._heartbeatsCache.heartbeats),i=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ss.warn(n),""}}}function Ib(){return new Date().toISOString().substring(0,10)}function $6(t,e=F6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ab(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ab(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class B6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IL()?AL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ab(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}function W6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t){Xa(new jo("platform-logger",e=>new r6(e),"PRIVATE")),Xa(new jo("heartbeat",e=>new U6(e),"PRIVATE")),xi(py,Nb,t),xi(py,Nb,"esm2020"),xi("fire-js","")}H6("");function mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q6=mk,pk=new wu("auth","Firebase",mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new gx("@firebase/auth");function G6(t,...e){Bh.logLevel<=Ce.WARN&&Bh.warn(`Auth (${hl}): ${t}`,...e)}function Xd(t,...e){Bh.logLevel<=Ce.ERROR&&Bh.error(`Auth (${hl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw wx(t,...e)}function gr(t,...e){return wx(t,...e)}function xx(t,e,n){const r={...q6(),[e]:n};return new wu("auth","Firebase",r).create(e,{appName:t.name})}function bo(t){return xx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),xx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pk.create(t,...e)}function ye(t,e,...n){if(!t)throw wx(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function Es(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Q6(){return jb()==="http:"||jb()==="https:"}function jb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q6()||TL()||"connection"in navigator)?navigator.onLine:!0}function Y6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=_L()||NL()}get(){return X6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e){Es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eV=new _u(3e4,6e4);function _x(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fl(t,e,n,r,s={}){return yk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=bu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return EL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&dl(t.emulatorConfig.host)&&(u.credentials="include"),gk.fetch()(await vk(t,t.config.apiHost,n,l),u)})}async function yk(t,e,n){t._canInitEmulator=!1;const r={...J6,...e};try{const s=new nV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw wd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xx(t,h,u);Jr(t,h)}}catch(s){if(s instanceof Is)throw s;Jr(t,"network-request-failed",{message:String(s)})}}async function tV(t,e,n,r,s={}){const i=await fl(t,e,n,r,s);return"mfaPendingCredential"in i&&Jr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function vk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?bx(t.config,s):`${t.config.apiScheme}://${s}`;return Z6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class nV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),eV.get())})}}function wd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(t,e){return fl(t,"POST","/v1/accounts:delete",e)}async function Wh(t,e){return fl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sV(t,e=!1){const n=Ot(t),r=await n.getIdToken(e),s=Sx(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:pc(Vp(s.auth_time)),issuedAtTime:pc(Vp(s.iat)),expirationTime:pc(Vp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function Sx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const s=nk(n);return s?JSON.parse(s):(Xd("Failed to decode base64 JWT payload"),null)}catch(s){return Xd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rb(t){const e=Sx(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Is&&iV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Kc(t,Wh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?xk(s.providerUserInfo):[],o=lV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function aV(t){const e=Ot(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t,e){const n=await yk(t,{},async()=>{const r=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await vk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&dl(t.emulatorConfig.host)&&(c.credentials="include"),gk.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uV(t,e){return fl(t,"POST","/v2/accounts:revokeToken",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ba;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sV(this,e)}reload(){return aV(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(bo(this.auth));const e=await this.getIdToken();return await Kc(this,rV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:w,stsTokenManager:v}=n;ye(f&&v,e,"internal-error");const _=ba.fromJSON(this.name,v);ye(typeof f=="string",e,"internal-error"),Bs(r,e.name),Bs(s,e.name),ye(typeof p=="boolean",e,"internal-error"),ye(typeof y=="boolean",e,"internal-error"),Bs(i,e.name),Bs(o,e.name),Bs(l,e.name),Bs(c,e.name),Bs(u,e.name),Bs(h,e.name);const b=new hr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new ba;s.updateFromServerResponse(n);const i=new hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ba;l.updateFromIdToken(r);const c=new hr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map;function fs(t){Es(t instanceof Function,"Expected a class definition");let e=Pb.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wk.type="NONE";const Db=wk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){return`firebase:${t}:${e}:${n}`}class _a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wh(this.auth,{idToken:e}).catch(()=>{});return n?hr._fromGetAccountInfoResponse(this.auth,n,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _a(fs(Db),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||fs(Db);const o=Yd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Wh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await hr._fromGetAccountInfoResponse(e,p,h)}else f=hr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new _a(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new _a(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ek(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nk(e))return"Blackberry";if(Ck(e))return"Webos";if(_k(e))return"Safari";if((e.includes("chrome/")||Sk(e))&&!e.includes("edge/"))return"Chrome";if(Tk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bk(t=tn()){return/firefox\//i.test(t)}function _k(t=tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sk(t=tn()){return/crios\//i.test(t)}function Ek(t=tn()){return/iemobile/i.test(t)}function Tk(t=tn()){return/android/i.test(t)}function Nk(t=tn()){return/blackberry/i.test(t)}function Ck(t=tn()){return/webos/i.test(t)}function Ex(t=tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dV(t=tn()){var e;return Ex(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hV(){return CL()&&document.documentMode===10}function kk(t=tn()){return Ex(t)||Tk(t)||Ck(t)||Nk(t)||/windows phone/i.test(t)||Ek(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e=[]){let n;switch(t){case"Browser":n=Mb(tn());break;case"Worker":n=`${Mb(tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e={}){return fl(t,"GET","/v2/passwordPolicy",_x(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=6;class gV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ob(this),this.idTokenSubscription=new Ob(this),this.beforeStateQueue=new fV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wh(this,{idToken:e}),r=await hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(bo(this));const n=e?Ot(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mV(this),n=new gV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ik(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&G6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tm(t){return Ot(t)}class Ob{constructor(e){this.auth=e,this.observer=null,this.addObserver=ML(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vV(t){Tx=t}function xV(t){return Tx.loadJS(t)}function wV(){return Tx.gapiScript}function bV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t,e){const n=vx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ii(i,e??{}))return s;Jr(s,"already-initialized")}return n.initialize({options:e})}function SV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EV(t,e,n){const r=tm(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ak(e),{host:o,port:l}=TV(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ii(u,r.config.emulator)&&Ii(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,dl(o)?(ok(`${i}//${o}${c}`),ak("Auth",!0)):NV()}function Ak(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TV(t){const e=Ak(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Lb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Lb(o)}}}function Lb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t,e){return tV(t,"POST","/v1/accounts:signInWithIdp",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="http://localhost";class Ro extends jk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ro(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){const e={requestUri:CV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Su{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ro._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xt.credential(n,r)}catch{return null}}}Xt.GOOGLE_SIGN_IN_METHOD="google.com";Xt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Su{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.GITHUB_SIGN_IN_METHOD="github.com";Js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Su{constructor(){super("twitter.com")}static credential(e,n){return Ro._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zs.credential(n,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hr._fromIdTokenResponse(e,r,s),o=Vb(r);return new Ya({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Vb(r);return new Ya({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Vb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends Is{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qh(e,n,r,s)}}function Rk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(t,i,e,r):i})}async function kV(t,e,n=!1){const r=await Kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ya._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(t,e,n=!1){const{auth:r}=t;if(dr(r.app))return Promise.reject(bo(r));const s="reauthenticate";try{const i=await Kc(t,Rk(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Sx(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),Ya._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(t,e,n=!1){if(dr(t.app))return Promise.reject(bo(t));const r="signIn",s=await Rk(t,r,e),i=await Ya._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function jV(t,e,n,r){return Ot(t).onIdTokenChanged(e,n,r)}function RV(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}function PV(t,e,n,r){return Ot(t).onAuthStateChanged(e,n,r)}function DV(t){return Ot(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=1e3,OV=10;class Dk extends Pk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);hV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dk.type="LOCAL";const LV=Dk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends Pk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mk.type="SESSION";const Ok=Mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await VV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Cx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function zV(t){Gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function UV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $V(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function BV(){return Lk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="firebaseLocalStorageDb",WV=1,Kh="firebaseLocalStorage",Fk="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rm(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function HV(){const t=indexedDB.deleteDatabase(Vk);return new Eu(t).toPromise()}function wy(){const t=indexedDB.open(Vk,WV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:Fk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await HV(),e(await wy()))})})}async function Fb(t,e,n){const r=rm(t,!0).put({[Fk]:e,value:n});return new Eu(r).toPromise()}async function qV(t,e){const n=rm(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function zb(t,e){const n=rm(t,!0).delete(e);return new Eu(n).toPromise()}const GV=800,KV=3;class zk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>KV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nm._getInstance(BV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await UV(),!this.activeServiceWorker)return;this.sender=new FV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$V()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wy();return await Fb(e,Gh,"1"),await zb(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=rm(s,!1).getAll();return new Eu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zk.type="LOCAL";const QV=zk;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return e?fs(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends jk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XV(t){return AV(t.auth,new kx(t),t.bypassAuthState)}function YV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),IV(n,new kx(t),t.bypassAuthState)}async function JV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),kV(n,new kx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XV;case"linkViaPopup":case"linkViaRedirect":return JV;case"reauthViaPopup":case"reauthViaRedirect":return YV;default:Jr(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new _u(2e3,1e4);async function bd(t,e,n){if(dr(t.app))return Promise.reject(gr(t,"operation-not-supported-in-this-environment"));const r=tm(t);K6(t,e,Nx);const s=Uk(r,n);return new uo(r,"signInViaPopup",e,s).executeNotNull()}class uo extends $k{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZV.get())};e()}}uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="pendingRedirect",Jd=new Map;class tF extends $k{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await nF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nF(t,e){const n=iF(e),r=sF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function rF(t,e){Jd.set(t._key(),e)}function sF(t){return fs(t._redirectPersistence)}function iF(t){return Yd(eF,t.config.apiKey,t.name)}async function oF(t,e,n=!1){if(dr(t.app))return Promise.reject(bo(t));const r=tm(t),s=Uk(r,e),o=await new tF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=10*60*1e3;class lF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Bk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ub(e))}saveEventToCache(e){this.cachedEventUids.add(Ub(e)),this.lastProcessedEventTime=Date.now()}}function Ub(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(t,e={}){return fl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hF=/^https?/;async function fF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uF(t);for(const n of e)try{if(mF(n))return}catch{}Jr(t,"unauthorized-domain")}function mF(t){const e=vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hF.test(n))return!1;if(dF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new _u(3e4,6e4);function $b(){const t=Gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gF(t){return new Promise((e,n)=>{var s,i,o;function r(){$b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$b(),n(gr(t,"network-request-failed"))},timeout:pF.get()})}if((i=(s=Gr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Gr().gapi)!=null&&o.load)r();else{const l=bV("iframefcb");return Gr()[l]=()=>{gapi.load?r():n(gr(t,"network-request-failed"))},xV(`${wV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function yF(t){return Zd=Zd||gF(t),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new _u(5e3,15e3),xF="__/auth/iframe",wF="emulator/auth/iframe",bF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_F=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SF(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bx(e,wF):`https://${t.config.authDomain}/${xF}`,r={apiKey:e.apiKey,appName:t.name,v:hl},s=_F.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bu(r).slice(1)}`}async function EF(t){const e=await yF(t),n=Gr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:SF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=gr(t,"network-request-failed"),l=Gr().setTimeout(()=>{i(o)},vF.get());function c(){Gr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NF=500,CF=600,kF="_blank",IF="http://localhost";class Bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AF(t,e,n,r=NF,s=CF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...TF,width:r.toString(),height:s.toString(),top:i,left:o},u=tn().toLowerCase();n&&(l=Sk(u)?kF:n),bk(u)&&(e=e||IF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(dV(u)&&l!=="_self")return jF(e||"",l),new Bb(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Bb(f)}function jF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="__/auth/handler",PF="emulator/auth/handler",DF=encodeURIComponent("fac");async function Wb(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hl,eventId:s};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Su){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${DF}=${encodeURIComponent(c)}`:"";return`${MF(t)}?${bu(l).slice(1)}${u}`}function MF({config:t}){return t.emulator?bx(t,PF):`https://${t.authDomain}/${RF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class OF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ok,this._completeRedirectFn=oF,this._overrideRedirectResult=rF}async _openPopup(e,n,r,s){var o;Es((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Wb(e,n,r,vy(),s);return AF(e,i,Cx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Wb(e,n,r,vy(),s);return zV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Es(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EF(e),r=new lF(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Fp];i!==void 0&&n(!!i),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kk()||_k()||Ex()}}const LF=OF;var Hb="@firebase/auth",qb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zF(t){Xa(new jo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ik(t)},u=new yV(r,s,i,c);return SV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xa(new jo("auth-internal",e=>{const n=tm(e.getProvider("auth").getImmediate());return(r=>new VF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(Hb,qb,FF(t)),xi(Hb,qb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=5*60,$F=ik("authIdTokenMaxAge")||UF;let Gb=null;const BF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$F)return;const s=n==null?void 0:n.token;Gb!==s&&(Gb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WF(t=dk()){const e=vx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_V(t,{popupRedirectResolver:LF,persistence:[QV,LV,Ok]}),r=ik("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=BF(i.toString());RV(n,o,()=>o(n.currentUser)),jV(n,l=>o(l))}}const s=rk("auth");return s&&EV(n,`http://${s}`),n}function HF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zF("Browser");var qF="firebase",GF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(qF,GF,"app");var Kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,Wk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,N){function C(){}C.prototype=N.prototype,T.F=N.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(k,A,P){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return N.prototype[A].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,N,C){C||(C=0);const k=Array(16);if(typeof N=="string")for(var A=0;A<16;++A)k[A]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(A=0;A<16;++A)k[A]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=T.g[0],C=T.g[1],A=T.g[2];let P=T.g[3],R;R=N+(P^C&(A^P))+k[0]+3614090360&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[1]+3905402710&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[2]+606105819&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[3]+3250441966&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[4]+4118548399&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[5]+1200080426&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[6]+2821735955&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[7]+4249261313&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[8]+1770035416&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[9]+2336552879&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[10]+4294925233&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[11]+2304563134&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(P^C&(A^P))+k[12]+1804603682&4294967295,N=C+(R<<7&4294967295|R>>>25),R=P+(A^N&(C^A))+k[13]+4254626195&4294967295,P=N+(R<<12&4294967295|R>>>20),R=A+(C^P&(N^C))+k[14]+2792965006&4294967295,A=P+(R<<17&4294967295|R>>>15),R=C+(N^A&(P^N))+k[15]+1236535329&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(A^P&(C^A))+k[1]+4129170786&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[6]+3225465664&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[11]+643717713&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[0]+3921069994&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[5]+3593408605&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[10]+38016083&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[15]+3634488961&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[4]+3889429448&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[9]+568446438&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[14]+3275163606&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[3]+4107603335&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[8]+1163531501&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^P&(C^A))+k[13]+2850285829&4294967295,N=C+(R<<5&4294967295|R>>>27),R=P+(C^A&(N^C))+k[2]+4243563512&4294967295,P=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(P^N))+k[7]+1735328473&4294967295,A=P+(R<<14&4294967295|R>>>18),R=C+(P^N&(A^P))+k[12]+2368359562&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(C^A^P)+k[5]+4294588738&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[8]+2272392833&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[11]+1839030562&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[14]+4259657740&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[1]+2763975236&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[4]+1272893353&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[7]+4139469664&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[10]+3200236656&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[13]+681279174&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[0]+3936430074&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[3]+3572445317&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[6]+76029189&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^P)+k[9]+3654602809&4294967295,N=C+(R<<4&4294967295|R>>>28),R=P+(N^C^A)+k[12]+3873151461&4294967295,P=N+(R<<11&4294967295|R>>>21),R=A+(P^N^C)+k[15]+530742520&4294967295,A=P+(R<<16&4294967295|R>>>16),R=C+(A^P^N)+k[2]+3299628645&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(A^(C|~P))+k[0]+4096336452&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[7]+1126891415&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[14]+2878612391&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[5]+4237533241&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[12]+1700485571&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[3]+2399980690&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[10]+4293915773&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[1]+2240044497&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[8]+1873313359&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[15]+4264355552&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[6]+2734768916&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[13]+1309151649&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~P))+k[4]+4149444226&4294967295,N=C+(R<<6&4294967295|R>>>26),R=P+(C^(N|~A))+k[11]+3174756917&4294967295,P=N+(R<<10&4294967295|R>>>22),R=A+(N^(P|~C))+k[2]+718787259&4294967295,A=P+(R<<15&4294967295|R>>>17),R=C+(P^(A|~N))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+N&4294967295,T.g[1]=T.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.v=function(T,N){N===void 0&&(N=T.length);const C=N-this.blockSize,k=this.C;let A=this.h,P=0;for(;P<N;){if(A==0)for(;P<=C;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<N;)if(k[A++]=T.charCodeAt(P++),A==this.blockSize){s(this,k),A=0;break}}else for(;P<N;)if(k[A++]=T[P++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=N},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var N=1;N<T.length-8;++N)T[N]=0;N=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=N&255,N/=256;for(this.v(T),T=Array(16),N=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)T[N++]=this.g[C]>>>k&255;return T};function i(T,N){var C=l;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=N(T)}function o(T,N){this.h=N;const C=[];let k=!0;for(let A=T.length-1;A>=0;A--){const P=T[A]|0;k&&P==N||(C[A]=P,k=!1)}this.g=C}var l={};function c(T){return-128<=T&&T<128?i(T,function(N){return new o([N|0],N<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return _(u(-T));const N=[];let C=1;for(let k=0;T>=C;k++)N[k]=T/C|0,C*=4294967296;return new o(N,0)}function h(T,N){if(T.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(T.charAt(0)=="-")return _(h(T.substring(1),N));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(N,8));let k=f;for(let P=0;P<T.length;P+=8){var A=Math.min(8,T.length-P);const R=parseInt(T.substring(P,P+A),N);A<8?(A=u(Math.pow(N,A)),k=k.j(A).add(u(R))):(k=k.j(C),k=k.add(u(R)))}return k}var f=c(0),p=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();let T=0,N=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);T+=(k>=0?k:4294967296+k)*N,N*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(v(this))return"-"+_(this).toString(T);const N=u(Math.pow(T,6));var C=this;let k="";for(;;){const A=I(C,N).g;C=b(C,A.j(N));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=A,w(C))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(let N=0;N<T.g.length;N++)if(T.g[N]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=b(this,T),v(T)?-1:w(T)?0:1};function _(T){const N=T.g.length,C=[];for(let k=0;k<N;k++)C[k]=~T.g[k];return new o(C,~T.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(T){const N=Math.max(this.g.length,T.g.length),C=[];let k=0;for(let A=0;A<=N;A++){let P=k+(this.i(A)&65535)+(T.i(A)&65535),R=(P>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);k=R>>>16,P&=65535,R&=65535,C[A]=R<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(T,N){return T.add(_(N))}t.j=function(T){if(w(this)||w(T))return f;if(v(this))return v(T)?_(this).j(_(T)):_(_(this).j(T));if(v(T))return _(this.j(_(T)));if(this.l(y)<0&&T.l(y)<0)return u(this.m()*T.m());const N=this.g.length+T.g.length,C=[];for(var k=0;k<2*N;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<T.g.length;A++){const P=this.i(k)>>>16,R=this.i(k)&65535,F=T.i(A)>>>16,se=T.i(A)&65535;C[2*k+2*A]+=R*se,x(C,2*k+2*A),C[2*k+2*A+1]+=P*se,x(C,2*k+2*A+1),C[2*k+2*A+1]+=R*F,x(C,2*k+2*A+1),C[2*k+2*A+2]+=P*F,x(C,2*k+2*A+2)}for(T=0;T<N;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=N;T<2*N;T++)C[T]=0;return new o(C,0)};function x(T,N){for(;(T[N]&65535)!=T[N];)T[N+1]+=T[N]>>>16,T[N]&=65535,N++}function S(T,N){this.g=T,this.h=N}function I(T,N){if(w(N))throw Error("division by zero");if(w(T))return new S(f,f);if(v(T))return N=I(_(T),N),new S(_(N.g),_(N.h));if(v(N))return N=I(T,_(N)),new S(_(N.g),N.h);if(T.g.length>30){if(v(T)||v(N))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=N;k.l(T)<=0;)C=D(C),k=D(k);var A=M(C,1),P=M(k,1);for(k=M(k,2),C=M(C,2);!w(k);){var R=P.add(k);R.l(T)<=0&&(A=A.add(C),P=R),k=M(k,1),C=M(C,1)}return N=b(T,A.j(N)),new S(A,N)}for(A=f;T.l(N)>=0;){for(C=Math.max(1,Math.floor(T.m()/N.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=u(C),R=P.j(N);v(R)||R.l(T)>0;)C-=k,P=u(C),R=P.j(N);w(P)&&(P=p),A=A.add(P),T=b(T,R)}return new S(A,T)}t.B=function(T){return I(this,T).h},t.and=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)&T.i(k);return new o(C,this.h&T.h)},t.or=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)|T.i(k);return new o(C,this.h|T.h)},t.xor=function(T){const N=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)^T.i(k);return new o(C,this.h^T.h)};function D(T){const N=T.g.length+1,C=[];for(let k=0;k<N;k++)C[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(C,T.h)}function M(T,N){const C=N>>5;N%=32;const k=T.g.length-C,A=[];for(let P=0;P<k;P++)A[P]=N>0?T.i(P+C)>>>N|T.i(P+C+1)<<32-N:T.i(P+C);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,wi=o}).apply(typeof Kb<"u"?Kb:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hk,Zl,qk,eh,by,Gk,Kk,Qk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var g=0;g<d.length;++g){var E=d[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var E=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var L=d[j];if(!(L in E))break e;E=E[L]}d=d[d.length-1],j=E[d],g=g(j),g!=j&&g!=null&&e(E,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var E=[],j;for(j in g)Object.prototype.hasOwnProperty.call(g,j)&&E.push([j,g[j]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,E){return d.call.apply(d.bind,arguments)}function u(d,g,E){return u=c,u.apply(null,arguments)}function h(d,g){var E=Array.prototype.slice.call(arguments,1);return function(){var j=E.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function f(d,g){function E(){}E.prototype=g.prototype,d.Z=g.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(j,L,z){for(var re=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)re[_e-2]=arguments[_e];return g.prototype[L].apply(j,re)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const g=d.length;if(g>0){const E=Array(g);for(let j=0;j<g;j++)E[j]=d[j];return E}return[]}function w(d,g){for(let j=1;j<arguments.length;j++){const L=arguments[j];var E=typeof L;if(E=E!="object"?E:L?Array.isArray(L)?"array":E:"null",E=="array"||E=="object"&&typeof L.length=="number"){E=d.length||0;const z=L.length||0;d.length=E+z;for(let re=0;re<z;re++)d[E+re]=L[re]}else d.push(L)}}class v{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(d){o.setTimeout(()=>{throw d},0)}function b(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class x{constructor(){this.h=this.g=null}add(g,E){const j=S.get();j.set(g,E),this.h?this.h.next=j:this.g=j,this.h=j}}var S=new v(()=>new I,d=>d.reset());class I{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,T=new x,N=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(C)}};function C(){for(var d;d=b();){try{d.h.call(d.g)}catch(E){_(E)}var g=S;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};o.addEventListener("test",E,g),o.removeEventListener("test",E,g)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function F(d,g){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(F,A),F.prototype.init=function(d,g){const E=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(E=="mouseover"?g=d.fromElement:E=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),J=0;function X(d,g,E,j,L){this.listener=d,this.proxy=null,this.src=g,this.type=E,this.capture=!!j,this.ha=L,this.key=++J,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function B(d,g,E){for(const j in d)g.call(E,d[j],j,d)}function U(d,g){for(const E in d)g.call(void 0,d[E],E,d)}function W(d){const g={};for(const E in d)g[E]=d[E];return g}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(d,g){let E,j;for(let L=1;L<arguments.length;L++){j=arguments[L];for(E in j)d[E]=j[E];for(let z=0;z<q.length;z++)E=q[z],Object.prototype.hasOwnProperty.call(j,E)&&(d[E]=j[E])}}function ee(d){this.src=d,this.g={},this.h=0}ee.prototype.add=function(d,g,E,j,L){const z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);const re=oe(d,g,j,L);return re>-1?(g=d[re],E||(g.fa=!1)):(g=new X(g,this.src,z,!!j,L),g.fa=E,d.push(g)),g};function ne(d,g){const E=g.type;if(E in d.g){var j=d.g[E],L=Array.prototype.indexOf.call(j,g,void 0),z;(z=L>=0)&&Array.prototype.splice.call(j,L,1),z&&(O(g),d.g[E].length==0&&(delete d.g[E],d.h--))}}function oe(d,g,E,j){for(let L=0;L<d.length;++L){const z=d[L];if(!z.da&&z.listener==g&&z.capture==!!E&&z.ha==j)return L}return-1}var V="closure_lm_"+(Math.random()*1e6|0),Y={};function de(d,g,E,j,L){if(Array.isArray(g)){for(let z=0;z<g.length;z++)de(d,g[z],E,j,L);return null}return E=Tn(E),d&&d[se]?d.J(g,E,l(j)?!!j.capture:!!j,L):Q(d,g,E,!1,j,L)}function Q(d,g,E,j,L,z){if(!g)throw Error("Invalid event type");const re=l(L)?!!L.capture:!!L;let _e=We(d);if(_e||(d[V]=_e=new ee(d)),E=_e.add(g,E,j,re,z),E.proxy)return E;if(j=te(),E.proxy=j,j.src=d,j.listener=E,d.addEventListener)P||(L=re),L===void 0&&(L=!1),d.addEventListener(g.toString(),j,L);else if(d.attachEvent)d.attachEvent(Re(g.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return E}function te(){function d(E){return g.call(d.src,d.listener,E)}const g=mt;return d}function ae(d,g,E,j,L){if(Array.isArray(g))for(var z=0;z<g.length;z++)ae(d,g[z],E,j,L);else j=l(j)?!!j.capture:!!j,E=Tn(E),d&&d[se]?(d=d.i,z=String(g).toString(),z in d.g&&(g=d.g[z],E=oe(g,E,j,L),E>-1&&(O(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete d.g[z],d.h--)))):d&&(d=We(d))&&(g=d.g[g.toString()],d=-1,g&&(d=oe(g,E,j,L)),(E=d>-1?g[d]:null)&&Te(E))}function Te(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[se])ne(g.i,d);else{var E=d.type,j=d.proxy;g.removeEventListener?g.removeEventListener(E,j,d.capture):g.detachEvent?g.detachEvent(Re(E),j):g.addListener&&g.removeListener&&g.removeListener(j),(E=We(g))?(ne(E,d),E.h==0&&(E.src=null,g[V]=null)):O(d)}}}function Re(d){return d in Y?Y[d]:Y[d]="on"+d}function mt(d,g){if(d.da)d=!0;else{g=new F(g,this);const E=d.listener,j=d.ha||d.src;d.fa&&Te(d),d=E.call(j,g)}return d}function We(d){return d=d[V],d instanceof ee?d:null}var Je="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tn(d){return typeof d=="function"?d:(d[Je]||(d[Je]=function(g){return d.handleEvent(g)}),d[Je])}function He(){k.call(this),this.i=new ee(this),this.M=this,this.G=null}f(He,k),He.prototype[se]=!0,He.prototype.removeEventListener=function(d,g,E,j){ae(this,d,g,E,j)};function Ge(d,g){var E,j=d.G;if(j)for(E=[];j;j=j.G)E.push(j);if(d=d.M,j=g.type||g,typeof g=="string")g=new A(g,d);else if(g instanceof A)g.target=g.target||d;else{var L=g;g=new A(j,d),ie(g,L)}L=!0;let z,re;if(E)for(re=E.length-1;re>=0;re--)z=g.g=E[re],L=er(z,j,!0,g)&&L;if(z=g.g=d,L=er(z,j,!0,g)&&L,L=er(z,j,!1,g)&&L,E)for(re=0;re<E.length;re++)z=g.g=E[re],L=er(z,j,!1,g)&&L}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const E=d.g[g];for(let j=0;j<E.length;j++)O(E[j]);delete d.g[g],d.h--}}this.G=null},He.prototype.J=function(d,g,E,j){return this.i.add(String(d),g,!1,E,j)},He.prototype.K=function(d,g,E,j){return this.i.add(String(d),g,!0,E,j)};function er(d,g,E,j){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let z=0;z<g.length;++z){const re=g[z];if(re&&!re.da&&re.capture==E){const _e=re.listener,St=re.ha||re.src;re.fa&&ne(d.i,re),L=_e.call(St,j)!==!1&&L}}return L&&!j.defaultPrevented}function Ps(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function Nl(d){d.g=Ps(()=>{d.g=null,d.i&&(d.i=!1,Nl(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Ou extends k{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Nl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(d){k.call(this),this.h=d,this.g={}}f(Gi,k);var Lu=[];function ts(d){B(d.g,function(g,E){this.g.hasOwnProperty(E)&&Te(g)},d),d.g={}}Gi.prototype.N=function(){Gi.Z.N.call(this),ts(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=o.JSON.stringify,Ki=o.JSON.parse,Vu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function tr(){}function Cl(){}var Qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kl(){A.call(this,"d")}f(kl,A);function Xi(){A.call(this,"c")}f(Xi,A);var Rr={},Fu=null;function Yi(){return Fu=Fu||new He}Rr.Ia="serverreachability";function zu(d){A.call(this,Rr.Ia,d)}f(zu,A);function Ji(d){const g=Yi();Ge(g,new zu(g))}Rr.STAT_EVENT="statevent";function Uu(d,g){A.call(this,Rr.STAT_EVENT,d),this.stat=g}f(Uu,A);function De(d){const g=Yi();Ge(g,new Uu(g,d))}Rr.Ja="timingevent";function Bt(d,g){A.call(this,Rr.Ja,d),this.size=g}f(Bt,A);function bt(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function fn(d,g,E,j,L,z){d.info(function(){if(d.g)if(z){var re="",_e=z.split("&");for(let qe=0;qe<_e.length;qe++){var St=_e[qe].split("=");if(St.length>1){const At=St[0];St=St[1];const Mr=At.split("_");re=Mr.length>=2&&Mr[1]=="type"?re+(At+"="+St+"&"):re+(At+"=redacted&")}}}else re=null;else re=z;return"XMLHTTP REQ ("+j+") [attempt "+L+"]: "+g+`
`+E+`
`+re})}function nn(d,g,E,j,L,z,re){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+L+"]: "+g+`
`+E+`
`+z+" "+re})}function Vt(d,g,E,j){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+_t(d,E)+(j?" "+j:"")})}function Ds(d,g){d.info(function(){return"TIMEOUT: "+g})}hn.prototype.info=function(){};function _t(d,g){if(!d.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(d=0;d<z.length;d++)if(Array.isArray(z[d])){var E=z[d];if(!(E.length<2)){var j=E[1];if(Array.isArray(j)&&!(j.length<1)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(let re=1;re<j.length;re++)j[re]=""}}}}return jr(z)}catch{return g}}var Nn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Un;function ns(){}f(ns,tr),ns.prototype.g=function(){return new XMLHttpRequest},Un=new ns;function nr(d){return encodeURIComponent(String(d))}function Pr(d){var g=1;d=d.split(":");const E=[];for(;g>0&&d.length;)E.push(d.shift()),g--;return d.length&&E.push(d.join(":")),E}function mn(d,g,E,j){this.j=d,this.i=g,this.l=E,this.S=j||1,this.V=new Gi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bo}function Bo(){this.i=null,this.g="",this.h=!1}var Q0={},Fm={};function zm(d,g,E){d.M=1,d.A=Bu(Dr(g)),d.u=E,d.R=!0,X0(d,null)}function X0(d,g){d.F=Date.now(),$u(d),d.B=Dr(d.A);var E=d.B,j=d.S;Array.isArray(j)||(j=[String(j)]),cw(E.i,"t",j),d.C=0,E=d.j.L,d.h=new Bo,d.g=Cw(d.j,E?g:null,!d.u),d.P>0&&(d.O=new Ou(u(d.Y,d,d.g),d.P)),g=d.V,E=d.g,j=d.ba;var L="readystatechange";Array.isArray(L)||(L&&(Lu[0]=L.toString()),L=Lu);for(let z=0;z<L.length;z++){const re=de(E,L[z],j||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=d.J?W(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Ji(),fn(d.i,d.v,d.B,d.l,d.S,d.u)}mn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Ls(d)==3?g.j():this.Y(d)},mn.prototype.Y=function(d){try{if(d==this.g)e:{const _e=Ls(this.g),St=this.g.ya(),qe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||gw(this.g)))){this.K||_e!=4||St==7||(St==8||qe<=0?Ji(3):Ji(2)),Um(this);var g=this.g.ca();this.X=g;var E=VR(this);if(this.o=g==200,nn(this.i,this.v,this.B,this.l,this.S,_e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var j,L=this.g;if((j=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(j)){var z=j;break t}}z=null}if(d=z)Vt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$m(this,d);else{this.o=!1,this.m=3,De(12),Zi(this),Il(this);break e}}if(this.R){d=!0;let At;for(;!this.K&&this.C<E.length;)if(At=FR(this,E),At==Fm){_e==4&&(this.m=4,De(14),d=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Q0){this.m=4,De(15),Vt(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else Vt(this.i,this.l,At,null),$m(this,At);if(Y0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||E.length!=0||this.h.h||(this.m=1,De(16),d=!1),this.o=this.o&&d,!d)Vt(this.i,this.l,E,"[Invalid Chunked Response]"),Zi(this),Il(this);else if(E.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Xm(re),re.P=!0,De(11))}}else Vt(this.i,this.l,E,null),$m(this,E);_e==4&&Zi(this),this.o&&!this.K&&(_e==4?Sw(this.j,this):(this.o=!1,$u(this)))}else ZR(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),Zi(this),Il(this)}}}catch{}finally{}};function VR(d){if(!Y0(d))return d.g.la();const g=gw(d.g);if(g==="")return"";let E="";const j=g.length,L=Ls(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Zi(d),Il(d),"";d.h.i=new o.TextDecoder}for(let z=0;z<j;z++)d.h.h=!0,E+=d.h.i.decode(g[z],{stream:!(L&&z==j-1)});return g.length=0,d.h.g+=E,d.C=0,d.h.g}function Y0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function FR(d,g){var E=d.C,j=g.indexOf(`
`,E);return j==-1?Fm:(E=Number(g.substring(E,j)),isNaN(E)?Q0:(j+=1,j+E>g.length?Fm:(g=g.slice(j,j+E),d.C=j+E,g)))}mn.prototype.cancel=function(){this.K=!0,Zi(this)};function $u(d){d.T=Date.now()+d.H,J0(d,d.H)}function J0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=bt(u(d.aa,d),g)}function Um(d){d.D&&(o.clearTimeout(d.D),d.D=null)}mn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(Ji(),De(17)),Zi(this),this.m=2,Il(this)):J0(this,this.T-d)};function Il(d){d.j.I==0||d.K||Sw(d.j,d)}function Zi(d){Um(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,ts(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function $m(d,g){try{var E=d.j;if(E.I!=0&&(E.g==d||Bm(E.h,d))){if(!d.L&&Bm(E.h,d)&&E.I==3){try{var j=E.Ba.g.parse(g)}catch{j=null}if(Array.isArray(j)&&j.length==3){var L=j;if(L[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Ku(E),qu(E);else break e;Qm(E),De(18)}}else E.xa=L[1],0<E.xa-E.K&&L[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=bt(u(E.Va,E),6e3));tw(E.h)<=1&&E.ta&&(E.ta=void 0)}else to(E,11)}else if((d.L||E.g==d)&&Ku(E),!R(g))for(L=E.Ba.g.parse(g),g=0;g<L.length;g++){let qe=L[g];const At=qe[0];if(!(At<=E.K))if(E.K=At,qe=qe[1],E.I==2)if(qe[0]=="c"){E.M=qe[1],E.ba=qe[2];const Mr=qe[3];Mr!=null&&(E.ka=Mr,E.j.info("VER="+E.ka));const no=qe[4];no!=null&&(E.za=no,E.j.info("SVER="+E.za));const Vs=qe[5];Vs!=null&&typeof Vs=="number"&&Vs>0&&(j=1.5*Vs,E.O=j,E.j.info("backChannelRequestTimeoutMs_="+j)),j=E;const Fs=d.g;if(Fs){const Xu=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var z=j.h;z.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Wm(z,z.h),z.h=null))}if(j.G){const Ym=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ym&&(j.wa=Ym,Ze(j.J,j.G,Ym))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),j=E;var re=d;if(j.na=Nw(j,j.L?j.ba:null,j.W),re.L){nw(j.h,re);var _e=re,St=j.O;St&&(_e.H=St),_e.D&&(Um(_e),$u(_e)),j.g=re}else bw(j);E.i.length>0&&Gu(E)}else qe[0]!="stop"&&qe[0]!="close"||to(E,7);else E.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?to(E,7):Km(E):qe[0]!="noop"&&E.l&&E.l.qa(qe),E.A=0)}}Ji(4)}catch{}}var zR=class{constructor(d,g){this.g=d,this.map=g}};function Z0(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ew(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function tw(d){return d.h?1:d.g?d.g.size:0}function Bm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Wm(d,g){d.g?d.g.add(g):d.h=g}function nw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Z0.prototype.cancel=function(){if(this.i=rw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function rw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const E of d.g.values())g=g.concat(E.G);return g}return y(d.i)}var sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UR(d,g){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const j=d[E].indexOf("=");let L,z=null;j>=0?(L=d[E].substring(0,j),z=d[E].substring(j+1)):L=d[E],g(L,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ms(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Ms?(this.l=d.l,Al(this,d.j),this.o=d.o,this.g=d.g,jl(this,d.u),this.h=d.h,Hm(this,uw(d.i)),this.m=d.m):d&&(g=String(d).match(sw))?(this.l=!1,Al(this,g[1]||"",!0),this.o=Rl(g[2]||""),this.g=Rl(g[3]||"",!0),jl(this,g[4]),this.h=Rl(g[5]||"",!0),Hm(this,g[6]||"",!0),this.m=Rl(g[7]||"")):(this.l=!1,this.i=new Dl(null,this.l))}Ms.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Pl(g,iw,!0),":");var E=this.g;return(E||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Pl(g,iw,!0),"@"),d.push(nr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Pl(E,E.charAt(0)=="/"?WR:BR,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Pl(E,qR)),d.join("")},Ms.prototype.resolve=function(d){const g=Dr(this);let E=!!d.j;E?Al(g,d.j):E=!!d.o,E?g.o=d.o:E=!!d.g,E?g.g=d.g:E=d.u!=null;var j=d.h;if(E)jl(g,d.u);else if(E=!!d.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var L=g.h.lastIndexOf("/");L!=-1&&(j=g.h.slice(0,L+1)+j)}if(L=j,L==".."||L==".")j="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){j=L.lastIndexOf("/",0)==0,L=L.split("/");const z=[];for(let re=0;re<L.length;){const _e=L[re++];_e=="."?j&&re==L.length&&z.push(""):_e==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),j&&re==L.length&&z.push("")):(z.push(_e),j=!0)}j=z.join("/")}else j=L}return E?g.h=j:E=d.i.toString()!=="",E?Hm(g,uw(d.i)):E=!!d.m,E&&(g.m=d.m),g};function Dr(d){return new Ms(d)}function Al(d,g,E){d.j=E?Rl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function jl(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Hm(d,g,E){g instanceof Dl?(d.i=g,GR(d.i,d.l)):(E||(g=Pl(g,HR)),d.i=new Dl(g,d.l))}function Ze(d,g,E){d.i.set(g,E)}function Bu(d){return Ze(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Rl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Pl(d,g,E){return typeof d=="string"?(d=encodeURI(d).replace(g,$R),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $R(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var iw=/[#\/\?@]/g,BR=/[#\?:]/g,WR=/[#\?]/g,HR=/[#\?@]/g,qR=/#/g;function Dl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function eo(d){d.g||(d.g=new Map,d.h=0,d.i&&UR(d.i,function(g,E){d.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=Dl.prototype,t.add=function(d,g){eo(this),this.i=null,d=Wo(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(g),this.h+=1,this};function ow(d,g){eo(d),g=Wo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function aw(d,g){return eo(d),g=Wo(d,g),d.g.has(g)}t.forEach=function(d,g){eo(this),this.g.forEach(function(E,j){E.forEach(function(L){d.call(g,L,j,this)},this)},this)};function lw(d,g){eo(d);let E=[];if(typeof g=="string")aw(d,g)&&(E=E.concat(d.g.get(Wo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)E=E.concat(d[g]);return E}t.set=function(d,g){return eo(this),this.i=null,d=Wo(this,d),aw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=lw(this,d),d.length>0?String(d[0]):g):g};function cw(d,g,E){ow(d,g),E.length>0&&(d.i=null,d.g.set(Wo(d,g),y(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let j=0;j<g.length;j++){var E=g[j];const L=nr(E);E=lw(this,E);for(let z=0;z<E.length;z++){let re=L;E[z]!==""&&(re+="="+nr(E[z])),d.push(re)}}return this.i=d.join("&")};function uw(d){const g=new Dl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Wo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function GR(d,g){g&&!d.j&&(eo(d),d.i=null,d.g.forEach(function(E,j){const L=j.toLowerCase();j!=L&&(ow(this,j),cw(this,L,E))},d)),d.j=g}function KR(d,g){const E=new hn;if(o.Image){const j=new Image;j.onload=h(Os,E,"TestLoadImage: loaded",!0,g,j),j.onerror=h(Os,E,"TestLoadImage: error",!1,g,j),j.onabort=h(Os,E,"TestLoadImage: abort",!1,g,j),j.ontimeout=h(Os,E,"TestLoadImage: timeout",!1,g,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else g(!1)}function QR(d,g){const E=new hn,j=new AbortController,L=setTimeout(()=>{j.abort(),Os(E,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:j.signal}).then(z=>{clearTimeout(L),z.ok?Os(E,"TestPingServer: ok",!0,g):Os(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Os(E,"TestPingServer: error",!1,g)})}function Os(d,g,E,j,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),j(E)}catch{}}function XR(){this.g=new Vu}function qm(d){this.i=d.Sb||null,this.h=d.ab||!1}f(qm,tr),qm.prototype.g=function(){return new Wu(this.i,this.h)};function Wu(d,g){He.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Wu,He),t=Wu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Ol(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ml(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ol(this)),this.g&&(this.readyState=3,Ol(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function dw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Ml(this):Ol(this),this.readyState==3&&dw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Ml(this))},t.Na=function(d){this.g&&(this.response=d,Ml(this))},t.ga=function(){this.g&&Ml(this)};function Ml(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ol(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=g.next();return d.join(`\r
`)};function Ol(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hw(d){let g="";return B(d,function(E,j){g+=j,g+=":",g+=E,g+=`\r
`}),g}function Gm(d,g,E){e:{for(j in E){var j=!1;break e}j=!0}j||(E=hw(E),typeof d=="string"?E!=null&&nr(E):Ze(d,g,E))}function dt(d){He.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,He);var YR=/^https?$/i,JR=["POST","PUT"];t=dt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,E,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Un.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){fw(this,z);return}if(d=E||"",E=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var L in j)E.set(L,j[L]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const z of j.keys())E.set(z,j.get(z));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(E.keys()).find(z=>z.toLowerCase()=="content-type"),L=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(JR,g,void 0)>=0)||j||L||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of E)this.g.setRequestHeader(z,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(z){fw(this,z)}};function fw(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,mw(d),Hu(d)}function mw(d){d.A||(d.A=!0,Ge(d,"complete"),Ge(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ge(this,"complete"),Ge(this,"abort"),Hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pw(this):this.Xa())},t.Xa=function(){pw(this)};function pw(d){if(d.h&&typeof i<"u"){if(d.v&&Ls(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ge(d,"readystatechange"),Ls(d)==4){d.h=!1;try{const z=d.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var j;if(j=z===0){let re=String(d.D).match(sw)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),j=!YR.test(re?re.toLowerCase():"")}E=j}if(E)Ge(d,"complete"),Ge(d,"success");else{d.o=6;try{var L=Ls(d)>2?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.ca()+"]",mw(d)}}finally{Hu(d)}}}}function Hu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,g||Ge(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ls(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Ls(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ki(g)}};function gw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ZR(d){const g={};d=(d.g&&Ls(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(R(d[j]))continue;var E=Pr(d[j]);const L=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const z=g[L]||[];g[L]=z,z.push(E)}U(g,function(j){return j.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ll(d,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||g}function yw(d){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ll("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ll("baseRetryDelayMs",5e3,d),this.Za=Ll("retryDelaySeedMs",1e4,d),this.Ta=Ll("forwardChannelMaxRetries",2,d),this.va=Ll("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Z0(d&&d.concurrentRequestLimit),this.Ba=new XR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yw.prototype,t.ka=8,t.I=1,t.connect=function(d,g,E,j){De(0),this.W=d,this.H=g||{},E&&j!==void 0&&(this.H.OSID=E,this.H.OAID=j),this.F=this.X,this.J=Nw(this,null,this.W),Gu(this)};function Km(d){if(vw(d),d.I==3){var g=d.V++,E=Dr(d.J);if(Ze(E,"SID",d.M),Ze(E,"RID",g),Ze(E,"TYPE","terminate"),Vl(d,E),g=new mn(d,d.j,g),g.M=2,g.A=Bu(Dr(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=g.A,E=!0),E||(g.g=Cw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),$u(g)}Tw(d)}function qu(d){d.g&&(Xm(d),d.g.cancel(),d.g=null)}function vw(d){qu(d),d.v&&(o.clearTimeout(d.v),d.v=null),Ku(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Gu(d){if(!ew(d.h)&&!d.m){d.m=!0;var g=d.Ea;D||N(),M||(D(),M=!0),T.add(g,d),d.D=0}}function eP(d,g){return tw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=bt(u(d.Ea,d,g),Ew(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const L=new mn(this,this.j,d);let z=this.o;if(this.U&&(z?(z=W(z),ie(z,this.U)):z=this.U),this.u!==null||this.R||(L.J=z,z=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var j=this.i[E];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(g+=j,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=ww(this,L,g),E=Dr(this.J),Ze(E,"RID",d),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),Vl(this,E),z&&(this.R?g="headers="+nr(hw(z))+"&"+g:this.u&&Gm(E,this.u,z)),Wm(this.h,L),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",g),Ze(E,"SID","null"),L.U=!0,zm(L,E,null)):zm(L,E,g),this.I=2}}else this.I==3&&(d?xw(this,d):this.i.length==0||ew(this.h)||xw(this))};function xw(d,g){var E;g?E=g.l:E=d.V++;const j=Dr(d.J);Ze(j,"SID",d.M),Ze(j,"RID",E),Ze(j,"AID",d.K),Vl(d,j),d.u&&d.o&&Gm(j,d.u,d.o),E=new mn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),g&&(d.i=g.G.concat(d.i)),g=ww(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wm(d.h,E),zm(E,j,g)}function Vl(d,g){d.H&&B(d.H,function(E,j){Ze(g,j,E)}),d.l&&B({},function(E,j){Ze(g,j,E)})}function ww(d,g,E){E=Math.min(d.i.length,E);const j=d.l?u(d.l.Ka,d.l,d):null;e:{var L=d.i;let _e=-1;for(;;){const St=["count="+E];_e==-1?E>0?(_e=L[0].g,St.push("ofs="+_e)):_e=0:St.push("ofs="+_e);let qe=!0;for(let At=0;At<E;At++){var z=L[At].g;const Mr=L[At].map;if(z-=_e,z<0)_e=Math.max(0,L[At].g-100),qe=!1;else try{z="req"+z+"_"||"";try{var re=Mr instanceof Map?Mr:Object.entries(Mr);for(const[no,Vs]of re){let Fs=Vs;l(Vs)&&(Fs=jr(Vs)),St.push(z+no+"="+encodeURIComponent(Fs))}}catch(no){throw St.push(z+"type="+encodeURIComponent("_badmap")),no}}catch{j&&j(Mr)}}if(qe){re=St.join("&");break e}}re=void 0}return d=d.i.splice(0,E),g.G=d,re}function bw(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;D||N(),M||(D(),M=!0),T.add(g,d),d.A=0}}function Qm(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=bt(u(d.Da,d),Ew(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,_w(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=bt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),qu(this),_w(this))};function Xm(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function _w(d){d.g=new mn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Dr(d.na);Ze(g,"RID","rpc"),Ze(g,"SID",d.M),Ze(g,"AID",d.K),Ze(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ze(g,"TO",d.ia),Ze(g,"TYPE","xmlhttp"),Vl(d,g),d.u&&d.o&&Gm(g,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Bu(Dr(g)),E.u=null,E.R=!0,X0(E,d)}t.Va=function(){this.C!=null&&(this.C=null,qu(this),Qm(this),De(19))};function Ku(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Sw(d,g){var E=null;if(d.g==g){Ku(d),Xm(d),d.g=null;var j=2}else if(Bm(d.h,g))E=g.G,nw(d.h,g),j=1;else return;if(d.I!=0){if(g.o)if(j==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var L=d.D;j=Yi(),Ge(j,new Bt(j,E)),Gu(d)}else bw(d);else if(L=g.m,L==3||L==0&&g.X>0||!(j==1&&eP(d,g)||j==2&&Qm(d)))switch(E&&E.length>0&&(g=d.h,g.i=g.i.concat(E)),L){case 1:to(d,5);break;case 4:to(d,10);break;case 3:to(d,6);break;default:to(d,2)}}}function Ew(d,g){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*g}function to(d,g){if(d.j.info("Error code "+g),g==2){var E=u(d.bb,d),j=d.Ua;const L=!j;j=new Ms(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Al(j,"https"),Bu(j),L?KR(j.toString(),E):QR(j.toString(),E)}else De(2);d.I=0,d.l&&d.l.pa(g),Tw(d),vw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Tw(d){if(d.I=0,d.ja=[],d.l){const g=rw(d.h);(g.length!=0||d.i.length!=0)&&(w(d.ja,g),w(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function Nw(d,g,E){var j=E instanceof Ms?Dr(E):new Ms(E);if(j.g!="")g&&(j.g=g+"."+j.g),jl(j,j.u);else{var L=o.location;j=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const z=new Ms(null);j&&Al(z,j),g&&(z.g=g),L&&jl(z,L),E&&(z.h=E),j=z}return E=d.G,g=d.wa,E&&g&&Ze(j,E,g),Ze(j,"VER",d.ka),Vl(d,j),j}function Cw(d,g,E){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new dt(new qm({ab:E})):new dt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kw(){}t=kw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qu(){}Qu.prototype.g=function(d,g){return new kn(d,g)};function kn(d,g){He.call(this),this.g=new yw(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!R(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ho(this)}f(kn,He),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Km(this.g)},kn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=jr(d),d=E);g.i.push(new zR(g.Ya++,d)),g.I==3&&Gu(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,kn.Z.N.call(this)};function Iw(d){kl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const E in g){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(Iw,kl);function Aw(){Xi.call(this),this.status=1}f(Aw,Xi);function Ho(d){this.g=d}f(Ho,kw),Ho.prototype.ra=function(){Ge(this.g,"a")},Ho.prototype.qa=function(d){Ge(this.g,new Iw(d))},Ho.prototype.pa=function(d){Ge(this.g,new Aw)},Ho.prototype.oa=function(){Ge(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,Qk=function(){return new Qu},Kk=function(){return Yi()},Gk=Rr,by={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,eh=Nn,Cn.COMPLETE="complete",qk=Cn,Cl.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",He.prototype.listen=He.prototype.J,Zl=Cl,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,Hk=dt}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const Qb="@firebase/firestore",Xb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new gx("@firebase/firestore");function Xo(){return Po.logLevel}function ue(t,...e){if(Po.logLevel<=Ce.DEBUG){const n=e.map(Ix);Po.debug(`Firestore (${ml}): ${t}`,...n)}}function Ts(t,...e){if(Po.logLevel<=Ce.ERROR){const n=e.map(Ix);Po.error(`Firestore (${ml}): ${t}`,...n)}}function Do(t,...e){if(Po.logLevel<=Ce.WARN){const n=e.map(Ix);Po.warn(`Firestore (${ml}): ${t}`,...n)}}function Ix(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xk(t,r,n)}function Xk(t,e,n){let r=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ts(r),new Error(r)}function Fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Xk(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class KF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QF{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new Yk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class XF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new XF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Yb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ZF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function _y(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zp(s)===zp(i)?ke(s,i):zp(s)?1:-1}return ke(t.length,e.length)}const e9=55296,t9=57343;function zp(t){const e=t.charCodeAt(0);return e>=e9&&e<=t9}function Ja(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__name__";class Vr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ke(e.length,n.length)}static compareSegments(e,n){const r=Vr.isNumericId(e),s=Vr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vr.extractNumericId(e).compare(Vr.extractNumericId(n)):_y(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class Qe extends Vr{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const n9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Vr{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return n9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jb}static keyField(){return new Dt([Jb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Qe.fromString(e))}static fromName(e){return new me(Qe.fromString(e).popFirst(5))}static empty(){return new me(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eI(t,e,n,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zb(t){if(!me.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e_(t){if(me.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=im(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Tu(t,e){if(!tI(t))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=-62135596800,n_=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*n_);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t_)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n_}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-t_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:wt("string",Xe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Xe(0,0))}static max(){return new ve(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=-1;function r9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Ai(s,me.empty(),e)}function s9(t){return new Ai(t.readTime,t.key,Qc)}class Ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ai(ve.min(),me.empty(),Qc)}static max(){return new Ai(ve.max(),me.empty(),Qc)}}function i9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==o9)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function l9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}om.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-1;function am(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function c9(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="";function u9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=r_(e)),e=d9(t.get(n),e);return r_(e)}function d9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case nI:n+="";break;default:n+=i}}return n}function r_(t){return t+nI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sd(this.root,e,this.comparator,!0)}}class Sd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i_(this.data.getIterator())}getIteratorFrom(e){return new i_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class i_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new kt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sI("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const h9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=h9.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="server_timestamp",oI="__type__",aI="__previous_value__",lI="__local_write_time__";function jx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oI])==null?void 0:r.stringValue)===iI}function lm(t){const e=t.mapValue.fields[aI];return jx(e)?lm(e):e}function Xc(t){const e=ji(t.mapValue.fields[lI].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Xh="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||Xh}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="__type__",uI="__max__",Ed={mapValue:{fields:{__type__:{stringValue:uI}}}},dI="__vector__",Yh="value";function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jx(t)?4:p9(t)?9007199254740991:m9(t)?10:11:ge(28295,{value:t})}function Zr(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ji(s.timestampValue),l=ji(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ri(s.bytesValue).isEqual(Ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return pt(s.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pt(s.integerValue)===pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pt(s.doubleValue),l=pt(i.doubleValue);return o===l?Qh(o)===Qh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(s_(o)!==s_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Zr(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>Zr(n,e))!==void 0}function el(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=pt(i.integerValue||i.doubleValue),c=pt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return o_(t.timestampValue,e.timestampValue);case 4:return o_(Xc(t),Xc(e));case 5:return _y(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ri(i),c=Ri(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=ke(l[u],c[u]);if(h!==0)return h}return ke(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ke(pt(i.latitude),pt(o.latitude));return l!==0?l:ke(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,y,w,v;const l=i.fields||{},c=o.fields||{},u=(p=l[Yh])==null?void 0:p.arrayValue,h=(y=c[Yh])==null?void 0:y.arrayValue,f=ke(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:a_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ed.mapValue&&o===Ed.mapValue)return 0;if(i===Ed.mapValue)return 1;if(o===Ed.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=_y(c[f],h[f]);if(p!==0)return p;const y=el(l[c[f]],u[h[f]]);if(y!==0)return y}return ke(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function o_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=ji(t),r=ji(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function a_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=el(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function tl(t){return Sy(t)}function Sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Sy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Sy(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function th(t){switch(Pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(t);return e?16+th(e):16;case 5:return 2*t.stringValue.length;case 6:return Ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+th(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Bi(r.fields,(i,o)=>{s+=i.length+th(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function l_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ey(t){return!!t&&"integerValue"in t}function Rx(t){return!!t&&"arrayValue"in t}function c_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function m9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cI])==null?void 0:r.stringValue)===dI}function gc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Bi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(t.arrayValue.values[n]);return e}return{...t}}function p9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=Dt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=gc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Bi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(gc(this.value))}}function hI(t){const e=[];return Bi(t.fields,(n,r)=>{const s=new Dt([n]);if(nh(r)){const i=hI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Jt(e,0,ve.min(),ve.min(),ve.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new Jt(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new Jt(e,2,n,ve.min(),ve.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,ve.min(),ve.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.position=e,this.inclusive=n}}function d_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=el(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function h_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n="asc"){this.field=e,this.dir=n}}function g9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{}class xt extends fI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v9(e,n,r):n==="array-contains"?new b9(e,r):n==="in"?new _9(e,r):n==="not-in"?new S9(e,r):n==="array-contains-any"?new E9(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x9(e,r):new w9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends fI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Er(e,n)}matches(e){return mI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mI(t){return t.op==="and"}function pI(t){return y9(t)&&mI(t)}function y9(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function Ty(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(pI(t))return t.filters.map(e=>Ty(e)).join(",");{const e=t.filters.map(n=>Ty(n)).join(",");return`${t.op}(${e})`}}function gI(t,e){return t instanceof xt?function(r,s){return s instanceof xt&&r.op===s.op&&r.field.isEqual(s.field)&&Zr(r.value,s.value)}(t,e):t instanceof Er?function(r,s){return s instanceof Er&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&gI(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function yI(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof Er?function(n){return n.op.toString()+" {"+n.getFilters().map(yI).join(" ,")+"}"}(t):"Filter"}class v9 extends xt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class x9 extends xt{constructor(e,n){super(e,"in",n),this.keys=vI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class w9 extends xt{constructor(e,n){super(e,"not-in",n),this.keys=vI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class b9 extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rx(n)&&Yc(n.arrayValue,this.value)}}class _9 extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class S9 extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class E9 extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function f_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new T9(t,e,n,r,s,i,o)}function Px(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ty(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tl(r)).join(",")),e.Te=n}return e.Te}function Dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h_(t.startAt,e.startAt)&&h_(t.endAt,e.endAt)}function Ny(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function N9(t,e,n,r,s,i,o,l){return new yl(t,e,n,r,s,i,o,l)}function cm(t){return new yl(t)}function m_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xI(t){return t.collectionGroup!==null}function yc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new kt(Dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Jc(i,r))}),n.has(Dt.keyField().canonicalString())||e.Ie.push(new Jc(Dt.keyField(),r))}return e.Ie}function Kr(t){const e=we(t);return e.Ee||(e.Ee=C9(e,yc(t))),e.Ee}function C9(t,e){if(t.limitType==="F")return f_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Jc(s.field,i)});const n=t.endAt?new Jh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jh(t.startAt.position,t.startAt.inclusive):null;return f_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cy(t,e){const n=t.filters.concat([e]);return new yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zh(t,e,n){return new yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function um(t,e){return Dx(Kr(t),Kr(e))&&t.limitType===e.limitType}function wI(t){return`${Px(Kr(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yI(s)).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>tl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>tl(s)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=d_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,yc(r),s)||r.endAt&&!function(o,l,c){const u=d_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,yc(r),s))}(t,e)}function k9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bI(t){return(e,n)=>{let r=!1;for(const s of yc(t)){const i=I9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function I9(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?el(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=new ut(me.comparator);function Ns(){return A9}const _I=new ut(me.comparator);function ec(...t){let e=_I;for(const n of t)e=e.insert(n.key,n);return e}function SI(t){let e=_I;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ho(){return vc()}function EI(){return vc()}function vc(){return new Uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const j9=new ut(me.comparator),R9=new kt(me.comparator);function Ie(...t){let e=R9;for(const n of t)e=e.add(n);return e}const P9=new kt(ke);function D9(){return P9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function TI(t){return{integerValue:""+t}}function M9(t,e){return c9(e)?TI(e):Mx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function O9(t,e,n){return t instanceof Zc?function(s,i){const o={fields:{[oI]:{stringValue:iI},[lI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jx(i)&&(i=lm(i)),i&&(o.fields[aI]=i),{mapValue:o}}(n,e):t instanceof nl?CI(t,e):t instanceof eu?kI(t,e):function(s,i){const o=NI(s,i),l=p_(o)+p_(s.Ae);return Ey(o)&&Ey(s.Ae)?TI(l):Mx(s.serializer,l)}(t,e)}function L9(t,e,n){return t instanceof nl?CI(t,e):t instanceof eu?kI(t,e):n}function NI(t,e){return t instanceof ef?function(r){return Ey(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Zc extends hm{}class nl extends hm{constructor(e){super(),this.elements=e}}function CI(t,e){const n=II(e);for(const r of t.elements)n.some(s=>Zr(s,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends hm{constructor(e){super(),this.elements=e}}function kI(t,e){let n=II(e);for(const r of t.elements)n=n.filter(s=>!Zr(s,r));return{arrayValue:{values:n}}}class ef extends hm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function p_(t){return pt(t.integerValue||t.doubleValue)}function II(t){return Rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.field=e,this.transform=n}}function V9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nl&&s instanceof nl||r instanceof eu&&s instanceof eu?Ja(r.elements,s.elements,Zr):r instanceof ef&&s instanceof ef?Zr(r.Ae,s.Ae):r instanceof Zc&&s instanceof Zc}(t.transform,e.transform)}class F9{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function jI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ox(t.key,yr.none()):new Nu(t.key,t.data,yr.none());{const n=t.data,r=vn.empty();let s=new kt(Dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Wi(t.key,r,new Dn(s.toArray()),yr.none())}}function z9(t,e,n){t instanceof Nu?function(s,i,o){const l=s.value.clone(),c=y_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Wi?function(s,i,o){if(!rh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=y_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(RI(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xc(t,e,n,r){return t instanceof Nu?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=i.value.clone(),h=v_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wi?function(i,o,l,c){if(!rh(i.precondition,o))return l;const u=v_(i.fieldTransforms,c,o),h=o.data;return h.setAll(RI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return rh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function U9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=NI(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function g_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ja(r,s,(i,o)=>V9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nu extends fm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wi extends fm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function y_(t,e,n){const r=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,L9(o,l,n[s]))}return r}function v_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,O9(i,o,e))}return r}class Ox extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $9 extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&z9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=jI(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,r)=>g_(n,r))&&Ja(this.baseMutations,e.baseMutations,(n,r)=>g_(n,r))}}class Lx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return j9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Lx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,je;function q9(t){switch(t){case H.OK:return ge(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function PI(t){if(t===void 0)return Ts("GRPC error has no .code"),H.UNKNOWN;switch(t){case yt.OK:return H.OK;case yt.CANCELLED:return H.CANCELLED;case yt.UNKNOWN:return H.UNKNOWN;case yt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case yt.INTERNAL:return H.INTERNAL;case yt.UNAVAILABLE:return H.UNAVAILABLE;case yt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case yt.NOT_FOUND:return H.NOT_FOUND;case yt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case yt.ABORTED:return H.ABORTED;case yt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case yt.DATA_LOSS:return H.DATA_LOSS;default:return ge(39323,{code:t})}}(je=yt||(yt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=new wi([4294967295,4294967295],0);function x_(t){const e=G9().encode(t),n=new Wk;return n.update(e),new Uint8Array(n.digest())}function w_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wi([n,r],0),new wi([s,i],0)]}class Vx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(r<0)throw new tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wi.fromNumber(r)));return s.compare(K9)===1&&(s=new wi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=x_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=x_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mm(ve.min(),s,new ut(ke),Ns(),Ie())}}class Cu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class DI{constructor(e,n){this.targetId=e,this.Ce=n}}class MI{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class b_{constructor(){this.ve=0,this.Fe=__(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}}),new Cu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=__()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Q9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=Td(),this.He=Td(),this.Ye=new ut(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ny(i))if(r===0){const o=new me(i.path);this.et(n,o,Jt.newNoDocument(o,ve.min()))}else Fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ri(r).toUint8Array()}catch(c){if(c instanceof sI)return Do("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Vx(o,s,i)}catch(c){return Do(c instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Ny(l.target)){const c=new me(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Jt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new mm(e,n,this.Ye,this.je,r);return this.je=Ns(),this.Je=Td(),this.He=Td(),this.Ye=new ut(ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new b_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new b_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Td(){return new ut(me.comparator)}function __(){return new ut(me.comparator)}const X9={asc:"ASCENDING",desc:"DESCENDING"},Y9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J9={and:"AND",or:"OR"};class Z9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ky(t,e){return t.useProto3Json||am(e)?e:{value:e}}function tf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ez(t,e){return tf(t,e.toTimestamp())}function Qr(t){return Fe(!!t,49232),ve.fromTimestamp(function(n){const r=ji(n);return new Xe(r.seconds,r.nanos)}(t))}function Fx(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LI(t){const e=Qe.fromString(t);return Fe($I(e),10190,{key:e.toString()}),e}function Ay(t,e){return Fx(t.databaseId,e.path)}function Up(t,e){const n=LI(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(FI(n))}function VI(t,e){return Fx(t.databaseId,e)}function tz(t){const e=LI(t);return e.length===4?Qe.emptyPath():FI(e)}function jy(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FI(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function S_(t,e,n){return{name:Ay(t,e),fields:n.value.mapValue.fields}}function nz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Fe(h===void 0||typeof h=="string",58123),Lt.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?H.UNKNOWN:PI(u.code);return new le(h,u.message||"")}(o);n=new MI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Up(t,r.document.name),i=Qr(r.document.updateTime),o=r.document.createTime?Qr(r.document.createTime):ve.min(),l=new vn({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new sh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Up(t,r.document),i=r.readTime?Qr(r.readTime):ve.min(),o=Jt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new sh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Up(t,r.document),i=r.removedTargetIds||[];n=new sh([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new H9(s,i),l=r.targetId;n=new DI(l,o)}}return n}function rz(t,e){let n;if(e instanceof Nu)n={update:S_(t,e.key,e.value)};else if(e instanceof Ox)n={delete:Ay(t,e.key)};else if(e instanceof Wi)n={update:S_(t,e.key,e.data),updateMask:hz(e.fieldMask)};else{if(!(e instanceof $9))return ge(16599,{Vt:e.type});n={verify:Ay(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Zc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ef)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ez(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function sz(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Qr(s.updateTime):Qr(i);return o.isEqual(ve.min())&&(o=Qr(i)),new F9(o,s.transformResults||[])}(n,e))):[]}function iz(t,e){return{documents:[VI(t,e.path)]}}function oz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VI(t,s);const i=function(u){if(u.length!==0)return UI(Er.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Jo(p.field),direction:cz(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ky(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function az(t){let e=tz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=zI(f);return p instanceof Er&&pI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Jc(Zo(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,am(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,y=f.values||[];return new Jh(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new Jh(y,p)}(n.endAt)),N9(e,s,o,i,l,"F",c,u)}function lz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zo(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zo(n.unaryFilter.field);return xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zo(n.unaryFilter.field);return xt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zo(n.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(Zo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Er.create(n.compositeFilter.filters.map(r=>zI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function cz(t){return X9[t]}function uz(t){return Y9[t]}function dz(t){return J9[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function Zo(t){return Dt.fromServerFormat(t.fieldPath)}function UI(t){return t instanceof xt?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NAN"}};if(c_(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NAN"}};if(c_(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(n.field),op:uz(n.op),value:n.value}}}(t):t instanceof Er?function(n){const r=n.getFilters().map(s=>UI(s));return r.length===1?r[0]:{compositeFilter:{op:dz(n.op),filters:r}}}(t):ge(54877,{filter:t})}function hz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $I(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r,s,i=ve.min(),o=ve.min(),l=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.yt=e}}function mz(t){const e=az({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this.Cn=new gz}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ai.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class gz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new kt(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new kt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BI=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(BI,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rl(0)}static cr(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LruGarbageCollector",yz=1048576;function N_([t,e],[n,r]){const s=ke(t,n);return s===0?ke(e,r):s}class vz{constructor(e){this.Ir=e,this.buffer=new kt(N_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();N_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(T_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gl(n)?ue(T_,"Ignoring IndexedDB error during garbage collection: ",n):await pl(n)}await this.Vr(3e5)})}}class wz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(om.ce);const r=new vz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(E_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Xo()<=Ce.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function bz(t,e){return new wz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.changes=new Uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xc(r.mutation,s,Dn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=ho();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ec();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ns();const o=vc(),l=function(){return vc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Wi)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),xc(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):o.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new Sz(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=vc();let s=new ut((o,l)=>o-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Dn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ie()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=EI();h.forEach(p=>{if(!i.has(p)){const y=jI(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(ho());let l=Qc,c=i;return o.next(u=>G.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ie())).next(h=>({batchId:l,changes:SI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=ec();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ec();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,p){return new yl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Jt.newInvalidDocument(h)))});let l=ec();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&xc(h.mutation,u,Dn.empty(),Xe.now()),dm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:mz(s.bundledQuery),readTime:Qr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(){this.overlays=new ut(me.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=ho(),i=n.length+1,o=new me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ho(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ho(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.Qr=new kt(jt.$r),this.Ur=new kt(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new me(new Qe([])),r=new jt(n,e),s=new jt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Qe([])),r=new jt(n,e),s=new jt(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(jt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new jt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ax:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),s=new jt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(ke);return n.forEach(s=>{const i=new jt(s,0),o=new jt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new jt(new me(i),0);let l=new kt(ke);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new jt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.ri=e,this.docs=function(){return new ut(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=Ns();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Jt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ns();const o=n.path,l=new me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||i9(s9(h),r)<=0||(s.has(h.key)||dm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Az(this)}getSize(e){return G.resolve(this.size)}}class Az extends _z{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.persistence=e,this.si=new Uo(n=>Px(n),Dx),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new zx,this.targetCount=0,this.ai=rl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new rl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.ui={},this.overlays={},this.ci=new om(0),this.li=!1,this.li=!0,this.hi=new Cz,this.referenceDelegate=e(this),this.Pi=new jz(this),this.indexManager=new pz,this.remoteDocumentCache=function(s){return new Iz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new fz(n),this.Ii=new Tz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new Rz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Rz extends a9{constructor(e){super(),this.currentSequenceNumber=e}}class Ux{constructor(e){this.persistence=e,this.Ri=new zx,this.Vi=null}static mi(e){return new Ux(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=me.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nf{constructor(e,n){this.persistence=e,this.pi=new Uo(r=>u9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=bz(this,n)}static mi(e,n){return new nf(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $x(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return kL()?8:l9(tn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Pz;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Xo()<=Ce.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Xo()<=Ce.DEBUG&&ue("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Xo()<=Ce.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):G.resolve())}ys(e,n){if(m_(n))return G.resolve(null);let r=Kr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zh(n,null,"F"),r=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Zh(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return m_(n)||s.isEqual(ve.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?G.resolve(null):(Xo()<=Ce.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yo(n)),this.vs(e,o,n,r9(s,Qc)).next(l=>l))})}Ds(e,n){let r=new kt(bI(e));return n.forEach((s,i)=>{dm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Xo()<=Ce.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ai.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="LocalStore",Mz=3e8;class Oz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ut(ke),this.xs=new Uo(i=>Px(i),Dx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ez(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Lz(t,e,n,r){return new Oz(t,e,n,r)}async function HI(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ie();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Vz(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let y=G.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(c,w)).next(v=>{const _=u.docVersions.get(w);Fe(_!==null,48541),v.version.compareTo(_)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qI(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Fz(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Lt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Mz?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=Ns(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(zz(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function zz(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ns();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ue(Bx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function Uz(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ax),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $z(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ry(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gl(o))throw o;ue(Bx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function C_(t,e,n){const r=we(t);let s=ve.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,Kr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:Ie())).next(l=>(Bz(r,k9(e),l),{documents:l,Qs:i})))}function Bz(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class k_{constructor(){this.activeTargetIds=D9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wz{constructor(){this.Mo=new k_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new k_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="ConnectivityMonitor";class A_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(I_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(I_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function Py(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="RestConnection",qz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Xh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Py(),l=this.zo(e,n.toUriEncodedString());ue($p,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=dl(u);return this.Jo(e,l,c,r,h).then(f=>(ue($p,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Do($p,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ml}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=qz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class Qz extends Gz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Py();return new Promise((l,c)=>{const u=new Hk;u.setWithCredentials(!0),u.listenOnce(qk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eh.NO_ERROR:const f=u.getResponseJson();ue(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case eh.TIMEOUT:ue(Gt,`RPC '${e}' ${o} timed out`),c(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const p=u.getStatus();if(ue(Gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const v=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(x)>=0?x:H.UNKNOWN}(w.status);c(new le(v,w.message))}else c(new le(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(H.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ue(Gt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ue(Gt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Py(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qk(),l=Kk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ue(Gt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,y=!1;const w=new Kz({Yo:_=>{y?ue(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(ue(Gt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ue(Gt,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Zo:()=>f.close()}),v=(_,b,x)=>{_.listen(b,S=>{try{x(S)}catch(I){setTimeout(()=>{throw I},0)}})};return v(f,Zl.EventType.OPEN,()=>{y||(ue(Gt,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),v(f,Zl.EventType.CLOSE,()=>{y||(y=!0,ue(Gt,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(f))}),v(f,Zl.EventType.ERROR,_=>{y||(y=!0,Do(Gt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),v(f,Zl.EventType.MESSAGE,_=>{var b;if(!y){const x=_.data[0];Fe(!!x,16349);const S=x,I=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(I){ue(Gt,`RPC '${e}' stream ${s} received error:`,I);const D=I.status;let M=function(C){const k=yt[C];if(k!==void 0)return PI(k)}(D),T=I.message;M===void 0&&(M=H.INTERNAL,T="Unknown error status: "+D+" with message "+I.message),y=!0,w.a_(new le(M,T)),f.close()}else ue(Gt,`RPC '${e}' stream ${s} received:`,x),w.u_(x)}}),v(l,Gk.STAT_EVENT,_=>{_.stat===by.PROXY?ue(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===by.NOPROXY&&ue(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return new Z9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class KI{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ue(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ue(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xz extends KI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=nz(this.serializer,e),r=function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Qr(o.readTime):ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ny(c)?{documents:iz(i,c)}:{query:oz(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=OI(i,o.resumeToken);const u=ky(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=tf(i,o.snapshotVersion.toTimestamp());const u=ky(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=lz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.q_(n)}}class Yz extends KI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sz(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rz(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{}class Zz extends Jz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Iy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Iy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class e8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class t8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{$o(this)&&(ue(Mo,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await ku(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gm(u)}(this))})}),this.Ra=new e8(r,s)}}async function gm(t){if($o(t))for(const e of t.da)await e(!0)}async function ku(t){for(const e of t.da)await e(!1)}function QI(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gx(n)?qx(n):vl(n).O_()&&Hx(n,e))}function Wx(t,e){const n=we(t),r=vl(n);n.Ia.delete(e),r.O_()&&XI(n,e),n.Ia.size===0&&(r.O_()?r.L_():$o(n)&&n.Ra.set("Unknown"))}function Hx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vl(t).Y_(e)}function XI(t,e){t.Va.Ue(e),vl(t).Z_(e)}function qx(t){t.Va=new Q9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),vl(t).start(),t.Ra.ua()}function Gx(t){return $o(t)&&!vl(t).x_()&&t.Ia.size>0}function $o(t){return we(t).Ea.size===0}function YI(t){t.Va=void 0}async function n8(t){t.Ra.set("Online")}async function r8(t){t.Ia.forEach((e,n)=>{Hx(t,e)})}async function s8(t,e){YI(t),Gx(t)?(t.Ra.ha(e),qx(t)):t.Ra.set("Unknown")}async function i8(t,e,n){if(t.Ra.set("Online"),e instanceof MI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ue(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rf(t,r)}else if(e instanceof sh?t.Va.Ze(e):e instanceof DI?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await qI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),XI(i,c);const f=new ai(h.target,c,u,h.sequenceNumber);Hx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ue(Mo,"Failed to raise snapshot:",r),await rf(t,r)}}async function rf(t,e,n){if(!gl(e))throw e;t.Ea.add(1),await ku(t),t.Ra.set("Offline"),n||(n=()=>qI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue(Mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gm(t)})}function JI(t,e){return e().catch(n=>rf(t,n,e))}async function ym(t){const e=we(t),n=Di(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ax;for(;o8(e);)try{const s=await Uz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,a8(e,s)}catch(s){await rf(e,s)}ZI(e)&&e2(e)}function o8(t){return $o(t)&&t.Ta.length<10}function a8(t,e){t.Ta.push(e);const n=Di(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZI(t){return $o(t)&&!Di(t).x_()&&t.Ta.length>0}function e2(t){Di(t).start()}async function l8(t){Di(t).ra()}async function c8(t){const e=Di(t);for(const n of t.Ta)e.ea(n.mutations)}async function u8(t,e,n){const r=t.Ta.shift(),s=Lx.from(r,e,n);await JI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ym(t)}async function d8(t,e){e&&Di(t).X_&&await async function(r,s){if(function(o){return q9(o)&&o!==H.ABORTED}(s.code)){const i=r.Ta.shift();Di(r).B_(),await JI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ym(r)}}(t,e),ZI(t)&&e2(t)}async function R_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ue(Mo,"RemoteStore received new credentials");const r=$o(n);n.Ea.add(3),await ku(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gm(n)}async function h8(t,e){const n=we(t);e?(n.Ea.delete(2),await gm(n)):e||(n.Ea.add(2),await ku(n),n.Ra.set("Unknown"))}function vl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new Xz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:n8.bind(null,t),t_:r8.bind(null,t),r_:s8.bind(null,t),H_:i8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gx(t)?qx(t):t.Ra.set("Unknown")):(await t.ma.stop(),YI(t))})),t.ma}function Di(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new Yz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:l8.bind(null,t),r_:d8.bind(null,t),ta:c8.bind(null,t),na:u8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ym(t)):(await t.fa.stop(),t.Ta.length>0&&(ue(Mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Kx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qx(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),gl(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static emptySet(e){return new Ea(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=ec(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ga=new ut(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class sl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new sl(e,n,Ea.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class m8{constructor(){this.queries=D_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=D_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function D_(){return new Uo(t=>wI(t),um)}async function t2(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new f8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Qx(o,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xx(n)}async function n2(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function p8(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Xx(n)}function g8(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xx(t){t.Ca.forEach(e=>{e.next()})}var Dy,M_;(M_=Dy||(Dy={})).Ma="default",M_.Cache="cache";class r2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.key=e}}class i2{constructor(e){this.key=e}}class y8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=bI(e),this.tu=new Ea(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new P_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=dm(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;p&&y?p.data.isEqual(y.data)?w!==v&&(r.track({type:3,doc:y}),_=!0):this.su(p,y)||(r.track({type:2,doc:y}),_=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!p&&y?(r.track({type:0,doc:y}),_=!0):p&&!y&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,w){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:_})}};return v(y)-v(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new sl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new i2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new s2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yx="SyncEngine";class v8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class x8{constructor(e){this.key=e,this.hu=!1}}class w8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Uo(l=>wI(l),um),this.Iu=new Map,this.Eu=new Set,this.du=new ut(me.comparator),this.Au=new Map,this.Ru=new zx,this.Vu={},this.mu=new Map,this.fu=rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b8(t,e,n=!0){const r=d2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await o2(r,e,n,!0),s}async function _8(t,e){const n=d2(t);await o2(n,e,!0,!1)}async function o2(t,e,n,r){const s=await $z(t.localStore,Kr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await S8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&QI(t.remoteStore,s),l}async function S8(t,e,n,r,s){t.pu=(f,p,y)=>async function(v,_,b,x){let S=_.view.ru(b);S.Cs&&(S=await C_(v.localStore,_.query,!1).then(({documents:T})=>_.view.ru(T,S)));const I=x&&x.targetChanges.get(_.targetId),D=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,v.isPrimaryClient,I,D);return L_(v,_.targetId,M.au),M.snapshot}(t,f,p,y);const i=await C_(t.localStore,e,!0),o=new y8(e,i.Qs),l=o.ru(i.documents),c=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);L_(t,n,u.au);const h=new v8(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function E8(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!um(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ry(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wx(r.remoteStore,s.targetId),My(r,s.targetId)}).catch(pl)):(My(r,s.targetId),await Ry(r.localStore,s.targetId,!0))}async function T8(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wx(n.remoteStore,r.targetId))}async function N8(t,e,n){const r=P8(t);try{const s=await function(o,l){const c=we(o),u=Xe.now(),h=l.reduce((y,w)=>y.add(w.key),Ie());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Ns(),v=Ie();return c.Ns.getEntries(y,h).next(_=>{w=_,w.forEach((b,x)=>{x.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(_=>{f=_;const b=[];for(const x of l){const S=U9(x,f.get(x.key).overlayedDocument);S!=null&&b.push(new Wi(x.key,S,hI(S.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,b,l)}).next(_=>{p=_;const b=_.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(y,_.batchId,b)})}).then(()=>({batchId:p.batchId,changes:SI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ut(ke)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Iu(r,s.changes),await ym(r.remoteStore)}catch(s){const i=Qx(s,"Failed to persist write");n.reject(i)}}async function a2(t,e){const n=we(t);try{const r=await Fz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Fe(o.hu,14607):s.removedDocuments.size>0&&(Fe(o.hu,42227),o.hu=!1))}),await Iu(n,r,e)}catch(r){await pl(r)}}function O_(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Xx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C8(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ut(me.comparator);o=o.insert(i,Jt.newNoDocument(i,ve.min()));const l=Ie().add(i),c=new mm(ve.min(),new Map,new ut(ke),o,l);await a2(r,c),r.du=r.du.remove(i),r.Au.delete(e),Jx(r)}else await Ry(r.localStore,e,!1).then(()=>My(r,e,n)).catch(pl)}async function k8(t,e){const n=we(t),r=e.batch.batchId;try{const s=await Vz(n.localStore,e);c2(n,r,null),l2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,s)}catch(s){await pl(s)}}async function I8(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Fe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);c2(r,e,n),l2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,s)}catch(s){await pl(s)}}function l2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function c2(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function My(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||u2(t,r)})}function u2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jx(t))}function L_(t,e,n){for(const r of n)r instanceof s2?(t.Ru.addReference(r.key,e),A8(t,r)):r instanceof i2?(ue(Yx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||u2(t,r.key)):ge(19791,{wu:r})}function A8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ue(Yx,"New document in limbo: "+n),t.Eu.add(r),Jx(t))}function Jx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(Qe.fromString(e)),r=t.fu.next();t.Au.set(r,new x8(n)),t.du=t.du.insert(n,r),QI(t.remoteStore,new ai(Kr(cm(n.path)),r,"TargetPurposeLimboResolution",om.ce))}}async function Iu(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=$x.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,p=>G.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>G.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!gl(f))throw f;ue(Bx,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),w=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,v)}}}(r.localStore,i))}async function j8(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ue(Yx,"User change. New user:",e.toKey());const r=await HI(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(H.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.Ls)}}function R8(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function d2(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C8.bind(null,e),e.Pu.H_=p8.bind(null,e.eventManager),e.Pu.yu=g8.bind(null,e.eventManager),e}function P8(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I8.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Lz(this.persistence,new Dz,e.initialUser,this.serializer)}Cu(e){return new WI(Ux.mi,this.serializer)}Du(e){return new Wz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class D8 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new WI(r=>nf.mi(r,n),this.serializer)}}class Oy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j8.bind(null,this.syncEngine),await h8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m8}()}createDatastore(e){const n=pm(e.databaseInfo.databaseId),r=function(i){return new Qz(i)}(e.databaseInfo);return function(i,o,l,c){return new Zz(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new t8(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>O_(this.syncEngine,n,0),function(){return A_.v()?new A_:new Hz}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new w8(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);ue(Mo,"RemoteStore shutting down."),i.Ea.add(5),await ku(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Oy.provider={build:()=>new Oy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class M8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue(Mi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue(Mi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wp(t,e){t.asyncQueue.verifyOperationInProgress(),ue(Mi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await HI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await O8(t);ue(Mi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R_(e.remoteStore,s)),t._onlineComponents=e}async function O8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue(Mi,"Using user provided OfflineComponentProvider");try{await Wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await Wp(t,new sf)}}else ue(Mi,"Using default OfflineComponentProvider"),await Wp(t,new D8(void 0));return t._offlineComponents}async function f2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue(Mi,"Using user provided OnlineComponentProvider"),await V_(t,t._uninitializedComponentsProvider._online)):(ue(Mi,"Using default OnlineComponentProvider"),await V_(t,new Oy))),t._onlineComponents}function L8(t){return f2(t).then(e=>e.syncEngine)}async function Ly(t){const e=await f2(t),n=e.eventManager;return n.onListen=b8.bind(null,e.syncEngine),n.onUnlisten=E8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=T8.bind(null,e.syncEngine),n}function V8(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new h2({next:p=>{h.Nu(),o.enqueueAndForget(()=>n2(i,f));const y=p.docs.has(l);!y&&p.fromCache?u.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new r2(cm(l.path),h,{includeMetadataChanges:!0,qa:!0});return t2(i,f)}(await Ly(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firestore.googleapis.com",z_=!0;class U_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p2,this.ssl=z_}else this.host=e.host,this.ssl=e.ssl??z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yz)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jk;switch(r.type){case"firstParty":return new YF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=F_.get(n);r&&(ue("ComponentProvider","Removing Datastore"),F_.delete(n),r.terminate())}(this),Promise.resolve()}}function g2(t,e,n,r={}){var u;t=Yn(t,vm);const s=dl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(ok(`https://${l}`),ak("Firestore",!0)),i.host!==p2&&i.host!==l&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ii(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Qt.MOCK_USER;else{h=xL(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(p)}t._authCredentials=new KF(new Yk(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tu(n,at._jsonSchema))return new at(e,r||null,new me(Qe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:wt("string",at._jsonSchemaVersion),referencePath:wt("string")};class gs extends As{constructor(e,n,r){super(e,n,cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new me(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Zx(t,e,...n){if(t=Ot(t),Zk("collection","path",e),t instanceof vm){const r=Qe.fromString(e,...n);return e_(r),new gs(t,null,r)}{if(!(t instanceof at||t instanceof gs))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return e_(r),new gs(t.firestore,null,r)}}function Be(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=sm.newId()),Zk("doc","path",e),t instanceof vm){const r=Qe.fromString(e,...n);return Zb(r),new at(t,null,new me(r))}{if(!(t instanceof at||t instanceof gs))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return Zb(r),new at(t.firestore,t instanceof gs?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="AsyncQueue";class B_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GI(this,"async_queue_retry"),this._c=()=>{const r=Bp();r&&ue($_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;ue($_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",W_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Kx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:W_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function W_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Oi extends vm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new B_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B_(e),this._firestoreClient=void 0,await e}}}function y2(t,e){const n=typeof t=="object"?t:dk(),r=typeof t=="string"?t:Xh,s=vx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yL("firestore");i&&g2(s,...i)}return s}function xm(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||F8(t),t._firestoreClient}function F8(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new f9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,m2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new M8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:wt("string",Rn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:wt("string",vr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xr(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xr._jsonSchemaVersion="firestore/vectorValue/1.0",xr._jsonSchema={type:wt("string",xr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=/^__.*__$/;class U8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}class v2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class wm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x2(this.Ac)&&z8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pm(e)}Cc(e,n,r,s=!1){return new wm({Ac:e,methodName:n,Dc:r,path:Dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e0(t){const e=t._freezeSettings(),n=pm(t._databaseId);return new $8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function B8(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);r0("Data must be an object, but it was:",o,r);const l=w2(r,o);let c,u;if(i.merge)c=new Dn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Vy(e,f,n);if(!o.contains(p))throw new le(H.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_2(h,p)||h.push(p)}c=new Dn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new U8(new vn(l),c,u)}class bm extends xl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}function W8(t,e,n){return new wm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class t0 extends xl{_toFieldTransform(e){return new AI(e.path,new Zc)}isEqual(e){return e instanceof t0}}class n0 extends xl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=W8(this,e,!0),r=this.vc.map(i=>wl(i,n)),s=new nl(r);return new AI(e.path,s)}isEqual(e){return e instanceof n0&&Ii(this.vc,e.vc)}}function H8(t,e,n,r){const s=t.Cc(1,e,n);r0("Data must be an object, but it was:",s,r);const i=[],o=vn.empty();Bi(r,(c,u)=>{const h=s0(e,c,n);u=Ot(u);const f=s.yc(h);if(u instanceof bm)i.push(h);else{const p=wl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Dn(i);return new v2(o,l,s.fieldTransforms)}function q8(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Vy(e,r,n)],c=[s];if(i.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Vy(e,i[p])),c.push(i[p+1]);const u=[],h=vn.empty();for(let p=l.length-1;p>=0;--p)if(!_2(u,l[p])){const y=l[p];let w=c[p];w=Ot(w);const v=o.yc(y);if(w instanceof bm)u.push(y);else{const _=wl(w,v);_!=null&&(u.push(y),h.set(y,_))}}const f=new Dn(u);return new v2(h,f,o.fieldTransforms)}function G8(t,e,n,r=!1){return wl(n,t.Cc(r?4:3,e))}function wl(t,e){if(b2(t=Ot(t)))return r0("Unsupported field value:",e,t),w2(t,e);if(t instanceof xl)return function(r,s){if(!x2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=wl(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:tf(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tf(s.serializer,i)}}if(r instanceof vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:OI(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xr)return function(o,l){return{mapValue:{fields:{[cI]:{stringValue:dI},[Yh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Mx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${im(r)}`)}(t,e)}function w2(t,e){const n={};return rI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(t,(r,s)=>{const i=wl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function b2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof vr||t instanceof Rn||t instanceof at||t instanceof xl||t instanceof xr)}function r0(t,e,n){if(!b2(n)||!tI(n)){const r=im(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Vy(t,e,n){if((e=Ot(e))instanceof Au)return e._internalPath;if(typeof e=="string")return s0(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const K8=new RegExp("[~\\*/\\[\\]]");function s0(t,e,n){if(e.search(K8)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function _2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(i0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q8 extends S2{data(){return super.data()}}function i0(t,e){return typeof e=="string"?s0(t,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{}class _m extends o0{}function a0(t,e,...n){let r=[];e instanceof o0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Em).length,l=i.filter(c=>c instanceof Sm).length;if(o>1||o>0&&l>0)throw new le(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sm extends _m{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sm(e,n,r)}_apply(e){const n=this._parse(e);return T2(e._query,n),new As(e.firestore,e.converter,Cy(e._query,n))}_parse(e){const n=e0(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){G_(f,h);const w=[];for(const v of f)w.push(q_(c,i,v));p={arrayValue:{values:w}}}else p=q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||G_(f,h),p=G8(l,o,f,h==="in"||h==="not-in");return xt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Em extends o0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)T2(o,c),o=Cy(o,c)}(e._query,n),new As(e.firestore,e.converter,Cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends _m{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jc(i,o)}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function l0(t,e="asc"){const n=e,r=i0("orderBy",t);return Tm._create(r,n)}class Nm extends _m{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){return new As(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function E2(t){return Nm._create("limit",t,"F")}function q_(t,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new le(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xI(e)&&n.indexOf("/")!==-1)throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!me.isDocumentKey(r))throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return l_(t,new me(r))}if(n instanceof at)return l_(t,n._key);throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${im(n)}.`)}function G_(t,e){if(!Array.isArray(t)||t.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N2{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Yh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>pt(o.doubleValue));return new xr(n)}convertGeoPoint(e){return new vr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);Fe($I(r),9688,{name:e});const s=new Za(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||Ts(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _i extends S2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(i0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_i._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_i._jsonSchemaVersion="firestore/documentSnapshot/1.0",_i._jsonSchema={type:wt("string",_i._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class wc extends _i{data(e={}){return super.data(e)}}class _o{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ha(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wc(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new wc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new wc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:J8(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function J8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){t=Yn(t,at);const e=Yn(t.firestore,Oi);return V8(xm(e),t._key).then(n=>A2(e,t,n))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:wt("string",_o._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class C2 extends N2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Zt(t,e,n){t=Yn(t,at);const r=Yn(t.firestore,Oi),s=Y8(t.converter,e,n);return Cm(r,[B8(e0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yr.none())])}function k2(t,e,n,...r){t=Yn(t,at);const s=Yn(t.firestore,Oi),i=e0(s);let o;return o=typeof(e=Ot(e))=="string"||e instanceof Au?q8(i,"updateDoc",t._key,e,n,r):H8(i,"updateDoc",t._key,e),Cm(s,[o.toMutation(t._key,yr.exists(!0))])}function I2(t){return Cm(Yn(t.firestore,Oi),[new Ox(t._key,yr.none())])}function js(t,...e){var c,u,h;t=Ot(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||H_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(H_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof at)o=Yn(t.firestore,Oi),l=cm(t._key.path),i={next:f=>{e[r]&&e[r](A2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Yn(t,As);o=Yn(f.firestore,Oi),l=f._query;const p=new C2(o);i={next:y=>{e[r]&&e[r](new _o(o,p,f,y))},error:e[r+1],complete:e[r+2]},X8(t._query)}return function(p,y,w,v){const _=new h2(v),b=new r2(y,_,w);return p.asyncQueue.enqueueAndForget(async()=>t2(await Ly(p),b)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>n2(await Ly(p),b))}}(xm(o),l,s,i)}function Cm(t,e){return function(r,s){const i=new bi;return r.asyncQueue.enqueueAndForget(async()=>N8(await L8(r),s,i)),i.promise}(xm(t),e)}function A2(t,e,n){const r=n.docs.get(e._key),s=new C2(t);return new _i(t,s,e._key,r,new ha(n.hasPendingWrites,n.fromCache),e.converter)}function c0(){return new t0("serverTimestamp")}function j2(...t){return new n0("arrayUnion",t)}(function(e,n=!0){(function(s){ml=s})(hl),Xa(new jo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Oi(new QF(r.getProvider("auth-internal")),new JF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),xi(Qb,Xb,e),xi(Qb,Xb,"esm2020")})();const K_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:N2,Bytes:Rn,CollectionReference:gs,DocumentReference:at,DocumentSnapshot:_i,FieldPath:Au,FieldValue:xl,Firestore:Oi,FirestoreError:le,GeoPoint:vr,Query:As,QueryCompositeFilterConstraint:Em,QueryConstraint:_m,QueryDocumentSnapshot:wc,QueryFieldFilterConstraint:Sm,QueryLimitConstraint:Nm,QueryOrderByConstraint:Tm,QuerySnapshot:_o,SnapshotMetadata:ha,Timestamp:Xe,VectorValue:xr,_AutoId:sm,_ByteString:Lt,_DatabaseId:Za,_DocumentKey:me,_EmptyAuthCredentialsProvider:Jk,_FieldPath:Dt,_cast:Yn,_logWarn:Do,_validateIsNotUsedTogether:eI,arrayUnion:j2,collection:Zx,connectFirestoreEmulator:g2,deleteDoc:I2,doc:Be,ensureFirestoreConfigured:xm,executeWrite:Cm,getDoc:Cs,getFirestore:y2,limit:E2,onSnapshot:js,orderBy:l0,query:a0,serverTimestamp:c0,setDoc:Zt,updateDoc:k2},Symbol.toStringTag,{value:"Module"})),Z8={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},u0=uk(Z8),oo=WF(u0),Ve=y2(u0),Tr=new Xt;Tr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Tr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Tr.addScope("https://www.googleapis.com/auth/calendar");Tr.addScope("https://www.googleapis.com/auth/gmail.send");Tr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const Q_=Object.freeze(Object.defineProperty({__proto__:null,app:u0,auth:oo,db:Ve,googleProvider:Tr},Symbol.toStringTag,{value:"Module"})),R2=m.createContext(void 0);function eU({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>localStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>PV(oo,x=>{n(x),x||(h(null),s(!1),o(null),localStorage.removeItem("google_access_token"))}),[]),m.useEffect(()=>{async function b(){if(!e||!i){if(e&&!i){const x=localStorage.getItem("google_access_token");if(x){o(x);return}}e||s(!1);return}try{s(!0);const x=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let S=!1;if(x.ok){const M=await x.json();M.courses&&M.courses.length>0&&(S=!0)}if(S){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const I=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let D=!1;if(I.ok){const M=await I.json();M.courses&&M.courses.length>0&&(D=!0)}D?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(x){console.error("Role detection failed:",x),h("no_access")}finally{s(!1)}}b()},[e,i]);const f=async()=>{try{c(null),Tr.setCustomParameters({prompt:"consent",access_type:"offline"});const b=await bd(oo,Tr),x=Xt.credentialFromResult(b);x!=null&&x.accessToken&&(o(x.accessToken),localStorage.setItem("google_access_token",x.accessToken))}catch(b){const x=b instanceof Error?b.message:"Failed to sign in";c(x),console.error("Sign in error:",b)}},p=async()=>{try{c(null);const b=new Xt;b.addScope("https://www.googleapis.com/auth/gmail.send"),b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await bd(oo,b),S=Xt.credentialFromResult(x),I=x._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),I!=null&&I.oauthRefreshToken){const{doc:D,setDoc:M,serverTimestamp:T}=await xd(async()=>{const{doc:C,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>K_);return{doc:C,setDoc:k,serverTimestamp:A}},void 0),{db:N}=await xd(async()=>{const{db:C}=await Promise.resolve().then(()=>Q_);return{db:C}},void 0);if(e&&I.oauthRefreshToken)return await M(D(N,"users",e.uid,"private_tokens","google"),{refreshToken:I.oauthRefreshToken,updatedAt:T()}),!0}return!!(S!=null&&S.accessToken)}catch(b){const x=b instanceof Error?b.message:"Failed to get Gmail permissions";return c(x),console.error("Permission error:",b),!1}},y=async()=>{try{c(null);const b=new Xt;b.addScope("https://www.googleapis.com/auth/calendar.events"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await bd(oo,b),S=Xt.credentialFromResult(x),I=x._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),e&&(I!=null&&I.oauthRefreshToken)){const{doc:D,setDoc:M,serverTimestamp:T}=await xd(async()=>{const{doc:C,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>K_);return{doc:C,setDoc:k,serverTimestamp:A}},void 0),{db:N}=await xd(async()=>{const{db:C}=await Promise.resolve().then(()=>Q_);return{db:C}},void 0);return await M(D(N,"users",e.uid,"private_tokens","calendar"),{refreshToken:I.oauthRefreshToken,updatedAt:T(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(b){const x=b instanceof Error?b.message:"Failed to get Calendar permissions";return c(x),console.error("Permission error:",b),!1}},w=async()=>{if(!e)return!1;try{const b=new Xt;b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),b.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),b.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const x=await bd(oo,b),S=Xt.credentialFromResult(x);return S!=null&&S.accessToken?(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(b){return console.error("Failed to refresh access token:",b),!1}},v=async()=>w(),_=async()=>{try{await DV(oo),o(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(b){const x=b instanceof Error?b.message:"Failed to sign out";c(x)}};return a.jsx(R2.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:y,refreshAccessToken:v,signOut:_,error:l},children:t})}function it(){const t=m.useContext(R2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const P2=m.createContext(void 0);function tU({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(P2.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function d0(){const t=m.useContext(P2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class nU{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const o=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-o)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,o){try{const{totalXP:l,processedIds:c}=this.calculateXP(i),u=n.includes("@")?n.split("@")[1]:"",h=o.map(v=>v.id),f=Be(Ve,"leaderboards","all-courses","students",e),p=await Cs(f),y=p.exists()?p.data().badges||[]:[],w=this.calculateBadges(c.length,y);await Zt(f,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:u,enrolledCourseIds:h,totalXP:l,processedAssignmentIds:c,lastSyncedAt:c0(),badges:w},{merge:!0})}catch(l){throw console.error(" Failed to sync leaderboard:",l),l}}static async resetLeaderboardForSemester(e){try{const n=Be(Ve,"leaderboards","all-courses","students",e);await I2(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=Be(Ve,"leaderboards","all-courses","students",e),s=await Cs(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],o=new Set(n),l=new Set(i);if(o.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!o.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,o){try{const l=o.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,o)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}const qn={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},X_={async fetchCourses(t,e){const n=qn.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const o=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:rU(l.id)}));return qn.set(`courses_${e}`,o,60*60*24),o},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,o=qn.get(i);if(o)return o;const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,turnInTime,updateTime,late)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{courseWork:[]}),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{studentSubmissions:[]})]),f=u.courseWork||[],p=h.studentSubmissions||[],y=f.filter(w=>!w.workType||w.workType==="ASSIGNMENT"||w.workType==="MULTIPLE_CHOICE_QUESTION").map(w=>{const v=p.find(_=>_.courseWorkId===w.id);return sU(w,s,v)});return qn.set(i,y,3600),y}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},Y_=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function rU(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%Y_.length;return Y_[n]}function sU(t,e,n){var f,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((f=t.dueTime)==null?void 0:f.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let o="backlog",l="backlog",c=null,u=null,h=null;return n&&(n.state==="TURNED_IN"?(o="submitted",l="submitted",u=n.turnInTime||n.updateTime):n.state==="RETURNED"&&(o="graded",l="graded",c=n.assignedGrade)),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",o="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:o,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function iU(t,e,n,r){const s=Be(Ve,"users",n,"settings","calendar"),i=await Cs(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const y=Be(Ve,"users",n,"calendarEvents",c.id),w=await Cs(y),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(w.exists()){const{calendarEventId:b}=w.data();_=await fetch(`${v}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(_=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),_.ok){const b=await _.json();await Zt(y,{calendarEventId:b.id,assignmentId:c.id,updatedAt:c0()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const D2=m.createContext(void 0);function oU(){return Math.random().toString(36).substring(2,15)}async function J_(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,y={};try{const w=await u.json();y=w,p=((o=w.error)==null?void 0:o.message)||w.message||p,console.error("API Error Response:",w)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}async function aU(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,o=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([J_(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),J_(t,o,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var y,w;return((y=p.message)!=null&&y.includes("insufficient authentication scopes")||(w=p.message)!=null&&w.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const y=p.text||"Announcement Material",w=y.split(`
`)[0].length>60?y.split(`
`)[0].substring(0,57)+"...":y.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:w,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function lU({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=it(),{toast:i}=zo(),[o,l]=m.useState(()=>{if(!e)return[];const U=qn.get(`courses_${e.uid}`);if(U)return U;const W=localStorage.getItem("classroom_courses");return W?JSON.parse(W):[]}),[c,u]=m.useState(()=>{if(!e)return[];const U=localStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[h,f]=m.useState(()=>{const U=localStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[p,y]=m.useState(()=>{const U=localStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[w,v]=m.useState(()=>e&&qn.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,b]=m.useState(!1),[x,S]=m.useState(()=>{const U=localStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[I,D]=m.useState(null),[M,T]=m.useState(!1),[N,C]=m.useState(!1);m.useEffect(()=>{!s&&!e&&(l([]),u([]),f([]),y(new Map),S(null),T(!1),qn.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const k=m.useCallback(async(U=!1)=>{if(!e)return;let W=n;if(!W)try{await r()&&(W=localStorage.getItem("google_access_token"))}catch(q){console.error(q)}if(!W){D("Session expired. Please sign in again.");return}b(!0),D(null);try{const q=await X_.fetchCourses(W,e.uid);l(ee=>JSON.stringify(ee)!==JSON.stringify(q)?q:ee);const ie=await X_.fetchAssignmentsParallel(W,q);u(ie),S(new Date),Promise.all(q.map(ee=>aU(W,ee.classroomId,ee.name,e.uid,()=>C(!0)))).then(ee=>{const ne=ee.flat();f(ne)}),iU(ie,W,e.uid,i).catch(ee=>console.warn(ee)),nU.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",ie,q).catch(console.warn)}catch(q){console.error("Sync Error",q),D(q.message||"Failed to sync"),U||i({variant:"destructive",title:"Sync Failed",description:q.message})}finally{b(!1),v(!1)}},[e,n,r,i]);m.useEffect(()=>{!e||!n||!M&&!_&&(T(!0),k(!0))},[e,n,M,_,k]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(o))},[o]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(h))},[h]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(p.entries())))},[p]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(c))},[c]),m.useEffect(()=>{x&&localStorage.setItem("classroom_lastSyncedAt",x.toISOString())},[x]);const A=m.useCallback((U,W)=>{u(q=>q.map(ie=>ie.id===U?{...ie,userStatus:W}:ie))},[]),P=m.useCallback((U,W,q=!1)=>{const ie={id:oU(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:W,isImportant:q,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};y(ee=>{const ne=new Map(ee),oe=ne.get(U)||[];return ne.set(U,[...oe,ie]),ne})},[e]),R=m.useCallback((U,W,q)=>{y(ie=>{const ee=new Map(ie);for(const[ne,oe]of Array.from(ee.entries())){const V=oe.findIndex(Y=>Y.id===U);if(V!==-1){const Y=[...oe];Y[V]={...Y[V],content:W,isImportant:q??Y[V].isImportant,updatedAt:new Date().toISOString()},ee.set(ne,Y);break}}return ee})},[]),F=m.useCallback((U,W)=>{y(q=>{const ie=new Map(q),ee=ie.get(W)||[];return ie.set(W,ee.filter(ne=>ne.id!==U)),ie})},[]),se=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return c.forEach(W=>{let q=W.systemStatus;W.userStatus==="in_progress"&&q!=="submitted"&&q!=="graded"&&(q="in_progress");const ie=U.find(ee=>ee.id===q);ie&&ie.assignments.push(W)}),U.forEach(W=>{W.assignments.sort((q,ie)=>q.dueDate?ie.dueDate?new Date(q.dueDate).getTime()-new Date(ie.dueDate).getTime():-1:1)}),U},[c]),J=m.useCallback(()=>{const U=new Date,W=new Date(U);W.setDate(W.getDate()+3);const q=new Date(U);q.setDate(q.getDate()+7);const ie=c.filter(te=>te.systemStatus!=="graded"&&te.systemStatus!=="submitted"),ee=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ae=new Date(te.dueDate);return ae>=U&&ae<=W}),ne=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ae=new Date(te.dueDate);return ae>=U&&ae<=q}),oe=c.filter(te=>te.systemStatus==="overdue"),V=[],Y=new Date,de=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let te=0;te<7;te++){const ae=new Date(Y);ae.setDate(ae.getDate()+te);const Te=ae.toISOString().split("T")[0],Re=c.filter(mt=>mt.dueDate&&mt.dueDate.startsWith(Te)).length;V.push({day:de[ae.getDay()],count:Re,isToday:te===0})}const Q=[...ie].filter(te=>te.dueDate).sort((te,ae)=>new Date(te.dueDate).getTime()-new Date(ae.dueDate).getTime()).slice(0,5);return{totalActive:ie.length,upcoming3Days:ee.length,upcoming7Days:ne.length,overdue:oe.length,weeklyWorkload:V,nextActions:Q}},[c]),X=m.useCallback(U=>{let W=[...c];U!=null&&U.courseId&&(W=W.filter(ne=>ne.courseId===U.courseId)),U!=null&&U.status&&(W=W.filter(ne=>ne.systemStatus===U.status)),W.sort((ne,oe)=>ne.dueDate?oe.dueDate?new Date(ne.dueDate).getTime()-new Date(oe.dueDate).getTime():-1:1);const q=new Map,ie=new Date,ee=new Date(ie);return ee.setDate(ee.getDate()+1),W.forEach(ne=>{if(!ne.dueDate)return;const oe=ne.dueDate.split("T")[0],V=new Date(ne.dueDate);let Y=oe===ie.toISOString().split("T")[0]?"Today":oe===ee.toISOString().split("T")[0]?"Tomorrow":V.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});q.has(oe)||q.set(oe,{date:oe,dateLabel:Y,assignments:[]}),q.get(oe).assignments.push(ne)}),Array.from(q.values())},[c]),O=m.useCallback(U=>c.find(W=>W.id===U),[c]),B=m.useCallback(U=>p.get(U)||[],[p]);return a.jsx(D2.Provider,{value:{courses:o,assignments:c,notes:p,isLoading:w,isSyncing:_,lastSyncedAt:x,error:I,syncClassroom:k,updateAssignmentStatus:A,addNote:P,updateNote:R,deleteNote:F,getPipelineColumns:se,getDashboardMetrics:J,getTimelineGroups:X,getAssignmentById:O,getNotesForAssignment:B,materials:h,reauthRequired:N},children:t})}function xn(){const t=m.useContext(D2);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Hp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",Z_={bubbles:!1,cancelable:!0},cU="FocusScope",h0=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=ln(s),h=ln(i),f=m.useRef(null),p=$e(e,v=>c(v)),y=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(S){if(y.paused||!l)return;const I=S.target;l.contains(I)?f.current=I:Hs(f.current,{select:!0})},_=function(S){if(y.paused||!l)return;const I=S.relatedTarget;I!==null&&(l.contains(I)||Hs(f.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&Hs(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,y.paused]),m.useEffect(()=>{if(l){tS.add(y);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Hp,Z_);l.addEventListener(Hp,u),l.dispatchEvent(b),b.defaultPrevented||(uU(pU(M2(l)),{select:!0}),document.activeElement===v&&Hs(l))}return()=>{l.removeEventListener(Hp,u),setTimeout(()=>{const b=new CustomEvent(qp,Z_);l.addEventListener(qp,h),l.dispatchEvent(b),b.defaultPrevented||Hs(v??document.body,{select:!0}),l.removeEventListener(qp,h),tS.remove(y)},0)}}},[l,u,h,y]);const w=m.useCallback(v=>{if(!n&&!r||y.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(_&&b){const x=v.currentTarget,[S,I]=dU(x);S&&I?!v.shiftKey&&b===I?(v.preventDefault(),n&&Hs(S,{select:!0})):v.shiftKey&&b===S&&(v.preventDefault(),n&&Hs(I,{select:!0})):b===x&&v.preventDefault()}},[n,r,y.paused]);return a.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:w})});h0.displayName=cU;function uU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Hs(r,{select:e}),document.activeElement!==n)return}function dU(t){const e=M2(t),n=eS(e,t),r=eS(e.reverse(),t);return[n,r]}function M2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eS(t,e){for(const n of t)if(!hU(n,{upTo:e}))return n}function hU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fU(t){return t instanceof HTMLInputElement&&"select"in t}function Hs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&fU(t)&&e&&t.select()}}var tS=mU();function mU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=nS(t,e),t.unshift(e)},remove(e){var n;t=nS(t,e),(n=t[0])==null||n.resume()}}}function nS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function pU(t){return t.filter(e=>e.tagName!=="A")}var Gp=0;function O2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??rS()),document.body.insertAdjacentElement("beforeend",t[1]??rS()),Gp++,()=>{Gp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gp--}},[])}function rS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Br=function(){return Br=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Br.apply(this,arguments)};function L2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var ih="right-scroll-bar-position",oh="width-before-scroll-bar",yU="with-scroll-bars-hidden",vU="--removed-body-scroll-bar-size";function Kp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function xU(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var wU=typeof window<"u"?m.useLayoutEffect:m.useEffect,sS=new WeakMap;function bU(t,e){var n=xU(null,function(r){return t.forEach(function(s){return Kp(s,r)})});return wU(function(){var r=sS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Kp(l,null)}),i.forEach(function(l){s.has(l)||Kp(l,o)})}sS.set(n,t)},[t]),n}function _U(t){return t}function SU(t,e){e===void 0&&(e=_U);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function EU(t){t===void 0&&(t={});var e=SU(null);return e.options=Br({async:!0,ssr:!1},t),e}var V2=function(t){var e=t.sideCar,n=L2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Br({},n))};V2.isSideCarExport=!0;function TU(t,e){return t.useMedium(e),V2}var F2=EU(),Qp=function(){},km=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Qp,onWheelCapture:Qp,onTouchMoveCapture:Qp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,y=t.noIsolation,w=t.inert,v=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,x=t.gapMode,S=L2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,D=bU([n,e]),M=Br(Br({},S),s);return m.createElement(m.Fragment,null,h&&m.createElement(I,{sideCar:F2,removeScrollBar:u,shards:f,noIsolation:y,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?m.cloneElement(m.Children.only(l),Br(Br({},M),{ref:D})):m.createElement(b,Br({},M,{className:c,ref:D}),l))});km.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};km.classNames={fullWidth:oh,zeroRight:ih};var NU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function CU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=NU();return e&&t.setAttribute("nonce",e),t}function kU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function IU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var AU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=CU())&&(kU(e,n),IU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jU=function(){var t=AU();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},z2=function(){var t=jU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},RU={left:0,top:0,right:0,gap:0},Xp=function(t){return parseInt(t||"",10)||0},PU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Xp(n),Xp(r),Xp(s)]},DU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RU;var e=PU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},MU=z2(),Ta="data-scroll-locked",OU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(yU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ta,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ih,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(oh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ih," .").concat(ih,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(oh," .").concat(oh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ta,`] {
    `).concat(vU,": ").concat(l,`px;
  }
`)},iS=function(){var t=parseInt(document.body.getAttribute(Ta)||"0",10);return isFinite(t)?t:0},LU=function(){m.useEffect(function(){return document.body.setAttribute(Ta,(iS()+1).toString()),function(){var t=iS()-1;t<=0?document.body.removeAttribute(Ta):document.body.setAttribute(Ta,t.toString())}},[])},VU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;LU();var i=m.useMemo(function(){return DU(s)},[s]);return m.createElement(MU,{styles:OU(i,!e,s,n?"":"!important")})},Fy=!1;if(typeof window<"u")try{var Cd=Object.defineProperty({},"passive",{get:function(){return Fy=!0,!0}});window.addEventListener("test",Cd,Cd),window.removeEventListener("test",Cd,Cd)}catch{Fy=!1}var Go=Fy?{passive:!1}:!1,FU=function(t){return t.tagName==="TEXTAREA"},U2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!FU(t)&&n[e]==="visible")},zU=function(t){return U2(t,"overflowY")},UU=function(t){return U2(t,"overflowX")},oS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$2(t,r);if(s){var i=B2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$U=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},BU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$2=function(t,e){return t==="v"?zU(e):UU(e)},B2=function(t,e){return t==="v"?$U(e):BU(e)},WU=function(t,e){return t==="h"&&e==="rtl"?-1:1},HU=function(t,e,n,r,s){var i=WU(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var y=B2(t,l),w=y[0],v=y[1],_=y[2],b=v-_-i*w;(w||b)&&$2(t,l)&&(f+=b,p+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},kd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aS=function(t){return[t.deltaX,t.deltaY]},lS=function(t){return t&&"current"in t?t.current:t},qU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},GU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},KU=0,Ko=[];function QU(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(KU++)[0],i=m.useState(z2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=gU([t.lockRef.current],(t.shards||[]).map(lS),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var b=kd(v),x=n.current,S="deltaX"in v?v.deltaX:x[0]-b[0],I="deltaY"in v?v.deltaY:x[1]-b[1],D,M=v.target,T=Math.abs(S)>Math.abs(I)?"h":"v";if("touches"in v&&T==="h"&&M.type==="range")return!1;var N=oS(T,M);if(!N)return!0;if(N?D=T:(D=T==="v"?"h":"v",N=oS(T,M)),!N)return!1;if(!r.current&&"changedTouches"in v&&(S||I)&&(r.current=D),!D)return!0;var C=r.current||D;return HU(C,_,v,C==="h"?S:I,!0)},[]),c=m.useCallback(function(v){var _=v;if(!(!Ko.length||Ko[Ko.length-1]!==i)){var b="deltaY"in _?aS(_):kd(_),x=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&qU(D.delta,b)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(lS).filter(Boolean).filter(function(D){return D.contains(_.target)}),I=S.length>0?l(_,S[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),u=m.useCallback(function(v,_,b,x){var S={name:v,delta:_,target:b,should:x,shadowParent:XU(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(I){return I!==S})},1)},[]),h=m.useCallback(function(v){n.current=kd(v),r.current=void 0},[]),f=m.useCallback(function(v){u(v.type,aS(v),v.target,l(v,t.lockRef.current))},[]),p=m.useCallback(function(v){u(v.type,kd(v),v.target,l(v,t.lockRef.current))},[]);m.useEffect(function(){return Ko.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",h,Go),function(){Ko=Ko.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",h,Go)}},[]);var y=t.removeScrollBar,w=t.inert;return m.createElement(m.Fragment,null,w?m.createElement(i,{styles:GU(s)}):null,y?m.createElement(VU,{gapMode:t.gapMode}):null)}function XU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const YU=TU(F2,QU);var f0=m.forwardRef(function(t,e){return m.createElement(km,Br({},t,{ref:e,sideCar:YU}))});f0.classNames=km.classNames;var JU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qo=new WeakMap,Id=new WeakMap,Ad={},Yp=0,W2=function(t){return t&&(t.host||W2(t.parentNode))},ZU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=W2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},e7=function(t,e,n,r){var s=ZU(e,Array.isArray(t)?t:[t]);Ad[n]||(Ad[n]=new WeakMap);var i=Ad[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var y=p.getAttribute(r),w=y!==null&&y!=="false",v=(Qo.get(p)||0)+1,_=(i.get(p)||0)+1;Qo.set(p,v),i.set(p,_),o.push(p),v===1&&w&&Id.set(p,!0),_===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),Yp++,function(){o.forEach(function(f){var p=Qo.get(f)-1,y=i.get(f)-1;Qo.set(f,p),i.set(f,y),p||(Id.has(f)||f.removeAttribute(r),Id.delete(f)),y||f.removeAttribute(n)}),Yp--,Yp||(Qo=new WeakMap,Qo=new WeakMap,Id=new WeakMap,Ad={})}},H2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=JU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),e7(r,s,n,"aria-hidden")):function(){return null}},m0="Dialog",[q2,G2]=kr(m0),[t7,Ir]=q2(m0),K2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Ti({prop:r,defaultProp:s,onChange:i});return a.jsx(t7,{scope:e,triggerRef:l,contentRef:c,contentId:ps(),titleId:ps(),descriptionId:ps(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};K2.displayName=m0;var Q2="DialogTrigger",X2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(Q2,n),i=$e(e,s.triggerRef);return a.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":y0(s.open),...r,ref:i,onClick:pe(t.onClick,s.onOpenToggle)})});X2.displayName=Q2;var p0="DialogPortal",[n7,Y2]=q2(p0,{forceMount:void 0}),J2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ir(p0,e);return a.jsx(n7,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(Ui,{present:n||i.open,children:a.jsx(mu,{asChild:!0,container:s,children:o})}))})};J2.displayName=p0;var af="DialogOverlay",Z2=m.forwardRef((t,e)=>{const n=Y2(af,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ir(af,t.__scopeDialog);return i.modal?a.jsx(Ui,{present:r||i.open,children:a.jsx(s7,{...s,ref:e})}):null});Z2.displayName=af;var r7=Ha("DialogOverlay.RemoveScroll"),s7=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(af,n);return a.jsx(f0,{as:r7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(xe.div,{"data-state":y0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Oo="DialogContent",eA=m.forwardRef((t,e)=>{const n=Y2(Oo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ir(Oo,t.__scopeDialog);return a.jsx(Ui,{present:r||i.open,children:i.modal?a.jsx(i7,{...s,ref:e}):a.jsx(o7,{...s,ref:e})})});eA.displayName=Oo;var i7=m.forwardRef((t,e)=>{const n=Ir(Oo,t.__scopeDialog),r=m.useRef(null),s=$e(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return H2(i)},[]),a.jsx(tA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault())})}),o7=m.forwardRef((t,e)=>{const n=Ir(Oo,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(tA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),tA=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Ir(Oo,n),c=m.useRef(null),u=$e(e,c);return O2(),a.jsxs(a.Fragment,{children:[a.jsx(h0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(fu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":y0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(l7,{titleId:l.titleId}),a.jsx(u7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),g0="DialogTitle",nA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(g0,n);return a.jsx(xe.h2,{id:s.titleId,...r,ref:e})});nA.displayName=g0;var rA="DialogDescription",sA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(rA,n);return a.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});sA.displayName=rA;var iA="DialogClose",oA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ir(iA,n);return a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});oA.displayName=iA;function y0(t){return t?"open":"closed"}var aA="DialogTitleWarning",[a7,lA]=MM(aA,{contentName:Oo,titleName:g0,docsSlug:"dialog"}),l7=({titleId:t})=>{const e=lA(aA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},c7="DialogDescriptionWarning",u7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lA(c7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},cA=K2,d7=X2,uA=J2,v0=Z2,x0=eA,w0=nA,b0=sA,_0=oA,dA="AlertDialog",[h7,ZH]=kr(dA,[G2]),Rs=G2(),hA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Rs(e);return a.jsx(cA,{...r,...n,modal:!0})};hA.displayName=dA;var f7="AlertDialogTrigger",fA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Rs(n);return a.jsx(d7,{...s,...r,ref:e})});fA.displayName=f7;var m7="AlertDialogPortal",mA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Rs(e);return a.jsx(uA,{...r,...n})};mA.displayName=m7;var p7="AlertDialogOverlay",pA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Rs(n);return a.jsx(v0,{...s,...r,ref:e})});pA.displayName=p7;var Na="AlertDialogContent",[g7,y7]=h7(Na),v7=_N("AlertDialogContent"),gA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Rs(n),o=m.useRef(null),l=$e(e,o),c=m.useRef(null);return a.jsx(a7,{contentName:Na,titleName:yA,docsSlug:"alert-dialog",children:a.jsx(g7,{scope:n,cancelRef:c,children:a.jsxs(x0,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:pe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(v7,{children:r}),a.jsx(w7,{contentRef:o})]})})})});gA.displayName=Na;var yA="AlertDialogTitle",vA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Rs(n);return a.jsx(w0,{...s,...r,ref:e})});vA.displayName=yA;var xA="AlertDialogDescription",wA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Rs(n);return a.jsx(b0,{...s,...r,ref:e})});wA.displayName=xA;var x7="AlertDialogAction",bA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Rs(n);return a.jsx(_0,{...s,...r,ref:e})});bA.displayName=x7;var _A="AlertDialogCancel",SA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=y7(_A,n),i=Rs(n),o=$e(e,s);return a.jsx(_0,{...i,...r,ref:o})});SA.displayName=_A;var w7=({contentRef:t})=>{const e=`\`${Na}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Na}\` by passing a \`${xA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Na}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},b7=hA,_7=fA,S7=mA,EA=pA,TA=gA,NA=bA,CA=SA,kA=vA,IA=wA;const S0=gu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?LM:"button";return a.jsx(o,{className:$(S0({variant:e,size:n,className:t})),ref:i,...s})});fe.displayName="Button";const AA=b7,jA=_7,E7=S7,RA=m.forwardRef(({className:t,...e},n)=>a.jsx(EA,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));RA.displayName=EA.displayName;const E0=m.forwardRef(({className:t,...e},n)=>a.jsxs(E7,{children:[a.jsx(RA,{}),a.jsx(TA,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));E0.displayName=TA.displayName;const T0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});T0.displayName="AlertDialogHeader";const N0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});N0.displayName="AlertDialogFooter";const C0=m.forwardRef(({className:t,...e},n)=>a.jsx(kA,{ref:n,className:$("text-lg font-semibold",t),...e}));C0.displayName=kA.displayName;const k0=m.forwardRef(({className:t,...e},n)=>a.jsx(IA,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));k0.displayName=IA.displayName;const I0=m.forwardRef(({className:t,...e},n)=>a.jsx(NA,{ref:n,className:$(S0(),t),...e}));I0.displayName=NA.displayName;const A0=m.forwardRef(({className:t,...e},n)=>a.jsx(CA,{ref:n,className:$(S0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));A0.displayName=CA.displayName;const Jp=768;function Im(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Jp-1}px)`),r=()=>{e(window.innerWidth<Jp)};return n.addEventListener("change",r),e(window.innerWidth<Jp),()=>n.removeEventListener("change",r)},[]),!!t}var j0="Avatar",[T7,eq]=kr(j0),[N7,PA]=T7(j0),DA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(N7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(xe.span,{...r,ref:e})})});DA.displayName=j0;var MA="AvatarImage",OA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=PA(MA,n),l=C7(r,i),c=ln(u=>{s(u),o.onImageLoadingStatusChange(u)});return It(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(xe.img,{...i,ref:e,src:r}):null});OA.displayName=MA;var LA="AvatarFallback",VA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=PA(LA,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(xe.span,{...s,ref:e}):null});VA.displayName=LA;function cS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function C7(t,{referrerPolicy:e,crossOrigin:n}){const r=I7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>cS(i,t));return It(()=>{l(cS(i,t))},[i,t]),It(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function k7(){return()=>{}}function I7(){return m.useSyncExternalStore(k7,()=>!0,()=>!1)}var FA=DA,zA=OA,UA=VA;const as=m.forwardRef(({className:t,...e},n)=>a.jsx(FA,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));as.displayName=FA.displayName;const ls=m.forwardRef(({className:t,...e},n)=>a.jsx(zA,{ref:n,className:$("aspect-square h-full w-full",t),...e}));ls.displayName=zA.displayName;const cs=m.forwardRef(({className:t,...e},n)=>a.jsx(UA,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));cs.displayName=UA.displayName;const A7=[{path:"/dashboard",label:"Dashboard",icon:XN},{path:"/pipeline",label:"Pipeline",icon:eC},{path:"/leaderboard",label:"Leaderboard",icon:rx},{path:"/timeline",label:"Timeline",icon:$i},{path:"/attendance",label:"Attendance",icon:lC},{path:"/notes",label:"Notes",icon:xo}];function j7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Lf(),r=Im(),{user:s,signOut:i}=it(),{theme:o,toggleTheme:l}=d0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(Io,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(as,{className:"h-8 w-8",children:[a.jsx(ls,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),A7.map(p=>{const y=n===p.path,w=p.icon;return a.jsxs(Xr,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(w,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx(Bf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(Xr,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(iC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(AA,{children:[a.jsx(jA,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Wc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(k0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(I0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const lf=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));lf.displayName="Input";function R7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=xn(),[r]=Lf(),[s,i]=m.useState(""),o=Im(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(fe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(rC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(q5,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(lf,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(fe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:$(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(Ga,{className:"w-5 h-5"})})})]})}var $A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uS=Ee.createContext&&Ee.createContext($A),P7=["attr","size","title"];function D7(t,e){if(t==null)return{};var n=M7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function M7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(this,arguments)}function dS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dS(Object(n),!0).forEach(function(r){O7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O7(t,e,n){return e=L7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L7(t){var e=V7(t,"string");return typeof e=="symbol"?e:e+""}function V7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BA(t){return t&&t.map((e,n)=>Ee.createElement(e.tag,uf({key:n},e.attr),BA(e.child)))}function R0(t){return e=>Ee.createElement(F7,cf({attr:uf({},t.attr)},e),BA(t.child))}function F7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=D7(t,P7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ee.createElement("svg",cf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:uf(uf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ee.createElement("title",null,i),t.children)};return uS!==void 0?Ee.createElement(uS.Consumer,null,n=>e(n)):e($A)}function WA(t){return R0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function z7(t){return R0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const U7=[{icon:z7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:$5,title:"Kanban Board",description:"Visual assignment tracking."},{icon:k5,title:"Linear Timeline",description:"Chronological deadline view."},{icon:I5,title:"Performance Metrics",description:"Grade & workload analytics."}];function $7(){const{signInWithGoogle:t,loading:e,error:n}=it();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:U7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(Vn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(fe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(WA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(Vn,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(G5,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function B7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Am=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function P0(t){return"nodeType"in t}function dn(t){var e,n;return t?bl(t)?t:P0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function D0(t){const{Document:e}=dn(t);return t instanceof e}function ju(t){return bl(t)?!1:t instanceof dn(t).HTMLElement}function HA(t){return t instanceof dn(t).SVGElement}function _l(t){return t?bl(t)?t.document:P0(t)?D0(t)?t:ju(t)||HA(t)?t.ownerDocument:document:document:document}const Nr=Am?m.useLayoutEffect:m.useEffect;function jm(t){const e=m.useRef(t);return Nr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function W7(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function tu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return Nr(()=>{n.current!==t&&(n.current=t)},e),n}function Ru(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function df(t){const e=jm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function hf(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let Zp={};function Pu(t,e){return m.useMemo(()=>{if(e)return e;const n=Zp[t]==null?0:Zp[t]+1;return Zp[t]=n,t+"-"+n},[t,e])}function qA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Ca=qA(1),ff=qA(-1);function H7(t){return"clientX"in t&&"clientY"in t}function Rm(t){if(!t)return!1;const{KeyboardEvent:e}=dn(t.target);return e&&t instanceof e}function q7(t){if(!t)return!1;const{TouchEvent:e}=dn(t.target);return e&&t instanceof e}function mf(t){if(q7(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return H7(t)?{x:t.clientX,y:t.clientY}:null}const Li=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Li.Translate.toString(t),Li.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),hS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function G7(t){return t.matches(hS)?t:t.querySelector(hS)}const K7={display:"none"};function Q7(t){let{id:e,value:n}=t;return Ee.createElement("div",{id:e,style:K7},n)}function X7(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ee.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Y7(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const GA=m.createContext(null);function J7(t){const e=m.useContext(GA);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Z7(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const e$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},t$={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function n$(t){let{announcements:e=t$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=e$}=t;const{announce:i,announcement:o}=Y7(),l=Pu("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),J7(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:y}=f;e.onDragMove&&i(e.onDragMove({active:p,over:y}))},onDragOver(f){let{active:p,over:y}=f;i(e.onDragOver({active:p,over:y}))},onDragEnd(f){let{active:p,over:y}=f;i(e.onDragEnd({active:p,over:y}))},onDragCancel(f){let{active:p,over:y}=f;i(e.onDragCancel({active:p,over:y}))}}),[i,e])),!c)return null;const h=Ee.createElement(Ee.Fragment,null,Ee.createElement(Q7,{id:r,value:s.draggable}),Ee.createElement(X7,{id:l,announcement:o}));return n?Qn.createPortal(h,n):h}var Nt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Nt||(Nt={}));function pf(){}function fS(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function r$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Cr=Object.freeze({x:0,y:0});function s$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function i$(t,e){const n=mf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function o$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function a$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function l$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function mS(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const c$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=mS(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=s$(mS(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(o$)};function u$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const d$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=u$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(a$)};function h$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function KA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Cr}function f$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const m$=f$(1);function QA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function p$(t,e,n){const r=QA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const g$={ignoreTransform:!1};function Sl(t,e){e===void 0&&(e=g$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=dn(t).getComputedStyle(t);u&&(n=p$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function pS(t){return Sl(t,{ignoreTransform:!0})}function y$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function v$(t,e){return e===void 0&&(e=dn(t).getComputedStyle(t)),e.position==="fixed"}function x$(t,e){e===void 0&&(e=dn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function M0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(D0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ju(s)||HA(s)||n.includes(s))return n;const i=dn(t).getComputedStyle(s);return s!==t&&x$(s,i)&&n.push(s),v$(s,i)?n:r(s.parentNode)}return t?r(t):n}function XA(t){const[e]=M0(t,1);return e??null}function eg(t){return!Am||!t?null:bl(t)?t:P0(t)?D0(t)||t===_l(t).scrollingElement?window:ju(t)?t:null:null}function YA(t){return bl(t)?t.scrollX:t.scrollLeft}function JA(t){return bl(t)?t.scrollY:t.scrollTop}function zy(t){return{x:YA(t),y:JA(t)}}var Pt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Pt||(Pt={}));function ZA(t){return!Am||!t?!1:t===document.scrollingElement}function ej(t){const e={x:0,y:0},n=ZA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const w$={x:.2,y:.2};function b$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=w$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=ej(t),y={x:0,y:0},w={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(y.y=Pt.Backward,w.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&c>=e.bottom-v.height&&(y.y=Pt.Forward,w.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!p&&l>=e.right-v.width?(y.x=Pt.Forward,w.x=r*Math.abs((e.right-v.width-l)/v.width)):!f&&o<=e.left+v.width&&(y.x=Pt.Backward,w.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:y,speed:w}}function _$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function tj(t){return t.reduce((e,n)=>Ca(e,zy(n)),Cr)}function S$(t){return t.reduce((e,n)=>e+YA(n),0)}function E$(t){return t.reduce((e,n)=>e+JA(n),0)}function nj(t,e){if(e===void 0&&(e=Sl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);XA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const T$=[["x",["left","right"],S$],["y",["top","bottom"],E$]];class O0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=M0(n),s=tj(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of T$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function N$(t){const{EventTarget:e}=dn(t);return t instanceof e?t:_l(t)}function tg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Bn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bn||(Bn={}));function gS(t){t.preventDefault()}function C$(t){t.stopPropagation()}var Me;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Me||(Me={}));const rj={start:[Me.Space,Me.Enter],cancel:[Me.Esc],end:[Me.Space,Me.Enter,Me.Tab]},k$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Me.Right:return{...n,x:n.x+25};case Me.Left:return{...n,x:n.x-25};case Me.Down:return{...n,y:n.y+25};case Me.Up:return{...n,y:n.y-25}}};class L0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new bc(_l(n)),this.windowListeners=new bc(dn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&nj(r),n(Cr)}handleKeyDown(e){if(Rm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=rj,coordinateGetter:o=k$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Cr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=ff(f,h),y={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=e.code,{isTop:b,isRight:x,isLeft:S,isBottom:I,maxScroll:D,minScroll:M}=ej(v),T=_$(v),N={x:Math.min(_===Me.Right?T.right-T.width/2:T.right,Math.max(_===Me.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(_===Me.Down?T.bottom-T.height/2:T.bottom,Math.max(_===Me.Down?T.top:T.top+T.height/2,f.y))},C=_===Me.Right&&!x||_===Me.Left&&!S,k=_===Me.Down&&!I||_===Me.Up&&!b;if(C&&N.x!==f.x){const A=v.scrollLeft+p.x,P=_===Me.Right&&A<=D.x||_===Me.Left&&A>=M.x;if(P&&!p.y){v.scrollTo({left:A,behavior:l});return}P?y.x=v.scrollLeft-A:y.x=_===Me.Right?v.scrollLeft-D.x:v.scrollLeft-M.x,y.x&&v.scrollBy({left:-y.x,behavior:l});break}else if(k&&N.y!==f.y){const A=v.scrollTop+p.y,P=_===Me.Down&&A<=D.y||_===Me.Up&&A>=M.y;if(P&&!p.x){v.scrollTo({top:A,behavior:l});return}P?y.y=v.scrollTop-A:y.y=_===Me.Down?v.scrollTop-D.y:v.scrollTop-M.y,y.y&&v.scrollBy({top:-y.y,behavior:l});break}}this.handleMove(e,Ca(ff(f,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=rj,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function yS(t){return!!(t&&"distance"in t)}function vS(t){return!!(t&&"delay"in t)}class V0{constructor(e,n,r){var s;r===void 0&&(r=N$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=_l(o),this.documentListeners=new bc(this.document),this.listeners=new bc(r),this.windowListeners=new bc(dn(o)),this.initialCoordinates=(s=mf(i))!=null?s:Cr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.DragStart,gS),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),this.windowListeners.add(Bn.ContextMenu,gS),this.documentListeners.add(Bn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vS(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(yS(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bn.Click,C$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=mf(e))!=null?n:Cr,u=ff(s,c);if(!r&&l){if(yS(l)){if(l.tolerance!=null&&tg(u,l.tolerance))return this.handleCancel();if(tg(u,l.distance))return this.handleStart()}if(vS(l)&&tg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Me.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const I$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class F0 extends V0{constructor(e){const{event:n}=e,r=_l(n.target);super(e,I$,r)}}F0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const A$={move:{name:"mousemove"},end:{name:"mouseup"}};var Uy;(function(t){t[t.RightClick=2]="RightClick"})(Uy||(Uy={}));class j$ extends V0{constructor(e){super(e,A$,_l(e.event.target))}}j$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Uy.RightClick?!1:(r==null||r({event:n}),!0)}}];const ng={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class R$ extends V0{constructor(e){super(e,ng)}static setup(){return window.addEventListener(ng.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ng.move.name,e)};function e(){}}}R$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var _c;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(_c||(_c={}));var gf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(gf||(gf={}));function P$(t){let{acceleration:e,activator:n=_c.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=gf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const y=M$({delta:f,disabled:!i}),[w,v]=W7(),_=m.useRef({x:0,y:0}),b=m.useRef({x:0,y:0}),x=m.useMemo(()=>{switch(n){case _c.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case _c.DraggableRect:return s}},[n,s,c]),S=m.useRef(null),I=m.useCallback(()=>{const M=S.current;if(!M)return;const T=_.current.x*b.current.x,N=_.current.y*b.current.y;M.scrollBy(T,N)},[]),D=m.useMemo(()=>l===gf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!x){v();return}for(const M of D){if((r==null?void 0:r(M))===!1)continue;const T=u.indexOf(M),N=h[T];if(!N)continue;const{direction:C,speed:k}=b$(M,N,x,e,p);for(const A of["x","y"])y[A][C[A]]||(k[A]=0,C[A]=0);if(k.x>0||k.y>0){v(),S.current=M,w(I,o),_.current=k,b.current=C;return}}_.current={x:0,y:0},b.current={x:0,y:0},v()},[e,I,r,v,i,o,JSON.stringify(x),JSON.stringify(y),w,u,D,h,JSON.stringify(p)])}const D$={x:{[Pt.Backward]:!1,[Pt.Forward]:!1},y:{[Pt.Backward]:!1,[Pt.Forward]:!1}};function M$(t){let{delta:e,disabled:n}=t;const r=hf(e);return Ru(s=>{if(n||!r||!s)return D$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Pt.Backward]:s.x[Pt.Backward]||i.x===-1,[Pt.Forward]:s.x[Pt.Forward]||i.x===1},y:{[Pt.Backward]:s.y[Pt.Backward]||i.y===-1,[Pt.Forward]:s.y[Pt.Forward]||i.y===1}}},[n,e,r])}function O$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Ru(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function L$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var nu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(nu||(nu={}));var $y;(function(t){t.Optimized="optimized"})($y||($y={}));const xS=new Map;function V$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=_(),p=tu(f),y=m.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(S=>!x.includes(S))))},[p]),w=m.useRef(null),v=Ru(b=>{if(f&&!n)return xS;if(!b||b===xS||h.current!==t||i!=null){const x=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const I=S.node.current,D=I?new O0(c(I),I):null;S.rect.current=D,D&&x.set(S.id,D)}return x}return b},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||y()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{y(),w.current=null},l))},[l,f,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:i!=null};function _(){switch(u){case nu.Always:return!1;case nu.BeforeDragging:return n;default:return!n}}}function z0(t,e){return Ru(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function F$(t,e){return z0(t,e)}function z$(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pm(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function U$(t){return new O0(Sl(t),t)}function wS(t,e,n){e===void 0&&(e=U$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=z$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Pm({callback:i});return Nr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function $$(t){const e=z0(t);return KA(t,e)}const bS=[];function B$(t){const e=m.useRef(t),n=Ru(r=>t?r&&r!==bS&&t&&e.current&&t.parentNode===e.current.parentNode?r:M0(t):bS,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function W$(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=eg(i.target);o&&n(l=>l?(l.set(o,zy(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=eg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,zy(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=eg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ca(i,o),Cr):tj(t):Cr,[t,e])}function _S(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Cr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?ff(t,n.current):Cr}function H$(t){m.useEffect(()=>{if(!Am)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function q$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function sj(t){return m.useMemo(()=>t?y$(t):null,[t])}const SS=[];function G$(t,e){e===void 0&&(e=Sl);const[n]=t,r=sj(n?dn(n):null),[s,i]=m.useState(SS);function o(){i(()=>t.length?t.map(c=>ZA(c)?r:new O0(e(c),c)):SS)}const l=Pm({callback:o});return Nr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function ij(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ju(e)?e:t}function K$(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(ju(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Pm({callback:s}),o=m.useCallback(u=>{const h=ij(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=df(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const Q$=[{sensor:F0,options:{}},{sensor:L0,options:{}}],X$={current:{}},ah={draggable:{measure:pS},droppable:{measure:pS,strategy:nu.WhileDragging,frequency:$y.Optimized},dragOverlay:{measure:Sl}};class Sc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Y$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Sc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ah,measureDroppableContainers:pf,windowRect:null,measuringScheduled:!1},oj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pf,draggableNodes:new Map,over:null,measureDroppableContainers:pf},Du=m.createContext(oj),aj=m.createContext(Y$);function J$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Sc}}}function Z$(t,e){switch(e.type){case Nt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Nt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Nt.DragEnd:case Nt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Sc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Nt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Sc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Nt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Sc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function eB(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Du),i=hf(r),o=hf(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Rm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=G7(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function lj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function tB(t){return m.useMemo(()=>({draggable:{...ah.draggable,...t==null?void 0:t.draggable},droppable:{...ah.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ah.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function nB(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Nr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=KA(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=XA(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Dm=m.createContext({...Cr,scaleX:1,scaleY:1});var Ks;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ks||(Ks={}));const rB=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=Q$,collisionDetection:f=d$,measuring:p,modifiers:y,...w}=e;const v=m.useReducer(Z$,void 0,J$),[_,b]=v,[x,S]=Z7(),[I,D]=m.useState(Ks.Uninitialized),M=I===Ks.Initialized,{draggable:{active:T,nodes:N,translate:C},droppable:{containers:k}}=_,A=T!=null?N.get(T):null,P=m.useRef({initial:null,translated:null}),R=m.useMemo(()=>{var De;return T!=null?{id:T,data:(De=A==null?void 0:A.data)!=null?De:X$,rect:P}:null},[T,A]),F=m.useRef(null),[se,J]=m.useState(null),[X,O]=m.useState(null),B=tu(w,Object.values(w)),U=Pu("DndDescribedBy",o),W=m.useMemo(()=>k.getEnabled(),[k]),q=tB(p),{droppableRects:ie,measureDroppableContainers:ee,measuringScheduled:ne}=V$(W,{dragging:M,dependencies:[C.x,C.y],config:q.droppable}),oe=O$(N,T),V=m.useMemo(()=>X?mf(X):null,[X]),Y=Uu(),de=F$(oe,q.draggable.measure);nB({activeNode:T!=null?N.get(T):null,config:Y.layoutShiftCompensation,initialRect:de,measure:q.draggable.measure});const Q=wS(oe,q.draggable.measure,de),te=wS(oe?oe.parentElement:null),ae=m.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=k.getNodeFor((n=ae.current.over)==null?void 0:n.id),Re=K$({measure:q.dragOverlay.measure}),mt=(r=Re.nodeRef.current)!=null?r:oe,We=M?(s=Re.rect)!=null?s:Q:null,Je=!!(Re.nodeRef.current&&Re.rect),Tn=$$(Je?null:Q),He=sj(mt?dn(mt):null),Ge=B$(M?Te??oe:null),er=G$(Ge),Ps=lj(y,{transform:{x:C.x-Tn.x,y:C.y-Tn.y,scaleX:1,scaleY:1},activatorEvent:X,active:R,activeNodeRect:Q,containerNodeRect:te,draggingNodeRect:We,over:ae.current.over,overlayNodeRect:Re.rect,scrollableAncestors:Ge,scrollableAncestorRects:er,windowRect:He}),Nl=V?Ca(V,C):null,Ou=W$(Ge),Gi=_S(Ou),Lu=_S(Ou,[Q]),ts=Ca(Ps,Gi),jr=We?m$(We,Ps):null,Ki=R&&jr?f({active:R,collisionRect:jr,droppableRects:ie,droppableContainers:W,pointerCoordinates:Nl}):null,Vu=l$(Ki,"id"),[tr,Cl]=m.useState(null),Qi=Je?Ps:Ca(Ps,Lu),kl=h$(Qi,(i=tr==null?void 0:tr.rect)!=null?i:null,Q),Xi=m.useRef(null),Rr=m.useCallback((De,Bt)=>{let{sensor:bt,options:hn}=Bt;if(F.current==null)return;const fn=N.get(F.current);if(!fn)return;const nn=De.nativeEvent,Vt=new bt({active:F.current,activeNode:fn,event:nn,options:hn,context:ae,onAbort(_t){if(!N.get(_t))return;const{onDragAbort:Cn}=B.current,Un={id:_t};Cn==null||Cn(Un),x({type:"onDragAbort",event:Un})},onPending(_t,Nn,Cn,Un){if(!N.get(_t))return;const{onDragPending:nr}=B.current,Pr={id:_t,constraint:Nn,initialCoordinates:Cn,offset:Un};nr==null||nr(Pr),x({type:"onDragPending",event:Pr})},onStart(_t){const Nn=F.current;if(Nn==null)return;const Cn=N.get(Nn);if(!Cn)return;const{onDragStart:Un}=B.current,ns={activatorEvent:nn,active:{id:Nn,data:Cn.data,rect:P}};Qn.unstable_batchedUpdates(()=>{Un==null||Un(ns),D(Ks.Initializing),b({type:Nt.DragStart,initialCoordinates:_t,active:Nn}),x({type:"onDragStart",event:ns}),J(Xi.current),O(nn)})},onMove(_t){b({type:Nt.DragMove,coordinates:_t})},onEnd:Ds(Nt.DragEnd),onCancel:Ds(Nt.DragCancel)});Xi.current=Vt;function Ds(_t){return async function(){const{active:Cn,collisions:Un,over:ns,scrollAdjustedTranslate:nr}=ae.current;let Pr=null;if(Cn&&nr){const{cancelDrop:mn}=B.current;Pr={activatorEvent:nn,active:Cn,collisions:Un,delta:nr,over:ns},_t===Nt.DragEnd&&typeof mn=="function"&&await Promise.resolve(mn(Pr))&&(_t=Nt.DragCancel)}F.current=null,Qn.unstable_batchedUpdates(()=>{b({type:_t}),D(Ks.Uninitialized),Cl(null),J(null),O(null),Xi.current=null;const mn=_t===Nt.DragEnd?"onDragEnd":"onDragCancel";if(Pr){const Bo=B.current[mn];Bo==null||Bo(Pr),x({type:mn,event:Pr})}})}}},[N]),Fu=m.useCallback((De,Bt)=>(bt,hn)=>{const fn=bt.nativeEvent,nn=N.get(hn);if(F.current!==null||!nn||fn.dndKit||fn.defaultPrevented)return;const Vt={active:nn};De(bt,Bt.options,Vt)===!0&&(fn.dndKit={capturedBy:Bt.sensor},F.current=hn,Rr(bt,Bt))},[N,Rr]),Yi=L$(h,Fu);H$(h),Nr(()=>{Q&&I===Ks.Initializing&&D(Ks.Initialized)},[Q,I]),m.useEffect(()=>{const{onDragMove:De}=B.current,{active:Bt,activatorEvent:bt,collisions:hn,over:fn}=ae.current;if(!Bt||!bt)return;const nn={active:Bt,activatorEvent:bt,collisions:hn,delta:{x:ts.x,y:ts.y},over:fn};Qn.unstable_batchedUpdates(()=>{De==null||De(nn),x({type:"onDragMove",event:nn})})},[ts.x,ts.y]),m.useEffect(()=>{const{active:De,activatorEvent:Bt,collisions:bt,droppableContainers:hn,scrollAdjustedTranslate:fn}=ae.current;if(!De||F.current==null||!Bt||!fn)return;const{onDragOver:nn}=B.current,Vt=hn.get(Vu),Ds=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,_t={active:De,activatorEvent:Bt,collisions:bt,delta:{x:fn.x,y:fn.y},over:Ds};Qn.unstable_batchedUpdates(()=>{Cl(Ds),nn==null||nn(_t),x({type:"onDragOver",event:_t})})},[Vu]),Nr(()=>{ae.current={activatorEvent:X,active:R,activeNode:oe,collisionRect:jr,collisions:Ki,droppableRects:ie,draggableNodes:N,draggingNode:mt,draggingNodeRect:We,droppableContainers:k,over:tr,scrollableAncestors:Ge,scrollAdjustedTranslate:ts},P.current={initial:We,translated:jr}},[R,oe,Ki,jr,N,mt,We,ie,k,tr,Ge,ts]),P$({...Y,delta:C,draggingRect:jr,pointerCoordinates:Nl,scrollableAncestors:Ge,scrollableAncestorRects:er});const zu=m.useMemo(()=>({active:R,activeNode:oe,activeNodeRect:Q,activatorEvent:X,collisions:Ki,containerNodeRect:te,dragOverlay:Re,draggableNodes:N,droppableContainers:k,droppableRects:ie,over:tr,measureDroppableContainers:ee,scrollableAncestors:Ge,scrollableAncestorRects:er,measuringConfiguration:q,measuringScheduled:ne,windowRect:He}),[R,oe,Q,X,Ki,te,Re,N,k,ie,tr,ee,Ge,er,q,ne,He]),Ji=m.useMemo(()=>({activatorEvent:X,activators:Yi,active:R,activeNodeRect:Q,ariaDescribedById:{draggable:U},dispatch:b,draggableNodes:N,over:tr,measureDroppableContainers:ee}),[X,Yi,R,Q,b,U,N,tr,ee]);return Ee.createElement(GA.Provider,{value:S},Ee.createElement(Du.Provider,{value:Ji},Ee.createElement(aj.Provider,{value:zu},Ee.createElement(Dm.Provider,{value:kl},u)),Ee.createElement(eB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ee.createElement(n$,{...l,hiddenTextDescribedById:U}));function Uu(){const De=(se==null?void 0:se.autoScrollEnabled)===!1,Bt=typeof c=="object"?c.enabled===!1:c===!1,bt=M&&!De&&!Bt;return typeof c=="object"?{...c,enabled:bt}:{enabled:bt}}}),sB=m.createContext(null),ES="button",iB="Draggable";function oB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Pu(iB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Du),{role:y=ES,roleDescription:w="draggable",tabIndex:v=0}=s??{},_=(c==null?void 0:c.id)===e,b=m.useContext(_?Dm:sB),[x,S]=df(),[I,D]=df(),M=q$(o,e),T=tu(n);Nr(()=>(f.set(e,{id:e,key:i,node:x,activatorNode:I,data:T}),()=>{const C=f.get(e);C&&C.key===i&&f.delete(e)}),[f,e]);const N=m.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&y===ES?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,y,v,_,w,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:N,isDragging:_,listeners:r?void 0:M,node:x,over:p,setNodeRef:S,setActivatorNodeRef:D,transform:b}}function cj(){return m.useContext(aj)}const aB="Droppable",lB={timeout:25};function uj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Pu(aB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Du),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),y=m.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...lB,...s},b=tu(v??r),x=m.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),y.current=null},_)},[_]),S=Pm({callback:x,disabled:w||!o}),I=m.useCallback((N,C)=>{S&&(C&&(S.unobserve(C),f.current=!1),N&&S.observe(N))},[S]),[D,M]=df(I),T=tu(e);return m.useEffect(()=>{!S||!D.current||(S.disconnect(),f.current=!1,S.observe(D.current))},[D,S]),m.useEffect(()=>(l({type:Nt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:p,data:T}}),()=>l({type:Nt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:Nt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:M}}function cB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=hf(n);return!n&&!r&&l&&s(l),Nr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ee.createElement(Ee.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const uB={x:0,y:0,scaleX:1,scaleY:1};function dB(t){let{children:e}=t;return Ee.createElement(Du.Provider,{value:oj},Ee.createElement(Dm.Provider,{value:uB},e))}const hB={position:"fixed",touchAction:"none"},fB=t=>Rm(t)?"transform 250ms ease":void 0,mB=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=fB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...hB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Li.Transform.toString(f),transformOrigin:s&&r?i$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ee.createElement(n,{className:o,style:p,ref:e},i)}),pB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},gB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Li.Transform.toString(e)},{transform:Li.Transform.toString(n)}]},yB={duration:250,easing:"ease",keyframes:gB,sideEffects:pB({styles:{active:{opacity:"0"}}})};function vB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return jm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=ij(o);if(!u)return;const{transform:h}=dn(o).getComputedStyle(o),f=QA(h);if(!f)return;const p=typeof e=="function"?e:xB(e);return nj(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function xB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...yB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},y=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[w]=y,v=y[y.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const _=r==null?void 0:r({active:o,dragOverlay:l,...u}),b=l.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{_==null||_(),x()}})}}let TS=0;function wB(t){return m.useMemo(()=>{if(t!=null)return TS++,TS},[t])}const bB=Ee.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:y,draggableNodes:w,droppableContainers:v,dragOverlay:_,over:b,measuringConfiguration:x,scrollableAncestors:S,scrollableAncestorRects:I,windowRect:D}=cj(),M=m.useContext(Dm),T=wB(f==null?void 0:f.id),N=lj(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:y,draggingNodeRect:_.rect,over:b,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:I,transform:M,windowRect:D}),C=z0(p),k=vB({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:x}),A=C?_.setRef:void 0;return Ee.createElement(dB,null,Ee.createElement(cB,{animation:k},f&&T?Ee.createElement(mB,{key:T,id:f.id,ref:A,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:C,style:{zIndex:u,...s},transform:N},n):null))});function dj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function _B(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function jd(t){return t!==null&&t>=0}function SB(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function EB(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const hj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=dj(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Rd={scaleX:1,scaleY:1},TB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Rd}:null}const c=NB(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Rd}:s<n&&s>=o?{x:0,y:l.height+c,...Rd}:{x:0,y:0,...Rd}};function NB(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fj="Sortable",mj=Ee.createContext({activeIndex:-1,containerId:fj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hj,disabled:{draggable:!1,droppable:!1}});function CB(t){let{children:e,id:n,items:r,strategy:s=hj,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=cj(),f=Pu(fj,n),p=l.rect!==null,y=m.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),w=o!=null,v=o?y.indexOf(o.id):-1,_=u?y.indexOf(u.id):-1,b=m.useRef(y),x=!SB(y,b.current),S=_!==-1&&v===-1||x,I=EB(i);Nr(()=>{x&&w&&h(y)},[x,y,w,h]),m.useEffect(()=>{b.current=y},[y]);const D=m.useMemo(()=>({activeIndex:v,containerId:f,disabled:I,disableTransforms:S,items:y,overIndex:_,useDragOverlay:p,sortedRects:_B(y,c),strategy:s}),[v,f,I.draggable,I.droppable,S,y,_,c,p,s]);return Ee.createElement(mj.Provider,{value:D},e)}const kB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return dj(n,r,s).indexOf(e)},IB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},AB={duration:200,easing:"ease"},pj="transform",jB=Li.Transition.toString({property:pj,duration:0,easing:"linear"}),RB={roleDescription:"sortable"};function PB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return Nr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=Sl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function DB(t){let{animateLayoutChanges:e=IB,attributes:n,disabled:r,data:s,getNewIndex:i=kB,id:o,strategy:l,resizeObserverConfig:c,transition:u=AB}=t;const{items:h,containerId:f,activeIndex:p,disabled:y,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:b,strategy:x}=m.useContext(mj),S=MB(r,y),I=h.indexOf(o),D=m.useMemo(()=>({sortable:{containerId:f,index:I,items:h},...s}),[f,s,I,h]),M=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:T,node:N,isOver:C,setNodeRef:k}=uj({id:o,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:A,activatorEvent:P,activeNodeRect:R,attributes:F,setNodeRef:se,listeners:J,isDragging:X,over:O,setActivatorNodeRef:B,transform:U}=oB({id:o,data:D,attributes:{...RB,...n},disabled:S.draggable}),W=B7(k,se),q=!!A,ie=q&&!w&&jd(p)&&jd(_),ee=!b&&X,ne=ee&&ie?U:null,V=ie?ne??(l??x)({rects:v,activeNodeRect:R,activeIndex:p,overIndex:_,index:I}):null,Y=jd(p)&&jd(_)?i({id:o,items:h,activeIndex:p,overIndex:_}):I,de=A==null?void 0:A.id,Q=m.useRef({activeId:de,items:h,newIndex:Y,containerId:f}),te=h!==Q.current.items,ae=e({active:A,containerId:f,isDragging:X,isSorting:q,id:o,index:I,items:h,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:u,wasDragging:Q.current.activeId!=null}),Te=PB({disabled:!ae,index:I,node:N,rect:T});return m.useEffect(()=>{q&&Q.current.newIndex!==Y&&(Q.current.newIndex=Y),f!==Q.current.containerId&&(Q.current.containerId=f),h!==Q.current.items&&(Q.current.items=h)},[q,Y,f,h]),m.useEffect(()=>{if(de===Q.current.activeId)return;if(de!=null&&Q.current.activeId==null){Q.current.activeId=de;return}const mt=setTimeout(()=>{Q.current.activeId=de},50);return()=>clearTimeout(mt)},[de]),{active:A,activeIndex:p,attributes:F,data:D,rect:T,index:I,newIndex:Y,items:h,isOver:C,isSorting:q,isDragging:X,listeners:J,node:N,overIndex:_,over:O,setNodeRef:W,setActivatorNodeRef:B,setDroppableNodeRef:k,setDraggableNodeRef:se,transform:Te??V,transition:Re()};function Re(){if(Te||te&&Q.current.newIndex===I)return jB;if(!(ee&&!Rm(P)||!u)&&(q||ae))return Li.Transition.toString({...u,property:pj})}}function MB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Me.Down,Me.Right,Me.Up,Me.Left;const OB=gu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ar({className:t,variant:e,...n}){return a.jsx("div",{className:$(OB({variant:e}),t),...n})}function Oe({className:t,...e}){return a.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const Ae=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Ae.displayName="Card";const Ke=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));Ke.displayName="CardHeader";const rt=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));rt.displayName="CardTitle";const gn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));gn.displayName="CardDescription";const ze=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));ze.displayName="CardContent";const U0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));U0.displayName="CardFooter";function gj(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function yj(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function vj({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=DB({id:t.id}),h={transform:Li.Transform.toString(l),transition:c},f=yj(t.dueDate),p=f!==null&&f<=1&&f>=0,y=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Ae,{ref:o,style:h,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",y&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Ar,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:w=>w.stopPropagation(),children:a.jsx(V5,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx($i,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:$(y&&"text-destructive",p&&!y&&"text-foreground font-medium"),children:gj(t.dueDate)}),y&&a.jsx(Vn,{className:"h-3.5 w-3.5 text-destructive"}),p&&!y&&a.jsx(ZN,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(qa,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(qa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(xo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function LB({assignment:t,onClick:e}){const n=yj(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:$("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:gj(t.dueDate)}),r&&a.jsx(Vn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const $0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));$0.displayName="Textarea";var VB="Separator",NS="horizontal",FB=["horizontal","vertical"],xj=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=NS,...s}=t,i=zB(r)?r:NS,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});xj.displayName=VB;function zB(t){return FB.includes(t)}var wj=xj;const fr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(wj,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));fr.displayName=wj.displayName;const UB=cA,$B=uA,bj=m.forwardRef(({className:t,...e},n)=>a.jsx(v0,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));bj.displayName=v0.displayName;const BB=gu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_j=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs($B,{children:[a.jsx(bj,{}),a.jsxs(x0,{ref:s,className:$(BB({side:t}),e),...r,children:[n,a.jsxs(_0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Io,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_j.displayName=x0.displayName;const Sj=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});Sj.displayName="SheetHeader";const Ej=m.forwardRef(({className:t,...e},n)=>a.jsx(w0,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));Ej.displayName=w0.displayName;const WB=m.forwardRef(({className:t,...e},n)=>a.jsx(b0,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));WB.displayName=b0.displayName;function HB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function qB(t){return t?` at ${t}`:""}function GB({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(qa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function KB({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(oy,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(oy,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(W5,{className:"h-3.5 w-3.5"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(Q5,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function B0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=xn(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",y=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(UB,{open:e,onOpenChange:n,children:a.jsxs(_j,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(Sj,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Ar,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(Ej,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx($i,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:$(p&&"text-destructive"),children:[HB(t.dueDate),qB(t.dueTime)]}),p&&a.jsx(Vn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(fr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(fr,{})]}),a.jsx(GB,{assignment:t}),a.jsx(fr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(H5,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx($0,{value:l,onChange:w=>c(w.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:y,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(w=>a.jsx(KB,{note:w,onUpdate:(v,_)=>i(w.id,v,_),onDelete:()=>o(w.id,t.id)},w.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(fr,{}),a.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function El(){const{refreshAccessToken:t,signOut:e}=it(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),a.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:a.jsx(Ga,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),a.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),a.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[a.jsx(fe,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ga,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{className:"font-medium",children:"Signing In..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(WA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),a.jsx(fe,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),a.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[a.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function QB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=uj({id:t});return a.jsxs("div",{ref:o,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Ar,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(CB,{items:n.map(l=>l.id),strategy:TB,children:n.length>0?n.map(l=>{var c;return a.jsx(vj,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function XB(){return a.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsx(Oe,{className:"h-5 w-24"}),a.jsx(Oe,{className:"h-5 w-8"})]}),a.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>a.jsx(Oe,{className:"h-32 w-full"},e))})]},t))})}function YB(){var N;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o,error:l}=xn();it();const[c,u]=m.useState(null),[h,f]=m.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return a.jsx(El,{});if(n)return a.jsx(XB,{});const p=m.useRef(null),[y,w]=m.useState(!1),v=m.useRef({x:0,left:0}),_=r$(fS(F0,{activationConstraint:{distance:8}}),fS(L0)),b=t(),x=h?i.find(C=>C.id===h):null,S=C=>{f(C.active.id)},I=C=>{const{active:k,over:A}=C;if(f(null),!A)return;const P=k.id,R=A.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const F=i.find(se=>se.id===P);F&&F.systemStatus!==R&&(R==="in_progress"?e(P,"in_progress"):e(P,"backlog"))}},D=C=>{C.button===2&&p.current&&(C.preventDefault(),w(!0),v.current={x:C.pageX,left:p.current.scrollLeft})},M=m.useCallback(C=>{if(!y||!p.current)return;C.preventDefault();const A=(C.pageX-v.current.x)*1.5;p.current.scrollLeft=v.current.left-A},[y]),T=m.useCallback(()=>{w(!1)},[]);return m.useEffect(()=>(y?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",T)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",T)}),[y,M,T]),a.jsxs(a.Fragment,{children:[l&&l.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:C=>{C.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs(rB,{sensors:_,collisionDetection:c$,onDragStart:S,onDragEnd:I,children:[a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsx("div",{ref:p,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",y?"cursor-grabbing":"cursor-grab"),onMouseDown:D,onContextMenu:C=>C.preventDefault(),children:b.map(C=>a.jsx(QB,{id:C.id,title:C.title,assignments:C.assignments,onCardClick:u,notes:s},C.id))}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),a.jsx(bB,{children:x&&a.jsx(vj,{assignment:x,isDragging:!0,hasNotes:(((N=s.get(x.id))==null?void 0:N.length)||0)>0})})]}),a.jsx(B0,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function CS(t,[e,n]){return Math.min(n,Math.max(e,t))}var JB=m.createContext(void 0);function W0(t){const e=m.useContext(JB);return t||e||"ltr"}function Tj(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ZB=[" ","Enter","ArrowUp","ArrowDown"],eW=[" ","Enter"],Mu="Select",[Mm,Om,tW]=Kv(Mu),[Tl,tq]=kr(Mu,[tW,Gf]),Lm=Gf(),[nW,Hi]=Tl(Mu),[rW,sW]=Tl(Mu),Nj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:y,form:w}=t,v=Lm(e),[_,b]=m.useState(null),[x,S]=m.useState(null),[I,D]=m.useState(!1),M=W0(u),[T=!1,N]=Ti({prop:r,defaultProp:s,onChange:i}),[C,k]=Ti({prop:o,defaultProp:l,onChange:c}),A=m.useRef(null),P=_?w||!!_.closest("form"):!0,[R,F]=m.useState(new Set),se=Array.from(R).map(J=>J.props.value).join(";");return a.jsx(zC,{...v,children:a.jsxs(nW,{required:y,scope:e,trigger:_,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:ps(),value:C,onValueChange:k,open:T,onOpenChange:N,dir:M,triggerPointerDownPosRef:A,disabled:p,children:[a.jsx(Mm.Provider,{scope:e,children:a.jsx(rW,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(J=>{F(X=>new Set(X).add(J))},[]),onNativeOptionRemove:m.useCallback(J=>{F(X=>{const O=new Set(X);return O.delete(J),O})},[]),children:n})}),P?a.jsxs(Yj,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:J=>k(J.target.value),disabled:p,form:w,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(R)]},se):null]})})};Nj.displayName=Mu;var Cj="SelectTrigger",kj=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Lm(n),o=Hi(Cj,n),l=o.disabled||r,c=$e(e,o.onTriggerChange),u=Om(n),h=m.useRef("touch"),[f,p,y]=Jj(v=>{const _=u().filter(S=>!S.disabled),b=_.find(S=>S.value===o.value),x=Zj(_,v,b);x!==void 0&&o.onValueChange(x.value)}),w=v=>{l||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(UC,{asChild:!0,...i,children:a.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Xj(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&w(v)}),onPointerDown:pe(s.onPointerDown,v=>{h.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:pe(s.onKeyDown,v=>{const _=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(_&&v.key===" ")&&ZB.includes(v.key)&&(w(),v.preventDefault())})})})});kj.displayName=Cj;var Ij="SelectValue",Aj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Hi(Ij,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=$e(e,c.onValueNodeChange);return It(()=>{u(h)},[u,h]),a.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:Xj(c.value)?a.jsx(a.Fragment,{children:o}):i})});Aj.displayName=Ij;var iW="SelectIcon",jj=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});jj.displayName=iW;var oW="SelectPortal",Rj=t=>a.jsx(mu,{asChild:!0,...t});Rj.displayName=oW;var Lo="SelectContent",Pj=m.forwardRef((t,e)=>{const n=Hi(Lo,t.__scopeSelect),[r,s]=m.useState();if(It(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Qn.createPortal(a.jsx(Dj,{scope:t.__scopeSelect,children:a.jsx(Mm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(Mj,{...t,ref:e})});Pj.displayName=Lo;var ir=10,[Dj,qi]=Tl(Lo),aW="SelectContentImpl",lW=Ha("SelectContent.RemoveScroll"),Mj=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:_,...b}=t,x=Hi(Lo,n),[S,I]=m.useState(null),[D,M]=m.useState(null),T=$e(e,V=>I(V)),[N,C]=m.useState(null),[k,A]=m.useState(null),P=Om(n),[R,F]=m.useState(!1),se=m.useRef(!1);m.useEffect(()=>{if(S)return H2(S)},[S]),O2();const J=m.useCallback(V=>{const[Y,...de]=P().map(ae=>ae.ref.current),[Q]=de.slice(-1),te=document.activeElement;for(const ae of V)if(ae===te||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===Y&&D&&(D.scrollTop=0),ae===Q&&D&&(D.scrollTop=D.scrollHeight),ae==null||ae.focus(),document.activeElement!==te))return},[P,D]),X=m.useCallback(()=>J([N,S]),[J,N,S]);m.useEffect(()=>{R&&X()},[R,X]);const{onOpenChange:O,triggerPointerDownPosRef:B}=x;m.useEffect(()=>{if(S){let V={x:0,y:0};const Y=Q=>{var te,ae;V={x:Math.abs(Math.round(Q.pageX)-(((te=B.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((ae=B.current)==null?void 0:ae.y)??0))}},de=Q=>{V.x<=10&&V.y<=10?Q.preventDefault():S.contains(Q.target)||O(!1),document.removeEventListener("pointermove",Y),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",de,{capture:!0})}}},[S,O,B]),m.useEffect(()=>{const V=()=>O(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[O]);const[U,W]=Jj(V=>{const Y=P().filter(te=>!te.disabled),de=Y.find(te=>te.ref.current===document.activeElement),Q=Zj(Y,V,de);Q&&setTimeout(()=>Q.ref.current.focus())}),q=m.useCallback((V,Y,de)=>{const Q=!se.current&&!de;(x.value!==void 0&&x.value===Y||Q)&&(C(V),Q&&(se.current=!0))},[x.value]),ie=m.useCallback(()=>S==null?void 0:S.focus(),[S]),ee=m.useCallback((V,Y,de)=>{const Q=!se.current&&!de;(x.value!==void 0&&x.value===Y||Q)&&A(V)},[x.value]),ne=r==="popper"?By:Oj,oe=ne===By?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return a.jsx(Dj,{scope:n,content:S,viewport:D,onViewportChange:M,itemRefCallback:q,selectedItem:N,onItemLeave:ie,itemTextRefCallback:ee,focusSelectedItem:X,selectedItemText:k,position:r,isPositioned:R,searchRef:U,children:a.jsx(f0,{as:lW,allowPinchZoom:!0,children:a.jsx(h0,{asChild:!0,trapped:x.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:pe(s,V=>{var Y;(Y=x.trigger)==null||Y.focus({preventScroll:!0}),V.preventDefault()}),children:a.jsx(fu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(ne,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:V=>V.preventDefault(),...b,...oe,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:pe(b.onKeyDown,V=>{const Y=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!Y&&V.key.length===1&&W(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let Q=P().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(V.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const te=V.target,ae=Q.indexOf(te);Q=Q.slice(ae+1)}setTimeout(()=>J(Q)),V.preventDefault()}})})})})})})});Mj.displayName=aW;var cW="SelectItemAlignedPosition",Oj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Hi(Lo,n),o=qi(Lo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=$e(e,T=>h(T)),p=Om(n),y=m.useRef(!1),w=m.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:b,focusSelectedItem:x}=o,S=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&_&&b){const T=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(i.dir!=="rtl"){const te=k.left-N.left,ae=C.left-te,Te=T.left-ae,Re=T.width+Te,mt=Math.max(Re,N.width),We=window.innerWidth-ir,Je=CS(ae,[ir,Math.max(ir,We-mt)]);l.style.minWidth=Re+"px",l.style.left=Je+"px"}else{const te=N.right-k.right,ae=window.innerWidth-C.right-te,Te=window.innerWidth-T.right-ae,Re=T.width+Te,mt=Math.max(Re,N.width),We=window.innerWidth-ir,Je=CS(ae,[ir,Math.max(ir,We-mt)]);l.style.minWidth=Re+"px",l.style.right=Je+"px"}const A=p(),P=window.innerHeight-ir*2,R=v.scrollHeight,F=window.getComputedStyle(u),se=parseInt(F.borderTopWidth,10),J=parseInt(F.paddingTop,10),X=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),B=se+J+R+O+X,U=Math.min(_.offsetHeight*5,B),W=window.getComputedStyle(v),q=parseInt(W.paddingTop,10),ie=parseInt(W.paddingBottom,10),ee=T.top+T.height/2-ir,ne=P-ee,oe=_.offsetHeight/2,V=_.offsetTop+oe,Y=se+J+V,de=B-Y;if(Y<=ee){const te=A.length>0&&_===A[A.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-v.offsetTop-v.offsetHeight,Te=Math.max(ne,oe+(te?ie:0)+ae+X),Re=Y+Te;l.style.height=Re+"px"}else{const te=A.length>0&&_===A[0].ref.current;l.style.top="0px";const Te=Math.max(ee,se+v.offsetTop+(te?q:0)+oe)+de;l.style.height=Te+"px",v.scrollTop=Y-ee+v.offsetTop}l.style.margin=`${ir}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,_,b,i.dir,r]);It(()=>S(),[S]);const[I,D]=m.useState();It(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const M=m.useCallback(T=>{T&&w.current===!0&&(S(),x==null||x(),w.current=!1)},[S,x]);return a.jsx(dW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:M,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:a.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Oj.displayName=cW;var uW="SelectPopperPosition",By=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ir,...i}=t,o=Lm(n);return a.jsx($C,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});By.displayName=uW;var[dW,H0]=Tl(Lo,{}),Wy="SelectViewport",Lj=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=qi(Wy,n),o=H0(Wy,n),l=$e(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Mm.Slot,{scope:n,children:a.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const w=window.innerHeight-ir*2,v=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),b=Math.max(v,_);if(b<w){const x=b+y,S=Math.min(w,x),I=x-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Lj.displayName=Wy;var Vj="SelectGroup",[hW,fW]=Tl(Vj),mW=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ps();return a.jsx(hW,{scope:n,id:s,children:a.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});mW.displayName=Vj;var Fj="SelectLabel",zj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=fW(Fj,n);return a.jsx(xe.div,{id:s.id,...r,ref:e})});zj.displayName=Fj;var yf="SelectItem",[pW,Uj]=Tl(yf),$j=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Hi(yf,n),c=qi(yf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,y]=m.useState(!1),w=$e(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),v=ps(),_=m.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(pW,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:m.useCallback(x=>{f(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(Mm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:pe(o.onFocus,()=>y(!0)),onBlur:pe(o.onBlur,()=>y(!1)),onClick:pe(o.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:pe(o.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:pe(o.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:pe(o.onPointerMove,x=>{var S;_.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:pe(o.onKeyDown,x=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&x.key===" "||(eW.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});$j.displayName=yf;var nc="SelectItemText",Bj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Hi(nc,n),l=qi(nc,n),c=Uj(nc,n),u=sW(nc,n),[h,f]=m.useState(null),p=$e(e,b=>f(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),y=h==null?void 0:h.textContent,w=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=u;return It(()=>(v(w),()=>_(w)),[v,_,w]),a.jsxs(a.Fragment,{children:[a.jsx(xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qn.createPortal(i.children,o.valueNode):null]})});Bj.displayName=nc;var Wj="SelectItemIndicator",Hj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Uj(Wj,n).isSelected?a.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});Hj.displayName=Wj;var Hy="SelectScrollUpButton",qj=m.forwardRef((t,e)=>{const n=qi(Hy,t.__scopeSelect),r=H0(Hy,t.__scopeSelect),[s,i]=m.useState(!1),o=$e(e,r.onScrollButtonChange);return It(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Kj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});qj.displayName=Hy;var qy="SelectScrollDownButton",Gj=m.forwardRef((t,e)=>{const n=qi(qy,t.__scopeSelect),r=H0(qy,t.__scopeSelect),[s,i]=m.useState(!1),o=$e(e,r.onScrollButtonChange);return It(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Kj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Gj.displayName=qy;var Kj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=qi("SelectScrollButton",n),o=m.useRef(null),l=Om(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),It(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),gW="SelectSeparator",Qj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});Qj.displayName=gW;var Gy="SelectArrow",yW=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lm(n),i=Hi(Gy,n),o=qi(Gy,n);return i.open&&o.position==="popper"?a.jsx(BC,{...s,...r,ref:e}):null});yW.displayName=Gy;function Xj(t){return t===""||t===void 0}var Yj=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=$e(e,s),o=Tj(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(pu,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});Yj.displayName="BubbleSelect";function Jj(t){const e=ln(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Zj(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=vW(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function vW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var xW=Nj,eR=kj,wW=Aj,bW=jj,_W=Rj,tR=Pj,SW=Lj,nR=zj,rR=$j,EW=Bj,TW=Hj,sR=qj,iR=Gj,oR=Qj;const vf=xW,xf=wW,ru=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(eR,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(bW,{asChild:!0,children:a.jsx(YN,{className:"h-4 w-4 opacity-50"})})]}));ru.displayName=eR.displayName;const aR=m.forwardRef(({className:t,...e},n)=>a.jsx(sR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(P5,{className:"h-4 w-4"})}));aR.displayName=sR.displayName;const lR=m.forwardRef(({className:t,...e},n)=>a.jsx(iR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(YN,{className:"h-4 w-4"})}));lR.displayName=iR.displayName;const su=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(_W,{children:a.jsxs(tR,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(aR,{}),a.jsx(SW,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(lR,{})]})}));su.displayName=tR.displayName;const NW=m.forwardRef(({className:t,...e},n)=>a.jsx(nR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));NW.displayName=nR.displayName;const Tt=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(rR,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(TW,{children:a.jsx(Mh,{className:"h-4 w-4"})})}),a.jsx(EW,{children:e})]}));Tt.displayName=rR.displayName;const CW=m.forwardRef(({className:t,...e},n)=>a.jsx(oR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));CW.displayName=oR.displayName;function kW(t){return R0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function IW(){return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{className:"h-10 w-40"}),a.jsx(Oe,{className:"h-10 w-40"})]}),[1,2,3].map(t=>a.jsxs("div",{className:"space-y-3",children:[a.jsx(Oe,{className:"h-6 w-32"}),a.jsx("div",{className:"space-y-2",children:[1,2].map(e=>a.jsx(Oe,{className:"h-16 w-full"},e))})]},t))]})}const Pd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},AW=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},jW=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},rg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,kS=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function RW(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=xn();it();const[o,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,y]=m.useState("timeline"),[w,v]=m.useState(1),[_,b]=m.useState(!1),[x]=m.useState([]);if(n)return a.jsx(IW,{});const S=m.useMemo(()=>{let C=[...s,...x];return o&&(C=C.filter(k=>k.courseId===o)),c&&(C=C.filter(k=>k.systemStatus===c)),C},[s,x,o,c]),I=()=>{l(null),u(null)},D=o||c,M=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({x:0,left:0}),F=60*w,{earliestDate:se,latestDate:J,initialScrollPosition:X}=m.useMemo(()=>{const V=new Date;V.setHours(0,0,0,0);let Y=new Date,de=new Date;if(S.length>0){const We=S.flatMap(Je=>{const Tn=[];return Je.dueDate&&Tn.push(new Date(Je.dueDate)),Je.createdAt&&Tn.push(new Date(Je.createdAt)),Tn});We.length>0&&(Y=new Date(Math.min(...We.map(Je=>Je.getTime()))),de=new Date(Math.max(...We.map(Je=>Je.getTime()))))}const Q=new Date(Y);Q.setDate(Q.getDate()-30);const te=new Date(de);te.setDate(te.getDate()+30);let ae=V;const Te=S.filter(We=>We.dueDate&&new Date(We.dueDate)>=V).sort((We,Je)=>new Date(We.dueDate).getTime()-new Date(Je.dueDate).getTime());Te.length>0&&(ae=new Date(Te[0].dueDate));const mt=Math.ceil((ae.getTime()-Q.getTime())/(1e3*3600*24))*F+F/2-window.innerWidth/2;return{earliestDate:Q,latestDate:te,initialScrollPosition:Math.max(0,mt)}},[S,F]),O=m.useMemo(()=>AW(se,J),[se,J]);m.useEffect(()=>{C.current&&(C.current.scrollLeft=X)},[X]);const B=V=>{V.button===2&&C.current&&(V.preventDefault(),A(!0),P.current={x:V.pageX,left:C.current.scrollLeft})},U=m.useCallback(V=>{if(!k||!C.current)return;V.preventDefault();const de=(V.pageX-P.current.x)*1.5;C.current.scrollLeft=P.current.left-de},[k]),W=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",U),window.addEventListener("mouseup",W)):(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",W)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",W)}),[k,U,W]);const[q,ie]=m.useState(!1),[ee,ne]=m.useState(!1),oe=m.useRef(null);return m.useEffect(()=>{const V=()=>{if(oe.current){const{scrollHeight:de,clientHeight:Q,scrollTop:te}=oe.current;ie(de>Q),ne(te+Q>=de-10)}};V();const Y=oe.current;return Y==null||Y.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{Y==null||Y.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[S,_]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:V=>{C.current=V,oe.current=V},className:$("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:V=>V.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${O.length*F}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:O.map((V,Y)=>{const de=kS(V);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:F},children:[a.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",de?"text-foreground":"text-muted-foreground"),children:V.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",de?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:V.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),a.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(V=>V.dueDate).length*40)}px`:`${Math.max(400,S.filter(V=>V.dueDate).length*60)}px`},children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:O.map((V,Y)=>{const de=kS(V);return a.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",de?"bg-accent/50":""),style:{width:F},children:de&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),a.jsx("div",{className:$("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(V=>V.dueDate).map(V=>{const Y=e.find(Ps=>Ps.id===V.courseId),de=Y==null?void 0:Y.color,Q=V.systemStatus==="submitted"||V.systemStatus==="graded",te=V.createdAt?new Date(V.createdAt):new Date,ae=new Date(V.dueDate),Te=(te.getTime()-se.getTime())/(1e3*3600*24),Re=(ae.getTime()-te.getTime())/(1e3*3600*24),mt=Math.max(0,Te*F),We=Math.max(F,Re*F),Je={left:`${mt}px`,width:`${We}px`,minWidth:_?"100px":"140px",backgroundColor:Q?void 0:de,borderColor:Q?void 0:de?"rgba(0,0,0,0.1)":void 0};Pd[V.systemStatus]||Pd.backlog;const Tn="bg-green-100/80 border-green-300 text-green-800",He="bg-card border shadow-sm "+(de?"text-slate-900":"text-foreground"),Ge=_?"h-8":"h-12",er=_?"h-9":"h-14";return a.jsx("div",{className:$("relative group",er),children:a.jsxs("div",{onClick:()=>f(V),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Ge,_?"px-2":"px-3",Q?Tn:He),style:Je,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[V.courseId==="system"&&a.jsx(ex,{className:$("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),Q&&a.jsx(Mh,{className:$("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),V.title]})}),!_&&a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:V.courseName})})]})},V.id)})})]})]})}),q&&!ee&&S.length>0&&a.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(ob,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),a.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),a.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=C.current,Y=(V==null?void 0:V.scrollLeft)||0,de=(V==null?void 0:V.scrollTop)||0,Q=Math.min(2,w+.25);v(Q),Q>.75&&b(!1),setTimeout(()=>{V&&(V.scrollLeft=Y*(Q/w),V.scrollTop=de)},0)},disabled:w>=2,title:"Zoom In (Normal View)",children:a.jsx(Y5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=C.current,Y=(V==null?void 0:V.scrollLeft)||0,de=(V==null?void 0:V.scrollTop)||0,Q=Math.max(.5,w-.25);v(Q),Q<=.75&&b(!0),setTimeout(()=>{V&&(V.scrollLeft=Y*(Q/w),V.scrollTop=de)},0)},disabled:w<=.5,title:"Zoom Out (Compact View)",children:a.jsx(J5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[a.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(w*100),"%"]}),_&&a.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},T=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({y:0,top:0}),R=m.useRef({}),[F,se]=m.useState(!1),{startMonth:J,endMonth:X}=m.useMemo(()=>{let ne=new Date,oe=new Date;if(S.length>0){const de=S.filter(Q=>Q.dueDate).map(Q=>new Date(Q.dueDate));de.length>0&&(ne=new Date(Math.min(...de.map(Q=>Q.getTime()))),oe=new Date(Math.max(...de.map(Q=>Q.getTime()))))}const V=new Date(ne);V.setMonth(V.getMonth()-2),V.setDate(1);const Y=new Date(oe);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:V,endMonth:Y}},[S]),O=m.useMemo(()=>jW(J,X),[J,X]),B=m.useCallback(()=>{var de;const ne=rg(new Date),oe=R.current[ne];if(!oe){se(!0);return}const V=oe.getBoundingClientRect(),Y=(de=C.current)==null?void 0:de.getBoundingClientRect();Y&&se(V.bottom<Y.top||V.top>Y.bottom)},[O]);m.useEffect(()=>{const ne=C.current;return ne&&(ne.addEventListener("scroll",B),B()),()=>ne==null?void 0:ne.removeEventListener("scroll",B)},[B]),m.useEffect(()=>{setTimeout(()=>U(),100)},[]);const U=()=>{const ne=rg(new Date),oe=R.current[ne];oe&&oe.scrollIntoView({behavior:"smooth",block:"center"})},W=ne=>{ne.button===2&&C.current&&(ne.preventDefault(),A(!0),P.current={y:ne.pageY,top:C.current.scrollTop})},q=m.useCallback(ne=>{if(!k||!C.current)return;ne.preventDefault();const V=(ne.pageY-P.current.y)*1.5;C.current.scrollTop=P.current.top-V},[k]),ie=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",q),window.addEventListener("mouseup",ie)):(window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",ie)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",ie)}),[k,q,ie]);const ee=ne=>{const oe=ne.getFullYear(),V=ne.getMonth(),Y=new Date(oe,V,1),de=new Date(oe,V+1,0),Q=[];for(let te=0;te<Y.getDay();te++)Q.push({date:new Date(oe,V,-Y.getDay()+1+te),isCurrentMonth:!1});for(let te=1;te<=de.getDate();te++)Q.push({date:new Date(oe,V,te),isCurrentMonth:!0});for(;Q.length%7!==0;){const te=Q.length-(Y.getDay()+de.getDate())+1,ae=new Date(oe,V+1,te);Q.push({date:ae,isCurrentMonth:!1})}return Q};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[F&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(ob,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:C,className:$("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:W,onContextMenu:ne=>ne.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:O.map(ne=>{const oe=ee(ne),V=rg(ne);return a.jsxs("div",{ref:Y=>R.current[V]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:ne.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:oe.map((Y,de)=>{const Q=S.filter(ae=>{if(!ae.dueDate)return!1;const Te=new Date(ae.dueDate);Te.setHours(0,0,0,0);const Re=new Date(Y.date);return Re.setHours(0,0,0,0),Re.toDateString()===Te.toDateString()}),te=Y.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",te&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:Q.map(ae=>{const Te=Pd[ae.systemStatus]||Pd.backlog;return a.jsx("div",{onClick:Re=>{Re.stopPropagation(),f(ae)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Te.color,Te.border),title:ae.title,children:ae.title},ae.id)})})]},de)})})]},V)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(xn().error&&xn().error.toLowerCase().includes("session")){const{assignments:C,courses:k}=xn();if(!C.length&&!k.length)return a.jsx(El,{})}const{error:N}=xn();return a.jsxs(a.Fragment,{children:[N&&N.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx(Xr,{href:"/auth/refresh",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[a.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),a.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[a.jsxs("button",{onClick:()=>y("timeline"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx(A5,{className:"h-3.5 w-3.5"}),"Timeline"]}),a.jsxs("button",{onClick:()=>y("calendar"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx(Bc,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),a.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[a.jsx(L5,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),a.jsxs(vf,{value:o||"all",onValueChange:C=>l(C==="all"?null:C),children:[a.jsx(ru,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:a.jsx(xf,{placeholder:"All Courses"})}),a.jsxs(su,{children:[a.jsx(Tt,{value:"all",children:"All Courses"}),e.map(C=>a.jsx(Tt,{value:C.id,children:C.name},C.id))]})]}),a.jsxs(vf,{value:c||"all",onValueChange:C=>u(C==="all"?null:C),children:[a.jsx(ru,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:a.jsx(xf,{placeholder:"All Status"})}),a.jsxs(su,{children:[a.jsx(Tt,{value:"all",children:"All Status"}),a.jsx(Tt,{value:"backlog",children:"Backlog"}),a.jsx(Tt,{value:"in_progress",children:"In Progress"}),a.jsx(Tt,{value:"submitted",children:"Submitted"}),a.jsx(Tt,{value:"graded",children:"Graded"}),a.jsx(Tt,{value:"overdue",children:"Overdue"})]})]}),D&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:I,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[a.jsx(Io,{className:"h-3.5 w-3.5 md:mr-1"}),a.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),a.jsx("div",{className:"ml-auto pl-2",children:a.jsx(Yf,{children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx(Xr,{href:"/settings/integrations",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[a.jsx(kW,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),a.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),a.jsxs(xu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?a.jsx(M,{}):a.jsx(T,{})})]}),a.jsx(B0,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}const IS="attendance_configs",Gn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Zt(Be(Ve,IS,t),n),qn.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=qn.get(e);if(n)return n;const r=Be(Ve,IS,t),s=await Cs(r);if(s.exists()){const i=s.data();return qn.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var S;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=qn.get(s);if(i)return i;const o=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const f=(await u.json()).values;if(!f||f.length<2)throw new Error("Sheet is empty or invalid format.");const p=f[0],y=f.find(I=>{var M;return((M=I[o])==null?void 0:M.toLowerCase().trim())===n.toLowerCase().trim()});if(!y)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let w=0,v=0;const _=[];for(let I=1;I<p.length;I++){const D=p[I],M=(S=y[I])==null?void 0:S.toUpperCase().trim();if(!D)continue;let T="Unknown";M==="P"||M==="PRESENT"||M==="1"?(T="Present",v++,w++):(M==="A"||M==="ABSENT"||M==="0")&&(T="Absent",w++),T!=="Unknown"&&_.push({date:D,status:T})}const b=w===0?0:Math.round(v/w*100),x={courseId:t,stats:{totalClasses:w,attendedClasses:v,percentage:b},history:_.reverse()};return qn.set(s,x,60*30),x}},li={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:Zv,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:X5,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:rx,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:aC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:sC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:oy,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:Bc,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:JN,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},PW=Object.keys(li);function DW({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=li[t],[i,o]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(Yf,{delayDuration:0,children:a.jsxs(Jf,{open:i,onOpenChange:o,children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),o(!i)},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(JC,{children:a.jsxs(xu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>o(!1),children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function rc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx(DW,{badgeId:l,size:n},l)),o>0&&a.jsx(Yf,{delayDuration:0,children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(JC,{children:a.jsx(xu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=li[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function MW(){const{user:t}=it(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=js(Be(Ve,"leaderboards","all-courses","students",t.uid),p=>{var y;if(p.exists()){const w=p.data();n(w.badges||[]),s(w.loginStreak||0),o(((y=w.processedAssignmentIds)==null?void 0:y.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:li["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:li["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:li["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:li["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,y)=>y.percentage>p.percentage?y:p)},h=e.length===0?u():null;return a.jsxs(Ae,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),a.jsx(nC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(ze,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Oe,{className:"h-8 w-8 rounded-full"}),a.jsx(Oe,{className:"h-3 w-20"})]}):e.length>0?a.jsx("div",{className:"flex flex-col justify-between h-full gap-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(rc,{badges:e,limit:3,size:"md",className:"mt-2"})]})}):h?a.jsx("div",{className:"flex flex-col gap-3 justify-between h-full",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(Zv,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(aC,{className:"h-5 w-5 text-blue-500"}):a.jsx(Bc,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]})}):a.jsx("div",{className:"flex flex-col gap-2 justify-between h-full",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."})})})]})}function OW(){const{user:t}=it(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=js(Be(Ve,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(Ae,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(Zv,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(ze,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Oe,{className:"h-8 w-16"}),a.jsx(Oe,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function LW(){return a.jsxs(Ae,{className:"overflow-hidden",children:[a.jsx(Ke,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Oe,{className:"h-4 w-24"}),a.jsx(Oe,{className:"h-8 w-8 rounded-lg"})]})}),a.jsx(ze,{className:"pt-2",children:a.jsx(Oe,{className:"h-9 w-16"})})]})}function VW(){return a.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[a.jsx(Oe,{className:"h-12 w-12 rounded-full"}),a.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[a.jsx(Oe,{className:"h-4 w-[200px]"}),a.jsx(Oe,{className:"h-4 w-[150px]"})]})]})}function FW({courses:t}){const{user:e,accessToken:n}=it(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await Gn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const y=Gn.extractSheetId(p.sheetUrl);if(!y)return;const w=await Gn.fetchAttendanceFromSheet(y,n,e.email,p.emailColumn||"A");w&&(c+=w.stats.attendedClasses,u+=w.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(Ae,{"data-testid":"card-attendance-overall",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(lC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(ze,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Oe,{className:"h-8 w-16"}),a.jsx(Oe,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:$("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),a.jsx("p",{className:"text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),a.jsx(Xr,{href:"/attendance",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function zW(){return a.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>a.jsx(LW,{},t))}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-2 space-y-6",children:[a.jsx(Oe,{className:"h-[300px] w-full rounded-xl"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Oe,{className:"h-8 w-40"}),[1,2,3].map(t=>a.jsx(VW,{},t))]})]}),a.jsx("div",{className:"space-y-6",children:a.jsx(Oe,{className:"h-[400px] w-full rounded-xl"})})]})]})}function Dd({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return a.jsxs(Ae,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[a.jsx(Ke,{className:$("pb-3",i.bg),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rt,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),a.jsx("div",{className:$("p-2 rounded-lg",i.iconBg),children:a.jsx(n,{className:$("h-4 w-4",i.iconColor)})})]})}),a.jsx(ze,{className:"pt-2",children:a.jsx("div",{className:$("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function UW({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Ae,{className:"overflow-hidden",children:[a.jsx(Ke,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(rt,{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx($i,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),a.jsxs(Ar,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),a.jsx(ze,{className:"pt-4",children:a.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[a.jsx("span",{className:$("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),a.jsx("div",{className:"relative w-full",children:a.jsx("div",{className:$("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),a.jsx("span",{className:$("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function $W({courses:t,assignments:e}){const{user:n}=it(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,y=t.map(x=>x.id),w=new Set(e.map(x=>x.id)),v=f.filter(x=>{const S=x.email||"",I=x.emailDomain||(S.includes("@")?S.split("@")[1]:""),D=x.enrolledCourseIds||[],M=x.processedAssignmentIds||[],T=p&&I&&p===I,N=y.some(A=>D.includes(A)),k=!I&&M.some(A=>w.has(A));return x.id===n.uid?!0:T&&N||k});v.sort((x,S)=>S.totalXP-x.totalXP);const _=v.length;if(_===0){s(null),o(!1);return}const b=v.findIndex(x=>x.id===n.uid);if(b!==-1){const x=b+1,S=Math.round((_-x+1)/_*100),I=v[b];s({rank:x,total:_,percentile:S,xp:I.totalXP||0,badges:I.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=a0(Zx(Ve,"leaderboards",f,"students"),l0("totalXP","desc")),y=js(p,w=>{w.docs.forEach(v=>{const _=v.data(),b={id:v.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},x=u.get(v.id);(!x||b.totalXP>=x.totalXP)&&u.set(v.id,b)}),h()},w=>{console.error(`Error fetching leaderboard source ${f}:`,w),h()});c.push(y)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Ae,{"data-testid":"card-class-rank",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(rt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(rx,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(ze,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Oe,{className:"h-8 w-16"}),a.jsx(Oe,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(Xr,{href:"/leaderboard",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function BW(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:o}=xn();it();const[l,c]=m.useState(null);if(e)return a.jsx(zW,{});const u=t();return o&&o.toLowerCase().includes("session")&&!(r.length>0||i.length>0||u.upcoming7Days>0)?a.jsx(El,{}):a.jsxs(a.Fragment,{children:[o&&o.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:a.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),a.jsx(Xr,{href:"/auth/refresh",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),a.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:a.jsx(tC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",a.jsxs(Ar,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",a.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(Xr,{href:"/timeline",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",a.jsx(N5,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Dd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:ZN,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Dd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:$i}),a.jsx(Dd,{title:"Overdue",value:u.overdue,icon:Vn,variant:u.overdue>0?"danger":"default"}),a.jsx(Dd,{title:"Total Active",value:u.totalActive,icon:qa}),a.jsx($W,{courses:i,assignments:r}),a.jsx(FW,{courses:i}),a.jsx(MW,{}),a.jsx(OW,{})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(UW,{data:u.weeklyWorkload}),a.jsxs(Ae,{children:[a.jsx(Ke,{className:"pb-2",children:a.jsx(rt,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(ze,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(LB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(qa,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx(B0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function WW(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=xn();it();const[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=Im(),f=t.find(w=>w.id===o),y=e.filter(w=>w.courseId===o).flatMap(w=>w.materials?w.materials.flatMap(v=>{let _=[];if(v.driveFile){const b=v.driveFile.driveFile;let x=b.thumbnailUrl||b.iconUrl||null;!x&&b.id&&(x=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),_.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:x,type:"driveFile"})}return _}):[]).filter(w=>!!w.title);return n&&t.length===0?a.jsx(HW,{}):i&&t.length===0?a.jsx("div",{className:"h-full flex items-center justify-center p-4",children:a.jsx(El,{})}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Vn,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:w=>{w.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(w=>a.jsxs("button",{onClick:()=>l(w.id),className:$("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===w.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===w.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(lb,{className:$("h-4 w-4",o===w.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:w.name}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium",o===w.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:w.section||"No Section"})]}),a.jsx(R5,{className:$("h-4 w-4 transition-transform",o===w.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},w.id))})]}),a.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx($f,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Ar,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[y.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx(eC,{className:"h-4 w-4"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(B5,{className:"h-4 w-4"})})]})]})]}),y.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:y.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="FILE";return b?(S="bg-red-100 text-red-600",I="PDF DOCUMENT"):x?(S="bg-orange-100 text-orange-600",I="PRESENTATION"):(S="bg-blue-100 text-blue-600",I="DOCUMENT"),a.jsxs(Ae,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(Ke,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:a.jsx(xo,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:w.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:I})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[w.thumbnail&&a.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s800"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var N;console.log("Thumbnail failed to load:",w.thumbnail),M.currentTarget.style.display="none";const T=(N=M.currentTarget.parentElement)==null?void 0:N.querySelector(".fallback-viewer");T&&(T.classList.remove("hidden"),T.classList.add("block"))}}),a.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",w.thumbnail?"hidden":"block"),children:a.jsx(qW,{type:b?"pdf":x?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(fe,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${w.id}-${v}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:y.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="File";return b?(S="bg-red-100 text-red-600",I="PDF Document"):x?(S="bg-orange-100 text-orange-600",I="Presentation"):(S="bg-blue-100 text-blue-600",I="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[w.thumbnail?a.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s400"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const T=M.currentTarget.nextElementSibling;T&&T.classList.remove("hidden")}}):null,a.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",w.thumbnail?"hidden":"flex",S),children:a.jsx(xo,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:w.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[I,"  Read Only"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(ny,{className:"h-4 w-4"})]})})]},`${w.id}-${v}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(lb,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(xo,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function HW(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(Oe,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(Oe,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(Oe,{className:"h-4 w-20"}),a.jsx(Oe,{className:"h-10 w-80"}),a.jsx(Oe,{className:"h-4 w-64"})]}),a.jsx(Oe,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(Oe,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function qW({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(xo,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(xo,{className:"h-40 w-40"})})]})}function GW({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=PW.map(c=>li[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(sy,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,y=0;if(c.id==="perfect-week"?(p=7,y=100):c.id==="attendance-champion"&&(p=30,y=90),p>0){const w=h>0?f/h*100:0,v=Math.min(h/p*100,100),_=Math.min(w/y*100,100),b=Math.min((v+_)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(b),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(w),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var q0="Switch",[KW,nq]=kr(q0),[QW,XW]=KW(q0),cR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,y]=m.useState(null),w=$e(e,S=>y(S)),v=m.useRef(!1),_=p?h||!!p.closest("form"):!0,[b=!1,x]=Ti({prop:s,defaultProp:i,onChange:u});return a.jsxs(QW,{scope:n,checked:b,disabled:l,children:[a.jsx(xe.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":hR(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:w,onClick:pe(t.onClick,S=>{x(I=>!I),_&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),_&&a.jsx(YW,{control:p,bubbles:!v.current,name:r,value:c,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});cR.displayName=q0;var uR="SwitchThumb",dR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=XW(uR,n);return a.jsx(xe.span,{"data-state":hR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});dR.displayName=uR;var YW=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=Tj(n),l=AC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function hR(t){return t?"checked":"unchecked"}var fR=cR,JW=dR;const En=m.forwardRef(({className:t,...e},n)=>a.jsx(fR,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(JW,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));En.displayName=fR.displayName;var ZW="Label",mR=m.forwardRef((t,e)=>a.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));mR.displayName=ZW;var pR=mR;const eH=gu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),wr=m.forwardRef(({className:t,...e},n)=>a.jsx(pR,{ref:n,className:$(eH(),t),...e}));wr.displayName=pR.displayName;var sg="rovingFocusGroup.onEntryFocus",tH={bubbles:!1,cancelable:!0},Vm="RovingFocusGroup",[Ky,gR,nH]=Kv(Vm),[rH,yR]=kr(Vm,[nH]),[sH,iH]=rH(Vm),vR=m.forwardRef((t,e)=>a.jsx(Ky.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Ky.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(oH,{...t,ref:e})})}));vR.displayName=Vm;var oH=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),y=$e(e,p),w=W0(i),[v=null,_]=Ti({prop:o,defaultProp:l,onChange:c}),[b,x]=m.useState(!1),S=ln(u),I=gR(n),D=m.useRef(!1),[M,T]=m.useState(0);return m.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(sg,S),()=>N.removeEventListener(sg,S)},[S]),a.jsx(sH,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(N=>_(N),[_]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>T(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>T(N=>N-1),[]),children:a.jsx(xe.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{D.current=!0}),onFocus:pe(t.onFocus,N=>{const C=!D.current;if(N.target===N.currentTarget&&C&&!b){const k=new CustomEvent(sg,tH);if(N.currentTarget.dispatchEvent(k),!k.defaultPrevented){const A=I().filter(J=>J.focusable),P=A.find(J=>J.active),R=A.find(J=>J.id===v),se=[P,R,...A].filter(Boolean).map(J=>J.ref.current);bR(se,h)}}D.current=!1}),onBlur:pe(t.onBlur,()=>x(!1))})})}),xR="RovingFocusGroupItem",wR=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=ps(),c=i||l,u=iH(xR,n),h=u.currentTabStopId===c,f=gR(n),{onFocusableItemAdd:p,onFocusableItemRemove:y}=u;return m.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),a.jsx(Ky.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:pe(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=cH(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const x=b.indexOf(w.currentTarget);b=u.loop?uH(b,x+1):b.slice(x+1)}setTimeout(()=>bR(b))}})})})});wR.displayName=xR;var aH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cH(t,e,n){const r=lH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return aH[r]}function bR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function uH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var dH=vR,hH=wR,G0="Tabs",[fH,rq]=kr(G0,[yR]),_R=yR(),[mH,K0]=fH(G0),SR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=W0(l),[f,p]=Ti({prop:r,onChange:s,defaultProp:i});return a.jsx(mH,{scope:n,baseId:ps(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(xe.div,{dir:h,"data-orientation":o,...u,ref:e})})});SR.displayName=G0;var ER="TabsList",TR=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=K0(ER,n),o=_R(n);return a.jsx(dH,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});TR.displayName=ER;var NR="TabsTrigger",CR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=K0(NR,n),l=_R(n),c=AR(o.baseId,r),u=jR(o.baseId,r),h=r===o.value;return a.jsx(hH,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:pe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:pe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});CR.displayName=NR;var kR="TabsContent",IR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=K0(kR,n),c=AR(l.baseId,r),u=jR(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Ui,{present:s||h,children:({present:p})=>a.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});IR.displayName=kR;function AR(t,e){return`${t}-trigger-${e}`}function jR(t,e){return`${t}-content-${e}`}var pH=SR,RR=TR,PR=CR,DR=IR;const gH=pH,MR=m.forwardRef(({className:t,...e},n)=>a.jsx(RR,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));MR.displayName=RR.displayName;const lh=m.forwardRef(({className:t,...e},n)=>a.jsx(PR,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));lh.displayName=PR.displayName;const ch=m.forwardRef(({className:t,...e},n)=>a.jsx(DR,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ch.displayName=DR.displayName;function yH(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function vH(){const{user:t,requestCalendarPermissions:e}=it(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=js(Be(Ve,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await Zt(Be(Ve,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Zt(Be(Ve,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Zt(Be(Ve,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Ae,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx($i,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Ar,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(fe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(ko,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(En,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(En,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Ga,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Ae,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(ex,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(Xr,{href:"/settings/notifications",children:a.jsx(fe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function xH(){var se,J;const{user:t,signOut:e}=it(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=xn(),{isInstallable:l,isInstalled:c,promptInstall:u}=yH(),{theme:h,setTheme:f}=d0(),[p,y]=m.useState(!0),[w,v]=m.useState("auto"),[_,b]=m.useState(!1),[x,S]=m.useState([]),[I,D]=m.useState(0),[M,T]=m.useState(0),[N,C]=m.useState(),[k,A]=m.useState("general");m.useEffect(()=>{const O=new URLSearchParams(window.location.search).get("tab");O&&["general","badges","integrations"].includes(O)&&A(O)},[]),m.useEffect(()=>{if(!t)return;const X=js(Be(Ve,"leaderboards","all-courses","students",t.uid),O=>{var B;if(O.exists()){const U=O.data();S(U.badges||[]),D(U.loginStreak||0),T(((B=U.processedAssignmentIds)==null?void 0:B.length)||0)}else S([]),D(0),T(0)});return()=>X()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let X=0,O=0;o.forEach(B=>{if(B.attendanceData&&typeof B.attendanceData=="object"){const U=Object.values(B.attendanceData);X+=U.length,O+=U.filter(W=>typeof W=="string"?W.toLowerCase()==="present":W===!0||W===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:X,attendedClasses:O}),X>0&&C({total:X,attended:O})},[o]),m.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var ne;const O=Be(Ve,"leaderboards","all-courses","students",t.uid),B=await Cs(O);if(!B.exists())return;const U=B.data(),W=new Set(U.badges||[]);let q=!1;const ie=U.loginStreak||0;ie>=5&&!W.has("5-day-consistent")&&(W.add("5-day-consistent"),q=!0),ie>=10&&!W.has("10-day-consistent")&&(W.add("10-day-consistent"),q=!0),ie>=30&&!W.has("30-day-consistent")&&(W.add("30-day-consistent"),q=!0);const ee=((ne=U.processedAssignmentIds)==null?void 0:ne.length)||0;ee>=10&&!W.has("10-submissions")&&(W.add("10-submissions"),q=!0),ee>=25&&!W.has("25-submissions")&&(W.add("25-submissions"),q=!0),ee>=50&&!W.has("50-submissions")&&(W.add("50-submissions"),q=!0),q&&await Zt(O,{badges:Array.from(W)},{merge:!0})})()},[t,k]);const P=((se=t==null?void 0:t.displayName)==null?void 0:se.split(" ").map(X=>X[0]).join("").toUpperCase())||((J=t==null?void 0:t.email)==null?void 0:J[0].toUpperCase())||"U",R=()=>n?n.toLocaleString():"Never",F=async()=>{b(!0);try{await u()}catch(X){console.error("Install failed:",X)}finally{b(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(gH,{value:k,onValueChange:A,className:"w-full",children:[a.jsxs(MR,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(lh,{value:"general",children:"General"}),a.jsx(lh,{value:"badges",children:"Badges"}),a.jsx(lh,{value:"integrations",children:"Integrations"})]}),a.jsxs(ch,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{className:"text-base",children:"Connected Account"}),a.jsx(gn,{children:"Your Google account linked to this app"})]}),a.jsxs(ze,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(as,{className:"h-12 w-12",children:[a.jsx(ls,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{children:P})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Mh,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(fr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",R()]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:X=>{X.preventDefault(),s().catch(O=>{console.error("Sync failed:",O)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(Ga,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{className:"text-base",children:"Sync Settings"}),a.jsx(gn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(En,{id:"background-sync",checked:p,onCheckedChange:y,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{className:"text-base",children:"Theme"}),a.jsx(gn,{children:"Choose your preferred color theme"})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(nx,{className:"h-4 w-4"}),"Light"]}),a.jsxs(fe,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx(Bf,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Ae,{className:"border-primary/20",children:[a.jsxs(Ke,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(ab,{className:"h-4 w-4"}),"Install App"]}),a.jsx(gn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(ze,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Mh,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(K5,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(fe,{onClick:F,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(ab,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(wo,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{className:"text-base",children:"Preferences"}),a.jsx(gn,{children:"Customize your experience"})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(vf,{value:w,onValueChange:v,children:[a.jsx(ru,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(xf,{})}),a.jsxs(su,{children:[a.jsx(Tt,{value:"auto",children:"Auto-detect"}),a.jsx(Tt,{value:"America/New_York",children:"Eastern Time"}),a.jsx(Tt,{value:"America/Chicago",children:"Central Time"}),a.jsx(Tt,{value:"America/Denver",children:"Mountain Time"}),a.jsx(Tt,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(Tt,{value:"Europe/London",children:"London"}),a.jsx(Tt,{value:"Europe/Paris",children:"Paris"}),a.jsx(Tt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(Wc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(gn,{children:"Manage your session"})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(AA,{children:[a.jsx(jA,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(T0,{children:[a.jsx(C0,{children:"Are you absolutely sure?"}),a.jsx(k0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(N0,{children:[a.jsx(A0,{children:"Cancel"}),a.jsx(I0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(ch,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsxs(rt,{className:"text-base flex items-center gap-2",children:[a.jsx(nC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(gn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(ze,{children:a.jsx(GW,{earnedBadges:x,currentStreak:I,submissionCount:M,attendanceStats:N})})]})}),a.jsx(ch,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(vH,{})})]})]})}function wH(){const{user:t,requestGmailPermissions:e,accessToken:n}=it(),{toast:r}=zo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function w(){if(t)try{const v=Be(Ve,"users",t.uid,"settings","notifications"),_=await Cs(v);if(_.exists()){const b=_.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}w()},[t]),m.useEffect(()=>{async function w(){if(!(!t||h))try{const _=Be(Ve,"users",t.uid,"settings","notifications");await Zt(_,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const v=setTimeout(w,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(w){console.error(w),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},y=w=>{l(v=>({...v,[w]:!v[w]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Xr,{href:"/settings",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx($f,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Ae,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"pb-4",children:[a.jsxs(rt,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(ex,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(gn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(fr,{}),a.jsxs(ze,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(En,{checked:o.dueReminder,onCheckedChange:()=>y("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(fr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(En,{checked:o.missedSubmission,onCheckedChange:()=>y("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(fr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(wr,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(En,{checked:o.workloadWarning,onCheckedChange:()=>y("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(U0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(qa,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(fe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(wo,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(ko,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function bH(){const[t,e]=Lf(),{user:n,requestCalendarPermissions:r}=it(),{toast:s}=zo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const w=js(Be(Ve,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>w()},[n]);const f=async()=>{c(!0);try{await r()?(await Zt(Be(Ve,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(w){console.error(w),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Zt(Be(Ve,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(w){console.error(w)}},y=async(w,v)=>{h(_=>({..._,[w]:v}));try{await Zt(Be(Ve,"users",n.uid,"settings","calendar"),{[w]:v},{merge:!0})}catch(_){console.error(_)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(ko,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(j5,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Ae,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ke,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx($i,{className:"h-6 w-6"})}),a.jsx(rt,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Ar,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(ko,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(ze,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(fr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(En,{checked:u.syncAssignments,onCheckedChange:w=>y("syncAssignments",w)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(En,{checked:u.syncExams,onCheckedChange:w=>y("syncExams",w)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(En,{checked:u.syncPersonal,onCheckedChange:w=>y("syncPersonal",w)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(Ga,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(_H,{})]})]})}function _H(){const{user:t,requestGmailPermissions:e}=it(),{toast:n}=zo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=js(Be(Ve,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Zt(Be(Ve,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Zt(Be(Ve,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await Zt(Be(Ve,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Ae,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ke,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(rt,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Ar,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(ko,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(ze,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(fr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(En,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(En,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function SH(){var N,C,k,A,P,R;const{user:t,signOut:e}=it(),{courses:n,assignments:r,isLoading:s,error:i}=xn();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return a.jsx(El,{});const[o,l]=m.useState("class"),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,y]=m.useState(!0),[w,v]=m.useState(!0);m.useEffect(()=>{f(!0);const F=Array.from(new Set(["all-courses",...n.map(O=>O.id)])),se=[],J=new Map,X=()=>{const O=[],B=t!=null&&t.email?t.email.split("@")[1]:null,U=n.map(q=>q.id),W=new Set(r.map(q=>q.id));J.forEach(q=>{const ie=q.email||"";let ee=q.emailDomain||"";!ee&&ie.includes("@")&&(ee=ie.split("@")[1]);const ne=q.enrolledCourseIds||[],oe=q.processedAssignmentIds||[],V=B&&ee&&B===ee,Y=U.some(ae=>ne.includes(ae)),Q=!ee&&oe.some(ae=>W.has(ae));let te=!1;o==="college"?(te=!!V,(q.id===(t==null?void 0:t.uid)||V)&&console.log(`[College Filter] Student: ${q.displayName}, Domain: ${ee}, User Domain: ${B}, Match: ${V}`)):te=V&&Y||Q,te&&O.push(q)}),O.sort((q,ie)=>ie.totalXP-q.totalXP),u(O),f(!1)};return F.forEach(O=>{const B=Zx(Ve,"leaderboards",O,"students"),U=a0(B,l0("totalXP","desc"),E2(50)),W=js(U,q=>{q.forEach(ie=>{const ee=ie.data(),ne={id:ie.id,displayName:ee.displayName||ee.name||"Anonymous",photoUrl:ee.photoUrl||ee.avatar||"",totalXP:ee.totalXP||ee.xp||0,processedAssignmentIds:ee.processedAssignmentIds||ee.completedTasks||[],email:ee.email||"",emailDomain:ee.emailDomain||(ee.email?ee.email.split("@")[1]:""),enrolledCourseIds:ee.enrolledCourseIds||ee.subjects||[],badges:ee.badges||[]},oe=J.get(ie.id);(!oe||ne.totalXP>=oe.totalXP)&&J.set(ie.id,ne)}),X()});se.push(W)}),()=>{se.forEach(O=>O())}},[o,t,n,r]);const _=o==="class"?"My Class":"My College",b=c.find(F=>F.id===(t==null?void 0:t.uid));b!=null&&b.totalXP;const x=!!b,S=c.filter(F=>F.totalXP>0),I=c.filter(F=>F.totalXP===0),D=c.length>0&&S.length===0,M=[...I].sort((F,se)=>{const J=X=>X?typeof X.toMillis=="function"?X.toMillis():typeof X=="number"?X:X instanceof Date?X.getTime():typeof X=="string"?new Date(X).getTime():0:0;return J(F.lastSyncedAt)-J(se.lastSyncedAt)}),T=[...S,...M];return a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(wo,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:F=>{F.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[_," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(vf,{value:o,onValueChange:F=>l(F),children:[a.jsx(ru,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(xf,{placeholder:"Select View"})}),a.jsxs(su,{children:[a.jsx(Tt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(Tt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&o==="class"&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>y(!1),children:a.jsx(Io,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(F5,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),o==="college"&&w&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>v(!1),children:a.jsx(Io,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(wo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(oC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(wo,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!x&&!h?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(ko,{className:"h-6 w-6 text-primary animate-spin"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},F))}):c.length===0?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):D?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(tC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:T.map((F,se)=>{var X,O;const J=F.id===(t==null?void 0:t.uid);return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(as,{className:$("h-10 w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[a.jsx(ls,{src:F.photoUrl}),a.jsx(cs,{className:"text-xs bg-muted text-muted-foreground",children:(O=(X=F.displayName)==null?void 0:X[0])==null?void 0:O.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:$("text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[F.displayName,J&&a.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},F.id)})})]}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[T.length>0&&a.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:T[1]&&T[1].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(as,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(ls,{src:T[1].photoUrl}),a.jsx(cs,{className:"text-lg bg-zinc-100 text-zinc-500",children:(C=(N=T[1].displayName)==null?void 0:N[0])==null?void 0:C.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:T[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[T[1].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(rc,{badges:T[1].badges||[],limit:2,size:"sm"})})]})]}):S.length===1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(M5,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(as,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(ls,{src:T[0].photoUrl}),a.jsx(cs,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(A=(k=T[0].displayName)==null?void 0:k[0])==null?void 0:A.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:T[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[T[0].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:a.jsx(rc,{badges:T[0].badges||[],limit:3,size:"sm"})})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:T[2]&&T[2].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(as,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(ls,{src:T[2].photoUrl}),a.jsx(cs,{className:"text-lg bg-amber-50 text-amber-700",children:(R=(P=T[2].displayName)==null?void 0:P[0])==null?void 0:R.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:T[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[T[2].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(rc,{badges:T[2].badges||[],limit:2,size:"sm"})})]})]}):S.length>=1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:T.slice(Math.min(3,S.length)).map((F,se)=>{var O,B;const J=F.id===(t==null?void 0:t.uid),X=Math.min(3,S.length)+se+1;return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:F.totalXP>0?`#${X}`:"-"})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(as,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[a.jsx(ls,{src:F.photoUrl}),a.jsx(cs,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(B=(O=F.displayName)==null?void 0:O[0])==null?void 0:B.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[F.displayName," ",J&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(rc,{badges:F.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[F.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:F.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},F.id)})})]})]})})]})}function EH(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const AS=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function TH(){return a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[a.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>a.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function NH(){const{courses:t,error:e,isLoading:n}=xn();if(n)return a.jsx(TH,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return a.jsx(El,{});const{accessToken:r,user:s}=it();zo();const[i,o]=m.useState(""),[l,c]=m.useState({}),[u,h]=m.useState(!1),[f,p]=m.useState(null);m.useState("");const y=m.useMemo(()=>EH(),[]);m.useEffect(()=>{if(!t||!s)return;(async()=>{const N=await Promise.all(t.map(async k=>{var P;if(((P=l[k.id])==null?void 0:P.state)==="loaded")return l[k.id];const A=await Gn.getCourseConfig(k.id);return A?A.isVisible?(w(k.id,A.sheetUrl),{courseId:k.id,state:"loading"}):{courseId:k.id,state:"hidden"}:{courseId:k.id,state:"no-config"}})),C={};N.forEach(k=>{C[k.courseId]=k}),c(k=>({...k,...C}))})()},[t,s]),m.useEffect(()=>{t.length>0&&!i&&o(t[0].id)},[t,i]);const w=async(T,N)=>{if(!r||!(s!=null&&s.email))return;const C=Gn.extractSheetId(N);if(!C){c(P=>({...P,[T]:{courseId:T,state:"error",error:"Invalid configuration"}}));return}const k=await Gn.getCourseConfig(T),A=(k==null?void 0:k.emailColumn)||"A";try{const P=await Gn.fetchAttendanceFromSheet(C,r,s.email,A);c(R=>({...R,[T]:{courseId:T,state:"loaded",data:P}}))}catch(P){console.error(P),c(R=>({...R,[T]:{courseId:T,state:"error",error:P.message||"Failed to load"}}))}},v=async T=>{T==null||T.stopPropagation(),h(!0);const N=Object.values(l).filter(C=>C.state==="loaded"||C.state==="error"||C.state==="loading").map(async C=>{const k=await Gn.getCourseConfig(C.courseId);return k?w(C.courseId,k.sheetUrl):Promise.resolve()});await Promise.allSettled(N),h(!1)},_=Object.values(l).filter(T=>T.state==="loaded"&&T.data),b=_.reduce((T,N)=>{var C;return T+(((C=N.data)==null?void 0:C.stats.attendedClasses)||0)},0),x=_.reduce((T,N)=>{var C;return T+(((C=N.data)==null?void 0:C.stats.totalClasses)||0)},0),S=AS(b,x),I=l[i],D=t.find(T=>T.id===i),M=I==null?void 0:I.data;return m.useEffect(()=>{if(!s||x<5)return;const N=setTimeout(async()=>{const C=[],k=b,A=x,P=A>0?k/A:0;if(A>=10&&P===1&&C.push("perfect-week"),A>=30&&P>=.95&&C.push("attendance-champion"),C.length>0)try{const R=Be(Ve,"leaderboards","all-courses","students",s.uid);await k2(R,{badges:j2(...C)})}catch(R){console.debug("Could not award attendance badges:",R)}},3e3);return()=>clearTimeout(N)},[s,x,b]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),a.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),a.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",y]})]}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:v,className:$("text-muted-foreground h-8 shrink-0",u&&"opacity-70"),children:[a.jsx(Oh,{className:$("h-3.5 w-3.5 sm:mr-2",u&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),e&&e.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(wo,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:T=>{T.preventDefault(),window.location.reload()},children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:_.length>0?a.jsx(Ae,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(ze,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Ar,{variant:S.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",S.color),children:S.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[S.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",_.length," active courses"]})]})]})})}):a.jsx(Ae,{className:"border-border shadow-sm bg-card",children:a.jsxs(ze,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:a.jsx(Bc,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2 max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",a.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[a.jsx(Vn,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(T=>{var P,R;const N=l[T.id],C=(N==null?void 0:N.state)||"loading",k=N!=null&&N.data?AS(N.data.stats.attendedClasses,N.data.stats.totalClasses):null,A=i===T.id;return a.jsx(Ae,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",A&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>o(T.id),children:a.jsxs(ze,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:T.name})}),a.jsx(xu,{children:a.jsx("p",{children:T.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:T.section||"No Section"})]}),C==="loaded"&&k&&a.jsxs("span",{className:$("text-lg font-bold tabular-nums",k.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[k.percentage,"%"]}),C==="hidden"&&a.jsx(ry,{className:"h-5 w-5 text-muted-foreground/50"}),C==="locked"&&a.jsx(sy,{className:"h-5 w-5 text-amber-500/80"}),C==="error"&&a.jsx(wo,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[C==="loaded"&&k&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(P=N.data)==null?void 0:P.stats.attendedClasses,"/",(R=N.data)==null?void 0:R.stats.totalClasses," classes"]}),a.jsx("span",{className:k.status==="safe"?"text-emerald-500":"text-red-500",children:k.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:$("h-full rounded-full transition-all duration-500",k.progressColor),style:{width:`${k.percentage}%`}})})]}),C==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(fe,{size:"sm",variant:"secondary",className:"w-full",onClick:F=>{F.stopPropagation(),p(T.id)},children:[a.jsx(z5,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),C==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),C==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),C==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:N==null?void 0:N.error}),C==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Oh,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},T.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(Bc,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(D==null?void 0:D.section)||(D==null?void 0:D.name.slice(0,3).toUpperCase())})]}),a.jsx(Ae,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:M?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:M.history.map((T,N)=>{const C=T.status==="Present",k=N===0,A=N===5;return a.jsxs("div",{className:"group",children:[k&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),A&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",C?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),N!==M.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",C?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:T.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:T.date})]})})]})]},N)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(I==null?void 0:I.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(sy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(I==null?void 0:I.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(ry,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((I==null?void 0:I.state)==="error"||(I==null?void 0:I.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(Vn,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function CH(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Ae,{className:"w-full max-w-md mx-4",children:a.jsxs(ze,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(Vn,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function OR(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const kH=864e5;function Qy(t){const e=OR(t);return e.setHours(0,0,0,0),e}function jS(t){const e=OR(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function IH(t,e){const n=Qy(t),r=Qy(e),s=+n-jS(n),i=+r-jS(r);return Math.round((s-i)/kH)}function AH(){const{user:t}=it();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=Be(Ve,"leaderboards","all-courses","students",t.uid),r=await Cs(n),s=Qy(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=IH(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await Zt(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const jH=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function LR({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:jH;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(ko,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(oC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(QN,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(sC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const RH=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function PH({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,y;const{user:s,signOut:i}=it(),{theme:o,toggleTheme:l}=d0(),c=Im(),u=[{id:"dashboard",label:"Dashboard",icon:U5},{id:"courses",label:"Courses",icon:Jv},{id:"settings",label:"Settings",icon:iC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(w=>w[0]).join("").toUpperCase())||((y=s==null?void 0:s.email)==null?void 0:y[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(Io,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(as,{className:"h-8 w-8",children:[a.jsx(ls,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(cs,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(w=>a.jsxs("button",{onClick:()=>{e(w.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===w.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(w.icon,{className:"h-4 w-4"}),w.label]},w.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx(Bf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Wc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function DH({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>Gn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Ae,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(Jv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ze,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Ae,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(O5,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(ze,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Ae,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(rt,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(ry,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(ze,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function MH({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(Oh,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Ae,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(fe,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(OH,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(fe,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function OH({courseId:t}){const{toast:e}=zo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let y=!0;return(async()=>{f(!0);const v=await Gn.getCourseConfig(t);y&&v&&(r(v.isVisible),i(v.sheetUrl),l(v.emailColumn||"A")),y&&f(!1)})(),()=>{y=!1}},[t]);const p=async()=>{if(!Gn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await Gn.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:o.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Oh,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ar,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(En,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(wr,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(lf,{id:`sheet-${t}`,value:s,onChange:y=>i(y.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(wr,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(lf,{id:`email-col-${t}`,value:o,onChange:y=>l(y.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?a.jsxs(a.Fragment,{children:[a.jsx(JN,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(tx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function LH(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{children:"Notifications"}),a.jsx(gn,{children:"Configure how you receive alerts."})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(C5,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(wr,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(En,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Ae,{children:[a.jsxs(Ke,{children:[a.jsx(rt,{children:"Display"}),a.jsx(gn,{children:"Customize your dashboard appearance."})]}),a.jsx(ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bf,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(wr,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function VH(){const{accessToken:t}=it(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(LR,{message:"Preparing Teacher Workspace...",tips:RH}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(PH,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(rC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(DH,{courses:r}),e==="courses"&&a.jsx(MH,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(LH,{})]})]})]})}function FH(){const{signOut:t,signInWithGoogle:e}=it();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Ae,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(Ke,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(D5,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(rt,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(gn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(ze,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(XN,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Jv,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(QN,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx($i,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(U0,{className:"flex flex-col gap-2",children:[a.jsx(fe,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(fe,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Wc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function zH(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx($f,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function UH(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx($f,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),a.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Track attendance"})," and academic performance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),a.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),a.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),a.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),a.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),a.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),a.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),a.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),a.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),a.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),a.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),a.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),a.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),a.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),a.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"The Service will be uninterrupted or error-free"}),a.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),a.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),a.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Violates these Terms of Service"}),a.jsx("li",{children:"Is harmful to other users or the Service"}),a.jsx("li",{children:"Exposes us to legal liability"})]}),a.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),a.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),a.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const $H=()=>"/";function BH(){const[t,e]=m.useState(!1),n=$H();return a.jsx(dN,{base:n,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(j7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx(AH,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(R7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(nM,{children:[a.jsx(sr,{path:"/pipeline",component:YB}),a.jsx(sr,{path:"/",children:()=>{const[,r]=Lf();return m.useEffect(()=>{r("/dashboard")},[r]),null}}),a.jsx(sr,{path:"/leaderboard",component:SH}),a.jsx(sr,{path:"/timeline",component:RW}),a.jsx(sr,{path:"/dashboard",component:BW}),a.jsx(sr,{path:"/notes",component:WW}),a.jsx(sr,{path:"/attendance",component:NH}),a.jsx(sr,{path:"/settings",component:xH}),a.jsx(sr,{path:"/settings/notifications",component:wH}),a.jsx(sr,{path:"/settings/integrations",component:bH}),a.jsx(sr,{component:CH})]})})]})]})})}function WH(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(zH,{});if(window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service"))return a.jsx(UH,{});const{user:t,loading:e,role:n}=it();return xn(),e?a.jsx(LR,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(VH,{}):n==="no_access"?a.jsx(FH,{}):a.jsx(BH,{}):a.jsx($7,{})}function HH(){return a.jsx(NM,{client:IM,children:a.jsx(tU,{children:a.jsx(eU,{children:a.jsx(lU,{children:a.jsxs(Yf,{children:[a.jsx(DO,{}),a.jsx(WH,{})]})})})})})}eN(document.getElementById("root")).render(a.jsx(HH,{}));
