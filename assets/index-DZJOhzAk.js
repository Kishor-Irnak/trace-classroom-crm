var yw=t=>{throw TypeError(t)};var $m=(t,e,n)=>e.has(t)||yw("Cannot "+n);var Q=(t,e,n)=>($m(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>e.has(t)?yw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>($m(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ut=(t,e,n)=>($m(t,e,"access private method"),n);var Hu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return Q(t,e,r)}});function QP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IE={exports:{}},uf={},AE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu=Symbol.for("react.element"),XP=Symbol.for("react.portal"),YP=Symbol.for("react.fragment"),JP=Symbol.for("react.strict_mode"),ZP=Symbol.for("react.profiler"),ej=Symbol.for("react.provider"),tj=Symbol.for("react.context"),nj=Symbol.for("react.forward_ref"),rj=Symbol.for("react.suspense"),sj=Symbol.for("react.memo"),ij=Symbol.for("react.lazy"),vw=Symbol.iterator;function oj(t){return t===null||typeof t!="object"?null:(t=vw&&t[vw]||t["@@iterator"],typeof t=="function"?t:null)}var kE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RE=Object.assign,PE={};function el(t,e,n){this.props=t,this.context=e,this.refs=PE,this.updater=n||kE}el.prototype.isReactComponent={};el.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};el.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jE(){}jE.prototype=el.prototype;function zy(t,e,n){this.props=t,this.context=e,this.refs=PE,this.updater=n||kE}var $y=zy.prototype=new jE;$y.constructor=zy;RE($y,el.prototype);$y.isPureReactComponent=!0;var xw=Array.isArray,DE=Object.prototype.hasOwnProperty,By={current:null},OE={key:!0,ref:!0,__self:!0,__source:!0};function ME(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)DE.call(e,r)&&!OE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:eu,type:t,key:i,ref:o,props:s,_owner:By.current}}function aj(t,e){return{$$typeof:eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hy(t){return typeof t=="object"&&t!==null&&t.$$typeof===eu}function lj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ww=/\/+/g;function Bm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lj(""+t.key):e.toString(36)}function Nd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case eu:case XP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bm(o,0):r,xw(s)?(n="",t!=null&&(n=t.replace(ww,"$&/")+"/"),Nd(s,e,n,"",function(u){return u})):s!=null&&(Hy(s)&&(s=aj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ww,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",xw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Bm(i,l);o+=Nd(i,e,n,c,s)}else if(c=oj(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Bm(i,l++),o+=Nd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wu(t,e,n){if(t==null)return t;var r=[],s=0;return Nd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},Id={transition:null},uj={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Id,ReactCurrentOwner:By};function LE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Wu,forEach:function(t,e,n){Wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wu(t,function(){e++}),e},toArray:function(t){return Wu(t,function(e){return e})||[]},only:function(t){if(!Hy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=el;Te.Fragment=YP;Te.Profiler=ZP;Te.PureComponent=zy;Te.StrictMode=JP;Te.Suspense=rj;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uj;Te.act=LE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=By.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)DE.call(e,c)&&!OE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:eu,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:tj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ej,_context:t},t.Consumer=t};Te.createElement=ME;Te.createFactory=function(t){var e=ME.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:nj,render:t}};Te.isValidElement=Hy;Te.lazy=function(t){return{$$typeof:ij,_payload:{_status:-1,_result:t},_init:cj}};Te.memo=function(t,e){return{$$typeof:sj,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Id.transition;Id.transition={};try{t()}finally{Id.transition=e}};Te.unstable_act=LE;Te.useCallback=function(t,e){return on.current.useCallback(t,e)};Te.useContext=function(t){return on.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Te.useEffect=function(t,e){return on.current.useEffect(t,e)};Te.useId=function(){return on.current.useId()};Te.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return on.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};Te.useRef=function(t){return on.current.useRef(t)};Te.useState=function(t){return on.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return on.current.useTransition()};Te.version="18.3.1";AE.exports=Te;var m=AE.exports;const Se=NE(m),VE=QP({__proto__:null,default:Se},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dj=m,hj=Symbol.for("react.element"),fj=Symbol.for("react.fragment"),mj=Object.prototype.hasOwnProperty,pj=dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gj={key:!0,ref:!0,__self:!0,__source:!0};function FE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mj.call(e,r)&&!gj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hj,type:t,key:i,ref:o,props:s,_owner:pj.current}}uf.Fragment=fj;uf.jsx=FE;uf.jsxs=FE;IE.exports=uf;var a=IE.exports,UE={exports:{}},Dn={},zE={exports:{}},$E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,M){var $=L.length;L.push(M);e:for(;0<$;){var z=$-1>>>1,X=L[z];if(0<s(X,M))L[z]=M,L[$]=X,$=z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var M=L[0],$=L.pop();if($!==M){L[0]=$;e:for(var z=0,X=L.length,J=X>>>1;z<J;){var Z=2*(z+1)-1,ce=L[Z],ee=Z+1,H=L[ee];if(0>s(ce,$))ee<X&&0>s(H,ce)?(L[z]=H,L[ee]=$,z=ee):(L[z]=ce,L[Z]=$,z=Z);else if(ee<X&&0>s(H,$))L[z]=H,L[ee]=$,z=ee;else break e}}return M}function s(L,M){var $=L.sortIndex-M.sortIndex;return $!==0?$:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,x=!1,b=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(L){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=L)r(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(u)}}function k(L){if(y=!1,T(L),!b)if(n(c)!==null)b=!0,F(j);else{var M=n(u);M!==null&&G(k,M.startTime-L)}}function j(L,M){b=!1,y&&(y=!1,_(S),S=-1),x=!0;var $=p;try{for(T(M),f=n(c);f!==null&&(!(f.expirationTime>M)||L&&!A());){var z=f.callback;if(typeof z=="function"){f.callback=null,p=f.priorityLevel;var X=z(f.expirationTime<=M);M=t.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),T(M)}else r(c);f=n(c)}if(f!==null)var J=!0;else{var Z=n(u);Z!==null&&G(k,Z.startTime-M),J=!1}return J}finally{f=null,p=$,x=!1}}var O=!1,C=null,S=-1,N=5,I=-1;function A(){return!(t.unstable_now()-I<N)}function D(){if(C!==null){var L=t.unstable_now();I=L;var M=!0;try{M=C(!0,L)}finally{M?P():(O=!1,C=null)}}else O=!1}var P;if(typeof v=="function")P=function(){v(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ie=B.port2;B.port1.onmessage=D,P=function(){ie.postMessage(null)}}else P=function(){w(D,0)};function F(L){C=L,O||(O=!0,P())}function G(L,M){S=w(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,F(j))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var $=p;p=M;try{return L()}finally{p=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var $=p;p=L;try{return M()}finally{p=$}},t.unstable_scheduleCallback=function(L,M,$){var z=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?z+$:z):$=z,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,L={id:h++,callback:M,priorityLevel:L,startTime:$,expirationTime:X,sortIndex:-1},$>z?(L.sortIndex=$,e(u,L),n(c)===null&&L===n(u)&&(y?(_(S),S=-1):y=!0,G(k,$-z))):(L.sortIndex=X,e(c,L),b||x||(b=!0,F(j))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var M=p;return function(){var $=p;p=M;try{return L.apply(this,arguments)}finally{p=$}}}})($E);zE.exports=$E;var yj=zE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vj=m,jn=yj;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BE=new Set,gc={};function Co(t,e){Pa(t,e),Pa(t+"Capture",e)}function Pa(t,e){for(gc[t]=e,t=0;t<e.length;t++)BE.add(e[t])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xp=Object.prototype.hasOwnProperty,xj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},bw={};function wj(t){return Xp.call(bw,t)?!0:Xp.call(_w,t)?!1:xj.test(t)?bw[t]=!0:(_w[t]=!0,!1)}function _j(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bj(t,e,n,r){if(e===null||typeof e>"u"||_j(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wy=/[\-:]([a-z])/g;function qy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wy,qy);Lt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wy,qy);Lt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wy,qy);Lt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gy(t,e,n,r){var s=Lt.hasOwnProperty(e)?Lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bj(e,n,s,r)&&(n=null),r||s===null?wj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ws=vj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qu=Symbol.for("react.element"),Go=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),Ky=Symbol.for("react.strict_mode"),Yp=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),WE=Symbol.for("react.context"),Qy=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),Zp=Symbol.for("react.suspense_list"),Xy=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),qE=Symbol.for("react.offscreen"),Ew=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Hm;function $l(t){if(Hm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hm=e&&e[1]||""}return`
`+Hm+t}var Wm=!1;function qm(t,e){if(!t||Wm)return"";Wm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Wm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$l(t):""}function Ej(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=qm(t.type,!1),t;case 11:return t=qm(t.type.render,!1),t;case 1:return t=qm(t.type,!0),t;default:return""}}function eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ko:return"Fragment";case Go:return"Portal";case Yp:return"Profiler";case Ky:return"StrictMode";case Jp:return"Suspense";case Zp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WE:return(t.displayName||"Context")+".Consumer";case HE:return(t._context.displayName||"Context")+".Provider";case Qy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xy:return e=t.displayName||null,e!==null?e:eg(t.type)||"Memo";case Ls:e=t._payload,t=t._init;try{return eg(t(e))}catch{}}return null}function Sj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eg(e);case 8:return e===Ky?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tj(t){var e=GE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gu(t){t._valueTracker||(t._valueTracker=Tj(t))}function KE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tg(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QE(t,e){e=e.checked,e!=null&&Gy(t,"checked",e,!1)}function ng(t,e){QE(t,e);var n=gi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&rg(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rg(t,e,n){(e!=="number"||eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bl=Array.isArray;function aa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Bl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gi(n)}}function XE(t,e){var n=gi(e.value),r=gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ku,JE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ku=Ku||document.createElement("div"),Ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cj=["Webkit","ms","Moz","O"];Object.keys(Xl).forEach(function(t){Cj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xl[e]=Xl[t]})});function ZE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xl.hasOwnProperty(t)&&Xl[t]?(""+e).trim():e+"px"}function eS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Nj=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function og(t,e){if(e){if(Nj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function ag(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=null;function Yy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cg=null,la=null,ca=null;function Iw(t){if(t=ru(t)){if(typeof cg!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=pf(e),cg(t.stateNode,t.type,e))}}function tS(t){la?ca?ca.push(t):ca=[t]:la=t}function nS(){if(la){var t=la,e=ca;if(ca=la=null,Iw(t),e)for(t=0;t<e.length;t++)Iw(e[t])}}function rS(t,e){return t(e)}function sS(){}var Gm=!1;function iS(t,e,n){if(Gm)return t(e,n);Gm=!0;try{return rS(t,e,n)}finally{Gm=!1,(la!==null||ca!==null)&&(sS(),nS())}}function vc(t,e){var n=t.stateNode;if(n===null)return null;var r=pf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var ug=!1;if(us)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){ug=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{ug=!1}function Ij(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Yl=!1,th=null,nh=!1,dg=null,Aj={onError:function(t){Yl=!0,th=t}};function kj(t,e,n,r,s,i,o,l,c){Yl=!1,th=null,Ij.apply(Aj,arguments)}function Rj(t,e,n,r,s,i,o,l,c){if(kj.apply(this,arguments),Yl){if(Yl){var u=th;Yl=!1,th=null}else throw Error(Y(198));nh||(nh=!0,dg=u)}}function No(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Aw(t){if(No(t)!==t)throw Error(Y(188))}function Pj(t){var e=t.alternate;if(!e){if(e=No(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Aw(s),t;if(i===r)return Aw(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function aS(t){return t=Pj(t),t!==null?lS(t):null}function lS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lS(t);if(e!==null)return e;t=t.sibling}return null}var cS=jn.unstable_scheduleCallback,kw=jn.unstable_cancelCallback,jj=jn.unstable_shouldYield,Dj=jn.unstable_requestPaint,ct=jn.unstable_now,Oj=jn.unstable_getCurrentPriorityLevel,Jy=jn.unstable_ImmediatePriority,uS=jn.unstable_UserBlockingPriority,rh=jn.unstable_NormalPriority,Mj=jn.unstable_LowPriority,dS=jn.unstable_IdlePriority,df=null,Or=null;function Lj(t){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(df,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:Uj,Vj=Math.log,Fj=Math.LN2;function Uj(t){return t>>>=0,t===0?32:31-(Vj(t)/Fj|0)|0}var Qu=64,Xu=4194304;function Hl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Hl(l):(i&=o,i!==0&&(r=Hl(i)))}else o=n&~s,o!==0?r=Hl(o):i!==0&&(r=Hl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cr(e),s=1<<n,r|=t[n],e&=~s;return r}function zj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $j(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-cr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=zj(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function hg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hS(){var t=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),t}function Km(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=n}function Bj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Zy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ve=0;function fS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mS,ev,pS,gS,yS,fg=!1,Yu=[],ni=null,ri=null,si=null,xc=new Map,wc=new Map,Us=[],Hj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rw(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":xc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function Dl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ru(e),e!==null&&ev(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Wj(t,e,n,r,s){switch(e){case"focusin":return ni=Dl(ni,t,e,n,r,s),!0;case"dragenter":return ri=Dl(ri,t,e,n,r,s),!0;case"mouseover":return si=Dl(si,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xc.set(i,Dl(xc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wc.set(i,Dl(wc.get(i)||null,t,e,n,r,s)),!0}return!1}function vS(t){var e=Xi(t.target);if(e!==null){var n=No(e);if(n!==null){if(e=n.tag,e===13){if(e=oS(n),e!==null){t.blockedOn=e,yS(t.priority,function(){pS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lg=r,n.target.dispatchEvent(r),lg=null}else return e=ru(n),e!==null&&ev(e),t.blockedOn=n,!1;e.shift()}return!0}function Pw(t,e,n){Ad(t)&&n.delete(e)}function qj(){fg=!1,ni!==null&&Ad(ni)&&(ni=null),ri!==null&&Ad(ri)&&(ri=null),si!==null&&Ad(si)&&(si=null),xc.forEach(Pw),wc.forEach(Pw)}function Ol(t,e){t.blockedOn===e&&(t.blockedOn=null,fg||(fg=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,qj)))}function _c(t){function e(s){return Ol(s,t)}if(0<Yu.length){Ol(Yu[0],t);for(var n=1;n<Yu.length;n++){var r=Yu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ni!==null&&Ol(ni,t),ri!==null&&Ol(ri,t),si!==null&&Ol(si,t),xc.forEach(e),wc.forEach(e),n=0;n<Us.length;n++)r=Us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Us.length&&(n=Us[0],n.blockedOn===null);)vS(n),n.blockedOn===null&&Us.shift()}var ua=ws.ReactCurrentBatchConfig,ih=!0;function Gj(t,e,n,r){var s=Ve,i=ua.transition;ua.transition=null;try{Ve=1,tv(t,e,n,r)}finally{Ve=s,ua.transition=i}}function Kj(t,e,n,r){var s=Ve,i=ua.transition;ua.transition=null;try{Ve=4,tv(t,e,n,r)}finally{Ve=s,ua.transition=i}}function tv(t,e,n,r){if(ih){var s=mg(t,e,n,r);if(s===null)sp(t,e,r,oh,n),Rw(t,r);else if(Wj(s,t,e,n,r))r.stopPropagation();else if(Rw(t,r),e&4&&-1<Hj.indexOf(t)){for(;s!==null;){var i=ru(s);if(i!==null&&mS(i),i=mg(t,e,n,r),i===null&&sp(t,e,r,oh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sp(t,e,r,null,n)}}var oh=null;function mg(t,e,n,r){if(oh=null,t=Yy(r),t=Xi(t),t!==null)if(e=No(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function xS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oj()){case Jy:return 1;case uS:return 4;case rh:case Mj:return 16;case dS:return 536870912;default:return 16}default:return 16}}var Xs=null,nv=null,kd=null;function wS(){if(kd)return kd;var t,e=nv,n=e.length,r,s="value"in Xs?Xs.value:Xs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return kd=s.slice(t,1<r?1-r:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ju(){return!0}function jw(){return!1}function On(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ju:jw,this.isPropagationStopped=jw,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ju)},persist:function(){},isPersistent:Ju}),e}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=On(tl),nu=tt({},tl,{view:0,detail:0}),Qj=On(nu),Qm,Xm,Ml,hf=tt({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(Qm=t.screenX-Ml.screenX,Xm=t.screenY-Ml.screenY):Xm=Qm=0,Ml=t),Qm)},movementY:function(t){return"movementY"in t?t.movementY:Xm}}),Dw=On(hf),Xj=tt({},hf,{dataTransfer:0}),Yj=On(Xj),Jj=tt({},nu,{relatedTarget:0}),Ym=On(Jj),Zj=tt({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),eD=On(Zj),tD=tt({},tl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nD=On(tD),rD=tt({},tl,{data:0}),Ow=On(rD),sD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oD[t])?!!e[t]:!1}function sv(){return aD}var lD=tt({},nu,{key:function(t){if(t.key){var e=sD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cD=On(lD),uD=tt({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mw=On(uD),dD=tt({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),hD=On(dD),fD=tt({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mD=On(fD),pD=tt({},hf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gD=On(pD),yD=[9,13,27,32],iv=us&&"CompositionEvent"in window,Jl=null;us&&"documentMode"in document&&(Jl=document.documentMode);var vD=us&&"TextEvent"in window&&!Jl,_S=us&&(!iv||Jl&&8<Jl&&11>=Jl),Lw=" ",Vw=!1;function bS(t,e){switch(t){case"keyup":return yD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function xD(t,e){switch(t){case"compositionend":return ES(e);case"keypress":return e.which!==32?null:(Vw=!0,Lw);case"textInput":return t=e.data,t===Lw&&Vw?null:t;default:return null}}function wD(t,e){if(Qo)return t==="compositionend"||!iv&&bS(t,e)?(t=wS(),kd=nv=Xs=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _S&&e.locale!=="ko"?null:e.data;default:return null}}var _D={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_D[t.type]:e==="textarea"}function SS(t,e,n,r){tS(r),e=ah(e,"onChange"),0<e.length&&(n=new rv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,bc=null;function bD(t){OS(t,0)}function ff(t){var e=Jo(t);if(KE(e))return t}function ED(t,e){if(t==="change")return e}var TS=!1;if(us){var Jm;if(us){var Zm="oninput"in document;if(!Zm){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),Zm=typeof Uw.oninput=="function"}Jm=Zm}else Jm=!1;TS=Jm&&(!document.documentMode||9<document.documentMode)}function zw(){Zl&&(Zl.detachEvent("onpropertychange",CS),bc=Zl=null)}function CS(t){if(t.propertyName==="value"&&ff(bc)){var e=[];SS(e,bc,t,Yy(t)),iS(bD,e)}}function SD(t,e,n){t==="focusin"?(zw(),Zl=e,bc=n,Zl.attachEvent("onpropertychange",CS)):t==="focusout"&&zw()}function TD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ff(bc)}function CD(t,e){if(t==="click")return ff(e)}function ND(t,e){if(t==="input"||t==="change")return ff(e)}function ID(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:ID;function Ec(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xp.call(e,s)||!mr(t[s],e[s]))return!1}return!0}function $w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bw(t,e){var n=$w(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$w(n)}}function NS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IS(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eh(t.document)}return e}function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AD(t){var e=IS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NS(n.ownerDocument.documentElement,n)){if(r!==null&&ov(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Bw(n,i);var o=Bw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kD=us&&"documentMode"in document&&11>=document.documentMode,Xo=null,pg=null,ec=null,gg=!1;function Hw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gg||Xo==null||Xo!==eh(r)||(r=Xo,"selectionStart"in r&&ov(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ec&&Ec(ec,r)||(ec=r,r=ah(pg,"onSelect"),0<r.length&&(e=new rv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xo)))}function Zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:Zu("Animation","AnimationEnd"),animationiteration:Zu("Animation","AnimationIteration"),animationstart:Zu("Animation","AnimationStart"),transitionend:Zu("Transition","TransitionEnd")},ep={},AS={};us&&(AS=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function mf(t){if(ep[t])return ep[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AS)return ep[t]=e[n];return t}var kS=mf("animationend"),RS=mf("animationiteration"),PS=mf("animationstart"),jS=mf("transitionend"),DS=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){DS.set(t,e),Co(e,[t])}for(var tp=0;tp<Ww.length;tp++){var np=Ww[tp],RD=np.toLowerCase(),PD=np[0].toUpperCase()+np.slice(1);ki(RD,"on"+PD)}ki(kS,"onAnimationEnd");ki(RS,"onAnimationIteration");ki(PS,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(jS,"onTransitionEnd");Pa("onMouseEnter",["mouseout","mouseover"]);Pa("onMouseLeave",["mouseout","mouseover"]);Pa("onPointerEnter",["pointerout","pointerover"]);Pa("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function qw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rj(r,e,void 0,t),t.currentTarget=null}function OS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;qw(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;qw(s,l,u),i=c}}}if(nh)throw t=dg,nh=!1,dg=null,t}function Ge(t,e){var n=e[_g];n===void 0&&(n=e[_g]=new Set);var r=t+"__bubble";n.has(r)||(MS(e,t,2,!1),n.add(r))}function rp(t,e,n){var r=0;e&&(r|=4),MS(n,t,r,e)}var ed="_reactListening"+Math.random().toString(36).slice(2);function Sc(t){if(!t[ed]){t[ed]=!0,BE.forEach(function(n){n!=="selectionchange"&&(jD.has(n)||rp(n,!1,t),rp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ed]||(e[ed]=!0,rp("selectionchange",!1,e))}}function MS(t,e,n,r){switch(xS(e)){case 1:var s=Gj;break;case 4:s=Kj;break;default:s=tv}n=s.bind(null,e,n,t),s=void 0,!ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Xi(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}iS(function(){var u=i,h=Yy(n),f=[];e:{var p=DS.get(t);if(p!==void 0){var x=rv,b=t;switch(t){case"keypress":if(Rd(n)===0)break e;case"keydown":case"keyup":x=cD;break;case"focusin":b="focus",x=Ym;break;case"focusout":b="blur",x=Ym;break;case"beforeblur":case"afterblur":x=Ym;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Yj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=hD;break;case kS:case RS:case PS:x=eD;break;case jS:x=mD;break;case"scroll":x=Qj;break;case"wheel":x=gD;break;case"copy":case"cut":case"paste":x=nD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Mw}var y=(e&4)!==0,w=!y&&t==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var v=u,T;v!==null;){T=v;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,_!==null&&(k=vc(v,_),k!=null&&y.push(Tc(v,k,T)))),w)break;v=v.return}0<y.length&&(p=new x(p,b,null,n,h),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==lg&&(b=n.relatedTarget||n.fromElement)&&(Xi(b)||b[ds]))break e;if((x||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,x?(b=n.relatedTarget||n.toElement,x=u,b=b?Xi(b):null,b!==null&&(w=No(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=u),x!==b)){if(y=Dw,k="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=Mw,k="onPointerLeave",_="onPointerEnter",v="pointer"),w=x==null?p:Jo(x),T=b==null?p:Jo(b),p=new y(k,v+"leave",x,n,h),p.target=w,p.relatedTarget=T,k=null,Xi(h)===u&&(y=new y(_,v+"enter",b,n,h),y.target=T,y.relatedTarget=w,k=y),w=k,x&&b)t:{for(y=x,_=b,v=0,T=y;T;T=Vo(T))v++;for(T=0,k=_;k;k=Vo(k))T++;for(;0<v-T;)y=Vo(y),v--;for(;0<T-v;)_=Vo(_),T--;for(;v--;){if(y===_||_!==null&&y===_.alternate)break t;y=Vo(y),_=Vo(_)}y=null}else y=null;x!==null&&Gw(f,p,x,y,!1),b!==null&&w!==null&&Gw(f,w,b,y,!0)}}e:{if(p=u?Jo(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var j=ED;else if(Fw(p))if(TS)j=ND;else{j=TD;var O=SD}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=CD);if(j&&(j=j(t,u))){SS(f,j,n,h);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&rg(p,"number",p.value)}switch(O=u?Jo(u):window,t){case"focusin":(Fw(O)||O.contentEditable==="true")&&(Xo=O,pg=u,ec=null);break;case"focusout":ec=pg=Xo=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,Hw(f,n,h);break;case"selectionchange":if(kD)break;case"keydown":case"keyup":Hw(f,n,h)}var C;if(iv)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Qo?bS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(_S&&n.locale!=="ko"&&(Qo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Qo&&(C=wS()):(Xs=h,nv="value"in Xs?Xs.value:Xs.textContent,Qo=!0)),O=ah(u,S),0<O.length&&(S=new Ow(S,t,null,n,h),f.push({event:S,listeners:O}),C?S.data=C:(C=ES(n),C!==null&&(S.data=C)))),(C=vD?xD(t,n):wD(t,n))&&(u=ah(u,"onBeforeInput"),0<u.length&&(h=new Ow("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=C))}OS(f,e)})}function Tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ah(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vc(t,n),i!=null&&r.unshift(Tc(t,i,s)),i=vc(t,e),i!=null&&r.push(Tc(t,i,s))),t=t.return}return r}function Vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=vc(n,i),c!=null&&o.unshift(Tc(n,c,l))):s||(c=vc(n,i),c!=null&&o.push(Tc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DD=/\r\n?/g,OD=/\u0000|\uFFFD/g;function Kw(t){return(typeof t=="string"?t:""+t).replace(DD,`
`).replace(OD,"")}function td(t,e,n){if(e=Kw(e),Kw(t)!==e&&n)throw Error(Y(425))}function lh(){}var yg=null,vg=null;function xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wg=typeof setTimeout=="function"?setTimeout:void 0,MD=typeof clearTimeout=="function"?clearTimeout:void 0,Qw=typeof Promise=="function"?Promise:void 0,LD=typeof queueMicrotask=="function"?queueMicrotask:typeof Qw<"u"?function(t){return Qw.resolve(null).then(t).catch(VD)}:wg;function VD(t){setTimeout(function(){throw t})}function ip(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_c(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_c(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nl=Math.random().toString(36).slice(2),jr="__reactFiber$"+nl,Cc="__reactProps$"+nl,ds="__reactContainer$"+nl,_g="__reactEvents$"+nl,FD="__reactListeners$"+nl,UD="__reactHandles$"+nl;function Xi(t){var e=t[jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ds]||n[jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xw(t);t!==null;){if(n=t[jr])return n;t=Xw(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[jr]||t[ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function pf(t){return t[Cc]||null}var bg=[],Zo=-1;function Ri(t){return{current:t}}function Ke(t){0>Zo||(t.current=bg[Zo],bg[Zo]=null,Zo--)}function Be(t,e){Zo++,bg[Zo]=t.current,t.current=e}var yi={},Kt=Ri(yi),yn=Ri(!1),co=yi;function ja(t,e){var n=t.type.contextTypes;if(!n)return yi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vn(t){return t=t.childContextTypes,t!=null}function ch(){Ke(yn),Ke(Kt)}function Yw(t,e,n){if(Kt.current!==yi)throw Error(Y(168));Be(Kt,e),Be(yn,n)}function LS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,Sj(t)||"Unknown",s));return tt({},n,r)}function uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,co=Kt.current,Be(Kt,t),Be(yn,yn.current),!0}function Jw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=LS(t,e,co),r.__reactInternalMemoizedMergedChildContext=t,Ke(yn),Ke(Kt),Be(Kt,t)):Ke(yn),Be(yn,n)}var es=null,gf=!1,op=!1;function VS(t){es===null?es=[t]:es.push(t)}function zD(t){gf=!0,VS(t)}function Pi(){if(!op&&es!==null){op=!0;var t=0,e=Ve;try{var n=es;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}es=null,gf=!1}catch(s){throw es!==null&&(es=es.slice(t+1)),cS(Jy,Pi),s}finally{Ve=e,op=!1}}return null}var ea=[],ta=0,dh=null,hh=0,Un=[],zn=0,uo=null,ts=1,ns="";function Gi(t,e){ea[ta++]=hh,ea[ta++]=dh,dh=t,hh=e}function FS(t,e,n){Un[zn++]=ts,Un[zn++]=ns,Un[zn++]=uo,uo=t;var r=ts;t=ns;var s=32-cr(r)-1;r&=~(1<<s),n+=1;var i=32-cr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ts=1<<32-cr(e)+s|n<<s|r,ns=i+t}else ts=1<<i|n<<s|r,ns=t}function av(t){t.return!==null&&(Gi(t,1),FS(t,1,0))}function lv(t){for(;t===dh;)dh=ea[--ta],ea[ta]=null,hh=ea[--ta],ea[ta]=null;for(;t===uo;)uo=Un[--zn],Un[zn]=null,ns=Un[--zn],Un[zn]=null,ts=Un[--zn],Un[zn]=null}var kn=null,An=null,Xe=!1,sr=null;function US(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,An=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uo!==null?{id:ts,overflow:ns}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,An=null,!0):!1;default:return!1}}function Eg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sg(t){if(Xe){var e=An;if(e){var n=e;if(!Zw(t,e)){if(Eg(t))throw Error(Y(418));e=ii(n.nextSibling);var r=kn;e&&Zw(t,e)?US(r,n):(t.flags=t.flags&-4097|2,Xe=!1,kn=t)}}else{if(Eg(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Xe=!1,kn=t}}}function e1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function nd(t){if(t!==kn)return!1;if(!Xe)return e1(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xg(t.type,t.memoizedProps)),e&&(e=An)){if(Eg(t))throw zS(),Error(Y(418));for(;e;)US(t,e),e=ii(e.nextSibling)}if(e1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=kn?ii(t.stateNode.nextSibling):null;return!0}function zS(){for(var t=An;t;)t=ii(t.nextSibling)}function Da(){An=kn=null,Xe=!1}function cv(t){sr===null?sr=[t]:sr.push(t)}var $D=ws.ReactCurrentBatchConfig;function Ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function rd(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t1(t){var e=t._init;return e(t._payload)}function $S(t){function e(_,v){if(t){var T=_.deletions;T===null?(_.deletions=[v],_.flags|=16):T.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=ci(_,v),_.index=0,_.sibling=null,_}function i(_,v,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<v?(_.flags|=2,v):T):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,v,T,k){return v===null||v.tag!==6?(v=fp(T,_.mode,k),v.return=_,v):(v=s(v,T),v.return=_,v)}function c(_,v,T,k){var j=T.type;return j===Ko?h(_,v,T.props.children,k,T.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ls&&t1(j)===v.type)?(k=s(v,T.props),k.ref=Ll(_,v,T),k.return=_,k):(k=Vd(T.type,T.key,T.props,null,_.mode,k),k.ref=Ll(_,v,T),k.return=_,k)}function u(_,v,T,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=mp(T,_.mode,k),v.return=_,v):(v=s(v,T.children||[]),v.return=_,v)}function h(_,v,T,k,j){return v===null||v.tag!==7?(v=oo(T,_.mode,k,j),v.return=_,v):(v=s(v,T),v.return=_,v)}function f(_,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fp(""+v,_.mode,T),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qu:return T=Vd(v.type,v.key,v.props,null,_.mode,T),T.ref=Ll(_,null,v),T.return=_,T;case Go:return v=mp(v,_.mode,T),v.return=_,v;case Ls:var k=v._init;return f(_,k(v._payload),T)}if(Bl(v)||Pl(v))return v=oo(v,_.mode,T,null),v.return=_,v;rd(_,v)}return null}function p(_,v,T,k){var j=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:l(_,v,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case qu:return T.key===j?c(_,v,T,k):null;case Go:return T.key===j?u(_,v,T,k):null;case Ls:return j=T._init,p(_,v,j(T._payload),k)}if(Bl(T)||Pl(T))return j!==null?null:h(_,v,T,k,null);rd(_,T)}return null}function x(_,v,T,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(T)||null,l(v,_,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case qu:return _=_.get(k.key===null?T:k.key)||null,c(v,_,k,j);case Go:return _=_.get(k.key===null?T:k.key)||null,u(v,_,k,j);case Ls:var O=k._init;return x(_,v,T,O(k._payload),j)}if(Bl(k)||Pl(k))return _=_.get(T)||null,h(v,_,k,j,null);rd(v,k)}return null}function b(_,v,T,k){for(var j=null,O=null,C=v,S=v=0,N=null;C!==null&&S<T.length;S++){C.index>S?(N=C,C=null):N=C.sibling;var I=p(_,C,T[S],k);if(I===null){C===null&&(C=N);break}t&&C&&I.alternate===null&&e(_,C),v=i(I,v,S),O===null?j=I:O.sibling=I,O=I,C=N}if(S===T.length)return n(_,C),Xe&&Gi(_,S),j;if(C===null){for(;S<T.length;S++)C=f(_,T[S],k),C!==null&&(v=i(C,v,S),O===null?j=C:O.sibling=C,O=C);return Xe&&Gi(_,S),j}for(C=r(_,C);S<T.length;S++)N=x(C,_,S,T[S],k),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?S:N.key),v=i(N,v,S),O===null?j=N:O.sibling=N,O=N);return t&&C.forEach(function(A){return e(_,A)}),Xe&&Gi(_,S),j}function y(_,v,T,k){var j=Pl(T);if(typeof j!="function")throw Error(Y(150));if(T=j.call(T),T==null)throw Error(Y(151));for(var O=j=null,C=v,S=v=0,N=null,I=T.next();C!==null&&!I.done;S++,I=T.next()){C.index>S?(N=C,C=null):N=C.sibling;var A=p(_,C,I.value,k);if(A===null){C===null&&(C=N);break}t&&C&&A.alternate===null&&e(_,C),v=i(A,v,S),O===null?j=A:O.sibling=A,O=A,C=N}if(I.done)return n(_,C),Xe&&Gi(_,S),j;if(C===null){for(;!I.done;S++,I=T.next())I=f(_,I.value,k),I!==null&&(v=i(I,v,S),O===null?j=I:O.sibling=I,O=I);return Xe&&Gi(_,S),j}for(C=r(_,C);!I.done;S++,I=T.next())I=x(C,_,S,I.value,k),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?S:I.key),v=i(I,v,S),O===null?j=I:O.sibling=I,O=I);return t&&C.forEach(function(D){return e(_,D)}),Xe&&Gi(_,S),j}function w(_,v,T,k){if(typeof T=="object"&&T!==null&&T.type===Ko&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case qu:e:{for(var j=T.key,O=v;O!==null;){if(O.key===j){if(j=T.type,j===Ko){if(O.tag===7){n(_,O.sibling),v=s(O,T.props.children),v.return=_,_=v;break e}}else if(O.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ls&&t1(j)===O.type){n(_,O.sibling),v=s(O,T.props),v.ref=Ll(_,O,T),v.return=_,_=v;break e}n(_,O);break}else e(_,O);O=O.sibling}T.type===Ko?(v=oo(T.props.children,_.mode,k,T.key),v.return=_,_=v):(k=Vd(T.type,T.key,T.props,null,_.mode,k),k.ref=Ll(_,v,T),k.return=_,_=k)}return o(_);case Go:e:{for(O=T.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(_,v.sibling),v=s(v,T.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=mp(T,_.mode,k),v.return=_,_=v}return o(_);case Ls:return O=T._init,w(_,v,O(T._payload),k)}if(Bl(T))return b(_,v,T,k);if(Pl(T))return y(_,v,T,k);rd(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,T),v.return=_,_=v):(n(_,v),v=fp(T,_.mode,k),v.return=_,_=v),o(_)):n(_,v)}return w}var Oa=$S(!0),BS=$S(!1),fh=Ri(null),mh=null,na=null,uv=null;function dv(){uv=na=mh=null}function hv(t){var e=fh.current;Ke(fh),t._currentValue=e}function Tg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function da(t,e){mh=t,uv=na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(uv!==t)if(t={context:t,memoizedValue:e,next:null},na===null){if(mh===null)throw Error(Y(308));na=t,mh.dependencies={lanes:0,firstContext:t}}else na=na.next=t;return e}var Yi=null;function fv(t){Yi===null?Yi=[t]:Yi.push(t)}function HS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fv(e)):(n.next=s.next,s.next=n),e.interleaved=n,hs(t,r)}function hs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vs=!1;function mv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function is(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hs(t,n)}return s=r.interleaved,s===null?(e.next=e,fv(r)):(e.next=s.next,s.next=e),r.interleaved=e,hs(t,n)}function Pd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zy(t,n)}}function n1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ph(t,e,n,r){var s=t.updateQueue;Vs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,x=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,y=l;switch(p=e,x=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(x,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,p=typeof b=="function"?b.call(x,f,p):b,p==null)break e;f=tt({},f,p);break e;case 2:Vs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else x={eventTime:x,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=x,c=f):h=h.next=x,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fo|=o,t.lanes=o,t.memoizedState=f}}function r1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var su={},Mr=Ri(su),Nc=Ri(su),Ic=Ri(su);function Ji(t){if(t===su)throw Error(Y(174));return t}function pv(t,e){switch(Be(Ic,e),Be(Nc,t),Be(Mr,su),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ig(e,t)}Ke(Mr),Be(Mr,e)}function Ma(){Ke(Mr),Ke(Nc),Ke(Ic)}function qS(t){Ji(Ic.current);var e=Ji(Mr.current),n=ig(e,t.type);e!==n&&(Be(Nc,t),Be(Mr,n))}function gv(t){Nc.current===t&&(Ke(Mr),Ke(Nc))}var Je=Ri(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ap=[];function yv(){for(var t=0;t<ap.length;t++)ap[t]._workInProgressVersionPrimary=null;ap.length=0}var jd=ws.ReactCurrentDispatcher,lp=ws.ReactCurrentBatchConfig,ho=0,et=null,xt=null,It=null,yh=!1,tc=!1,Ac=0,BD=0;function zt(){throw Error(Y(321))}function vv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function xv(t,e,n,r,s,i){if(ho=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jd.current=t===null||t.memoizedState===null?GD:KD,t=n(r,s),tc){i=0;do{if(tc=!1,Ac=0,25<=i)throw Error(Y(301));i+=1,It=xt=null,e.updateQueue=null,jd.current=QD,t=n(r,s)}while(tc)}if(jd.current=vh,e=xt!==null&&xt.next!==null,ho=0,It=xt=et=null,yh=!1,e)throw Error(Y(300));return t}function wv(){var t=Ac!==0;return Ac=0,t}function Ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?et.memoizedState=It=t:It=It.next=t,It}function Gn(){if(xt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=It===null?et.memoizedState:It.next;if(e!==null)It=e,xt=t;else{if(t===null)throw Error(Y(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},It===null?et.memoizedState=It=t:It=It.next=t}return It}function kc(t,e){return typeof e=="function"?e(t):e}function cp(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((ho&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,et.lanes|=h,fo|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,mr(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,et.lanes|=i,fo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function up(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mr(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function GS(){}function KS(t,e){var n=et,r=Gn(),s=e(),i=!mr(r.memoizedState,s);if(i&&(r.memoizedState=s,gn=!0),r=r.queue,_v(YS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Rc(9,XS.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(Y(349));ho&30||QS(n,e,s)}return s}function QS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XS(t,e,n,r){e.value=n,e.getSnapshot=r,JS(e)&&ZS(t)}function YS(t,e,n){return n(function(){JS(e)&&ZS(t)})}function JS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function ZS(t){var e=hs(t,1);e!==null&&ur(e,t,1,-1)}function s1(t){var e=Ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:t},e.queue=t,t=t.dispatch=qD.bind(null,et,t),[e.memoizedState,t]}function Rc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eT(){return Gn().memoizedState}function Dd(t,e,n,r){var s=Ir();et.flags|=t,s.memoizedState=Rc(1|e,n,void 0,r===void 0?null:r)}function yf(t,e,n,r){var s=Gn();r=r===void 0?null:r;var i=void 0;if(xt!==null){var o=xt.memoizedState;if(i=o.destroy,r!==null&&vv(r,o.deps)){s.memoizedState=Rc(e,n,i,r);return}}et.flags|=t,s.memoizedState=Rc(1|e,n,i,r)}function i1(t,e){return Dd(8390656,8,t,e)}function _v(t,e){return yf(2048,8,t,e)}function tT(t,e){return yf(4,2,t,e)}function nT(t,e){return yf(4,4,t,e)}function rT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sT(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,rT.bind(null,e,t),n)}function bv(){}function iT(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oT(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aT(t,e,n){return ho&21?(mr(n,e)||(n=hS(),et.lanes|=n,fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function HD(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=lp.transition;lp.transition={};try{t(!1),e()}finally{Ve=n,lp.transition=r}}function lT(){return Gn().memoizedState}function WD(t,e,n){var r=li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cT(t))uT(e,n);else if(n=HS(t,e,n,r),n!==null){var s=en();ur(n,t,r,s),dT(n,e,r)}}function qD(t,e,n){var r=li(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cT(t))uT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,mr(l,o)){var c=e.interleaved;c===null?(s.next=s,fv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HS(t,e,s,r),n!==null&&(s=en(),ur(n,t,r,s),dT(n,e,r))}}function cT(t){var e=t.alternate;return t===et||e!==null&&e===et}function uT(t,e){tc=yh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zy(t,n)}}var vh={readContext:qn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},GD={readContext:qn,useCallback:function(t,e){return Ir().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:i1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dd(4194308,4,rT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dd(4,2,t,e)},useMemo:function(t,e){var n=Ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WD.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=Ir();return t={current:t},e.memoizedState=t},useState:s1,useDebugValue:bv,useDeferredValue:function(t){return Ir().memoizedState=t},useTransition:function(){var t=s1(!1),e=t[0];return t=HD.bind(null,t[1]),Ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,s=Ir();if(Xe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Rt===null)throw Error(Y(349));ho&30||QS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,i1(YS.bind(null,r,i,t),[t]),r.flags|=2048,Rc(9,XS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ir(),e=Rt.identifierPrefix;if(Xe){var n=ns,r=ts;n=(r&~(1<<32-cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KD={readContext:qn,useCallback:iT,useContext:qn,useEffect:_v,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:cp,useRef:eT,useState:function(){return cp(kc)},useDebugValue:bv,useDeferredValue:function(t){var e=Gn();return aT(e,xt.memoizedState,t)},useTransition:function(){var t=cp(kc)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:GS,useSyncExternalStore:KS,useId:lT,unstable_isNewReconciler:!1},QD={readContext:qn,useCallback:iT,useContext:qn,useEffect:_v,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:up,useRef:eT,useState:function(){return up(kc)},useDebugValue:bv,useDeferredValue:function(t){var e=Gn();return xt===null?e.memoizedState=t:aT(e,xt.memoizedState,t)},useTransition:function(){var t=up(kc)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:GS,useSyncExternalStore:KS,useId:lT,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vf={isMounted:function(t){return(t=t._reactInternals)?No(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),s=li(t),i=is(r,s);i.payload=e,n!=null&&(i.callback=n),e=oi(t,i,s),e!==null&&(ur(e,t,s,r),Pd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),s=li(t),i=is(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=oi(t,i,s),e!==null&&(ur(e,t,s,r),Pd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=li(t),s=is(n,r);s.tag=2,e!=null&&(s.callback=e),e=oi(t,s,r),e!==null&&(ur(e,t,r,n),Pd(e,t,r))}};function o1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ec(n,r)||!Ec(s,i):!0}function hT(t,e,n){var r=!1,s=yi,i=e.contextType;return typeof i=="object"&&i!==null?i=qn(i):(s=vn(e)?co:Kt.current,r=e.contextTypes,i=(r=r!=null)?ja(t,s):yi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function a1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vf.enqueueReplaceState(e,e.state,null)}function Ng(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qn(i):(i=vn(e)?co:Kt.current,s.context=ja(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Cg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vf.enqueueReplaceState(s,s.state,null),ph(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function La(t,e){try{var n="",r=e;do n+=Ej(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ig(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XD=typeof WeakMap=="function"?WeakMap:Map;function fT(t,e,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wh||(wh=!0,Vg=r),Ig(t,e)},n}function mT(t,e,n){n=is(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ig(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ig(t,e),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function l1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=u4.bind(null,t,e,n),e.then(t,t))}function c1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=is(-1,1),e.tag=2,oi(n,e,1))),n.lanes|=1),t)}var YD=ws.ReactCurrentOwner,gn=!1;function Jt(t,e,n,r){e.child=t===null?BS(e,null,n,r):Oa(e,t.child,n,r)}function d1(t,e,n,r,s){n=n.render;var i=e.ref;return da(e,s),r=xv(t,e,n,r,i,s),n=wv(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fs(t,e,s)):(Xe&&n&&av(e),e.flags|=1,Jt(t,e,r,s),e.child)}function h1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pT(t,e,i,r,s)):(t=Vd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ec,n(o,r)&&t.ref===e.ref)return fs(t,e,s)}return e.flags|=1,t=ci(i,r),t.ref=e.ref,t.return=e,e.child=t}function pT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ec(i,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,fs(t,e,s)}return Ag(t,e,n,r,s)}function gT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(sa,Tn),Tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(sa,Tn),Tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Be(sa,Tn),Tn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Be(sa,Tn),Tn|=r;return Jt(t,e,s,n),e.child}function yT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ag(t,e,n,r,s){var i=vn(n)?co:Kt.current;return i=ja(e,i),da(e,s),n=xv(t,e,n,r,i,s),r=wv(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fs(t,e,s)):(Xe&&r&&av(e),e.flags|=1,Jt(t,e,n,s),e.child)}function f1(t,e,n,r,s){if(vn(n)){var i=!0;uh(e)}else i=!1;if(da(e,s),e.stateNode===null)Od(t,e),hT(e,n,r),Ng(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qn(u):(u=vn(n)?co:Kt.current,u=ja(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&a1(e,o,r,u),Vs=!1;var p=e.memoizedState;o.state=p,ph(e,r,o,s),c=e.memoizedState,l!==r||p!==c||yn.current||Vs?(typeof h=="function"&&(Cg(e,n,h,r),c=e.memoizedState),(l=Vs||o1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WS(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Zn(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qn(c):(c=vn(n)?co:Kt.current,c=ja(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&a1(e,o,r,c),Vs=!1,p=e.memoizedState,o.state=p,ph(e,r,o,s);var b=e.memoizedState;l!==f||p!==b||yn.current||Vs?(typeof x=="function"&&(Cg(e,n,x,r),b=e.memoizedState),(u=Vs||o1(e,n,u,r,p,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return kg(t,e,n,r,i,s)}function kg(t,e,n,r,s,i){yT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Jw(e,n,!1),fs(t,e,i);r=e.stateNode,YD.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oa(e,t.child,null,i),e.child=Oa(e,null,l,i)):Jt(t,e,l,i),e.memoizedState=r.state,s&&Jw(e,n,!0),e.child}function vT(t){var e=t.stateNode;e.pendingContext?Yw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yw(t,e.context,!1),pv(t,e.containerInfo)}function m1(t,e,n,r,s){return Da(),cv(s),e.flags|=256,Jt(t,e,n,r),e.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function Pg(t){return{baseLanes:t,cachePool:null,transitions:null}}function xT(t,e,n){var r=e.pendingProps,s=Je.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Je,s&1),t===null)return Sg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_f(o,r,0,null),t=oo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pg(n),e.memoizedState=Rg,t):Ev(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return JD(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ci(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ci(l,i):(i=oo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rg,r}return i=t.child,t=i.sibling,r=ci(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ev(t,e){return e=_f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sd(t,e,n,r){return r!==null&&cv(r),Oa(e,t.child,null,n),t=Ev(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dp(Error(Y(422))),sd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_f({mode:"visible",children:r.children},s,0,null),i=oo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oa(e,t.child,null,o),e.child.memoizedState=Pg(o),e.memoizedState=Rg,i);if(!(e.mode&1))return sd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Y(419)),r=dp(i,r,void 0),sd(t,e,o,r)}if(l=(o&t.childLanes)!==0,gn||l){if(r=Rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hs(t,s),ur(r,t,s,-1))}return Av(),r=dp(Error(Y(421))),sd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=d4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,An=ii(s.nextSibling),kn=e,Xe=!0,sr=null,t!==null&&(Un[zn++]=ts,Un[zn++]=ns,Un[zn++]=uo,ts=t.id,ns=t.overflow,uo=e),e=Ev(e,r.children),e.flags|=4096,e)}function p1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tg(t.return,e,n)}function hp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Jt(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p1(t,n,e);else if(t.tag===19)p1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hp(e,!0,n,null,i);break;case"together":hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Od(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZD(t,e,n){switch(e.tag){case 3:vT(e),Da();break;case 5:qS(e);break;case 1:vn(e.type)&&uh(e);break;case 4:pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Be(fh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?xT(t,e,n):(Be(Je,Je.current&1),t=fs(t,e,n),t!==null?t.sibling:null);Be(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,gT(t,e,n)}return fs(t,e,n)}var _T,jg,bT,ET;_T=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jg=function(){};bT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ji(Mr.current);var i=null;switch(n){case"input":s=tg(t,s),r=tg(t,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=sg(t,s),r=sg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lh)}og(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ET=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vl(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function e4(t,e,n){var r=e.pendingProps;switch(lv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return vn(e.type)&&ch(),$t(e),null;case 3:return r=e.stateNode,Ma(),Ke(yn),Ke(Kt),yv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(zg(sr),sr=null))),jg(t,e),$t(e),null;case 5:gv(e);var s=Ji(Ic.current);if(n=e.type,t!==null&&e.stateNode!=null)bT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return $t(e),null}if(t=Ji(Mr.current),nd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jr]=e,r[Cc]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<Wl.length;s++)Ge(Wl[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Sw(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":Cw(r,i),Ge("invalid",r)}og(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&td(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&td(r.textContent,l,t),s=["children",""+l]):gc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Gu(r),Tw(r,i,!0);break;case"textarea":Gu(r),Nw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jr]=e,t[Cc]=r,_T(t,e,!1,!1),e.stateNode=t;e:{switch(o=ag(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wl.length;s++)Ge(Wl[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":Sw(t,r),s=tg(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":Cw(t,r),s=sg(t,r),Ge("invalid",t);break;default:s=r}og(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?eS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yc(t,c):typeof c=="number"&&yc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&Gy(t,i,c,o))}switch(n){case"input":Gu(t),Tw(t,r,!1);break;case"textarea":Gu(t),Nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?aa(t,!!r.multiple,i,!1):r.defaultValue!=null&&aa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)ET(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ji(Ic.current),Ji(Mr.current),nd(e)){if(r=e.stateNode,n=e.memoizedProps,r[jr]=e,(i=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:td(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&td(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=e,e.stateNode=r}return $t(e),null;case 13:if(Ke(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&An!==null&&e.mode&1&&!(e.flags&128))zS(),Da(),e.flags|=98560,i=!1;else if(i=nd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[jr]=e}else Da(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else sr!==null&&(zg(sr),sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?bt===0&&(bt=3):Av())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Ma(),jg(t,e),t===null&&Sc(e.stateNode.containerInfo),$t(e),null;case 10:return hv(e.type._context),$t(e),null;case 17:return vn(e.type)&&ch(),$t(e),null;case 19:if(Ke(Je),i=e.memoizedState,i===null)return $t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vl(i,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gh(t),o!==null){for(e.flags|=128,Vl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Je,Je.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Va&&(e.flags|=128,r=!0,Vl(i,!1),e.lanes=4194304)}else{if(!r)if(t=gh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Xe)return $t(e),null}else 2*ct()-i.renderingStartTime>Va&&n!==1073741824&&(e.flags|=128,r=!0,Vl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=Je.current,Be(Je,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return Iv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function t4(t,e){switch(lv(e),e.tag){case 1:return vn(e.type)&&ch(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Ke(yn),Ke(Kt),yv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gv(e),null;case 13:if(Ke(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Da()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Je),null;case 4:return Ma(),null;case 10:return hv(e.type._context),null;case 22:case 23:return Iv(),null;case 24:return null;default:return null}}var id=!1,qt=!1,n4=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function Dg(t,e,n){try{n()}catch(r){it(t,e,r)}}var g1=!1;function r4(t,e){if(yg=ih,t=IS(),ov(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)p=f,f=x;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(x=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vg={focusedElem:t,selectionRange:n},ih=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,w=b.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:Zn(e.type,y),w);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(k){it(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return b=g1,g1=!1,b}function nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dg(e,n,i)}s=s.next}while(s!==r)}}function xf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ST(t){var e=t.alternate;e!==null&&(t.alternate=null,ST(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jr],delete e[Cc],delete e[_g],delete e[FD],delete e[UD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TT(t){return t.tag===5||t.tag===3||t.tag===4}function y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lh));else if(r!==4&&(t=t.child,t!==null))for(Mg(t,e,n),t=t.sibling;t!==null;)Mg(t,e,n),t=t.sibling}function Lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}var Dt=null,nr=!1;function Rs(t,e,n){for(n=n.child;n!==null;)CT(t,e,n),n=n.sibling}function CT(t,e,n){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(df,n)}catch{}switch(n.tag){case 5:qt||ra(n,e);case 6:var r=Dt,s=nr;Dt=null,Rs(t,e,n),Dt=r,nr=s,Dt!==null&&(nr?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(nr?(t=Dt,n=n.stateNode,t.nodeType===8?ip(t.parentNode,n):t.nodeType===1&&ip(t,n),_c(t)):ip(Dt,n.stateNode));break;case 4:r=Dt,s=nr,Dt=n.stateNode.containerInfo,nr=!0,Rs(t,e,n),Dt=r,nr=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dg(n,e,o),s=s.next}while(s!==r)}Rs(t,e,n);break;case 1:if(!qt&&(ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){it(n,e,l)}Rs(t,e,n);break;case 21:Rs(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,Rs(t,e,n),qt=r):Rs(t,e,n);break;default:Rs(t,e,n)}}function v1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new n4),e.forEach(function(r){var s=h4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Dt=l.stateNode,nr=!1;break e;case 3:Dt=l.stateNode.containerInfo,nr=!0;break e;case 4:Dt=l.stateNode.containerInfo,nr=!0;break e}l=l.return}if(Dt===null)throw Error(Y(160));CT(i,o,s),Dt=null,nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){it(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NT(e,t),e=e.sibling}function NT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),Cr(t),r&4){try{nc(3,t,t.return),xf(3,t)}catch(y){it(t,t.return,y)}try{nc(5,t,t.return)}catch(y){it(t,t.return,y)}}break;case 1:Yn(e,t),Cr(t),r&512&&n!==null&&ra(n,n.return);break;case 5:if(Yn(e,t),Cr(t),r&512&&n!==null&&ra(n,n.return),t.flags&32){var s=t.stateNode;try{yc(s,"")}catch(y){it(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&QE(s,i),ag(l,o);var u=ag(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?eS(s,f):h==="dangerouslySetInnerHTML"?JE(s,f):h==="children"?yc(s,f):Gy(s,h,f,u)}switch(l){case"input":ng(s,i);break;case"textarea":XE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?aa(s,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?aa(s,!!i.multiple,i.defaultValue,!0):aa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cc]=i}catch(y){it(t,t.return,y)}}break;case 6:if(Yn(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){it(t,t.return,y)}}break;case 3:if(Yn(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_c(e.containerInfo)}catch(y){it(t,t.return,y)}break;case 4:Yn(e,t),Cr(t);break;case 13:Yn(e,t),Cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cv=ct())),r&4&&v1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(u=qt)||h,Yn(e,t),qt=u):Yn(e,t),Cr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(p=ae,x=p.child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:ra(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){it(r,n,y)}}break;case 5:ra(p,p.return);break;case 22:if(p.memoizedState!==null){w1(f);continue}}x!==null?(x.return=p,ae=x):w1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ZE("display",o))}catch(y){it(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){it(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yn(e,t),Cr(t),r&4&&v1(t);break;case 21:break;default:Yn(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TT(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yc(s,""),r.flags&=-33);var i=y1(t);Lg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=y1(t);Mg(t,l,o);break;default:throw Error(Y(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s4(t,e,n){ae=t,IT(t)}function IT(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||id;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qt;l=id;var u=qt;if(id=o,(qt=c)&&!u)for(ae=s;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?_1(s):c!==null?(c.return=o,ae=c):_1(s);for(;i!==null;)ae=i,IT(i),i=i.sibling;ae=s,id=l,qt=u}x1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):x1(t)}}function x1(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||xf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&r1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_c(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}qt||e.flags&512&&Og(e)}catch(p){it(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function w1(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function _1(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xf(4,e)}catch(c){it(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){it(e,s,c)}}var i=e.return;try{Og(e)}catch(c){it(e,i,c)}break;case 5:var o=e.return;try{Og(e)}catch(c){it(e,o,c)}}}catch(c){it(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var i4=Math.ceil,xh=ws.ReactCurrentDispatcher,Sv=ws.ReactCurrentOwner,Wn=ws.ReactCurrentBatchConfig,Re=0,Rt=null,ft=null,Mt=0,Tn=0,sa=Ri(0),bt=0,Pc=null,fo=0,wf=0,Tv=0,rc=null,mn=null,Cv=0,Va=1/0,Jr=null,wh=!1,Vg=null,ai=null,od=!1,Ys=null,_h=0,sc=0,Fg=null,Md=-1,Ld=0;function en(){return Re&6?ct():Md!==-1?Md:Md=ct()}function li(t){return t.mode&1?Re&2&&Mt!==0?Mt&-Mt:$D.transition!==null?(Ld===0&&(Ld=hS()),Ld):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:xS(t.type)),t):1}function ur(t,e,n,r){if(50<sc)throw sc=0,Fg=null,Error(Y(185));tu(t,n,r),(!(Re&2)||t!==Rt)&&(t===Rt&&(!(Re&2)&&(wf|=n),bt===4&&zs(t,Mt)),xn(t,r),n===1&&Re===0&&!(e.mode&1)&&(Va=ct()+500,gf&&Pi()))}function xn(t,e){var n=t.callbackNode;$j(t,e);var r=sh(t,t===Rt?Mt:0);if(r===0)n!==null&&kw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kw(n),e===1)t.tag===0?zD(b1.bind(null,t)):VS(b1.bind(null,t)),LD(function(){!(Re&6)&&Pi()}),n=null;else{switch(fS(r)){case 1:n=Jy;break;case 4:n=uS;break;case 16:n=rh;break;case 536870912:n=dS;break;default:n=rh}n=MT(n,AT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AT(t,e){if(Md=-1,Ld=0,Re&6)throw Error(Y(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var r=sh(t,t===Rt?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bh(t,r);else{e=r;var s=Re;Re|=2;var i=RT();(Rt!==t||Mt!==e)&&(Jr=null,Va=ct()+500,io(t,e));do try{l4();break}catch(l){kT(t,l)}while(!0);dv(),xh.current=i,Re=s,ft!==null?e=0:(Rt=null,Mt=0,e=bt)}if(e!==0){if(e===2&&(s=hg(t),s!==0&&(r=s,e=Ug(t,s))),e===1)throw n=Pc,io(t,0),zs(t,r),xn(t,ct()),n;if(e===6)zs(t,r);else{if(s=t.current.alternate,!(r&30)&&!o4(s)&&(e=bh(t,r),e===2&&(i=hg(t),i!==0&&(r=i,e=Ug(t,i))),e===1))throw n=Pc,io(t,0),zs(t,r),xn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Ki(t,mn,Jr);break;case 3:if(zs(t,r),(r&130023424)===r&&(e=Cv+500-ct(),10<e)){if(sh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wg(Ki.bind(null,t,mn,Jr),e);break}Ki(t,mn,Jr);break;case 4:if(zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-cr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i4(r/1960))-r,10<r){t.timeoutHandle=wg(Ki.bind(null,t,mn,Jr),r);break}Ki(t,mn,Jr);break;case 5:Ki(t,mn,Jr);break;default:throw Error(Y(329))}}}return xn(t,ct()),t.callbackNode===n?AT.bind(null,t):null}function Ug(t,e){var n=rc;return t.current.memoizedState.isDehydrated&&(io(t,e).flags|=256),t=bh(t,e),t!==2&&(e=mn,mn=n,e!==null&&zg(e)),t}function zg(t){mn===null?mn=t:mn.push.apply(mn,t)}function o4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~Tv,e&=~wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cr(e),r=1<<n;t[n]=-1,e&=~r}}function b1(t){if(Re&6)throw Error(Y(327));ha();var e=sh(t,0);if(!(e&1))return xn(t,ct()),null;var n=bh(t,e);if(t.tag!==0&&n===2){var r=hg(t);r!==0&&(e=r,n=Ug(t,r))}if(n===1)throw n=Pc,io(t,0),zs(t,e),xn(t,ct()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ki(t,mn,Jr),xn(t,ct()),null}function Nv(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Va=ct()+500,gf&&Pi())}}function mo(t){Ys!==null&&Ys.tag===0&&!(Re&6)&&ha();var e=Re;Re|=1;var n=Wn.transition,r=Ve;try{if(Wn.transition=null,Ve=1,t)return t()}finally{Ve=r,Wn.transition=n,Re=e,!(Re&6)&&Pi()}}function Iv(){Tn=sa.current,Ke(sa)}function io(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MD(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ch();break;case 3:Ma(),Ke(yn),Ke(Kt),yv();break;case 5:gv(r);break;case 4:Ma();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:hv(r.type._context);break;case 22:case 23:Iv()}n=n.return}if(Rt=t,ft=t=ci(t.current,null),Mt=Tn=e,bt=0,Pc=null,Tv=wf=fo=0,mn=rc=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yi=null}return t}function kT(t,e){do{var n=ft;try{if(dv(),jd.current=vh,yh){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yh=!1}if(ho=0,It=xt=et=null,tc=!1,Ac=0,Sv.current=null,n===null||n.return===null){bt=1,Pc=e,ft=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=c1(o);if(x!==null){x.flags&=-257,u1(x,o,l,i,e),x.mode&1&&l1(i,u,e),e=x,c=u;var b=e.updateQueue;if(b===null){var y=new Set;y.add(c),e.updateQueue=y}else b.add(c);break e}else{if(!(e&1)){l1(i,u,e),Av();break e}c=Error(Y(426))}}else if(Xe&&l.mode&1){var w=c1(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),u1(w,o,l,i,e),cv(La(c,l));break e}}i=c=La(c,l),bt!==4&&(bt=2),rc===null?rc=[i]:rc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=fT(i,c,e);n1(i,_);break e;case 1:l=c;var v=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ai===null||!ai.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=mT(i,l,e);n1(i,k);break e}}i=i.return}while(i!==null)}jT(n)}catch(j){e=j,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function RT(){var t=xh.current;return xh.current=vh,t===null?vh:t}function Av(){(bt===0||bt===3||bt===2)&&(bt=4),Rt===null||!(fo&268435455)&&!(wf&268435455)||zs(Rt,Mt)}function bh(t,e){var n=Re;Re|=2;var r=RT();(Rt!==t||Mt!==e)&&(Jr=null,io(t,e));do try{a4();break}catch(s){kT(t,s)}while(!0);if(dv(),Re=n,xh.current=r,ft!==null)throw Error(Y(261));return Rt=null,Mt=0,bt}function a4(){for(;ft!==null;)PT(ft)}function l4(){for(;ft!==null&&!jj();)PT(ft)}function PT(t){var e=OT(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,e===null?jT(t):ft=e,Sv.current=null}function jT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=t4(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,ft=null;return}}else if(n=e4(n,e,Tn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);bt===0&&(bt=5)}function Ki(t,e,n){var r=Ve,s=Wn.transition;try{Wn.transition=null,Ve=1,c4(t,e,n,r)}finally{Wn.transition=s,Ve=r}return null}function c4(t,e,n,r){do ha();while(Ys!==null);if(Re&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Bj(t,i),t===Rt&&(ft=Rt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||od||(od=!0,MT(rh,function(){return ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wn.transition,Wn.transition=null;var o=Ve;Ve=1;var l=Re;Re|=4,Sv.current=null,r4(t,n),NT(n,t),AD(vg),ih=!!yg,vg=yg=null,t.current=n,s4(n),Dj(),Re=l,Ve=o,Wn.transition=i}else t.current=n;if(od&&(od=!1,Ys=t,_h=s),i=t.pendingLanes,i===0&&(ai=null),Lj(n.stateNode),xn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wh)throw wh=!1,t=Vg,Vg=null,t;return _h&1&&t.tag!==0&&ha(),i=t.pendingLanes,i&1?t===Fg?sc++:(sc=0,Fg=t):sc=0,Pi(),null}function ha(){if(Ys!==null){var t=fS(_h),e=Wn.transition,n=Ve;try{if(Wn.transition=null,Ve=16>t?16:t,Ys===null)var r=!1;else{if(t=Ys,Ys=null,_h=0,Re&6)throw Error(Y(331));var s=Re;for(Re|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:nc(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var p=h.sibling,x=h.return;if(ST(h),h===u){ae=null;break}if(p!==null){p.return=x,ae=p;break}ae=x}}}var b=i.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ae=_;break e}ae=i.return}}var v=t.current;for(ae=v;ae!==null;){o=ae;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ae=T;else e:for(o=v;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xf(9,l)}}catch(j){it(l,l.return,j)}if(l===o){ae=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ae=k;break e}ae=l.return}}if(Re=s,Pi(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(df,t)}catch{}r=!0}return r}finally{Ve=n,Wn.transition=e}}return!1}function E1(t,e,n){e=La(n,e),e=fT(t,e,1),t=oi(t,e,1),e=en(),t!==null&&(tu(t,1,e),xn(t,e))}function it(t,e,n){if(t.tag===3)E1(t,t,n);else for(;e!==null;){if(e.tag===3){E1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){t=La(n,t),t=mT(e,t,1),e=oi(e,t,1),t=en(),e!==null&&(tu(e,1,t),xn(e,t));break}}e=e.return}}function u4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Mt&n)===n&&(bt===4||bt===3&&(Mt&130023424)===Mt&&500>ct()-Cv?io(t,0):Tv|=n),xn(t,e)}function DT(t,e){e===0&&(t.mode&1?(e=Xu,Xu<<=1,!(Xu&130023424)&&(Xu=4194304)):e=1);var n=en();t=hs(t,e),t!==null&&(tu(t,e,n),xn(t,n))}function d4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DT(t,n)}function h4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),DT(t,n)}var OT;OT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,ZD(t,e,n);gn=!!(t.flags&131072)}else gn=!1,Xe&&e.flags&1048576&&FS(e,hh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Od(t,e),t=e.pendingProps;var s=ja(e,Kt.current);da(e,n),s=xv(null,e,r,t,s,n);var i=wv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(i=!0,uh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mv(e),s.updater=vf,e.stateNode=s,s._reactInternals=e,Ng(e,r,t,n),e=kg(null,e,r,!0,i,n)):(e.tag=0,Xe&&i&&av(e),Jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Od(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=m4(r),t=Zn(r,t),s){case 0:e=Ag(null,e,r,t,n);break e;case 1:e=f1(null,e,r,t,n);break e;case 11:e=d1(null,e,r,t,n);break e;case 14:e=h1(null,e,r,Zn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Ag(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),f1(t,e,r,s,n);case 3:e:{if(vT(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,WS(t,e),ph(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=La(Error(Y(423)),e),e=m1(t,e,r,n,s);break e}else if(r!==s){s=La(Error(Y(424)),e),e=m1(t,e,r,n,s);break e}else for(An=ii(e.stateNode.containerInfo.firstChild),kn=e,Xe=!0,sr=null,n=BS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Da(),r===s){e=fs(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return qS(e),t===null&&Sg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xg(r,s)?o=null:i!==null&&xg(r,i)&&(e.flags|=32),yT(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&Sg(e),null;case 13:return xT(t,e,n);case 4:return pv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oa(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),d1(t,e,r,s,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Be(fh,r._currentValue),r._currentValue=o,i!==null)if(mr(i.value,o)){if(i.children===s.children&&!yn.current){e=fs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=is(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Tg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,da(e,n),s=qn(s),r=r(s),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,s=Zn(r,e.pendingProps),s=Zn(r.type,s),h1(t,e,r,s,n);case 15:return pT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Od(t,e),e.tag=1,vn(r)?(t=!0,uh(e)):t=!1,da(e,n),hT(e,r,s),Ng(e,r,s,n),kg(null,e,r,!0,t,n);case 19:return wT(t,e,n);case 22:return gT(t,e,n)}throw Error(Y(156,e.tag))};function MT(t,e){return cS(t,e)}function f4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new f4(t,e,n,r)}function kv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m4(t){if(typeof t=="function")return kv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qy)return 11;if(t===Xy)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ko:return oo(n.children,s,i,e);case Ky:o=8,s|=8;break;case Yp:return t=Bn(12,n,e,s|2),t.elementType=Yp,t.lanes=i,t;case Jp:return t=Bn(13,n,e,s),t.elementType=Jp,t.lanes=i,t;case Zp:return t=Bn(19,n,e,s),t.elementType=Zp,t.lanes=i,t;case qE:return _f(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HE:o=10;break e;case WE:o=9;break e;case Qy:o=11;break e;case Xy:o=14;break e;case Ls:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function oo(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function _f(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=qE,t.lanes=n,t.stateNode={isHidden:!1},t}function fp(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function mp(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Km(0),this.expirationTimes=Km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Km(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rv(t,e,n,r,s,i,o,l,c){return t=new p4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(i),t}function g4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Go,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LT(t){if(!t)return yi;t=t._reactInternals;e:{if(No(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(vn(n))return LS(t,n,e)}return e}function VT(t,e,n,r,s,i,o,l,c){return t=Rv(n,r,!0,t,s,i,o,l,c),t.context=LT(null),n=t.current,r=en(),s=li(n),i=is(r,s),i.callback=e??null,oi(n,i,s),t.current.lanes=s,tu(t,s,r),xn(t,r),t}function bf(t,e,n,r){var s=e.current,i=en(),o=li(s);return n=LT(n),e.context===null?e.context=n:e.pendingContext=n,e=is(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oi(s,e,o),t!==null&&(ur(t,s,o,i),Pd(t,s,o)),o}function Eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pv(t,e){S1(t,e),(t=t.alternate)&&S1(t,e)}function y4(){return null}var FT=typeof reportError=="function"?reportError:function(t){console.error(t)};function jv(t){this._internalRoot=t}Ef.prototype.render=jv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));bf(t,e,null,null)};Ef.prototype.unmount=jv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mo(function(){bf(null,t,null,null)}),e[ds]=null}};function Ef(t){this._internalRoot=t}Ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=gS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Us.length&&e!==0&&e<Us[n].priority;n++);Us.splice(n,0,t),n===0&&vS(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T1(){}function v4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Eh(o);i.call(u)}}var o=VT(e,r,t,0,null,!1,!1,"",T1);return t._reactRootContainer=o,t[ds]=o.current,Sc(t.nodeType===8?t.parentNode:t),mo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Eh(c);l.call(u)}}var c=Rv(t,0,!1,null,null,!1,!1,"",T1);return t._reactRootContainer=c,t[ds]=c.current,Sc(t.nodeType===8?t.parentNode:t),mo(function(){bf(e,c,n,r)}),c}function Tf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Eh(o);l.call(c)}}bf(e,o,t,s)}else o=v4(n,e,t,s,r);return Eh(o)}mS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hl(e.pendingLanes);n!==0&&(Zy(e,n|1),xn(e,ct()),!(Re&6)&&(Va=ct()+500,Pi()))}break;case 13:mo(function(){var r=hs(t,1);if(r!==null){var s=en();ur(r,t,1,s)}}),Pv(t,1)}};ev=function(t){if(t.tag===13){var e=hs(t,134217728);if(e!==null){var n=en();ur(e,t,134217728,n)}Pv(t,134217728)}};pS=function(t){if(t.tag===13){var e=li(t),n=hs(t,e);if(n!==null){var r=en();ur(n,t,e,r)}Pv(t,e)}};gS=function(){return Ve};yS=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};cg=function(t,e,n){switch(e){case"input":if(ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pf(r);if(!s)throw Error(Y(90));KE(r),ng(r,s)}}}break;case"textarea":XE(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};rS=Nv;sS=mo;var x4={usingClientEntryPoint:!1,Events:[ru,Jo,pf,tS,nS,Nv]},Fl={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w4={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aS(t),t===null?null:t.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{df=ad.inject(w4),Or=ad}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x4;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error(Y(200));return g4(t,e,null,n)};Dn.createRoot=function(t,e){if(!Dv(t))throw Error(Y(299));var n=!1,r="",s=FT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rv(t,1,!1,null,null,n,!1,r,s),t[ds]=e.current,Sc(t.nodeType===8?t.parentNode:t),new jv(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=aS(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return mo(t)};Dn.hydrate=function(t,e,n){if(!Sf(e))throw Error(Y(200));return Tf(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=FT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=VT(e,null,t,1,n??null,s,!1,i,o),t[ds]=e.current,Sc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ef(e)};Dn.render=function(t,e,n){if(!Sf(e))throw Error(Y(200));return Tf(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Sf(t))throw Error(Y(40));return t._reactRootContainer?(mo(function(){Tf(null,null,t,!1,function(){t._reactRootContainer=null,t[ds]=null})}),!0):!1};Dn.unstable_batchedUpdates=Nv;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Tf(t,e,n,!1,r)};Dn.version="18.3.1-next-f1338f8080-20240426";function UT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UT)}catch(t){console.error(t)}}UT(),UE.exports=Dn;var Hn=UE.exports;const _4=NE(Hn);var zT,C1=Hn;zT=C1.createRoot,C1.hydrateRoot;function b4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var $T={exports:{}},BT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=m;function E4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var S4=typeof Object.is=="function"?Object.is:E4,T4=Fa.useState,C4=Fa.useEffect,N4=Fa.useLayoutEffect,I4=Fa.useDebugValue;function A4(t,e){var n=e(),r=T4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return N4(function(){s.value=n,s.getSnapshot=e,pp(s)&&i({inst:s})},[t,n,e]),C4(function(){return pp(s)&&i({inst:s}),t(function(){pp(s)&&i({inst:s})})},[t]),I4(n),n}function pp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!S4(t,n)}catch{return!0}}function k4(t,e){return e()}var R4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?k4:A4;BT.useSyncExternalStore=Fa.useSyncExternalStore!==void 0?Fa.useSyncExternalStore:R4;$T.exports=BT;var P4=$T.exports;const j4=VE.useInsertionEffect,D4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O4=D4?m.useLayoutEffect:m.useEffect,M4=j4||O4,HT=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return M4(()=>{e[0]=t}),e[1]},L4="popstate",Ov="pushState",Mv="replaceState",V4="hashchange",N1=[L4,Ov,Mv,V4],F4=t=>{for(const e of N1)addEventListener(e,t);return()=>{for(const e of N1)removeEventListener(e,t)}},WT=(t,e)=>P4.useSyncExternalStore(F4,t,e),U4=()=>location.search,z4=({ssrSearch:t=""}={})=>WT(U4,()=>t),I1=()=>location.pathname,$4=({ssrPath:t}={})=>WT(I1,t?()=>t:I1),B4=(t,{replace:e=!1,state:n=null}={})=>history[e?Mv:Ov](n,"",t),H4=(t={})=>[$4(t),B4],A1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[A1]>"u"){for(const t of[Ov,Mv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,A1,{value:!0})}const W4=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",qT=(t="")=>t==="/"?"":t,q4=(t,e)=>t[0]==="~"?t.slice(1):qT(e)+t,G4=(t="",e)=>W4(k1(qT(t)),k1(e)),k1=t=>{try{return decodeURI(t)}catch{return t}},GT={hook:H4,searchHook:z4,parser:b4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},KT=m.createContext(GT),iu=()=>m.useContext(KT),QT={},XT=m.createContext(QT),K4=()=>m.useContext(XT),Cf=t=>{const[e,n]=t.hook(t);return[G4(t.base,e),HT((r,s)=>n(q4(r,t.base),s))]},Lv=()=>Cf(iu()),YT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},JT=({children:t,...e})=>{var h,f;const n=iu(),r=e.hook?GT:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const x=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&x!==u[p]&&(l.current=u={...u}),u[p]=x,x!==r[p]&&(s=u)}return m.createElement(KT.Provider,{value:s,children:t})},R1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,Q4=t=>{let e=m.useRef(QT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Nr=({path:t,nest:e,match:n,...r})=>{const s=iu(),[i]=Cf(s),[o,l,c]=n??YT(s.parser,t,i,e),u=Q4({...K4(),...l});if(!o)return null;const h=c?m.createElement(JT,{base:c},R1(r,u)):R1(r,u);return m.createElement(XT.Provider,{value:u,children:h})},po=m.forwardRef((t,e)=>{const n=iu(),[r,s]=Cf(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...x}=t,b=HT(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),s(o,t)))}),y=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:b,href:y}):m.createElement("a",{...x,onClick:b,href:y,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),ZT=t=>Array.isArray(t)?t.flatMap(e=>ZT(e&&e.type===m.Fragment?e.props.children:e)):[t],X4=({children:t,location:e})=>{const n=iu(),[r]=Cf(n);for(const s of ZT(t)){let i=0;if(m.isValidElement(s)&&(i=YT(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Nf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},If=typeof window>"u"||"Deno"in globalThis;function er(){}function Y4(t,e){return typeof t=="function"?t(e):t}function J4(t){return typeof t=="number"&&t>=0&&t!==1/0}function Z4(t,e){return Math.max(t+(e||0)-Date.now(),0)}function P1(t,e){return typeof t=="function"?t(e):t}function eO(t,e){return typeof t=="function"?t(e):t}function j1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Vv(o,e.options))return!1}else if(!Dc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function D1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(jc(e.options.mutationKey)!==jc(i))return!1}else if(!Dc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Vv(t,e){return((e==null?void 0:e.queryKeyHashFn)||jc)(t)}function jc(t){return JSON.stringify(t,(e,n)=>$g(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Dc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Dc(t[n],e[n])):!1}function eC(t,e){if(t===e)return t;const n=O1(t)&&O1(e);if(n||$g(t)&&$g(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=eC(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function O1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $g(t){if(!M1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!M1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function M1(t){return Object.prototype.toString.call(t)==="[object Object]"}function tO(t){return new Promise(e=>{setTimeout(e,t)})}function nO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?eC(t,e):e}function rO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function sO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fv=Symbol();function tC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var to,Ws,Ea,xE,iO=(xE=class extends Nf{constructor(){super();Oe(this,to);Oe(this,Ws);Oe(this,Ea);Ee(this,Ea,e=>{if(!If&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Ws)||this.setEventListener(Q(this,Ea))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ws))==null||e.call(this),Ee(this,Ws,void 0))}setEventListener(e){var n;Ee(this,Ea,e),(n=Q(this,Ws))==null||n.call(this),Ee(this,Ws,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,to)!==e&&(Ee(this,to,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,to)=="boolean"?Q(this,to):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},to=new WeakMap,Ws=new WeakMap,Ea=new WeakMap,xE),nC=new iO,Sa,qs,Ta,wE,oO=(wE=class extends Nf{constructor(){super();Oe(this,Sa,!0);Oe(this,qs);Oe(this,Ta);Ee(this,Ta,e=>{if(!If&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,qs)||this.setEventListener(Q(this,Ta))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,qs))==null||e.call(this),Ee(this,qs,void 0))}setEventListener(e){var n;Ee(this,Ta,e),(n=Q(this,qs))==null||n.call(this),Ee(this,qs,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Sa)!==e&&(Ee(this,Sa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Sa)}},Sa=new WeakMap,qs=new WeakMap,Ta=new WeakMap,wE),Sh=new oO;function aO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function lO(t){return Math.min(1e3*2**t,3e4)}function rC(t){return(t??"online")==="online"?Sh.isOnline():!0}var sC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gp(t){return t instanceof sC}function iC(t){let e=!1,n=0,r=!1,s;const i=aO(),o=y=>{var w;r||(p(new sC(y)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>nC.isFocused()&&(t.networkMode==="always"||Sh.isOnline())&&t.canRun(),h=()=>rC(t.networkMode)&&t.canRun(),f=y=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,y),s==null||s(),i.resolve(y))},p=y=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,y),s==null||s(),i.reject(y))},x=()=>new Promise(y=>{var w;s=_=>{(r||u())&&y(_)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),b=()=>{if(r)return;let y;const w=n===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(f).catch(_=>{var O;if(r)return;const v=t.retry??(If?0:3),T=t.retryDelay??lO,k=typeof T=="function"?T(n,_):T,j=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,_);if(e||!j){p(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),tO(k).then(()=>u()?void 0:x()).then(()=>{e?p(_):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():x().then(b),i)}}function cO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Zt=cO(),no,_E,oC=(_E=class{constructor(){Oe(this,no)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),J4(this.gcTime)&&Ee(this,no,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(If?1/0:5*60*1e3))}clearGcTimeout(){Q(this,no)&&(clearTimeout(Q(this,no)),Ee(this,no,void 0))}},no=new WeakMap,_E),Ca,Na,Vn,Ht,Jc,ro,tr,Yr,bE,uO=(bE=class extends oC{constructor(n){super();Oe(this,tr);Oe(this,Ca);Oe(this,Na);Oe(this,Vn);Oe(this,Ht);Oe(this,Jc);Oe(this,ro);Ee(this,ro,!1),Ee(this,Jc,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,Vn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,Ca,hO(this.options)),this.state=n.state??Q(this,Ca),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Ht))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,Jc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Vn).remove(this)}setData(n,r){const s=nO(this.state.data,n,this.options);return Ut(this,tr,Yr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ut(this,tr,Yr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Ht))==null?void 0:s.promise;return(i=Q(this,Ht))==null||i.cancel(n),r?r.then(er).catch(er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Ca))}isActive(){return this.observers.some(n=>eO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Z4(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Ht))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Ht))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,Vn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Ht)&&(Q(this,ro)?Q(this,Ht).cancel({revert:!0}):Q(this,Ht).cancelRetry()),this.scheduleGc()),Q(this,Vn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ut(this,tr,Yr).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Ht))return Q(this,Ht).continueRetry(),Q(this,Ht).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(x=>x.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ee(this,ro,!0),s.signal)})},o=()=>{const p=tC(this.options,r),x={queryKey:this.queryKey,meta:this.meta};return i(x),Ee(this,ro,!1),this.options.persister?this.options.persister(p,x,this):p(x)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Ee(this,Na,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ut(this,tr,Yr).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var x,b,y,w;gp(p)&&p.silent||Ut(this,tr,Yr).call(this,{type:"error",error:p}),gp(p)||((b=(x=Q(this,Vn).config).onError)==null||b.call(x,p,this),(w=(y=Q(this,Vn).config).onSettled)==null||w.call(y,this.state.data,p,this)),this.scheduleGc()};return Ee(this,Ht,iC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var x,b,y,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(b=(x=Q(this,Vn).config).onSuccess)==null||b.call(x,p,this),(w=(y=Q(this,Vn).config).onSettled)==null||w.call(y,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,x)=>{Ut(this,tr,Yr).call(this,{type:"failed",failureCount:p,error:x})},onPause:()=>{Ut(this,tr,Yr).call(this,{type:"pause"})},onContinue:()=>{Ut(this,tr,Yr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,Ht).start()}},Ca=new WeakMap,Na=new WeakMap,Vn=new WeakMap,Ht=new WeakMap,Jc=new WeakMap,ro=new WeakMap,tr=new WeakSet,Yr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...dO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return gp(i)&&i.revert&&Q(this,Na)?{...Q(this,Na),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Zt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,Vn).notify({query:this,type:"updated",action:n})})},bE);function dO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kr,EE,fO=(EE=class extends Nf{constructor(e={}){super();Oe(this,kr);this.config=e,Ee(this,kr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Vv(s,n);let o=this.get(i);return o||(o=new uO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,kr).has(e.queryHash)||(Q(this,kr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,kr).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,kr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,kr).get(e)}getAll(){return[...Q(this,kr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>j1(e,r)):n}notify(e){Zt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kr=new WeakMap,EE),Rr,Yt,so,Pr,Os,SE,mO=(SE=class extends oC{constructor(n){super();Oe(this,Pr);Oe(this,Rr);Oe(this,Yt);Oe(this,so);this.mutationId=n.mutationId,Ee(this,Yt,n.mutationCache),Ee(this,Rr,[]),this.state=n.state||pO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Rr).includes(n)||(Q(this,Rr).push(n),this.clearGcTimeout(),Q(this,Yt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Rr,Q(this,Rr).filter(r=>r!==n)),this.scheduleGc(),Q(this,Yt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Rr).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Yt).remove(this))}continue(){var n;return((n=Q(this,so))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,x,b,y,w,_,v,T,k,j,O,C,S;Ee(this,so,iC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{Ut(this,Pr,Os).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{Ut(this,Pr,Os).call(this,{type:"pause"})},onContinue:()=>{Ut(this,Pr,Os).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Yt).canRun(this)}));const r=this.state.status==="pending",s=!Q(this,so).canStart();try{if(!r){Ut(this,Pr,Os).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=Q(this,Yt).config).onMutate)==null?void 0:o.call(i,n,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));I!==this.state.context&&Ut(this,Pr,Os).call(this,{type:"pending",context:I,variables:n,isPaused:s})}const N=await Q(this,so).start();return await((h=(u=Q(this,Yt).config).onSuccess)==null?void 0:h.call(u,N,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,N,n,this.state.context)),await((b=(x=Q(this,Yt).config).onSettled)==null?void 0:b.call(x,N,null,this.state.variables,this.state.context,this)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,N,null,n,this.state.context)),Ut(this,Pr,Os).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(_=Q(this,Yt).config).onError)==null?void 0:v.call(_,N,n,this.state.context,this)),await((k=(T=this.options).onError)==null?void 0:k.call(T,N,n,this.state.context)),await((O=(j=Q(this,Yt).config).onSettled)==null?void 0:O.call(j,void 0,N,this.state.variables,this.state.context,this)),await((S=(C=this.options).onSettled)==null?void 0:S.call(C,void 0,N,n,this.state.context)),N}finally{Ut(this,Pr,Os).call(this,{type:"error",error:N})}}finally{Q(this,Yt).runNext(this)}}},Rr=new WeakMap,Yt=new WeakMap,so=new WeakMap,Pr=new WeakSet,Os=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Zt.batch(()=>{Q(this,Rr).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Yt).notify({mutation:this,type:"updated",action:n})})},SE);function pO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sn,Zc,TE,gO=(TE=class extends Nf{constructor(e={}){super();Oe(this,Sn);Oe(this,Zc);this.config=e,Ee(this,Sn,new Map),Ee(this,Zc,Date.now())}build(e,n,r){const s=new mO({mutationCache:this,mutationId:++Hu(this,Zc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=ld(e),r=Q(this,Sn).get(n)??[];r.push(e),Q(this,Sn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=ld(e);if(Q(this,Sn).has(n)){const s=(r=Q(this,Sn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Q(this,Sn).delete(n):Q(this,Sn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Q(this,Sn).get(ld(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Q(this,Sn).get(ld(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Zt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Q(this,Sn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D1(n,r))}findAll(e={}){return this.getAll().filter(n=>D1(e,n))}notify(e){Zt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zt.batch(()=>Promise.all(e.map(n=>n.continue().catch(er))))}},Sn=new WeakMap,Zc=new WeakMap,TE);function ld(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function L1(t){return{onFetch:(e,n)=>{var h,f,p,x,b;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const w=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=tC(e.options,e.fetchOptions),v=async(T,k,j)=>{if(y)return Promise.reject();if(k==null&&T.pages.length)return Promise.resolve(T);const O={queryKey:e.queryKey,pageParam:k,direction:j?"backward":"forward",meta:e.options.meta};w(O);const C=await _(O),{maxPages:S}=e.options,N=j?sO:rO;return{pages:N(T.pages,C,S),pageParams:N(T.pageParams,k,S)}};if(s&&i.length){const T=s==="backward",k=T?yO:V1,j={pages:i,pageParams:o},O=k(r,j);l=await v(j,O,T)}else{const T=t??i.length;do{const k=c===0?o[0]??r.initialPageParam:V1(r,l);if(c>0&&k==null)break;l=await v(l,k),c++}while(c<T)}return l};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function V1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function yO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var st,Gs,Ks,Ia,Aa,Qs,ka,Ra,CE,vO=(CE=class{constructor(t={}){Oe(this,st);Oe(this,Gs);Oe(this,Ks);Oe(this,Ia);Oe(this,Aa);Oe(this,Qs);Oe(this,ka);Oe(this,Ra);Ee(this,st,t.queryCache||new fO),Ee(this,Gs,t.mutationCache||new gO),Ee(this,Ks,t.defaultOptions||{}),Ee(this,Ia,new Map),Ee(this,Aa,new Map),Ee(this,Qs,0)}mount(){Hu(this,Qs)._++,Q(this,Qs)===1&&(Ee(this,ka,nC.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,st).onFocus())})),Ee(this,Ra,Sh.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,st).onOnline())})))}unmount(){var t,e;Hu(this,Qs)._--,Q(this,Qs)===0&&((t=Q(this,ka))==null||t.call(this),Ee(this,ka,void 0),(e=Q(this,Ra))==null||e.call(this),Ee(this,Ra,void 0))}isFetching(t){return Q(this,st).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Gs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,st).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Q(this,st).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(P1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,st).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,st).get(r.queryHash),i=s==null?void 0:s.state.data,o=Y4(e,i);if(o!==void 0)return Q(this,st).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zt.batch(()=>Q(this,st).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,st).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,st);Zt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,st),r={type:"active",...t};return Zt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Zt.batch(()=>Q(this,st).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(er).catch(er)}invalidateQueries(t={},e={}){return Zt.batch(()=>{if(Q(this,st).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Zt.batch(()=>Q(this,st).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(er)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(er)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,st).build(this,e);return n.isStaleByTime(P1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(er).catch(er)}fetchInfiniteQuery(t){return t.behavior=L1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(er).catch(er)}ensureInfiniteQueryData(t){return t.behavior=L1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sh.isOnline()?Q(this,Gs).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,st)}getMutationCache(){return Q(this,Gs)}getDefaultOptions(){return Q(this,Ks)}setDefaultOptions(t){Ee(this,Ks,t)}setQueryDefaults(t,e){Q(this,Ia).set(jc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Ia).values()];let n={};return e.forEach(r=>{Dc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Aa).set(jc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Aa).values()];let n={};return e.forEach(r=>{Dc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Ks).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Vv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Fv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Ks).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,st).clear(),Q(this,Gs).clear()}},st=new WeakMap,Gs=new WeakMap,Ks=new WeakMap,Ia=new WeakMap,Aa=new WeakMap,Qs=new WeakMap,ka=new WeakMap,Ra=new WeakMap,CE),xO=m.createContext(void 0),wO=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(xO.Provider,{value:t,children:e}));async function _O(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const bO=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await _O(n),await n.json())},EO=new vO({defaultOptions:{queries:{queryFn:bO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),SO=1,TO=1e6;let yp=0;function CO(){return yp=(yp+1)%Number.MAX_SAFE_INTEGER,yp.toString()}const vp=new Map,F1=t=>{if(vp.has(t))return;const e=setTimeout(()=>{vp.delete(t),ic({type:"REMOVE_TOAST",toastId:t})},TO);vp.set(t,e)},NO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,SO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?F1(n):t.toasts.forEach(r=>{F1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Fd=[];let Ud={toasts:[]};function ic(t){Ud=NO(Ud,t),Fd.forEach(e=>{e(Ud)})}function IO({...t}){const e=CO(),n=s=>ic({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ic({type:"DISMISS_TOAST",toastId:e});return ic({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Io(){const[t,e]=m.useState(Ud);return m.useEffect(()=>(Fd.push(e),()=>{const n=Fd.indexOf(e);n>-1&&Fd.splice(n,1)}),[t]),{...t,toast:IO,dismiss:n=>ic({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function U1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function aC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=U1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():U1(t[s],null)}}}}function Fe(...t){return m.useCallback(aC(...t),t)}function AO(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Kn(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:p,children:x,...b}=f,y=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,w=m.useMemo(()=>b,Object.values(b));return a.jsx(y.Provider,{value:w,children:x})};u.displayName=i+"Provider";function h(f,p){var y;const x=((y=p==null?void 0:p[t])==null?void 0:y[c])||l,b=m.useContext(x);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,kO(s,...e)]}function kO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ua(t){const e=PO(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(jO);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var RO=Ua("Slot");function PO(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=OO(s),l=DO(i,s.props);return s.type!==m.Fragment&&(l.ref=r?aC(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lC=Symbol("radix.slottable");function cC(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=lC,e}function jO(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lC}function DO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function OO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Uv(t){const e=t+"CollectionProvider",[n,r]=Kn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:_}=y,v=Se.useRef(null),T=Se.useRef(new Map).current;return a.jsx(s,{scope:w,itemMap:T,collectionRef:v,children:_})};o.displayName=e;const l=t+"CollectionSlot",c=Ua(l),u=Se.forwardRef((y,w)=>{const{scope:_,children:v}=y,T=i(l,_),k=Fe(w,T.collectionRef);return a.jsx(c,{ref:k,children:v})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ua(h),x=Se.forwardRef((y,w)=>{const{scope:_,children:v,...T}=y,k=Se.useRef(null),j=Fe(w,k),O=i(h,_);return Se.useEffect(()=>(O.itemMap.set(k,{ref:k,...T}),()=>void O.itemMap.delete(k))),a.jsx(p,{[f]:"",ref:j,children:v})});x.displayName=h;function b(y){const w=i(t+"CollectionConsumer",y);return Se.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const T=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((O,C)=>T.indexOf(O.ref.current)-T.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:x},b,r]}var MO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ve=MO.reduce((t,e)=>{const n=Ua(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uC(t,e){t&&Hn.flushSync(()=>t.dispatchEvent(e))}function rn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function LO(t,e=globalThis==null?void 0:globalThis.document){const n=rn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VO="DismissableLayer",Bg="dismissableLayer.update",FO="dismissableLayer.pointerDownOutside",UO="dismissableLayer.focusOutside",z1,dC=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ou=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(dC),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=m.useState({}),b=Fe(e,C=>f(C)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(w),v=h?y.indexOf(h):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=_,j=$O(C=>{const S=C.target,N=[...u.branches].some(I=>I.contains(S));!k||N||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},p),O=BO(C=>{const S=C.target;[...u.branches].some(I=>I.contains(S))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},p);return LO(C=>{v===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(z1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=z1)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$1())},[h,u]),m.useEffect(()=>{const C=()=>x({});return document.addEventListener(Bg,C),()=>document.removeEventListener(Bg,C)},[]),a.jsx(ve.div,{...c,ref:b,style:{pointerEvents:T?k?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,O.onFocusCapture),onBlurCapture:me(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,j.onPointerDownCapture)})});ou.displayName=VO;var zO="DismissableLayerBranch",hC=m.forwardRef((t,e)=>{const n=m.useContext(dC),r=m.useRef(null),s=Fe(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ve.div,{...t,ref:s})});hC.displayName=zO;function $O(t,e=globalThis==null?void 0:globalThis.document){const n=rn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){fC(FO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function BO(t,e=globalThis==null?void 0:globalThis.document){const n=rn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&fC(UO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $1(){const t=new CustomEvent(Bg);document.dispatchEvent(t)}function fC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uC(s,i):s.dispatchEvent(i)}var HO=ou,WO=hC,St=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},qO="Portal",Af=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);St(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?_4.createPortal(a.jsx(ve.div,{...r,ref:e}),o):null});Af.displayName=qO;function GO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Ao=t=>{const{present:e,children:n}=t,r=KO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Fe(r.ref,QO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Ao.displayName="Presence";function KO(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=GO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=cd(r.current);i.current=l==="mounted"?u:"none"},[l]),St(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,x=cd(u);t?c("MOUNT"):x==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),St(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=x=>{const y=cd(r.current).includes(x.animationName);if(x.target===e&&y&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=x=>{x.target===e&&(i.current=cd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function cd(t){return(t==null?void 0:t.animationName)||"none"}function QO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=XO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=rn(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function XO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=rn(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var YO="VisuallyHidden",au=m.forwardRef((t,e)=>a.jsx(ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));au.displayName=YO;var JO=au,zv="ToastProvider",[$v,ZO,eM]=Uv("Toast"),[mC,MW]=Kn("Toast",[eM]),[tM,kf]=mC(zv),pC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${zv}\`. Expected non-empty \`string\`.`),a.jsx($v.Provider,{scope:e,children:a.jsx(tM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(x=>x+1),[]),onToastRemove:m.useCallback(()=>h(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};pC.displayName=zv;var gC="ToastViewport",nM=["F8"],Hg="toast.viewportPause",Wg="toast.viewportResume",yC=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=nM,label:s="Notifications ({hotkey})",...i}=t,o=kf(gC,n),l=ZO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Fe(e,f,o.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const w=_=>{var T;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((T=f.current)==null||T.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,_=f.current;if(b&&w&&_){const v=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Hg);_.dispatchEvent(O),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(Wg);_.dispatchEvent(O),o.isClosePausedRef.current=!1}},k=O=>{!w.contains(O.relatedTarget)&&T()},j=()=>{w.contains(document.activeElement)||T()};return w.addEventListener("focusin",v),w.addEventListener("focusout",k),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",j),window.addEventListener("blur",v),window.addEventListener("focus",T),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",j),window.removeEventListener("blur",v),window.removeEventListener("focus",T)}}},[b,o.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:w})=>{const v=l().map(T=>{const k=T.ref.current,j=[k,...pM(k)];return w==="forwards"?j:j.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const w=f.current;if(w){const _=v=>{var j,O,C;const T=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!T){const S=document.activeElement,N=v.shiftKey;if(v.target===w&&N){(j=u.current)==null||j.focus();return}const D=y({tabbingDirection:N?"backwards":"forwards"}),P=D.findIndex(B=>B===S);xp(D.slice(P+1))?v.preventDefault():N?(O=u.current)==null||O.focus():(C=h.current)==null||C.focus()}};return w.addEventListener("keydown",_),()=>w.removeEventListener("keydown",_)}},[l,y]),a.jsxs(WO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(qg,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});xp(w)}}),a.jsx($v.Slot,{scope:n,children:a.jsx(ve.ol,{tabIndex:-1,...i,ref:p})}),b&&a.jsx(qg,{ref:h,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});xp(w)}})]})});yC.displayName=gC;var vC="ToastFocusProxy",qg=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=kf(vC,n);return a.jsx(au,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});qg.displayName=vC;var Rf="Toast",rM="toast.swipeStart",sM="toast.swipeMove",iM="toast.swipeCancel",oM="toast.swipeEnd",xC=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=vi({prop:r,defaultProp:s,onChange:i});return a.jsx(Ao,{present:n||l,children:a.jsx(cM,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:rn(t.onPause),onResume:rn(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});xC.displayName=Rf;var[aM,lM]=mC(Rf,{onClose(){}}),cM=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:x,...b}=t,y=kf(Rf,n),[w,_]=m.useState(null),v=Fe(e,B=>_(B)),T=m.useRef(null),k=m.useRef(null),j=s||y.duration,O=m.useRef(0),C=m.useRef(j),S=m.useRef(0),{onToastAdd:N,onToastRemove:I}=y,A=rn(()=>{var ie;(w==null?void 0:w.contains(document.activeElement))&&((ie=y.viewport)==null||ie.focus()),o()}),D=m.useCallback(B=>{!B||B===1/0||(window.clearTimeout(S.current),O.current=new Date().getTime(),S.current=window.setTimeout(A,B))},[A]);m.useEffect(()=>{const B=y.viewport;if(B){const ie=()=>{D(C.current),u==null||u()},F=()=>{const G=new Date().getTime()-O.current;C.current=C.current-G,window.clearTimeout(S.current),c==null||c()};return B.addEventListener(Hg,F),B.addEventListener(Wg,ie),()=>{B.removeEventListener(Hg,F),B.removeEventListener(Wg,ie)}}},[y.viewport,j,c,u,D]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(j)},[i,j,y.isClosePausedRef,D]),m.useEffect(()=>(N(),()=>I()),[N,I]);const P=m.useMemo(()=>w?CC(w):null,[w]);return y.viewport?a.jsxs(a.Fragment,{children:[P&&a.jsx(uM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),a.jsx(aM,{scope:n,onClose:A,children:Hn.createPortal(a.jsx($v.ItemSlot,{scope:n,children:a.jsx(HO,{asChild:!0,onEscapeKeyDown:me(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||A(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:me(t.onPointerDown,B=>{B.button===0&&(T.current={x:B.clientX,y:B.clientY})}),onPointerMove:me(t.onPointerMove,B=>{if(!T.current)return;const ie=B.clientX-T.current.x,F=B.clientY-T.current.y,G=!!k.current,L=["left","right"].includes(y.swipeDirection),M=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,$=L?M(0,ie):0,z=L?0:M(0,F),X=B.pointerType==="touch"?10:2,J={x:$,y:z},Z={originalEvent:B,delta:J};G?(k.current=J,ud(sM,f,Z,{discrete:!1})):B1(J,y.swipeDirection,X)?(k.current=J,ud(rM,h,Z,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ie)>X||Math.abs(F)>X)&&(T.current=null)}),onPointerUp:me(t.onPointerUp,B=>{const ie=k.current,F=B.target;if(F.hasPointerCapture(B.pointerId)&&F.releasePointerCapture(B.pointerId),k.current=null,T.current=null,ie){const G=B.currentTarget,L={originalEvent:B,delta:ie};B1(ie,y.swipeDirection,y.swipeThreshold)?ud(oM,x,L,{discrete:!0}):ud(iM,p,L,{discrete:!0}),G.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),uM=t=>{const{__scopeToast:e,children:n,...r}=t,s=kf(Rf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return fM(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Af,{asChild:!0,children:a.jsx(au,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},dM="ToastTitle",wC=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ve.div,{...r,ref:e})});wC.displayName=dM;var hM="ToastDescription",_C=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ve.div,{...r,ref:e})});_C.displayName=hM;var bC="ToastAction",EC=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(TC,{altText:n,asChild:!0,children:a.jsx(Bv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${bC}\`. Expected non-empty \`string\`.`),null)});EC.displayName=bC;var SC="ToastClose",Bv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=lM(SC,n);return a.jsx(TC,{asChild:!0,children:a.jsx(ve.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});Bv.displayName=SC;var TC=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function CC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...CC(r))}}),e}function ud(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uC(s,i):s.dispatchEvent(i)}var B1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function fM(t=()=>{}){const e=rn(t);St(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mM(t){return t.nodeType===t.ELEMENT_NODE}function pM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var gM=pC,NC=yC,IC=xC,AC=wC,kC=_C,RC=EC,PC=Bv;function jC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=jC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=jC(t))&&(r&&(r+=" "),r+=e);return r}const H1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,W1=DC,lu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return W1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=H1(h)||H1(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...x}=h;return Object.entries(x).every(b=>{let[y,w]=b;return Array.isArray(w)?w.includes({...i,...l}[y]):{...i,...l}[y]===w})?[...u,f,p]:u},[]);return W1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...vM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OC("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(xM,{ref:i,iconNode:e,className:OC(`lucide-${yM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=ue("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=ue("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=ue("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=ue("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=ue("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ue("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ue("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kv="-",qM=t=>{const e=KM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Kv);return l[0]===""&&l.length!==1&&l.shift(),GC(l,e)||GM(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},GC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?GC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Kv);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Y1=/^\[(.+)\]$/,GM=t=>{if(Y1.test(t)){const e=Y1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},KM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return XM(Object.entries(t.classGroups),n).forEach(([i,o])=>{Qg(o,r,i,e)}),r},Qg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:J1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(QM(s)){Qg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Qg(o,J1(e,i),n,r)})})},J1=(t,e)=>{let n=t;return e.split(Kv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},QM=t=>t.isThemeGetter,XM=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,YM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},KC="!",JM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let w=0;w<l.length;w++){let _=l[w];if(u===0){if(_===s&&(r||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(_==="/"){f=w;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?l:l.substring(h),x=p.startsWith(KC),b=x?p.substring(1):p,y=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},ZM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},eL=t=>({cache:YM(t.cacheSize),parseClassName:JM(t),...qM(t)}),tL=/\s+/,nL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(tL);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:x}=n(u);let b=!!x,y=r(b?p.substring(0,x):p);if(!y){if(!b){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}b=!1}const w=ZM(h).join(":"),_=f?w+KC:w,v=_+y;if(i.includes(v))continue;i.push(v);const T=s(y,b);for(let k=0;k<T.length;++k){const j=T[k];i.push(_+j)}l=u+(l.length>0?" "+l:l)}return l};function rL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=QC(e))&&(r&&(r+=" "),r+=n);return r}const QC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=QC(t[r]))&&(n&&(n+=" "),n+=e);return n};function sL(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=eL(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=nL(c,n);return s(c,h),h}return function(){return i(rL.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},XC=/^\[(?:([a-z-]+):)?(.+)\]$/i,iL=/^\d+\/\d+$/,oL=new Set(["px","full","screen"]),aL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xr=t=>fa(t)||oL.has(t)||iL.test(t),Ps=t=>rl(t,"length",xL),fa=t=>!!t&&!Number.isNaN(Number(t)),wp=t=>rl(t,"number",fa),Ul=t=>!!t&&Number.isInteger(Number(t)),hL=t=>t.endsWith("%")&&fa(t.slice(0,-1)),_e=t=>XC.test(t),js=t=>aL.test(t),fL=new Set(["length","size","percentage"]),mL=t=>rl(t,fL,YC),pL=t=>rl(t,"position",YC),gL=new Set(["image","url"]),yL=t=>rl(t,gL,_L),vL=t=>rl(t,"",wL),zl=()=>!0,rl=(t,e,n)=>{const r=XC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},xL=t=>lL.test(t)&&!cL.test(t),YC=()=>!1,wL=t=>uL.test(t),_L=t=>dL.test(t),bL=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),i=qe("borderRadius"),o=qe("borderSpacing"),l=qe("borderWidth"),c=qe("contrast"),u=qe("grayscale"),h=qe("hueRotate"),f=qe("invert"),p=qe("gap"),x=qe("gradientColorStops"),b=qe("gradientColorStopPositions"),y=qe("inset"),w=qe("margin"),_=qe("opacity"),v=qe("padding"),T=qe("saturate"),k=qe("scale"),j=qe("sepia"),O=qe("skew"),C=qe("space"),S=qe("translate"),N=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",_e,e],D=()=>[_e,e],P=()=>["",Xr,Ps],B=()=>["auto",fa,_e],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",_e],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[fa,_e];return{cacheSize:500,separator:":",theme:{colors:[zl],spacing:[Xr,Ps],blur:["none","",js,_e],brightness:z(),borderColor:[t],borderRadius:["none","","full",js,_e],borderSpacing:D(),borderWidth:P(),contrast:z(),grayscale:M(),hueRotate:z(),invert:M(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[hL,Ps],inset:A(),margin:A(),opacity:z(),padding:D(),saturate:z(),scale:z(),sepia:M(),skew:z(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[js]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),_e]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ul,_e]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Ul,_e]}],"grid-cols":[{"grid-cols":[zl]}],"col-start-end":[{col:["auto",{span:["full",Ul,_e]},_e]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[zl]}],"row-start-end":[{row:["auto",{span:[Ul,_e]},_e]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[js]},js]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",js,Ps]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wp]}],"font-family":[{font:[zl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",fa,wp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xr,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xr,Ps]}],"underline-offset":[{"underline-offset":["auto",Xr,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),pL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Xr,_e]}],"outline-w":[{outline:[Xr,Ps]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Xr,Ps]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",js,vL]}],"shadow-color":[{shadow:[zl]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",js,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Ul,_e]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xr,Ps,wp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},EL=sL(bL);function q(...t){return EL(DC(t))}const SL=gM,JC=m.forwardRef(({className:t,...e},n)=>a.jsx(NC,{ref:n,className:q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));JC.displayName=NC.displayName;const TL=lu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(IC,{ref:r,className:q(TL({variant:e}),t),...n}));ZC.displayName=IC.displayName;const CL=m.forwardRef(({className:t,...e},n)=>a.jsx(RC,{ref:n,className:q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));CL.displayName=RC.displayName;const eN=m.forwardRef(({className:t,...e},n)=>a.jsx(PC,{ref:n,className:q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(xi,{className:"h-4 w-4"})}));eN.displayName=PC.displayName;const tN=m.forwardRef(({className:t,...e},n)=>a.jsx(AC,{ref:n,className:q("text-sm font-semibold",t),...e}));tN.displayName=AC.displayName;const nN=m.forwardRef(({className:t,...e},n)=>a.jsx(kC,{ref:n,className:q("text-sm opacity-90",t),...e}));nN.displayName=kC.displayName;function NL(){const{toasts:t}=Io();return a.jsxs(SL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(ZC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(tN,{children:n}),r&&a.jsx(nN,{children:r})]}),s,a.jsx(eN,{})]},e)}),a.jsx(JC,{})]})}var IL=VE[" useId ".trim().toString()]||(()=>{}),AL=0;function os(t){const[e,n]=m.useState(IL());return St(()=>{n(r=>r??String(AL++))},[t]),e?`radix-${e}`:""}const kL=["top","right","bottom","left"],wi=Math.min,Cn=Math.max,Ch=Math.round,dd=Math.floor,Lr=t=>({x:t,y:t}),RL={left:"right",right:"left",bottom:"top",top:"bottom"},PL={start:"end",end:"start"};function Xg(t,e,n){return Cn(t,wi(e,n))}function ms(t,e){return typeof t=="function"?t(e):t}function ps(t){return t.split("-")[0]}function sl(t){return t.split("-")[1]}function Qv(t){return t==="x"?"y":"x"}function Xv(t){return t==="y"?"height":"width"}function _i(t){return["top","bottom"].includes(ps(t))?"y":"x"}function Yv(t){return Qv(_i(t))}function jL(t,e,n){n===void 0&&(n=!1);const r=sl(t),s=Yv(t),i=Xv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Nh(o)),[o,Nh(o)]}function DL(t){const e=Nh(t);return[Yg(t),e,Yg(e)]}function Yg(t){return t.replace(/start|end/g,e=>PL[e])}function OL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function ML(t,e,n,r){const s=sl(t);let i=OL(ps(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Yg)))),i}function Nh(t){return t.replace(/left|right|bottom|top/g,e=>RL[e])}function LL(t){return{top:0,right:0,bottom:0,left:0,...t}}function rN(t){return typeof t!="number"?LL(t):{top:t,right:t,bottom:t,left:t}}function Ih(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Z1(t,e,n){let{reference:r,floating:s}=t;const i=_i(e),o=Yv(e),l=Xv(o),c=ps(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:h,y:r.y-s.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-s.width,y:f};break;default:x={x:r.x,y:r.y}}switch(sl(e)){case"start":x[o]-=p*(n&&u?-1:1);break;case"end":x[o]+=p*(n&&u?-1:1);break}return x}const VL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=Z1(u,r,c),p=r,x={},b=0;for(let y=0;y<l.length;y++){const{name:w,fn:_}=l[y],{x:v,y:T,data:k,reset:j}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:x,rects:u,platform:o,elements:{reference:t,floating:e}});h=v??h,f=T??f,x={...x,[w]:{...x[w],...k}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=Z1(u,p,c)),y=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:x}};async function Lc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:x=0}=ms(e,t),b=rN(x),w=l[p?f==="floating"?"reference":"floating":f],_=Ih(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},j=Ih(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:T,strategy:c}):v);return{top:(_.top-j.top+b.top)/k.y,bottom:(j.bottom-_.bottom+b.bottom)/k.y,left:(_.left-j.left+b.left)/k.x,right:(j.right-_.right+b.right)/k.x}}const FL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=ms(t,e)||{};if(u==null)return{};const f=rN(h),p={x:n,y:r},x=Yv(s),b=Xv(x),y=await o.getDimensions(u),w=x==="y",_=w?"top":"left",v=w?"bottom":"right",T=w?"clientHeight":"clientWidth",k=i.reference[b]+i.reference[x]-p[x]-i.floating[b],j=p[x]-i.reference[x],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=O?O[T]:0;(!C||!await(o.isElement==null?void 0:o.isElement(O)))&&(C=l.floating[T]||i.floating[b]);const S=k/2-j/2,N=C/2-y[b]/2-1,I=wi(f[_],N),A=wi(f[v],N),D=I,P=C-y[b]-A,B=C/2-y[b]/2+S,ie=Xg(D,B,P),F=!c.arrow&&sl(s)!=null&&B!==ie&&i.reference[b]/2-(B<D?I:A)-y[b]/2<0,G=F?B<D?B-D:B-P:0;return{[x]:p[x]+G,data:{[x]:ie,centerOffset:B-ie-G,...F&&{alignmentOffset:G}},reset:F}}}),UL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...w}=ms(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=ps(s),v=_i(l),T=ps(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=p||(T||!y?[Nh(l)]:DL(l)),O=b!=="none";!p&&O&&j.push(...ML(l,y,b,k));const C=[l,...j],S=await Lc(e,w),N=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&N.push(S[_]),f){const B=jL(s,o,k);N.push(S[B[0]],S[B[1]])}if(I=[...I,{placement:s,overflows:N}],!N.every(B=>B<=0)){var A,D;const B=(((A=i.flip)==null?void 0:A.index)||0)+1,ie=C[B];if(ie)return{data:{index:B,overflows:I},reset:{placement:ie}};let F=(D=I.filter(G=>G.overflows[0]<=0).sort((G,L)=>G.overflows[1]-L.overflows[1])[0])==null?void 0:D.placement;if(!F)switch(x){case"bestFit":{var P;const G=(P=I.filter(L=>{if(O){const M=_i(L.placement);return M===v||M==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(M=>M>0).reduce((M,$)=>M+$,0)]).sort((L,M)=>L[1]-M[1])[0])==null?void 0:P[0];G&&(F=G);break}case"initialPlacement":F=l;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function e_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function t_(t){return kL.some(e=>t[e]>=0)}const zL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ms(t,e);switch(r){case"referenceHidden":{const i=await Lc(e,{...s,elementContext:"reference"}),o=e_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:t_(o)}}}case"escaped":{const i=await Lc(e,{...s,altBoundary:!0}),o=e_(i,n.floating);return{data:{escapedOffsets:o,escaped:t_(o)}}}default:return{}}}}};async function $L(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ps(n),l=sl(n),c=_i(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=ms(e,t);let{mainAxis:p,crossAxis:x,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(x=l==="end"?b*-1:b),c?{x:x*h,y:p*u}:{x:p*u,y:x*h}}const BL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await $L(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},HL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:_,y:v}=w;return{x:_,y:v}}},...c}=ms(t,e),u={x:n,y:r},h=await Lc(e,c),f=_i(ps(s)),p=Qv(f);let x=u[p],b=u[f];if(i){const w=p==="y"?"top":"left",_=p==="y"?"bottom":"right",v=x+h[w],T=x-h[_];x=Xg(v,x,T)}if(o){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",v=b+h[w],T=b-h[_];b=Xg(v,b,T)}const y=l.fn({...e,[p]:x,[f]:b});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[f]:o}}}}}},WL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ms(t,e),h={x:n,y:r},f=_i(s),p=Qv(f);let x=h[p],b=h[f];const y=ms(l,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const T=p==="y"?"height":"width",k=i.reference[p]-i.floating[T]+w.mainAxis,j=i.reference[p]+i.reference[T]-w.mainAxis;x<k?x=k:x>j&&(x=j)}if(u){var _,v;const T=p==="y"?"width":"height",k=["top","left"].includes(ps(s)),j=i.reference[f]-i.floating[T]+(k&&((_=o.offset)==null?void 0:_[f])||0)+(k?0:w.crossAxis),O=i.reference[f]+i.reference[T]+(k?0:((v=o.offset)==null?void 0:v[f])||0)-(k?w.crossAxis:0);b<j?b=j:b>O&&(b=O)}return{[p]:x,[f]:b}}}},qL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ms(t,e),h=await Lc(e,u),f=ps(s),p=sl(s),x=_i(s)==="y",{width:b,height:y}=i.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,w=p==="end"?"top":"bottom");const v=y-h.top-h.bottom,T=b-h.left-h.right,k=wi(y-h[w],v),j=wi(b-h[_],T),O=!e.middlewareData.shift;let C=k,S=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=v),O&&!p){const I=Cn(h.left,0),A=Cn(h.right,0),D=Cn(h.top,0),P=Cn(h.bottom,0);x?S=b-2*(I!==0||A!==0?I+A:Cn(h.left,h.right)):C=y-2*(D!==0||P!==0?D+P:Cn(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:C});const N=await o.getDimensions(l.floating);return b!==N.width||y!==N.height?{reset:{rects:!0}}:{}}}};function Of(){return typeof window<"u"}function il(t){return sN(t)?(t.nodeName||"").toLowerCase():"#document"}function Rn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Wr(t){var e;return(e=(sN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sN(t){return Of()?t instanceof Node||t instanceof Rn(t).Node:!1}function pr(t){return Of()?t instanceof Element||t instanceof Rn(t).Element:!1}function zr(t){return Of()?t instanceof HTMLElement||t instanceof Rn(t).HTMLElement:!1}function n_(t){return!Of()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rn(t).ShadowRoot}function cu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function GL(t){return["table","td","th"].includes(il(t))}function Mf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Jv(t){const e=Zv(),n=pr(t)?gr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KL(t){let e=bi(t);for(;zr(e)&&!Ba(e);){if(Jv(e))return e;if(Mf(e))return null;e=bi(e)}return null}function Zv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ba(t){return["html","body","#document"].includes(il(t))}function gr(t){return Rn(t).getComputedStyle(t)}function Lf(t){return pr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bi(t){if(il(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n_(t)&&t.host||Wr(t);return n_(e)?e.host:e}function iN(t){const e=bi(t);return Ba(e)?t.ownerDocument?t.ownerDocument.body:t.body:zr(e)&&cu(e)?e:iN(e)}function Vc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=iN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Rn(s);if(i){const l=Jg(o);return e.concat(o,o.visualViewport||[],cu(s)?s:[],l&&n?Vc(l):[])}return e.concat(s,Vc(s,[],n))}function Jg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function oN(t){const e=gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=zr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Ch(n)!==i||Ch(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function ex(t){return pr(t)?t:t.contextElement}function ma(t){const e=ex(t);if(!zr(e))return Lr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=oN(e);let o=(i?Ch(n.width):n.width)/r,l=(i?Ch(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QL=Lr(0);function aN(t){const e=Rn(t);return!Zv()||!e.visualViewport?QL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rn(t)?!1:e}function go(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ex(t);let o=Lr(1);e&&(r?pr(r)&&(o=ma(r)):o=ma(t));const l=XL(i,n,r)?aN(i):Lr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Rn(i),x=r&&pr(r)?Rn(r):r;let b=p,y=Jg(b);for(;y&&r&&x!==b;){const w=ma(y),_=y.getBoundingClientRect(),v=gr(y),T=_.left+(y.clientLeft+parseFloat(v.paddingLeft))*w.x,k=_.top+(y.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,f*=w.y,c+=T,u+=k,b=Rn(y),y=Jg(b)}}return Ih({width:h,height:f,x:c,y:u})}function tx(t,e){const n=Lf(t).scrollLeft;return e?e.left+n:go(Wr(t)).left+n}function lN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:tx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function YL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Wr(r),l=e?Mf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Lr(1);const h=Lr(0),f=zr(r);if((f||!f&&!i)&&((il(r)!=="body"||cu(o))&&(c=Lf(r)),zr(r))){const x=go(r);u=ma(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const p=o&&!f&&!i?lN(o,c,!0):Lr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function JL(t){return Array.from(t.getClientRects())}function ZL(t){const e=Wr(t),n=Lf(t),r=t.ownerDocument.body,s=Cn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Cn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+tx(t);const l=-n.scrollTop;return gr(r).direction==="rtl"&&(o+=Cn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function e3(t,e){const n=Rn(t),r=Wr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=Zv();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function t3(t,e){const n=go(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=zr(t)?ma(t):Lr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function r_(t,e,n){let r;if(e==="viewport")r=e3(t,n);else if(e==="document")r=ZL(Wr(t));else if(pr(e))r=t3(e,n);else{const s=aN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ih(r)}function cN(t,e){const n=bi(t);return n===e||!pr(n)||Ba(n)?!1:gr(n).position==="fixed"||cN(n,e)}function n3(t,e){const n=e.get(t);if(n)return n;let r=Vc(t,[],!1).filter(l=>pr(l)&&il(l)!=="body"),s=null;const i=gr(t).position==="fixed";let o=i?bi(t):t;for(;pr(o)&&!Ba(o);){const l=gr(o),c=Jv(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||cu(o)&&!c&&cN(t,o))?r=r.filter(h=>h!==o):s=l,o=bi(o)}return e.set(t,r),r}function r3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Mf(e)?[]:n3(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=r_(e,h,s);return u.top=Cn(f.top,u.top),u.right=wi(f.right,u.right),u.bottom=wi(f.bottom,u.bottom),u.left=Cn(f.left,u.left),u},r_(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function s3(t){const{width:e,height:n}=oN(t);return{width:e,height:n}}function i3(t,e,n){const r=zr(e),s=Wr(e),i=n==="fixed",o=go(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Lr(0);if(r||!r&&!i)if((il(e)!=="body"||cu(s))&&(l=Lf(e)),r){const p=go(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=tx(s));const u=s&&!r&&!i?lN(s,l):Lr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function _p(t){return gr(t).position==="static"}function s_(t,e){if(!zr(t)||gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Wr(t)===n&&(n=n.ownerDocument.body),n}function uN(t,e){const n=Rn(t);if(Mf(t))return n;if(!zr(t)){let s=bi(t);for(;s&&!Ba(s);){if(pr(s)&&!_p(s))return s;s=bi(s)}return n}let r=s_(t,e);for(;r&&GL(r)&&_p(r);)r=s_(r,e);return r&&Ba(r)&&_p(r)&&!Jv(r)?n:r||KL(t)||n}const o3=async function(t){const e=this.getOffsetParent||uN,n=this.getDimensions,r=await n(t.floating);return{reference:i3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a3(t){return gr(t).direction==="rtl"}const l3={convertOffsetParentRelativeRectToViewportRelativeRect:YL,getDocumentElement:Wr,getClippingRect:r3,getOffsetParent:uN,getElementRects:o3,getClientRects:JL,getDimensions:s3,getScale:ma,isElement:pr,isRTL:a3};function dN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function c3(t,e){let n=null,r;const s=Wr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:x}=u;if(l||e(),!p||!x)return;const b=dd(f),y=dd(s.clientWidth-(h+p)),w=dd(s.clientHeight-(f+x)),_=dd(h),T={rootMargin:-b+"px "+-y+"px "+-w+"px "+-_+"px",threshold:Cn(0,wi(1,c))||1};let k=!0;function j(O){const C=O[0].intersectionRatio;if(C!==c){if(!k)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!dN(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(j,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,T)}n.observe(t)}return o(!0),i}function u3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ex(t),h=s||i?[...u?Vc(u):[],...Vc(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?c3(u,n):null;let p=-1,x=null;o&&(x=new ResizeObserver(_=>{let[v]=_;v&&v.target===u&&x&&(x.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=x)==null||T.observe(e)})),n()}),u&&!c&&x.observe(u),x.observe(e));let b,y=c?go(t):null;c&&w();function w(){const _=go(t);y&&!dN(y,_)&&n(),y=_,b=requestAnimationFrame(w)}return n(),()=>{var _;h.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),f==null||f(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}const d3=BL,h3=HL,f3=UL,m3=qL,p3=zL,i_=FL,g3=WL,y3=(t,e,n)=>{const r=new Map,s={platform:l3,...n},i={...s.platform,_c:r};return VL(t,e,{...s,platform:i})};var zd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ah(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ah(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ah(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function hN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function o_(t,e){const n=hN(t);return Math.round(e*n)/n}function bp(t){const e=m.useRef(t);return zd(()=>{e.current=t}),e}function v3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,x]=m.useState(r);Ah(p,r)||x(r);const[b,y]=m.useState(null),[w,_]=m.useState(null),v=m.useCallback(L=>{L!==O.current&&(O.current=L,y(L))},[]),T=m.useCallback(L=>{L!==C.current&&(C.current=L,_(L))},[]),k=i||b,j=o||w,O=m.useRef(null),C=m.useRef(null),S=m.useRef(h),N=c!=null,I=bp(c),A=bp(s),D=bp(u),P=m.useCallback(()=>{if(!O.current||!C.current)return;const L={placement:e,strategy:n,middleware:p};A.current&&(L.platform=A.current),y3(O.current,C.current,L).then(M=>{const $={...M,isPositioned:D.current!==!1};B.current&&!Ah(S.current,$)&&(S.current=$,Hn.flushSync(()=>{f($)}))})},[p,e,n,A,D]);zd(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const B=m.useRef(!1);zd(()=>(B.current=!0,()=>{B.current=!1}),[]),zd(()=>{if(k&&(O.current=k),j&&(C.current=j),k&&j){if(I.current)return I.current(k,j,P);P()}},[k,j,P,I,N]);const ie=m.useMemo(()=>({reference:O,floating:C,setReference:v,setFloating:T}),[v,T]),F=m.useMemo(()=>({reference:k,floating:j}),[k,j]),G=m.useMemo(()=>{const L={position:n,left:0,top:0};if(!F.floating)return L;const M=o_(F.floating,h.x),$=o_(F.floating,h.y);return l?{...L,transform:"translate("+M+"px, "+$+"px)",...hN(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:$}},[n,l,F.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:P,refs:ie,elements:F,floatingStyles:G}),[h,P,ie,F,G])}const x3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?i_({element:r.current,padding:s}).fn(n):{}:r?i_({element:r,padding:s}).fn(n):{}}}},w3=(t,e)=>({...d3(t),options:[t,e]}),_3=(t,e)=>({...h3(t),options:[t,e]}),b3=(t,e)=>({...g3(t),options:[t,e]}),E3=(t,e)=>({...f3(t),options:[t,e]}),S3=(t,e)=>({...m3(t),options:[t,e]}),T3=(t,e)=>({...p3(t),options:[t,e]}),C3=(t,e)=>({...x3(t),options:[t,e]});var N3="Arrow",fN=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});fN.displayName=N3;var I3=fN;function mN(t){const[e,n]=m.useState(void 0);return St(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var nx="Popper",[pN,Vf]=Kn(nx),[A3,gN]=pN(nx),yN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(A3,{scope:e,anchor:r,onAnchorChange:s,children:n})};yN.displayName=nx;var vN="PopperAnchor",xN=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=gN(vN,n),o=m.useRef(null),l=Fe(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ve.div,{...s,ref:l})});xN.displayName=vN;var rx="PopperContent",[k3,R3]=pN(rx),wN=m.forwardRef((t,e)=>{var H,te,pe,re,fe,de;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:x="optimized",onPlaced:b,...y}=t,w=gN(rx,n),[_,v]=m.useState(null),T=Fe(e,ke=>v(ke)),[k,j]=m.useState(null),O=mN(k),C=(O==null?void 0:O.width)??0,S=(O==null?void 0:O.height)??0,N=r+(i!=="center"?"-"+i:""),I=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],D=A.length>0,P={padding:I,boundary:A.filter(j3),altBoundary:D},{refs:B,floatingStyles:ie,placement:F,isPositioned:G,middlewareData:L}=v3({strategy:"fixed",placement:N,whileElementsMounted:(...ke)=>u3(...ke,{animationFrame:x==="always"}),elements:{reference:w.anchor},middleware:[w3({mainAxis:s+S,alignmentAxis:o}),c&&_3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?b3():void 0,...P}),c&&E3({...P}),S3({...P,apply:({elements:ke,rects:Pe,availableWidth:cn,availableHeight:Vt})=>{const{width:Mn,height:Mi}=Pe.reference,He=ke.floating.style;He.setProperty("--radix-popper-available-width",`${cn}px`),He.setProperty("--radix-popper-available-height",`${Vt}px`),He.setProperty("--radix-popper-anchor-width",`${Mn}px`),He.setProperty("--radix-popper-anchor-height",`${Mi}px`)}}),k&&C3({element:k,padding:l}),D3({arrowWidth:C,arrowHeight:S}),p&&T3({strategy:"referenceHidden",...P})]}),[M,$]=EN(F),z=rn(b);St(()=>{G&&(z==null||z())},[G,z]);const X=(H=L.arrow)==null?void 0:H.x,J=(te=L.arrow)==null?void 0:te.y,Z=((pe=L.arrow)==null?void 0:pe.centerOffset)!==0,[ce,ee]=m.useState();return St(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:G?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(re=L.transformOrigin)==null?void 0:re.x,(fe=L.transformOrigin)==null?void 0:fe.y].join(" "),...((de=L.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(k3,{scope:n,placedSide:M,onArrowChange:j,arrowX:X,arrowY:J,shouldHideArrow:Z,children:a.jsx(ve.div,{"data-side":M,"data-align":$,...y,ref:T,style:{...y.style,animation:G?void 0:"none"}})})})});wN.displayName=rx;var _N="PopperArrow",P3={top:"bottom",right:"left",bottom:"top",left:"right"},bN=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=R3(_N,r),o=P3[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(I3,{...s,ref:n,style:{...s.style,display:"block"}})})});bN.displayName=_N;function j3(t){return t!==null}var D3=t=>({name:"transformOrigin",options:t,fn(e){var w,_,v;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=EN(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,x=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let b="",y="";return u==="bottom"?(b=o?f:`${p}px`,y=`${-c}px`):u==="top"?(b=o?f:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,y=o?f:`${x}px`):u==="left"&&(b=`${r.floating.width+c}px`,y=o?f:`${x}px`),{data:{x:b,y}}}});function EN(t){const[e,n="center"]=t.split("-");return[e,n]}var SN=yN,TN=xN,CN=wN,NN=bN,[Ff,LW]=Kn("Tooltip",[Vf]),Uf=Vf(),IN="TooltipProvider",O3=700,Zg="tooltip.open",[M3,sx]=Ff(IN),AN=t=>{const{__scopeTooltip:e,delayDuration:n=O3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(M3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};AN.displayName=IN;var zf="Tooltip",[L3,$f]=Ff(zf),kN=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=sx(zf,t.__scopeTooltip),u=Uf(e),[h,f]=m.useState(null),p=os(),x=m.useRef(0),b=o??c.disableHoverableContent,y=l??c.delayDuration,w=m.useRef(!1),[_=!1,v]=vi({prop:r,defaultProp:s,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(Zg))):c.onClose(),i==null||i(C)}}),T=m.useMemo(()=>_?w.current?"delayed-open":"instant-open":"closed",[_]),k=m.useCallback(()=>{window.clearTimeout(x.current),x.current=0,w.current=!1,v(!0)},[v]),j=m.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v(!1)},[v]),O=m.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{w.current=!0,v(!0),x.current=0},y)},[y,v]);return m.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),a.jsx(SN,{...u,children:a.jsx(L3,{scope:e,contentId:p,open:_,stateAttribute:T,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?O():k()},[c.isOpenDelayedRef,O,k]),onTriggerLeave:m.useCallback(()=>{b?j():(window.clearTimeout(x.current),x.current=0)},[j,b]),onOpen:k,onClose:j,disableHoverableContent:b,children:n})})};kN.displayName=zf;var ey="TooltipTrigger",RN=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=$f(ey,n),i=sx(ey,n),o=Uf(n),l=m.useRef(null),c=Fe(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(TN,{asChild:!0,...o,children:a.jsx(ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});RN.displayName=ey;var V3="TooltipPortal",[VW,F3]=Ff(V3,{forceMount:void 0}),Ha="TooltipContent",PN=m.forwardRef((t,e)=>{const n=F3(Ha,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=$f(Ha,t.__scopeTooltip);return a.jsx(Ao,{present:r||o.open,children:o.disableHoverableContent?a.jsx(jN,{side:s,...i,ref:e}):a.jsx(U3,{side:s,...i,ref:e})})}),U3=m.forwardRef((t,e)=>{const n=$f(Ha,t.__scopeTooltip),r=sx(Ha,t.__scopeTooltip),s=m.useRef(null),i=Fe(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),x=m.useCallback((b,y)=>{const w=b.currentTarget,_={x:b.clientX,y:b.clientY},v=W3(_,w.getBoundingClientRect()),T=q3(_,v),k=G3(y.getBoundingClientRect()),j=Q3([...T,...k]);l(j),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const b=w=>x(w,h),y=w=>x(w,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",y)}}},[c,h,x,p]),m.useEffect(()=>{if(o){const b=y=>{const w=y.target,_={x:y.clientX,y:y.clientY},v=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),T=!K3(_,o);v?p():T&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,o,u,p]),a.jsx(jN,{...t,ref:i})}),[z3,$3]=Ff(zf,{isInside:!1}),B3=cC("TooltipContent"),jN=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=$f(Ha,n),u=Uf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(Zg,h),()=>document.removeEventListener(Zg,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const x=p.target;x!=null&&x.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(CN,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(B3,{children:r}),a.jsx(z3,{scope:n,isInside:!0,children:a.jsx(JO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});PN.displayName=Ha;var DN="TooltipArrow",H3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Uf(n);return $3(DN,n).isInside?null:a.jsx(NN,{...s,...r,ref:e})});H3.displayName=DN;function W3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function q3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function G3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function K3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function Q3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),X3(e)}function X3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Y3=AN,J3=kN,Z3=RN,ON=PN;const MN=Y3,LN=J3,VN=Z3,ix=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(ON,{ref:r,sideOffset:e,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));ix.displayName=ON.displayName;const e5="modulepreload",t5=function(t){return"/"+t},a_={},hd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=t5(c),c in a_)return;a_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":e5,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,x)=>{f.addEventListener("load",p),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},n5=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},r5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},UN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,x=u&63;c||(x=64,o||(p=64)),r.push(n[h],n[f],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new s5;const p=i<<2|l>>4;if(r.push(p),u!==64){const x=l<<4&240|u>>2;if(r.push(x),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i5=function(t){const e=FN(t);return UN.encodeByteArray(e,!0)},kh=function(t){return i5(t).replace(/\./g,"")},zN=function(t){try{return UN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=()=>o5().__FIREBASE_DEFAULTS__,l5=()=>{if(typeof process>"u"||typeof l_>"u")return;const t=l_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zN(t[1]);return e&&JSON.parse(e)},Bf=()=>{try{return n5()||a5()||l5()||c5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$N=t=>{var e,n;return(n=(e=Bf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},u5=t=>{const e=$N(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BN=()=>{var t;return(t=Bf())==null?void 0:t.config},HN=t=>{var e;return(e=Bf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kh(JSON.stringify(n)),kh(JSON.stringify(o)),""].join(".")}const oc={};function f5(){const t={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?t.emulator.push(e):t.prod.push(e);return t}function m5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let c_=!1;function qN(t,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||oc[t]===e||oc[t]||c_)return;oc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=f5().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,x){p.setAttribute("width","24"),p.setAttribute("id",x),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{c_=!0,o()},p}function h(p,x){p.setAttribute("id",x),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=m5(r),x=n("text"),b=document.getElementById(x)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;l(T),h(w,y);const k=u();c(v,_),T.append(v,b,w,k),document.body.appendChild(T)}i?(b.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function g5(){var e;const t=(e=Bf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function x5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w5(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _5(){return!g5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b5(){try{return typeof indexedDB=="object"}catch{return!1}}function E5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="FirebaseError";class _s extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S5,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?T5(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new _s(s,l,r)}}function T5(t,e){return t.replace(C5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C5=/\{\$([^}]+)}/g;function N5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(u_(i)&&u_(o)){if(!yo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function u_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function I5(t,e){const n=new A5(t,e);return n.subscribe.bind(n)}class A5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");k5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ep),s.error===void 0&&(s.error=Ep),s.complete===void 0&&(s.complete=Ep);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class vo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j5(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P5(t){return t===Qi?void 0:t}function j5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const O5={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},M5=Ce.INFO,L5={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},V5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=L5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ox{constructor(e){this.name=e,this._logLevel=M5,this._logHandler=V5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const F5=(t,e)=>e.some(n=>t instanceof n);let d_,h_;function U5(){return d_||(d_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z5(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GN=new WeakMap,ty=new WeakMap,KN=new WeakMap,Sp=new WeakMap,ax=new WeakMap;function $5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ui(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GN.set(n,t)}).catch(()=>{}),ax.set(e,t),e}function B5(t){if(ty.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ty.set(t,e)}let ny={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H5(t){ny=t(ny)}function W5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tp(this),e,...n);return KN.set(r,e.sort?e.sort():[e]),ui(r)}:z5().includes(t)?function(...e){return t.apply(Tp(this),e),ui(GN.get(this))}:function(...e){return ui(t.apply(Tp(this),e))}}function q5(t){return typeof t=="function"?W5(t):(t instanceof IDBTransaction&&B5(t),F5(t,U5())?new Proxy(t,ny):t)}function ui(t){if(t instanceof IDBRequest)return $5(t);if(Sp.has(t))return Sp.get(t);const e=q5(t);return e!==t&&(Sp.set(t,e),ax.set(e,t)),e}const Tp=t=>ax.get(t);function G5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ui(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ui(o.result),c.oldVersion,c.newVersion,ui(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const K5=["get","getKey","getAll","getAllKeys","count"],Q5=["put","add","delete","clear"],Cp=new Map;function f_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cp.get(e))return Cp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Q5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||K5.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Cp.set(e,i),i}H5(t=>({...t,get:(e,n,r)=>f_(e,n)||t.get(e,n,r),has:(e,n)=>!!f_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ry="@firebase/app",m_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new ox("@firebase/app"),J5="@firebase/app-compat",Z5="@firebase/analytics-compat",e6="@firebase/analytics",t6="@firebase/app-check-compat",n6="@firebase/app-check",r6="@firebase/auth",s6="@firebase/auth-compat",i6="@firebase/database",o6="@firebase/data-connect",a6="@firebase/database-compat",l6="@firebase/functions",c6="@firebase/functions-compat",u6="@firebase/installations",d6="@firebase/installations-compat",h6="@firebase/messaging",f6="@firebase/messaging-compat",m6="@firebase/performance",p6="@firebase/performance-compat",g6="@firebase/remote-config",y6="@firebase/remote-config-compat",v6="@firebase/storage",x6="@firebase/storage-compat",w6="@firebase/firestore",_6="@firebase/ai",b6="@firebase/firestore-compat",E6="firebase",S6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="[DEFAULT]",T6={[ry]:"fire-core",[J5]:"fire-core-compat",[e6]:"fire-analytics",[Z5]:"fire-analytics-compat",[n6]:"fire-app-check",[t6]:"fire-app-check-compat",[r6]:"fire-auth",[s6]:"fire-auth-compat",[i6]:"fire-rtdb",[o6]:"fire-data-connect",[a6]:"fire-rtdb-compat",[l6]:"fire-fn",[c6]:"fire-fn-compat",[u6]:"fire-iid",[d6]:"fire-iid-compat",[h6]:"fire-fcm",[f6]:"fire-fcm-compat",[m6]:"fire-perf",[p6]:"fire-perf-compat",[g6]:"fire-rc",[y6]:"fire-rc-compat",[v6]:"fire-gcs",[x6]:"fire-gcs-compat",[w6]:"fire-fst",[b6]:"fire-fst-compat",[_6]:"fire-vertex","fire-js":"fire-js",[E6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,C6=new Map,iy=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wa(t){const e=t.name;if(iy.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,t);for(const n of Rh.values())p_(n,t);for(const n of C6.values())p_(n,t);return!0}function lx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new uu("app","Firebase",N6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=S6;function QN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw di.create("bad-app-name",{appName:String(s)});if(n||(n=BN()),!n)throw di.create("no-options");const i=Rh.get(s);if(i){if(yo(n,i.options)&&yo(r,i.config))return i;throw di.create("duplicate-app",{appName:s})}const o=new D5(s);for(const c of iy.values())o.addComponent(c);const l=new I6(n,r,o);return Rh.set(s,l),l}function XN(t=sy){const e=Rh.get(t);if(!e&&t===sy&&BN())return QN();if(!e)throw di.create("no-app",{appName:t});return e}function hi(t,e,n){let r=T6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(o.join(" "));return}Wa(new vo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="firebase-heartbeat-database",k6=1,Fc="firebase-heartbeat-store";let Np=null;function YN(){return Np||(Np=G5(A6,k6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),Np}async function R6(t){try{const n=(await YN()).transaction(Fc),r=await n.objectStore(Fc).get(JN(t));return await n.done,r}catch(e){if(e instanceof _s)gs.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(n.message)}}}async function g_(t,e){try{const r=(await YN()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,JN(t)),await r.done}catch(n){if(n instanceof _s)gs.warn(n.message);else{const r=di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gs.warn(r.message)}}}function JN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=1024,j6=30;class D6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=y_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>j6){const o=L6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y_(),{heartbeatsToSend:r,unsentEntries:s}=O6(this._heartbeatsCache.heartbeats),i=kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return gs.warn(n),""}}}function y_(){return new Date().toISOString().substring(0,10)}function O6(t,e=P6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),v_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),v_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b5()?E5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function v_(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}function L6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){Wa(new vo("platform-logger",e=>new X5(e),"PRIVATE")),Wa(new vo("heartbeat",e=>new D6(e),"PRIVATE")),hi(ry,m_,t),hi(ry,m_,"esm2020"),hi("fire-js","")}V6("");function ZN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F6=ZN,eI=new uu("auth","Firebase",ZN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new ox("@firebase/auth");function U6(t,...e){Ph.logLevel<=Ce.WARN&&Ph.warn(`Auth (${al}): ${t}`,...e)}function $d(t,...e){Ph.logLevel<=Ce.ERROR&&Ph.error(`Auth (${al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw ux(t,...e)}function dr(t,...e){return ux(t,...e)}function cx(t,e,n){const r={...F6(),[e]:n};return new uu("auth","Firebase",r).create(e,{appName:t.name})}function ao(t){return cx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$r(t,"argument-error"),cx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ux(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eI.create(t,...e)}function ye(t,e,...n){if(!t)throw ux(e,...n)}function rs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $d(e),new Error(e)}function ys(t,e){t||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $6(){return x_()==="http:"||x_()==="https:"}function x_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($6()||v5()||"connection"in navigator)?navigator.onLine:!0}function H6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ys(n>e,"Short delay should be less than long delay!"),this.isMobile=p5()||x5()}get(){return B6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e){ys(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G6=new hu(3e4,6e4);function hx(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ll(t,e,n,r,s={}){return nI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=du({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return y5()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ol(t.emulatorConfig.host)&&(u.credentials="include"),tI.fetch()(await rI(t,t.config.apiHost,n,l),u)})}async function nI(t,e,n){t._canInitEmulator=!1;const r={...W6,...e};try{const s=new Q6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw fd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cx(t,h,u);$r(t,h)}}catch(s){if(s instanceof _s)throw s;$r(t,"network-request-failed",{message:String(s)})}}async function K6(t,e,n,r,s={}){const i=await ll(t,e,n,r,s);return"mfaPendingCredential"in i&&$r(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function rI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?dx(t.config,s):`${t.config.apiScheme}://${s}`;return q6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Q6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),G6.get())})}}function fd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(t,e){return ll(t,"POST","/v1/accounts:delete",e)}async function jh(t,e){return ll(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y6(t,e=!1){const n=sn(t),r=await n.getIdToken(e),s=fx(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ac(Ip(s.auth_time)),issuedAtTime:ac(Ip(s.iat)),expirationTime:ac(Ip(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ip(t){return Number(t)*1e3}function fx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const s=zN(n);return s?JSON.parse(s):($d("Failed to decode base64 JWT payload"),null)}catch(s){return $d("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function w_(t){const e=fx(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _s&&J6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Uc(t,jh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?sI(s.providerUserInfo):[],o=tV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eV(t){const e=sn(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(t,e){const n=await nI(t,{},async()=>{const r=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await rI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ol(t.emulatorConfig.host)&&(c.credentials="include"),tI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rV(t,e){return ll(t,"POST","/v2/accounts:revokeToken",hx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=w_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pa;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Z6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ay(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y6(this,e)}reload(){return eV(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Uc(this,X6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:x,providerData:b,stsTokenManager:y}=n;ye(f&&y,e,"internal-error");const w=pa.fromJSON(this.name,y);ye(typeof f=="string",e,"internal-error"),Ds(r,e.name),Ds(s,e.name),ye(typeof p=="boolean",e,"internal-error"),ye(typeof x=="boolean",e,"internal-error"),Ds(i,e.name),Ds(o,e.name),Ds(l,e.name),Ds(c,e.name),Ds(u,e.name),Ds(h,e.name);const _=new or({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:w,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(_.providerData=b.map(v=>({...v}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new pa;s.updateFromServerResponse(n);const i=new or({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new pa;l.updateFromIdToken(r);const c=new or({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function ss(t){ys(t instanceof Function,"Expected a class definition");let e=__.get(t);return e?(ys(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,__.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iI.type="NONE";const b_=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t,e,n){return`firebase:${t}:${e}:${n}`}class ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jh(this.auth,{idToken:e}).catch(()=>{});return n?or._fromGetAccountInfoResponse(this.auth,n,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ga(ss(b_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ss(b_);const o=Bd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await jh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await or._fromGetAccountInfoResponse(e,p,h)}else f=or._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ga(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ga(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dI(e))return"Blackberry";if(hI(e))return"Webos";if(aI(e))return"Safari";if((e.includes("chrome/")||lI(e))&&!e.includes("edge/"))return"Chrome";if(uI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oI(t=Qt()){return/firefox\//i.test(t)}function aI(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lI(t=Qt()){return/crios\//i.test(t)}function cI(t=Qt()){return/iemobile/i.test(t)}function uI(t=Qt()){return/android/i.test(t)}function dI(t=Qt()){return/blackberry/i.test(t)}function hI(t=Qt()){return/webos/i.test(t)}function mx(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sV(t=Qt()){var e;return mx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function iV(){return w5()&&document.documentMode===10}function fI(t=Qt()){return mx(t)||uI(t)||hI(t)||dI(t)||/windows phone/i.test(t)||cI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t,e=[]){let n;switch(t){case"Browser":n=E_(Qt());break;case"Worker":n=`${E_(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV(t,e={}){return ll(t,"GET","/v2/passwordPolicy",hx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=6;class cV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S_(this),this.idTokenSubscription=new S_(this),this.beforeStateQueue=new oV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ss(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jh(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(ao(this));const n=e?sn(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aV(this),n=new cV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ss(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[ss(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&U6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hf(t){return sn(t)}class S_{constructor(e){this.auth=e,this.observer=null,this.addObserver=I5(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let px={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(t){px=t}function hV(t){return px.loadJS(t)}function fV(){return px.gapiScript}function mV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t,e){const n=lx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(yo(i,e??{}))return s;$r(s,"already-initialized")}return n.initialize({options:e})}function gV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ss);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yV(t,e,n){const r=Hf(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=pI(e),{host:o,port:l}=vV(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(yo(u,r.config.emulator)&&yo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ol(o)?(WN(`${i}//${o}${c}`),qN("Auth",!0)):xV()}function pI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vV(t){const e=pI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:T_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:T_(o)}}}function T_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,n){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e){return K6(t,"POST","/v1/accounts:signInWithIdp",hx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="http://localhost";class xo extends gI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new xo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ya(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ya(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ya(e,n)}buildRequest(){const e={requestUri:wV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=du(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends fu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xo._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pn.credential(n,r)}catch{return null}}}pn.GOOGLE_SIGN_IN_METHOD="google.com";pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends fu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends fu{constructor(){super("twitter.com")}static credential(e,n){return xo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await or._fromIdTokenResponse(e,r,s),o=C_(r);return new qa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=C_(r);return new qa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function C_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends _s{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Oh(e,n,r,s)}}function yI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(t,i,e,r):i})}async function _V(t,e,n=!1){const r=await Uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e,n=!1){const{auth:r}=t;if(ir(r.app))return Promise.reject(ao(r));const s="reauthenticate";try{const i=await Uc(t,yI(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=fx(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),qa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(t,e,n=!1){if(ir(t.app))return Promise.reject(ao(t));const r="signIn",s=await yI(t,r,e),i=await qa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function SV(t,e,n,r){return sn(t).onIdTokenChanged(e,n,r)}function TV(t,e,n){return sn(t).beforeAuthStateChanged(e,n)}function CV(t,e,n,r){return sn(t).onAuthStateChanged(e,n,r)}function NV(t){return sn(t).signOut()}const Mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=1e3,AV=10;class xI extends vI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xI.type="LOCAL";const kV=xI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI extends vI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wI.type="SESSION";const _I=wI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await RV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=yx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function jV(t){Vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function DV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function MV(){return bI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="firebaseLocalStorageDb",LV=1,Lh="firebaseLocalStorage",SI="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qf(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function VV(){const t=indexedDB.deleteDatabase(EI);return new mu(t).toPromise()}function ly(){const t=indexedDB.open(EI,LV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lh,{keyPath:SI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await VV(),e(await ly()))})})}async function N_(t,e,n){const r=qf(t,!0).put({[SI]:e,value:n});return new mu(r).toPromise()}async function FV(t,e){const n=qf(t,!1).get(e),r=await new mu(n).toPromise();return r===void 0?null:r.value}function I_(t,e){const n=qf(t,!0).delete(e);return new mu(n).toPromise()}const UV=800,zV=3;class TI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(MV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await DV(),!this.activeServiceWorker)return;this.sender=new PV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await N_(e,Mh,"1"),await I_(e,Mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qf(s,!1).getAll();return new mu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TI.type="LOCAL";const $V=TI;new hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){return e?ss(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends gI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BV(t){return EV(t.auth,new vx(t),t.bypassAuthState)}function HV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),bV(n,new vx(t),t.bypassAuthState)}async function WV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),_V(n,new vx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BV;case"linkViaPopup":case"linkViaRedirect":return WV;case"reauthViaPopup":case"reauthViaRedirect":return HV;default:$r(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=new hu(2e3,1e4);async function Ap(t,e,n){if(ir(t.app))return Promise.reject(dr(t,"operation-not-supported-in-this-environment"));const r=Hf(t);z6(t,e,gx);const s=CI(r,n);return new Zi(r,"signInViaPopup",e,s).executeNotNull()}class Zi extends NI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zi.currentPopupAction&&Zi.currentPopupAction.cancel(),Zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=yx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qV.get())};e()}}Zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="pendingRedirect",Hd=new Map;class KV extends NI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const r=await QV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QV(t,e){const n=JV(e),r=YV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XV(t,e){Hd.set(t._key(),e)}function YV(t){return ss(t._redirectPersistence)}function JV(t){return Bd(GV,t.config.apiKey,t.name)}async function ZV(t,e,n=!1){if(ir(t.app))return Promise.reject(ao(t));const r=Hf(t),s=CI(r,e),o=await new KV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=10*60*1e3;class tF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!II(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(dr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eF&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function II({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return II(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e={}){return ll(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iF=/^https?/;async function oF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rF(t);for(const n of e)try{if(aF(n))return}catch{}$r(t,"unauthorized-domain")}function aF(t){const e=oy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iF.test(n))return!1;if(sF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=new hu(3e4,6e4);function k_(){const t=Vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cF(t){return new Promise((e,n)=>{var s,i,o;function r(){k_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k_(),n(dr(t,"network-request-failed"))},timeout:lF.get()})}if((i=(s=Vr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Vr().gapi)!=null&&o.load)r();else{const l=mV("iframefcb");return Vr()[l]=()=>{gapi.load?r():n(dr(t,"network-request-failed"))},hV(`${fV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Wd=null,e})}let Wd=null;function uF(t){return Wd=Wd||cF(t),Wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new hu(5e3,15e3),hF="__/auth/iframe",fF="emulator/auth/iframe",mF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gF(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dx(e,fF):`https://${t.config.authDomain}/${hF}`,r={apiKey:e.apiKey,appName:t.name,v:al},s=pF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${du(r).slice(1)}`}async function yF(t){const e=await uF(t),n=Vr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:gF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=dr(t,"network-request-failed"),l=Vr().setTimeout(()=>{i(o)},dF.get());function c(){Vr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xF=500,wF=600,_F="_blank",bF="http://localhost";class R_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EF(t,e,n,r=xF,s=wF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...vF,width:r.toString(),height:s.toString(),top:i,left:o},u=Qt().toLowerCase();n&&(l=lI(u)?_F:n),oI(u)&&(e=e||bF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[x,b])=>`${p}${x}=${b},`,"");if(sV(u)&&l!=="_self")return SF(e||"",l),new R_(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new R_(f)}function SF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="__/auth/handler",CF="emulator/auth/handler",NF=encodeURIComponent("fac");async function P_(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:al,eventId:s};if(e instanceof gx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",N5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof fu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${NF}=${encodeURIComponent(c)}`:"";return`${IF(t)}?${du(l).slice(1)}${u}`}function IF({config:t}){return t.emulator?dx(t,CF):`https://${t.authDomain}/${TF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class AF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_I,this._completeRedirectFn=ZV,this._overrideRedirectResult=XV}async _openPopup(e,n,r,s){var o;ys((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await P_(e,n,r,oy(),s);return EF(e,i,yx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await P_(e,n,r,oy(),s);return jV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ys(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yF(e),r=new tF(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kp,{type:kp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[kp];i!==void 0&&n(!!i),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fI()||aI()||mx()}}const kF=AF;var j_="@firebase/auth",D_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jF(t){Wa(new vo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mI(t)},u=new uV(r,s,i,c);return gV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wa(new vo("auth-internal",e=>{const n=Hf(e.getProvider("auth").getImmediate());return(r=>new RF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hi(j_,D_,PF(t)),hi(j_,D_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=5*60,OF=HN("authIdTokenMaxAge")||DF;let O_=null;const MF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OF)return;const s=n==null?void 0:n.token;O_!==s&&(O_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LF(t=XN()){const e=lx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pV(t,{popupRedirectResolver:kF,persistence:[$V,kV,_I]}),r=HN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=MF(i.toString());TV(n,o,()=>o(n.currentUser)),SV(n,l=>o(l))}}const s=$N("auth");return s&&yV(n,`http://${s}`),n}function VF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}dV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",VF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jF("Browser");var FF="firebase",UF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hi(FF,UF,"app");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,AI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function N(){}N.prototype=S.prototype,C.F=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(I,A,D){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return S.prototype[A].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,N){N||(N=0);const I=Array(16);if(typeof S=="string")for(var A=0;A<16;++A)I[A]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(A=0;A<16;++A)I[A]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],A=C.g[2];let D=C.g[3],P;P=S+(D^N&(A^D))+I[0]+3614090360&4294967295,S=N+(P<<7&4294967295|P>>>25),P=D+(A^S&(N^A))+I[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=A+(N^D&(S^N))+I[2]+606105819&4294967295,A=D+(P<<17&4294967295|P>>>15),P=N+(S^A&(D^S))+I[3]+3250441966&4294967295,N=A+(P<<22&4294967295|P>>>10),P=S+(D^N&(A^D))+I[4]+4118548399&4294967295,S=N+(P<<7&4294967295|P>>>25),P=D+(A^S&(N^A))+I[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=A+(N^D&(S^N))+I[6]+2821735955&4294967295,A=D+(P<<17&4294967295|P>>>15),P=N+(S^A&(D^S))+I[7]+4249261313&4294967295,N=A+(P<<22&4294967295|P>>>10),P=S+(D^N&(A^D))+I[8]+1770035416&4294967295,S=N+(P<<7&4294967295|P>>>25),P=D+(A^S&(N^A))+I[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=A+(N^D&(S^N))+I[10]+4294925233&4294967295,A=D+(P<<17&4294967295|P>>>15),P=N+(S^A&(D^S))+I[11]+2304563134&4294967295,N=A+(P<<22&4294967295|P>>>10),P=S+(D^N&(A^D))+I[12]+1804603682&4294967295,S=N+(P<<7&4294967295|P>>>25),P=D+(A^S&(N^A))+I[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=A+(N^D&(S^N))+I[14]+2792965006&4294967295,A=D+(P<<17&4294967295|P>>>15),P=N+(S^A&(D^S))+I[15]+1236535329&4294967295,N=A+(P<<22&4294967295|P>>>10),P=S+(A^D&(N^A))+I[1]+4129170786&4294967295,S=N+(P<<5&4294967295|P>>>27),P=D+(N^A&(S^N))+I[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=A+(S^N&(D^S))+I[11]+643717713&4294967295,A=D+(P<<14&4294967295|P>>>18),P=N+(D^S&(A^D))+I[0]+3921069994&4294967295,N=A+(P<<20&4294967295|P>>>12),P=S+(A^D&(N^A))+I[5]+3593408605&4294967295,S=N+(P<<5&4294967295|P>>>27),P=D+(N^A&(S^N))+I[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=A+(S^N&(D^S))+I[15]+3634488961&4294967295,A=D+(P<<14&4294967295|P>>>18),P=N+(D^S&(A^D))+I[4]+3889429448&4294967295,N=A+(P<<20&4294967295|P>>>12),P=S+(A^D&(N^A))+I[9]+568446438&4294967295,S=N+(P<<5&4294967295|P>>>27),P=D+(N^A&(S^N))+I[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=A+(S^N&(D^S))+I[3]+4107603335&4294967295,A=D+(P<<14&4294967295|P>>>18),P=N+(D^S&(A^D))+I[8]+1163531501&4294967295,N=A+(P<<20&4294967295|P>>>12),P=S+(A^D&(N^A))+I[13]+2850285829&4294967295,S=N+(P<<5&4294967295|P>>>27),P=D+(N^A&(S^N))+I[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=A+(S^N&(D^S))+I[7]+1735328473&4294967295,A=D+(P<<14&4294967295|P>>>18),P=N+(D^S&(A^D))+I[12]+2368359562&4294967295,N=A+(P<<20&4294967295|P>>>12),P=S+(N^A^D)+I[5]+4294588738&4294967295,S=N+(P<<4&4294967295|P>>>28),P=D+(S^N^A)+I[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=A+(D^S^N)+I[11]+1839030562&4294967295,A=D+(P<<16&4294967295|P>>>16),P=N+(A^D^S)+I[14]+4259657740&4294967295,N=A+(P<<23&4294967295|P>>>9),P=S+(N^A^D)+I[1]+2763975236&4294967295,S=N+(P<<4&4294967295|P>>>28),P=D+(S^N^A)+I[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=A+(D^S^N)+I[7]+4139469664&4294967295,A=D+(P<<16&4294967295|P>>>16),P=N+(A^D^S)+I[10]+3200236656&4294967295,N=A+(P<<23&4294967295|P>>>9),P=S+(N^A^D)+I[13]+681279174&4294967295,S=N+(P<<4&4294967295|P>>>28),P=D+(S^N^A)+I[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=A+(D^S^N)+I[3]+3572445317&4294967295,A=D+(P<<16&4294967295|P>>>16),P=N+(A^D^S)+I[6]+76029189&4294967295,N=A+(P<<23&4294967295|P>>>9),P=S+(N^A^D)+I[9]+3654602809&4294967295,S=N+(P<<4&4294967295|P>>>28),P=D+(S^N^A)+I[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=A+(D^S^N)+I[15]+530742520&4294967295,A=D+(P<<16&4294967295|P>>>16),P=N+(A^D^S)+I[2]+3299628645&4294967295,N=A+(P<<23&4294967295|P>>>9),P=S+(A^(N|~D))+I[0]+4096336452&4294967295,S=N+(P<<6&4294967295|P>>>26),P=D+(N^(S|~A))+I[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=A+(S^(D|~N))+I[14]+2878612391&4294967295,A=D+(P<<15&4294967295|P>>>17),P=N+(D^(A|~S))+I[5]+4237533241&4294967295,N=A+(P<<21&4294967295|P>>>11),P=S+(A^(N|~D))+I[12]+1700485571&4294967295,S=N+(P<<6&4294967295|P>>>26),P=D+(N^(S|~A))+I[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=A+(S^(D|~N))+I[10]+4293915773&4294967295,A=D+(P<<15&4294967295|P>>>17),P=N+(D^(A|~S))+I[1]+2240044497&4294967295,N=A+(P<<21&4294967295|P>>>11),P=S+(A^(N|~D))+I[8]+1873313359&4294967295,S=N+(P<<6&4294967295|P>>>26),P=D+(N^(S|~A))+I[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=A+(S^(D|~N))+I[6]+2734768916&4294967295,A=D+(P<<15&4294967295|P>>>17),P=N+(D^(A|~S))+I[13]+1309151649&4294967295,N=A+(P<<21&4294967295|P>>>11),P=S+(A^(N|~D))+I[4]+4149444226&4294967295,S=N+(P<<6&4294967295|P>>>26),P=D+(N^(S|~A))+I[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=A+(S^(D|~N))+I[2]+718787259&4294967295,A=D+(P<<15&4294967295|P>>>17),P=N+(D^(A|~S))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+A&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const N=S-this.blockSize,I=this.C;let A=this.h,D=0;for(;D<S;){if(A==0)for(;D<=N;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<S;)if(I[A++]=C.charCodeAt(D++),A==this.blockSize){s(this,I),A=0;break}}else for(;D<S;)if(I[A++]=C[D++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,N=0;N<4;++N)for(let I=0;I<32;I+=8)C[S++]=this.g[N]>>>I&255;return C};function i(C,S){var N=l;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function o(C,S){this.h=S;const N=[];let I=!0;for(let A=C.length-1;A>=0;A--){const D=C[A]|0;I&&D==S||(N[A]=D,I=!1)}this.g=N}var l={};function c(C){return-128<=C&&C<128?i(C,function(S){return new o([S|0],S<0?-1:0)}):new o([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(C<0)return w(u(-C));const S=[];let N=1;for(let I=0;C>=N;I++)S[I]=C/N|0,N*=4294967296;return new o(S,0)}function h(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return w(h(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(S,8));let I=f;for(let D=0;D<C.length;D+=8){var A=Math.min(8,C.length-D);const P=parseInt(C.substring(D,D+A),S);A<8?(A=u(Math.pow(S,A)),I=I.j(A).add(u(P))):(I=I.j(N),I=I.add(u(P)))}return I}var f=c(0),p=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();let C=0,S=1;for(let N=0;N<this.g.length;N++){const I=this.i(N);C+=(I>=0?I:4294967296+I)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+w(this).toString(C);const S=u(Math.pow(C,6));var N=this;let I="";for(;;){const A=k(N,S).g;N=_(N,A.j(S));let D=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=A,b(N))return D+I;for(;D.length<6;)D="0"+D;I=D+I}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=_(this,C),y(C)?-1:b(C)?0:1};function w(C){const S=C.g.length,N=[];for(let I=0;I<S;I++)N[I]=~C.g[I];return new o(N,~C.h).add(p)}t.abs=function(){return y(this)?w(this):this},t.add=function(C){const S=Math.max(this.g.length,C.g.length),N=[];let I=0;for(let A=0;A<=S;A++){let D=I+(this.i(A)&65535)+(C.i(A)&65535),P=(D>>>16)+(this.i(A)>>>16)+(C.i(A)>>>16);I=P>>>16,D&=65535,P&=65535,N[A]=P<<16|D}return new o(N,N[N.length-1]&-2147483648?-1:0)};function _(C,S){return C.add(w(S))}t.j=function(C){if(b(this)||b(C))return f;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(this.l(x)<0&&C.l(x)<0)return u(this.m()*C.m());const S=this.g.length+C.g.length,N=[];for(var I=0;I<2*S;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<C.g.length;A++){const D=this.i(I)>>>16,P=this.i(I)&65535,B=C.i(A)>>>16,ie=C.i(A)&65535;N[2*I+2*A]+=P*ie,v(N,2*I+2*A),N[2*I+2*A+1]+=D*ie,v(N,2*I+2*A+1),N[2*I+2*A+1]+=P*B,v(N,2*I+2*A+1),N[2*I+2*A+2]+=D*B,v(N,2*I+2*A+2)}for(C=0;C<S;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=S;C<2*S;C++)N[C]=0;return new o(N,0)};function v(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function T(C,S){this.g=C,this.h=S}function k(C,S){if(b(S))throw Error("division by zero");if(b(C))return new T(f,f);if(y(C))return S=k(w(C),S),new T(w(S.g),w(S.h));if(y(S))return S=k(C,w(S)),new T(w(S.g),S.h);if(C.g.length>30){if(y(C)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var N=p,I=S;I.l(C)<=0;)N=j(N),I=j(I);var A=O(N,1),D=O(I,1);for(I=O(I,2),N=O(N,2);!b(I);){var P=D.add(I);P.l(C)<=0&&(A=A.add(N),D=P),I=O(I,1),N=O(N,1)}return S=_(C,A.j(S)),new T(A,S)}for(A=f;C.l(S)>=0;){for(N=Math.max(1,Math.floor(C.m()/S.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),D=u(N),P=D.j(S);y(P)||P.l(C)>0;)N-=I,D=u(N),P=D.j(S);b(D)&&(D=p),A=A.add(D),C=_(C,P)}return new T(A,C)}t.B=function(C){return k(this,C).h},t.and=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let I=0;I<S;I++)N[I]=this.i(I)&C.i(I);return new o(N,this.h&C.h)},t.or=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let I=0;I<S;I++)N[I]=this.i(I)|C.i(I);return new o(N,this.h|C.h)},t.xor=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let I=0;I<S;I++)N[I]=this.i(I)^C.i(I);return new o(N,this.h^C.h)};function j(C){const S=C.g.length+1,N=[];for(let I=0;I<S;I++)N[I]=C.i(I)<<1|C.i(I-1)>>>31;return new o(N,C.h)}function O(C,S){const N=S>>5;S%=32;const I=C.g.length-N,A=[];for(let D=0;D<I;D++)A[D]=S>0?C.i(D+N)>>>S|C.i(D+N+1)<<32-S:C.i(D+N);return new o(A,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,fi=o}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kI,ql,RI,qd,cy,PI,jI,DI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var g=0;g<d.length;++g){var E=d[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var E=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var V=d[R];if(!(V in E))break e;E=E[V]}d=d[d.length-1],R=E[d],g=g(R),g!=R&&g!=null&&e(E,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var E=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&E.push([R,g[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,E){return d.call.apply(d.bind,arguments)}function u(d,g,E){return u=c,u.apply(null,arguments)}function h(d,g){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function f(d,g){function E(){}E.prototype=g.prototype,d.Z=g.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(R,V,U){for(var ne=Array(arguments.length-2),be=2;be<arguments.length;be++)ne[be-2]=arguments[be];return g.prototype[V].apply(R,ne)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function x(d){const g=d.length;if(g>0){const E=Array(g);for(let R=0;R<g;R++)E[R]=d[R];return E}return[]}function b(d,g){for(let R=1;R<arguments.length;R++){const V=arguments[R];var E=typeof V;if(E=E!="object"?E:V?Array.isArray(V)?"array":E:"null",E=="array"||E=="object"&&typeof V.length=="number"){E=d.length||0;const U=V.length||0;d.length=E+U;for(let ne=0;ne<U;ne++)d[E+ne]=V[ne]}else d.push(V)}}class y{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(d){o.setTimeout(()=>{throw d},0)}function _(){var d=C;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class v{constructor(){this.h=this.g=null}add(g,E){const R=T.get();R.set(g,E),this.h?this.h.next=R:this.g=R,this.h=R}}var T=new y(()=>new k,d=>d.reset());class k{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let j,O=!1,C=new v,S=()=>{const d=Promise.resolve(void 0);j=()=>{d.then(N)}};function N(){for(var d;d=_();){try{d.h.call(d.g)}catch(E){w(E)}var g=T;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}O=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};o.addEventListener("test",E,g),o.removeEventListener("test",E,g)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function B(d,g){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(B,A),B.prototype.init=function(d,g){const E=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(E=="mouseover"?g=d.fromElement:E=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),F=0;function G(d,g,E,R,V){this.listener=d,this.proxy=null,this.src=g,this.type=E,this.capture=!!R,this.ha=V,this.key=++F,this.da=this.fa=!1}function L(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function M(d,g,E){for(const R in d)g.call(E,d[R],R,d)}function $(d,g){for(const E in d)g.call(void 0,d[E],E,d)}function z(d){const g={};for(const E in d)g[E]=d[E];return g}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(d,g){let E,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(E in R)d[E]=R[E];for(let U=0;U<X.length;U++)E=X[U],Object.prototype.hasOwnProperty.call(R,E)&&(d[E]=R[E])}}function Z(d){this.src=d,this.g={},this.h=0}Z.prototype.add=function(d,g,E,R,V){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const ne=ee(d,g,R,V);return ne>-1?(g=d[ne],E||(g.fa=!1)):(g=new G(g,this.src,U,!!R,V),g.fa=E,d.push(g)),g};function ce(d,g){const E=g.type;if(E in d.g){var R=d.g[E],V=Array.prototype.indexOf.call(R,g,void 0),U;(U=V>=0)&&Array.prototype.splice.call(R,V,1),U&&(L(g),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ee(d,g,E,R){for(let V=0;V<d.length;++V){const U=d[V];if(!U.da&&U.listener==g&&U.capture==!!E&&U.ha==R)return V}return-1}var H="closure_lm_"+(Math.random()*1e6|0),te={};function pe(d,g,E,R,V){if(Array.isArray(g)){for(let U=0;U<g.length;U++)pe(d,g[U],E,R,V);return null}return E=Mi(E),d&&d[ie]?d.J(g,E,l(R)?!!R.capture:!!R,V):re(d,g,E,!1,R,V)}function re(d,g,E,R,V,U){if(!g)throw Error("Invalid event type");const ne=l(V)?!!V.capture:!!V;let be=Vt(d);if(be||(d[H]=be=new Z(d)),E=be.add(g,E,R,ne,U),E.proxy)return E;if(R=fe(),E.proxy=R,R.src=d,R.listener=E,d.addEventListener)D||(V=ne),V===void 0&&(V=!1),d.addEventListener(g.toString(),R,V);else if(d.attachEvent)d.attachEvent(Pe(g.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function fe(){function d(E){return g.call(d.src,d.listener,E)}const g=cn;return d}function de(d,g,E,R,V){if(Array.isArray(g))for(var U=0;U<g.length;U++)de(d,g[U],E,R,V);else R=l(R)?!!R.capture:!!R,E=Mi(E),d&&d[ie]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],E=ee(g,E,R,V),E>-1&&(L(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=Vt(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ee(g,E,R,V)),(E=d>-1?g[d]:null)&&ke(E))}function ke(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ie])ce(g.i,d);else{var E=d.type,R=d.proxy;g.removeEventListener?g.removeEventListener(E,R,d.capture):g.detachEvent?g.detachEvent(Pe(E),R):g.addListener&&g.removeListener&&g.removeListener(R),(E=Vt(g))?(ce(E,d),E.h==0&&(E.src=null,g[H]=null)):L(d)}}}function Pe(d){return d in te?te[d]:te[d]="on"+d}function cn(d,g){if(d.da)d=!0;else{g=new B(g,this);const E=d.listener,R=d.ha||d.src;d.fa&&ke(d),d=E.call(R,g)}return d}function Vt(d){return d=d[H],d instanceof Z?d:null}var Mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mi(d){return typeof d=="function"?d:(d[Mn]||(d[Mn]=function(g){return d.handleEvent(g)}),d[Mn])}function He(){I.call(this),this.i=new Z(this),this.M=this,this.G=null}f(He,I),He.prototype[ie]=!0,He.prototype.removeEventListener=function(d,g,E,R){de(this,d,g,E,R)};function Qe(d,g){var E,R=d.G;if(R)for(E=[];R;R=R.G)E.push(R);if(d=d.M,R=g.type||g,typeof g=="string")g=new A(g,d);else if(g instanceof A)g.target=g.target||d;else{var V=g;g=new A(R,d),J(g,V)}V=!0;let U,ne;if(E)for(ne=E.length-1;ne>=0;ne--)U=g.g=E[ne],V=Gr(U,R,!0,g)&&V;if(U=g.g=d,V=Gr(U,R,!0,g)&&V,V=Gr(U,R,!1,g)&&V,E)for(ne=0;ne<E.length;ne++)U=g.g=E[ne],V=Gr(U,R,!1,g)&&V}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const E=d.g[g];for(let R=0;R<E.length;R++)L(E[R]);delete d.g[g],d.h--}}this.G=null},He.prototype.J=function(d,g,E,R){return this.i.add(String(d),g,!1,E,R)},He.prototype.K=function(d,g,E,R){return this.i.add(String(d),g,!0,E,R)};function Gr(d,g,E,R){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let U=0;U<g.length;++U){const ne=g[U];if(ne&&!ne.da&&ne.capture==E){const be=ne.listener,vt=ne.ha||ne.src;ne.fa&&ce(d.i,ne),V=be.call(vt,R)!==!1&&V}}return V&&!R.defaultPrevented}function Do(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function xl(d){d.g=Do(()=>{d.g=null,d.i&&(d.i=!1,xl(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Au extends I{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(d){I.call(this),this.h=d,this.g={}}f(Li,I);var ku=[];function Kr(d){M(d.g,function(g,E){this.g.hasOwnProperty(E)&&ke(g)},d),d.g={}}Li.prototype.N=function(){Li.Z.N.call(this),Kr(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=o.JSON.stringify,Vi=o.JSON.parse,Ru=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Qn(){}function wl(){}var Fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _l(){A.call(this,"d")}f(_l,A);function Ui(){A.call(this,"c")}f(Ui,A);var br={},Pu=null;function zi(){return Pu=Pu||new He}br.Ia="serverreachability";function ju(d){A.call(this,br.Ia,d)}f(ju,A);function $i(d){const g=zi();Qe(g,new ju(g))}br.STAT_EVENT="statevent";function Du(d,g){A.call(this,br.STAT_EVENT,d),this.stat=g}f(Du,A);function je(d){const g=zi();Qe(g,new Du(g,d))}br.Ja="timingevent";function Ft(d,g){A.call(this,br.Ja,d),this.size=g}f(Ft,A);function gt(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function un(){this.g=!0}un.prototype.ua=function(){this.g=!1};function dn(d,g,E,R,V,U){d.info(function(){if(d.g)if(U){var ne="",be=U.split("&");for(let Ue=0;Ue<be.length;Ue++){var vt=be[Ue].split("=");if(vt.length>1){const Ct=vt[0];vt=vt[1];const Tr=Ct.split("_");ne=Tr.length>=2&&Tr[1]=="type"?ne+(Ct+"="+vt+"&"):ne+(Ct+"=redacted&")}}}else ne=null;else ne=U;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+g+`
`+E+`
`+ne})}function Xt(d,g,E,R,V,U,ne){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+g+`
`+E+`
`+U+" "+ne})}function jt(d,g,E,R){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+yt(d,E)+(R?" "+R:"")})}function Ts(d,g){d.info(function(){return"TIMEOUT: "+g})}un.prototype.info=function(){};function yt(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var E=U[d];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ne=1;ne<R.length;ne++)R[ne]=""}}}}return _r(U)}catch{return g}}var _n={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ln;function Qr(){}f(Qr,Qn),Qr.prototype.g=function(){return new XMLHttpRequest},Ln=new Qr;function Xn(d){return encodeURIComponent(String(d))}function Er(d){var g=1;d=d.split(":");const E=[];for(;g>0&&d.length;)E.push(d.shift()),g--;return d.length&&E.push(d.join(":")),E}function hn(d,g,E,R){this.j=d,this.i=g,this.l=E,this.S=R||1,this.V=new Li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oo}function Oo(){this.i=null,this.g="",this.h=!1}var O0={},Am={};function km(d,g,E){d.M=1,d.A=Mu(Sr(g)),d.u=E,d.R=!0,M0(d,null)}function M0(d,g){d.F=Date.now(),Ou(d),d.B=Sr(d.A);var E=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Q0(E.i,"t",R),d.C=0,E=d.j.L,d.h=new Oo,d.g=fw(d.j,E?g:null,!d.u),d.P>0&&(d.O=new Au(u(d.Y,d,d.g),d.P)),g=d.V,E=d.g,R=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(ku[0]=V.toString()),V=ku);for(let U=0;U<V.length;U++){const ne=pe(E,V[U],R||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),$i(),dn(d.i,d.v,d.B,d.l,d.S,d.u)}hn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Is(d)==3?g.j():this.Y(d)},hn.prototype.Y=function(d){try{if(d==this.g)e:{const be=Is(this.g),vt=this.g.ya(),Ue=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||nw(this.g)))){this.K||be!=4||vt==7||(vt==8||Ue<=0?$i(3):$i(2)),Rm(this);var g=this.g.ca();this.X=g;var E=PP(this);if(this.o=g==200,Xt(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,V=this.g;if((R=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var U=R;break t}}U=null}if(d=U)jt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pm(this,d);else{this.o=!1,this.m=3,je(12),Bi(this),bl(this);break e}}if(this.R){d=!0;let Ct;for(;!this.K&&this.C<E.length;)if(Ct=jP(this,E),Ct==Am){be==4&&(this.m=4,je(14),d=!1),jt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==O0){this.m=4,je(15),jt(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else jt(this.i,this.l,Ct,null),Pm(this,Ct);if(L0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||E.length!=0||this.h.h||(this.m=1,je(16),d=!1),this.o=this.o&&d,!d)jt(this.i,this.l,E,"[Invalid Chunked Response]"),Bi(this),bl(this);else if(E.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Um(ne),ne.P=!0,je(11))}}else jt(this.i,this.l,E,null),Pm(this,E);be==4&&Bi(this),this.o&&!this.K&&(be==4?cw(this.j,this):(this.o=!1,Ou(this)))}else GP(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,je(12)):(this.m=0,je(13)),Bi(this),bl(this)}}}catch{}finally{}};function PP(d){if(!L0(d))return d.g.la();const g=nw(d.g);if(g==="")return"";let E="";const R=g.length,V=Is(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Bi(d),bl(d),"";d.h.i=new o.TextDecoder}for(let U=0;U<R;U++)d.h.h=!0,E+=d.h.i.decode(g[U],{stream:!(V&&U==R-1)});return g.length=0,d.h.g+=E,d.C=0,d.h.g}function L0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function jP(d,g){var E=d.C,R=g.indexOf(`
`,E);return R==-1?Am:(E=Number(g.substring(E,R)),isNaN(E)?O0:(R+=1,R+E>g.length?Am:(g=g.slice(R,R+E),d.C=R+E,g)))}hn.prototype.cancel=function(){this.K=!0,Bi(this)};function Ou(d){d.T=Date.now()+d.H,V0(d,d.H)}function V0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=gt(u(d.aa,d),g)}function Rm(d){d.D&&(o.clearTimeout(d.D),d.D=null)}hn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ts(this.i,this.B),this.M!=2&&($i(),je(17)),Bi(this),this.m=2,bl(this)):V0(this,this.T-d)};function bl(d){d.j.I==0||d.K||cw(d.j,d)}function Bi(d){Rm(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Kr(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Pm(d,g){try{var E=d.j;if(E.I!=0&&(E.g==d||jm(E.h,d))){if(!d.L&&jm(E.h,d)&&E.I==3){try{var R=E.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)zu(E),Fu(E);else break e;Fm(E),je(18)}}else E.xa=V[1],0<E.xa-E.K&&V[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=gt(u(E.Va,E),6e3));z0(E.h)<=1&&E.ta&&(E.ta=void 0)}else Wi(E,11)}else if((d.L||E.g==d)&&zu(E),!P(g))for(V=E.Ba.g.parse(g),g=0;g<V.length;g++){let Ue=V[g];const Ct=Ue[0];if(!(Ct<=E.K))if(E.K=Ct,Ue=Ue[1],E.I==2)if(Ue[0]=="c"){E.M=Ue[1],E.ba=Ue[2];const Tr=Ue[3];Tr!=null&&(E.ka=Tr,E.j.info("VER="+E.ka));const qi=Ue[4];qi!=null&&(E.za=qi,E.j.info("SVER="+E.za));const As=Ue[5];As!=null&&typeof As=="number"&&As>0&&(R=1.5*As,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const ks=d.g;if(ks){const Bu=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var U=R.h;U.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Dm(U,U.h),U.h=null))}if(R.G){const zm=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;zm&&(R.wa=zm,We(R.J,R.G,zm))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var ne=d;if(R.na=hw(R,R.L?R.ba:null,R.W),ne.L){$0(R.h,ne);var be=ne,vt=R.O;vt&&(be.H=vt),be.D&&(Rm(be),Ou(be)),R.g=ne}else aw(R);E.i.length>0&&Uu(E)}else Ue[0]!="stop"&&Ue[0]!="close"||Wi(E,7);else E.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Wi(E,7):Vm(E):Ue[0]!="noop"&&E.l&&E.l.qa(Ue),E.A=0)}}$i(4)}catch{}}var DP=class{constructor(d,g){this.g=d,this.map=g}};function F0(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function U0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function z0(d){return d.h?1:d.g?d.g.size:0}function jm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Dm(d,g){d.g?d.g.add(g):d.h=g}function $0(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}F0.prototype.cancel=function(){if(this.i=B0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function B0(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const E of d.g.values())g=g.concat(E.G);return g}return x(d.i)}var H0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OP(d,g){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const R=d[E].indexOf("=");let V,U=null;R>=0?(V=d[E].substring(0,R),U=d[E].substring(R+1)):V=d[E],g(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Cs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Cs?(this.l=d.l,El(this,d.j),this.o=d.o,this.g=d.g,Sl(this,d.u),this.h=d.h,Om(this,X0(d.i)),this.m=d.m):d&&(g=String(d).match(H0))?(this.l=!1,El(this,g[1]||"",!0),this.o=Tl(g[2]||""),this.g=Tl(g[3]||"",!0),Sl(this,g[4]),this.h=Tl(g[5]||"",!0),Om(this,g[6]||"",!0),this.m=Tl(g[7]||"")):(this.l=!1,this.i=new Nl(null,this.l))}Cs.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Cl(g,W0,!0),":");var E=this.g;return(E||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Cl(g,W0,!0),"@"),d.push(Xn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Cl(E,E.charAt(0)=="/"?VP:LP,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Cl(E,UP)),d.join("")},Cs.prototype.resolve=function(d){const g=Sr(this);let E=!!d.j;E?El(g,d.j):E=!!d.o,E?g.o=d.o:E=!!d.g,E?g.g=d.g:E=d.u!=null;var R=d.h;if(E)Sl(g,d.u);else if(E=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var V=g.h.lastIndexOf("/");V!=-1&&(R=g.h.slice(0,V+1)+R)}if(V=R,V==".."||V==".")R="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){R=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let ne=0;ne<V.length;){const be=V[ne++];be=="."?R&&ne==V.length&&U.push(""):be==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),R&&ne==V.length&&U.push("")):(U.push(be),R=!0)}R=U.join("/")}else R=V}return E?g.h=R:E=d.i.toString()!=="",E?Om(g,X0(d.i)):E=!!d.m,E&&(g.m=d.m),g};function Sr(d){return new Cs(d)}function El(d,g,E){d.j=E?Tl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Sl(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Om(d,g,E){g instanceof Nl?(d.i=g,zP(d.i,d.l)):(E||(g=Cl(g,FP)),d.i=new Nl(g,d.l))}function We(d,g,E){d.i.set(g,E)}function Mu(d){return We(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Tl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Cl(d,g,E){return typeof d=="string"?(d=encodeURI(d).replace(g,MP),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function MP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var W0=/[#\/\?@]/g,LP=/[#\?:]/g,VP=/[#\?]/g,FP=/[#\?@]/g,UP=/#/g;function Nl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Hi(d){d.g||(d.g=new Map,d.h=0,d.i&&OP(d.i,function(g,E){d.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=Nl.prototype,t.add=function(d,g){Hi(this),this.i=null,d=Mo(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(g),this.h+=1,this};function q0(d,g){Hi(d),g=Mo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function G0(d,g){return Hi(d),g=Mo(d,g),d.g.has(g)}t.forEach=function(d,g){Hi(this),this.g.forEach(function(E,R){E.forEach(function(V){d.call(g,V,R,this)},this)},this)};function K0(d,g){Hi(d);let E=[];if(typeof g=="string")G0(d,g)&&(E=E.concat(d.g.get(Mo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)E=E.concat(d[g]);return E}t.set=function(d,g){return Hi(this),this.i=null,d=Mo(this,d),G0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=K0(this,d),d.length>0?String(d[0]):g):g};function Q0(d,g,E){q0(d,g),E.length>0&&(d.i=null,d.g.set(Mo(d,g),x(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var E=g[R];const V=Xn(E);E=K0(this,E);for(let U=0;U<E.length;U++){let ne=V;E[U]!==""&&(ne+="="+Xn(E[U])),d.push(ne)}}return this.i=d.join("&")};function X0(d){const g=new Nl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Mo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function zP(d,g){g&&!d.j&&(Hi(d),d.i=null,d.g.forEach(function(E,R){const V=R.toLowerCase();R!=V&&(q0(this,R),Q0(this,V,E))},d)),d.j=g}function $P(d,g){const E=new un;if(o.Image){const R=new Image;R.onload=h(Ns,E,"TestLoadImage: loaded",!0,g,R),R.onerror=h(Ns,E,"TestLoadImage: error",!1,g,R),R.onabort=h(Ns,E,"TestLoadImage: abort",!1,g,R),R.ontimeout=h(Ns,E,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else g(!1)}function BP(d,g){const E=new un,R=new AbortController,V=setTimeout(()=>{R.abort(),Ns(E,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:R.signal}).then(U=>{clearTimeout(V),U.ok?Ns(E,"TestPingServer: ok",!0,g):Ns(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Ns(E,"TestPingServer: error",!1,g)})}function Ns(d,g,E,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(E)}catch{}}function HP(){this.g=new Ru}function Mm(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Mm,Qn),Mm.prototype.g=function(){return new Lu(this.i,this.h)};function Lu(d,g){He.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Lu,He),t=Lu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Al(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Al(this)),this.g&&(this.readyState=3,Al(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Y0(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Y0(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Il(this):Al(this),this.readyState==3&&Y0(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Il(this))},t.Na=function(d){this.g&&(this.response=d,Il(this))},t.ga=function(){this.g&&Il(this)};function Il(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Al(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=g.next();return d.join(`\r
`)};function Al(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function J0(d){let g="";return M(d,function(E,R){g+=R,g+=":",g+=E,g+=`\r
`}),g}function Lm(d,g,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=J0(E),typeof d=="string"?E!=null&&Xn(E):We(d,g,E))}function rt(d){He.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(rt,He);var WP=/^https?$/i,qP=["POST","PUT"];t=rt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ln.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Z0(this,U);return}if(d=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)E.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const U of R.keys())E.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(U=>U.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(qP,g,void 0)>=0)||R||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ne]of E)this.g.setRequestHeader(U,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Z0(this,U)}};function Z0(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,ew(d),Vu(d)}function ew(d){d.A||(d.A=!0,Qe(d,"complete"),Qe(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Qe(this,"complete"),Qe(this,"abort"),Vu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vu(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tw(this):this.Xa())},t.Xa=function(){tw(this)};function tw(d){if(d.h&&typeof i<"u"){if(d.v&&Is(d)==4)setTimeout(d.Ca.bind(d),0);else if(Qe(d,"readystatechange"),Is(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var R;if(R=U===0){let ne=String(d.D).match(H0)[1]||null;!ne&&o.self&&o.self.location&&(ne=o.self.location.protocol.slice(0,-1)),R=!WP.test(ne?ne.toLowerCase():"")}E=R}if(E)Qe(d,"complete"),Qe(d,"success");else{d.o=6;try{var V=Is(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",ew(d)}}finally{Vu(d)}}}}function Vu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,g||Qe(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Is(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Is(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Vi(g)}};function nw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function GP(d){const g={};d=(d.g&&Is(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(P(d[R]))continue;var E=Er(d[R]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const U=g[V]||[];g[V]=U,U.push(E)}$(g,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kl(d,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||g}function rw(d){this.za=0,this.i=[],this.j=new un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kl("baseRetryDelayMs",5e3,d),this.Za=kl("retryDelaySeedMs",1e4,d),this.Ta=kl("forwardChannelMaxRetries",2,d),this.va=kl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new F0(d&&d.concurrentRequestLimit),this.Ba=new HP,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rw.prototype,t.ka=8,t.I=1,t.connect=function(d,g,E,R){je(0),this.W=d,this.H=g||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=hw(this,null,this.W),Uu(this)};function Vm(d){if(sw(d),d.I==3){var g=d.V++,E=Sr(d.J);if(We(E,"SID",d.M),We(E,"RID",g),We(E,"TYPE","terminate"),Rl(d,E),g=new hn(d,d.j,g),g.M=2,g.A=Mu(Sr(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=g.A,E=!0),E||(g.g=fw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ou(g)}dw(d)}function Fu(d){d.g&&(Um(d),d.g.cancel(),d.g=null)}function sw(d){Fu(d),d.v&&(o.clearTimeout(d.v),d.v=null),zu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Uu(d){if(!U0(d.h)&&!d.m){d.m=!0;var g=d.Ea;j||S(),O||(j(),O=!0),C.add(g,d),d.D=0}}function KP(d,g){return z0(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=gt(u(d.Ea,d,g),uw(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new hn(this,this.j,d);let U=this.o;if(this.U&&(U?(U=z(U),J(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=ow(this,V,g),E=Sr(this.J),We(E,"RID",d),We(E,"CVER",22),this.G&&We(E,"X-HTTP-Session-Id",this.G),Rl(this,E),U&&(this.R?g="headers="+Xn(J0(U))+"&"+g:this.u&&Lm(E,this.u,U)),Dm(this.h,V),this.Ra&&We(E,"TYPE","init"),this.S?(We(E,"$req",g),We(E,"SID","null"),V.U=!0,km(V,E,null)):km(V,E,g),this.I=2}}else this.I==3&&(d?iw(this,d):this.i.length==0||U0(this.h)||iw(this))};function iw(d,g){var E;g?E=g.l:E=d.V++;const R=Sr(d.J);We(R,"SID",d.M),We(R,"RID",E),We(R,"AID",d.K),Rl(d,R),d.u&&d.o&&Lm(R,d.u,d.o),E=new hn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),g&&(d.i=g.G.concat(d.i)),g=ow(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Dm(d.h,E),km(E,R,g)}function Rl(d,g){d.H&&M(d.H,function(E,R){We(g,R,E)}),d.l&&M({},function(E,R){We(g,R,E)})}function ow(d,g,E){E=Math.min(d.i.length,E);const R=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let be=-1;for(;;){const vt=["count="+E];be==-1?E>0?(be=V[0].g,vt.push("ofs="+be)):be=0:vt.push("ofs="+be);let Ue=!0;for(let Ct=0;Ct<E;Ct++){var U=V[Ct].g;const Tr=V[Ct].map;if(U-=be,U<0)be=Math.max(0,V[Ct].g-100),Ue=!1;else try{U="req"+U+"_"||"";try{var ne=Tr instanceof Map?Tr:Object.entries(Tr);for(const[qi,As]of ne){let ks=As;l(As)&&(ks=_r(As)),vt.push(U+qi+"="+encodeURIComponent(ks))}}catch(qi){throw vt.push(U+"type="+encodeURIComponent("_badmap")),qi}}catch{R&&R(Tr)}}if(Ue){ne=vt.join("&");break e}}ne=void 0}return d=d.i.splice(0,E),g.G=d,ne}function aw(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;j||S(),O||(j(),O=!0),C.add(g,d),d.A=0}}function Fm(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=gt(u(d.Da,d),uw(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,lw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=gt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,je(10),Fu(this),lw(this))};function Um(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function lw(d){d.g=new hn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Sr(d.na);We(g,"RID","rpc"),We(g,"SID",d.M),We(g,"AID",d.K),We(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&We(g,"TO",d.ia),We(g,"TYPE","xmlhttp"),Rl(d,g),d.u&&d.o&&Lm(g,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Mu(Sr(g)),E.u=null,E.R=!0,M0(E,d)}t.Va=function(){this.C!=null&&(this.C=null,Fu(this),Fm(this),je(19))};function zu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function cw(d,g){var E=null;if(d.g==g){zu(d),Um(d),d.g=null;var R=2}else if(jm(d.h,g))E=g.G,$0(d.h,g),R=1;else return;if(d.I!=0){if(g.o)if(R==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;R=zi(),Qe(R,new Ft(R,E)),Uu(d)}else aw(d);else if(V=g.m,V==3||V==0&&g.X>0||!(R==1&&KP(d,g)||R==2&&Fm(d)))switch(E&&E.length>0&&(g=d.h,g.i=g.i.concat(E)),V){case 1:Wi(d,5);break;case 4:Wi(d,10);break;case 3:Wi(d,6);break;default:Wi(d,2)}}}function uw(d,g){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*g}function Wi(d,g){if(d.j.info("Error code "+g),g==2){var E=u(d.bb,d),R=d.Ua;const V=!R;R=new Cs(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||El(R,"https"),Mu(R),V?$P(R.toString(),E):BP(R.toString(),E)}else je(2);d.I=0,d.l&&d.l.pa(g),dw(d),sw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function dw(d){if(d.I=0,d.ja=[],d.l){const g=B0(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ja,g),b(d.ja,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.oa()}}function hw(d,g,E){var R=E instanceof Cs?Sr(E):new Cs(E);if(R.g!="")g&&(R.g=g+"."+R.g),Sl(R,R.u);else{var V=o.location;R=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const U=new Cs(null);R&&El(U,R),g&&(U.g=g),V&&Sl(U,V),E&&(U.h=E),R=U}return E=d.G,g=d.wa,E&&g&&We(R,E,g),We(R,"VER",d.ka),Rl(d,R),R}function fw(d,g,E){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new rt(new Mm({ab:E})):new rt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mw(){}t=mw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $u(){}$u.prototype.g=function(d,g){return new En(d,g)};function En(d,g){He.call(this),this.g=new rw(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!P(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Lo(this)}f(En,He),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Vm(this.g)},En.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=_r(d),d=E);g.i.push(new DP(g.Ya++,d)),g.I==3&&Uu(g)},En.prototype.N=function(){this.g.l=null,delete this.j,Vm(this.g),delete this.g,En.Z.N.call(this)};function pw(d){_l.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const E in g){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(pw,_l);function gw(){Ui.call(this),this.status=1}f(gw,Ui);function Lo(d){this.g=d}f(Lo,mw),Lo.prototype.ra=function(){Qe(this.g,"a")},Lo.prototype.qa=function(d){Qe(this.g,new pw(d))},Lo.prototype.pa=function(d){Qe(this.g,new gw)},Lo.prototype.oa=function(){Qe(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,DI=function(){return new $u},jI=function(){return zi()},PI=br,cy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_n.NO_ERROR=0,_n.TIMEOUT=8,_n.HTTP_ERROR=6,qd=_n,bn.COMPLETE="complete",RI=bn,wl.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",He.prototype.listen=He.prototype.J,ql=wl,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,kI=rt}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const L_="@firebase/firestore",V_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new ox("@firebase/firestore");function $o(){return wo.logLevel}function oe(t,...e){if(wo.logLevel<=Ce.DEBUG){const n=e.map(xx);wo.debug(`Firestore (${cl}): ${t}`,...n)}}function vs(t,...e){if(wo.logLevel<=Ce.ERROR){const n=e.map(xx);wo.error(`Firestore (${cl}): ${t}`,...n)}}function _o(t,...e){if(wo.logLevel<=Ce.WARN){const n=e.map(xx);wo.warn(`Firestore (${cl}): ${t}`,...n)}}function xx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,OI(t,r,n)}function OI(t,e,n){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vs(r),new Error(r)}function Me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||OI(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends _s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class zF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $F{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new MI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class BF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new BF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function uy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Rp(s)===Rp(i)?Ne(s,i):Rp(s)?1:-1}return Ne(t.length,e.length)}const GF=55296,KF=57343;function Rp(t){const e=t.charCodeAt(0);return e>=GF&&e<=KF}function Ga(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__name__";class Ar{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ar.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ne(e.length,n.length)}static compareSegments(e,n){const r=Ar.isNumericId(e),s=Ar.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ar.extractNumericId(e).compare(Ar.extractNumericId(n)):uy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class ze extends Ar{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const QF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Ar{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return QF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U_}static keyField(){return new kt([U_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ze.fromString(e))}static fromName(e){return new he(ze.fromString(e).popFirst(5))}static empty(){return new he(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e,n){if(!n)throw new se(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FI(t,e,n,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z_(t){if(!he.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $_(t){if(he.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function UI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kf(t);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function pu(t,e){if(!UI(t))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=-62135596800,H_=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*H_);return new $e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B_)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pu(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:pt("string",$e._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new $e(0,0))}static max(){return new xe(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=-1;function XF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Ei(s,he.empty(),e)}function YF(t){return new Ei(t.readTime,t.key,zc)}class Ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ei(xe.min(),he.empty(),zc)}static max(){return new Ei(xe.max(),he.empty(),zc)}}function JF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==ZF)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function t9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=-1;function Xf(t){return t==null}function Vh(t){return t===0&&1/t==-1/0}function n9(t){return typeof t=="number"&&Number.isInteger(t)&&!Vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="";function r9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=W_(e)),e=s9(t.get(n),e);return W_(e)}function s9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zI:n+="";break;default:n+=i}}return n}function W_(t){return t+zI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=s??Ot.EMPTY,this.right=i??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G_(this.data.getIterator())}getIteratorFrom(e){return new G_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class G_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ar([])}unionWith(e){let n=new Et(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BI("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const i9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=i9.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="server_timestamp",WI="__type__",qI="__previous_value__",GI="__local_write_time__";function _x(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WI])==null?void 0:r.stringValue)===HI}function Yf(t){const e=t.mapValue.fields[qI];return _x(e)?Yf(e):e}function $c(t){const e=Si(t.mapValue.fields[GI].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Fh="(default)";class Ka{constructor(e,n){this.projectId=e,this.database=n||Fh}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="__type__",QI="__max__",gd={mapValue:{fields:{__type__:{stringValue:QI}}}},XI="__vector__",Uh="value";function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_x(t)?4:l9(t)?9007199254740991:a9(t)?10:11:ge(28295,{value:t})}function Br(t,e){if(t===e)return!0;const n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Si(s.timestampValue),l=Si(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ti(s.bytesValue).isEqual(Ti(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=lt(s.doubleValue),l=lt(i.doubleValue);return o===l?Vh(o)===Vh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ga(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(q_(o)!==q_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Br(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Bc(t,e){return(t.values||[]).find(n=>Br(n,e))!==void 0}function Qa(t,e){if(t===e)return 0;const n=Ci(t),r=Ci(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=lt(i.integerValue||i.doubleValue),c=lt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return K_(t.timestampValue,e.timestampValue);case 4:return K_($c(t),$c(e));case 5:return uy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ti(i),c=Ti(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ne(l[u],c[u]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ne(lt(i.latitude),lt(o.latitude));return l!==0?l:Ne(lt(i.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,x,b,y;const l=i.fields||{},c=o.fields||{},u=(p=l[Uh])==null?void 0:p.arrayValue,h=(x=c[Uh])==null?void 0:x.arrayValue,f=Ne(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return f!==0?f:Q_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===gd.mapValue&&o===gd.mapValue)return 0;if(i===gd.mapValue)return 1;if(o===gd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=uy(c[f],h[f]);if(p!==0)return p;const x=Qa(l[c[f]],u[h[f]]);if(x!==0)return x}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function K_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Si(t),r=Si(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function Q_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qa(n[s],r[s]);if(i)return i}return Ne(n.length,r.length)}function Xa(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Si(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dy(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function Gd(t){switch(Ci(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(t);return e?16+Gd(e):16;case 5:return 2*t.stringValue.length;case 6:return Ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Gd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ko(r.fields,(i,o)=>{s+=i.length+Gd(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function X_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hy(t){return!!t&&"integerValue"in t}function bx(t){return!!t&&"arrayValue"in t}function Y_(t){return!!t&&"nullValue"in t}function J_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kd(t){return!!t&&"mapValue"in t}function a9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[KI])==null?void 0:r.stringValue)===XI}function lc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lc(t.arrayValue.values[n]);return e}return{...t}}function l9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===QI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=lc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Kd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new $n(lc(this.value))}}function YI(t){const e=[];return ko(t.fields,(n,r)=>{const s=new kt([n]);if(Kd(r)){const i=YI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gt(e,0,xe.min(),xe.min(),xe.min(),$n.empty(),0)}static newFoundDocument(e,n,r,s){return new Gt(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new Gt(e,2,n,xe.min(),xe.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,xe.min(),xe.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.position=e,this.inclusive=n}}function Z_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Qa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function c9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{}class mt extends JI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d9(e,n,r):n==="array-contains"?new m9(e,r):n==="in"?new p9(e,r):n==="not-in"?new g9(e,r):n==="array-contains-any"?new y9(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h9(e,r):new f9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends JI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new yr(e,n)}matches(e){return ZI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZI(t){return t.op==="and"}function eA(t){return u9(t)&&ZI(t)}function u9(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function fy(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Xa(t.value);if(eA(t))return t.filters.map(e=>fy(e)).join(",");{const e=t.filters.map(n=>fy(n)).join(",");return`${t.op}(${e})`}}function tA(t,e){return t instanceof mt?function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(t,e):t instanceof yr?function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&tA(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function nA(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(t):t instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(nA).join(" ,")+"}"}(t):"Filter"}class d9 extends mt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class h9 extends mt{constructor(e,n){super(e,"in",n),this.keys=rA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f9 extends mt{constructor(e,n){super(e,"not-in",n),this.keys=rA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class m9 extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bx(n)&&Bc(n.arrayValue,this.value)}}class p9 extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bc(this.value.arrayValue,n)}}class g9 extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bc(this.value.arrayValue,n)}}class y9 extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function tb(t,e=null,n=[],r=[],s=null,i=null,o=null){return new v9(t,e,n,r,s,i,o)}function Ex(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xa(r)).join(",")),e.Te=n}return e.Te}function Sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eb(t.startAt,e.startAt)&&eb(t.endAt,e.endAt)}function my(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function x9(t,e,n,r,s,i,o,l){return new hl(t,e,n,r,s,i,o,l)}function Jf(t){return new hl(t)}function nb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sA(t){return t.collectionGroup!==null}function cc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Et(kt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Hc(i,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new Hc(kt.keyField(),r))}return e.Ie}function Fr(t){const e=we(t);return e.Ee||(e.Ee=w9(e,cc(t))),e.Ee}function w9(t,e){if(t.limitType==="F")return tb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Hc(s.field,i)});const n=t.endAt?new zh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zh(t.startAt.position,t.startAt.inclusive):null;return tb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function py(t,e){const n=t.filters.concat([e]);return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $h(t,e,n){return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zf(t,e){return Sx(Fr(t),Fr(e))&&t.limitType===e.limitType}function iA(t){return`${Ex(Fr(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nA(s)).join(", ")}]`),Xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Xa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Xa(s)).join(",")),`Target(${r})`}(Fr(t))}; limitType=${t.limitType})`}function em(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of cc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=Z_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,cc(r),s)||r.endAt&&!function(o,l,c){const u=Z_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,cc(r),s))}(t,e)}function _9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oA(t){return(e,n)=>{let r=!1;for(const s of cc(t)){const i=b9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function b9(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Qa(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=new nt(he.comparator);function xs(){return E9}const aA=new nt(he.comparator);function Gl(...t){let e=aA;for(const n of t)e=e.insert(n.key,n);return e}function lA(t){let e=aA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function eo(){return uc()}function cA(){return uc()}function uc(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const S9=new nt(he.comparator),T9=new Et(he.comparator);function Ie(...t){let e=T9;for(const n of t)e=e.add(n);return e}const C9=new Et(Ne);function N9(){return C9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function uA(t){return{integerValue:""+t}}function I9(t,e){return n9(e)?uA(e):Tx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this._=void 0}}function A9(t,e,n){return t instanceof Wc?function(s,i){const o={fields:{[WI]:{stringValue:HI},[GI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_x(i)&&(i=Yf(i)),i&&(o.fields[qI]=i),{mapValue:o}}(n,e):t instanceof qc?hA(t,e):t instanceof Gc?fA(t,e):function(s,i){const o=dA(s,i),l=rb(o)+rb(s.Ae);return hy(o)&&hy(s.Ae)?uA(l):Tx(s.serializer,l)}(t,e)}function k9(t,e,n){return t instanceof qc?hA(t,e):t instanceof Gc?fA(t,e):n}function dA(t,e){return t instanceof Bh?function(r){return hy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Wc extends tm{}class qc extends tm{constructor(e){super(),this.elements=e}}function hA(t,e){const n=mA(e);for(const r of t.elements)n.some(s=>Br(s,r))||n.push(r);return{arrayValue:{values:n}}}class Gc extends tm{constructor(e){super(),this.elements=e}}function fA(t,e){let n=mA(e);for(const r of t.elements)n=n.filter(s=>!Br(s,r));return{arrayValue:{values:n}}}class Bh extends tm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rb(t){return lt(t.integerValue||t.doubleValue)}function mA(t){return bx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n){this.field=e,this.transform=n}}function P9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qc&&s instanceof qc||r instanceof Gc&&s instanceof Gc?Ga(r.elements,s.elements,Br):r instanceof Bh&&s instanceof Bh?Br(r.Ae,s.Ae):r instanceof Wc&&s instanceof Wc}(t.transform,e.transform)}class j9{constructor(e,n){this.version=e,this.transformResults=n}}class ls{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ls}static exists(e){return new ls(void 0,e)}static updateTime(e){return new ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nm{}function pA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yA(t.key,ls.none()):new gu(t.key,t.data,ls.none());{const n=t.data,r=$n.empty();let s=new Et(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Po(t.key,r,new ar(s.toArray()),ls.none())}}function D9(t,e,n){t instanceof gu?function(s,i,o){const l=s.value.clone(),c=ib(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(s,i,o){if(!Qd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ib(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(gA(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function dc(t,e,n,r){return t instanceof gu?function(i,o,l,c){if(!Qd(i.precondition,o))return l;const u=i.value.clone(),h=ob(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Po?function(i,o,l,c){if(!Qd(i.precondition,o))return l;const u=ob(i.fieldTransforms,c,o),h=o.data;return h.setAll(gA(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return Qd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function O9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dA(r.transform,s||null);i!=null&&(n===null&&(n=$n.empty()),n.set(r.field,i))}return n||null}function sb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ga(r,s,(i,o)=>P9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gu extends nm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Po extends nm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ib(t,e,n){const r=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,k9(o,l,n[s]))}return r}function ob(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,A9(i,o,e))}return r}class yA extends nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M9 extends nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&D9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=pA(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,(n,r)=>sb(n,r))&&Ga(this.baseMutations,e.baseMutations,(n,r)=>sb(n,r))}}class Cx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return S9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Ae;function U9(t){switch(t){case W.OK:return ge(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function vA(t){if(t===void 0)return vs("GRPC error has no .code"),W.UNKNOWN;switch(t){case dt.OK:return W.OK;case dt.CANCELLED:return W.CANCELLED;case dt.UNKNOWN:return W.UNKNOWN;case dt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case dt.INTERNAL:return W.INTERNAL;case dt.UNAVAILABLE:return W.UNAVAILABLE;case dt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case dt.NOT_FOUND:return W.NOT_FOUND;case dt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case dt.ABORTED:return W.ABORTED;case dt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case dt.DATA_LOSS:return W.DATA_LOSS;default:return ge(39323,{code:t})}}(Ae=dt||(dt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new fi([4294967295,4294967295],0);function ab(t){const e=z9().encode(t),n=new AI;return n.update(e),new Uint8Array(n.digest())}function lb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fi([n,r],0),new fi([s,i],0)]}class Nx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(r<0)throw new Kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(fi.fromNumber(r)));return s.compare($9)===1&&(s=new fi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ab(e),[r,s]=lb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=ab(e),[r,s]=lb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rm(xe.min(),s,new nt(Ne),xs(),Ie())}}class yu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class xA{constructor(e,n){this.targetId=e,this.Ce=n}}class wA{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cb{constructor(){this.ve=0,this.Fe=ub(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}}),new yu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ub()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B9{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=yd(),this.He=yd(),this.Ye=new nt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(my(i))if(r===0){const o=new he(i.path);this.et(n,o,Gt.newNoDocument(o,xe.min()))}else Me(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ti(r).toUint8Array()}catch(c){if(c instanceof BI)return _o("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Nx(o,s,i)}catch(c){return _o(c instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&my(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Gt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new rm(e,n,this.Ye,this.je,r);return this.je=xs(),this.Je=yd(),this.He=yd(),this.Ye=new nt(Ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Et(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Et(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yd(){return new nt(he.comparator)}function ub(){return new nt(he.comparator)}const H9={asc:"ASCENDING",desc:"DESCENDING"},W9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q9={and:"AND",or:"OR"};class G9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function Hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _A(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K9(t,e){return Hh(t,e.toTimestamp())}function Ur(t){return Me(!!t,49232),xe.fromTimestamp(function(n){const r=Si(n);return new $e(r.seconds,r.nanos)}(t))}function Ix(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bA(t){const e=ze.fromString(t);return Me(NA(e),10190,{key:e.toString()}),e}function vy(t,e){return Ix(t.databaseId,e.path)}function Pp(t,e){const n=bA(e);if(n.get(1)!==t.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(SA(n))}function EA(t,e){return Ix(t.databaseId,e)}function Q9(t){const e=bA(t);return e.length===4?ze.emptyPath():SA(e)}function xy(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SA(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function db(t,e,n){return{name:vy(t,e),fields:n.value.mapValue.fields}}function X9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Me(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(Me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?W.UNKNOWN:vA(u.code);return new se(h,u.message||"")}(o);n=new wA(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pp(t,r.document.name),i=Ur(r.document.updateTime),o=r.document.createTime?Ur(r.document.createTime):xe.min(),l=new $n({mapValue:{fields:r.document.fields}}),c=Gt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Xd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Pp(t,r.document),i=r.readTime?Ur(r.readTime):xe.min(),o=Gt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xd([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Pp(t,r.document),i=r.removedTargetIds||[];n=new Xd([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new F9(s,i),l=r.targetId;n=new xA(l,o)}}return n}function Y9(t,e){let n;if(e instanceof gu)n={update:db(t,e.key,e.value)};else if(e instanceof yA)n={delete:vy(t,e.key)};else if(e instanceof Po)n={update:db(t,e.key,e.data),updateMask:oU(e.fieldMask)};else{if(!(e instanceof M9))return ge(16599,{Vt:e.type});n={verify:vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Wc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:K9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function J9(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Ur(s.updateTime):Ur(i);return o.isEqual(xe.min())&&(o=Ur(i)),new j9(o,s.transformResults||[])}(n,e))):[]}function Z9(t,e){return{documents:[EA(t,e.path)]}}function eU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EA(t,s);const i=function(u){if(u.length!==0)return CA(yr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Ho(p.field),direction:rU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=gy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function tU(t){let e=Q9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Me(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=TA(f);return p instanceof yr&&eA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Hc(Wo(b.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Xf(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,x=f.values||[];return new zh(x,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,x=f.values||[];return new zh(x,p)}(n.endAt)),x9(e,s,o,i,l,"F",c,u)}function nU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wo(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wo(n.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wo(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wo(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(Wo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(r=>TA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function rU(t){return H9[t]}function sU(t){return W9[t]}function iU(t){return q9[t]}function Ho(t){return{fieldPath:t.canonicalString()}}function Wo(t){return kt.fromServerFormat(t.fieldPath)}function CA(t){return t instanceof mt?function(n){if(n.op==="=="){if(J_(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J_(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(n.field),op:sU(n.op),value:n.value}}}(t):t instanceof yr?function(n){const r=n.getFilters().map(s=>CA(s));return r.length===1?r[0]:{compositeFilter:{op:iU(n.op),filters:r}}}(t):ge(54877,{filter:t})}function oU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r,s,i=xe.min(),o=xe.min(),l=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.yt=e}}function lU(t){const e=tU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this.Cn=new uU}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ei.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class uU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IA=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(IA,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="LruGarbageCollector",dU=1048576;function mb([t,e],[n,r]){const s=Ne(t,n);return s===0?Ne(e,r):s}class hU{constructor(e){this.Ir=e,this.buffer=new Et(mb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(fb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dl(n)?oe(fb,"Ignoring IndexedDB error during garbage collection: ",n):await ul(n)}await this.Vr(3e5)})}}class mU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Qf.ce);const r=new hU(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(hb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),$o()<=Ce.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function pU(t,e){return new mU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&dc(r.mutation,s,ar.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=eo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=eo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=xs();const o=uc(),l=function(){return uc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Po)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),dc(h.mutation,u,h.mutation.getFieldMask(),$e.now())):o.set(u.key,ar.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new yU(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=uc();let s=new nt((o,l)=>o-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||ar.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ie()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=cA();h.forEach(p=>{if(!i.has(p)){const x=pA(n.get(p),r.get(p));x!==null&&f.set(p,x),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(eo());let l=zc,c=i;return o.next(u=>K.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ie())).next(h=>({batchId:l,changes:lA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Gl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Gl();return this.indexManager.getCollectionParents(e,i).next(l=>K.forEach(l,c=>{const u=function(f,p){return new hl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Gt.newInvalidDocument(h)))});let l=Gl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&dc(h.mutation,u,ar.empty(),$e.now()),em(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ur(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:lU(s.bundledQuery),readTime:Ur(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.overlays=new nt(he.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=eo();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=eo(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=eo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=eo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return K.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new V9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.Qr=new Et(Nt.$r),this.Ur=new Et(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new ze([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new ze([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Et(Nt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?wx:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ne);return n.forEach(s=>{const i=new Nt(s,0),o=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Nt(new he(i),0);let l=new Et(Ne);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),K.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.ri=e,this.docs=function(){return new nt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=xs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Gt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xs();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||JF(YF(h),r)<=0||(s.has(h.key)||em(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SU(this)}getSize(e){return K.resolve(this.size)}}class SU extends gU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.persistence=e,this.si=new Ro(n=>Ex(n),Sx),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Ax,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ya(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qf(0),this.li=!1,this.li=!0,this.hi=new _U,this.referenceDelegate=e(this),this.Pi=new TU(this),this.indexManager=new cU,this.remoteDocumentCache=function(s){return new EU(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new aU(n),this.Ii=new xU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new bU(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new CU(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class CU extends e9{constructor(e){super(),this.currentSequenceNumber=e}}class kx{constructor(e){this.persistence=e,this.Ri=new Ax,this.Vi=null}static mi(e){return new kx(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wh{constructor(e,n){this.persistence=e,this.pi=new Ro(r=>r9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=pU(this,n)}static mi(e,n){return new Wh(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?K.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gd(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _5()?8:t9(Qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new NU;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?($o()<=Ce.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):($o()<=Ce.DEBUG&&oe("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?($o()<=Ce.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):K.resolve())}ys(e,n){if(nb(n))return K.resolve(null);let r=Fr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$h(n,null,"F"),r=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,$h(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return nb(n)||s.isEqual(xe.min())?K.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?K.resolve(null):($o()<=Ce.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bo(n)),this.vs(e,o,n,XF(s,zc)).next(l=>l))})}Ds(e,n){let r=new Et(oA(e));return n.forEach((s,i)=>{em(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return $o()<=Ce.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ei.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="LocalStore",AU=3e8;class kU{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new nt(Ne),this.xs=new Ro(i=>Ex(i),Sx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function RU(t,e,n,r){return new kU(t,e,n,r)}async function kA(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ie();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function PU(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let x=K.resolve();return p.forEach(b=>{x=x.next(()=>h.getEntry(c,b)).next(y=>{const w=u.docVersions.get(b);Me(w!==null,48541),y.version.compareTo(w)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RA(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jU(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let x=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(Pt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(f,x),function(y,w,_){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=AU?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,x,h)&&l.push(n.Pi.updateTargetData(i,x))});let c=xs(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(DU(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(xe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return K.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function DU(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=xs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(Px,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function OU(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MU(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function wy(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!dl(o))throw o;oe(Px,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function pb(t,e,n){const r=we(t);let s=xe.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?K.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,Fr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ie())).next(l=>(LU(r,_9(e),l),{documents:l,Qs:i})))}function LU(t,e,n){let r=t.Os.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class gb{constructor(){this.activeTargetIds=N9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VU{constructor(){this.Mo=new gb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="ConnectivityMonitor";class vb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(yb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(yb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function _y(){return vd===null?vd=function(){return 268435456+Math.round(2147483648*Math.random())}():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",UU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Fh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=_y(),l=this.zo(e,n.toUriEncodedString());oe(jp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=ol(u);return this.Jo(e,l,c,r,h).then(f=>(oe(jp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw _o(jp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=UU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class BU extends zU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=_y();return new Promise((l,c)=>{const u=new kI;u.setWithCredentials(!0),u.listenOnce(RI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qd.NO_ERROR:const f=u.getResponseJson();oe(Bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case qd.TIMEOUT:oe(Bt,`RPC '${e}' ${o} timed out`),c(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const p=u.getStatus();if(oe(Bt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const y=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(v)>=0?v:W.UNKNOWN}(b.status);c(new se(y,b.message))}else c(new se(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new se(W.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(Bt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);oe(Bt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=_y(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DI(),l=jI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");oe(Bt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,x=!1;const b=new $U({Yo:w=>{x?oe(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(oe(Bt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),oe(Bt,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Zo:()=>f.close()}),y=(w,_,v)=>{w.listen(_,T=>{try{v(T)}catch(k){setTimeout(()=>{throw k},0)}})};return y(f,ql.EventType.OPEN,()=>{x||(oe(Bt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),y(f,ql.EventType.CLOSE,()=>{x||(x=!0,oe(Bt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),y(f,ql.EventType.ERROR,w=>{x||(x=!0,_o(Bt,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new se(W.UNAVAILABLE,"The operation could not be completed")))}),y(f,ql.EventType.MESSAGE,w=>{var _;if(!x){const v=w.data[0];Me(!!v,16349);const T=v,k=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(k){oe(Bt,`RPC '${e}' stream ${s} received error:`,k);const j=k.status;let O=function(N){const I=dt[N];if(I!==void 0)return vA(I)}(j),C=k.message;O===void 0&&(O=W.INTERNAL,C="Unknown error status: "+j+" with message "+k.message),x=!0,b.a_(new se(O,C)),f.close()}else oe(Bt,`RPC '${e}' stream ${s} received:`,v),b.u_(v)}}),y(l,PI.STAT_EVENT,w=>{w.stat===cy.PROXY?oe(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===cy.NOPROXY&&oe(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){return new G9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="PersistentStream";class jA{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(xb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(xb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HU extends jA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=X9(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Ur(o.readTime):xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=my(c)?{documents:Z9(i,c)}:{query:eU(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=_A(i,o.resumeToken);const u=gy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){l.readTime=Hh(i,o.snapshotVersion.toTimestamp());const u=gy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=nU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xy(this.serializer),n.removeTarget=e,this.q_(n)}}class WU extends jA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=J9(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y9(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{}class GU extends qU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,yy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,yy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class KU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vs(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class QU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{jo(this)&&(oe(bo,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await vu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await im(u)}(this))})}),this.Ra=new KU(r,s)}}async function im(t){if(jo(t))for(const e of t.da)await e(!0)}async function vu(t){for(const e of t.da)await e(!1)}function DA(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mx(n)?Ox(n):fl(n).O_()&&Dx(n,e))}function jx(t,e){const n=we(t),r=fl(n);n.Ia.delete(e),r.O_()&&OA(n,e),n.Ia.size===0&&(r.O_()?r.L_():jo(n)&&n.Ra.set("Unknown"))}function Dx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fl(t).Y_(e)}function OA(t,e){t.Va.Ue(e),fl(t).Z_(e)}function Ox(t){t.Va=new B9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fl(t).start(),t.Ra.ua()}function Mx(t){return jo(t)&&!fl(t).x_()&&t.Ia.size>0}function jo(t){return we(t).Ea.size===0}function MA(t){t.Va=void 0}async function XU(t){t.Ra.set("Online")}async function YU(t){t.Ia.forEach((e,n)=>{Dx(t,e)})}async function JU(t,e){MA(t),Mx(t)?(t.Ra.ha(e),Ox(t)):t.Ra.set("Unknown")}async function ZU(t,e,n){if(t.Ra.set("Online"),e instanceof wA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){oe(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qh(t,r)}else if(e instanceof Xd?t.Va.Ze(e):e instanceof xA?t.Va.st(e):t.Va.tt(e),!n.isEqual(xe.min()))try{const r=await RA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),OA(i,c);const f=new Js(h.target,c,u,h.sequenceNumber);Dx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){oe(bo,"Failed to raise snapshot:",r),await qh(t,r)}}async function qh(t,e,n){if(!dl(e))throw e;t.Ea.add(1),await vu(t),t.Ra.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await im(t)})}function LA(t,e){return e().catch(n=>qh(t,n,e))}async function om(t){const e=we(t),n=Ni(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wx;for(;e8(e);)try{const s=await OU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,t8(e,s)}catch(s){await qh(e,s)}VA(e)&&FA(e)}function e8(t){return jo(t)&&t.Ta.length<10}function t8(t,e){t.Ta.push(e);const n=Ni(t);n.O_()&&n.X_&&n.ea(e.mutations)}function VA(t){return jo(t)&&!Ni(t).x_()&&t.Ta.length>0}function FA(t){Ni(t).start()}async function n8(t){Ni(t).ra()}async function r8(t){const e=Ni(t);for(const n of t.Ta)e.ea(n.mutations)}async function s8(t,e,n){const r=t.Ta.shift(),s=Cx.from(r,e,n);await LA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await om(t)}async function i8(t,e){e&&Ni(t).X_&&await async function(r,s){if(function(o){return U9(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();Ni(r).B_(),await LA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await om(r)}}(t,e),VA(t)&&FA(t)}async function wb(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),oe(bo,"RemoteStore received new credentials");const r=jo(n);n.Ea.add(3),await vu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await im(n)}async function o8(t,e){const n=we(t);e?(n.Ea.delete(2),await im(n)):e||(n.Ea.add(2),await vu(n),n.Ra.set("Unknown"))}function fl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new HU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:XU.bind(null,t),t_:YU.bind(null,t),r_:JU.bind(null,t),H_:ZU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Mx(t)?Ox(t):t.Ra.set("Unknown")):(await t.ma.stop(),MA(t))})),t.ma}function Ni(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new WU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:n8.bind(null,t),r_:i8.bind(null,t),ta:r8.bind(null,t),na:s8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await om(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Lx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vx(t,e){if(vs("AsyncQueue",`${e}: ${t}`),dl(t))return new se(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Gl(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.ga=new nt(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ja{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ja(e,n,va.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class l8{constructor(){this.queries=bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=bb(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function bb(){return new Ro(t=>iA(t),Zf)}async function UA(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new a8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Vx(o,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Fx(n)}async function zA(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function c8(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Fx(n)}function u8(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Fx(t){t.Ca.forEach(e=>{e.next()})}var by,Eb;(Eb=by||(by={})).Ma="default",Eb.Cache="cache";class $A{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==by.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class d8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=oA(e),this.tu=new va(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new _b,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),x=em(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),y=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let w=!1;p&&x?p.data.isEqual(x.data)?b!==y&&(r.track({type:3,doc:x}),w=!0):this.su(p,x)||(r.track({type:2,doc:x}),w=!0,(c&&this.eu(x,c)>0||u&&this.eu(x,u)<0)&&(l=!0)):!p&&x?(r.track({type:0,doc:x}),w=!0):p&&!x&&(r.track({type:1,doc:p}),w=!0,(c||u)&&(l=!0)),w&&(x?(o=o.add(x),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(x,b){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:w})}};return y(x)-y(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Ja(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _b,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new HA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new BA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ux="SyncEngine";class h8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class f8{constructor(e){this.key=e,this.hu=!1}}class m8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ro(l=>iA(l),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new nt(he.comparator),this.Au=new Map,this.Ru=new Ax,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function p8(t,e,n=!0){const r=XA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await WA(r,e,n,!0),s}async function g8(t,e){const n=XA(t);await WA(n,e,!0,!1)}async function WA(t,e,n,r){const s=await MU(t.localStore,Fr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await y8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&DA(t.remoteStore,s),l}async function y8(t,e,n,r,s){t.pu=(f,p,x)=>async function(y,w,_,v){let T=w.view.ru(_);T.Cs&&(T=await pb(y.localStore,w.query,!1).then(({documents:C})=>w.view.ru(C,T)));const k=v&&v.targetChanges.get(w.targetId),j=v&&v.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(T,y.isPrimaryClient,k,j);return Tb(y,w.targetId,O.au),O.snapshot}(t,f,p,x);const i=await pb(t.localStore,e,!0),o=new d8(e,i.Qs),l=o.ru(i.documents),c=yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Tb(t,n,u.au);const h=new h8(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function v8(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Zf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jx(r.remoteStore,s.targetId),Ey(r,s.targetId)}).catch(ul)):(Ey(r,s.targetId),await wy(r.localStore,s.targetId,!0))}async function x8(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jx(n.remoteStore,r.targetId))}async function w8(t,e,n){const r=N8(t);try{const s=await function(o,l){const c=we(o),u=$e.now(),h=l.reduce((x,b)=>x.add(b.key),Ie());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let b=xs(),y=Ie();return c.Ns.getEntries(x,h).next(w=>{b=w,b.forEach((_,v)=>{v.isValidDocument()||(y=y.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,b)).next(w=>{f=w;const _=[];for(const v of l){const T=O9(v,f.get(v.key).overlayedDocument);T!=null&&_.push(new Po(v.key,T,YI(T.value.mapValue),ls.exists(!0)))}return c.mutationQueue.addMutationBatch(x,u,_,l)}).next(w=>{p=w;const _=w.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(x,w.batchId,_)})}).then(()=>({batchId:p.batchId,changes:lA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new nt(Ne)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await xu(r,s.changes),await om(r.remoteStore)}catch(s){const i=Vx(s,"Failed to persist write");n.reject(i)}}async function qA(t,e){const n=we(t);try{const r=await jU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Me(o.hu,14607):s.removedDocuments.size>0&&(Me(o.hu,42227),o.hu=!1))}),await xu(n,r,e)}catch(r){await ul(r)}}function Sb(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Fx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _8(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new nt(he.comparator);o=o.insert(i,Gt.newNoDocument(i,xe.min()));const l=Ie().add(i),c=new rm(xe.min(),new Map,new nt(Ne),o,l);await qA(r,c),r.du=r.du.remove(i),r.Au.delete(e),zx(r)}else await wy(r.localStore,e,!1).then(()=>Ey(r,e,n)).catch(ul)}async function b8(t,e){const n=we(t),r=e.batch.batchId;try{const s=await PU(n.localStore,e);KA(n,r,null),GA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,s)}catch(s){await ul(s)}}async function E8(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Me(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);KA(r,e,n),GA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xu(r,s)}catch(s){await ul(s)}}function GA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KA(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ey(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||QA(t,r)})}function QA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zx(t))}function Tb(t,e,n){for(const r of n)r instanceof BA?(t.Ru.addReference(r.key,e),S8(t,r)):r instanceof HA?(oe(Ux,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||QA(t,r.key)):ge(19791,{wu:r})}function S8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(Ux,"New document in limbo: "+n),t.Eu.add(r),zx(t))}function zx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(ze.fromString(e)),r=t.fu.next();t.Au.set(r,new f8(n)),t.du=t.du.insert(n,r),DA(t.remoteStore,new Js(Fr(Jf(n.path)),r,"TargetPurposeLimboResolution",Qf.ce))}}async function xu(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Rx.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(u,p=>K.forEach(p.Es,x=>h.persistence.referenceDelegate.addReference(f,p.targetId,x)).next(()=>K.forEach(p.ds,x=>h.persistence.referenceDelegate.removeReference(f,p.targetId,x)))))}catch(f){if(!dl(f))throw f;oe(Px,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const x=h.Ms.get(p),b=x.snapshotVersion,y=x.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,y)}}}(r.localStore,i))}async function T8(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){oe(Ux,"User change. New user:",e.toKey());const r=await kA(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new se(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xu(n,r.Ls)}}function C8(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function XA(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_8.bind(null,e),e.Pu.H_=c8.bind(null,e.eventManager),e.Pu.yu=u8.bind(null,e.eventManager),e}function N8(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E8.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RU(this.persistence,new IU,e.initialUser,this.serializer)}Cu(e){return new AA(kx.mi,this.serializer)}Du(e){return new VU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class I8 extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fU(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new AA(r=>Wh.mi(r,n),this.serializer)}}class Sy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T8.bind(null,this.syncEngine),await o8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new l8}()}createDatastore(e){const n=sm(e.databaseInfo.databaseId),r=function(i){return new BU(i)}(e.databaseInfo);return function(i,o,l,c){return new GU(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new QU(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sb(this.syncEngine,n,0),function(){return vb.v()?new vb:new FU}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new m8(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);oe(bo,"RemoteStore shutting down."),i.Ea.add(5),await vu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sy.provider={build:()=>new Sy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class A8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{oe(Ii,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(Ii,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Op(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Ii,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await k8(t);oe(Ii,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wb(e.remoteStore,s)),t._onlineComponents=e}async function k8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Ii,"Using user provided OfflineComponentProvider");try{await Op(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Op(t,new Gh)}}else oe(Ii,"Using default OfflineComponentProvider"),await Op(t,new I8(void 0));return t._offlineComponents}async function JA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Ii,"Using user provided OnlineComponentProvider"),await Cb(t,t._uninitializedComponentsProvider._online)):(oe(Ii,"Using default OnlineComponentProvider"),await Cb(t,new Sy))),t._onlineComponents}function R8(t){return JA(t).then(e=>e.syncEngine)}async function Ty(t){const e=await JA(t),n=e.eventManager;return n.onListen=p8.bind(null,e.syncEngine),n.onUnlisten=v8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=g8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x8.bind(null,e.syncEngine),n}function P8(t,e,n={}){const r=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new YA({next:p=>{h.Nu(),o.enqueueAndForget(()=>zA(i,f));const x=p.docs.has(l);!x&&p.fromCache?u.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&c&&c.source==="server"?u.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new $A(Jf(l.path),h,{includeMetadataChanges:!0,qa:!0});return UA(i,f)}(await Ty(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="firestore.googleapis.com",Ib=!0;class Ab{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ek,this.ssl=Ib}else this.host=e.host,this.ssl=e.ssl??Ib;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dU)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class am{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ab({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ab(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LI;switch(r.type){case"firstParty":return new HF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nb.get(n);r&&(oe("ComponentProvider","Removing Datastore"),Nb.delete(n),r.terminate())}(this),Promise.resolve()}}function tk(t,e,n,r={}){var u;t=as(t,am);const s=ol(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(WN(`https://${l}`),qN("Firestore",!0)),i.host!==ek&&i.host!==l&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!yo(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Wt.MOCK_USER;else{h=h5(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Wt(p)}t._authCredentials=new zF(new MI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pu(n,ot._jsonSchema))return new ot(e,r||null,new he(ze.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:pt("string",ot._jsonSchemaVersion),referencePath:pt("string")};class cs extends bs{constructor(e,n,r){super(e,n,Jf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new he(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function $x(t,e,...n){if(t=sn(t),VI("collection","path",e),t instanceof am){const r=ze.fromString(e,...n);return $_(r),new cs(t,null,r)}{if(!(t instanceof ot||t instanceof cs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return $_(r),new cs(t.firestore,null,r)}}function at(t,e,...n){if(t=sn(t),arguments.length===1&&(e=Gf.newId()),VI("doc","path",e),t instanceof am){const r=ze.fromString(e,...n);return z_(r),new ot(t,null,new he(r))}{if(!(t instanceof ot||t instanceof cs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return z_(r),new ot(t.firestore,t instanceof cs?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="AsyncQueue";class Rb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PA(this,"async_queue_retry"),this._c=()=>{const r=Dp();r&&oe(kb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;oe(kb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vs("INTERNAL UNHANDLED ERROR: ",Pb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Lx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:Pb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Za extends am{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Rb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rb(e),this._firestoreClient=void 0,await e}}}function nk(t,e){const n=typeof t=="object"?t:XN(),r=typeof t=="string"?t:Fh,s=lx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=u5("firestore");i&&tk(s,...i)}return s}function lm(t){if(t._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j8(t),t._firestoreClient}function j8(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new o9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new A8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(Pt.fromBase64String(e))}catch(n){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pu(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:pt("string",In._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(pu(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:pt("string",hr._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pu(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fr(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:pt("string",fr._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=/^__.*__$/;class O8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new gu(e,this.data,n,this.fieldTransforms)}}function rk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Bx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rk(this.Ac)&&D8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sm(e)}Cc(e,n,r,s=!1){return new Bx({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sk(t){const e=t._freezeSettings(),n=sm(t._databaseId);return new M8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L8(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);ak("Data must be an object, but it was:",o,r);const l=ik(r,o);let c,u;if(i.merge)c=new ar(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=F8(e,f,n);if(!o.contains(p))throw new se(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);z8(h,p)||h.push(p)}c=new ar(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new O8(new $n(l),c,u)}class Hx extends um{_toFieldTransform(e){return new R9(e.path,new Wc)}isEqual(e){return e instanceof Hx}}function V8(t,e,n,r=!1){return Wx(n,t.Cc(r?4:3,e))}function Wx(t,e){if(ok(t=sn(t)))return ak("Unsupported field value:",e,t),ik(t,e);if(t instanceof um)return function(r,s){if(!rk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Wx(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:Hh(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(s.serializer,i)}}if(r instanceof hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof In)return{bytesValue:_A(s.serializer,r._byteString)};if(r instanceof ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ix(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fr)return function(o,l){return{mapValue:{fields:{[KI]:{stringValue:XI},[Uh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Tx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Kf(r)}`)}(t,e)}function ik(t,e){const n={};return $I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,s)=>{const i=Wx(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ok(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof hr||t instanceof In||t instanceof ot||t instanceof um||t instanceof fr)}function ak(t,e,n){if(!ok(n)||!UI(n)){const r=Kf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function F8(t,e,n){if((e=sn(e))instanceof cm)return e._internalPath;if(typeof e=="string")return lk(t,e);throw Kh("Field path arguments must be of type string or ",t,!1,void 0,n)}const U8=new RegExp("[~\\*/\\[\\]]");function lk(t,e,n){if(e.search(U8)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cm(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new se(W.INVALID_ARGUMENT,l+t+c)}function z8(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $8 extends ck{data(){return super.data()}}function qx(t,e){return typeof e=="string"?lk(t,e):e instanceof cm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gx{}class dm extends Gx{}function Kx(t,e,...n){let r=[];e instanceof Gx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof fm).length,l=i.filter(c=>c instanceof hm).length;if(o>1||o>0&&l>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class hm extends dm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hm(e,n,r)}_apply(e){const n=this._parse(e);return dk(e._query,n),new bs(e.firestore,e.converter,py(e._query,n))}_parse(e){const n=sk(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ob(f,h);const b=[];for(const y of f)b.push(Db(c,i,y));p={arrayValue:{values:b}}}else p=Db(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ob(f,h),p=V8(l,o,f,h==="in"||h==="not-in");return mt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class fm extends Gx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)dk(o,c),o=py(o,c)}(e._query,n),new bs(e.firestore,e.converter,py(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mm extends dm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(i,o)}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new hl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Qx(t,e="asc"){const n=e,r=qx("orderBy",t);return mm._create(r,n)}class pm extends dm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pm(e,n,r)}_apply(e){return new bs(e.firestore,e.converter,$h(e._query,this._limit,this._limitType))}}function uk(t){return pm._create("limit",t,"F")}function Db(t,e,n){if(typeof(n=sn(n))=="string"){if(n==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sA(e)&&n.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!he.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X_(t,new he(r))}if(n instanceof ot)return X_(t,n._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(n)}.`)}function Ob(t,e){if(!Array.isArray(t)||t.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dk(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hk{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Uh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>lt(o.doubleValue));return new fr(n)}convertGeoPoint(e){return new hr(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=Si(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);Me(NA(r),9688,{name:e});const s=new Ka(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||vs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends ck{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:pt("string",pi._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class hc extends pi{data(e={}){return super.data(e)}}class lo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new oa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hc(this._firestore,this._userDataWriter,r.key,r,new oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new hc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new oa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new hc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new oa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:W8(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){t=as(t,ot);const e=as(t.firestore,Za);return P8(lm(e),t._key).then(n=>pk(e,t,n))}lo._jsonSchemaVersion="firestore/querySnapshot/1.0",lo._jsonSchema={type:pt("string",lo._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class fk extends hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function nn(t,e,n){t=as(t,ot);const r=as(t.firestore,Za),s=H8(t.converter,e,n);return mk(r,[L8(sk(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ls.none())])}function ml(t,...e){var c,u,h;t=sn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||jb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(jb(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof ot)o=as(t.firestore,Za),l=Jf(t._key.path),i={next:f=>{e[r]&&e[r](pk(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=as(t,bs);o=as(f.firestore,Za),l=f._query;const p=new fk(o);i={next:x=>{e[r]&&e[r](new lo(o,p,f,x))},error:e[r+1],complete:e[r+2]},B8(t._query)}return function(p,x,b,y){const w=new YA(y),_=new $A(x,w,b);return p.asyncQueue.enqueueAndForget(async()=>UA(await Ty(p),_)),()=>{w.Nu(),p.asyncQueue.enqueueAndForget(async()=>zA(await Ty(p),_))}}(lm(o),l,s,i)}function mk(t,e){return function(r,s){const i=new mi;return r.asyncQueue.enqueueAndForget(async()=>w8(await R8(r),s,i)),i.promise}(lm(t),e)}function pk(t,e,n){const r=n.docs.get(e._key),s=new fk(t);return new pi(t,s,e._key,r,new oa(n.hasPendingWrites,n.fromCache),e.converter)}function gm(){return new Hx("serverTimestamp")}(function(e,n=!0){(function(s){cl=s})(al),Wa(new vo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Za(new $F(r.getProvider("auth-internal")),new WF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),hi(L_,V_,e),hi(L_,V_,"esm2020")})();const Mb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:hk,Bytes:In,CollectionReference:cs,DocumentReference:ot,DocumentSnapshot:pi,FieldPath:cm,FieldValue:um,Firestore:Za,FirestoreError:se,GeoPoint:hr,Query:bs,QueryCompositeFilterConstraint:fm,QueryConstraint:dm,QueryDocumentSnapshot:hc,QueryFieldFilterConstraint:hm,QueryLimitConstraint:pm,QueryOrderByConstraint:mm,QuerySnapshot:lo,SnapshotMetadata:oa,Timestamp:$e,VectorValue:fr,_AutoId:Gf,_ByteString:Pt,_DatabaseId:Ka,_DocumentKey:he,_EmptyAuthCredentialsProvider:LI,_FieldPath:kt,_cast:as,_logWarn:_o,_validateIsNotUsedTogether:FI,collection:$x,connectFirestoreEmulator:tk,doc:at,ensureFirestoreConfigured:lm,executeWrite:mk,getDoc:Eo,getFirestore:nk,limit:uk,onSnapshot:ml,orderBy:Qx,query:Kx,serverTimestamp:gm,setDoc:nn},Symbol.toStringTag,{value:"Module"})),q8={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},Xx=QN(q8),qo=LF(Xx),Ye=nk(Xx),Hr=new pn;Hr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Hr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Hr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Hr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Hr.addScope("https://www.googleapis.com/auth/calendar");Hr.addScope("https://www.googleapis.com/auth/gmail.send");Hr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const Lb=Object.freeze(Object.defineProperty({__proto__:null,app:Xx,auth:qo,db:Ye,googleProvider:Hr},Symbol.toStringTag,{value:"Module"})),gk=m.createContext(void 0);function G8({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>sessionStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>CV(qo,w=>{n(w),w||(h(null),s(!1))}),[]),m.useEffect(()=>{async function y(){if(!e||!i){if(e&&!i){const w=sessionStorage.getItem("google_access_token");if(w){o(w);return}}e||s(!1);return}try{s(!0);const w=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let _=!1;if(w.ok){const k=await w.json();k.courses&&k.courses.length>0&&(_=!0)}if(_){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const v=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let T=!1;if(v.ok){const k=await v.json();k.courses&&k.courses.length>0&&(T=!0)}T?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(w){console.error("Role detection failed:",w),h("no_access")}finally{s(!1)}}y()},[e,i]);const f=async()=>{try{c(null),Hr.setCustomParameters({prompt:"consent",access_type:"offline"});const y=await Ap(qo,Hr),w=pn.credentialFromResult(y);w!=null&&w.accessToken&&(o(w.accessToken),sessionStorage.setItem("google_access_token",w.accessToken))}catch(y){const w=y instanceof Error?y.message:"Failed to sign in";c(w),console.error("Sign in error:",y)}},p=async()=>{try{c(null);const y=new pn;y.addScope("https://www.googleapis.com/auth/gmail.send"),y.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const w=await Ap(qo,y),_=pn.credentialFromResult(w),v=w._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),sessionStorage.setItem("google_access_token",_.accessToken)),v!=null&&v.oauthRefreshToken){const{doc:T,setDoc:k,serverTimestamp:j}=await hd(async()=>{const{doc:C,setDoc:S,serverTimestamp:N}=await Promise.resolve().then(()=>Mb);return{doc:C,setDoc:S,serverTimestamp:N}},void 0),{db:O}=await hd(async()=>{const{db:C}=await Promise.resolve().then(()=>Lb);return{db:C}},void 0);if(e&&v.oauthRefreshToken)return await k(T(O,"users",e.uid,"private_tokens","google"),{refreshToken:v.oauthRefreshToken,updatedAt:j()}),!0}return!!(_!=null&&_.accessToken)}catch(y){const w=y instanceof Error?y.message:"Failed to get Gmail permissions";return c(w),console.error("Permission error:",y),!1}},x=async()=>{try{c(null);const y=new pn;y.addScope("https://www.googleapis.com/auth/calendar.events"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const w=await Ap(qo,y),_=pn.credentialFromResult(w),v=w._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),sessionStorage.setItem("google_access_token",_.accessToken)),e&&(v!=null&&v.oauthRefreshToken)){const{doc:T,setDoc:k,serverTimestamp:j}=await hd(async()=>{const{doc:C,setDoc:S,serverTimestamp:N}=await Promise.resolve().then(()=>Mb);return{doc:C,setDoc:S,serverTimestamp:N}},void 0),{db:O}=await hd(async()=>{const{db:C}=await Promise.resolve().then(()=>Lb);return{db:C}},void 0);return await k(T(O,"users",e.uid,"private_tokens","calendar"),{refreshToken:v.oauthRefreshToken,updatedAt:j(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(y){const w=y instanceof Error?y.message:"Failed to get Calendar permissions";return c(w),console.error("Permission error:",y),!1}},b=async()=>{try{await NV(qo),o(null),h(null),sessionStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(y){const w=y instanceof Error?y.message:"Failed to sign out";c(w)}};return a.jsx(gk.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:x,signOut:b,error:l},children:t})}function Tt(){const t=m.useContext(gk);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const yk=m.createContext(void 0);function K8({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(yk.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function Yx(){const t=m.useContext(yk);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}async function Q8(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function X8(t,e,n,r){const s=at(Ye,"users",n,"settings","calendar"),i=await Eo(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const x=at(Ye,"users",n,"calendarEvents",c.id),b=await Eo(x),y="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let w;if(b.exists()){const{calendarEventId:_}=b.data();w=await fetch(`${y}/${_}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(w=await fetch(y,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),w.ok){const _=await w.json();await nn(x,{calendarEventId:_.id,assignmentId:c.id,updatedAt:gm()})}if(!w.ok&&w.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(w){console.warn(`Failed to sync assignment ${c.id} to calendar`,w)}}}const vk=m.createContext(void 0);function Y8(){return Math.random().toString(36).substring(2,15)}async function Qh(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e;console.log(`Fetching: ${c.substring(0,100)}...`);const u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,x={};try{const b=await u.json();x=b,p=((o=b.error)==null?void 0:o.message)||b.message||p,console.error("API Error Response:",b)}catch{const y=await u.text().catch(()=>"");console.error("API Error (non-JSON):",y)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const Vb=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function J8(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%Vb.length;return Vb[n]}async function Z8(t,e){const r=await Qh(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:i.id,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s,color:J8(i.id)}))}async function ez(t,e,n,r){var l,c;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await Qh(t,s,u=>u.courseWork||[],u=>u.nextPageToken),o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const w=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await Qh(t,w,v=>v.studentSubmissions||[],v=>v.nextPageToken))[0]||null}catch(w){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,w)}let f=null,p=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((l=u.dueTime)==null?void 0:l.hours)||23,((c=u.dueTime)==null?void 0:c.minutes)||59).toISOString(),u.dueTime&&(p=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const x=new Date;let b="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?b="graded":h.state==="TURNED_IN"||h.turnInTime?b="submitted":h.state==="CREATED"&&(b=f&&new Date(f)<x?"overdue":"backlog"):f&&new Date(f)<x?b="overdue":b="backlog";const y={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:`course-${e}`,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:p,maxPoints:u.maxPoints||null,systemStatus:b,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)??(h==null?void 0:h.assignedGrade)??(h==null?void 0:h.draftGrade)??null,alternateLink:u.alternateLink||null,createdAt:u.creationTime||x.toISOString(),lastSyncedAt:x.toISOString()};o.push(y)}return o}async function tz(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await Qh(t,s,l=>l.courseWorkMaterial||[],l=>l.nextPageToken),o=new Date().toISOString();return i.map(l=>({id:`mat-${l.id}`,uniqueId:`${e}-${l.id}`,userId:r,courseId:`course-${e}`,courseName:n,title:l.title,description:l.description||null,alternateLink:l.alternateLink||null,materials:l.materials||null,createdAt:l.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function nz({children:t}){const{user:e,accessToken:n}=Tt(),[r,s]=m.useState(()=>{const F=sessionStorage.getItem("classroom_courses");return F?JSON.parse(F):[]}),[i,o]=m.useState(()=>{const F=sessionStorage.getItem("classroom_assignments");return F?JSON.parse(F):[]}),[l,c]=m.useState(()=>{const F=sessionStorage.getItem("classroom_materials");return F?JSON.parse(F):[]}),[u,h]=m.useState(()=>{const F=sessionStorage.getItem("classroom_notes");return F?new Map(JSON.parse(F)):new Map}),[f,p]=m.useState(()=>!sessionStorage.getItem("classroom_courses")),[x,b]=m.useState(!1),[y,w]=m.useState(()=>{const F=sessionStorage.getItem("classroom_lastSyncedAt");return F?new Date(F):null}),[_,v]=m.useState(null),[T,k]=m.useState(!1),{toast:j}=Io(),O=m.useCallback(async(F=!1)=>{var L;if(!e){v("Please sign in with Google to sync your Classroom data"),p(!1);return}let G=n;if(!G)try{const M=await e.getIdToken();console.log("Got ID token, but need OAuth access token for Classroom API"),v("Access token expired. Please sign out and sign in again to refresh your token."),p(!1);return}catch{v("Unable to authenticate. Please sign in again."),p(!1);return}b(!0),i.length===0&&p(!0),v(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!G});const M=await Z8(G,e.uid);if(console.log(`Fetched ${M.length} courses`),M.length===0){v("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),s([]),o([]),w(new Date),b(!1),p(!1);return}const $=[],z=[];for(const X of M)try{console.log(`Fetching data for course: ${X.name}`);const[J,Z]=await Promise.all([ez(G,X.classroomId,X.name,e.uid),tz(G,X.classroomId,X.name,e.uid)]);console.log(`Found ${J.length} assignments and ${Z.length} materials for ${X.name}`),$.push(...J),z.push(...Z)}catch(J){console.warn(`Failed to fetch data for course ${X.name}:`,J)}console.log(`Sync complete: ${M.length} courses, ${$.length} assignments, ${z.length} materials`),s(M),o($),c(z),w(new Date),p(!1);try{await X8($,G,e.uid,j)}catch(X){console.error("Calendar sync failed:",X)}try{const X=at(Ye,"users",e.uid,"settings","notifications"),J=await Eo(X);if(J.exists()&&J.data().enabled&&J.data().notifyDueSoon){const ce=at(Ye,"users",e.uid,"notifications","digest"),ee=await Eo(ce),H=ee.exists()?(L=ee.data().lastSent)==null?void 0:L.toDate():null,te=new Date;if(!(H&&H.getDate()===te.getDate()&&H.getMonth()===te.getMonth()&&H.getFullYear()===te.getFullYear())){const re=new Date(te);re.setDate(re.getDate()+1),re.setHours(23,59,59,999);const fe=$.filter(de=>{if(!de.dueDate||de.systemStatus==="submitted"||de.systemStatus==="graded")return!1;const ke=new Date(de.dueDate);return ke>=te&&ke<=re});if(fe.length>0&&e.email){const de=fe.map(Pe=>`<li><strong>${Pe.title}</strong> <span style="color:#666">(${Pe.courseName})</span><br>Due: ${new Date(Pe.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),ke=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;">Daily Digest</h2>
                           <p>You have <strong>${fe.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${de}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await Q8(e.email,`Student Sphere: ${fe.length} Tasks Due Soon`,ke,G),await nn(ce,{lastSent:gm()}),console.log("Daily digest email delivered.")}}}}catch(X){console.warn("Notification sync failed (non-critical):",X)}F||j({title:"Sync Complete",description:`Successfully synced ${M.length} courses, ${$.length} assignments, and updated Google Calendar.`})}catch(M){console.error("Sync error details:",M);let $="Failed to sync";if(M!=null&&M.message){const z=M.message.toLowerCase();z.includes("401")||z.includes("unauthorized")||z.includes("invalid_token")||z.includes("token expired")?$="Authentication failed. Your access token may have expired. Please sign out and sign in again.":z.includes("403")||z.includes("forbidden")||z.includes("permission denied")?$="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":z.includes("quota")||z.includes("rate")||z.includes("429")?$="API quota exceeded. Please try again later.":z.includes("cors")||z.includes("network")?$="Network error. Please check your internet connection and try again.":$=`Sync failed: ${M.message}`}else M instanceof TypeError&&M.message.includes("fetch")&&($="Network error. Please check your internet connection.");v($),console.error("Sync error:",M),F||j({variant:"destructive",title:"Sync Failed",description:$})}finally{b(!1),p(!1)}},[e,n]);m.useEffect(()=>{if(!e){k(!1),p(!1);return}if(!n){p(!1);return}!T&&!x&&(k(!0),O(!0))},[e,n,T,r.length,i.length,x]),m.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(r))},[r]),m.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(l))},[l]),m.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(u.entries())))},[u]),m.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(i))},[i]),m.useEffect(()=>{y?sessionStorage.setItem("classroom_lastSyncedAt",y.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[y]);const C=m.useCallback((F,G)=>{o(L=>L.map(M=>M.id===F?{...M,userStatus:G}:M))},[]),S=m.useCallback((F,G,L=!1)=>{const M={id:Y8(),userId:(e==null?void 0:e.uid)||"",assignmentId:F,content:G,isImportant:L,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h($=>{const z=new Map($),X=z.get(F)||[];return z.set(F,[...X,M]),z})},[e]),N=m.useCallback((F,G,L)=>{h(M=>{const $=new Map(M);for(const[z,X]of Array.from($.entries())){const J=X.findIndex(Z=>Z.id===F);if(J!==-1){const Z=[...X];Z[J]={...Z[J],content:G,isImportant:L??Z[J].isImportant,updatedAt:new Date().toISOString()},$.set(z,Z);break}}return $})},[]),I=m.useCallback((F,G)=>{h(L=>{const M=new Map(L),$=M.get(G)||[];return M.set(G,$.filter(z=>z.id!==F)),M})},[]),A=m.useCallback(()=>{const F=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return i.forEach(G=>{const L=G.userStatus==="in_progress"?"in_progress":G.systemStatus,M=F.find($=>$.id===L);M&&M.assignments.push(G)}),F.forEach(G=>{G.assignments.sort((L,M)=>L.dueDate?M.dueDate?new Date(L.dueDate).getTime()-new Date(M.dueDate).getTime():-1:1)}),F},[i]),D=m.useCallback(()=>{const F=new Date,G=new Date(F);G.setDate(G.getDate()+3);const L=new Date(F);L.setDate(L.getDate()+7);const M=i.filter(H=>H.systemStatus!=="graded"&&H.systemStatus!=="submitted"),$=i.filter(H=>{if(!H.dueDate||H.systemStatus==="graded"||H.systemStatus==="submitted")return!1;const te=new Date(H.dueDate);return te>=F&&te<=G}),z=i.filter(H=>{if(!H.dueDate||H.systemStatus==="graded"||H.systemStatus==="submitted")return!1;const te=new Date(H.dueDate);return te>=F&&te<=L}),X=i.filter(H=>H.systemStatus==="overdue"),J=[],Z=new Date,ce=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let H=0;H<7;H++){const te=new Date(Z);te.setDate(te.getDate()+H);const pe=te.toISOString().split("T")[0],re=i.filter(fe=>fe.dueDate?fe.dueDate.split("T")[0]===pe:!1).length;J.push({day:ce[te.getDay()],count:re,isToday:H===0})}const ee=[...M].filter(H=>H.dueDate).sort((H,te)=>new Date(H.dueDate).getTime()-new Date(te.dueDate).getTime()).slice(0,5);return{totalActive:M.length,upcoming3Days:$.length,upcoming7Days:z.length,overdue:X.length,weeklyWorkload:J,nextActions:ee}},[i]),P=m.useCallback(F=>{let G=[...i];F!=null&&F.courseId&&(G=G.filter(z=>z.courseId===F.courseId)),F!=null&&F.status&&(G=G.filter(z=>z.systemStatus===F.status)),G.sort((z,X)=>z.dueDate?X.dueDate?new Date(z.dueDate).getTime()-new Date(X.dueDate).getTime():-1:1);const L=new Map,M=new Date,$=new Date(M);return $.setDate($.getDate()+1),G.forEach(z=>{if(!z.dueDate)return;const X=z.dueDate.split("T")[0],J=new Date(z.dueDate);let Z;X===M.toISOString().split("T")[0]?Z="Today":X===$.toISOString().split("T")[0]?Z="Tomorrow":Z=J.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),L.has(X)||L.set(X,{date:X,dateLabel:Z,assignments:[]}),L.get(X).assignments.push(z)}),Array.from(L.values())},[i]),B=m.useCallback(F=>i.find(G=>G.id===F),[i]),ie=m.useCallback(F=>u.get(F)||[],[u]);return a.jsx(vk.Provider,{value:{courses:r,assignments:i,notes:u,isLoading:f,isSyncing:x,lastSyncedAt:y,error:_,syncClassroom:O,updateAssignmentStatus:C,addNote:S,updateNote:N,deleteNote:I,getPipelineColumns:A,getDashboardMetrics:D,getTimelineGroups:P,getAssignmentById:B,getNotesForAssignment:ie,materials:l},children:t})}function qr(){const t=m.useContext(vk);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Mp="focusScope.autoFocusOnMount",Lp="focusScope.autoFocusOnUnmount",Fb={bubbles:!1,cancelable:!0},rz="FocusScope",Jx=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=rn(s),h=rn(i),f=m.useRef(null),p=Fe(e,y=>c(y)),x=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(T){if(x.paused||!l)return;const k=T.target;l.contains(k)?f.current=k:Ms(f.current,{select:!0})},w=function(T){if(x.paused||!l)return;const k=T.relatedTarget;k!==null&&(l.contains(k)||Ms(f.current,{select:!0}))},_=function(T){if(document.activeElement===document.body)for(const j of T)j.removedNodes.length>0&&Ms(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const v=new MutationObserver(_);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,x.paused]),m.useEffect(()=>{if(l){zb.add(x);const y=document.activeElement;if(!l.contains(y)){const _=new CustomEvent(Mp,Fb);l.addEventListener(Mp,u),l.dispatchEvent(_),_.defaultPrevented||(sz(cz(xk(l)),{select:!0}),document.activeElement===y&&Ms(l))}return()=>{l.removeEventListener(Mp,u),setTimeout(()=>{const _=new CustomEvent(Lp,Fb);l.addEventListener(Lp,h),l.dispatchEvent(_),_.defaultPrevented||Ms(y??document.body,{select:!0}),l.removeEventListener(Lp,h),zb.remove(x)},0)}}},[l,u,h,x]);const b=m.useCallback(y=>{if(!n&&!r||x.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const v=y.currentTarget,[T,k]=iz(v);T&&k?!y.shiftKey&&_===k?(y.preventDefault(),n&&Ms(T,{select:!0})):y.shiftKey&&_===T&&(y.preventDefault(),n&&Ms(k,{select:!0})):_===v&&y.preventDefault()}},[n,r,x.paused]);return a.jsx(ve.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});Jx.displayName=rz;function sz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ms(r,{select:e}),document.activeElement!==n)return}function iz(t){const e=xk(t),n=Ub(e,t),r=Ub(e.reverse(),t);return[n,r]}function xk(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ub(t,e){for(const n of t)if(!oz(n,{upTo:e}))return n}function oz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function az(t){return t instanceof HTMLInputElement&&"select"in t}function Ms(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&az(t)&&e&&t.select()}}var zb=lz();function lz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=$b(t,e),t.unshift(e)},remove(e){var n;t=$b(t,e),(n=t[0])==null||n.resume()}}}function $b(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cz(t){return t.filter(e=>e.tagName!=="A")}var Vp=0;function wk(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Bb()),document.body.insertAdjacentElement("beforeend",t[1]??Bb()),Vp++,()=>{Vp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vp--}},[])}function Bb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Dr=function(){return Dr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dr.apply(this,arguments)};function _k(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Yd="right-scroll-bar-position",Jd="width-before-scroll-bar",dz="with-scroll-bars-hidden",hz="--removed-body-scroll-bar-size";function Fp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function fz(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var mz=typeof window<"u"?m.useLayoutEffect:m.useEffect,Hb=new WeakMap;function pz(t,e){var n=fz(null,function(r){return t.forEach(function(s){return Fp(s,r)})});return mz(function(){var r=Hb.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Fp(l,null)}),i.forEach(function(l){s.has(l)||Fp(l,o)})}Hb.set(n,t)},[t]),n}function gz(t){return t}function yz(t,e){e===void 0&&(e=gz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function vz(t){t===void 0&&(t={});var e=yz(null);return e.options=Dr({async:!0,ssr:!1},t),e}var bk=function(t){var e=t.sideCar,n=_k(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Dr({},n))};bk.isSideCarExport=!0;function xz(t,e){return t.useMedium(e),bk}var Ek=vz(),Up=function(){},ym=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Up,onWheelCapture:Up,onTouchMoveCapture:Up}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,x=t.noIsolation,b=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,v=t.gapMode,T=_k(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,j=pz([n,e]),O=Dr(Dr({},T),s);return m.createElement(m.Fragment,null,h&&m.createElement(k,{sideCar:Ek,removeScrollBar:u,shards:f,noIsolation:x,inert:b,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:v}),o?m.cloneElement(m.Children.only(l),Dr(Dr({},O),{ref:j})):m.createElement(_,Dr({},O,{className:c,ref:j}),l))});ym.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ym.classNames={fullWidth:Jd,zeroRight:Yd};var wz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _z(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wz();return e&&t.setAttribute("nonce",e),t}function bz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ez(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Sz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=_z())&&(bz(e,n),Ez(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Tz=function(){var t=Sz();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Sk=function(){var t=Tz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Cz={left:0,top:0,right:0,gap:0},zp=function(t){return parseInt(t||"",10)||0},Nz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[zp(n),zp(r),zp(s)]},Iz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Cz;var e=Nz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Az=Sk(),xa="data-scroll-locked",kz=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(dz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(xa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yd,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Jd,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yd," .").concat(Yd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jd," .").concat(Jd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xa,`] {
    `).concat(hz,": ").concat(l,`px;
  }
`)},Wb=function(){var t=parseInt(document.body.getAttribute(xa)||"0",10);return isFinite(t)?t:0},Rz=function(){m.useEffect(function(){return document.body.setAttribute(xa,(Wb()+1).toString()),function(){var t=Wb()-1;t<=0?document.body.removeAttribute(xa):document.body.setAttribute(xa,t.toString())}},[])},Pz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Rz();var i=m.useMemo(function(){return Iz(s)},[s]);return m.createElement(Az,{styles:kz(i,!e,s,n?"":"!important")})},Cy=!1;if(typeof window<"u")try{var xd=Object.defineProperty({},"passive",{get:function(){return Cy=!0,!0}});window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{Cy=!1}var Fo=Cy?{passive:!1}:!1,jz=function(t){return t.tagName==="TEXTAREA"},Tk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jz(t)&&n[e]==="visible")},Dz=function(t){return Tk(t,"overflowY")},Oz=function(t){return Tk(t,"overflowX")},qb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Ck(t,r);if(s){var i=Nk(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Mz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Lz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Ck=function(t,e){return t==="v"?Dz(e):Oz(e)},Nk=function(t,e){return t==="v"?Mz(e):Lz(e)},Vz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Fz=function(t,e,n,r,s){var i=Vz(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var x=Nk(t,l),b=x[0],y=x[1],w=x[2],_=y-w-i*b;(b||_)&&Ck(t,l)&&(f+=_,p+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},wd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Gb=function(t){return[t.deltaX,t.deltaY]},Kb=function(t){return t&&"current"in t?t.current:t},Uz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$z=0,Uo=[];function Bz(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState($z++)[0],i=m.useState(Sk)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=uz([t.lockRef.current],(t.shards||[]).map(Kb),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=wd(y),v=n.current,T="deltaX"in y?y.deltaX:v[0]-_[0],k="deltaY"in y?y.deltaY:v[1]-_[1],j,O=y.target,C=Math.abs(T)>Math.abs(k)?"h":"v";if("touches"in y&&C==="h"&&O.type==="range")return!1;var S=qb(C,O);if(!S)return!0;if(S?j=C:(j=C==="v"?"h":"v",S=qb(C,O)),!S)return!1;if(!r.current&&"changedTouches"in y&&(T||k)&&(r.current=j),!j)return!0;var N=r.current||j;return Fz(N,w,y,N==="h"?T:k,!0)},[]),c=m.useCallback(function(y){var w=y;if(!(!Uo.length||Uo[Uo.length-1]!==i)){var _="deltaY"in w?Gb(w):wd(w),v=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&Uz(j.delta,_)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var T=(o.current.shards||[]).map(Kb).filter(Boolean).filter(function(j){return j.contains(w.target)}),k=T.length>0?l(w,T[0]):!o.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(y,w,_,v){var T={name:y,delta:w,target:_,should:v,shadowParent:Hz(_)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(k){return k!==T})},1)},[]),h=m.useCallback(function(y){n.current=wd(y),r.current=void 0},[]),f=m.useCallback(function(y){u(y.type,Gb(y),y.target,l(y,t.lockRef.current))},[]),p=m.useCallback(function(y){u(y.type,wd(y),y.target,l(y,t.lockRef.current))},[]);m.useEffect(function(){return Uo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Fo),document.addEventListener("touchmove",c,Fo),document.addEventListener("touchstart",h,Fo),function(){Uo=Uo.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Fo),document.removeEventListener("touchmove",c,Fo),document.removeEventListener("touchstart",h,Fo)}},[]);var x=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:zz(s)}):null,x?m.createElement(Pz,{gapMode:t.gapMode}):null)}function Hz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Wz=xz(Ek,Bz);var Zx=m.forwardRef(function(t,e){return m.createElement(ym,Dr({},t,{ref:e,sideCar:Wz}))});Zx.classNames=ym.classNames;var qz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zo=new WeakMap,_d=new WeakMap,bd={},$p=0,Ik=function(t){return t&&(t.host||Ik(t.parentNode))},Gz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Ik(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Kz=function(t,e,n,r){var s=Gz(e,Array.isArray(t)?t:[t]);bd[n]||(bd[n]=new WeakMap);var i=bd[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var x=p.getAttribute(r),b=x!==null&&x!=="false",y=(zo.get(p)||0)+1,w=(i.get(p)||0)+1;zo.set(p,y),i.set(p,w),o.push(p),y===1&&b&&_d.set(p,!0),w===1&&p.setAttribute(n,"true"),b||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),$p++,function(){o.forEach(function(f){var p=zo.get(f)-1,x=i.get(f)-1;zo.set(f,p),i.set(f,x),p||(_d.has(f)||f.removeAttribute(r),_d.delete(f)),x||f.removeAttribute(n)}),$p--,$p||(zo=new WeakMap,zo=new WeakMap,_d=new WeakMap,bd={})}},Ak=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=qz(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Kz(r,s,n,"aria-hidden")):function(){return null}},e0="Dialog",[kk,Rk]=Kn(e0),[Qz,wr]=kk(e0),Pk=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=vi({prop:r,defaultProp:s,onChange:i});return a.jsx(Qz,{scope:e,triggerRef:l,contentRef:c,contentId:os(),titleId:os(),descriptionId:os(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};Pk.displayName=e0;var jk="DialogTrigger",Dk=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(jk,n),i=Fe(e,s.triggerRef);return a.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":r0(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});Dk.displayName=jk;var t0="DialogPortal",[Xz,Ok]=kk(t0,{forceMount:void 0}),Mk=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=wr(t0,e);return a.jsx(Xz,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(Ao,{present:n||i.open,children:a.jsx(Af,{asChild:!0,container:s,children:o})}))})};Mk.displayName=t0;var Xh="DialogOverlay",Lk=m.forwardRef((t,e)=>{const n=Ok(Xh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wr(Xh,t.__scopeDialog);return i.modal?a.jsx(Ao,{present:r||i.open,children:a.jsx(Jz,{...s,ref:e})}):null});Lk.displayName=Xh;var Yz=Ua("DialogOverlay.RemoveScroll"),Jz=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(Xh,n);return a.jsx(Zx,{as:Yz,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ve.div,{"data-state":r0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),So="DialogContent",Vk=m.forwardRef((t,e)=>{const n=Ok(So,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wr(So,t.__scopeDialog);return a.jsx(Ao,{present:r||i.open,children:i.modal?a.jsx(Zz,{...s,ref:e}):a.jsx(e7,{...s,ref:e})})});Vk.displayName=So;var Zz=m.forwardRef((t,e)=>{const n=wr(So,t.__scopeDialog),r=m.useRef(null),s=Fe(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return Ak(i)},[]),a.jsx(Fk,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),e7=m.forwardRef((t,e)=>{const n=wr(So,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(Fk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Fk=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=wr(So,n),c=m.useRef(null),u=Fe(e,c);return wk(),a.jsxs(a.Fragment,{children:[a.jsx(Jx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ou,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":r0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(n7,{titleId:l.titleId}),a.jsx(s7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),n0="DialogTitle",Uk=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(n0,n);return a.jsx(ve.h2,{id:s.titleId,...r,ref:e})});Uk.displayName=n0;var zk="DialogDescription",$k=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(zk,n);return a.jsx(ve.p,{id:s.descriptionId,...r,ref:e})});$k.displayName=zk;var Bk="DialogClose",Hk=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(Bk,n);return a.jsx(ve.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});Hk.displayName=Bk;function r0(t){return t?"open":"closed"}var Wk="DialogTitleWarning",[t7,qk]=AO(Wk,{contentName:So,titleName:n0,docsSlug:"dialog"}),n7=({titleId:t})=>{const e=qk(Wk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},r7="DialogDescriptionWarning",s7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qk(r7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},s0=Pk,i7=Dk,i0=Mk,wu=Lk,_u=Vk,bu=Uk,Eu=$k,vm=Hk,Gk="AlertDialog",[o7,zW]=Kn(Gk,[Rk]),Es=Rk(),Kk=t=>{const{__scopeAlertDialog:e,...n}=t,r=Es(e);return a.jsx(s0,{...r,...n,modal:!0})};Kk.displayName=Gk;var a7="AlertDialogTrigger",Qk=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Es(n);return a.jsx(i7,{...s,...r,ref:e})});Qk.displayName=a7;var l7="AlertDialogPortal",Xk=t=>{const{__scopeAlertDialog:e,...n}=t,r=Es(e);return a.jsx(i0,{...r,...n})};Xk.displayName=l7;var c7="AlertDialogOverlay",Yk=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Es(n);return a.jsx(wu,{...s,...r,ref:e})});Yk.displayName=c7;var wa="AlertDialogContent",[u7,d7]=o7(wa),h7=cC("AlertDialogContent"),Jk=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Es(n),o=m.useRef(null),l=Fe(e,o),c=m.useRef(null);return a.jsx(t7,{contentName:wa,titleName:Zk,docsSlug:"alert-dialog",children:a.jsx(u7,{scope:n,cancelRef:c,children:a.jsxs(_u,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(h7,{children:r}),a.jsx(m7,{contentRef:o})]})})})});Jk.displayName=wa;var Zk="AlertDialogTitle",e2=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Es(n);return a.jsx(bu,{...s,...r,ref:e})});e2.displayName=Zk;var t2="AlertDialogDescription",n2=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Es(n);return a.jsx(Eu,{...s,...r,ref:e})});n2.displayName=t2;var f7="AlertDialogAction",r2=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Es(n);return a.jsx(vm,{...s,...r,ref:e})});r2.displayName=f7;var s2="AlertDialogCancel",i2=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=d7(s2,n),i=Es(n),o=Fe(e,s);return a.jsx(vm,{...i,...r,ref:o})});i2.displayName=s2;var m7=({contentRef:t})=>{const e=`\`${wa}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wa}\` by passing a \`${t2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wa}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},p7=Kk,g7=Qk,y7=Xk,o2=Yk,a2=Jk,l2=r2,c2=i2,u2=e2,d2=n2;const o0=lu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),le=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?RO:"button";return a.jsx(o,{className:q(o0({variant:e,size:n,className:t})),ref:i,...s})});le.displayName="Button";const h2=p7,f2=g7,v7=y7,m2=m.forwardRef(({className:t,...e},n)=>a.jsx(o2,{className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));m2.displayName=o2.displayName;const a0=m.forwardRef(({className:t,...e},n)=>a.jsxs(v7,{children:[a.jsx(m2,{}),a.jsx(a2,{ref:n,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));a0.displayName=a2.displayName;const l0=({className:t,...e})=>a.jsx("div",{className:q("flex flex-col space-y-2 text-center sm:text-left",t),...e});l0.displayName="AlertDialogHeader";const c0=({className:t,...e})=>a.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});c0.displayName="AlertDialogFooter";const u0=m.forwardRef(({className:t,...e},n)=>a.jsx(u2,{ref:n,className:q("text-lg font-semibold",t),...e}));u0.displayName=u2.displayName;const d0=m.forwardRef(({className:t,...e},n)=>a.jsx(d2,{ref:n,className:q("text-sm text-muted-foreground",t),...e}));d0.displayName=d2.displayName;const h0=m.forwardRef(({className:t,...e},n)=>a.jsx(l2,{ref:n,className:q(o0(),t),...e}));h0.displayName=l2.displayName;const f0=m.forwardRef(({className:t,...e},n)=>a.jsx(c2,{ref:n,className:q(o0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));f0.displayName=c2.displayName;const Bp=768;function xm(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Bp-1}px)`),r=()=>{e(window.innerWidth<Bp)};return n.addEventListener("change",r),e(window.innerWidth<Bp),()=>n.removeEventListener("change",r)},[]),!!t}var m0="Avatar",[x7,$W]=Kn(m0),[w7,p2]=x7(m0),g2=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(w7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(ve.span,{...r,ref:e})})});g2.displayName=m0;var y2="AvatarImage",v2=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=p2(y2,n),l=_7(r,i),c=rn(u=>{s(u),o.onImageLoadingStatusChange(u)});return St(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ve.img,{...i,ref:e,src:r}):null});v2.displayName=y2;var x2="AvatarFallback",w2=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=p2(x2,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(ve.span,{...s,ref:e}):null});w2.displayName=x2;function Qb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function _7(t,{referrerPolicy:e,crossOrigin:n}){const r=E7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>Qb(i,t));return St(()=>{l(Qb(i,t))},[i,t]),St(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function b7(){return()=>{}}function E7(){return m.useSyncExternalStore(b7,()=>!0,()=>!1)}var _2=g2,b2=v2,E2=w2;const Zs=m.forwardRef(({className:t,...e},n)=>a.jsx(_2,{ref:n,className:q(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));Zs.displayName=_2.displayName;const ei=m.forwardRef(({className:t,...e},n)=>a.jsx(b2,{ref:n,className:q("aspect-square h-full w-full",t),...e}));ei.displayName=b2.displayName;const ti=m.forwardRef(({className:t,...e},n)=>a.jsx(E2,{ref:n,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ti.displayName=E2.displayName;const S7=[{path:"/dashboard",label:"Dashboard",icon:FC},{path:"/",label:"Pipeline",icon:$C},{path:"/leaderboard",label:"Leaderboard",icon:qC},{path:"/timeline",label:"Timeline",icon:ji},{path:"/attendance",label:"Attendance",icon:WM},{path:"/notes",label:"Notes",icon:ia}];function T7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Lv(),r=xm(),{user:s,signOut:i}=Tt(),{theme:o,toggleTheme:l}=Yx(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(xi,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(Zs,{className:"h-8 w-8",children:[a.jsx(ei,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(ti,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),S7.map(p=>{const x=n===p.path,b=p.icon;return a.jsxs(po,{href:p.path,onClick:e,className:q("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",x?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(b,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(Gv,{className:"w-4 h-4 mr-3"}):a.jsx(Pf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(po,{href:"/settings",onClick:e,className:q("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(HC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(h2,{children:[a.jsx(f2,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Oc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(a0,{children:[a.jsxs(l0,{children:[a.jsx(u0,{children:"Are you absolutely sure?"}),a.jsx(d0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(c0,{children:[a.jsx(f0,{children:"Cancel"}),a.jsx(h0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:q("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const _a=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:q("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));_a.displayName="Input";function C7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=qr(),[r]=Lv(),[s,i]=m.useState(""),o=xm(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/notes":"Notes","/settings":"Settings"}[r]||"Pipeline";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(le,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(BC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zM,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(_a,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(le,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:q(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(jf,{className:"w-5 h-5"})})})]})}var S2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Xb=Se.createContext&&Se.createContext(S2),N7=["attr","size","title"];function I7(t,e){if(t==null)return{};var n=A7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function Yb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yb(Object(n),!0).forEach(function(r){k7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k7(t,e,n){return e=R7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7(t){var e=P7(t,"string");return typeof e=="symbol"?e:e+""}function P7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T2(t){return t&&t.map((e,n)=>Se.createElement(e.tag,Jh({key:n},e.attr),T2(e.child)))}function p0(t){return e=>Se.createElement(j7,Yh({attr:Jh({},t.attr)},e),T2(t.child))}function j7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=I7(t,N7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",Yh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Jh(Jh({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Se.createElement("title",null,i),t.children)};return Xb!==void 0?Se.createElement(Xb.Consumer,null,n=>e(n)):e(S2)}function D7(t){return p0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function O7(t){return p0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const M7=[{icon:O7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:OM,title:"Kanban Board",description:"Visual assignment tracking."},{icon:bM,title:"Linear Timeline",description:"Chronological deadline view."},{icon:EM,title:"Performance Metrics",description:"Grade & workload analytics."}];function L7(){const{signInWithGoogle:t,loading:e,error:n}=Tt();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:M7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(tn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(le,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(D7,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(tn,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx($M,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Privacy"}),a.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Terms"})]})]})})]})]})}function V7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const wm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function g0(t){return"nodeType"in t}function ln(t){var e,n;return t?pl(t)?t:g0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function y0(t){const{Document:e}=ln(t);return t instanceof e}function Su(t){return pl(t)?!1:t instanceof ln(t).HTMLElement}function C2(t){return t instanceof ln(t).SVGElement}function gl(t){return t?pl(t)?t.document:g0(t)?y0(t)?t:Su(t)||C2(t)?t.ownerDocument:document:document:document}const vr=wm?m.useLayoutEffect:m.useEffect;function _m(t){const e=m.useRef(t);return vr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function F7(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Kc(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return vr(()=>{n.current!==t&&(n.current=t)},e),n}function Tu(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Zh(t){const e=_m(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function ef(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let Hp={};function Cu(t,e){return m.useMemo(()=>{if(e)return e;const n=Hp[t]==null?0:Hp[t]+1;return Hp[t]=n,t+"-"+n},[t,e])}function N2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const ba=N2(1),tf=N2(-1);function U7(t){return"clientX"in t&&"clientY"in t}function bm(t){if(!t)return!1;const{KeyboardEvent:e}=ln(t.target);return e&&t instanceof e}function z7(t){if(!t)return!1;const{TouchEvent:e}=ln(t.target);return e&&t instanceof e}function nf(t){if(z7(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return U7(t)?{x:t.clientX,y:t.clientY}:null}const Ai=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ai.Translate.toString(t),Ai.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Jb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $7(t){return t.matches(Jb)?t:t.querySelector(Jb)}const B7={display:"none"};function H7(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:B7},n)}function W7(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function q7(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const I2=m.createContext(null);function G7(t){const e=m.useContext(I2);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function K7(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const Q7={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},X7={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Y7(t){let{announcements:e=X7,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Q7}=t;const{announce:i,announcement:o}=q7(),l=Cu("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),G7(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;e.onDragMove&&i(e.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(e.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(e.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(e.onDragCancel({active:p,over:x}))}}),[i,e])),!c)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(H7,{id:r,value:s.draggable}),Se.createElement(W7,{id:l,announcement:o}));return n?Hn.createPortal(h,n):h}var _t;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(_t||(_t={}));function rf(){}function Zb(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function J7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const xr=Object.freeze({x:0,y:0});function Z7(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function e$(t,e){const n=nf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function t$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function n$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function r$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function eE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const s$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=eE(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=Z7(eE(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(t$)};function i$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const o$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=i$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(n$)};function a$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function A2(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:xr}function l$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const c$=l$(1);function k2(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function u$(t,e,n){const r=k2(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const d$={ignoreTransform:!1};function yl(t,e){e===void 0&&(e=d$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=ln(t).getComputedStyle(t);u&&(n=u$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function tE(t){return yl(t,{ignoreTransform:!0})}function h$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function f$(t,e){return e===void 0&&(e=ln(t).getComputedStyle(t)),e.position==="fixed"}function m$(t,e){e===void 0&&(e=ln(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function v0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(y0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Su(s)||C2(s)||n.includes(s))return n;const i=ln(t).getComputedStyle(s);return s!==t&&m$(s,i)&&n.push(s),f$(s,i)?n:r(s.parentNode)}return t?r(t):n}function R2(t){const[e]=v0(t,1);return e??null}function Wp(t){return!wm||!t?null:pl(t)?t:g0(t)?y0(t)||t===gl(t).scrollingElement?window:Su(t)?t:null:null}function P2(t){return pl(t)?t.scrollX:t.scrollLeft}function j2(t){return pl(t)?t.scrollY:t.scrollTop}function Ny(t){return{x:P2(t),y:j2(t)}}var At;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(At||(At={}));function D2(t){return!wm||!t?!1:t===document.scrollingElement}function O2(t){const e={x:0,y:0},n=D2(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const p$={x:.2,y:.2};function g$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=p$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=O2(t),x={x:0,y:0},b={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+y.height?(x.y=At.Backward,b.y=r*Math.abs((e.top+y.height-i)/y.height)):!h&&c>=e.bottom-y.height&&(x.y=At.Forward,b.y=r*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(x.x=At.Forward,b.x=r*Math.abs((e.right-y.width-l)/y.width)):!f&&o<=e.left+y.width&&(x.x=At.Backward,b.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:x,speed:b}}function y$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function M2(t){return t.reduce((e,n)=>ba(e,Ny(n)),xr)}function v$(t){return t.reduce((e,n)=>e+P2(n),0)}function x$(t){return t.reduce((e,n)=>e+j2(n),0)}function L2(t,e){if(e===void 0&&(e=yl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);R2(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const w$=[["x",["left","right"],v$],["y",["top","bottom"],x$]];class x0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=v0(n),s=M2(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of w$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function _$(t){const{EventTarget:e}=ln(t);return t instanceof e?t:gl(t)}function qp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Fn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Fn||(Fn={}));function nE(t){t.preventDefault()}function b$(t){t.stopPropagation()}var De;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(De||(De={}));const V2={start:[De.Space,De.Enter],cancel:[De.Esc],end:[De.Space,De.Enter,De.Tab]},E$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case De.Right:return{...n,x:n.x+25};case De.Left:return{...n,x:n.x-25};case De.Down:return{...n,y:n.y+25};case De.Up:return{...n,y:n.y-25}}};class w0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new fc(gl(n)),this.windowListeners=new fc(ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&L2(r),n(xr)}handleKeyDown(e){if(bm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=V2,coordinateGetter:o=E$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:xr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=tf(f,h),x={x:0,y:0},{scrollableAncestors:b}=r.current;for(const y of b){const w=e.code,{isTop:_,isRight:v,isLeft:T,isBottom:k,maxScroll:j,minScroll:O}=O2(y),C=y$(y),S={x:Math.min(w===De.Right?C.right-C.width/2:C.right,Math.max(w===De.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(w===De.Down?C.bottom-C.height/2:C.bottom,Math.max(w===De.Down?C.top:C.top+C.height/2,f.y))},N=w===De.Right&&!v||w===De.Left&&!T,I=w===De.Down&&!k||w===De.Up&&!_;if(N&&S.x!==f.x){const A=y.scrollLeft+p.x,D=w===De.Right&&A<=j.x||w===De.Left&&A>=O.x;if(D&&!p.y){y.scrollTo({left:A,behavior:l});return}D?x.x=y.scrollLeft-A:x.x=w===De.Right?y.scrollLeft-j.x:y.scrollLeft-O.x,x.x&&y.scrollBy({left:-x.x,behavior:l});break}else if(I&&S.y!==f.y){const A=y.scrollTop+p.y,D=w===De.Down&&A<=j.y||w===De.Up&&A>=O.y;if(D&&!p.x){y.scrollTo({top:A,behavior:l});return}D?x.y=y.scrollTop-A:x.y=w===De.Down?y.scrollTop-j.y:y.scrollTop-O.y,x.y&&y.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(e,ba(tf(f,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}w0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=V2,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function rE(t){return!!(t&&"distance"in t)}function sE(t){return!!(t&&"delay"in t)}class _0{constructor(e,n,r){var s;r===void 0&&(r=_$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=gl(o),this.documentListeners=new fc(this.document),this.listeners=new fc(r),this.windowListeners=new fc(ln(o)),this.initialCoordinates=(s=nf(i))!=null?s:xr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.DragStart,nE),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),this.windowListeners.add(Fn.ContextMenu,nE),this.documentListeners.add(Fn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(rE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Fn.Click,b$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=nf(e))!=null?n:xr,u=tf(s,c);if(!r&&l){if(rE(l)){if(l.tolerance!=null&&qp(u,l.tolerance))return this.handleCancel();if(qp(u,l.distance))return this.handleStart()}if(sE(l)&&qp(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===De.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const S$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class b0 extends _0{constructor(e){const{event:n}=e,r=gl(n.target);super(e,S$,r)}}b0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const T$={move:{name:"mousemove"},end:{name:"mouseup"}};var Iy;(function(t){t[t.RightClick=2]="RightClick"})(Iy||(Iy={}));class C$ extends _0{constructor(e){super(e,T$,gl(e.event.target))}}C$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Iy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Gp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class N$ extends _0{constructor(e){super(e,Gp)}static setup(){return window.addEventListener(Gp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Gp.move.name,e)};function e(){}}}N$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var mc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(mc||(mc={}));var sf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(sf||(sf={}));function I$(t){let{acceleration:e,activator:n=mc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=sf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const x=k$({delta:f,disabled:!i}),[b,y]=F7(),w=m.useRef({x:0,y:0}),_=m.useRef({x:0,y:0}),v=m.useMemo(()=>{switch(n){case mc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case mc.DraggableRect:return s}},[n,s,c]),T=m.useRef(null),k=m.useCallback(()=>{const O=T.current;if(!O)return;const C=w.current.x*_.current.x,S=w.current.y*_.current.y;O.scrollBy(C,S)},[]),j=m.useMemo(()=>l===sf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!v){y();return}for(const O of j){if((r==null?void 0:r(O))===!1)continue;const C=u.indexOf(O),S=h[C];if(!S)continue;const{direction:N,speed:I}=g$(O,S,v,e,p);for(const A of["x","y"])x[A][N[A]]||(I[A]=0,N[A]=0);if(I.x>0||I.y>0){y(),T.current=O,b(k,o),w.current=I,_.current=N;return}}w.current={x:0,y:0},_.current={x:0,y:0},y()},[e,k,r,y,i,o,JSON.stringify(v),JSON.stringify(x),b,u,j,h,JSON.stringify(p)])}const A$={x:{[At.Backward]:!1,[At.Forward]:!1},y:{[At.Backward]:!1,[At.Forward]:!1}};function k$(t){let{delta:e,disabled:n}=t;const r=ef(e);return Tu(s=>{if(n||!r||!s)return A$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[At.Backward]:s.x[At.Backward]||i.x===-1,[At.Forward]:s.x[At.Forward]||i.x===1},y:{[At.Backward]:s.y[At.Backward]||i.y===-1,[At.Forward]:s.y[At.Forward]||i.y===1}}},[n,e,r])}function R$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Tu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function P$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Qc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Qc||(Qc={}));var Ay;(function(t){t.Optimized="optimized"})(Ay||(Ay={}));const iE=new Map;function j$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=w(),p=Kc(f),x=m.useCallback(function(_){_===void 0&&(_=[]),!p.current&&o(v=>v===null?_:v.concat(_.filter(T=>!v.includes(T))))},[p]),b=m.useRef(null),y=Tu(_=>{if(f&&!n)return iE;if(!_||_===iE||h.current!==t||i!=null){const v=new Map;for(let T of t){if(!T)continue;if(i&&i.length>0&&!i.includes(T.id)&&T.rect.current){v.set(T.id,T.rect.current);continue}const k=T.node.current,j=k?new x0(c(k),k):null;T.rect.current=j,j&&v.set(T.id,j)}return v}return _},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||x()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{x(),b.current=null},l))},[l,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:i!=null};function w(){switch(u){case Qc.Always:return!1;case Qc.BeforeDragging:return n;default:return!n}}}function E0(t,e){return Tu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function D$(t,e){return E0(t,e)}function O$(t){let{callback:e,disabled:n}=t;const r=_m(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Em(t){let{callback:e,disabled:n}=t;const r=_m(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function M$(t){return new x0(yl(t),t)}function oE(t,e,n){e===void 0&&(e=M$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=O$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Em({callback:i});return vr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function L$(t){const e=E0(t);return A2(t,e)}const aE=[];function V$(t){const e=m.useRef(t),n=Tu(r=>t?r&&r!==aE&&t&&e.current&&t.parentNode===e.current.parentNode?r:v0(t):aE,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function F$(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=Wp(i.target);o&&n(l=>l?(l.set(o,Ny(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=Wp(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ny(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=Wp(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>ba(i,o),xr):M2(t):xr,[t,e])}function lE(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==xr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?tf(t,n.current):xr}function U$(t){m.useEffect(()=>{if(!wm)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function z$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function F2(t){return m.useMemo(()=>t?h$(t):null,[t])}const cE=[];function $$(t,e){e===void 0&&(e=yl);const[n]=t,r=F2(n?ln(n):null),[s,i]=m.useState(cE);function o(){i(()=>t.length?t.map(c=>D2(c)?r:new x0(e(c),c)):cE)}const l=Em({callback:o});return vr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function U2(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Su(e)?e:t}function B$(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(Su(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Em({callback:s}),o=m.useCallback(u=>{const h=U2(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Zh(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const H$=[{sensor:b0,options:{}},{sensor:w0,options:{}}],W$={current:{}},Zd={draggable:{measure:tE},droppable:{measure:tE,strategy:Qc.WhileDragging,frequency:Ay.Optimized},dragOverlay:{measure:yl}};class pc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const q$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new pc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zd,measureDroppableContainers:rf,windowRect:null,measuringScheduled:!1},z2={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rf,draggableNodes:new Map,over:null,measureDroppableContainers:rf},Nu=m.createContext(z2),$2=m.createContext(q$);function G$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new pc}}}function K$(t,e){switch(e.type){case _t.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case _t.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case _t.DragEnd:case _t.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _t.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new pc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case _t.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new pc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case _t.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new pc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Q$(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Nu),i=ef(r),o=ef(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!bm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=$7(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function B2(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function X$(t){return m.useMemo(()=>({draggable:{...Zd.draggable,...t==null?void 0:t.draggable},droppable:{...Zd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Zd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Y$(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;vr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=A2(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=R2(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Sm=m.createContext({...xr,scaleX:1,scaleY:1});var Fs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Fs||(Fs={}));const J$=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=H$,collisionDetection:f=o$,measuring:p,modifiers:x,...b}=e;const y=m.useReducer(K$,void 0,G$),[w,_]=y,[v,T]=K7(),[k,j]=m.useState(Fs.Uninitialized),O=k===Fs.Initialized,{draggable:{active:C,nodes:S,translate:N},droppable:{containers:I}}=w,A=C!=null?S.get(C):null,D=m.useRef({initial:null,translated:null}),P=m.useMemo(()=>{var je;return C!=null?{id:C,data:(je=A==null?void 0:A.data)!=null?je:W$,rect:D}:null},[C,A]),B=m.useRef(null),[ie,F]=m.useState(null),[G,L]=m.useState(null),M=Kc(b,Object.values(b)),$=Cu("DndDescribedBy",o),z=m.useMemo(()=>I.getEnabled(),[I]),X=X$(p),{droppableRects:J,measureDroppableContainers:Z,measuringScheduled:ce}=j$(z,{dragging:O,dependencies:[N.x,N.y],config:X.droppable}),ee=R$(S,C),H=m.useMemo(()=>G?nf(G):null,[G]),te=Du(),pe=D$(ee,X.draggable.measure);Y$({activeNode:C!=null?S.get(C):null,config:te.layoutShiftCompensation,initialRect:pe,measure:X.draggable.measure});const re=oE(ee,X.draggable.measure,pe),fe=oE(ee?ee.parentElement:null),de=m.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ke=I.getNodeFor((n=de.current.over)==null?void 0:n.id),Pe=B$({measure:X.dragOverlay.measure}),cn=(r=Pe.nodeRef.current)!=null?r:ee,Vt=O?(s=Pe.rect)!=null?s:re:null,Mn=!!(Pe.nodeRef.current&&Pe.rect),Mi=L$(Mn?null:re),He=F2(cn?ln(cn):null),Qe=V$(O?ke??ee:null),Gr=$$(Qe),Do=B2(x,{transform:{x:N.x-Mi.x,y:N.y-Mi.y,scaleX:1,scaleY:1},activatorEvent:G,active:P,activeNodeRect:re,containerNodeRect:fe,draggingNodeRect:Vt,over:de.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:Qe,scrollableAncestorRects:Gr,windowRect:He}),xl=H?ba(H,N):null,Au=F$(Qe),Li=lE(Au),ku=lE(Au,[re]),Kr=ba(Do,Li),_r=Vt?c$(Vt,Do):null,Vi=P&&_r?f({active:P,collisionRect:_r,droppableRects:J,droppableContainers:z,pointerCoordinates:xl}):null,Ru=r$(Vi,"id"),[Qn,wl]=m.useState(null),Fi=Mn?Do:ba(Do,ku),_l=a$(Fi,(i=Qn==null?void 0:Qn.rect)!=null?i:null,re),Ui=m.useRef(null),br=m.useCallback((je,Ft)=>{let{sensor:gt,options:un}=Ft;if(B.current==null)return;const dn=S.get(B.current);if(!dn)return;const Xt=je.nativeEvent,jt=new gt({active:B.current,activeNode:dn,event:Xt,options:un,context:de,onAbort(yt){if(!S.get(yt))return;const{onDragAbort:bn}=M.current,Ln={id:yt};bn==null||bn(Ln),v({type:"onDragAbort",event:Ln})},onPending(yt,_n,bn,Ln){if(!S.get(yt))return;const{onDragPending:Xn}=M.current,Er={id:yt,constraint:_n,initialCoordinates:bn,offset:Ln};Xn==null||Xn(Er),v({type:"onDragPending",event:Er})},onStart(yt){const _n=B.current;if(_n==null)return;const bn=S.get(_n);if(!bn)return;const{onDragStart:Ln}=M.current,Qr={activatorEvent:Xt,active:{id:_n,data:bn.data,rect:D}};Hn.unstable_batchedUpdates(()=>{Ln==null||Ln(Qr),j(Fs.Initializing),_({type:_t.DragStart,initialCoordinates:yt,active:_n}),v({type:"onDragStart",event:Qr}),F(Ui.current),L(Xt)})},onMove(yt){_({type:_t.DragMove,coordinates:yt})},onEnd:Ts(_t.DragEnd),onCancel:Ts(_t.DragCancel)});Ui.current=jt;function Ts(yt){return async function(){const{active:bn,collisions:Ln,over:Qr,scrollAdjustedTranslate:Xn}=de.current;let Er=null;if(bn&&Xn){const{cancelDrop:hn}=M.current;Er={activatorEvent:Xt,active:bn,collisions:Ln,delta:Xn,over:Qr},yt===_t.DragEnd&&typeof hn=="function"&&await Promise.resolve(hn(Er))&&(yt=_t.DragCancel)}B.current=null,Hn.unstable_batchedUpdates(()=>{_({type:yt}),j(Fs.Uninitialized),wl(null),F(null),L(null),Ui.current=null;const hn=yt===_t.DragEnd?"onDragEnd":"onDragCancel";if(Er){const Oo=M.current[hn];Oo==null||Oo(Er),v({type:hn,event:Er})}})}}},[S]),Pu=m.useCallback((je,Ft)=>(gt,un)=>{const dn=gt.nativeEvent,Xt=S.get(un);if(B.current!==null||!Xt||dn.dndKit||dn.defaultPrevented)return;const jt={active:Xt};je(gt,Ft.options,jt)===!0&&(dn.dndKit={capturedBy:Ft.sensor},B.current=un,br(gt,Ft))},[S,br]),zi=P$(h,Pu);U$(h),vr(()=>{re&&k===Fs.Initializing&&j(Fs.Initialized)},[re,k]),m.useEffect(()=>{const{onDragMove:je}=M.current,{active:Ft,activatorEvent:gt,collisions:un,over:dn}=de.current;if(!Ft||!gt)return;const Xt={active:Ft,activatorEvent:gt,collisions:un,delta:{x:Kr.x,y:Kr.y},over:dn};Hn.unstable_batchedUpdates(()=>{je==null||je(Xt),v({type:"onDragMove",event:Xt})})},[Kr.x,Kr.y]),m.useEffect(()=>{const{active:je,activatorEvent:Ft,collisions:gt,droppableContainers:un,scrollAdjustedTranslate:dn}=de.current;if(!je||B.current==null||!Ft||!dn)return;const{onDragOver:Xt}=M.current,jt=un.get(Ru),Ts=jt&&jt.rect.current?{id:jt.id,rect:jt.rect.current,data:jt.data,disabled:jt.disabled}:null,yt={active:je,activatorEvent:Ft,collisions:gt,delta:{x:dn.x,y:dn.y},over:Ts};Hn.unstable_batchedUpdates(()=>{wl(Ts),Xt==null||Xt(yt),v({type:"onDragOver",event:yt})})},[Ru]),vr(()=>{de.current={activatorEvent:G,active:P,activeNode:ee,collisionRect:_r,collisions:Vi,droppableRects:J,draggableNodes:S,draggingNode:cn,draggingNodeRect:Vt,droppableContainers:I,over:Qn,scrollableAncestors:Qe,scrollAdjustedTranslate:Kr},D.current={initial:Vt,translated:_r}},[P,ee,Vi,_r,S,cn,Vt,J,I,Qn,Qe,Kr]),I$({...te,delta:N,draggingRect:_r,pointerCoordinates:xl,scrollableAncestors:Qe,scrollableAncestorRects:Gr});const ju=m.useMemo(()=>({active:P,activeNode:ee,activeNodeRect:re,activatorEvent:G,collisions:Vi,containerNodeRect:fe,dragOverlay:Pe,draggableNodes:S,droppableContainers:I,droppableRects:J,over:Qn,measureDroppableContainers:Z,scrollableAncestors:Qe,scrollableAncestorRects:Gr,measuringConfiguration:X,measuringScheduled:ce,windowRect:He}),[P,ee,re,G,Vi,fe,Pe,S,I,J,Qn,Z,Qe,Gr,X,ce,He]),$i=m.useMemo(()=>({activatorEvent:G,activators:zi,active:P,activeNodeRect:re,ariaDescribedById:{draggable:$},dispatch:_,draggableNodes:S,over:Qn,measureDroppableContainers:Z}),[G,zi,P,re,_,$,S,Qn,Z]);return Se.createElement(I2.Provider,{value:T},Se.createElement(Nu.Provider,{value:$i},Se.createElement($2.Provider,{value:ju},Se.createElement(Sm.Provider,{value:_l},u)),Se.createElement(Q$,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Se.createElement(Y7,{...l,hiddenTextDescribedById:$}));function Du(){const je=(ie==null?void 0:ie.autoScrollEnabled)===!1,Ft=typeof c=="object"?c.enabled===!1:c===!1,gt=O&&!je&&!Ft;return typeof c=="object"?{...c,enabled:gt}:{enabled:gt}}}),Z$=m.createContext(null),uE="button",eB="Draggable";function tB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Cu(eB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Nu),{role:x=uE,roleDescription:b="draggable",tabIndex:y=0}=s??{},w=(c==null?void 0:c.id)===e,_=m.useContext(w?Sm:Z$),[v,T]=Zh(),[k,j]=Zh(),O=z$(o,e),C=Kc(n);vr(()=>(f.set(e,{id:e,key:i,node:v,activatorNode:k,data:C}),()=>{const N=f.get(e);N&&N.key===i&&f.delete(e)}),[f,e]);const S=m.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":w&&x===uE?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,x,y,w,b,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:S,isDragging:w,listeners:r?void 0:O,node:v,over:p,setNodeRef:T,setActivatorNodeRef:j,transform:_}}function H2(){return m.useContext($2)}const nB="Droppable",rB={timeout:25};function W2(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Cu(nB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Nu),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),x=m.useRef(null),{disabled:b,updateMeasurementsFor:y,timeout:w}={...rB,...s},_=Kc(y??r),v=m.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(_.current)?_.current:[_.current]),x.current=null},w)},[w]),T=Em({callback:v,disabled:b||!o}),k=m.useCallback((S,N)=>{T&&(N&&(T.unobserve(N),f.current=!1),S&&T.observe(S))},[T]),[j,O]=Zh(k),C=Kc(e);return m.useEffect(()=>{!T||!j.current||(T.disconnect(),f.current=!1,T.observe(j.current))},[j,T]),m.useEffect(()=>(l({type:_t.RegisterDroppable,element:{id:r,key:i,disabled:n,node:j,rect:p,data:C}}),()=>l({type:_t.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:_t.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:O}}function sB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=ef(n);return!n&&!r&&l&&s(l),vr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const iB={x:0,y:0,scaleX:1,scaleY:1};function oB(t){let{children:e}=t;return Se.createElement(Nu.Provider,{value:z2},Se.createElement(Sm.Provider,{value:iB},e))}const aB={position:"fixed",touchAction:"none"},lB=t=>bm(t)?"transform 250ms ease":void 0,cB=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=lB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...aB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ai.Transform.toString(f),transformOrigin:s&&r?e$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Se.createElement(n,{className:o,style:p,ref:e},i)}),uB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},dB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ai.Transform.toString(e)},{transform:Ai.Transform.toString(n)}]},hB={duration:250,easing:"ease",keyframes:dB,sideEffects:uB({styles:{active:{opacity:"0"}}})};function fB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return _m((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=U2(o);if(!u)return;const{transform:h}=ln(o).getComputedStyle(o),f=k2(h);if(!f)return;const p=typeof e=="function"?e:mB(e);return L2(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function mB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...hB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},x=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[b]=x,y=x[x.length-1];if(JSON.stringify(b)===JSON.stringify(y))return;const w=r==null?void 0:r({active:o,dragOverlay:l,...u}),_=l.node.animate(x,{duration:e,easing:n,fill:"forwards"});return new Promise(v=>{_.onfinish=()=>{w==null||w(),v()}})}}let dE=0;function pB(t){return m.useMemo(()=>{if(t!=null)return dE++,dE},[t])}const gB=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:x,draggableNodes:b,droppableContainers:y,dragOverlay:w,over:_,measuringConfiguration:v,scrollableAncestors:T,scrollableAncestorRects:k,windowRect:j}=H2(),O=m.useContext(Sm),C=pB(f==null?void 0:f.id),S=B2(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:w.rect,over:_,overlayNodeRect:w.rect,scrollableAncestors:T,scrollableAncestorRects:k,transform:O,windowRect:j}),N=E0(p),I=fB({config:r,draggableNodes:b,droppableContainers:y,measuringConfiguration:v}),A=N?w.setRef:void 0;return Se.createElement(oB,null,Se.createElement(sB,{animation:I},f&&C?Se.createElement(cB,{key:C,id:f.id,ref:A,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:N,style:{zIndex:u,...s},transform:S},n):null))});function q2(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function yB(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ed(t){return t!==null&&t>=0}function vB(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xB(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const G2=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=q2(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Sd={scaleX:1,scaleY:1},wB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Sd}:null}const c=_B(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Sd}:s<n&&s>=o?{x:0,y:l.height+c,...Sd}:{x:0,y:0,...Sd}};function _B(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const K2="Sortable",Q2=Se.createContext({activeIndex:-1,containerId:K2,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:G2,disabled:{draggable:!1,droppable:!1}});function bB(t){let{children:e,id:n,items:r,strategy:s=G2,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=H2(),f=Cu(K2,n),p=l.rect!==null,x=m.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),b=o!=null,y=o?x.indexOf(o.id):-1,w=u?x.indexOf(u.id):-1,_=m.useRef(x),v=!vB(x,_.current),T=w!==-1&&y===-1||v,k=xB(i);vr(()=>{v&&b&&h(x)},[v,x,b,h]),m.useEffect(()=>{_.current=x},[x]);const j=m.useMemo(()=>({activeIndex:y,containerId:f,disabled:k,disableTransforms:T,items:x,overIndex:w,useDragOverlay:p,sortedRects:yB(x,c),strategy:s}),[y,f,k.draggable,k.droppable,T,x,w,c,p,s]);return Se.createElement(Q2.Provider,{value:j},e)}const EB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return q2(n,r,s).indexOf(e)},SB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},TB={duration:200,easing:"ease"},X2="transform",CB=Ai.Transition.toString({property:X2,duration:0,easing:"linear"}),NB={roleDescription:"sortable"};function IB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return vr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=yl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function AB(t){let{animateLayoutChanges:e=SB,attributes:n,disabled:r,data:s,getNewIndex:i=EB,id:o,strategy:l,resizeObserverConfig:c,transition:u=TB}=t;const{items:h,containerId:f,activeIndex:p,disabled:x,disableTransforms:b,sortedRects:y,overIndex:w,useDragOverlay:_,strategy:v}=m.useContext(Q2),T=kB(r,x),k=h.indexOf(o),j=m.useMemo(()=>({sortable:{containerId:f,index:k,items:h},...s}),[f,s,k,h]),O=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:C,node:S,isOver:N,setNodeRef:I}=W2({id:o,data:j,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...c}}),{active:A,activatorEvent:D,activeNodeRect:P,attributes:B,setNodeRef:ie,listeners:F,isDragging:G,over:L,setActivatorNodeRef:M,transform:$}=tB({id:o,data:j,attributes:{...NB,...n},disabled:T.draggable}),z=V7(I,ie),X=!!A,J=X&&!b&&Ed(p)&&Ed(w),Z=!_&&G,ce=Z&&J?$:null,H=J?ce??(l??v)({rects:y,activeNodeRect:P,activeIndex:p,overIndex:w,index:k}):null,te=Ed(p)&&Ed(w)?i({id:o,items:h,activeIndex:p,overIndex:w}):k,pe=A==null?void 0:A.id,re=m.useRef({activeId:pe,items:h,newIndex:te,containerId:f}),fe=h!==re.current.items,de=e({active:A,containerId:f,isDragging:G,isSorting:X,id:o,index:k,items:h,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:u,wasDragging:re.current.activeId!=null}),ke=IB({disabled:!de,index:k,node:S,rect:C});return m.useEffect(()=>{X&&re.current.newIndex!==te&&(re.current.newIndex=te),f!==re.current.containerId&&(re.current.containerId=f),h!==re.current.items&&(re.current.items=h)},[X,te,f,h]),m.useEffect(()=>{if(pe===re.current.activeId)return;if(pe!=null&&re.current.activeId==null){re.current.activeId=pe;return}const cn=setTimeout(()=>{re.current.activeId=pe},50);return()=>clearTimeout(cn)},[pe]),{active:A,activeIndex:p,attributes:B,data:j,rect:C,index:k,newIndex:te,items:h,isOver:N,isSorting:X,isDragging:G,listeners:F,node:S,overIndex:w,over:L,setNodeRef:z,setActivatorNodeRef:M,setDroppableNodeRef:I,setDraggableNodeRef:ie,transform:ke??H,transition:Pe()};function Pe(){if(ke||fe&&re.current.newIndex===k)return CB;if(!(Z&&!bm(D)||!u)&&(X||de))return Ai.Transition.toString({...u,property:X2})}}function kB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}De.Down,De.Right,De.Up,De.Left;const RB=lu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ss({className:t,variant:e,...n}){return a.jsx("div",{className:q(RB({variant:e}),t),...n})}function Zr({className:t,...e}){return a.jsx("div",{className:q("animate-pulse rounded-md bg-muted",t),...e})}const Le=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Le.displayName="Card";const ut=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("flex flex-col space-y-1.5 p-6",t),...e}));ut.displayName="CardHeader";const ht=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("text-2xl font-semibold leading-none tracking-tight",t),...e}));ht.displayName="CardTitle";const Nn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("text-sm text-muted-foreground",t),...e}));Nn.displayName="CardDescription";const Ze=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("p-6 pt-0",t),...e}));Ze.displayName="CardContent";const S0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:q("flex items-center p-6 pt-0",t),...e}));S0.displayName="CardFooter";function Y2(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function J2(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function Z2({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=AB({id:t.id}),h={transform:Ai.Transform.toString(l),transition:c},f=J2(t.dueDate),p=f!==null&&f<=1&&f>=0,x=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Le,{ref:o,style:h,className:q("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",x&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Ss,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:b=>b.stopPropagation(),children:a.jsx(RM,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(ji,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:q(x&&"text-destructive",p&&!x&&"text-foreground font-medium"),children:Y2(t.dueDate)}),x&&a.jsx(tn,{className:"h-3.5 w-3.5 text-destructive"}),p&&!x&&a.jsx(zC,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(za,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(za,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(ia,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function PB({assignment:t,onClick:e}){const n=J2(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:q("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:Y2(t.dueDate)}),r&&a.jsx(tn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const T0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));T0.displayName="Textarea";var jB="Separator",hE="horizontal",DB=["horizontal","vertical"],eR=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=hE,...s}=t,i=OB(r)?r:hE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(ve.div,{"data-orientation":i,...l,...s,ref:e})});eR.displayName=jB;function OB(t){return DB.includes(t)}var tR=eR;const lr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(tR,{ref:s,decorative:n,orientation:e,className:q("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));lr.displayName=tR.displayName;const MB=s0,LB=i0,nR=m.forwardRef(({className:t,...e},n)=>a.jsx(wu,{className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));nR.displayName=wu.displayName;const VB=lu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),rR=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(LB,{children:[a.jsx(nR,{}),a.jsxs(_u,{ref:s,className:q(VB({side:t}),e),...r,children:[n,a.jsxs(vm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(xi,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rR.displayName=_u.displayName;const sR=({className:t,...e})=>a.jsx("div",{className:q("flex flex-col space-y-2 text-center sm:text-left",t),...e});sR.displayName="SheetHeader";const iR=m.forwardRef(({className:t,...e},n)=>a.jsx(bu,{ref:n,className:q("text-lg font-semibold text-foreground",t),...e}));iR.displayName=bu.displayName;const FB=m.forwardRef(({className:t,...e},n)=>a.jsx(Eu,{ref:n,className:q("text-sm text-muted-foreground",t),...e}));FB.displayName=Eu.displayName;function UB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function zB(t){return t?` at ${t}`:""}function $B({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:q("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(za,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:q("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function BB({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(X1,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(X1,{className:q("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(LM,{className:"h-3.5 w-3.5"})}),a.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(HM,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(T0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(le,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(le,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(qv,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function C0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=qr(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",x=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(MB,{open:e,onOpenChange:n,children:a.jsxs(rR,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(sR,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Ss,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(iR,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:q(p&&"text-destructive"),children:[UB(t.dueDate),zB(t.dueTime)]}),p&&a.jsx(tn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(lr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(lr,{})]}),a.jsx($B,{assignment:t}),a.jsx(lr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(VM,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(T0,{value:l,onChange:b=>c(b.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(le,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(le,{size:"sm",onClick:x,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(qv,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(b=>a.jsx(BB,{note:b,onUpdate:(y,w)=>i(b.id,y,w),onDelete:()=>o(b.id,t.id)},b.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(lr,{}),a.jsxs(le,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(Gg,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function HB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=W2({id:t});return a.jsxs("div",{ref:o,className:q("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Ss,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(bB,{items:n.map(l=>l.id),strategy:wB,children:n.length>0?n.map(l=>{var c;return a.jsx(Z2,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function WB(){var _;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=qr(),{signOut:l}=Tt(),[c,u]=m.useState(null),[h,f]=m.useState(null),p=J7(Zb(b0,{activationConstraint:{distance:8}}),Zb(w0)),x=t(),b=h?i.find(v=>v.id===h):null,y=v=>{f(v.active.id)},w=v=>{const{active:T,over:k}=v;if(f(null),!k)return;const j=T.id,O=k.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(O)){const C=i.find(S=>S.id===j);C&&C.systemStatus!==O&&(O==="in_progress"?e(j,"in_progress"):e(j,"backlog"))}};return i.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(tn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(le,{onClick:()=>l(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs(a.Fragment,{children:[a.jsxs(J$,{sensors:p,collisionDetection:s$,onDragStart:y,onDragEnd:w,children:[a.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:x.map(v=>a.jsx(HB,{id:v.id,title:v.title,assignments:v.assignments,onCardClick:u,notes:s},v.id))}),a.jsx(gB,{children:b&&a.jsx(Z2,{assignment:b,isDragging:!0,hasNotes:(((_=s.get(b.id))==null?void 0:_.length)||0)>0})})]}),a.jsx(C0,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function fE(t,[e,n]){return Math.min(n,Math.max(e,t))}var qB=m.createContext(void 0);function N0(t){const e=m.useContext(qB);return t||e||"ltr"}function oR(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var GB=[" ","Enter","ArrowUp","ArrowDown"],KB=[" ","Enter"],Iu="Select",[Tm,Cm,QB]=Uv(Iu),[vl,BW]=Kn(Iu,[QB,Vf]),Nm=Vf(),[XB,Di]=vl(Iu),[YB,JB]=vl(Iu),aR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:x,form:b}=t,y=Nm(e),[w,_]=m.useState(null),[v,T]=m.useState(null),[k,j]=m.useState(!1),O=N0(u),[C=!1,S]=vi({prop:r,defaultProp:s,onChange:i}),[N,I]=vi({prop:o,defaultProp:l,onChange:c}),A=m.useRef(null),D=w?b||!!w.closest("form"):!0,[P,B]=m.useState(new Set),ie=Array.from(P).map(F=>F.props.value).join(";");return a.jsx(SN,{...y,children:a.jsxs(XB,{required:x,scope:e,trigger:w,onTriggerChange:_,valueNode:v,onValueNodeChange:T,valueNodeHasChildren:k,onValueNodeHasChildrenChange:j,contentId:os(),value:N,onValueChange:I,open:C,onOpenChange:S,dir:O,triggerPointerDownPosRef:A,disabled:p,children:[a.jsx(Tm.Provider,{scope:e,children:a.jsx(YB,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(F=>{B(G=>new Set(G).add(F))},[]),onNativeOptionRemove:m.useCallback(F=>{B(G=>{const L=new Set(G);return L.delete(F),L})},[]),children:n})}),D?a.jsxs(PR,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:F=>I(F.target.value),disabled:p,form:b,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},ie):null]})})};aR.displayName=Iu;var lR="SelectTrigger",cR=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Nm(n),o=Di(lR,n),l=o.disabled||r,c=Fe(e,o.onTriggerChange),u=Cm(n),h=m.useRef("touch"),[f,p,x]=jR(y=>{const w=u().filter(T=>!T.disabled),_=w.find(T=>T.value===o.value),v=DR(w,y,_);v!==void 0&&o.onValueChange(v.value)}),b=y=>{l||(o.onOpenChange(!0),x()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(TN,{asChild:!0,...i,children:a.jsx(ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":RR(o.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&b(y)}),onPointerDown:me(s.onPointerDown,y=>{h.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:me(s.onKeyDown,y=>{const w=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(w&&y.key===" ")&&GB.includes(y.key)&&(b(),y.preventDefault())})})})});cR.displayName=lR;var uR="SelectValue",dR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Di(uR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Fe(e,c.onValueNodeChange);return St(()=>{u(h)},[u,h]),a.jsx(ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:RR(c.value)?a.jsx(a.Fragment,{children:o}):i})});dR.displayName=uR;var ZB="SelectIcon",hR=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});hR.displayName=ZB;var eH="SelectPortal",fR=t=>a.jsx(Af,{asChild:!0,...t});fR.displayName=eH;var To="SelectContent",mR=m.forwardRef((t,e)=>{const n=Di(To,t.__scopeSelect),[r,s]=m.useState();if(St(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Hn.createPortal(a.jsx(pR,{scope:t.__scopeSelect,children:a.jsx(Tm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(gR,{...t,ref:e})});mR.displayName=To;var Jn=10,[pR,Oi]=vl(To),tH="SelectContentImpl",nH=Ua("SelectContent.RemoveScroll"),gR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:x,sticky:b,hideWhenDetached:y,avoidCollisions:w,..._}=t,v=Di(To,n),[T,k]=m.useState(null),[j,O]=m.useState(null),C=Fe(e,H=>k(H)),[S,N]=m.useState(null),[I,A]=m.useState(null),D=Cm(n),[P,B]=m.useState(!1),ie=m.useRef(!1);m.useEffect(()=>{if(T)return Ak(T)},[T]),wk();const F=m.useCallback(H=>{const[te,...pe]=D().map(de=>de.ref.current),[re]=pe.slice(-1),fe=document.activeElement;for(const de of H)if(de===fe||(de==null||de.scrollIntoView({block:"nearest"}),de===te&&j&&(j.scrollTop=0),de===re&&j&&(j.scrollTop=j.scrollHeight),de==null||de.focus(),document.activeElement!==fe))return},[D,j]),G=m.useCallback(()=>F([S,T]),[F,S,T]);m.useEffect(()=>{P&&G()},[P,G]);const{onOpenChange:L,triggerPointerDownPosRef:M}=v;m.useEffect(()=>{if(T){let H={x:0,y:0};const te=re=>{var fe,de;H={x:Math.abs(Math.round(re.pageX)-(((fe=M.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(re.pageY)-(((de=M.current)==null?void 0:de.y)??0))}},pe=re=>{H.x<=10&&H.y<=10?re.preventDefault():T.contains(re.target)||L(!1),document.removeEventListener("pointermove",te),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",pe,{capture:!0})}}},[T,L,M]),m.useEffect(()=>{const H=()=>L(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[L]);const[$,z]=jR(H=>{const te=D().filter(fe=>!fe.disabled),pe=te.find(fe=>fe.ref.current===document.activeElement),re=DR(te,H,pe);re&&setTimeout(()=>re.ref.current.focus())}),X=m.useCallback((H,te,pe)=>{const re=!ie.current&&!pe;(v.value!==void 0&&v.value===te||re)&&(N(H),re&&(ie.current=!0))},[v.value]),J=m.useCallback(()=>T==null?void 0:T.focus(),[T]),Z=m.useCallback((H,te,pe)=>{const re=!ie.current&&!pe;(v.value!==void 0&&v.value===te||re)&&A(H)},[v.value]),ce=r==="popper"?ky:yR,ee=ce===ky?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:x,sticky:b,hideWhenDetached:y,avoidCollisions:w}:{};return a.jsx(pR,{scope:n,content:T,viewport:j,onViewportChange:O,itemRefCallback:X,selectedItem:S,onItemLeave:J,itemTextRefCallback:Z,focusSelectedItem:G,selectedItemText:I,position:r,isPositioned:P,searchRef:$,children:a.jsx(Zx,{as:nH,allowPinchZoom:!0,children:a.jsx(Jx,{asChild:!0,trapped:v.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:me(s,H=>{var te;(te=v.trigger)==null||te.focus({preventScroll:!0}),H.preventDefault()}),children:a.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(ce,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:H=>H.preventDefault(),..._,...ee,onPlaced:()=>B(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:me(_.onKeyDown,H=>{const te=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!te&&H.key.length===1&&z(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let re=D().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(H.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const fe=H.target,de=re.indexOf(fe);re=re.slice(de+1)}setTimeout(()=>F(re)),H.preventDefault()}})})})})})})});gR.displayName=tH;var rH="SelectItemAlignedPosition",yR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Di(To,n),o=Oi(To,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Fe(e,C=>h(C)),p=Cm(n),x=m.useRef(!1),b=m.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:_,focusSelectedItem:v}=o,T=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&w&&_){const C=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),I=_.getBoundingClientRect();if(i.dir!=="rtl"){const fe=I.left-S.left,de=N.left-fe,ke=C.left-de,Pe=C.width+ke,cn=Math.max(Pe,S.width),Vt=window.innerWidth-Jn,Mn=fE(de,[Jn,Math.max(Jn,Vt-cn)]);l.style.minWidth=Pe+"px",l.style.left=Mn+"px"}else{const fe=S.right-I.right,de=window.innerWidth-N.right-fe,ke=window.innerWidth-C.right-de,Pe=C.width+ke,cn=Math.max(Pe,S.width),Vt=window.innerWidth-Jn,Mn=fE(de,[Jn,Math.max(Jn,Vt-cn)]);l.style.minWidth=Pe+"px",l.style.right=Mn+"px"}const A=p(),D=window.innerHeight-Jn*2,P=y.scrollHeight,B=window.getComputedStyle(u),ie=parseInt(B.borderTopWidth,10),F=parseInt(B.paddingTop,10),G=parseInt(B.borderBottomWidth,10),L=parseInt(B.paddingBottom,10),M=ie+F+P+L+G,$=Math.min(w.offsetHeight*5,M),z=window.getComputedStyle(y),X=parseInt(z.paddingTop,10),J=parseInt(z.paddingBottom,10),Z=C.top+C.height/2-Jn,ce=D-Z,ee=w.offsetHeight/2,H=w.offsetTop+ee,te=ie+F+H,pe=M-te;if(te<=Z){const fe=A.length>0&&w===A[A.length-1].ref.current;l.style.bottom="0px";const de=u.clientHeight-y.offsetTop-y.offsetHeight,ke=Math.max(ce,ee+(fe?J:0)+de+G),Pe=te+ke;l.style.height=Pe+"px"}else{const fe=A.length>0&&w===A[0].ref.current;l.style.top="0px";const ke=Math.max(Z,ie+y.offsetTop+(fe?X:0)+ee)+pe;l.style.height=ke+"px",y.scrollTop=te-Z+y.offsetTop}l.style.margin=`${Jn}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[p,i.trigger,i.valueNode,l,u,y,w,_,i.dir,r]);St(()=>T(),[T]);const[k,j]=m.useState();St(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const O=m.useCallback(C=>{C&&b.current===!0&&(T(),v==null||v(),b.current=!1)},[T,v]);return a.jsx(iH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:O,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:a.jsx(ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});yR.displayName=rH;var sH="SelectPopperPosition",ky=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Jn,...i}=t,o=Nm(n);return a.jsx(CN,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ky.displayName=sH;var[iH,I0]=vl(To,{}),Ry="SelectViewport",vR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Oi(Ry,n),o=I0(Ry,n),l=Fe(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Tm.Slot,{scope:n,children:a.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const x=Math.abs(c.current-h.scrollTop);if(x>0){const b=window.innerHeight-Jn*2,y=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),_=Math.max(y,w);if(_<b){const v=_+x,T=Math.min(b,v),k=v-T;f.style.height=T+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});vR.displayName=Ry;var xR="SelectGroup",[oH,aH]=vl(xR),lH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=os();return a.jsx(oH,{scope:n,id:s,children:a.jsx(ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});lH.displayName=xR;var wR="SelectLabel",_R=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=aH(wR,n);return a.jsx(ve.div,{id:s.id,...r,ref:e})});_R.displayName=wR;var of="SelectItem",[cH,bR]=vl(of),ER=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Di(of,n),c=Oi(of,n),u=l.value===r,[h,f]=m.useState(i??""),[p,x]=m.useState(!1),b=Fe(e,v=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,v,r,s)}),y=os(),w=m.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(cH,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(v=>{f(T=>T||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Tm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(ve.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:me(o.onFocus,()=>x(!0)),onBlur:me(o.onBlur,()=>x(!1)),onClick:me(o.onClick,()=>{w.current!=="mouse"&&_()}),onPointerUp:me(o.onPointerUp,()=>{w.current==="mouse"&&_()}),onPointerDown:me(o.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:me(o.onPointerMove,v=>{var T;w.current=v.pointerType,s?(T=c.onItemLeave)==null||T.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,v=>{var T;v.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:me(o.onKeyDown,v=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&v.key===" "||(KB.includes(v.key)&&_(),v.key===" "&&v.preventDefault())})})})})});ER.displayName=of;var Ql="SelectItemText",SR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Di(Ql,n),l=Oi(Ql,n),c=bR(Ql,n),u=JB(Ql,n),[h,f]=m.useState(null),p=Fe(e,_=>f(_),c.onItemTextChange,_=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,_,c.value,c.disabled)}),x=h==null?void 0:h.textContent,b=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return St(()=>(y(b),()=>w(b)),[y,w,b]),a.jsxs(a.Fragment,{children:[a.jsx(ve.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hn.createPortal(i.children,o.valueNode):null]})});SR.displayName=Ql;var TR="SelectItemIndicator",CR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return bR(TR,n).isSelected?a.jsx(ve.span,{"aria-hidden":!0,...r,ref:e}):null});CR.displayName=TR;var Py="SelectScrollUpButton",NR=m.forwardRef((t,e)=>{const n=Oi(Py,t.__scopeSelect),r=I0(Py,t.__scopeSelect),[s,i]=m.useState(!1),o=Fe(e,r.onScrollButtonChange);return St(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(AR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});NR.displayName=Py;var jy="SelectScrollDownButton",IR=m.forwardRef((t,e)=>{const n=Oi(jy,t.__scopeSelect),r=I0(jy,t.__scopeSelect),[s,i]=m.useState(!1),o=Fe(e,r.onScrollButtonChange);return St(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(AR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});IR.displayName=jy;var AR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Oi("SelectScrollButton",n),o=m.useRef(null),l=Cm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),St(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),uH="SelectSeparator",kR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ve.div,{"aria-hidden":!0,...r,ref:e})});kR.displayName=uH;var Dy="SelectArrow",dH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Nm(n),i=Di(Dy,n),o=Oi(Dy,n);return i.open&&o.position==="popper"?a.jsx(NN,{...s,...r,ref:e}):null});dH.displayName=Dy;function RR(t){return t===""||t===void 0}var PR=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Fe(e,s),o=oR(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(au,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});PR.displayName="BubbleSelect";function jR(t){const e=rn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function DR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=hH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function hH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var fH=aR,OR=cR,mH=dR,pH=hR,gH=fR,MR=mR,yH=vR,LR=_R,VR=ER,vH=SR,xH=CR,FR=NR,UR=IR,zR=kR;const af=fH,lf=mH,Xc=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(OR,{ref:r,className:q("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(pH,{asChild:!0,children:a.jsx(UC,{className:"h-4 w-4 opacity-50"})})]}));Xc.displayName=OR.displayName;const $R=m.forwardRef(({className:t,...e},n)=>a.jsx(FR,{ref:n,className:q("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(CM,{className:"h-4 w-4"})}));$R.displayName=FR.displayName;const BR=m.forwardRef(({className:t,...e},n)=>a.jsx(UR,{ref:n,className:q("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(UC,{className:"h-4 w-4"})}));BR.displayName=UR.displayName;const Yc=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(gH,{children:a.jsxs(MR,{ref:s,className:q("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx($R,{}),a.jsx(yH,{className:q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(BR,{})]})}));Yc.displayName=MR.displayName;const wH=m.forwardRef(({className:t,...e},n)=>a.jsx(LR,{ref:n,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));wH.displayName=LR.displayName;const wt=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(VR,{ref:r,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(xH,{children:a.jsx(Th,{className:"h-4 w-4"})})}),a.jsx(vH,{children:e})]}));wt.displayName=VR.displayName;const _H=m.forwardRef(({className:t,...e},n)=>a.jsx(zR,{ref:n,className:q("-mx-1 my-1 h-px bg-muted",t),...e}));_H.displayName=zR.displayName;function bH(t){return p0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const Td={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},EH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},SH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Kp=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,mE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function TH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=qr(),{user:o,signOut:l}=Tt(),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,x]=m.useState(null),[b,y]=m.useState("timeline"),[w,_]=m.useState([]);m.useEffect(()=>{if(o)try{const C=`trace_email_events_${o.uid}`,N=JSON.parse(localStorage.getItem(C)||"[]").map(I=>({id:I.id,uniqueId:I.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:I.title,description:I.body,dueDate:I.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:I.timestamp,lastSyncedAt:I.timestamp}));_(N)}catch{}},[o]);const v=m.useMemo(()=>{let C=[...s,...w];return c&&(C=C.filter(S=>S.courseId===c)),h&&(C=C.filter(S=>S.systemStatus===h)),C},[s,w,c,h]),T=()=>{u(null),f(null)},k=c||h;if(s.length===0)return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(tn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(le,{onClick:()=>l(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]});const j=()=>{const C=m.useRef(null),[S,N]=m.useState(!1),I=m.useRef({x:0,left:0}),A=60,{earliestDate:D,latestDate:P,initialScrollPosition:B}=m.useMemo(()=>{const M=new Date;M.setHours(0,0,0,0);let $=new Date,z=new Date;if(v.length>0){const ee=v.flatMap(H=>{const te=[];return H.dueDate&&te.push(new Date(H.dueDate)),H.createdAt&&te.push(new Date(H.createdAt)),te});ee.length>0&&($=new Date(Math.min(...ee.map(H=>H.getTime()))),z=new Date(Math.max(...ee.map(H=>H.getTime()))))}const X=new Date($);X.setDate(X.getDate()-30);const J=new Date(z);J.setDate(J.getDate()+30);const ce=Math.ceil((M.getTime()-X.getTime())/(1e3*3600*24))*A+A/2-window.innerWidth/2;return{earliestDate:X,latestDate:J,initialScrollPosition:Math.max(0,ce)}},[v]),ie=m.useMemo(()=>EH(D,P),[D,P]);m.useEffect(()=>{C.current&&(C.current.scrollLeft=B)},[B]);const F=M=>{M.button===2&&C.current&&(M.preventDefault(),N(!0),I.current={x:M.pageX,left:C.current.scrollLeft})},G=m.useCallback(M=>{if(!S||!C.current)return;M.preventDefault();const z=(M.pageX-I.current.x)*1.5;C.current.scrollLeft=I.current.left-z},[S]),L=m.useCallback(()=>{N(!1)},[]);return m.useEffect(()=>(S?(window.addEventListener("mousemove",G),window.addEventListener("mouseup",L)):(window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",L)),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",L)}),[S,G,L]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:C,className:q("flex-1 overflow-auto relative select-none",S?"cursor-grabbing":"cursor-default"),onMouseDown:F,onContextMenu:M=>M.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${ie.length*A}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:ie.map((M,$)=>{const z=mE(M);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:A},children:[a.jsx("span",{className:q("text-[10px] uppercase font-bold tracking-wider mb-1",z?"text-foreground":"text-muted-foreground"),children:M.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:q("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",z?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:M.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},$)})}),a.jsxs("div",{className:"relative pt-6 min-h-[500px]",children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:ie.map((M,$)=>{const z=mE(M);return a.jsx("div",{className:q("flex-shrink-0 h-full border-r border-border relative",z?"bg-accent/50":""),style:{width:A},children:z&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},$)})}),a.jsx("div",{className:"space-y-3 px-0 relative z-10 mt-2",children:v.filter(M=>M.dueDate).map(M=>{const $=e.find(de=>de.id===M.courseId),z=$==null?void 0:$.color,X=M.systemStatus==="submitted"||M.systemStatus==="graded",J=M.createdAt?new Date(M.createdAt):new Date,Z=new Date(M.dueDate),ce=(J.getTime()-D.getTime())/(1e3*3600*24),ee=(Z.getTime()-J.getTime())/(1e3*3600*24),H=Math.max(0,ce*A),te=Math.max(A,ee*A),pe={left:`${H}px`,width:`${te}px`,minWidth:"140px",backgroundColor:X?void 0:z,borderColor:X?void 0:z?"rgba(0,0,0,0.1)":void 0};Td[M.systemStatus]||Td.backlog;const re="bg-green-100/80 border-green-300 text-green-800",fe="bg-card border shadow-sm "+(z?"text-slate-900":"text-foreground");return a.jsx("div",{className:"relative h-14 group",children:a.jsxs("div",{onClick:()=>x(M),className:q("absolute top-0 h-12 rounded-lg border transition-all cursor-pointer flex flex-col justify-center px-3 overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",X?re:fe),style:pe,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:"truncate text-xs font-bold leading-none flex items-center gap-1",children:[M.courseId==="system"&&a.jsx(Wv,{className:"h-3 w-3 inline-block"}),X&&a.jsx(Th,{className:"h-3 w-3 inline-block mr-0.5"}),M.title]})}),a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:M.courseName})})]})},M.id)})})]})]})}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(Q1,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},O=()=>{const C=m.useRef(null),[S,N]=m.useState(!1),I=m.useRef({y:0,top:0}),A=m.useRef({}),[D,P]=m.useState(!1),{startMonth:B,endMonth:ie}=m.useMemo(()=>{let J=new Date,Z=new Date;if(v.length>0){const H=v.filter(te=>te.dueDate).map(te=>new Date(te.dueDate));H.length>0&&(J=new Date(Math.min(...H.map(te=>te.getTime()))),Z=new Date(Math.max(...H.map(te=>te.getTime()))))}const ce=new Date(J);ce.setMonth(ce.getMonth()-2),ce.setDate(1);const ee=new Date(Z);return ee.setMonth(ee.getMonth()+4),ee.setDate(1),{startMonth:ce,endMonth:ee}},[v]),F=m.useMemo(()=>SH(B,ie),[B,ie]),G=m.useCallback(()=>{var H;const J=Kp(new Date),Z=A.current[J];if(!Z){P(!0);return}const ce=Z.getBoundingClientRect(),ee=(H=C.current)==null?void 0:H.getBoundingClientRect();ee&&P(ce.bottom<ee.top||ce.top>ee.bottom)},[F]);m.useEffect(()=>{const J=C.current;return J&&(J.addEventListener("scroll",G),G()),()=>J==null?void 0:J.removeEventListener("scroll",G)},[G]),m.useEffect(()=>{setTimeout(()=>L(),100)},[]);const L=()=>{const J=Kp(new Date),Z=A.current[J];Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})},M=J=>{J.button===2&&C.current&&(J.preventDefault(),N(!0),I.current={y:J.pageY,top:C.current.scrollTop})},$=m.useCallback(J=>{if(!S||!C.current)return;J.preventDefault();const ce=(J.pageY-I.current.y)*1.5;C.current.scrollTop=I.current.top-ce},[S]),z=m.useCallback(()=>{N(!1)},[]);m.useEffect(()=>(S?(window.addEventListener("mousemove",$),window.addEventListener("mouseup",z)):(window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",z)),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",z)}),[S,$,z]);const X=J=>{const Z=J.getFullYear(),ce=J.getMonth(),ee=new Date(Z,ce,1),H=new Date(Z,ce+1,0),te=[];for(let pe=0;pe<ee.getDay();pe++)te.push({date:new Date(Z,ce,-ee.getDay()+1+pe),isCurrentMonth:!1});for(let pe=1;pe<=H.getDate();pe++)te.push({date:new Date(Z,ce,pe),isCurrentMonth:!0});for(;te.length%7!==0;){const pe=te.length-(ee.getDay()+H.getDate())+1,re=new Date(Z,ce+1,pe);te.push({date:re,isCurrentMonth:!1})}return te};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[D&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(wM,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:C,className:q("flex-1 overflow-y-auto",S?"cursor-grabbing":"cursor-default"),onMouseDown:M,onContextMenu:J=>J.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:F.map(J=>{const Z=X(J),ce=Kp(J);return a.jsxs("div",{ref:ee=>A.current[ce]=ee,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:J.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ee=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:ee},ee))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:Z.map((ee,H)=>{const te=v.filter(re=>{if(!re.dueDate)return!1;const fe=new Date(re.dueDate);fe.setHours(0,0,0,0);const de=new Date(ee.date);return de.setHours(0,0,0,0),de.toDateString()===fe.toDateString()}),pe=ee.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:q("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",ee.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:q("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",pe&&ee.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:ee.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:te.map(re=>{const fe=Td[re.systemStatus]||Td.backlog;return a.jsx("div",{onClick:de=>{de.stopPropagation(),x(re)},className:q("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",fe.color,fe.border),title:re.title,children:re.title},re.id)})})]},H)})})]},ce)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(Q1,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(le,{variant:b==="timeline"?"default":"ghost",size:"sm",onClick:()=>y("timeline"),className:"gap-2",children:[a.jsx(ji,{size:14}),"Timeline"]}),a.jsxs(le,{variant:b==="calendar"?"default":"ghost",size:"sm",onClick:()=>y("calendar"),className:"gap-2",children:[a.jsx(VC,{size:14}),"Calendar"]})]}),a.jsxs(af,{value:c||"all",onValueChange:C=>u(C==="all"?null:C),children:[a.jsx(Xc,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:a.jsx(lf,{placeholder:"All Courses"})}),a.jsxs(Yc,{children:[a.jsx(wt,{value:"all",children:"All Courses"}),e.map(C=>a.jsx(wt,{value:C.id,children:C.name},C.id))]})]}),a.jsxs(af,{value:h||"all",onValueChange:C=>f(C==="all"?null:C),children:[a.jsx(Xc,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:a.jsx(lf,{placeholder:"All Status"})}),a.jsxs(Yc,{children:[a.jsx(wt,{value:"all",children:"All Status"}),a.jsx(wt,{value:"backlog",children:"Backlog"}),a.jsx(wt,{value:"in_progress",children:"In Progress"}),a.jsx(wt,{value:"submitted",children:"Submitted"}),a.jsx(wt,{value:"graded",children:"Graded"}),a.jsx(wt,{value:"overdue",children:"Overdue"})]})]}),k&&a.jsxs(le,{variant:"ghost",size:"sm",onClick:T,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[a.jsx(xi,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),a.jsx("div",{className:"ml-auto",children:a.jsx(MN,{children:a.jsxs(LN,{children:[a.jsx(VN,{asChild:!0,children:a.jsx(po,{href:"/settings/integrations",children:a.jsxs(le,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[a.jsx(bH,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),a.jsxs(ix,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:b==="timeline"?a.jsx(j,{}):a.jsx(O,{})})]}),a.jsx(C0,{assignment:p,isOpen:!!p,onClose:()=>x(null)})]})}function Cd({title:t,value:e,icon:n,variant:r="default"}){return a.jsxs(Le,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[a.jsxs(ut,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(ht,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),a.jsx(n,{className:q("h-5 w-5",r==="default"&&"text-muted-foreground",r==="warning"&&"text-foreground",r==="danger"&&"text-destructive")})]}),a.jsx(Ze,{children:a.jsx("div",{className:q("text-3xl font-semibold font-mono tracking-tight",r==="danger"&&"text-destructive"),children:e})})]})}function CH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Le,{children:[a.jsx(ut,{className:"pb-2",children:a.jsx(ht,{className:"text-sm font-medium",children:"Weekly Workload"})}),a.jsx(Ze,{children:a.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[a.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:n.count>0?n.count:""}),a.jsx("div",{className:q("w-full rounded-t-sm transition-all",n.isToday?"bg-foreground":"bg-muted",n.count===0&&"min-h-[4px]"),style:{height:n.count>0?`${n.count/e*80}px`:"4px"}}),a.jsx("span",{className:q("text-xs",n.isToday?"font-medium":"text-muted-foreground"),children:n.day})]},r))})})]})}function NH({courses:t,assignments:e}){const{user:n}=Tt(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,x=t.map(v=>v.id),b=new Set(e.map(v=>v.id)),y=f.filter(v=>{const T=v.email||"",k=v.emailDomain||(T.includes("@")?T.split("@")[1]:""),j=v.enrolledCourseIds||[],O=v.processedAssignmentIds||[],C=p&&k&&p===k,S=x.some(A=>j.includes(A)),I=!k&&O.some(A=>b.has(A));return v.id===n.uid?!0:C&&S||I});y.sort((v,T)=>T.totalXP-v.totalXP);const w=y.length;if(w===0){s(null),o(!1);return}const _=y.findIndex(v=>v.id===n.uid);if(_!==-1){const v=_+1,T=Math.round((w-v+1)/w*100),k=y[_];s({rank:v,total:w,percentile:T,xp:k.totalXP||0})}else s(null);o(!1)};return l.forEach(f=>{const p=Kx($x(Ye,"leaderboards",f,"students"),Qx("totalXP","desc")),x=ml(p,b=>{b.docs.forEach(y=>{const w=y.data(),_={id:y.id,...w,email:w.email||"",emailDomain:w.emailDomain||(w.email?w.email.split("@")[1]:""),enrolledCourseIds:w.enrolledCourseIds||w.subjects||[],processedAssignmentIds:w.processedAssignmentIds||w.completedTasks||[],totalXP:w.totalXP||w.xp||0},v=u.get(y.id);(!v||_.totalXP>=v.totalXP)&&u.set(y.id,_)}),h()},b=>{console.error(`Error fetching leaderboard source ${f}:`,b),h()});c.push(x)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Le,{"data-testid":"card-class-rank",children:[a.jsxs(ut,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(ht,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(qC,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(Ze,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Zr,{className:"h-8 w-16"}),a.jsx(Zr,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(po,{href:"/leaderboard",children:a.jsx(le,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function IH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i}=qr(),{signOut:o}=Tt(),[l,c]=m.useState(null),u=t();return r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(tn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(le,{onClick:()=>o(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 rounded-lg animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 rounded-md text-blue-700 dark:text-blue-300",children:a.jsx(tn,{className:"h-4 w-4"})}),a.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:[" ",u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""," due this week"]})]}),a.jsx(po,{href:"/settings/notifications",children:a.jsx(le,{variant:"ghost",size:"sm",className:"text-blue-700 dark:text-blue-300 hover:text-blue-800 hover:bg-blue-100/50 h-8",children:"Enable email reminders"})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Cd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:zC,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Cd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:ji}),a.jsx(Cd,{title:"Overdue",value:u.overdue,icon:tn,variant:u.overdue>0?"danger":"default"}),a.jsx(Cd,{title:"Total Active",value:u.totalActive,icon:za}),a.jsx(NH,{courses:i,assignments:r})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(CH,{data:u.weeklyWorkload}),a.jsxs(Le,{children:[a.jsx(ut,{className:"pb-2",children:a.jsx(ht,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(Ze,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(PB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(za,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx(C0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function AH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=qr(),{signOut:i}=Tt(),[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=xm(),f=t.find(b=>b.id===o),x=e.filter(b=>b.courseId===o).flatMap(b=>b.materials?b.materials.flatMap(y=>{let w=[];return y.driveFile&&w.push({id:y.driveFile.driveFile.id,title:y.driveFile.driveFile.title,link:y.driveFile.driveFile.alternateLink,thumbnail:y.driveFile.driveFile.thumbnailUrl,type:"driveFile"}),w}):[]).filter(b=>{if(!b.title)return!1;const y=b.title.toLowerCase();return y.endsWith(".pdf")||y.endsWith(".ppt")||y.endsWith(".pptx")});return n&&t.length===0?a.jsx(kH,{}):t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(tn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(le,{onClick:()=>i(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[a.jsxs("div",{className:q("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(b=>a.jsxs("button",{onClick:()=>l(b.id),className:q("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===b.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:q("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===b.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(G1,{className:q("h-4 w-4",o===b.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:b.name}),a.jsx("p",{className:q("text-[10px] uppercase tracking-wider font-medium",o===b.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:b.section||"No Section"})]}),a.jsx(TM,{className:q("h-4 w-4 transition-transform",o===b.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},b.id))})]}),a.jsxs("div",{className:q("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx(MC,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Ss,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[x.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(le,{variant:"ghost",size:"icon",className:q("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx($C,{className:"h-4 w-4"})}),a.jsx(le,{variant:"ghost",size:"icon",className:q("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(MM,{className:"h-4 w-4"})})]})]})]}),x.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:x.map((b,y)=>{var _;const w=(_=b.title)==null?void 0:_.toLowerCase().endsWith(".pdf");return a.jsxs(Le,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(ut,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:q("h-8 w-8 rounded-full flex items-center justify-center shrink-0",w?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"),children:a.jsx(ia,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:b.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:w?"PDF DOCUMENT":"PRESENTATION"})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[b.thumbnail?a.jsx("img",{src:b.thumbnail.replace("s220","s800"),alt:b.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:v=>{var T;v.currentTarget.style.display="none",(T=v.currentTarget.nextElementSibling)==null||T.classList.remove("hidden")}}):null,a.jsx("div",{className:q("absolute inset-0 flex items-center justify-center bg-muted",b.thumbnail?"hidden":"flex"),children:a.jsx(ia,{className:"h-16 w-16 text-muted-foreground/20"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(le,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(Gg,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${b.id}-${y}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:x.map((b,y)=>{var _;const w=(_=b.title)==null?void 0:_.toLowerCase().endsWith(".pdf");return a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:q("h-10 w-10 flex items-center justify-center rounded-md shrink-0",w?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"),children:a.jsx(ia,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:b.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[w?"PDF Document":"Presentation","  Read Only"]})]}),a.jsx(le,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(Gg,{className:"h-4 w-4"})]})})]},`${b.id}-${y}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(G1,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no PDF or Presentation files uploaded to Classroom yet. Make sure your materials are in .pdf, .ppt, or .pptx format."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(ia,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function kH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(Zr,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(Zr,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(Zr,{className:"h-4 w-20"}),a.jsx(Zr,{className:"h-10 w-80"}),a.jsx(Zr,{className:"h-4 w-64"})]}),a.jsx(Zr,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(Zr,{className:"h-64 w-full rounded-2xl"},t))})]})]})}var A0="Switch",[RH,HW]=Kn(A0),[PH,jH]=RH(A0),HR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,x]=m.useState(null),b=Fe(e,T=>x(T)),y=m.useRef(!1),w=p?h||!!p.closest("form"):!0,[_=!1,v]=vi({prop:s,defaultProp:i,onChange:u});return a.jsxs(PH,{scope:n,checked:_,disabled:l,children:[a.jsx(ve.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":GR(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:me(t.onClick,T=>{v(k=>!k),w&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})}),w&&a.jsx(DH,{control:p,bubbles:!y.current,name:r,value:c,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});HR.displayName=A0;var WR="SwitchThumb",qR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=jH(WR,n);return a.jsx(ve.span,{"data-state":GR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});qR.displayName=WR;var DH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=oR(n),l=mN(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function GR(t){return t?"checked":"unchecked"}var KR=HR,OH=qR;const wn=m.forwardRef(({className:t,...e},n)=>a.jsx(KR,{className:q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(OH,{className:q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wn.displayName=KR.displayName;var MH="Label",QR=m.forwardRef((t,e)=>a.jsx(ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));QR.displayName=MH;var XR=QR;const LH=lu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pn=m.forwardRef(({className:t,...e},n)=>a.jsx(XR,{ref:n,className:q(LH(),t),...e}));Pn.displayName=XR.displayName;var Qp="rovingFocusGroup.onEntryFocus",VH={bubbles:!1,cancelable:!0},Im="RovingFocusGroup",[Oy,YR,FH]=Uv(Im),[UH,JR]=Kn(Im,[FH]),[zH,$H]=UH(Im),ZR=m.forwardRef((t,e)=>a.jsx(Oy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Oy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(BH,{...t,ref:e})})}));ZR.displayName=Im;var BH=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),x=Fe(e,p),b=N0(i),[y=null,w]=vi({prop:o,defaultProp:l,onChange:c}),[_,v]=m.useState(!1),T=rn(u),k=YR(n),j=m.useRef(!1),[O,C]=m.useState(0);return m.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(Qp,T),()=>S.removeEventListener(Qp,T)},[T]),a.jsx(zH,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(S=>w(S),[w]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:m.useCallback(()=>C(S=>S-1),[]),children:a.jsx(ve.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{j.current=!0}),onFocus:me(t.onFocus,S=>{const N=!j.current;if(S.target===S.currentTarget&&N&&!_){const I=new CustomEvent(Qp,VH);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const A=k().filter(F=>F.focusable),D=A.find(F=>F.active),P=A.find(F=>F.id===y),ie=[D,P,...A].filter(Boolean).map(F=>F.ref.current);nP(ie,h)}}j.current=!1}),onBlur:me(t.onBlur,()=>v(!1))})})}),eP="RovingFocusGroupItem",tP=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=os(),c=i||l,u=$H(eP,n),h=u.currentTabStopId===c,f=YR(n),{onFocusableItemAdd:p,onFocusableItemRemove:x}=u;return m.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),a.jsx(Oy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(ve.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=qH(b,u.orientation,u.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=f().filter(v=>v.focusable).map(v=>v.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const v=_.indexOf(b.currentTarget);_=u.loop?GH(_,v+1):_.slice(v+1)}setTimeout(()=>nP(_))}})})})});tP.displayName=eP;var HH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function qH(t,e,n){const r=WH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return HH[r]}function nP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function GH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var KH=ZR,QH=tP,k0="Tabs",[XH,WW]=Kn(k0,[JR]),rP=JR(),[YH,R0]=XH(k0),sP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=N0(l),[f,p]=vi({prop:r,onChange:s,defaultProp:i});return a.jsx(YH,{scope:n,baseId:os(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(ve.div,{dir:h,"data-orientation":o,...u,ref:e})})});sP.displayName=k0;var iP="TabsList",oP=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=R0(iP,n),o=rP(n);return a.jsx(KH,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});oP.displayName=iP;var aP="TabsTrigger",lP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=R0(aP,n),l=rP(n),c=dP(o.baseId,r),u=hP(o.baseId,r),h=r===o.value;return a.jsx(QH,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(ve.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:me(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});lP.displayName=aP;var cP="TabsContent",uP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=R0(cP,n),c=dP(l.baseId,r),u=hP(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Ao,{present:s||h,children:({present:p})=>a.jsx(ve.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});uP.displayName=cP;function dP(t,e){return`${t}-trigger-${e}`}function hP(t,e){return`${t}-content-${e}`}var JH=sP,fP=oP,mP=lP,pP=uP;const ZH=JH,gP=m.forwardRef(({className:t,...e},n)=>a.jsx(fP,{ref:n,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));gP.displayName=fP.displayName;const My=m.forwardRef(({className:t,...e},n)=>a.jsx(mP,{ref:n,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));My.displayName=mP.displayName;const Ly=m.forwardRef(({className:t,...e},n)=>a.jsx(pP,{ref:n,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ly.displayName=pP.displayName;function eW(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function tW(){const{user:t,requestCalendarPermissions:e}=Tt(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=ml(at(Ye,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await nn(at(Ye,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await nn(at(Ye,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await nn(at(Ye,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Le,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(ji,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Ss,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(le,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(le,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx($a,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(wn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(wn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(jf,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Le,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Wv,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(po,{href:"/settings/notifications",children:a.jsx(le,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function nW(){var k,j;const{user:t,signOut:e}=Tt(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i}=qr(),{isInstallable:o,isInstalled:l,promptInstall:c}=eW(),{theme:u,setTheme:h}=Yx(),[f,p]=m.useState(!0),[x,b]=m.useState("auto"),[y,w]=m.useState(!1),_=((k=t==null?void 0:t.displayName)==null?void 0:k.split(" ").map(O=>O[0]).join("").toUpperCase())||((j=t==null?void 0:t.email)==null?void 0:j[0].toUpperCase())||"U",v=()=>n?n.toLocaleString():"Never",T=async()=>{w(!0);try{await c()}catch(O){console.error("Install failed:",O)}finally{w(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(ZH,{defaultValue:"general",className:"w-full",children:[a.jsxs(gP,{className:"grid w-full grid-cols-2 lg:w-[400px] mb-6",children:[a.jsx(My,{value:"general",children:"General"}),a.jsx(My,{value:"integrations",children:"Integrations"})]}),a.jsxs(Ly,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{className:"text-base",children:"Connected Account"}),a.jsx(Nn,{children:"Your Google account linked to this app"})]}),a.jsxs(Ze,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Zs,{className:"h-12 w-12",children:[a.jsx(ei,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(ti,{children:_})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Th,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(lr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",v()]})]}),a.jsxs(le,{variant:"outline",size:"sm",onClick:O=>{O.preventDefault(),s().catch(C=>{console.error("Sync failed:",C)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(jf,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{className:"text-base",children:"Sync Settings"}),a.jsx(Nn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(wn,{id:"background-sync",checked:f,onCheckedChange:p,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{className:"text-base",children:"Theme"}),a.jsx(Nn,{children:"Choose your preferred color theme"})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(le,{variant:u==="light"?"default":"outline",size:"sm",onClick:()=>h("light"),className:"flex items-center gap-2",children:[a.jsx(Gv,{className:"h-4 w-4"}),"Light"]}),a.jsxs(le,{variant:u==="dark"?"default":"outline",size:"sm",onClick:()=>h("dark"),className:"flex items-center gap-2",children:[a.jsx(Pf,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Le,{className:"border-primary/20",children:[a.jsxs(ut,{children:[a.jsxs(ht,{className:"text-base flex items-center gap-2",children:[a.jsx(q1,{className:"h-4 w-4"}),"Install App"]}),a.jsx(Nn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(Ze,{className:"space-y-4",children:l?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Th,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):o?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(BM,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(le,{onClick:T,disabled:y,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(q1,{className:"h-4 w-4 mr-2"}),y?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(Df,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{className:"text-base",children:"Preferences"}),a.jsx(Nn,{children:"Customize your experience"})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(af,{value:x,onValueChange:b,children:[a.jsx(Xc,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(lf,{})}),a.jsxs(Yc,{children:[a.jsx(wt,{value:"auto",children:"Auto-detect"}),a.jsx(wt,{value:"America/New_York",children:"Eastern Time"}),a.jsx(wt,{value:"America/Chicago",children:"Central Time"}),a.jsx(wt,{value:"America/Denver",children:"Mountain Time"}),a.jsx(wt,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(wt,{value:"Europe/London",children:"London"}),a.jsx(wt,{value:"Europe/Paris",children:"Paris"}),a.jsx(wt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsxs(ht,{className:"text-base flex items-center gap-2",children:[a.jsx(Oc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(Nn,{children:"Manage your session"})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(h2,{children:[a.jsx(f2,{asChild:!0,children:a.jsxs(le,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(a0,{children:[a.jsxs(l0,{children:[a.jsx(u0,{children:"Are you absolutely sure?"}),a.jsx(d0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(c0,{children:[a.jsx(f0,{children:"Cancel"}),a.jsx(h0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(Ly,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(tW,{})})]})]})}function rW(){const{user:t,requestGmailPermissions:e,accessToken:n}=Tt(),{toast:r}=Io(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function b(){if(t)try{const y=at(Ye,"users",t.uid,"settings","notifications"),w=await Eo(y);if(w.exists()){const _=w.data();i(_.enabled??!1),l(_.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(y){console.error("Failed to load settings from Firestore",y)}finally{f(!1)}}b()},[t]),m.useEffect(()=>{async function b(){if(!(!t||h))try{const w=at(Ye,"users",t.uid,"settings","notifications");await nn(w,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(w){console.error("Failed to save settings",w)}}const y=setTimeout(b,1e3);return()=>clearTimeout(y)},[s,o,t,h]);const p=async()=>{u(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const y={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},w=`trace_email_events_${t.uid}`,_=JSON.parse(localStorage.getItem(w)||"[]");localStorage.setItem(w,JSON.stringify([..._,y]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(b){console.error(b),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},x=b=>{l(y=>({...y,[b]:!y[b]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(po,{href:"/settings",children:a.jsx(le,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(MC,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Le,{className:"border-border shadow-sm",children:[a.jsxs(ut,{className:"pb-4",children:[a.jsxs(ht,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(Wv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(Nn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(lr,{}),a.jsxs(Ze,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(wn,{checked:o.dueReminder,onCheckedChange:()=>x("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(lr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(wn,{checked:o.missedSubmission,onCheckedChange:()=>x("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(lr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Pn,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(wn,{checked:o.workloadWarning,onCheckedChange:()=>x("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(S0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(za,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(le,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(Df,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(le,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx($a,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function sW(){const[t,e]=Lv(),{user:n,requestCalendarPermissions:r}=Tt(),{toast:s}=Io(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const b=ml(at(Ye,"users",n.uid,"settings","calendar"),y=>{y.exists()&&h(y.data()),o(!1)});return()=>b()},[n]);const f=async()=>{c(!0);try{await r()?(await nn(at(Ye,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(b){console.error(b),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await nn(at(Ye,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(b){console.error(b)}},x=async(b,y)=>{h(w=>({...w,[b]:y}));try{await nn(at(Ye,"users",n.uid,"settings","calendar"),{[b]:y},{merge:!0})}catch(w){console.error(w)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx($a,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(le,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(SM,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Le,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(ut,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(ji,{className:"h-6 w-6"})}),a.jsx(ht,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Ss,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(Nn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(le,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(le,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx($a,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(Ze,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(lr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(wn,{checked:u.syncAssignments,onCheckedChange:b=>x("syncAssignments",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(wn,{checked:u.syncExams,onCheckedChange:b=>x("syncExams",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(wn,{checked:u.syncPersonal,onCheckedChange:b=>x("syncPersonal",b)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(jf,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(iW,{})]})]})}function iW(){const{user:t,requestGmailPermissions:e}=Tt(),{toast:n}=Io(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=ml(at(Ye,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await nn(at(Ye,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await nn(at(Ye,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await nn(at(Ye,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Le,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(ut,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(ht,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Ss,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(Nn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(le,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(le,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx($a,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(Ze,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(lr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(wn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(wn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}var P0="Progress",j0=100,[oW,qW]=Kn(P0),[aW,lW]=oW(P0),yP=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=cW,...o}=t;(s||s===0)&&!pE(s)&&console.error(uW(`${s}`,"Progress"));const l=pE(s)?s:j0;r!==null&&!gE(r,l)&&console.error(dW(`${r}`,"Progress"));const c=gE(r,l)?r:null,u=cf(c)?i(c,l):void 0;return a.jsx(aW,{scope:n,value:c,max:l,children:a.jsx(ve.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cf(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":wP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});yP.displayName=P0;var vP="ProgressIndicator",xP=m.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=lW(vP,n);return a.jsx(ve.div,{"data-state":wP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});xP.displayName=vP;function cW(t,e){return`${Math.round(t/e*100)}%`}function wP(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function cf(t){return typeof t=="number"}function pE(t){return cf(t)&&!isNaN(t)&&t>0}function gE(t,e){return cf(t)&&!isNaN(t)&&t<=e&&t>=0}function uW(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${j0}\`.`}function dW(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${j0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _P=yP,hW=xP;const bP=m.forwardRef(({className:t,value:e,...n},r)=>a.jsx(_P,{ref:r,className:q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(hW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));bP.displayName=_P.displayName;function fW(){var I,A,D,P,B,ie;const{user:t,signOut:e}=Tt(),{courses:n,assignments:r,isLoading:s}=qr(),[i,o]=m.useState("class"),[l,c]=m.useState([]),[u,h]=m.useState(!1),[f,p]=m.useState(!0),[x,b]=m.useState(!0),[y,w]=m.useState(!1),[_,v]=m.useState(0),[T,k]=m.useState("Initializing...");m.useEffect(()=>{h(!0);const F=Array.from(new Set(["all-courses",...n.map($=>$.id)])),G=[],L=new Map,M=()=>{const $=[],z=t!=null&&t.email?t.email.split("@")[1]:null,X=n.map(Z=>Z.id),J=new Set(r.map(Z=>Z.id));L.forEach(Z=>{const ce=Z.email||"";let ee=Z.emailDomain||"";!ee&&ce.includes("@")&&(ee=ce.split("@")[1]);const H=Z.enrolledCourseIds||[],te=Z.processedAssignmentIds||[],pe=z&&ee&&z===ee,re=X.some(Pe=>H.includes(Pe)),de=!ee&&te.some(Pe=>J.has(Pe));let ke=!1;i==="college"?(ke=!!pe,(Z.id===(t==null?void 0:t.uid)||pe)&&console.log(`[College Filter] Student: ${Z.displayName}, Domain: ${ee}, User Domain: ${z}, Match: ${pe}`)):ke=pe&&re||de,ke&&$.push(Z)}),$.sort((Z,ce)=>ce.totalXP-Z.totalXP),c($),h(!1)};return F.forEach($=>{const z=$x(Ye,"leaderboards",$,"students"),X=Kx(z,Qx("totalXP","desc"),uk(50)),J=ml(X,Z=>{Z.forEach(ce=>{const ee=ce.data(),H={id:ce.id,displayName:ee.displayName||ee.name||"Anonymous",photoUrl:ee.photoUrl||ee.avatar||"",totalXP:ee.totalXP||ee.xp||0,processedAssignmentIds:ee.processedAssignmentIds||ee.completedTasks||[],email:ee.email||"",emailDomain:ee.emailDomain||(ee.email?ee.email.split("@")[1]:""),enrolledCourseIds:ee.enrolledCourseIds||ee.subjects||[]},te=L.get(ce.id);(!te||H.totalXP>=te.totalXP)&&L.set(ce.id,H)}),M()});G.push(J)}),()=>{G.forEach($=>$())}},[i,t,n,r]);const j=async()=>{if(!t)return;w(!0),v(5),k("Fetching historical classroom data...");const F=r;v(20),k(`Scanning ${F.length} past assignments...`);let G=0;const L=[],M=z=>new Promise(X=>setTimeout(X,z));let $=0;for(const z of F)if($++,$%5===0&&(v(20+$/F.length*60),await M(10)),z.systemStatus==="submitted"||z.systemStatus==="graded"){if(G+=100,z.submittedAt&&z.dueDate){const J=new Date(z.submittedAt).getTime();(new Date(z.dueDate).getTime()-J)/(1e3*60*60)>48&&(G+=50)}L.push(z.id)}v(90),k("Syncing to leaderboard...");try{const z=at(Ye,"leaderboards","all-courses","students",t.uid),X=t.email||"",J=X.includes("@")?X.split("@")[1]:"",Z=n.map(ce=>ce.id);await nn(z,{displayName:t.displayName||"Anonymous",photoUrl:t.photoURL||"",email:X,emailDomain:J,enrolledCourseIds:Z,totalXP:G,processedAssignmentIds:L,lastSyncedAt:gm()},{merge:!0}),v(100),k("Synchronization Complete!"),await M(500)}catch(z){console.error("Sync Failed",z),k("Sync Failed. Please try again.")}finally{w(!1)}},O=i==="class"?"My Class":"My College",C=l.find(F=>F.id===(t==null?void 0:t.uid)),S=(C==null?void 0:C.totalXP)||0,N=!!C&&S>0;return!s&&n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx(tn,{className:"h-12 w-12 mx-auto text-destructive"}),a.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),a.jsx(le,{onClick:()=>e(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[O," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(af,{value:i,onValueChange:F=>o(F),children:[a.jsx(Xc,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(lf,{placeholder:"Select View"})}),a.jsxs(Yc,{children:[a.jsx(wt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(wt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[f&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>p(!1),children:a.jsx(xi,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(PM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),i==="college"&&x&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>b(!1),children:a.jsx(xi,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(WC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(Df,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!N&&!u||y?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:y?a.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs font-mono uppercase text-muted-foreground",children:[a.jsx("span",{children:T}),a.jsxs("span",{children:[Math.round(_),"%"]})]}),a.jsx(bP,{value:_,className:"h-2"})]}):a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(UM,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"No Score Detected"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Calculate your XP based on all your past submitted assignments to join the leaderboard."})]}),a.jsx(le,{onClick:j,size:"lg",className:"mt-2 font-semibold w-full sm:w-auto",children:"Calculate My Archive Score"})]})}):null,u&&l.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},F))}):l.length===0&&!y?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[l.length>0&&a.jsxs("div",{className:q("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",f?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:l[1]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(Zs,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(ei,{src:l[1].photoUrl}),a.jsx(ti,{className:"text-lg bg-zinc-100 text-zinc-500",children:(A=(I=l[1].displayName)==null?void 0:I[0])==null?void 0:A.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[1].totalXP.toLocaleString()," XP"]})]})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(AM,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(Zs,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(ei,{src:l[0].photoUrl}),a.jsx(ti,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(P=(D=l[0].displayName)==null?void 0:D[0])==null?void 0:P.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:l[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[l[0].totalXP.toLocaleString()," XP"]})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:l[2]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(Zs,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(ei,{src:l[2].photoUrl}),a.jsx(ti,{className:"text-lg bg-amber-50 text-amber-700",children:(ie=(B=l[2].displayName)==null?void 0:B[0])==null?void 0:ie.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[2].totalXP.toLocaleString()," XP"]})]})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:l.slice(3).map((F,G)=>{var $,z;const L=F.id===(t==null?void 0:t.uid),M=G+4;return a.jsxs("div",{className:q("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",L?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:["#",M]})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(Zs,{className:q("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",L?"border-primary/20":"border-border"),children:[a.jsx(ei,{src:F.photoUrl}),a.jsx(ti,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(z=($=F.displayName)==null?void 0:$[0])==null?void 0:z.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:q("text-xs sm:text-sm font-medium truncate",L?"text-primary":"text-foreground"),children:[F.displayName," ",L&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-1 sm:ml-2",children:"(You)"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[F.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:F.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},F.id)})})]})]})})]})}const EP=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:q("w-full caption-bottom text-sm",t),...e})}));EP.displayName="Table";const SP=m.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:q("[&_tr]:border-b",t),...e}));SP.displayName="TableHeader";const TP=m.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:q("[&_tr:last-child]:border-0",t),...e}));TP.displayName="TableBody";const mW=m.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));mW.displayName="TableFooter";const Vy=m.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Vy.displayName="TableRow";const Fy=m.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Fy.displayName="TableHead";const Uy=m.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:q("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Uy.displayName="TableCell";const pW=m.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:q("mt-4 text-sm text-muted-foreground",t),...e}));pW.displayName="TableCaption";const yE="attendance_configs",rr={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await nn(at(Ye,yE,t),n)},async getCourseConfig(t){try{const e=at(Ye,yE,t),n=await Eo(e);return n.exists()?n.data():null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var w;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=r.toUpperCase().charCodeAt(0)-65,o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,l=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw l.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):l.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const u=(await l.json()).values;if(!u||u.length<2)throw new Error("Sheet is empty or invalid format.");const h=u[0],f=u.find(_=>{var T;return((T=_[s])==null?void 0:T.toLowerCase().trim())===n.toLowerCase().trim()});if(!f)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let p=0,x=0;const b=[];for(let _=1;_<h.length;_++){const v=h[_],T=(w=f[_])==null?void 0:w.toUpperCase().trim();if(!v)continue;let k="Unknown";T==="P"||T==="PRESENT"||T==="1"?(k="Present",x++,p++):(T==="A"||T==="ABSENT"||T==="0")&&(k="Absent",p++),k!=="Unknown"&&b.push({date:v,status:k})}const y=p===0?0:Math.round(x/p*100);return{courseId:t,stats:{totalClasses:p,attendedClasses:x,percentage:y},history:b.reverse()}}},gW=s0,yW=i0,CP=m.forwardRef(({className:t,...e},n)=>a.jsx(wu,{ref:n,className:q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));CP.displayName=wu.displayName;const NP=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(yW,{children:[a.jsx(CP,{}),a.jsxs(_u,{ref:r,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(vm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(xi,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));NP.displayName=_u.displayName;const IP=({className:t,...e})=>a.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});IP.displayName="DialogHeader";const AP=({className:t,...e})=>a.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});AP.displayName="DialogFooter";const kP=m.forwardRef(({className:t,...e},n)=>a.jsx(bu,{ref:n,className:q("text-lg font-semibold leading-none tracking-tight",t),...e}));kP.displayName=bu.displayName;const RP=m.forwardRef(({className:t,...e},n)=>a.jsx(Eu,{ref:n,className:q("text-sm text-muted-foreground",t),...e}));RP.displayName=Eu.displayName;const vE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function vW(){const{courses:t}=qr(),{accessToken:e,user:n}=Tt(),{toast:r}=Io(),[s,i]=m.useState(""),[o,l]=m.useState({}),[c,u]=m.useState(""),[h,f]=m.useState(null),[p,x]=m.useState(!1);m.useEffect(()=>{if(!t)return;(async()=>{const N=await Promise.all(t.map(async A=>{var P;if(((P=o[A.id])==null?void 0:P.state)==="loaded")return o[A.id];const D=await rr.getCourseConfig(A.id);return console.log(`[DEBUG] Course ${A.name} (${A.id}): Config =`,D),D?D.isVisible?sessionStorage.getItem(`unlocked_${A.id}`)==="true"?(b(A.id,D.sheetUrl),{courseId:A.id,state:"loading"}):{courseId:A.id,state:"locked"}:{courseId:A.id,state:"hidden"}:{courseId:A.id,state:"no-config"}})),I={};N.forEach(A=>{I[A.courseId]=A}),l(A=>({...A,...I}))})()},[t]),m.useEffect(()=>{t.length>0&&!s&&i(t[0].id)},[t,s]);const b=async(S,N)=>{if(!e||!(n!=null&&n.email))return;const I=rr.extractSheetId(N);if(!I){l(P=>({...P,[S]:{courseId:S,state:"error",error:"Invalid configuration"}}));return}const A=await rr.getCourseConfig(S),D=(A==null?void 0:A.emailColumn)||"A";try{const P=await rr.fetchAttendanceFromSheet(I,e,n.email,D);l(B=>({...B,[S]:{courseId:S,state:"loaded",data:P}}))}catch(P){console.error(P),l(B=>({...B,[S]:{courseId:S,state:"error",error:P.message||"Failed to load"}}))}},y=async()=>{if(!h)return;if(await rr.validatePassKey(h,c)){sessionStorage.setItem(`unlocked_${h}`,"true"),f(null),u(""),r({title:"Course Unlocked",description:"Fetching attendance details..."}),l(I=>({...I,[h]:{courseId:h,state:"loading"}}));const N=await rr.getCourseConfig(h);N&&b(h,N.sheetUrl)}else r({title:"Incorrect Key",description:"Please ask your teacher for the correct pass key.",variant:"destructive"})},w=async()=>{x(!0);const S=Object.values(o).filter(N=>N.state==="loaded"||N.state==="error"||N.state==="loading").map(async N=>{const I=await rr.getCourseConfig(N.courseId);return I?b(N.courseId,I.sheetUrl):Promise.resolve()});await Promise.allSettled(S),x(!1)},_=Object.values(o).filter(S=>S.state==="loaded"&&S.data),v=_.reduce((S,N)=>{var I;return S+(((I=N.data)==null?void 0:I.stats.attendedClasses)||0)},0),T=_.reduce((S,N)=>{var I;return S+(((I=N.data)==null?void 0:I.stats.totalClasses)||0)},0),k=vE(v,T),j=o[s],O=t.find(S=>S.id===s),C=j==null?void 0:j.data;return a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"flex-none px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-lg font-semibold tracking-tight text-foreground",children:"Attendance"}),a.jsx("span",{className:"h-4 w-px bg-border mx-1"}),a.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Academic Year 2024-25"})]}),a.jsxs(le,{variant:"ghost",size:"sm",onClick:w,className:q("text-muted-foreground h-8",p&&"opacity-70"),children:[a.jsx(Mc,{className:q("h-3.5 w-3.5 mr-2",p&&"animate-spin")}),"Sync Now"]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:a.jsx(Le,{className:"border-border shadow-sm bg-card transition-colors",children:a.jsx(Ze,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Ss,{variant:k.status==="safe"?"outline":"destructive",className:q("ml-2 h-5 text-[10px] px-1.5 uppercase",k.color),children:k.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground",children:[k.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",_.length," active courses"]})]})]})})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(S=>{var P,B;const N=o[S.id],I=(N==null?void 0:N.state)||"loading",A=N!=null&&N.data?vE(N.data.stats.attendedClasses,N.data.stats.totalClasses):null,D=s===S.id;return a.jsx(Le,{className:q("group cursor-pointer border-border shadow-sm hover:shadow-md transition-all duration-200 bg-card active:scale-[0.99]",D&&"ring-1 ring-primary border-primary"),onClick:()=>i(S.id),children:a.jsxs(Ze,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(LN,{children:[a.jsx(VN,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:S.name})}),a.jsx(ix,{children:a.jsx("p",{children:S.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:S.section||"No Section"})]}),I==="loaded"&&A&&a.jsxs("span",{className:q("text-lg font-bold tabular-nums",A.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[A.percentage,"%"]}),I==="hidden"&&a.jsx(Kg,{className:"h-5 w-5 text-muted-foreground/50"}),I==="locked"&&a.jsx(K1,{className:"h-5 w-5 text-amber-500/80"}),I==="error"&&a.jsx(Df,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[I==="loaded"&&A&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(P=N.data)==null?void 0:P.stats.attendedClasses,"/",(B=N.data)==null?void 0:B.stats.totalClasses," classes"]}),a.jsx("span",{className:A.status==="safe"?"text-emerald-500":"text-red-500",children:A.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:q("h-full rounded-full transition-all duration-500",A.progressColor),style:{width:`${A.percentage}%`}})})]}),I==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(le,{size:"sm",variant:"secondary",className:"w-full",onClick:ie=>{ie.stopPropagation(),f(S.id)},children:[a.jsx(jM,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),I==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),I==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),I==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:N==null?void 0:N.error}),I==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Mc,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},S.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(VC,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(O==null?void 0:O.section)||(O==null?void 0:O.name.slice(0,3).toUpperCase())})]}),a.jsx(Le,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:C?a.jsx("div",{className:"max-h-full overflow-y-auto",children:a.jsxs(EP,{children:[a.jsx(SP,{className:"sticky top-0 bg-card z-10 border-b border-border",children:a.jsxs(Vy,{className:"border-none",children:[a.jsx(Fy,{className:"w-[100px] text-xs",children:"Date"}),a.jsx(Fy,{className:"text-right text-xs",children:"Status"})]})}),a.jsx(TP,{children:C.history.map((S,N)=>a.jsxs(Vy,{className:"border-b border-border/50 hover:bg-muted/30",children:[a.jsx(Uy,{className:"font-mono text-xs text-muted-foreground py-2.5",children:S.date}),a.jsx(Uy,{className:"text-right py-2.5",children:a.jsx("span",{className:q("inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium",S.status==="Present"?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"),children:S.status})})]},N))})]})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(j==null?void 0:j.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(K1,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(j==null?void 0:j.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(Kg,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((j==null?void 0:j.state)==="error"||(j==null?void 0:j.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(tn,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})}),a.jsx(gW,{open:!!h,onOpenChange:S=>!S&&f(null),children:a.jsxs(NP,{className:"sm:max-w-md",children:[a.jsxs(IP,{children:[a.jsx(kP,{children:"Unlock Attendance"}),a.jsx(RP,{children:"Enter the pass key provided by your teacher to view attendance for this course."})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pn,{htmlFor:"pass-key",children:"Pass Key"}),a.jsx(_a,{id:"pass-key",type:"password",placeholder:"ENTER-KEY",value:c,onChange:S=>u(S.target.value),className:"uppercase tracking-widest font-mono text-center text-lg"})]})}),a.jsxs(AP,{children:[a.jsx(le,{variant:"outline",onClick:()=>f(null),children:"Cancel"}),a.jsx(le,{onClick:y,children:"Unlock Access"})]})]})})]})}function xW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Le,{className:"w-full max-w-md mx-4",children:a.jsxs(Ze,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(tn,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const wW=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function D0({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:wW;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx($a,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(WC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Student Sphere Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(LC,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(FM,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const _W=["You can hide attendance visibility for specific courses during exams.","Secure pass keys are auto-generated for each course sheet.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function bW({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,x;const{user:s,signOut:i}=Tt(),{theme:o,toggleTheme:l}=Yx(),c=xm(),u=[{id:"dashboard",label:"Dashboard",icon:DM},{id:"courses",label:"Courses",icon:Hv},{id:"settings",label:"Settings",icon:HC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(b=>b[0]).join("").toUpperCase())||((x=s==null?void 0:s.email)==null?void 0:x[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(xi,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(Zs,{className:"h-8 w-8",children:[a.jsx(ei,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(ti,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(b=>a.jsxs("button",{onClick:()=>{e(b.id),c&&r()},className:q("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===b.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(b.icon,{className:"h-4 w-4"}),b.label]},b.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(Gv,{className:"w-4 h-4 mr-3"}):a.jsx(Pf,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(le,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Oc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:q("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function EW({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>rr.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Le,{className:"border-border shadow-sm",children:[a.jsxs(ut,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ht,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(Hv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ze,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Le,{className:"border-border shadow-sm",children:[a.jsxs(ut,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ht,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(kM,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(Ze,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Le,{className:"border-border shadow-sm",children:[a.jsxs(ut,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ht,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(Kg,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(Ze,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function SW({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(le,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(Mc,{className:q("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Le,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(le,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(TW,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(le,{variant:"link",onClick:e,children:"Try Syncing Again"})]})]})]})}function TW({courseId:t}){const{toast:e}=Io(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState("A"),[h,f]=m.useState(!1),[p,x]=m.useState(!0);m.useEffect(()=>{let y=!0;return(async()=>{x(!0);const _=await rr.getCourseConfig(t);y&&_?(r(_.isVisible),l(_.passKey),i(_.sheetUrl),u(_.emailColumn||"A")):y&&l(Math.random().toString(36).slice(-8).toUpperCase()),y&&x(!1)})(),()=>{y=!1}},[t]);const b=async()=>{if(!rr.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}f(!0);try{await rr.saveCourseConfig(t,{sheetUrl:s,passKey:o,isVisible:n,emailColumn:c.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>f(!1),2e3)}catch{f(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return p?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Mc,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ss,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(wn,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pn,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(_a,{id:`sheet-${t}`,value:s,onChange:y=>i(y.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pn,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(_a,{id:`email-col-${t}`,value:c,onChange:y=>u(y.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pn,{htmlFor:`key-${t}`,children:"Pass Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_a,{id:`key-${t}`,type:"text",value:o,readOnly:!0,className:"font-mono bg-muted flex-1"}),a.jsx(le,{variant:"outline",size:"icon",title:"Copy to Clipboard",onClick:()=>{navigator.clipboard.writeText(o),e({title:"Copied!",description:"Pass key copied to clipboard."})},children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a.jsx(le,{variant:"outline",size:"icon",title:"Regenerate Key",onClick:()=>l(Math.random().toString(36).slice(-8).toUpperCase()),children:a.jsx(Mc,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this key with your students. They will need it to access attendance data."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(le,{onClick:b,disabled:h,className:"w-full sm:w-auto",children:h?a.jsxs(a.Fragment,{children:[a.jsx(NM,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(qv,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function CW(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{children:"Notifications"}),a.jsx(Nn,{children:"Configure how you receive alerts."})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_M,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Pn,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(wn,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Le,{children:[a.jsxs(ut,{children:[a.jsx(ht,{children:"Display"}),a.jsx(Nn,{children:"Customize your dashboard appearance."})]}),a.jsx(Ze,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pf,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Pn,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function NW(){const{accessToken:t}=Tt(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(D0,{message:"Preparing Teacher Workspace...",tips:_W}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(bW,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(le,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(BC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(EW,{courses:r}),e==="courses"&&a.jsx(SW,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(CW,{})]})]})]})}function IW(){const{signOut:t,signInWithGoogle:e}=Tt();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Le,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(ut,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(IM,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(ht,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(Nn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(Ze,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(FC,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Hv,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(LC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ji,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(S0,{className:"flex flex-col gap-2",children:[a.jsx(le,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(le,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Oc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}const AW=()=>"/";function kW(){const[t,e]=m.useState(!1),{isLoading:n}=qr(),r=AW();return n?a.jsx(D0,{message:"Setting up your workspace..."}):a.jsx(JT,{base:r,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(T7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(C7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(X4,{children:[a.jsx(Nr,{path:"/",component:WB}),a.jsx(Nr,{path:"/leaderboard",component:fW}),a.jsx(Nr,{path:"/timeline",component:TH}),a.jsx(Nr,{path:"/dashboard",component:IH}),a.jsx(Nr,{path:"/notes",component:AH}),a.jsx(Nr,{path:"/attendance",component:vW}),a.jsx(Nr,{path:"/settings",component:nW}),a.jsx(Nr,{path:"/settings/notifications",component:rW}),a.jsx(Nr,{path:"/settings/integrations",component:sW}),a.jsx(Nr,{component:xW})]})})]})]})})}function RW(){const{user:t,loading:e,role:n}=Tt();return e?a.jsx(D0,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(NW,{}):n==="no_access"?a.jsx(IW,{}):a.jsx(nz,{children:a.jsx(kW,{})}):a.jsx(L7,{})}function PW(){return a.jsx(wO,{client:EO,children:a.jsx(K8,{children:a.jsx(G8,{children:a.jsxs(MN,{children:[a.jsx(NL,{}),a.jsx(RW,{})]})})})})}zT(document.getElementById("root")).render(a.jsx(PW,{}));
